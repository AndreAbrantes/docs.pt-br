---
title: Delegados vs. eventos
description: Saber a diferença entre delegados e eventos e quando usar cada um desses recursos do .NET Core.
ms.date: 06/20/2016
ms.technology: csharp-fundamentals
ms.assetid: 0fdc8629-2fdb-4a7c-a433-5b9d04eaf911
ms.openlocfilehash: 193a9b0fe0e0c36deb6552449c92135057412225
ms.sourcegitcommit: b1f4756120deaecb8b554477bb040620f69a4209
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/03/2020
ms.locfileid: "89414663"
---
# <a name="distinguishing-delegates-and-events"></a><span data-ttu-id="69030-103">Distinção entre Delegados e Eventos</span><span class="sxs-lookup"><span data-stu-id="69030-103">Distinguishing Delegates and Events</span></span>

[<span data-ttu-id="69030-104">Anterior</span><span class="sxs-lookup"><span data-stu-id="69030-104">Previous</span></span>](modern-events.md)

<span data-ttu-id="69030-105">Desenvolvedores que são novos na plataforma .NET Core geralmente têm dificuldades para decidir entre um design baseado em `delegates` e um design baseado em `events`.</span><span class="sxs-lookup"><span data-stu-id="69030-105">Developers that are new to the .NET Core platform often struggle when deciding between a design based on `delegates` and a design based on `events`.</span></span> <span data-ttu-id="69030-106">A escolha de delegados ou eventos costuma ser difícil, pois os dois recursos de linguagem são semelhantes.</span><span class="sxs-lookup"><span data-stu-id="69030-106">The choice of delegates or events is often difficult, because the two language features are similar.</span></span> <span data-ttu-id="69030-107">De fato, os eventos são criados usando o suporte de linguagem para delegados.</span><span class="sxs-lookup"><span data-stu-id="69030-107">Events are even built using the language support for delegates.</span></span>

<span data-ttu-id="69030-108">Ambas oferecem um cenário de associação tardia: elas permitem cenários em que um componente se comunica chamando um método que é conhecido somente em runtime.</span><span class="sxs-lookup"><span data-stu-id="69030-108">They both offer a late binding scenario: they enable scenarios where a component communicates by calling a method that is only known at runtime.</span></span> <span data-ttu-id="69030-109">Ambas dão suporte a métodos de assinante único e vários assinantes.</span><span class="sxs-lookup"><span data-stu-id="69030-109">They both support single and multiple subscriber methods.</span></span> <span data-ttu-id="69030-110">Você pode ver esse suporte ser chamado de singlecast e multicast.</span><span class="sxs-lookup"><span data-stu-id="69030-110">You may find this referred to as singlecast and multicast support.</span></span> <span data-ttu-id="69030-111">Ambas dão suporte a uma sintaxe semelhante para adicionar e remover manipuladores.</span><span class="sxs-lookup"><span data-stu-id="69030-111">They both support similar syntax for adding and removing handlers.</span></span> <span data-ttu-id="69030-112">Por fim, acionar um evento e chamar um delegado usam exatamente a mesma sintaxe de chamada de método.</span><span class="sxs-lookup"><span data-stu-id="69030-112">Finally, raising an event and calling a delegate use exactly the same method call syntax.</span></span> <span data-ttu-id="69030-113">As duas até mesmo dão suporte à mesma sintaxe de método `Invoke()` para uso com o operador `?.`.</span><span class="sxs-lookup"><span data-stu-id="69030-113">They even both support the same `Invoke()` method syntax for use with the `?.` operator.</span></span>

<span data-ttu-id="69030-114">Com todas essas semelhanças, é fácil de ter problemas para determinar quando usar qual.</span><span class="sxs-lookup"><span data-stu-id="69030-114">With all those similarities, it is easy to have trouble determining when to use which.</span></span>

## <a name="listening-to-events-is-optional"></a><span data-ttu-id="69030-115">Ouvir eventos é opcional</span><span class="sxs-lookup"><span data-stu-id="69030-115">Listening to Events is Optional</span></span>

<span data-ttu-id="69030-116">O aspecto mais importante para determinar qual recurso da linguagem usar é se é necessário ou não que haja um assinante anexado.</span><span class="sxs-lookup"><span data-stu-id="69030-116">The most important consideration in determining which language feature to use is whether or not there must be an attached subscriber.</span></span> <span data-ttu-id="69030-117">Se seu código precisar chamar o código fornecido pelo assinante, você deverá usar um design baseado em delegados quando precisar implementar o retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="69030-117">If your code must call the code supplied by the subscriber, you should use a design based on delegates when you need to implement callback.</span></span> <span data-ttu-id="69030-118">Se seu código puder concluir todo o seu trabalho sem chamar nenhum assinante, você deverá usar um design baseado em eventos.</span><span class="sxs-lookup"><span data-stu-id="69030-118">If your code can complete all its work without calling any subscribers, you should use a design based on events.</span></span>

<span data-ttu-id="69030-119">Considere os exemplos criados durante esta seção.</span><span class="sxs-lookup"><span data-stu-id="69030-119">Consider the examples built during this section.</span></span> <span data-ttu-id="69030-120">O código que você criou usando `List.Sort()` deve receber uma função de comparador para classificar corretamente os elementos.</span><span class="sxs-lookup"><span data-stu-id="69030-120">The code you built using `List.Sort()` must be given a comparer function in order to properly sort the elements.</span></span> <span data-ttu-id="69030-121">Consultas de LINQ devem receber delegados para determinar quais elementos retornar.</span><span class="sxs-lookup"><span data-stu-id="69030-121">LINQ queries must be supplied with delegates in order to determine what elements to return.</span></span> <span data-ttu-id="69030-122">Ambos usaram um design criado com delegados.</span><span class="sxs-lookup"><span data-stu-id="69030-122">Both used a design built with delegates.</span></span>

<span data-ttu-id="69030-123">Considere o evento `Progress`.</span><span class="sxs-lookup"><span data-stu-id="69030-123">Consider the `Progress` event.</span></span> <span data-ttu-id="69030-124">Ele relata o progresso de uma tarefa.</span><span class="sxs-lookup"><span data-stu-id="69030-124">It reports progress on a task.</span></span>
<span data-ttu-id="69030-125">A tarefa continua quer haja ouvintes ou não.</span><span class="sxs-lookup"><span data-stu-id="69030-125">The task continues to proceed whether or not there are any listeners.</span></span>
<span data-ttu-id="69030-126">O `FileSearcher` é outro exemplo.</span><span class="sxs-lookup"><span data-stu-id="69030-126">The `FileSearcher` is another example.</span></span> <span data-ttu-id="69030-127">Ele ainda pesquisaria e localizaria todos os arquivos que foram buscados, mesmo que não houvesse assinantes do evento anexados.</span><span class="sxs-lookup"><span data-stu-id="69030-127">It would still search and find all the files that were sought, even with no event subscribers attached.</span></span>
<span data-ttu-id="69030-128">Controles de UX ainda funcionam corretamente, mesmo quando não houver nenhum assinante ouvindo os eventos.</span><span class="sxs-lookup"><span data-stu-id="69030-128">UX controls still work correctly, even when there are no subscribers listening to the events.</span></span> <span data-ttu-id="69030-129">Ambos usam os designs baseados em eventos.</span><span class="sxs-lookup"><span data-stu-id="69030-129">They both use designs based on events.</span></span>

## <a name="return-values-require-delegates"></a><span data-ttu-id="69030-130">Valores retornados exigem delegados</span><span class="sxs-lookup"><span data-stu-id="69030-130">Return Values Require Delegates</span></span>

<span data-ttu-id="69030-131">Outra consideração é o protótipo do método que você gostaria de ter para seu método de delegado.</span><span class="sxs-lookup"><span data-stu-id="69030-131">Another consideration is the method prototype you would want for your delegate method.</span></span> <span data-ttu-id="69030-132">Como você viu, todos os delegados usados para os eventos têm um tipo retornado nulo.</span><span class="sxs-lookup"><span data-stu-id="69030-132">As you've seen, the delegates used for events all have a void return type.</span></span> <span data-ttu-id="69030-133">Você também viu que há expressões para criar manipuladores de eventos que passam informações para as origens dos eventos modificando propriedades do objeto de argumento de evento.</span><span class="sxs-lookup"><span data-stu-id="69030-133">You've also seen that there are idioms to create event handlers that do pass information back to event sources through modifying properties of the event argument object.</span></span> <span data-ttu-id="69030-134">Embora essas expressões funcionem, elas não são tão naturais quanto retornar um valor de um método.</span><span class="sxs-lookup"><span data-stu-id="69030-134">While these idioms do work, they are not as natural as returning a value from a method.</span></span>

<span data-ttu-id="69030-135">Observe que essas duas heurísticas geralmente podem estar presentes: se o método de delegado retornar um valor, provavelmente ele terá impacto sobre o algoritmo de alguma forma.</span><span class="sxs-lookup"><span data-stu-id="69030-135">Notice that these two heuristics may often both be present: If your delegate method returns a value, it will likely impact the algorithm in some way.</span></span>

## <a name="events-have-private-invocation"></a><span data-ttu-id="69030-136">Eventos têm invocação privada</span><span class="sxs-lookup"><span data-stu-id="69030-136">Events Have Private Invocation</span></span>

<span data-ttu-id="69030-137">Classes diferentes daquelas nas quais um evento está contido só podem adicionar e remover ouvintes de evento; somente a classe que contém o evento pode invocar o evento.</span><span class="sxs-lookup"><span data-stu-id="69030-137">Classes other than the one in which an event is contained can only add and remove event listeners; only the class containing the event can invoke the event.</span></span> <span data-ttu-id="69030-138">Normalmente, os eventos são membros da classe pública.</span><span class="sxs-lookup"><span data-stu-id="69030-138">Events are typically public class members.</span></span>
<span data-ttu-id="69030-139">Por comparação, os delegados geralmente são passados como parâmetros e armazenados como membros da classe privada, se forem armazenados.</span><span class="sxs-lookup"><span data-stu-id="69030-139">By comparison, delegates are often passed as parameters and stored as private class members, if they are stored at all.</span></span>

## <a name="event-listeners-often-have-longer-lifetimes"></a><span data-ttu-id="69030-140">Ouvintes de evento frequentemente têm vida útil mais longa</span><span class="sxs-lookup"><span data-stu-id="69030-140">Event Listeners Often Have Longer Lifetimes</span></span>

<span data-ttu-id="69030-141">Esses ouvintes de evento têm tempos de vida mais fracos são uma justificativa ligeiramente mais fraca.</span><span class="sxs-lookup"><span data-stu-id="69030-141">That event listeners have longer lifetimes is a slightly weaker justification.</span></span> <span data-ttu-id="69030-142">No entanto, você pode descobrir que designs baseados em eventos são mais naturais quando a origem do evento for gerar eventos durante um longo período de tempo.</span><span class="sxs-lookup"><span data-stu-id="69030-142">However, you may find that event-based designs are more natural when the event source will be raising events over a long period of time.</span></span> <span data-ttu-id="69030-143">Você pode ver exemplos de design baseado em evento para controles UX em muitos sistemas.</span><span class="sxs-lookup"><span data-stu-id="69030-143">You can see examples of event-based design for UX controls on many systems.</span></span> <span data-ttu-id="69030-144">Quando você assina um evento, a origem do evento pode gerar eventos durante o tempo de vida do programa.</span><span class="sxs-lookup"><span data-stu-id="69030-144">Once you subscribe to an event, the event source may raise events throughout the lifetime of the program.</span></span>
<span data-ttu-id="69030-145">(Você pode cancelar a assinatura de eventos quando não precisar mais deles.)</span><span class="sxs-lookup"><span data-stu-id="69030-145">(You can unsubscribe from events when you no longer need them.)</span></span>

<span data-ttu-id="69030-146">Compare isso com vários designs baseados em delegados, em que um delegado é usado como um argumento para um método e o delegado não é usado depois que o método é retornado.</span><span class="sxs-lookup"><span data-stu-id="69030-146">Contrast that with many delegate-based designs, where a delegate is used as an argument to a method, and the delegate is not used after that method returns.</span></span>

## <a name="evaluate-carefully"></a><span data-ttu-id="69030-147">Avalie cuidadosamente</span><span class="sxs-lookup"><span data-stu-id="69030-147">Evaluate Carefully</span></span>

<span data-ttu-id="69030-148">As considerações acima não são regras rígidas e óbvias.</span><span class="sxs-lookup"><span data-stu-id="69030-148">The above considerations are not hard and fast rules.</span></span> <span data-ttu-id="69030-149">Em vez disso, elas são diretrizes que podem ajudá-lo a decidir qual opção é melhor para seu uso específico.</span><span class="sxs-lookup"><span data-stu-id="69030-149">Instead, they represent guidance that can help you decide which choice is best for your particular usage.</span></span> <span data-ttu-id="69030-150">Como elas são semelhantes, você pode até mesmo fazer protótipos das suas e considerar com qual seria mais natural trabalhar.</span><span class="sxs-lookup"><span data-stu-id="69030-150">Because they are similar, you can even prototype both, and consider which would be more natural to work with.</span></span> <span data-ttu-id="69030-151">Ambas lidam bem com cenários de associação tardia.</span><span class="sxs-lookup"><span data-stu-id="69030-151">They both handle late binding scenarios well.</span></span> <span data-ttu-id="69030-152">Use a que comunica melhor o seu design.</span><span class="sxs-lookup"><span data-stu-id="69030-152">Use the one that communicates your design the best.</span></span>
