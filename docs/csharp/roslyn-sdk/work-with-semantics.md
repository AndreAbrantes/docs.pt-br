---
title: Trabalhar com o modelo semântico do SDK do .NET Compiler Platform
description: Esta visão geral fornece uma compreensão do tipo que pode ser usado para entender e manipular o modelo semântico do código.
ms.date: 10/15/2017
ms.custom: mvc
ms.openlocfilehash: 8575988cd98a4c0ba3f24107788f065f7472f55d
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/14/2020
ms.locfileid: "79156929"
---
# <a name="work-with-semantics"></a><span data-ttu-id="7db01-103">Trabalhar com semântica</span><span class="sxs-lookup"><span data-stu-id="7db01-103">Work with semantics</span></span>

<span data-ttu-id="7db01-104">As [árvores de sintaxe](work-with-syntax.md) representam a estrutura lexical e sintática do código-fonte.</span><span class="sxs-lookup"><span data-stu-id="7db01-104">[Syntax trees](work-with-syntax.md) represent the lexical and syntactic structure of source code.</span></span> <span data-ttu-id="7db01-105">Embora essas informações apenas sejam suficientes para descrever todas as declarações e a lógica na fonte, não são informações suficientes para identificar o que está sendo referenciado.</span><span class="sxs-lookup"><span data-stu-id="7db01-105">Although this information alone is enough to describe all the declarations and logic in the source, it is not enough information to identify what is being referenced.</span></span> <span data-ttu-id="7db01-106">Um nome pode representar:</span><span class="sxs-lookup"><span data-stu-id="7db01-106">A name may represent:</span></span>

- <span data-ttu-id="7db01-107">um tipo</span><span class="sxs-lookup"><span data-stu-id="7db01-107">a type</span></span>
- <span data-ttu-id="7db01-108">um campo</span><span class="sxs-lookup"><span data-stu-id="7db01-108">a field</span></span>
- <span data-ttu-id="7db01-109">um método</span><span class="sxs-lookup"><span data-stu-id="7db01-109">a method</span></span>
- <span data-ttu-id="7db01-110">uma variável local</span><span class="sxs-lookup"><span data-stu-id="7db01-110">a local variable</span></span>

<span data-ttu-id="7db01-111">Embora cada um deles seja exclusivamente diferente, determinar a qual deles um identificador, de fato, se refere exige uma compreensão profunda das regras da linguagem.</span><span class="sxs-lookup"><span data-stu-id="7db01-111">Although each of these is uniquely different, determining which one an identifier actually refers to often requires a deep understanding of the language rules.</span></span>

<span data-ttu-id="7db01-112">Há elementos do programa representados no código-fonte e os programas também podem se referir a bibliotecas compiladas anteriormente, empacotadas em arquivos do assembly.</span><span class="sxs-lookup"><span data-stu-id="7db01-112">There are program elements represented in source code, and programs can also refer to previously compiled libraries, packaged in assembly files.</span></span> <span data-ttu-id="7db01-113">Embora nenhum código-fonte e, portanto, nenhum nó ou árvore de sintaxe, esteja disponível para assemblies, os programas ainda podem se referir a elementos contidos neles.</span><span class="sxs-lookup"><span data-stu-id="7db01-113">Although no source code, and therefore no syntax nodes or trees, are available for assemblies, programs can still refer to elements inside them.</span></span>

<span data-ttu-id="7db01-114">Para essas tarefas, é necessário usar o **Modelo semântico**.</span><span class="sxs-lookup"><span data-stu-id="7db01-114">For those tasks, you need the **Semantic model**.</span></span>

<span data-ttu-id="7db01-115">Além de um modelo sintático do código-fonte, um modelo semântico encapsula as regras da linguagem, fornecendo uma maneira fácil para fazer a correspondência correta de identificadores com o elemento de programa correto que está sendo referenciado.</span><span class="sxs-lookup"><span data-stu-id="7db01-115">In addition to a syntactic model of the source code, a semantic model encapsulates the language rules, giving you an easy way to correctly match identifiers with the correct program element being referenced.</span></span>

## <a name="compilation"></a><span data-ttu-id="7db01-116">Compilação</span><span class="sxs-lookup"><span data-stu-id="7db01-116">Compilation</span></span>

<span data-ttu-id="7db01-117">Uma compilação é uma representação de tudo o que é necessário para compilar um programa do C# ou Visual Basic, que inclui todas as referências de assembly, opções do compilador e arquivos de origem.</span><span class="sxs-lookup"><span data-stu-id="7db01-117">A compilation is a representation of everything needed to compile a C# or Visual Basic program, which includes all the assembly references, compiler options, and source files.</span></span>

<span data-ttu-id="7db01-118">Como todas essas informações estão em um só lugar, os elementos contidos no código-fonte podem ser descritos mais detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="7db01-118">Because all this information is in one place, the elements contained in the source code can be described in more detail.</span></span> <span data-ttu-id="7db01-119">A compilação representa cada tipo, membro ou variável declarada como um símbolo.</span><span class="sxs-lookup"><span data-stu-id="7db01-119">The compilation represents each declared type, member, or variable as a symbol.</span></span> <span data-ttu-id="7db01-120">A compilação contém uma variedade de métodos que ajudam você encontrar e identificar os símbolos que foram declarados no código-fonte ou importados como metadados de um assembly.</span><span class="sxs-lookup"><span data-stu-id="7db01-120">The compilation contains a variety of methods that help you find and relate the symbols that have either been declared in the source code or imported as metadata from an assembly.</span></span>

<span data-ttu-id="7db01-121">Semelhantes às árvores de sintaxe, as compilações são imutáveis.</span><span class="sxs-lookup"><span data-stu-id="7db01-121">Similar to syntax trees, compilations are immutable.</span></span> <span data-ttu-id="7db01-122">Depois de criar uma compilação, ela não pode ser alterada por você ou por outra pessoa com quem você pode está compartilhando.</span><span class="sxs-lookup"><span data-stu-id="7db01-122">After you create a compilation, it cannot be changed by you or anyone else you might be sharing it with.</span></span> <span data-ttu-id="7db01-123">No entanto, é possível criar uma nova compilação com base em uma compilação existente, especificando uma alteração conforme ela é feita.</span><span class="sxs-lookup"><span data-stu-id="7db01-123">However, you can create a new compilation from an existing compilation, specifying a change as you do so.</span></span> <span data-ttu-id="7db01-124">Por exemplo, é possível criar uma compilação que é igual em todos os aspectos a uma compilação existente, com exceção de que ela pode incluir um arquivo de origem ou uma referência de assembly adicional.</span><span class="sxs-lookup"><span data-stu-id="7db01-124">For example, you might create a compilation that is the same in every way as an existing compilation, except it may include an additional source file or assembly reference.</span></span>

## <a name="symbols"></a><span data-ttu-id="7db01-125">Símbolos</span><span class="sxs-lookup"><span data-stu-id="7db01-125">Symbols</span></span>

<span data-ttu-id="7db01-126">Um símbolo representa um elemento distinto declarado pelo código-fonte ou importado de um assembly como metadados.</span><span class="sxs-lookup"><span data-stu-id="7db01-126">A symbol represents a distinct element declared by the source code or imported from an assembly as metadata.</span></span> <span data-ttu-id="7db01-127">Cada namespace, tipo, método, propriedade, campo, evento, parâmetro ou variável local é representado por um símbolo.</span><span class="sxs-lookup"><span data-stu-id="7db01-127">Every namespace, type, method, property, field, event, parameter, or local variable is represented by a symbol.</span></span>

<span data-ttu-id="7db01-128">Uma variedade de métodos e propriedades no tipo <xref:Microsoft.CodeAnalysis.Compilation> ajudam você a encontrar símbolos.</span><span class="sxs-lookup"><span data-stu-id="7db01-128">A variety of methods and properties on the <xref:Microsoft.CodeAnalysis.Compilation> type help you find symbols.</span></span> <span data-ttu-id="7db01-129">Por exemplo, encontre um símbolo para um tipo declarado pelo seu nome comum de metadados.</span><span class="sxs-lookup"><span data-stu-id="7db01-129">For example, you can find a symbol for a declared type by its common metadata name.</span></span> <span data-ttu-id="7db01-130">Também acesse a tabela inteira de símbolos como uma árvore de símbolos com raiz no namespace global.</span><span class="sxs-lookup"><span data-stu-id="7db01-130">You can also access the entire symbol table as a tree of symbols rooted by the global namespace.</span></span>

<span data-ttu-id="7db01-131">Os símbolos também contêm informações adicionais que o compilador determina da fonte ou dos metadados, como outros símbolos referenciados.</span><span class="sxs-lookup"><span data-stu-id="7db01-131">Symbols also contain additional information that the compiler determines from the source or metadata, such as other referenced symbols.</span></span> <span data-ttu-id="7db01-132">Cada tipo de símbolo é representado por uma interface separada derivada de <xref:Microsoft.CodeAnalysis.ISymbol>, cada um com seus próprios métodos e propriedades que fornecem detalhes das informações reunidas pelo compilador.</span><span class="sxs-lookup"><span data-stu-id="7db01-132">Each kind of symbol is represented by a separate interface derived from <xref:Microsoft.CodeAnalysis.ISymbol>, each with its own methods and properties detailing the information the compiler has gathered.</span></span> <span data-ttu-id="7db01-133">Muitas dessas propriedades referenciam outros símbolos diretamente.</span><span class="sxs-lookup"><span data-stu-id="7db01-133">Many of these properties directly reference other symbols.</span></span> <span data-ttu-id="7db01-134">Por exemplo, a propriedade <xref:Microsoft.CodeAnalysis.IMethodSymbol.ReturnType?displayProperty=nameWithType> informa o símbolo de tipo real referenciado pela declaração de método.</span><span class="sxs-lookup"><span data-stu-id="7db01-134">For example, the <xref:Microsoft.CodeAnalysis.IMethodSymbol.ReturnType?displayProperty=nameWithType> property tells you the actual type symbol that the method declaration references.</span></span>

<span data-ttu-id="7db01-135">Os símbolos apresentam uma representação comum de namespaces, tipos e membros, entre o código-fonte e os metadados.</span><span class="sxs-lookup"><span data-stu-id="7db01-135">Symbols present a common representation of namespaces, types, and members, between source code and metadata.</span></span> <span data-ttu-id="7db01-136">Por exemplo, um método que foi declarado no código-fonte e um método que foi importado dos metadados são representados por um <xref:Microsoft.CodeAnalysis.IMethodSymbol> com as mesmas propriedades.</span><span class="sxs-lookup"><span data-stu-id="7db01-136">For example, a method that was declared in source code and a method that was imported from metadata are both represented by an <xref:Microsoft.CodeAnalysis.IMethodSymbol> with the same properties.</span></span>

<span data-ttu-id="7db01-137">Símbolos são semelhantes em conceito ao sistema de tipos CLR, conforme representado pela API <xref:System.Reflection>, mas são mais sofisticados pois modelam mais do que apenas tipos.</span><span class="sxs-lookup"><span data-stu-id="7db01-137">Symbols are similar in concept to the CLR type system as represented by the <xref:System.Reflection> API, yet they are richer in that they model more than just types.</span></span> <span data-ttu-id="7db01-138">Namespaces, variáveis locais e rótulos são todos símbolos.</span><span class="sxs-lookup"><span data-stu-id="7db01-138">Namespaces, local variables, and labels are all symbols.</span></span> <span data-ttu-id="7db01-139">Além disso, os símbolos são uma representação dos conceitos da linguagem, não dos conceitos do CLR.</span><span class="sxs-lookup"><span data-stu-id="7db01-139">In addition, symbols are a representation of language concepts, not CLR concepts.</span></span> <span data-ttu-id="7db01-140">Há muita sobreposição, mas há muitas diferenças significativas também.</span><span class="sxs-lookup"><span data-stu-id="7db01-140">There is a lot of overlap, but there are many meaningful distinctions as well.</span></span> <span data-ttu-id="7db01-141">Por exemplo, um método iterador no C# ou Visual Basic é um único símbolo.</span><span class="sxs-lookup"><span data-stu-id="7db01-141">For instance, an iterator method in C# or Visual Basic is a single symbol.</span></span> <span data-ttu-id="7db01-142">No entanto, quando o método iterador é convertido em metadados CLR, ele é um tipo e vários métodos.</span><span class="sxs-lookup"><span data-stu-id="7db01-142">However, when the iterator method is translated to CLR metadata, it is a type and multiple methods.</span></span>

## <a name="semantic-model"></a><span data-ttu-id="7db01-143">Modelo semântico</span><span class="sxs-lookup"><span data-stu-id="7db01-143">Semantic model</span></span>

<span data-ttu-id="7db01-144">Um modelo semântico representa todas as informações semânticas de um único arquivo de origem.</span><span class="sxs-lookup"><span data-stu-id="7db01-144">A semantic model represents all the semantic information for a single source file.</span></span> <span data-ttu-id="7db01-145">Use-o para descobrir o seguinte:</span><span class="sxs-lookup"><span data-stu-id="7db01-145">You can use it to discover the following:</span></span>

- <span data-ttu-id="7db01-146">Os símbolos referenciados em um local específico na fonte.</span><span class="sxs-lookup"><span data-stu-id="7db01-146">The symbols referenced at a specific location in source.</span></span>
- <span data-ttu-id="7db01-147">O tipo resultante de qualquer expressão.</span><span class="sxs-lookup"><span data-stu-id="7db01-147">The resultant type of any expression.</span></span>
- <span data-ttu-id="7db01-148">Todo o diagnóstico, que são erros e avisos.</span><span class="sxs-lookup"><span data-stu-id="7db01-148">All diagnostics, which are errors and warnings.</span></span>
- <span data-ttu-id="7db01-149">Como as variáveis fluem bidirecionalmente entre as regiões de origem.</span><span class="sxs-lookup"><span data-stu-id="7db01-149">How variables flow in and out of regions of source.</span></span>
- <span data-ttu-id="7db01-150">As respostas a perguntas mais especulativas.</span><span class="sxs-lookup"><span data-stu-id="7db01-150">The answers to more speculative questions.</span></span>
