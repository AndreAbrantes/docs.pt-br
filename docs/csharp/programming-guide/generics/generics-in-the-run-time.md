---
title: Genéricos em tempo de execução – Guia de Programação em C#
ms.date: 07/20/2015
helpviewer_keywords:
- generics [C#], at run time
ms.assetid: 119df7e6-9ceb-49df-af36-24f8f8c0747f
ms.openlocfilehash: a53a21d3028e588f5c4d5ce7bf35fad8d3720a08
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/14/2020
ms.locfileid: "75702981"
---
# <a name="generics-in-the-run-time-c-programming-guide"></a><span data-ttu-id="109f3-102">Genéricos em tempo de execução (Guia de Programação em C#)</span><span class="sxs-lookup"><span data-stu-id="109f3-102">Generics in the Run Time (C# Programming Guide)</span></span>
<span data-ttu-id="109f3-103">Um tipo genérico ou método compilado em Microsoft Intermediate Language (MSIL) conterá metadados que o identificarão como possuidor de parâmetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="109f3-103">When a generic type or method is compiled into Microsoft intermediate language (MSIL), it contains metadata that identifies it as having type parameters.</span></span> <span data-ttu-id="109f3-104">O uso de MSIL em um tipo genérico será diferente de acordo com o parâmetro de tipo fornecido, ou seja, se ele é um tipo de valor ou um tipo de referência.</span><span class="sxs-lookup"><span data-stu-id="109f3-104">How the MSIL for a generic type is used differs based on whether the supplied type parameter is a value type or reference type.</span></span>  
  
 <span data-ttu-id="109f3-105">Quando um tipo genérico é construído pela primeira vez com um tipo de valor como parâmetro, o runtime cria um tipo genérico especializado com o(s) parâmetro(s) fornecido(s) substituído(s) nos locais apropriados do MSIL.</span><span class="sxs-lookup"><span data-stu-id="109f3-105">When a generic type is first constructed with a value type as a parameter, the runtime creates a specialized generic type with the supplied parameter or parameters substituted in the appropriate locations in the MSIL.</span></span> <span data-ttu-id="109f3-106">Os tipos genéricos especializados são criados uma vez para cada tipo de valor único usado como parâmetro.</span><span class="sxs-lookup"><span data-stu-id="109f3-106">Specialized generic types are created one time for each unique value type that is used as a parameter.</span></span>  
  
 <span data-ttu-id="109f3-107">Por exemplo, caso o código do programa declarar uma pilha construída de inteiros:</span><span class="sxs-lookup"><span data-stu-id="109f3-107">For example, suppose your program code declared a stack that is constructed of integers:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#42](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#42)]  
  
 <span data-ttu-id="109f3-108">Neste ponto, o runtime gerará uma versão especializada da classe <xref:System.Collections.Generic.Stack%601> com o inteiro substituído corretamente, de acordo com seu parâmetro.</span><span class="sxs-lookup"><span data-stu-id="109f3-108">At this point, the runtime generates a specialized version of the <xref:System.Collections.Generic.Stack%601> class that has the integer substituted appropriately for its parameter.</span></span> <span data-ttu-id="109f3-109">Agora, sempre que o código do programa utilizar uma pilha de inteiros, o runtime reutilizará a classe especializada <xref:System.Collections.Generic.Stack%601> gerada.</span><span class="sxs-lookup"><span data-stu-id="109f3-109">Now, whenever your program code uses a stack of integers, the runtime reuses the generated specialized <xref:System.Collections.Generic.Stack%601> class.</span></span> <span data-ttu-id="109f3-110">No exemplo a seguir, são criadas duas instâncias de uma pilha de inteiros e eles compartilham uma única instância do código `Stack<int>`:</span><span class="sxs-lookup"><span data-stu-id="109f3-110">In the following example, two instances of a stack of integers are created, and they share a single instance of the `Stack<int>` code:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#43](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#43)]  
  
 <span data-ttu-id="109f3-111">No entanto, suponha que outra classe <xref:System.Collections.Generic.Stack%601> com um tipo de valor diferente – como `long` ou uma estrutura definida pelo usuário como parâmetro – foi criada em outro ponto do código.</span><span class="sxs-lookup"><span data-stu-id="109f3-111">However, suppose that another <xref:System.Collections.Generic.Stack%601> class with a different value type such as a `long` or a user-defined structure as its parameter is created at another point in your code.</span></span> <span data-ttu-id="109f3-112">Como resultado, o runtime gerará outra versão do tipo genérico e substituirá um `long` nos locais apropriados no MSIL.</span><span class="sxs-lookup"><span data-stu-id="109f3-112">As a result, the runtime generates another version of the generic type and substitutes a `long` in the appropriate locations in MSIL.</span></span> <span data-ttu-id="109f3-113">Conversões não são mais necessárias, pois cada classe genérica especializada contém o tipo de valor nativamente.</span><span class="sxs-lookup"><span data-stu-id="109f3-113">Conversions are no longer necessary because each specialized generic class natively contains the value type.</span></span>  
  
 <span data-ttu-id="109f3-114">Os genéricos funcionam de outro modo nos tipos de referência.</span><span class="sxs-lookup"><span data-stu-id="109f3-114">Generics work somewhat differently for reference types.</span></span> <span data-ttu-id="109f3-115">Na primeira vez em que um genérico é construído com qualquer tipo de referência, o runtime cria um tipo genérico especializado com referências de objeto substituídas por parâmetros no MSIL.</span><span class="sxs-lookup"><span data-stu-id="109f3-115">The first time a generic type is constructed with any reference type, the runtime creates a specialized generic type with object references substituted for the parameters in the MSIL.</span></span> <span data-ttu-id="109f3-116">Em seguida, sempre que um tipo construído for instanciado com um tipo de referência como parâmetro, independentemente do tipo, o runtime reutilizará a versão especializada do tipo genérico criada anteriormente.</span><span class="sxs-lookup"><span data-stu-id="109f3-116">Then, every time that a constructed type is instantiated with a reference type as its parameter, regardless of what type it is, the runtime reuses the previously created specialized version of the generic type.</span></span> <span data-ttu-id="109f3-117">Isso é possível porque todas as referências são do mesmo tamanho.</span><span class="sxs-lookup"><span data-stu-id="109f3-117">This is possible because all references are the same size.</span></span>  
  
 <span data-ttu-id="109f3-118">Por exemplo, suponha que há dois tipos de referência, uma classe `Customer` e uma classe `Order` e que uma pilha de tipos `Customer` foi criada:</span><span class="sxs-lookup"><span data-stu-id="109f3-118">For example, suppose you had two reference types, a `Customer` class and an `Order` class, and also suppose that you created a stack of `Customer` types:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#47](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#47)]  
  
 [!code-csharp[csProgGuideGenerics#44](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#44)]  
  
 <span data-ttu-id="109f3-119">Neste ponto, o runtime gerará uma versão especializada da classe <xref:System.Collections.Generic.Stack%601> que armazenará referências de objeto que serão preenchidas posteriormente, em vez de armazenar dados.</span><span class="sxs-lookup"><span data-stu-id="109f3-119">At this point, the runtime generates a specialized version of the <xref:System.Collections.Generic.Stack%601> class that stores object references that will be filled in later instead of storing data.</span></span> <span data-ttu-id="109f3-120">Suponha que a próxima linha de código crie uma pilha de outro tipo de referência, com o nome `Order`:</span><span class="sxs-lookup"><span data-stu-id="109f3-120">Suppose the next line of code creates a stack of another reference type, which is named `Order`:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#45](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#45)]  
  
 <span data-ttu-id="109f3-121">Ao contrário dos tipos de valor, outra versão especializada da classe <xref:System.Collections.Generic.Stack%601> não será criada para o tipo `Order`.</span><span class="sxs-lookup"><span data-stu-id="109f3-121">Unlike with value types, another specialized version of the <xref:System.Collections.Generic.Stack%601> class is not created for the `Order` type.</span></span> <span data-ttu-id="109f3-122">Em vez disso, uma instância da versão especializada da classe <xref:System.Collections.Generic.Stack%601> será criada e a variável `orders` será definida para referenciá-la.</span><span class="sxs-lookup"><span data-stu-id="109f3-122">Instead, an instance of the specialized version of the <xref:System.Collections.Generic.Stack%601> class is created and the `orders` variable is set to reference it.</span></span> <span data-ttu-id="109f3-123">Imagine que uma linha de código foi encontrada para criar uma pilha de um tipo `Customer`:</span><span class="sxs-lookup"><span data-stu-id="109f3-123">Suppose that you then encountered a line of code to create a stack of a `Customer` type:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#46](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#46)]  
  
 <span data-ttu-id="109f3-124">Assim como acontece com o uso anterior da classe <xref:System.Collections.Generic.Stack%601> criada usando o tipo `Order`, outra instância da classe especializada <xref:System.Collections.Generic.Stack%601> é criada.</span><span class="sxs-lookup"><span data-stu-id="109f3-124">As with the previous use of the <xref:System.Collections.Generic.Stack%601> class created by using the `Order` type, another instance of the specialized <xref:System.Collections.Generic.Stack%601> class is created.</span></span> <span data-ttu-id="109f3-125">Os ponteiros contidos nela são definidos para referenciar uma área de memória do tamanho de um tipo `Customer`.</span><span class="sxs-lookup"><span data-stu-id="109f3-125">The pointers that are contained therein are set to reference an area of memory the size of a `Customer` type.</span></span> <span data-ttu-id="109f3-126">Como a quantidade de tipos de referência pode variar muito entre os programas, a implementação de genéricos no C# reduz significativamente a quantidade de código ao diminuir para um o número de classes especializadas criadas pelo compilador para classes genéricas ou tipos de referência.</span><span class="sxs-lookup"><span data-stu-id="109f3-126">Because the number of reference types can vary wildly from program to program, the C# implementation of generics greatly reduces the amount of code by reducing to one the number of specialized classes created by the compiler for generic classes of reference types.</span></span>  
  
 <span data-ttu-id="109f3-127">Além disso, quando uma classe genérica do C# for instanciada usando um tipo de valor ou parâmetro de tipo de referência, a reflexão pode consultá-la em runtime e o seu tipo real e parâmetro de tipo podem ser determinados.</span><span class="sxs-lookup"><span data-stu-id="109f3-127">Moreover, when a generic C# class is instantiated by using a value type or reference type parameter, reflection can query it at runtime and both its actual type and its type parameter can be ascertained.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="109f3-128">Confira também</span><span class="sxs-lookup"><span data-stu-id="109f3-128">See also</span></span>

- <xref:System.Collections.Generic>
- [<span data-ttu-id="109f3-129">C# Guia de Programação</span><span class="sxs-lookup"><span data-stu-id="109f3-129">C# Programming Guide</span></span>](../index.md)
- [<span data-ttu-id="109f3-130">Introdução aos genéricos</span><span class="sxs-lookup"><span data-stu-id="109f3-130">Introduction to Generics</span></span>](./index.md)
- [<span data-ttu-id="109f3-131">Genéricos</span><span class="sxs-lookup"><span data-stu-id="109f3-131">Generics</span></span>](../../../standard/generics/index.md)
