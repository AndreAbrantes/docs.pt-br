---
title: Tipos de retorno assíncrono (C#)
description: Saiba mais sobre os tipos de retorno que os métodos Async podem ter em C# com exemplos de código para cada tipo e recursos adicionais.
ms.date: 08/19/2020
ms.assetid: ddb2539c-c898-48c1-ad92-245e4a996df8
ms.openlocfilehash: 71e560ed8ee0cae14da396e5ea2f3ab29611ebab
ms.sourcegitcommit: 9c45035b781caebc63ec8ecf912dc83fb6723b1f
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/25/2020
ms.locfileid: "88811490"
---
# <a name="async-return-types-c"></a><span data-ttu-id="b6134-103">Tipos de retorno assíncrono (C#)</span><span class="sxs-lookup"><span data-stu-id="b6134-103">Async return types (C#)</span></span>

<span data-ttu-id="b6134-104">Métodos assíncronos podem conter os seguintes tipos de retorno:</span><span class="sxs-lookup"><span data-stu-id="b6134-104">Async methods can have the following return types:</span></span>

- <span data-ttu-id="b6134-105"><xref:System.Threading.Tasks.Task>, para um método assíncrono que executa uma operação, mas não retorna nenhum valor.</span><span class="sxs-lookup"><span data-stu-id="b6134-105"><xref:System.Threading.Tasks.Task>, for an async method that performs an operation but returns no value.</span></span>
- <span data-ttu-id="b6134-106"><xref:System.Threading.Tasks.Task%601>, para um método assíncrono que retorna um valor.</span><span class="sxs-lookup"><span data-stu-id="b6134-106"><xref:System.Threading.Tasks.Task%601>, for an async method that returns a value.</span></span>
- <span data-ttu-id="b6134-107">`void`, para um manipulador de eventos.</span><span class="sxs-lookup"><span data-stu-id="b6134-107">`void`, for an event handler.</span></span>
- <span data-ttu-id="b6134-108">Começando com o C# 7.0, qualquer tipo que tenha um método acessível `GetAwaiter`.</span><span class="sxs-lookup"><span data-stu-id="b6134-108">Starting with C# 7.0, any type that has an accessible `GetAwaiter` method.</span></span> <span data-ttu-id="b6134-109">O objeto retornado pelo método `GetAwaiter` deve implementar a interface <xref:System.Runtime.CompilerServices.ICriticalNotifyCompletion?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b6134-109">The object returned by the `GetAwaiter` method must implement the <xref:System.Runtime.CompilerServices.ICriticalNotifyCompletion?displayProperty=nameWithType> interface.</span></span>
- <span data-ttu-id="b6134-110">Começando com o C# 8,0, <xref:System.Collections.Generic.IAsyncEnumerable%601> , para um método assíncrono que retorna um *fluxo assíncrono*.</span><span class="sxs-lookup"><span data-stu-id="b6134-110">Starting with C# 8.0, <xref:System.Collections.Generic.IAsyncEnumerable%601>, for an async method that returns an *async stream*.</span></span>

<span data-ttu-id="b6134-111">Para obter mais informações sobre métodos assíncronos, consulte [programação assíncrona com Async e Await (C#)](./index.md).</span><span class="sxs-lookup"><span data-stu-id="b6134-111">For more information about async methods, see [Asynchronous programming with async and await (C#)](./index.md).</span></span>

<span data-ttu-id="b6134-112">Vários outros tipos também existem que são específicos para cargas de trabalho do Windows:</span><span class="sxs-lookup"><span data-stu-id="b6134-112">Several other types also exist that are specific to Windows workloads:</span></span>

- <span data-ttu-id="b6134-113"><xref:System.Windows.Threading.DispatcherOperation>, para operações assíncronas limitadas ao Windows.</span><span class="sxs-lookup"><span data-stu-id="b6134-113"><xref:System.Windows.Threading.DispatcherOperation>, for async operations limited to Windows.</span></span>
- <span data-ttu-id="b6134-114"><xref:Windows.Foundation.IAsyncAction>, para ações assíncronas em UWP que não retornam um valor.</span><span class="sxs-lookup"><span data-stu-id="b6134-114"><xref:Windows.Foundation.IAsyncAction>, for async actions in UWP that do not return a value.</span></span>
- <span data-ttu-id="b6134-115"><xref:Windows.Foundation.IAsyncActionWithProgress%601>, para ações assíncronas em UWP que relatam o progresso, mas não retornam um valor.</span><span class="sxs-lookup"><span data-stu-id="b6134-115"><xref:Windows.Foundation.IAsyncActionWithProgress%601>, for async actions in UWP that report progress but do not return a value.</span></span>
- <span data-ttu-id="b6134-116"><xref:Windows.Foundation.IAsyncOperation%601>, para operações assíncronas em UWP que retornam um valor.</span><span class="sxs-lookup"><span data-stu-id="b6134-116"><xref:Windows.Foundation.IAsyncOperation%601>, for async operations in UWP that return a value.</span></span>
- <span data-ttu-id="b6134-117"><xref:Windows.Foundation.IAsyncOperationWithProgress%602>, para operações assíncronas em UWP que relatam o progresso e retornam um valor.</span><span class="sxs-lookup"><span data-stu-id="b6134-117"><xref:Windows.Foundation.IAsyncOperationWithProgress%602>, for async operations in UWP that report progress and return a value.</span></span>

## <a name="task-return-type"></a><span data-ttu-id="b6134-118">Tipo de retorno de tarefa</span><span class="sxs-lookup"><span data-stu-id="b6134-118">Task return type</span></span>

<span data-ttu-id="b6134-119">Os métodos assíncronos que não contêm uma instrução `return` ou que contêm uma instrução `return` que não retorna um operando, normalmente têm um tipo de retorno de <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="b6134-119">Async methods that don't contain a `return` statement or that contain a `return` statement that doesn't return an operand usually have a return type of <xref:System.Threading.Tasks.Task>.</span></span> <span data-ttu-id="b6134-120">Esses métodos retornam `void` se eles são executados de forma síncrona.</span><span class="sxs-lookup"><span data-stu-id="b6134-120">Such methods return `void` if they run synchronously.</span></span> <span data-ttu-id="b6134-121">Se você usar um tipo de retorno <xref:System.Threading.Tasks.Task> para um método assíncrono, um método de chamada poderá usar um operador `await` para suspender a conclusão do chamador até que o método assíncrono chamado seja concluído.</span><span class="sxs-lookup"><span data-stu-id="b6134-121">If you use a <xref:System.Threading.Tasks.Task> return type for an async method, a calling method can use an `await` operator to suspend the caller's completion until the called async method has finished.</span></span>

<span data-ttu-id="b6134-122">No exemplo a seguir, o `WaitAndApologizeAsync` método não contém uma `return` instrução, portanto, o método retorna um <xref:System.Threading.Tasks.Task> objeto.</span><span class="sxs-lookup"><span data-stu-id="b6134-122">In the following example, the `WaitAndApologizeAsync` method doesn't contain a `return` statement, so the method returns a <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="b6134-123">Retornando uma `Task` habilitação `WaitAndApologizeAsync` a ser aguardada.</span><span class="sxs-lookup"><span data-stu-id="b6134-123">Returning a `Task` enables `WaitAndApologizeAsync` to be awaited.</span></span> <span data-ttu-id="b6134-124">O <xref:System.Threading.Tasks.Task> tipo não inclui uma `Result` propriedade porque não tem nenhum valor de retorno.</span><span class="sxs-lookup"><span data-stu-id="b6134-124">The <xref:System.Threading.Tasks.Task> type doesn't include a `Result` property because it has no return value.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-returns2.cs" id="TaskReturn":::

<span data-ttu-id="b6134-125">O `WaitAndApologizeAsync` é aguardado, usando uma instrução await, em vez de uma expressão await, semelhante à instrução de chamada a um método síncrono de retorno void.</span><span class="sxs-lookup"><span data-stu-id="b6134-125">`WaitAndApologizeAsync` is awaited by using an await statement instead of an await expression, similar to the calling statement for a synchronous void-returning method.</span></span> <span data-ttu-id="b6134-126">A aplicação de um operador await, nesse caso, não produz um valor.</span><span class="sxs-lookup"><span data-stu-id="b6134-126">The application of an await operator in this case doesn't produce a value.</span></span> <span data-ttu-id="b6134-127">Para esclarecer a declaração de termos e a expressão, consulte a tabela abaixo:</span><span class="sxs-lookup"><span data-stu-id="b6134-127">To clarify the terms statement and expression, refer to the table below:</span></span>

| <span data-ttu-id="b6134-128">Tipo Await</span><span class="sxs-lookup"><span data-stu-id="b6134-128">Await kind</span></span> | <span data-ttu-id="b6134-129">Exemplo</span><span class="sxs-lookup"><span data-stu-id="b6134-129">Example</span></span>                                      | <span data-ttu-id="b6134-130">Type</span><span class="sxs-lookup"><span data-stu-id="b6134-130">Type</span></span>                                   |
|------------|----------------------------------------------|----------------------------------------|
| <span data-ttu-id="b6134-131">de</span><span class="sxs-lookup"><span data-stu-id="b6134-131">Statement</span></span>  | `await SomeTaskMethodAsync()`                | <xref:System.Threading.Tasks.Task>     |
| <span data-ttu-id="b6134-132">Expression</span><span class="sxs-lookup"><span data-stu-id="b6134-132">Expression</span></span> | `T result = await SomeTaskMethodAsync<T>();` | <xref:System.Threading.Tasks.Task%601> |

<span data-ttu-id="b6134-133">Você pode separar a chamada para `WaitAndApologizeAsync` do aplicativo de um operador Await, como mostra o código a seguir.</span><span class="sxs-lookup"><span data-stu-id="b6134-133">You can separate the call to `WaitAndApologizeAsync` from the application of an await operator, as the following code shows.</span></span> <span data-ttu-id="b6134-134">No entanto, lembre-se que uma `Task` não tem uma propriedade `Result` e que nenhum valor será produzido quando um operador await for aplicado a uma `Task`.</span><span class="sxs-lookup"><span data-stu-id="b6134-134">However, remember that a `Task` doesn't have a `Result` property, and that no value is produced when an await operator is applied to a `Task`.</span></span>

<span data-ttu-id="b6134-135">O código a seguir separa a chamada ao método `WaitAndApologizeAsync` da espera pela tarefa que o método retorna.</span><span class="sxs-lookup"><span data-stu-id="b6134-135">The following code separates calling the `WaitAndApologizeAsync` method from awaiting the task that the method returns.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-returns2a.cs" id="AwaitTask":::

## <a name="tasktresult-return-type"></a><span data-ttu-id="b6134-136">Tipo de retorno de tarefa \<TResult\></span><span class="sxs-lookup"><span data-stu-id="b6134-136">Task\<TResult\> return type</span></span>

<span data-ttu-id="b6134-137">O <xref:System.Threading.Tasks.Task%601> tipo de retorno é usado para um método assíncrono que contém uma instrução de [retorno](../../../language-reference/keywords/return.md) na qual o operando é `TResult` .</span><span class="sxs-lookup"><span data-stu-id="b6134-137">The <xref:System.Threading.Tasks.Task%601> return type is used for an async method that contains a [return](../../../language-reference/keywords/return.md) statement in which the operand is `TResult`.</span></span>

<span data-ttu-id="b6134-138">No exemplo a seguir, o `GetLeisureHoursAsync` método contém uma `return` instrução que retorna um inteiro.</span><span class="sxs-lookup"><span data-stu-id="b6134-138">In the following example, the `GetLeisureHoursAsync` method contains a `return` statement that returns an integer.</span></span> <span data-ttu-id="b6134-139">Portanto, a declaração do método deve especificar um tipo de retorno de `Task<int>`.</span><span class="sxs-lookup"><span data-stu-id="b6134-139">Therefore, the method declaration must specify a return type of `Task<int>`.</span></span> <span data-ttu-id="b6134-140">O <xref:System.Threading.Tasks.Task.FromResult%2A> método Async é um espaço reservado para uma operação que retorna um <xref:System.DateTime.DayOfWeek> .</span><span class="sxs-lookup"><span data-stu-id="b6134-140">The <xref:System.Threading.Tasks.Task.FromResult%2A> async method is a placeholder for an operation that returns a <xref:System.DateTime.DayOfWeek>.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-returns1.cs" id="LeisureHours":::

<span data-ttu-id="b6134-141">Quando `GetLeisureHoursAsync` é chamado de dentro de uma expressão await no método `ShowTodaysInfo`, a expressão await recupera o valor inteiro (o valor de `leisureHours`) que está armazenado na tarefa que é retornada pelo método `GetLeisureHours`.</span><span class="sxs-lookup"><span data-stu-id="b6134-141">When `GetLeisureHoursAsync` is called from within an await expression in the `ShowTodaysInfo` method, the await expression retrieves the integer value (the value of `leisureHours`) that's stored in the task returned by the `GetLeisureHours` method.</span></span> <span data-ttu-id="b6134-142">Para obter mais informações sobre expressões await, consulte [await](../../../language-reference/operators/await.md).</span><span class="sxs-lookup"><span data-stu-id="b6134-142">For more information about await expressions, see [await](../../../language-reference/operators/await.md).</span></span>

<span data-ttu-id="b6134-143">Você pode entender melhor como o `await` recupera o resultado de um `Task<T>` separando a chamada para `GetLeisureHoursAsync` do aplicativo do `await` , como mostra o código a seguir.</span><span class="sxs-lookup"><span data-stu-id="b6134-143">You can better understand how `await` retrieves the result from a `Task<T>` by separating the call to `GetLeisureHoursAsync` from the application of `await`, as the following code shows.</span></span> <span data-ttu-id="b6134-144">Uma chamada ao método `GetLeisureHoursAsync` que não é aguardada imediatamente, retorna um `Task<int>`, como você esperaria da declaração do método.</span><span class="sxs-lookup"><span data-stu-id="b6134-144">A call to method `GetLeisureHoursAsync` that isn't immediately awaited returns a `Task<int>`, as you would expect from the declaration of the method.</span></span> <span data-ttu-id="b6134-145">A tarefa é atribuída à variável `getLeisureHoursTask` no exemplo.</span><span class="sxs-lookup"><span data-stu-id="b6134-145">The task is assigned to the `getLeisureHoursTask` variable in the example.</span></span> <span data-ttu-id="b6134-146">Já que `getLeisureHoursTask` é um <xref:System.Threading.Tasks.Task%601>, ele contém uma propriedade <xref:System.Threading.Tasks.Task%601.Result> do tipo `TResult`.</span><span class="sxs-lookup"><span data-stu-id="b6134-146">Because `getLeisureHoursTask` is a <xref:System.Threading.Tasks.Task%601>, it contains a <xref:System.Threading.Tasks.Task%601.Result> property of type `TResult`.</span></span> <span data-ttu-id="b6134-147">Nesse caso, `TResult` representa um tipo inteiro.</span><span class="sxs-lookup"><span data-stu-id="b6134-147">In this case, `TResult` represents an integer type.</span></span> <span data-ttu-id="b6134-148">Quando `await` é aplicado à `getLeisureHoursTask`, a expressão await é avaliada como o conteúdo da propriedade <xref:System.Threading.Tasks.Task%601.Result%2A> de `getLeisureHoursTask`.</span><span class="sxs-lookup"><span data-stu-id="b6134-148">When `await` is applied to `getLeisureHoursTask`, the await expression evaluates to the contents of the <xref:System.Threading.Tasks.Task%601.Result%2A> property of `getLeisureHoursTask`.</span></span> <span data-ttu-id="b6134-149">O valor é atribuído à variável `ret`.</span><span class="sxs-lookup"><span data-stu-id="b6134-149">The value is assigned to the `ret` variable.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b6134-150">A propriedade <xref:System.Threading.Tasks.Task%601.Result%2A> é uma propriedade de bloqueio.</span><span class="sxs-lookup"><span data-stu-id="b6134-150">The <xref:System.Threading.Tasks.Task%601.Result%2A> property is a blocking property.</span></span> <span data-ttu-id="b6134-151">Se você tentar acessá-la antes que sua tarefa seja concluída, o thread que está ativo no momento será bloqueado até que a tarefa seja concluída e o valor esteja disponível.</span><span class="sxs-lookup"><span data-stu-id="b6134-151">If you try to access it before its task is finished, the thread that's currently active is blocked until the task completes and the value is available.</span></span> <span data-ttu-id="b6134-152">Na maioria dos casos, você deve acessar o valor usando `await` em vez de acessar a propriedade diretamente.</span><span class="sxs-lookup"><span data-stu-id="b6134-152">In most cases, you should access the value by using `await` instead of accessing the property directly.</span></span>
>
> <span data-ttu-id="b6134-153">O exemplo anterior recuperou o valor da <xref:System.Threading.Tasks.Task%601.Result%2A> propriedade para bloquear o thread principal para que o `Main` método pudesse imprimir o no `message` console antes de o aplicativo ser encerrado.</span><span class="sxs-lookup"><span data-stu-id="b6134-153">The previous example retrieved the value of the <xref:System.Threading.Tasks.Task%601.Result%2A> property to block the main thread so that the `Main` method could print the `message` to the console before the application ended.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-returns1a.cs" id="StoreTask":::

## <a name="void-return-type"></a><span data-ttu-id="b6134-154">Tipo de retorno void</span><span class="sxs-lookup"><span data-stu-id="b6134-154">Void return type</span></span>

<span data-ttu-id="b6134-155">O tipo de retorno `void` é usado em manipuladores de eventos assíncronos, que exigem um tipo de retorno `void`.</span><span class="sxs-lookup"><span data-stu-id="b6134-155">You use the `void` return type in asynchronous event handlers, which require a `void` return type.</span></span> <span data-ttu-id="b6134-156">Para métodos diferentes de manipuladores de eventos que não retornam um valor, você deve retornar um <xref:System.Threading.Tasks.Task>, porque não é possível esperar por um método assíncrono que retorna `void`.</span><span class="sxs-lookup"><span data-stu-id="b6134-156">For methods other than event handlers that don't return a value, you should return a <xref:System.Threading.Tasks.Task> instead, because an async method that returns `void` can't be awaited.</span></span> <span data-ttu-id="b6134-157">Qualquer chamador desse método deve continuar a conclusão sem esperar que o método assíncrono chamado seja concluído.</span><span class="sxs-lookup"><span data-stu-id="b6134-157">Any caller of such a method must continue to completion without waiting for the called async method to finish.</span></span> <span data-ttu-id="b6134-158">O chamador deve ser independente de quaisquer valores ou exceções geradas pelo método Async.</span><span class="sxs-lookup"><span data-stu-id="b6134-158">The caller must be independent of any values or exceptions that the async method generates.</span></span>

<span data-ttu-id="b6134-159">O chamador de um método assíncrono de retorno nulo não pode capturar exceções lançadas do método, e essas exceções não tratadas provavelmente causarão a falha do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b6134-159">The caller of a void-returning async method can't catch exceptions thrown from the method, and such unhandled exceptions are likely to cause your application to fail.</span></span> <span data-ttu-id="b6134-160">Se um método que retorna um <xref:System.Threading.Tasks.Task> ou <xref:System.Threading.Tasks.Task%601> gera uma exceção, a exceção é armazenada na tarefa retornada.</span><span class="sxs-lookup"><span data-stu-id="b6134-160">If a method that returns a <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> throws an exception, the exception is stored in the returned task.</span></span> <span data-ttu-id="b6134-161">A exceção é relançada quando a tarefa é esperada.</span><span class="sxs-lookup"><span data-stu-id="b6134-161">The exception is rethrown when the task is awaited.</span></span> <span data-ttu-id="b6134-162">Portanto, verifique se qualquer método assíncrono que pode produzir uma exceção tem um tipo de retorno de <xref:System.Threading.Tasks.Task> ou <xref:System.Threading.Tasks.Task%601> e que as chamadas ao método são aguardadas.</span><span class="sxs-lookup"><span data-stu-id="b6134-162">Therefore, make sure that any async method that can produce an exception has a return type of <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> and that calls to the method are awaited.</span></span>

<span data-ttu-id="b6134-163">Para obter mais informações sobre como capturar exceções em métodos assíncronos, consulte a seção [Exceptions in Async Methods](../../../language-reference/keywords/try-catch.md#exceptions-in-async-methods) do artigo [try-catch](../../../language-reference/keywords/try-catch.md) .</span><span class="sxs-lookup"><span data-stu-id="b6134-163">For more information about how to catch exceptions in async methods, see the [Exceptions in async methods](../../../language-reference/keywords/try-catch.md#exceptions-in-async-methods) section of the [try-catch](../../../language-reference/keywords/try-catch.md) article.</span></span>

<span data-ttu-id="b6134-164">O exemplo a seguir mostra o comportamento de um manipulador de eventos assíncrono.</span><span class="sxs-lookup"><span data-stu-id="b6134-164">The following example shows the behavior of an async event handler.</span></span> <span data-ttu-id="b6134-165">No código de exemplo, um manipulador de eventos assíncrono deve permitir que o thread principal saiba quando ele for concluído.</span><span class="sxs-lookup"><span data-stu-id="b6134-165">In the example code, an async event handler must let the main thread know when it finishes.</span></span> <span data-ttu-id="b6134-166">Em seguida, o thread principal pode aguardar um manipulador de eventos assíncronos ser concluído antes de sair do programa.</span><span class="sxs-lookup"><span data-stu-id="b6134-166">Then the main thread can wait for an async event handler to complete before exiting the program.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-returns3.cs":::

## <a name="generalized-async-return-types-and-valuetasktresult"></a><span data-ttu-id="b6134-167">Tipos de retorno assíncronos generalizados e ValueTask\<TResult\></span><span class="sxs-lookup"><span data-stu-id="b6134-167">Generalized async return types and ValueTask\<TResult\></span></span>

<span data-ttu-id="b6134-168">Começando com o C# 7.0, um método assíncrono pode retornar qualquer tipo que tenha um método `GetAwaiter` acessível.</span><span class="sxs-lookup"><span data-stu-id="b6134-168">Starting with C# 7.0, an async method can return any type that has an accessible `GetAwaiter` method.</span></span>

<span data-ttu-id="b6134-169">Já que <xref:System.Threading.Tasks.Task> e <xref:System.Threading.Tasks.Task%601> são tipos de referência, a alocação de memória em caminhos críticos para o desempenho, especialmente quando alocações ocorrerem em loops estreitos, podem afetar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="b6134-169">Because <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> are reference types, memory allocation in performance-critical paths, particularly when allocations occur in tight loops, can adversely affect performance.</span></span> <span data-ttu-id="b6134-170">Suporte para tipos de retorno generalizados significa que você pode retornar um tipo de valor leve em vez de um tipo de referência para evitar as alocações de memória adicionais.</span><span class="sxs-lookup"><span data-stu-id="b6134-170">Support for generalized return types means that you can return a lightweight value type instead of a reference type to avoid additional memory allocations.</span></span>

<span data-ttu-id="b6134-171">O .NET fornece a estrutura <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> como uma implementação leve de um valor de retorno de tarefa generalizado.</span><span class="sxs-lookup"><span data-stu-id="b6134-171">.NET provides the <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> structure as a lightweight implementation of a generalized task-returning value.</span></span> <span data-ttu-id="b6134-172">Para usar o tipo <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType>, você deve adicionar o pacote NuGet `System.Threading.Tasks.Extensions` ao seu projeto.</span><span class="sxs-lookup"><span data-stu-id="b6134-172">To use the <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> type, you must add the `System.Threading.Tasks.Extensions` NuGet package to your project.</span></span> <span data-ttu-id="b6134-173">O exemplo a seguir usa a estrutura <xref:System.Threading.Tasks.ValueTask%601> para recuperar o valor de dois lançamentos de dados.</span><span class="sxs-lookup"><span data-stu-id="b6134-173">The following example uses the <xref:System.Threading.Tasks.ValueTask%601> structure to retrieve the value of two dice rolls.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-valuetask.cs":::

## <a name="async-streams-with-iasyncenumerablet"></a><span data-ttu-id="b6134-174">Fluxos assíncronos com IAsyncEnumerable\<T\></span><span class="sxs-lookup"><span data-stu-id="b6134-174">Async streams with IAsyncEnumerable\<T\></span></span>

<span data-ttu-id="b6134-175">A partir do C# 8,0, um método assíncrono pode retornar um *fluxo assíncrono*, representado por <xref:System.Collections.Generic.IAsyncEnumerable%601> .</span><span class="sxs-lookup"><span data-stu-id="b6134-175">Starting with C# 8.0, an async method may return an *async stream*, represented by <xref:System.Collections.Generic.IAsyncEnumerable%601>.</span></span> <span data-ttu-id="b6134-176">Um fluxo assíncrono fornece uma maneira de enumerar itens lidos de um fluxo quando elementos são gerados em partes com chamadas assíncronas repetidas.</span><span class="sxs-lookup"><span data-stu-id="b6134-176">An async stream provides a way to enumerate items read from a stream when elements are generated in chunks with repeated asynchronous calls.</span></span> <span data-ttu-id="b6134-177">O exemplo a seguir mostra um método assíncrono que gera um fluxo assíncrono:</span><span class="sxs-lookup"><span data-stu-id="b6134-177">The following example shows an async method that generates an async stream:</span></span>

:::code language="csharp" source="snippets/async-return-types/AsyncStreams.cs" id="GenerateAsyncStream":::

<span data-ttu-id="b6134-178">O exemplo anterior lê linhas de uma cadeia de caracteres de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="b6134-178">The preceding example reads lines from a string asynchronously.</span></span> <span data-ttu-id="b6134-179">Depois que cada linha é lida, o código enumera cada palavra na cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="b6134-179">Once each line is read, the code enumerates each word in the string.</span></span> <span data-ttu-id="b6134-180">Os chamadores enumerariam cada palavra usando a `await foreach` instrução.</span><span class="sxs-lookup"><span data-stu-id="b6134-180">Callers would enumerate each word using the `await foreach` statement.</span></span> <span data-ttu-id="b6134-181">O método aguarda quando precisa ler de forma assíncrona a próxima linha da cadeia de caracteres de origem.</span><span class="sxs-lookup"><span data-stu-id="b6134-181">The method awaits when it needs to asynchronously read the next line from the source string.</span></span>

## <a name="see-also"></a><span data-ttu-id="b6134-182">Confira também</span><span class="sxs-lookup"><span data-stu-id="b6134-182">See also</span></span>

- <xref:System.Threading.Tasks.Task.FromResult%2A>
- [<span data-ttu-id="b6134-183">Processar tarefas assíncronas conforme elas são concluídas</span><span class="sxs-lookup"><span data-stu-id="b6134-183">Process asynchronous tasks as they complete</span></span>](start-multiple-async-tasks-and-process-them-as-they-complete.md)
- [<span data-ttu-id="b6134-184">Programação assíncrona com async e await (C#)</span><span class="sxs-lookup"><span data-stu-id="b6134-184">Asynchronous programming with async and await (C#)</span></span>](index.md)
- [<span data-ttu-id="b6134-185">async</span><span class="sxs-lookup"><span data-stu-id="b6134-185">async</span></span>](../../../language-reference/keywords/async.md)
- [<span data-ttu-id="b6134-186">await</span><span class="sxs-lookup"><span data-stu-id="b6134-186">await</span></span>](../../../language-reference/operators/await.md)
