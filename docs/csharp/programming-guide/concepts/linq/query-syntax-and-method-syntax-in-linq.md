---
title: Sintaxe de consulta e sintaxe de método em LINQ (C#)
ms.date: 07/20/2015
helpviewer_keywords:
- LINQ [C#], query syntax vs. method syntax
- queries [LINQ in C#], syntax comparisons
ms.assetid: eedd6dd9-fec2-428c-9581-5b8783810ded
ms.openlocfilehash: fe1fbfbf76507f19905d1a9a3a836483a8dd3849
ms.sourcegitcommit: 3c1c3ba79895335ff3737934e39372555ca7d6d0
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/06/2018
ms.locfileid: "43748230"
---
# <a name="query-syntax-and-method-syntax-in-linq-c"></a><span data-ttu-id="9c4ba-102">Sintaxe de consulta e sintaxe de método em LINQ (C#)</span><span class="sxs-lookup"><span data-stu-id="9c4ba-102">Query Syntax and Method Syntax in LINQ (C#)</span></span>
<span data-ttu-id="9c4ba-103">A maioria das consultas na documentação introdutória da [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)] (Consulta Integrada à Linguagem) é escrita usando a sintaxe de consulta declarativa da LINQ.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-103">Most queries in the introductory Language Integrated Query ([!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)]) documentation are written by using the LINQ declarative query syntax.</span></span> <span data-ttu-id="9c4ba-104">No entanto, a sintaxe de consulta deve ser convertida em chamadas de método para o CLR (Common Language Runtime) do .NET quando o código for compilado.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-104">However, the query syntax must be translated into method calls for the .NET common language runtime (CLR) when the code is compiled.</span></span> <span data-ttu-id="9c4ba-105">Essas chamadas de método invocam os operadores de consulta padrão, que têm nomes como `Where`, `Select`, `GroupBy`, `Join`, `Max` e `Average`.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-105">These method calls invoke the standard query operators, which have names such as `Where`, `Select`, `GroupBy`, `Join`, `Max`, and `Average`.</span></span> <span data-ttu-id="9c4ba-106">Você pode chamá-los diretamente usando a sintaxe de método em vez da sintaxe de consulta.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-106">You can call them directly by using method syntax instead of query syntax.</span></span>  
  
 <span data-ttu-id="9c4ba-107">A sintaxe de consulta e a sintaxe de método são semanticamente idênticas, mas muitas pessoas acham a sintaxe de consulta mais simples e fácil de ler.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-107">Query syntax and method syntax are semantically identical, but many people find query syntax simpler and easier to read.</span></span> <span data-ttu-id="9c4ba-108">Algumas consultas devem ser expressadas como chamadas de método.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-108">Some queries must be expressed as method calls.</span></span> <span data-ttu-id="9c4ba-109">Por exemplo, você deve usar uma chamada de método para expressar uma consulta que recupera o número de elementos que correspondem a uma condição especificada.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-109">For example, you must use a method call to express a query that retrieves the number of elements that match a specified condition.</span></span> <span data-ttu-id="9c4ba-110">Você também deve usar uma chamada de método para uma consulta que recupera o elemento que tem o valor máximo em uma sequência de origem.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-110">You also must use a method call for a query that retrieves the element that has the maximum value in a source sequence.</span></span> <span data-ttu-id="9c4ba-111">A documentação de referência para os operadores de consulta padrão no namespace <xref:System.Linq> geralmente usa a sintaxe de método.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-111">The reference documentation for the standard query operators in the <xref:System.Linq> namespace generally uses method syntax.</span></span> <span data-ttu-id="9c4ba-112">Portanto, mesmo quando começar a escrever consultas [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)], é útil estar familiarizado com como usar a sintaxe de método nas consultas e nas próprias expressões de consulta.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-112">Therefore, even when getting started writing [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)] queries, it is useful to be familiar with how to use method syntax in queries and in query expressions themselves.</span></span>  
  
## <a name="standard-query-operator-extension-methods"></a><span data-ttu-id="9c4ba-113">Métodos de Extensão do Operador de Consulta Padrão</span><span class="sxs-lookup"><span data-stu-id="9c4ba-113">Standard Query Operator Extension Methods</span></span>  
 <span data-ttu-id="9c4ba-114">O exemplo a seguir mostra uma *expressão de consulta* simples e a consulta semanticamente equivalente escrita como uma *consulta baseada em método*.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-114">The following example shows a simple *query expression* and the semantically equivalent query written as a *method-based query*.</span></span>  
  
 [!code-csharp[csLINQGettingStarted#22](../../../../csharp/programming-guide/concepts/linq/codesnippet/CSharp/query-syntax-and-method-syntax-in-linq_1.cs)]  
  
 <span data-ttu-id="9c4ba-115">A saída dos dois exemplos é idêntica.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-115">The output from the two examples is identical.</span></span> <span data-ttu-id="9c4ba-116">Você pode ver que o tipo da variável de consulta é o mesmo em ambas as formas: <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-116">You can see that the type of the query variable is the same in both forms: <xref:System.Collections.Generic.IEnumerable%601>.</span></span>  
  
 <span data-ttu-id="9c4ba-117">Para entender a consulta baseada em método, vamos examiná-la melhor.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-117">To understand the method-based query, let's examine it more closely.</span></span> <span data-ttu-id="9c4ba-118">No lado direito da expressão, observe que a cláusula `where` agora é expressa como um método de instância no objeto `numbers`, que, como você deve se lembrar, tem um tipo de `IEnumerable<int>`.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-118">On the right side of the expression, notice that the `where` clause is now expressed as an instance method on the `numbers` object, which as you will recall has a type of `IEnumerable<int>`.</span></span> <span data-ttu-id="9c4ba-119">Se você estiver familiarizado com a interface <xref:System.Collections.Generic.IEnumerable%601> genérica, você saberá que ela não tem um método `Where`.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-119">If you are familiar with the generic <xref:System.Collections.Generic.IEnumerable%601> interface, you know that it does not have a `Where` method.</span></span> <span data-ttu-id="9c4ba-120">No entanto, se você invocar a lista de conclusão do IntelliSense no IDE do Visual Studio, verá não apenas um método `Where`, mas muitos outros métodos como `Select`, `SelectMany`, `Join` e `Orderby`.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-120">However, if you invoke the IntelliSense completion list in the Visual Studio IDE, you will see not only a `Where` method, but many other methods such as `Select`, `SelectMany`, `Join`, and `Orderby`.</span></span> <span data-ttu-id="9c4ba-121">Esses são todos os operadores de consulta padrão.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-121">These are all the standard query operators.</span></span>  
  
 <span data-ttu-id="9c4ba-122">![Operadores de consulta padrão no IntelliSense](../../../../csharp/programming-guide/concepts/linq/media/standardqueryops.png "StandardQueryOps")</span><span class="sxs-lookup"><span data-stu-id="9c4ba-122">![Standard Query Operators in Intellisense](../../../../csharp/programming-guide/concepts/linq/media/standardqueryops.png "StandardQueryOps")</span></span>  
  
 <span data-ttu-id="9c4ba-123">Embora pareça como se <xref:System.Collections.Generic.IEnumerable%601> tivesse sido redefinido para incluir esses métodos adicionais, na verdade esse não é o caso.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-123">Although it looks as if <xref:System.Collections.Generic.IEnumerable%601> has been redefined to include these additional methods, in fact this is not the case.</span></span> <span data-ttu-id="9c4ba-124">Os operadores de consulta padrão são implementados como um novo tipo de método chamado *métodos de extensão*.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-124">The standard query operators are implemented as a new kind of method called *extension methods*.</span></span> <span data-ttu-id="9c4ba-125">Métodos de extensão "estendem" um tipo existente, eles podem ser chamados como se fossem métodos de instância no tipo.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-125">Extensions methods "extend" an existing type; they can be called as if they were instance methods on the type.</span></span> <span data-ttu-id="9c4ba-126">Os operadores de consulta padrão estendem <xref:System.Collections.Generic.IEnumerable%601> e que é por esse motivo que você pode escrever `numbers.Where(...)`.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-126">The standard query operators extend <xref:System.Collections.Generic.IEnumerable%601> and that is why you can write `numbers.Where(...)`.</span></span>  
  
 <span data-ttu-id="9c4ba-127">Para começar a usar [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)], tudo o que você realmente precisa saber sobre os métodos de extensão é como colocá-los no escopo em seu aplicativo usando as diretivas `using` corretas.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-127">To get started using [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)], all that you really have to know about extension methods is how to bring them into scope in your application by using the correct `using` directives.</span></span> <span data-ttu-id="9c4ba-128">Do ponto de vista do aplicativo, um método de extensão e um método de instância normal são iguais.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-128">From your application's point of view, an extension method and a regular instance method are the same.</span></span>  
  
 <span data-ttu-id="9c4ba-129">Para obter mais informações sobre os métodos de extensão, consulte [Métodos de extensão](../../../../csharp/programming-guide/classes-and-structs/extension-methods.md).</span><span class="sxs-lookup"><span data-stu-id="9c4ba-129">For more information about extension methods, see [Extension Methods](../../../../csharp/programming-guide/classes-and-structs/extension-methods.md).</span></span> <span data-ttu-id="9c4ba-130">Para obter mais informações sobre os operadores de consulta padrão, consulte [Visão geral de operadores de consulta padrão (C#)](../../../../csharp/programming-guide/concepts/linq/standard-query-operators-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9c4ba-130">For more information about standard query operators, see [Standard Query Operators Overview (C#)](../../../../csharp/programming-guide/concepts/linq/standard-query-operators-overview.md).</span></span> <span data-ttu-id="9c4ba-131">Alguns provedores de [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)], como [!INCLUDE[vbtecdlinq](~/includes/vbtecdlinq-md.md)] e [!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)], implementam seus próprios operadores de consulta padrão e os métodos de extensão adicionais para outros tipos além de <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-131">Some [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)] providers, such as [!INCLUDE[vbtecdlinq](~/includes/vbtecdlinq-md.md)] and [!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)], implement their own standard query operators and additional extension methods for other types besides <xref:System.Collections.Generic.IEnumerable%601>.</span></span>  
  
## <a name="lambda-expressions"></a><span data-ttu-id="9c4ba-132">Expressões lambda</span><span class="sxs-lookup"><span data-stu-id="9c4ba-132">Lambda Expressions</span></span>  
 <span data-ttu-id="9c4ba-133">No exemplo anterior, observe que a expressão condicional (`num % 2 == 0`) é passada como um argumento embutido para o método `Where`: `Where(num => num % 2 == 0).` Essa expressão embutida é chamada de uma expressão lambda.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-133">In the previous example, notice that the conditional expression (`num % 2 == 0`) is passed as an in-line argument to the `Where` method: `Where(num => num % 2 == 0).` This inline expression is called a lambda expression.</span></span> <span data-ttu-id="9c4ba-134">É uma maneira conveniente de escrever um código que de outra forma precisaria ser escrito de forma mais complicada como um método anônimo, um delegado genérico ou uma árvore de expressão.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-134">It is a convenient way to write code that would otherwise have to be written in more cumbersome form as an anonymous method or a generic delegate or an expression tree.</span></span> <span data-ttu-id="9c4ba-135">No C# `=>` é o operador lambda, que é lido como "vai para".</span><span class="sxs-lookup"><span data-stu-id="9c4ba-135">In C# `=>` is the lambda operator, which is read as "goes to".</span></span> <span data-ttu-id="9c4ba-136">O `num` à esquerda do operador é a variável de entrada que corresponde ao `num` na expressão de consulta.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-136">The `num` on the left of the operator is the input variable which corresponds to `num` in the query expression.</span></span> <span data-ttu-id="9c4ba-137">O compilador pode inferir o tipo de `num` porque ele sabe que `numbers` é um tipo <xref:System.Collections.Generic.IEnumerable%601> genérico.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-137">The compiler can infer the type of `num` because it knows that `numbers` is a generic <xref:System.Collections.Generic.IEnumerable%601> type.</span></span> <span data-ttu-id="9c4ba-138">O corpo do lambda é exatamente igual à expressão na sintaxe de consulta ou em qualquer outra expressão ou instrução C#, ele pode incluir chamadas de método e outra lógica complexa.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-138">The body of the lambda is just the same as the expression in query syntax or in any other C# expression or statement; it can include method calls and other complex logic.</span></span> <span data-ttu-id="9c4ba-139">O "valor retornado" é apenas o resultado da expressão.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-139">The "return value" is just the expression result.</span></span>  
  
 <span data-ttu-id="9c4ba-140">Para começar a usar [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)], você não precisa usar lambdas extensivamente.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-140">To get started using [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)], you do not have to use lambdas extensively.</span></span> <span data-ttu-id="9c4ba-141">No entanto, determinadas consultas só podem ser expressadas em sintaxe de método e algumas delas requerem expressões lambda.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-141">However, certain queries can only be expressed in method syntax and some of those require lambda expressions.</span></span> <span data-ttu-id="9c4ba-142">Após você se familiarizar mais com lambdas, verá que eles são uma ferramenta poderosa e flexível na sua caixa de ferramentas [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9c4ba-142">After you become more familiar with lambdas, you will find that they are a powerful and flexible tool in your [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)] toolbox.</span></span> <span data-ttu-id="9c4ba-143">Para obter mais informações, consulte [Expressões Lambda](../../../../csharp/programming-guide/statements-expressions-operators/lambda-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="9c4ba-143">For more information, see [Lambda Expressions](../../../../csharp/programming-guide/statements-expressions-operators/lambda-expressions.md).</span></span>  
  
## <a name="composability-of-queries"></a><span data-ttu-id="9c4ba-144">Possibilidade de Composição das Consultas</span><span class="sxs-lookup"><span data-stu-id="9c4ba-144">Composability of Queries</span></span>  
 <span data-ttu-id="9c4ba-145">No exemplo de código anterior, observe que o método `OrderBy` é invocado usando o operador ponto na chamada para `Where`.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-145">In the previous code example, note that the `OrderBy` method is invoked by using the dot operator on the call to `Where`.</span></span> <span data-ttu-id="9c4ba-146">`Where` produz uma sequência filtrada e, em seguida, `Orderby` opera nessa sequência classificando-a.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-146">`Where` produces a filtered sequence, and then `Orderby` operates on that sequence by sorting it.</span></span> <span data-ttu-id="9c4ba-147">Como as consultas retornam uma `IEnumerable`, você pode escrevê-las na sintaxe de método encadeando as chamadas de método.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-147">Because queries return an `IEnumerable`, you compose them in method syntax by chaining the method calls together.</span></span> <span data-ttu-id="9c4ba-148">Isso é o que o compilador faz nos bastidores quando você escreve consultas usando a sintaxe de consulta.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-148">This is what the compiler does behind the scenes when you write queries by using query syntax.</span></span> <span data-ttu-id="9c4ba-149">E como uma variável de consulta não armazena os resultados da consulta, você pode modificá-la ou usá-la como base para uma nova consulta a qualquer momento, mesmo depois que ela foi executada.</span><span class="sxs-lookup"><span data-stu-id="9c4ba-149">And because a query variable does not store the results of the query, you can modify it or use it as the basis for a new query at any time, even after it has been executed.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9c4ba-150">Consulte também</span><span class="sxs-lookup"><span data-stu-id="9c4ba-150">See Also</span></span>

- [<span data-ttu-id="9c4ba-151">Introdução a LINQ em C#</span><span class="sxs-lookup"><span data-stu-id="9c4ba-151">Getting Started with LINQ in C#</span></span>](../../../../csharp/programming-guide/concepts/linq/getting-started-with-linq.md)
