---
title: Usar tipos de registro-tutorial em C#
description: Saiba mais sobre como usar tipos de registro, criar hierarquias de registros e quando escolher registros em classes.
ms.date: 11/12/2020
ms.openlocfilehash: 8a2cb6966ab4f93432723fd6f82618efa86b26aa
ms.sourcegitcommit: 34968a61e9bac0f6be23ed6ffb837f52d2390c85
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/17/2020
ms.locfileid: "94688580"
---
# <a name="create-record-types"></a><span data-ttu-id="2de39-103">Criar tipos de registro</span><span class="sxs-lookup"><span data-stu-id="2de39-103">Create record types</span></span>

<span data-ttu-id="2de39-104">O C# 9 apresenta *registros*, um novo tipo de referência que você pode criar em vez de classes ou estruturas.</span><span class="sxs-lookup"><span data-stu-id="2de39-104">C# 9 introduces *records*, a new reference type that you can create instead of classes or structs.</span></span> <span data-ttu-id="2de39-105">Os registros são distintos das classes nos tipos de registro que usam *igualdade baseada em valor*.</span><span class="sxs-lookup"><span data-stu-id="2de39-105">Records are distinct from classes in that record types use *value-based equality*.</span></span> <span data-ttu-id="2de39-106">Duas variáveis de um tipo de registro são iguais se as definições de tipo de registro são idênticas e se para cada campo, os valores em ambos os registros são iguais.</span><span class="sxs-lookup"><span data-stu-id="2de39-106">Two variables of a record type are equal if the record type definitions are identical, and if for every field, the values in both records are equal.</span></span> <span data-ttu-id="2de39-107">Duas variáveis de um tipo de classe são iguais se os objetos referenciados são o mesmo tipo de classe e as variáveis referem-se ao mesmo objeto.</span><span class="sxs-lookup"><span data-stu-id="2de39-107">Two variables of a class type are equal if the objects referred to are the same class type and the variables refer to the same object.</span></span> <span data-ttu-id="2de39-108">A igualdade baseada em valor implica em outros recursos que você provavelmente desejará em tipos de registro.</span><span class="sxs-lookup"><span data-stu-id="2de39-108">Value-based equality implies other capabilities you'll probably want in record types.</span></span> <span data-ttu-id="2de39-109">O compilador gera muitos desses membros quando você declara um `record` em vez de um `class` .</span><span class="sxs-lookup"><span data-stu-id="2de39-109">The compiler generates many of those members when you declare a `record` instead of a `class`.</span></span>

<span data-ttu-id="2de39-110">Neste tutorial, você aprenderá como:</span><span class="sxs-lookup"><span data-stu-id="2de39-110">In this tutorial, you'll learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="2de39-111">Decida se você deve declarar um `class` ou um `record` .</span><span class="sxs-lookup"><span data-stu-id="2de39-111">Decide if you should declare a `class` or a `record`.</span></span>
> - <span data-ttu-id="2de39-112">Declare tipos de registro e tipos de registro posicionais.</span><span class="sxs-lookup"><span data-stu-id="2de39-112">Declare record types and positional record types.</span></span>
> - <span data-ttu-id="2de39-113">Substitua seus métodos por métodos gerados pelo compilador em registros.</span><span class="sxs-lookup"><span data-stu-id="2de39-113">Substitute your methods for compiler generated methods in records.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="2de39-114">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="2de39-114">Prerequisites</span></span>

<span data-ttu-id="2de39-115">Você precisará configurar seu computador para executar o .NET 5 ou posterior, incluindo o compilador C# 9,0 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="2de39-115">You’ll need to set up your machine to run .NET 5 or later, including the C# 9.0 or later compiler.</span></span> <span data-ttu-id="2de39-116">O compilador C# 9,0 está disponível a partir do [Visual Studio 2019 versão 16,8](https://visualstudio.microsoft.com/vs) ou do [SDK do .NET 5,0](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="2de39-116">The C# 9.0 compiler is available starting with [Visual Studio 2019 version 16.8](https://visualstudio.microsoft.com/vs) or the [.NET 5.0 SDK](https://dotnet.microsoft.com/download).</span></span>

## <a name="characteristics-of-records"></a><span data-ttu-id="2de39-117">Características dos registros</span><span class="sxs-lookup"><span data-stu-id="2de39-117">Characteristics of records</span></span>

<span data-ttu-id="2de39-118">Você define um *registro* declarando um tipo com a `record` palavra-chave, em vez da `class` `struct` palavra-chave ou.</span><span class="sxs-lookup"><span data-stu-id="2de39-118">You define a *record* by declaring a type with the `record` keyword, instead of the `class` or `struct` keyword.</span></span> <span data-ttu-id="2de39-119">Um registro é um tipo de referência e segue a semântica de igualdade baseada em valor.</span><span class="sxs-lookup"><span data-stu-id="2de39-119">A record is a reference type and follows value-based equality semantics.</span></span> <span data-ttu-id="2de39-120">Para impor a semântica de valor, o compilador gera vários métodos para o tipo de registro:</span><span class="sxs-lookup"><span data-stu-id="2de39-120">To enforce value semantics, the compiler generates several methods for your record type:</span></span>

- <span data-ttu-id="2de39-121">Uma substituição de <xref:System.Object.Equals(System.Object)?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="2de39-121">An override of <xref:System.Object.Equals(System.Object)?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="2de39-122">Um `Equals` método virtual cujo parâmetro é o tipo de registro.</span><span class="sxs-lookup"><span data-stu-id="2de39-122">A virtual `Equals` method whose parameter is the record type.</span></span>
- <span data-ttu-id="2de39-123">Uma substituição de <xref:System.Object.GetHashCode?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="2de39-123">An override of <xref:System.Object.GetHashCode?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="2de39-124">Métodos para `operator ==` e `operator !=` .</span><span class="sxs-lookup"><span data-stu-id="2de39-124">Methods for `operator ==` and `operator !=`.</span></span>
- <span data-ttu-id="2de39-125">Implementações de tipos de registro <xref:System.IEquatable%601?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="2de39-125">Record types implement <xref:System.IEquatable%601?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="2de39-126">Além disso, os registros fornecem uma substituição de <xref:System.Object.ToString?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="2de39-126">In addition, records provide an override of <xref:System.Object.ToString?displayProperty=nameWithType>.</span></span> <span data-ttu-id="2de39-127">O compilador sintetiza métodos para exibir registros usando <xref:System.Object.ToString?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="2de39-127">The compiler synthesizes methods for displaying records using <xref:System.Object.ToString?displayProperty=nameWithType>.</span></span> <span data-ttu-id="2de39-128">Você irá explorar esses membros enquanto escreve o código para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="2de39-128">You'll explore those members as you write the code for this tutorial.</span></span> <span data-ttu-id="2de39-129">Registra `with` expressões de suporte para habilitar a mutação não destrutiva de registros.</span><span class="sxs-lookup"><span data-stu-id="2de39-129">Records support `with` expressions to enable non-destructive mutation of records.</span></span>

<span data-ttu-id="2de39-130">Você também pode declarar *registros posicionais* usando uma sintaxe mais concisa.</span><span class="sxs-lookup"><span data-stu-id="2de39-130">You can also declare *positional records* using a more concise syntax.</span></span> <span data-ttu-id="2de39-131">O compilador sintetiza mais métodos para você quando você declara registros posicionais:</span><span class="sxs-lookup"><span data-stu-id="2de39-131">The compiler synthesizes more methods for you when you declare positional records:</span></span>

- <span data-ttu-id="2de39-132">Um construtor primário cujos parâmetros correspondem aos parâmetros posicionais na declaração de registro.</span><span class="sxs-lookup"><span data-stu-id="2de39-132">A primary constructor whose parameters match the positional parameters on the record declaration.</span></span>
- <span data-ttu-id="2de39-133">Propriedades públicas somente de inicialização para cada parâmetro de um construtor primário.</span><span class="sxs-lookup"><span data-stu-id="2de39-133">Public init-only properties for each parameter of a primary constructor.</span></span>
- <span data-ttu-id="2de39-134">Um `Deconstruct` método para extrair propriedades do registro.</span><span class="sxs-lookup"><span data-stu-id="2de39-134">A `Deconstruct` method to extract properties from the record.</span></span>

## <a name="build-temperature-data"></a><span data-ttu-id="2de39-135">Criar dados de temperatura</span><span class="sxs-lookup"><span data-stu-id="2de39-135">Build temperature data</span></span>

<span data-ttu-id="2de39-136">Os dados e as estatísticas estão entre os cenários em que você desejará usar registros.</span><span class="sxs-lookup"><span data-stu-id="2de39-136">Data and statistics are among the scenarios where you'll want to use records.</span></span> <span data-ttu-id="2de39-137">Para este tutorial, você criará um aplicativo que calcula os *dias de grau* para diferentes usos.</span><span class="sxs-lookup"><span data-stu-id="2de39-137">For this tutorial, you'll build an application that computes *degree days* for different uses.</span></span> <span data-ttu-id="2de39-138">Os *dias de grau* são uma medida de calor (ou falta de calor) durante um período de dias, semanas ou meses.</span><span class="sxs-lookup"><span data-stu-id="2de39-138">*Degree days* are a measure of heat (or lack of heat) over a period of days, weeks, or months.</span></span> <span data-ttu-id="2de39-139">Os dias de grau controlam e preveem o uso de energia.</span><span class="sxs-lookup"><span data-stu-id="2de39-139">Degree days track and predict energy usage.</span></span> <span data-ttu-id="2de39-140">Mais mais quente dias significa mais ar condicionado e mais frios significa mais uso de Furnace.</span><span class="sxs-lookup"><span data-stu-id="2de39-140">More hotter days means more air conditioning, and more colder days means more furnace usage.</span></span> <span data-ttu-id="2de39-141">Os dias de grau ajudam a gerenciar populações de planta.</span><span class="sxs-lookup"><span data-stu-id="2de39-141">Degree days help manage plant populations.</span></span> <span data-ttu-id="2de39-142">Os dias de grau correlacionam-se ao crescimento da fábrica à medida que as estações mudam.</span><span class="sxs-lookup"><span data-stu-id="2de39-142">Degree days correlate to plant growth as the seasons change.</span></span> <span data-ttu-id="2de39-143">Os dias de grau ajudam a acompanhar as migrações de animais para espécies que viajam para o clima de correspondência.</span><span class="sxs-lookup"><span data-stu-id="2de39-143">Degree days help track animal migrations for species that travel to match climate.</span></span>

<span data-ttu-id="2de39-144">A fórmula é baseada na temperatura média em um determinado dia e em uma temperatura de linha de base.</span><span class="sxs-lookup"><span data-stu-id="2de39-144">The formula is based on the mean temperature on a given day and a baseline temperature.</span></span> <span data-ttu-id="2de39-145">Para calcular os dias de grau ao longo do tempo, você precisará da temperatura alta e baixa por dia por um período de tempo.</span><span class="sxs-lookup"><span data-stu-id="2de39-145">To compute degree days over time, you'll need the high and low temperature each day for a period of time.</span></span> <span data-ttu-id="2de39-146">Vamos começar criando um novo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2de39-146">Let's start by creating a new application.</span></span> <span data-ttu-id="2de39-147">Crie um novo aplicativo de console.</span><span class="sxs-lookup"><span data-stu-id="2de39-147">Make a new console application.</span></span> <span data-ttu-id="2de39-148">Crie um novo tipo de registro em um novo arquivo chamado "DailyTemperature.cs":</span><span class="sxs-lookup"><span data-stu-id="2de39-148">Create a new record type in a new file named "DailyTemperature.cs":</span></span>

:::code language="csharp" source="snippets/record-types/InterimSteps.cs" ID="DailyRecord":::

<span data-ttu-id="2de39-149">O código anterior define um *registro posicional*.</span><span class="sxs-lookup"><span data-stu-id="2de39-149">The preceding code defines a *positional record*.</span></span> <span data-ttu-id="2de39-150">Você criou um tipo de referência que contém duas propriedades: `HighTemp` e `LowTemp` .</span><span class="sxs-lookup"><span data-stu-id="2de39-150">You've created a reference type that contains two properties: `HighTemp`, and `LowTemp`.</span></span> <span data-ttu-id="2de39-151">Essas propriedades são *apenas Propriedades de inicialização*, o que significa que elas podem ser definidas no construtor ou usando um inicializador de propriedade.</span><span class="sxs-lookup"><span data-stu-id="2de39-151">Those properties are *init only properties*, meaning they can be set in the constructor or using a property initializer.</span></span> <span data-ttu-id="2de39-152">O `DailyTemperature` tipo também tem um *Construtor principal* que tem dois parâmetros que correspondem às duas propriedades.</span><span class="sxs-lookup"><span data-stu-id="2de39-152">The `DailyTemperature` type also has a *primary constructor* that has two parameters that match the two properties.</span></span> <span data-ttu-id="2de39-153">Você usa o Construtor principal para inicializar um `DailyTemperature` registro:</span><span class="sxs-lookup"><span data-stu-id="2de39-153">You use the primary constructor to initialize a `DailyTemperature` record:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="DeclareData":::

<span data-ttu-id="2de39-154">Você pode adicionar suas próprias propriedades ou métodos a registros, incluindo registros posicionais.</span><span class="sxs-lookup"><span data-stu-id="2de39-154">You can add your own properties or methods to records, including positional records.</span></span> <span data-ttu-id="2de39-155">Você precisará calcular a temperatura média para cada dia.</span><span class="sxs-lookup"><span data-stu-id="2de39-155">You'll need to compute the mean temperature for each day.</span></span> <span data-ttu-id="2de39-156">Você pode adicionar essa propriedade ao `DailyTemperature` registro:</span><span class="sxs-lookup"><span data-stu-id="2de39-156">You can add that property to the `DailyTemperature` record:</span></span>

:::code language="csharp" source="snippets/record-types/DailyTemperature.cs" ID="TemperatureRecord":::

<span data-ttu-id="2de39-157">Vamos garantir que você possa usar esses dados.</span><span class="sxs-lookup"><span data-stu-id="2de39-157">Let's make sure you can use this data.</span></span> <span data-ttu-id="2de39-158">Adicione o código a seguir ao método `Main`:</span><span class="sxs-lookup"><span data-stu-id="2de39-158">Add the following code to your `Main` method:</span></span>

```csharp
foreach (var item in data)
    Console.WriteLine(item);
```

<span data-ttu-id="2de39-159">Execute o aplicativo e você verá uma saída parecida com a seguinte exibição (várias linhas removidas para o espaço):</span><span class="sxs-lookup"><span data-stu-id="2de39-159">Run your application, and you'll see output that looks similar to the following display (several rows removed for space):</span></span>

```dotnetcli
DailyTemperature { HighTemp = 57, LowTemp = 30, Mean = 43.5 }
DailyTemperature { HighTemp = 60, LowTemp = 35, Mean = 47.5 }


DailyTemperature { HighTemp = 80, LowTemp = 60, Mean = 70 }
DailyTemperature { HighTemp = 85, LowTemp = 66, Mean = 75.5 }
```

<span data-ttu-id="2de39-160">O código anterior mostra a saída da substituição de `ToString` sintetizada pelo compilador.</span><span class="sxs-lookup"><span data-stu-id="2de39-160">The preceding code shows the output from the override of `ToString` synthesized by the compiler.</span></span> <span data-ttu-id="2de39-161">Se preferir um texto diferente, você poderá escrever sua própria versão do `ToString` .</span><span class="sxs-lookup"><span data-stu-id="2de39-161">If you prefer different text, you can write your own version of `ToString`.</span></span> <span data-ttu-id="2de39-162">Isso impede que o compilador sintetizasse uma versão para você.</span><span class="sxs-lookup"><span data-stu-id="2de39-162">That prevents the compiler from synthesizing a version for you.</span></span>

## <a name="compute-degree-days"></a><span data-ttu-id="2de39-163">Dias de computação</span><span class="sxs-lookup"><span data-stu-id="2de39-163">Compute degree days</span></span>

<span data-ttu-id="2de39-164">Para calcular os dias de grau, você assume a diferença de uma temperatura de linha de base e a temperatura média em um determinado dia.</span><span class="sxs-lookup"><span data-stu-id="2de39-164">To compute degree days, you take the difference from a baseline temperature and the mean temperature on a given day.</span></span> <span data-ttu-id="2de39-165">Para medir o calor ao longo do tempo, descarte os dias em que a temperatura média está abaixo da linha de base.</span><span class="sxs-lookup"><span data-stu-id="2de39-165">To measure heat over time, you discard any days where the mean temperature is below the baseline.</span></span> <span data-ttu-id="2de39-166">Para medir frio ao longo do tempo, descartar os dias em que a temperatura média está acima da linha de base.</span><span class="sxs-lookup"><span data-stu-id="2de39-166">To measure cold over time, you discard any days where the mean temperature is above the baseline.</span></span> <span data-ttu-id="2de39-167">Por exemplo, os EUA usam 65F como a base para os dias de aquecimento e resfriamento.</span><span class="sxs-lookup"><span data-stu-id="2de39-167">For example, the U.S. uses 65F as the base for both heating  and cooling degree days.</span></span> <span data-ttu-id="2de39-168">Essa é a temperatura onde não é necessário aquecimento ou resfriamento.</span><span class="sxs-lookup"><span data-stu-id="2de39-168">That's the temperature where no heating or cooling is needed.</span></span> <span data-ttu-id="2de39-169">Se um dia tiver uma temperatura média de 70F, esse dia será de 5 dias de resfriamento e 0 dias de aquecimento.</span><span class="sxs-lookup"><span data-stu-id="2de39-169">If a day has a mean temperature of 70F, that day is 5 cooling degree days and 0 heating degree days.</span></span> <span data-ttu-id="2de39-170">Por outro lado, se a temperatura média for 55F, esse dia será de 10 dias de aquecimento e 0 dias de resfriamento.</span><span class="sxs-lookup"><span data-stu-id="2de39-170">Conversely, if the mean temperature is 55F, that day is 10 heating degree days and 0 cooling degree days.</span></span>

<span data-ttu-id="2de39-171">Você pode expressar essas fórmulas como uma pequena hierarquia de tipos de registro: um tipo de dia de grau abstrato e dois tipos concretos para dias de aquecimento e dias de resfriamento.</span><span class="sxs-lookup"><span data-stu-id="2de39-171">You can express these formulas as a small hierarchy of record types: an abstract degree day type and two concrete types for heating degree days and cooling degree days.</span></span> <span data-ttu-id="2de39-172">Esses tipos também podem ser registros posicionais.</span><span class="sxs-lookup"><span data-stu-id="2de39-172">These types can also be positional records.</span></span> <span data-ttu-id="2de39-173">Eles usam uma temperatura de linha de base e uma sequência de registros de temperatura diária como argumentos para o construtor primário:</span><span class="sxs-lookup"><span data-stu-id="2de39-173">They take a baseline temperature and a sequence of daily temperature records as arguments to the primary constructor:</span></span>

:::code language="csharp" source="snippets/record-types/InterimSteps.cs" ID="DegreeDaysRecords":::

<span data-ttu-id="2de39-174">O `DegreeDays` registro abstrato é a classe base compartilhada para os `HeatingDegreeDays` registros e `CoolingDegreeDays` .</span><span class="sxs-lookup"><span data-stu-id="2de39-174">The abstract `DegreeDays` record is the shared base class for both the `HeatingDegreeDays` and `CoolingDegreeDays` records.</span></span> <span data-ttu-id="2de39-175">As declarações de Construtor primários nos registros derivados mostram como gerenciar a inicialização do registro base.</span><span class="sxs-lookup"><span data-stu-id="2de39-175">The primary constructor declarations on the derived records show how to manage base record initialization.</span></span> <span data-ttu-id="2de39-176">O registro derivado declara parâmetros para todos os parâmetros no Construtor principal de registro de base.</span><span class="sxs-lookup"><span data-stu-id="2de39-176">Your derived record declares parameters for all the parameters in the base record primary constructor.</span></span> <span data-ttu-id="2de39-177">O registro base declara e inicializa essas propriedades.</span><span class="sxs-lookup"><span data-stu-id="2de39-177">The base record declares and initializes those properties.</span></span> <span data-ttu-id="2de39-178">O registro derivado não os oculta, mas só cria e inicializa Propriedades para parâmetros que não são declarados em seu registro base.</span><span class="sxs-lookup"><span data-stu-id="2de39-178">The derived record doesn't hide them, but only creates and initializes properties for parameters that aren't declared in its base record.</span></span> <span data-ttu-id="2de39-179">Neste exemplo, os registros derivados não adicionam novos parâmetros de Construtor primários.</span><span class="sxs-lookup"><span data-stu-id="2de39-179">In this example, the derived records don't add new primary constructor parameters.</span></span> <span data-ttu-id="2de39-180">Teste seu código adicionando o seguinte código ao seu `Main` método:</span><span class="sxs-lookup"><span data-stu-id="2de39-180">Test your code by adding the following code to your `Main` method:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="HeatingAndCooling":::

<span data-ttu-id="2de39-181">Você obterá uma saída semelhante à mostrada a seguir:</span><span class="sxs-lookup"><span data-stu-id="2de39-181">You'll get output like the following display:</span></span>

```dotnetcli
HeatingDegreeDays { BaseTemperature = 65, TempRecords = record_types.DailyTemperature[], DegreeDays = 85 }
CoolingDegreeDays { BaseTemperature = 65, TempRecords = record_types.DailyTemperature[], DegreeDays = 71.5 }
```

## <a name="define-compiler-synthesized-methods"></a><span data-ttu-id="2de39-182">Definir métodos sintetizados pelo compilador</span><span class="sxs-lookup"><span data-stu-id="2de39-182">Define compiler-synthesized methods</span></span>

<span data-ttu-id="2de39-183">Seu código calcula o número correto de dias de aquecimento e resfriamento durante esse período de tempo.</span><span class="sxs-lookup"><span data-stu-id="2de39-183">Your code calculates the correct number of heating and cooling degree days over that period of time.</span></span> <span data-ttu-id="2de39-184">Mas este exemplo mostra por que você pode querer substituir alguns dos métodos sintetizados por registros.</span><span class="sxs-lookup"><span data-stu-id="2de39-184">But this example shows why you may want to replace some of the synthesized methods for records.</span></span> <span data-ttu-id="2de39-185">Você pode declarar sua própria versão de qualquer um dos métodos sintetizados pelo compilador em um tipo de registro, exceto o método clone.</span><span class="sxs-lookup"><span data-stu-id="2de39-185">You can declare your own version of any of the compiler-synthesized methods in a record type except the clone method.</span></span> <span data-ttu-id="2de39-186">O método clone tem um nome gerado pelo compilador e você não pode fornecer uma implementação diferente.</span><span class="sxs-lookup"><span data-stu-id="2de39-186">The clone method has a compiler generated name and you cannot provide a different implementation.</span></span> <span data-ttu-id="2de39-187">Esses métodos sintetizados incluem um construtor de cópia, os membros da <xref:System.IEquatable%601?displayProperty=nameWithType> interface, os testes de igualdade e desigualdade e <xref:System.Object.GetHashCode> .</span><span class="sxs-lookup"><span data-stu-id="2de39-187">These synthesized methods include a copy constructor, the members of the <xref:System.IEquatable%601?displayProperty=nameWithType> interface, equality and inequality tests, and <xref:System.Object.GetHashCode>.</span></span> <span data-ttu-id="2de39-188">Para essa finalidade, você resumirá `PrintMembers` .</span><span class="sxs-lookup"><span data-stu-id="2de39-188">For this purpose, you'll synthesize `PrintMembers`.</span></span> <span data-ttu-id="2de39-189">Você também pode declarar seu próprio `ToString` , mas `PrintMembers` fornece uma opção melhor para cenários de herança.</span><span class="sxs-lookup"><span data-stu-id="2de39-189">You could also declare your own `ToString`, but `PrintMembers` provides a better option for inheritance scenarios.</span></span> <span data-ttu-id="2de39-190">Para fornecer sua própria versão de um método sintetizado, a assinatura deve corresponder ao método sintetizado.</span><span class="sxs-lookup"><span data-stu-id="2de39-190">To provide your own version of a synthesized method, the signature must match the synthesized method.</span></span>

<span data-ttu-id="2de39-191">O `TempRecords` elemento na saída do console não é útil.</span><span class="sxs-lookup"><span data-stu-id="2de39-191">The `TempRecords` element in the console output isn't useful.</span></span> <span data-ttu-id="2de39-192">Ele exibe o tipo, mas nada mais.</span><span class="sxs-lookup"><span data-stu-id="2de39-192">It displays the type, but nothing else.</span></span> <span data-ttu-id="2de39-193">Você pode alterar esse comportamento fornecendo sua própria implementação do método sintetizado `PrintMembers` .</span><span class="sxs-lookup"><span data-stu-id="2de39-193">You can change this behavior by providing your own implementation of the synthesized `PrintMembers` method.</span></span> <span data-ttu-id="2de39-194">A assinatura depende dos modificadores aplicados à `record` declaração:</span><span class="sxs-lookup"><span data-stu-id="2de39-194">The signature depends on modifiers applied to the `record` declaration:</span></span>

- <span data-ttu-id="2de39-195">Se um tipo de registro for `sealed` , a assinatura será `private bool PrintMembers(StringBuilder builder);`</span><span class="sxs-lookup"><span data-stu-id="2de39-195">If a record type is `sealed`, the signature is `private bool PrintMembers(StringBuilder builder);`</span></span>
- <span data-ttu-id="2de39-196">Se um tipo de registro não for `sealed` e for derivado de `object` (ou seja, não declarar um registro base), a assinatura será `protected virtual bool PrintMembers(StringBuilder builder);`</span><span class="sxs-lookup"><span data-stu-id="2de39-196">If a record type isn't `sealed` and derives from `object` (that is, it doesn't declare a base record), the signature is `protected virtual bool PrintMembers(StringBuilder builder);`</span></span>
- <span data-ttu-id="2de39-197">Se um tipo de registro não for `sealed` e for derivado de outro registro, a assinatura será `protected override bool PrintMembers(StringBuilder builder);`</span><span class="sxs-lookup"><span data-stu-id="2de39-197">If a record type isn't `sealed` and derives from another record, the signature is `protected override bool PrintMembers(StringBuilder builder);`</span></span>

<span data-ttu-id="2de39-198">Essas regras são mais fáceis de compreender ao entender a finalidade de `PrintMembers` .</span><span class="sxs-lookup"><span data-stu-id="2de39-198">These rules are easiest to comprehend through understanding the purpose of `PrintMembers`.</span></span> <span data-ttu-id="2de39-199">`PrintMembers` Adiciona informações sobre cada propriedade em um tipo de registro a uma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="2de39-199">`PrintMembers` adds information about each property in a record type to a string.</span></span> <span data-ttu-id="2de39-200">O contrato requer registros base para adicionar seus membros à exibição e supõe que os membros derivados adicionarão seus membros.</span><span class="sxs-lookup"><span data-stu-id="2de39-200">The contract requires base records to add their members to the display and assumes derived members will add their members.</span></span> <span data-ttu-id="2de39-201">Cada tipo de registro sintetiza uma `ToString` substituição que é semelhante ao seguinte exemplo para `HeatingDegreeDays` :</span><span class="sxs-lookup"><span data-stu-id="2de39-201">Each record type synthesizes a `ToString` override that looks similar to the following example for `HeatingDegreeDays`:</span></span>

```csharp
public override string ToString()
{
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.Append("HeatingDegreeDays");
    stringBuilder.Append(" { ");
    if (PrintMembers(stringBuilder))
    {
        stringBuilder.Append(" ");
    }
    stringBuilder.Append("}");
    return stringBuilder.ToString();
}
```

<span data-ttu-id="2de39-202">Você declara um `PrintMembers` método no `DegreeDays` registro que não imprime o tipo da coleção:</span><span class="sxs-lookup"><span data-stu-id="2de39-202">You declare a `PrintMembers` method in the `DegreeDays` record that doesn't print the type of the collection:</span></span>

:::code language="csharp" source="snippets/record-types/DegreeDays.cs" ID="AddPrintMembers":::

<span data-ttu-id="2de39-203">A assinatura declara um `virtual protected` método para corresponder à versão do compilador.</span><span class="sxs-lookup"><span data-stu-id="2de39-203">The signature declares a `virtual protected` method to match the compiler's version.</span></span> <span data-ttu-id="2de39-204">Não se preocupe se você obtiver os acessadores incorretos; a linguagem impõe a assinatura correta.</span><span class="sxs-lookup"><span data-stu-id="2de39-204">Don't worry if you get the accessors wrong; the language enforces the correct signature.</span></span> <span data-ttu-id="2de39-205">Se você esquecer os modificadores corretos para qualquer método sintetizado, o compilador emitirá avisos ou erros que o ajudarão a obter a assinatura correta.</span><span class="sxs-lookup"><span data-stu-id="2de39-205">If you forget the correct modifiers for any synthesized method, the compiler issues warnings or errors that help you get the right signature.</span></span>

## <a name="non-destructive-mutation"></a><span data-ttu-id="2de39-206">Mutação não destrutiva</span><span class="sxs-lookup"><span data-stu-id="2de39-206">Non-destructive mutation</span></span>

<span data-ttu-id="2de39-207">Os membros sintetizados em um registro posicional não modificam o estado do registro.</span><span class="sxs-lookup"><span data-stu-id="2de39-207">The synthesized members in a positional record don't modify the state of the record.</span></span> <span data-ttu-id="2de39-208">O objetivo é que você possa criar registros imutáveis mais facilmente.</span><span class="sxs-lookup"><span data-stu-id="2de39-208">The goal is that you can more easily create immutable records.</span></span> <span data-ttu-id="2de39-209">Examine novamente as declarações anteriores para `HeatingDegreeDays` e `CoolingDegreeDays` .</span><span class="sxs-lookup"><span data-stu-id="2de39-209">Look again at the preceding declarations for `HeatingDegreeDays` and `CoolingDegreeDays`.</span></span> <span data-ttu-id="2de39-210">Os membros adicionados executam cálculos nos valores para o registro, mas não modificam o estado.</span><span class="sxs-lookup"><span data-stu-id="2de39-210">The members added perform computations on the values for the record, but don't mutate state.</span></span> <span data-ttu-id="2de39-211">Os registros posicionais facilitam a criação de tipos de referência imutáveis.</span><span class="sxs-lookup"><span data-stu-id="2de39-211">Positional records make it easier for you to create immutable reference types.</span></span>

<span data-ttu-id="2de39-212">A criação de tipos de referência imutáveis significa que você desejará usar mutação não destrutiva.</span><span class="sxs-lookup"><span data-stu-id="2de39-212">Creating immutable reference types means you'll want to use non-destructive mutation.</span></span> <span data-ttu-id="2de39-213">Você cria novas instâncias de registro que são semelhantes às instâncias de registro existentes usando [ `with` expressões](../../language-reference/operators/with-expression.md).</span><span class="sxs-lookup"><span data-stu-id="2de39-213">You  create new record instances that are similar to existing record instances using [`with` expressions](../../language-reference/operators/with-expression.md).</span></span> <span data-ttu-id="2de39-214">Essas expressões são uma construção de cópia com atribuições adicionais que modificam a cópia.</span><span class="sxs-lookup"><span data-stu-id="2de39-214">These expressions are a copy construction with additional assignments that modify the copy.</span></span> <span data-ttu-id="2de39-215">O resultado é uma nova instância de registro em que cada propriedade foi copiada do registro existente e, opcionalmente, modificada.</span><span class="sxs-lookup"><span data-stu-id="2de39-215">The result is a new record instance where each property has been copied from the existing record and optionally modified.</span></span> <span data-ttu-id="2de39-216">O registro original não foi alterado.</span><span class="sxs-lookup"><span data-stu-id="2de39-216">The original record is unchanged.</span></span>

<span data-ttu-id="2de39-217">Vamos adicionar alguns recursos ao seu programa que demonstram `with` expressões.</span><span class="sxs-lookup"><span data-stu-id="2de39-217">Let's add a couple features to your program that demonstrate `with` expressions.</span></span> <span data-ttu-id="2de39-218">Primeiro, vamos criar um novo registro para calcular os dias de grau crescente usando os mesmos dados.</span><span class="sxs-lookup"><span data-stu-id="2de39-218">First, let's create a new record to compute growing degree days using the same data.</span></span> <span data-ttu-id="2de39-219">Os *dias de grau crescente* normalmente usam 41F como a linha de base e mede temperaturas acima da linha de base.</span><span class="sxs-lookup"><span data-stu-id="2de39-219">*Growing degree days* typically uses 41F as the baseline and measures temperatures above the baseline.</span></span> <span data-ttu-id="2de39-220">Para usar os mesmos dados, você pode criar um novo registro que seja semelhante ao `coolingDegreeDays` , mas com uma temperatura de base diferente:</span><span class="sxs-lookup"><span data-stu-id="2de39-220">To use the same data, you can create a new record that is similar to the `coolingDegreeDays`, but with a different base temperature:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="GrowingDegreeDays":::

<span data-ttu-id="2de39-221">Você pode comparar o número de graus computados com os números gerados com uma temperatura de linha de base maior.</span><span class="sxs-lookup"><span data-stu-id="2de39-221">You can compare the number of degrees computed to the numbers generated with a higher baseline temperature.</span></span> <span data-ttu-id="2de39-222">Lembre-se de que os registros são *tipos de referência* e essas cópias são cópias superficiais.</span><span class="sxs-lookup"><span data-stu-id="2de39-222">Remember that records are *reference types* and these copies are shallow copies.</span></span> <span data-ttu-id="2de39-223">A matriz para os dados não é copiada, mas ambos os registros fazem referência aos mesmos dados.</span><span class="sxs-lookup"><span data-stu-id="2de39-223">The array for the data isn't copied, but both records refer to the same data.</span></span> <span data-ttu-id="2de39-224">Esse fato é uma vantagem em um outro cenário.</span><span class="sxs-lookup"><span data-stu-id="2de39-224">That fact is an advantage in one other scenario.</span></span> <span data-ttu-id="2de39-225">Para os dias de crescimento crescentes, é útil manter o controle do total dos 5 dias anteriores.</span><span class="sxs-lookup"><span data-stu-id="2de39-225">For growing degree days, it's useful to keep track of the total for the previous 5 days.</span></span> <span data-ttu-id="2de39-226">Você pode criar novos registros com dados de origem diferentes usando `with` expressões.</span><span class="sxs-lookup"><span data-stu-id="2de39-226">You can create new records with different source data using `with` expressions.</span></span> <span data-ttu-id="2de39-227">O código a seguir cria uma coleção dessas acumulações e, em seguida, exibe os valores:</span><span class="sxs-lookup"><span data-stu-id="2de39-227">The following code builds a collection of these accumulations, then displays the values:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="RunningFiveDayTotal":::

<span data-ttu-id="2de39-228">Você também pode usar `with` expressões para criar cópias de registros.</span><span class="sxs-lookup"><span data-stu-id="2de39-228">You can also use `with` expressions to create copies of records.</span></span> <span data-ttu-id="2de39-229">Não especifique nenhuma propriedade entre as chaves da `with` expressão.</span><span class="sxs-lookup"><span data-stu-id="2de39-229">Don't specify any properties between the braces for the `with` expression.</span></span> <span data-ttu-id="2de39-230">Isso significa criar uma cópia e não alterar nenhuma propriedade:</span><span class="sxs-lookup"><span data-stu-id="2de39-230">That means create a copy, and don't change any properties:</span></span>

```csharp
var growingDegreeDaysCopy = growingDegreeDays with { };
```

<span data-ttu-id="2de39-231">Execute o aplicativo concluído para ver os resultados.</span><span class="sxs-lookup"><span data-stu-id="2de39-231">Run the finished application to see the results.</span></span>

## <a name="summary"></a><span data-ttu-id="2de39-232">Resumo</span><span class="sxs-lookup"><span data-stu-id="2de39-232">Summary</span></span>

<span data-ttu-id="2de39-233">Este tutorial mostrou vários aspectos de registros.</span><span class="sxs-lookup"><span data-stu-id="2de39-233">This tutorial showed several aspects of records.</span></span> <span data-ttu-id="2de39-234">Os registros fornecem sintaxe concisa para tipos de referência em que o uso fundamental está armazenando dados.</span><span class="sxs-lookup"><span data-stu-id="2de39-234">Records provide concise syntax for reference types where the fundamental use is storing data.</span></span> <span data-ttu-id="2de39-235">Para classes orientadas a objeto, o uso fundamental é definir responsabilidades.</span><span class="sxs-lookup"><span data-stu-id="2de39-235">For object-oriented classes, the fundamental use is defining responsibilities.</span></span> <span data-ttu-id="2de39-236">Este tutorial se concentrou em *registros posicionais*, onde você pode usar uma sintaxe concisa para declarar as propriedades somente de inicialização para um registro.</span><span class="sxs-lookup"><span data-stu-id="2de39-236">This tutorial focused on *positional records*, where you can use a concise syntax to declare the init-only properties for a record.</span></span> <span data-ttu-id="2de39-237">O compilador sintetiza vários membros do registro para copiar e comparar registros.</span><span class="sxs-lookup"><span data-stu-id="2de39-237">The compiler synthesizes several members of the record for copying and comparing records.</span></span> <span data-ttu-id="2de39-238">Você pode adicionar outros membros necessários para os tipos de registro.</span><span class="sxs-lookup"><span data-stu-id="2de39-238">You can add any other members you need for your record types.</span></span> <span data-ttu-id="2de39-239">Você pode criar tipos de registro imutáveis sabendo que nenhum dos membros gerados pelo compilador mutaria o estado.</span><span class="sxs-lookup"><span data-stu-id="2de39-239">You can create immutable record types knowing that none of the compiler-generated members would mutate state.</span></span> <span data-ttu-id="2de39-240">Para registros posicionais, as expressões facilitam o `with` suporte à mutação não destrutiva.</span><span class="sxs-lookup"><span data-stu-id="2de39-240">For positional records, `with` expressions make it easy to support non-destructive mutation.</span></span>

<span data-ttu-id="2de39-241">Os registros adicionam outra maneira de definir tipos.</span><span class="sxs-lookup"><span data-stu-id="2de39-241">Records add another way to define types.</span></span> <span data-ttu-id="2de39-242">Você usa `class` definições para criar hierarquias orientadas a objeto que se concentram nas responsabilidades e no comportamento dos objetos.</span><span class="sxs-lookup"><span data-stu-id="2de39-242">You use `class` definitions to create object-oriented hierarchies that focus on the responsibilities and behavior of objects.</span></span> <span data-ttu-id="2de39-243">Você cria `struct` tipos para estruturas de dados que armazenam dados e são pequenos o suficiente para copiar com eficiência.</span><span class="sxs-lookup"><span data-stu-id="2de39-243">You create `struct` types for data structures that store data and are small enough to copy efficiently.</span></span> <span data-ttu-id="2de39-244">Você cria registros quando deseja igualdade e comparação com base em valor, não deseja copiar valores e deseja usar variáveis de referência.</span><span class="sxs-lookup"><span data-stu-id="2de39-244">You create records when you want value-based equality and comparison, don't want to copy values, and want to use reference variables.</span></span>

<span data-ttu-id="2de39-245">Você pode aprender a descrição completa dos registros lendo a [especificação do tipo de registro proposto](~/_csharplang/proposals/csharp-9.0/records.md).</span><span class="sxs-lookup"><span data-stu-id="2de39-245">You can learn the complete description of records by reading the [proposed record type specification](~/_csharplang/proposals/csharp-9.0/records.md).</span></span>
