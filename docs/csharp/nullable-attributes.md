---
title: Atualizar APIs com atributos para definir expectativas nulas
description: Este artigo explica as motivações e técnicas para adicionar atributos descritivos para descrever o estado nulo de argumentos e retornar valores de APIs
ms.date: 07/31/2019
ms.openlocfilehash: eebd3d190b8c93833de6e1c1f1594c1c1f56e14e
ms.sourcegitcommit: 9ee6cd851b6e176a5811ea28ed0d5935c71950f9
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/09/2019
ms.locfileid: "70234666"
---
# <a name="update-libraries-to-use-nullable-reference-types-and-communicate-nullable-rules-to-callers"></a><span data-ttu-id="a3d7f-103">Atualize as bibliotecas para usar tipos de referência anuláveis e comunicar regras anuláveis a chamadores.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-103">Update libraries to use nullable reference types and communicate nullable rules to callers.</span></span>

<span data-ttu-id="a3d7f-104">A adição de [tipos de referência anuláveis](nullable-references.md) significa que você pode declarar se `null` um valor é permitido ou não ou esperado para cada variável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-104">The addition of [nullable reference types](nullable-references.md) means you can declare whether or not a `null` value is allowed or expected for every variable.</span></span> <span data-ttu-id="a3d7f-105">Isso fornece uma ótima experiência à medida que você escreve o código.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-105">That provides a great experience as you write code.</span></span> <span data-ttu-id="a3d7f-106">Você receberá avisos se uma variável não anulável puder ser definida como `null`.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-106">You get warnings if a non-nullable variable might be set to `null`.</span></span> <span data-ttu-id="a3d7f-107">Você receberá avisos se uma variável anulável não for marcada como nula antes de você desreferenciá-la.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-107">You get warnings if a nullable variable isn't null-checked before you dereference it.</span></span> <span data-ttu-id="a3d7f-108">Atualizar suas bibliotecas pode levar tempo, mas os benefícios valem a pena.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-108">Updating your libraries can take time, but the payoffs are worth it.</span></span> <span data-ttu-id="a3d7f-109">Quanto mais informações você fornecer ao compilador sobre *quando* um `null` valor é permitido ou proibido, os melhores avisos que os usuários da sua API receberão.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-109">The more information you provide to the compiler about *when* a `null` value is allowed or prohibited, the better warnings users of your API will get.</span></span> <span data-ttu-id="a3d7f-110">Vamos começar com um exemplo familiar.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-110">Let's start with a familiar example.</span></span> <span data-ttu-id="a3d7f-111">Imagine que sua biblioteca tenha a seguinte API para recuperar uma cadeia de caracteres de recurso:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-111">Imagine your library has the following API to retrieve a resource string:</span></span>

```csharp
bool TryGetMessage(string key, out string message)
```

<span data-ttu-id="a3d7f-112">O exemplo anterior segue o padrão `Try*` familiar no .net.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-112">The preceding example follows the familiar `Try*` pattern in .NET.</span></span> <span data-ttu-id="a3d7f-113">Há dois argumentos de referência para essa API: o `key` e o `message` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-113">There are two reference arguments for this API: the `key` and the `message` parameter.</span></span> <span data-ttu-id="a3d7f-114">Essa API tem as seguintes regras relacionadas à nulidade desses argumentos:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-114">This API has the following rules relating to the nullness of these arguments:</span></span>

- <span data-ttu-id="a3d7f-115">Os chamadores não `null` devem passar como o `key`argumento para.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-115">Callers shouldn't pass `null` as the argument for `key`.</span></span>
- <span data-ttu-id="a3d7f-116">Os chamadores podem passar uma variável cujo valor `null` é como o argumento `message`para.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-116">Callers can pass a variable whose value is `null` as the argument for `message`.</span></span>
- <span data-ttu-id="a3d7f-117">Se o `TryGetMessage` método retornar `true`, o valor de `message` não será nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-117">If the `TryGetMessage` method returns `true`, the value of `message` isn't null.</span></span> <span data-ttu-id="a3d7f-118">Se o valor de retorno `false,` for o valor `message` de (e seu estado nulo) for NULL.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-118">If the return value is `false,` the value of `message` (and its null state) is null.</span></span>

<span data-ttu-id="a3d7f-119">A regra para `key` pode ser totalmente expressa pelo tipo de variável: `key` deve ser um tipo de referência não anulável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-119">The rule for `key` can be completely expressed by the variable type: `key` should be a non-nullable reference type.</span></span> <span data-ttu-id="a3d7f-120">O `message` parâmetro é mais complexo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-120">The `message` parameter is more complex.</span></span> <span data-ttu-id="a3d7f-121">Ele permite `null` como o argumento, mas garante que, em caso de sucesso `out` , esse argumento não seja nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-121">It allows `null` as the argument, but guarantees that, on success, that `out` argument isn't null.</span></span> <span data-ttu-id="a3d7f-122">Para esses cenários, você precisa de um vocabulário mais rico para descrever as expectativas.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-122">For these scenarios, you need a richer vocabulary to describe the expectations.</span></span>

<span data-ttu-id="a3d7f-123">Atualizar sua biblioteca para referências anuláveis requer mais do que `?` a inundação em algumas das variáveis e nomes de tipo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-123">Updating your library for nullable references requires more than sprinkling `?` on some of the variables and type names.</span></span> <span data-ttu-id="a3d7f-124">O exemplo anterior mostra que você precisa examinar suas APIs e considerar suas expectativas para cada argumento de entrada.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-124">The preceding example shows that you need to examine your APIs and consider your expectations for each input argument.</span></span> <span data-ttu-id="a3d7f-125">Considere as garantias para o valor de retorno e quaisquer `out` argumentos `ref` ou no retorno do método.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-125">Consider the guarantees for the return value, and any `out` or `ref` arguments upon the method's return.</span></span> <span data-ttu-id="a3d7f-126">Em seguida, comunique essas regras ao compilador, e o compilador fornecerá avisos quando os chamadores não obedecem a essas regras.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-126">Then communicate those rules to the compiler, and the compiler will provide warnings when callers don't abide by those rules.</span></span>

<span data-ttu-id="a3d7f-127">Esse trabalho leva tempo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-127">This work takes time.</span></span> <span data-ttu-id="a3d7f-128">Vamos começar com as estratégias para tornar sua biblioteca ou reconhecimento anulável de aplicativo, ao mesmo tempo em que equilibra outros requisitos e resultados finais.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-128">Let's start with strategies to make your library or application nullable-aware, while balancing other requirements and deliverables.</span></span> <span data-ttu-id="a3d7f-129">Você verá como balancear o desenvolvimento contínuo habilitando tipos de referência anuláveis.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-129">You'll see how to balance ongoing development enabling nullable reference types.</span></span> <span data-ttu-id="a3d7f-130">Você aprenderá os desafios para definições de tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-130">You'll learn challenges for generic type definitions.</span></span> <span data-ttu-id="a3d7f-131">Você aprenderá a aplicar atributos para descrever as condições anteriores e posteriores em APIs individuais.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-131">You'll learn to apply attributes to describe pre- and post-conditions on individual APIs.</span></span>

## <a name="choose-a-nullable-strategy"></a><span data-ttu-id="a3d7f-132">Escolher uma estratégia anulável</span><span class="sxs-lookup"><span data-stu-id="a3d7f-132">Choose a nullable strategy</span></span>

<span data-ttu-id="a3d7f-133">A primeira opção é se os tipos de referência anuláveis devem estar ativados ou desativados por padrão.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-133">The first choice is whether nullable reference types should be on or off by default.</span></span> <span data-ttu-id="a3d7f-134">Você tem duas estratégias:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-134">You have two strategies:</span></span>

- <span data-ttu-id="a3d7f-135">Habilite tipos de referência anuláveis para o projeto inteiro e desabilite-o no código que não está pronto.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-135">Enable nullable reference types for the entire project, and disable it in code that's not ready.</span></span>
- <span data-ttu-id="a3d7f-136">Só habilite tipos de referência anuláveis para o código anotado para tipos de referência anuláveis.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-136">Only enable nullable reference types for code that's been annotated for nullable reference types.</span></span>

<span data-ttu-id="a3d7f-137">A primeira estratégia funciona melhor quando você está adicionando outros recursos à biblioteca ao atualizá-los para tipos de referência anuláveis.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-137">The first strategy works best when you're adding other features to the library as you update it for nullable reference types.</span></span> <span data-ttu-id="a3d7f-138">Todo o novo desenvolvimento tem reconhecimento anulável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-138">All new development is nullable aware.</span></span> <span data-ttu-id="a3d7f-139">À medida que você atualiza o código existente, você habilita os tipos de referência anuláveis nessas classes.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-139">As you update existing code, you enable nullable reference types in those classes.</span></span>

<span data-ttu-id="a3d7f-140">Seguindo essa primeira estratégia, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-140">Following this first strategy, you do the following:</span></span>

1. <span data-ttu-id="a3d7f-141">Habilite tipos anuláveis para todo o projeto adicionando `<Nullable>enable</Nullable>` o elemento aos seus arquivos *csproj* .</span><span class="sxs-lookup"><span data-stu-id="a3d7f-141">Enable nullable types for the entire project by adding the `<Nullable>enable</Nullable>` element to your *csproj* files.</span></span> 
1. <span data-ttu-id="a3d7f-142">Adicione o `#nullable disable` pragma a cada arquivo de origem em seu projeto.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-142">Add the `#nullable disable` pragma to every source file in your project.</span></span> 
1. <span data-ttu-id="a3d7f-143">Conforme você trabalha em cada arquivo, remova o pragma e resolva os avisos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-143">As you work on each file, remove the pragma and address any warnings.</span></span>

<span data-ttu-id="a3d7f-144">Essa primeira estratégia tem mais trabalho antecipado para adicionar o pragma a cada arquivo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-144">This first strategy has more up-front work to add the pragma to every file.</span></span> <span data-ttu-id="a3d7f-145">A vantagem é que todos os novos arquivos de código adicionados ao projeto serão habilitados para permitir valor nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-145">The advantage is that every new code file added to the project will be nullable enabled.</span></span> <span data-ttu-id="a3d7f-146">Qualquer trabalho novo terá reconhecimento de Nullable; somente o código existente deve ser atualizado.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-146">Any new work will be nullable aware; only existing code must be updated.</span></span>

<span data-ttu-id="a3d7f-147">A segunda estratégia funciona melhor se a biblioteca costuma ser estável e o foco principal do desenvolvimento é adotar tipos de referência anuláveis.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-147">The second strategy works better if the library is generally stable, and the main focus of the development is to adopt nullable reference types.</span></span> <span data-ttu-id="a3d7f-148">Você ativa os tipos de referência anuláveis ao anotar APIs.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-148">You turn on nullable reference types as you annotate APIs.</span></span> <span data-ttu-id="a3d7f-149">Quando tiver terminado, habilite os tipos de referência anuláveis para o projeto inteiro.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-149">When you've finished, you enable nullable reference types for the entire project.</span></span>

<span data-ttu-id="a3d7f-150">Seguindo essa segunda estratégia, você faz o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-150">Following this second strategy you do the following:</span></span>

1. <span data-ttu-id="a3d7f-151">Adicione o `#nullable enable` pragma ao arquivo que você deseja que o reconheça de forma anulável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-151">Add the `#nullable enable` pragma to the file you want to make nullable aware.</span></span>
1. <span data-ttu-id="a3d7f-152">Resolva os avisos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-152">Address any warnings.</span></span>
1. <span data-ttu-id="a3d7f-153">Continue essas duas primeiras etapas até que você tenha feito o reconhecimento de toda a biblioteca.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-153">Continue these first two steps until you've made the entire library nullable aware.</span></span>
1. <span data-ttu-id="a3d7f-154">Habilite tipos anuláveis para todo o projeto adicionando `<Nullable>enable</Nullable>` o elemento aos seus arquivos *csproj* .</span><span class="sxs-lookup"><span data-stu-id="a3d7f-154">Enable nullable types for the entire project by adding the `<Nullable>enable</Nullable>` element to your *csproj* files.</span></span> 
1. <span data-ttu-id="a3d7f-155">Remova os `#nullable enable` pragmas, pois eles não são mais necessários.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-155">Remove the `#nullable enable` pragmas, as they're no longer needed.</span></span>

<span data-ttu-id="a3d7f-156">Essa segunda estratégia tem menos trabalho de antecedência.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-156">This second strategy has less work up-front.</span></span> <span data-ttu-id="a3d7f-157">A desvantagem é que a primeira tarefa quando você cria um novo arquivo é adicionar o pragma e torná-lo indesejado de forma anulável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-157">The tradeoff is that the first task when you create a new file is to add the pragma and make it nullable aware.</span></span> <span data-ttu-id="a3d7f-158">Se algum desenvolvedor da sua equipe esquecer, esse novo código estará no registro posterior do trabalho para tornar todos os incompatíveis com o código anulável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-158">If any developers on your team forget, that new code is now in the backlog of work to make all code nullable aware.</span></span>

<span data-ttu-id="a3d7f-159">Qual dessas estratégias você escolhe depende de quanto o desenvolvimento ativo está ocorrendo em seu projeto.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-159">Which of these strategies you pick depends on how much active development is taking place in your project.</span></span> <span data-ttu-id="a3d7f-160">Quanto mais maduro e estável for seu projeto, melhor a segunda estratégia.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-160">The more mature and stable your project, the better the second strategy.</span></span> <span data-ttu-id="a3d7f-161">Quanto mais recursos estiverem sendo desenvolvidos, melhor será a primeira estratégia.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-161">The more features being developed, the better the first strategy.</span></span>

## <a name="should-nullable-warnings-introduce-breaking-changes"></a><span data-ttu-id="a3d7f-162">Os avisos que permitem valor nulo apresentam alterações significativas?</span><span class="sxs-lookup"><span data-stu-id="a3d7f-162">Should nullable warnings introduce breaking changes?</span></span>

<span data-ttu-id="a3d7f-163">Antes de habilitar tipos de referência anuláveis, as variáveis são consideradas *alheios anuláveis*.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-163">Before you enable nullable reference types, variables are considered *nullable oblivious*.</span></span> <span data-ttu-id="a3d7f-164">Depois de habilitar tipos de referência anuláveis, todas essas variáveis são *não anuláveis*.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-164">Once you enable nullable reference types, all those variables are *non-nullable*.</span></span> <span data-ttu-id="a3d7f-165">O compilador emitirá avisos se essas variáveis não forem inicializadas para valores não nulos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-165">The compiler will issue warnings if those variables aren't initialized to non-null values.</span></span>

<span data-ttu-id="a3d7f-166">Outra provável fonte de avisos é retornar valores quando o valor não tiver sido inicializado.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-166">Another likely source of warnings is return values when the value hasn't been initialized.</span></span>

<span data-ttu-id="a3d7f-167">A primeira etapa para abordar os avisos do compilador é usar `?` anotações em tipos de parâmetro e de retorno para indicar quando argumentos ou valores de retorno podem ser nulos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-167">The first step in addressing the compiler warnings is to use `?` annotations on parameter and return types to indicate when arguments or return values may be null.</span></span> <span data-ttu-id="a3d7f-168">Quando variáveis de referência não devem ser nulas, a declaração original está correta.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-168">When reference variables must not be null, the original declaration is correct.</span></span> <span data-ttu-id="a3d7f-169">Como você faz isso, seu objetivo não é apenas corrigir avisos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-169">As you do this, your goal isn't just to fix warnings.</span></span> <span data-ttu-id="a3d7f-170">A meta mais importante é fazer com que o compilador entenda sua intenção por possíveis valores nulos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-170">The more important goal is to make the compiler understand your intent for potential null values.</span></span> <span data-ttu-id="a3d7f-171">Ao examinar os avisos, você chegará à sua próxima decisão principal para sua biblioteca.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-171">As you examine the warnings, you reach your next major decision for your library.</span></span> <span data-ttu-id="a3d7f-172">Deseja considerar a modificação de assinaturas de API para comunicar mais claramente sua intenção de design?</span><span class="sxs-lookup"><span data-stu-id="a3d7f-172">Do you want to consider modifying API signatures to more clearly communicate your design intent?</span></span> <span data-ttu-id="a3d7f-173">Uma assinatura de API melhor para `TryGetMessage` o método examinado anteriormente poderia ser:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-173">A better API signature for the `TryGetMessage` method examined earlier could be:</span></span>

```csharp
string? TryGetMessage(string key);
```

<span data-ttu-id="a3d7f-174">O valor de retorno indica êxito ou falha e transporta o valor se o valor foi encontrado.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-174">The return value indicates success or failure, and carries the value if the value was found.</span></span> <span data-ttu-id="a3d7f-175">Em muitos casos, a alteração de assinaturas de API pode melhorar a forma como elas comunicam valores nulos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-175">In many cases, changing API signatures can improve how they communicate null values.</span></span>

<span data-ttu-id="a3d7f-176">No entanto, para bibliotecas públicas ou bibliotecas com grandes bases de usuários, você pode preferir não introduzir nenhuma alteração de assinatura de API.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-176">However, for public libraries, or libraries with large user bases, you may prefer not introducing any API signature changes.</span></span> <span data-ttu-id="a3d7f-177">Para esses casos e outros padrões comuns, você pode aplicar atributos para definir de forma mais clara quando um argumento ou valor de retorno `null`pode ser.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-177">For those cases, and other common patterns, you can apply attributes to more clearly define when an argument or return value may be `null`.</span></span> <span data-ttu-id="a3d7f-178">Se você considerar ou não a alteração da superfície de sua API, provavelmente descobrirá que as anotações de tipo sozinhas não são `null` suficientes para descrever valores para argumentos ou valores de retorno.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-178">Whether or not you consider changing the surface of your API, you'll likely find that type annotations alone aren't sufficient for describing `null` values for arguments or return values.</span></span> <span data-ttu-id="a3d7f-179">Nessas instâncias, você pode aplicar atributos para descrever mais claramente uma API.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-179">In those instances, you can apply attributes to more clearly describe an API.</span></span> 

## <a name="attributes-extend-type-annotations"></a><span data-ttu-id="a3d7f-180">Atributos estendem anotações de tipo</span><span class="sxs-lookup"><span data-stu-id="a3d7f-180">Attributes extend type annotations</span></span>

<span data-ttu-id="a3d7f-181">Vários atributos foram adicionados para expressar informações adicionais sobre o estado nulo de variáveis.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-181">Several attributes have been added to express additional information about the null state of variables.</span></span> <span data-ttu-id="a3d7f-182">Todo o código que você C# escreveu antes de 8 apresentou tipos de referência anuláveis era *nulo alheios*.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-182">All code you wrote before C# 8 introduced nullable reference types was *null oblivious*.</span></span> <span data-ttu-id="a3d7f-183">Isso significa que qualquer variável de tipo de referência pode ser nula, mas verificações nulas não são necessárias.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-183">That means any reference type variable may be null, but null checks aren't required.</span></span> <span data-ttu-id="a3d7f-184">Depois que o código estiver com *reconhecimento nulo*, essas regras serão alteradas.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-184">Once your code is *nullable aware*, those rules change.</span></span> <span data-ttu-id="a3d7f-185">Os tipos de referência nunca devem `null` ser o valor, e os tipos de referência anuláveis devem ser `null` verificados antes de serem desreferenciados.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-185">Reference types should never be the `null` value, and nullable reference types must be checked against `null` before being dereferenced.</span></span>

<span data-ttu-id="a3d7f-186">As regras para suas APIs são provavelmente mais complicadas, como vimos com o `TryGetValue` cenário de API.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-186">The rules for your APIs are likely more complicated, as you saw with the `TryGetValue` API scenario.</span></span> <span data-ttu-id="a3d7f-187">Muitas de suas APIs têm regras mais complexas para quando as variáveis podem ou não `null`ser.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-187">Many of your APIs have more complex rules for when variables can or can't be `null`.</span></span> <span data-ttu-id="a3d7f-188">Nesses casos, você usará um dos seguintes atributos para expressar essas regras:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-188">In these cases, you'll use one of the following attributes to express those rules:</span></span>

- <span data-ttu-id="a3d7f-189">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Um argumento de entrada não anulável pode ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-189">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="a3d7f-190">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Um argumento de entrada anulável nunca deve ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-190">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>
- <span data-ttu-id="a3d7f-191">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Um valor de retorno não anulável pode ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-191">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="a3d7f-192">Não [nulo](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Um valor de retorno anulável nunca será nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-192">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>
- <span data-ttu-id="a3d7f-193">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Um argumento não anulável `out` ou `ref` pode ser nulo quando o valor de retorno satisfizer uma condição.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-193">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="a3d7f-194">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Um argumento `out` Anulável `ref` ou não pode ser nulo quando o valor de retorno satisfizer uma condição.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-194">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="a3d7f-195">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Um valor de retorno não será nulo se o argumento de entrada para o parâmetro especificado não for nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-195">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>

<span data-ttu-id="a3d7f-196">As descrições anteriores são uma referência rápida para o que cada atributo faz.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-196">The preceding descriptions are a quick reference to what each attribute does.</span></span> <span data-ttu-id="a3d7f-197">Cada seção a seguir descreve o comportamento e significa mais detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-197">Each following section describes the behavior and meaning more thoroughly.</span></span>

<span data-ttu-id="a3d7f-198">A adição desses atributos fornece ao compilador mais informações sobre as regras para sua API.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-198">Adding these attributes gives the compiler more information about the rules for your API.</span></span> <span data-ttu-id="a3d7f-199">Quando o código de chamada é compilado em um contexto habilitado para valor nulo, o compilador avisa aos chamadores quando eles violam essas regras.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-199">When calling code is compiled in a nullable enabled context, the compiler will warn callers when they violate those rules.</span></span> <span data-ttu-id="a3d7f-200">Esses atributos não habilitam verificações adicionais em sua implementação.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-200">These attributes don't enable additional checks on your implementation.</span></span>

## <a name="specify-preconditions-allownull-and-disallownull"></a><span data-ttu-id="a3d7f-201">Especificar pré-condições: `AllowNull` e`DisallowNull`</span><span class="sxs-lookup"><span data-stu-id="a3d7f-201">Specify preconditions: `AllowNull` and `DisallowNull`</span></span>

<span data-ttu-id="a3d7f-202">Considere uma propriedade de leitura/gravação que nunca `null` retorna porque ela tem um valor padrão razoável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-202">Consider a read/write property that never returns `null` because it has a reasonable default value.</span></span> <span data-ttu-id="a3d7f-203">Os chamadores `null` passam para o acessador set ao configurá-lo para esse valor padrão.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-203">Callers pass `null` to the set accessor when setting it to that default value.</span></span> <span data-ttu-id="a3d7f-204">Por exemplo, considere um sistema de mensagens que solicita um nome de tela em uma sala de chat.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-204">For example, consider a messaging system that asks for a screen name in a chat room.</span></span> <span data-ttu-id="a3d7f-205">Se nenhum for fornecido, o sistema gerará um nome aleatório:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-205">If none is provided, the system generates a random name:</span></span>

```csharp
public string ScreenName
{
   get => screenName;
   set => screenName = value ?? GenerateRandomScreenName();
}
private string screenName;
```

<span data-ttu-id="a3d7f-206">Quando você compila o código anterior em um contexto alheios anulável, tudo está bem.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-206">When you compile the preceding code in a nullable oblivious context, everything is fine.</span></span> <span data-ttu-id="a3d7f-207">Depois que você habilitar tipos de referência anuláveis, a `ScreenName` Propriedade se tornará uma referência não anulável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-207">Once you enable nullable reference types, the `ScreenName` property becomes a non-nullable reference.</span></span> <span data-ttu-id="a3d7f-208">Isso está correto para o `get` acessador: ele `null`nunca retorna.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-208">That's correct for the `get` accessor: it never returns `null`.</span></span> <span data-ttu-id="a3d7f-209">Os chamadores não precisam verificar a propriedade `null`retornada.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-209">Callers don't need to check the returned property for `null`.</span></span> <span data-ttu-id="a3d7f-210">Mas, agora, definir a `null` propriedade para gerar um aviso.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-210">But now setting the property to `null` generates a warning.</span></span> <span data-ttu-id="a3d7f-211">Para continuar a dar suporte a esse tipo de código, adicione o <xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute?displayProperty=nameWithType> atributo à propriedade, conforme mostrado no código a seguir:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-211">In order to continue to support this type of code, you add the <xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute?displayProperty=nameWithType> attribute to the property, as shown in the following code:</span></span> 

```csharp
[AllowNull]
public string ScreenName
{
   get => screenName;
   set => screenName = value ?? GenerateRandomScreenName();
}
private string screenName = GenerateRandomScreenName();
```

<span data-ttu-id="a3d7f-212">Talvez seja necessário adicionar uma `using` diretiva para <xref:System.Diagnostics.CodeAnalysis> que o use este e outros atributos discutidos neste artigo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-212">You may need to add a `using` directive for <xref:System.Diagnostics.CodeAnalysis> to use this and other attributes discussed in this article.</span></span> <span data-ttu-id="a3d7f-213">O atributo é aplicado à propriedade, não ao `set` acessador.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-213">The attribute is applied to the property, not the `set` accessor.</span></span> <span data-ttu-id="a3d7f-214">O `AllowNull` atributo especificapré-condições e só se aplica a entradas.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-214">The `AllowNull` attribute specifies *pre-conditions*, and only applies to inputs.</span></span> <span data-ttu-id="a3d7f-215">O `get` acessador tem um valor de retorno, mas nenhum argumento de entrada.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-215">The `get` accessor has a return value, but no input arguments.</span></span> <span data-ttu-id="a3d7f-216">Portanto, o `AllowNull` atributo só se aplica `set` ao acessador.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-216">Therefore, the `AllowNull` attribute only applies to the `set` accessor.</span></span>

<span data-ttu-id="a3d7f-217">O exemplo anterior demonstra o que procurar ao adicionar o `AllowNull` atributo em um argumento:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-217">The preceding example demonstrates what to look for when adding the `AllowNull` attribute on an argument:</span></span>

1. <span data-ttu-id="a3d7f-218">O contrato geral para essa variável é que não deveria ser `null`, portanto, você deseja um tipo de referência não anulável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-218">The general contract for that variable is that it shouldn't be `null`, so you want a non-nullable reference type.</span></span>
1. <span data-ttu-id="a3d7f-219">Há cenários para a variável `null`de entrada, embora eles não sejam o uso mais comum.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-219">There are scenarios for the input variable to be `null`, though they aren't the most common usage.</span></span>

<span data-ttu-id="a3d7f-220">Geralmente, você precisará desse atributo para propriedades, ou `in`, `out`e `ref` argumentos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-220">Most often you'll need this attribute for properties, or `in`, `out`, and `ref` arguments.</span></span> <span data-ttu-id="a3d7f-221">O `AllowNull` atributo é a melhor opção quando uma variável normalmente é não nula, mas você precisa permitir `null` como uma pré-condição.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-221">The `AllowNull` attribute is the best choice when a variable is typically non-null, but you need to allow `null` as a precondition.</span></span>

<span data-ttu-id="a3d7f-222">Compare com cenários para usar `DisallowNull`: Você usa esse atributo para especificar que uma variável de entrada de um tipo anulável não `null`deve ser.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-222">Contrast that with scenarios for using `DisallowNull`: You use this attribute to specify that an input variable of a nullable type shouldn't be `null`.</span></span> <span data-ttu-id="a3d7f-223">Considere uma propriedade em `null` que é o valor padrão, mas os clientes só podem defini-lo como um valor não nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-223">Consider a property where `null` is the default value, but clients can only set it to a non-null value.</span></span> <span data-ttu-id="a3d7f-224">Considere o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-224">Consider the following code:</span></span>

```csharp
public string ReviewComment
{
    get => _comment;
    set => _comment = value ?? throw new ArgumentNullException(nameof(value), "Cannot set to null");
}
string _comment;
```

<span data-ttu-id="a3d7f-225">O código anterior é a melhor maneira de expressar o design que `ReviewComment` pode ser `null`, mas não pode ser definido como `null`.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-225">The preceding code is the best way to express your design that the `ReviewComment` could be `null`, but can't be set to `null`.</span></span> <span data-ttu-id="a3d7f-226">Depois que esse código é ciente de forma anulável, você pode expressar esse conceito mais claramente para os <xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute?displayProperty=nameWithType>chamadores usando o:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-226">Once this code is nullable aware, you can express this concept more clearly to callers using the <xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute?displayProperty=nameWithType>:</span></span>

```csharp
[DisallowNull] 
public string? ReviewComment
{
    get => _comment;
    set => _comment = value ?? throw new ArgumentNullException(nameof(value), "Cannot set to null");
}
string? _comment;
```

<span data-ttu-id="a3d7f-227">Em um contexto anulável, o `ReviewComment` `get` acessador pode retornar o valor `null`padrão de.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-227">In a nullable context, the `ReviewComment` `get` accessor could return the default value of `null`.</span></span> <span data-ttu-id="a3d7f-228">O compilador avisa que ele deve ser verificado antes do acesso.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-228">The compiler warns that it must be checked before access.</span></span> <span data-ttu-id="a3d7f-229">Além disso, ele avisa aos chamadores que, embora possa ser `null`, os chamadores não devem defini-los explicitamente como. `null`</span><span class="sxs-lookup"><span data-stu-id="a3d7f-229">Furthermore, it warns callers that, even though it could be `null`, callers shouldn't explicitly set it to `null`.</span></span> <span data-ttu-id="a3d7f-230">O `DisallowNull` atributo também especifica uma *pré-condição*, ele não afeta o `get` acessador.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-230">The `DisallowNull` attribute also specifies a *pre-condition*, it does not affect the `get` accessor.</span></span> <span data-ttu-id="a3d7f-231">Você deve optar por usar o `DisallowNull` atributo ao observar essas características sobre:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-231">You should choose to use the `DisallowNull` attribute when you observe these characteristics about:</span></span>

1. <span data-ttu-id="a3d7f-232">A variável pode estar `null` em cenários principais, geralmente quando a primeira instância é instanciada.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-232">The variable could be `null` in core scenarios, often when first instantiated.</span></span>
1. <span data-ttu-id="a3d7f-233">A variável não deve ser definida explicitamente `null`como.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-233">The variable shouldn't be explicitly set to `null`.</span></span>

<span data-ttu-id="a3d7f-234">Essas situações são comuns no código que era originalmente *nulo alheios*.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-234">These situations are common in code that was originally *null oblivious*.</span></span> <span data-ttu-id="a3d7f-235">Pode ser que as propriedades do objeto sejam definidas em duas operações de inicialização distintas.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-235">It may be that object properties are set in two distinct initialization operations.</span></span> <span data-ttu-id="a3d7f-236">Pode ser que algumas propriedades sejam definidas somente após a conclusão de algum trabalho assíncrono.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-236">It may be that some properties are set only after some asynchronous work has completed.</span></span>

<span data-ttu-id="a3d7f-237">Os `AllowNull` atributos `DisallowNull` e permitem que você especifique que as pré-condições nas variáveis podem não corresponder às anotações que permitem valor nulo nessas variáveis.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-237">The `AllowNull` and `DisallowNull` attributes enable you to specify that preconditions on variables may not match the nullable annotations on those variables.</span></span> <span data-ttu-id="a3d7f-238">Eles fornecem mais detalhes sobre as características de sua API.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-238">These provide more detail about the characteristics of your API.</span></span> <span data-ttu-id="a3d7f-239">Essas informações adicionais ajudam os chamadores a usar sua API corretamente.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-239">This additional information helps callers use your API correctly.</span></span> <span data-ttu-id="a3d7f-240">Lembre-se de especificar as pré-condições usando os seguintes atributos:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-240">Remember you specify preconditions using the following attributes:</span></span>

- <span data-ttu-id="a3d7f-241">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Um argumento de entrada não anulável pode ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-241">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="a3d7f-242">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Um argumento de entrada anulável nunca deve ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-242">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>

## <a name="specify-post-conditions-maybenull-and-notnull"></a><span data-ttu-id="a3d7f-243">Especificar pós-condições: `MaybeNull` e`NotNull`</span><span class="sxs-lookup"><span data-stu-id="a3d7f-243">Specify post-conditions: `MaybeNull` and `NotNull`</span></span>

<span data-ttu-id="a3d7f-244">Suponha que você tenha um método com a seguinte assinatura:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-244">Suppose you have a method with the following signature:</span></span>

```csharp
public Customer FindCustomer(string lastName, string firstName)
```

<span data-ttu-id="a3d7f-245">Você provavelmente escreveu um método como este para retornar `null` quando o nome procurado não foi encontrado.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-245">You've likely written a method like this to return `null` when the name sought wasn't found.</span></span> <span data-ttu-id="a3d7f-246">O `null` claramente indica que o registro não foi encontrado.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-246">The `null` clearly indicates that the record wasn't found.</span></span> <span data-ttu-id="a3d7f-247">Neste exemplo, você provavelmente alteraria o tipo de retorno de `Customer` para `Customer?`.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-247">In this example, you'd likely change the return type from `Customer` to `Customer?`.</span></span> <span data-ttu-id="a3d7f-248">Declarar o valor de retorno como um tipo de referência anulável especifica claramente a intenção dessa API.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-248">Declaring the return value as a nullable reference type specifies the intent of this API clearly.</span></span> 

<span data-ttu-id="a3d7f-249">Por motivos abordados em [definições genéricas e nulidade](#generic-definitions-and-nullability) que a técnica não funciona com métodos genéricos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-249">For reasons covered under [Generic definitions and nullability](#generic-definitions-and-nullability) that technique does not work with generic methods.</span></span> <span data-ttu-id="a3d7f-250">Você pode ter um método genérico que segue um padrão semelhante:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-250">You may have a generic method that follows a similar pattern:</span></span>

```csharp
public T Find<T>(IEnumerable<T> sequence, Func<T, bool> match)
```

<span data-ttu-id="a3d7f-251">Você não pode especificar que o valor de `T?`retorno é.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-251">You can't specify that the return value is `T?`.</span></span> <span data-ttu-id="a3d7f-252">O método retorna `null` quando o item procurado não é encontrado.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-252">The method returns `null` when the sought item isn't found.</span></span> <span data-ttu-id="a3d7f-253">Como não é possível declarar `T?` um tipo de retorno, você `MaybeNull` adiciona a anotação ao método Return:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-253">Since you can't declare a `T?` return type, you add the `MaybeNull` annotation to the method return:</span></span>

```csharp
[return: MaybeNull]
public T Find<T>(IEnumerable<T> sequence, Func<T, bool> match)
```

<span data-ttu-id="a3d7f-254">O código anterior informa aos chamadores que o contrato implica em um tipo não anulável, mas o valor de retorno *pode* ser, na verdade, nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-254">The preceding code informs callers that the contract implies a non-nullable type, but the return value *may* actually be null.</span></span>  <span data-ttu-id="a3d7f-255">Use o `MaybeNull` atributo quando sua API deve ser um tipo não anulável, normalmente um parâmetro de tipo genérico, mas pode haver instâncias em que `null` seriam retornadas.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-255">Use the `MaybeNull` attribute when your API should be a non-nullable type, typically a generic type parameter, but there may be instances where `null` would be returned.</span></span>

<span data-ttu-id="a3d7f-256">Você também pode especificar que um valor de retorno ou `out` um `ref` argumento or não seja nulo, embora o tipo seja um tipo anulável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-256">You can also specify that a return value or an `out` or `ref` argument isn't null even though the type is a nullable type.</span></span> <span data-ttu-id="a3d7f-257">Considere um método que garanta que uma matriz seja grande o suficiente para conter vários elementos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-257">Consider a method that ensures an array is large enough to hold a number of elements.</span></span> <span data-ttu-id="a3d7f-258">Se o argumento de entrada não tiver capacidade, a rotina alocaria uma nova matriz e copiaria todos os elementos existentes nela.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-258">If the input argument doesn't have capacity, the routine would allocate a new array and copy all the existing elements into it.</span></span> <span data-ttu-id="a3d7f-259">Se o argumento de entrada `null`for, a rotina alocaria novo armazenamento.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-259">If the input argument is `null`, the routine would allocate new storage.</span></span> <span data-ttu-id="a3d7f-260">Se houver capacidade suficiente, a rotina não fará nada:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-260">If there's sufficient capacity, the routine does nothing:</span></span>

```csharp
public void EnsureCapacity<T>(ref T[] storage, int size)
```

<span data-ttu-id="a3d7f-261">Você pode chamar essa rotina da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-261">You could call this routine as follows:</span></span>

```csharp
// messages has the default value (null) when EnsureCapacity is called:
EnsureCapacity<string>(ref messages, 10);
// messages is not null.
EnsureCapacity<string>(messages, 50);
```

<span data-ttu-id="a3d7f-262">Depois de habilitar tipos de referência NULL, você deseja garantir que o código anterior seja compilado sem avisos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-262">After enabling null reference types, you want to ensure that the preceding code compiles without warnings.</span></span> <span data-ttu-id="a3d7f-263">Quando o método retorna, é `storage` garantido que o argumento não seja nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-263">When the method returns, the `storage` argument is guaranteed to be not null.</span></span> <span data-ttu-id="a3d7f-264">No entanto, é aceitável chamar `EnsureCapacity` com uma referência nula.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-264">However, it's acceptable to call `EnsureCapacity` with a null reference.</span></span> <span data-ttu-id="a3d7f-265">Você pode criar `storage` um tipo de referência anulável e adicionar a `NotNull` pós-condição à declaração de parâmetro:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-265">You can make `storage` a nullable reference type, and add the `NotNull` post-condition to the parameter declaration:</span></span>

```csharp
public void EnsureCapacity<T>([NotNull]ref T[]? storage, int size)
```

<span data-ttu-id="a3d7f-266">O código anterior expressa o contrato existente muito claramente: Os chamadores podem passar uma variável com `null` o valor, mas é garantido que o valor de retorno nunca seja nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-266">The preceding code expresses the existing contract very clearly: Callers can pass a variable with the `null` value, but the return value is guaranteed to never be null.</span></span> <span data-ttu-id="a3d7f-267">O `NotNull` atributo é mais útil para `ref` argumentos `out` e em `null` que pode ser passado como um argumento, mas esse argumento é garantido como não nulo quando o método retorna.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-267">The `NotNull` attribute is most useful for `ref` and `out` arguments where `null` may be passed as an argument, but that argument is guaranteed to be not null when the method returns.</span></span>

<span data-ttu-id="a3d7f-268">Você especifica condições de erro incondicionais usando os seguintes atributos:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-268">You specify unconditional postconditions using the following attributes:</span></span>

- <span data-ttu-id="a3d7f-269">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Um valor de retorno não anulável pode ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-269">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="a3d7f-270">Não [nulo](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Um valor de retorno anulável nunca será nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-270">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>

## <a name="specify-conditional-post-conditions-notnullwhen-and-maybenullwhen"></a><span data-ttu-id="a3d7f-271">Especificar pós-condições condicionais `NotNullWhen` : e`MaybeNullWhen`</span><span class="sxs-lookup"><span data-stu-id="a3d7f-271">Specify conditional post-conditions: `NotNullWhen` and `MaybeNullWhen`</span></span>

<span data-ttu-id="a3d7f-272">Você provavelmente está familiarizado com o `string` método <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-272">You're likely familiar with the `string` method <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType>.</span></span> <span data-ttu-id="a3d7f-273">Esse método retorna `true` quando o argumento não é nulo e não a cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-273">This method returns `true` when the argument isn't null, and not the empty string.</span></span> <span data-ttu-id="a3d7f-274">É uma forma de verificação nula: Os chamadores não precisam ser nulos – Verifique o argumento se o `false`método retornar.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-274">It is a form of null-check: Callers don't need to null-check the argument if the method returns `false`.</span></span> <span data-ttu-id="a3d7f-275">Para tornar um método como esse reconhecimento anulável, você definiria o argumento como um tipo anulável e adicionaria o `NotNullWhen` atributo:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-275">To make a method like this nullable aware, you'd set the argument to a nullable type, and add the `NotNullWhen` attribute:</span></span>

```csharp
bool IsNullOrEmpty([NotNullWhen(false)]string? value);
```

<span data-ttu-id="a3d7f-276">Isso informa ao compilador que qualquer código em que o valor `false` de retorno não precisa ser marcado como nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-276">That informs the compiler that any code where the return value is `false` need not be null-checked.</span></span> <span data-ttu-id="a3d7f-277">A adição do atributo informa a análise estática do compilador que `IsNullOrEmpty` executa a verificação nula necessária: quando retorna `false`, o argumento de entrada não `null`é.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-277">The addition of the attribute informs the compiler's static analysis that `IsNullOrEmpty` performs the necessary null check: when it returns `false`, the input argument is not `null`.</span></span>

```csharp
string? userInput = GetUserInput();
if (!(string.IsNullOrEmpty(userInput))
{
   int messageLength = userInput.Length; // no null check needed.
}
// null check needed on userInput here.
```

<span data-ttu-id="a3d7f-278">O <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType> método será anotado conforme mostrado acima para o .NET Core 3,0.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-278">The <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType> method will be annotated as shown above for .NET Core 3.0.</span></span> <span data-ttu-id="a3d7f-279">Você pode ter métodos semelhantes em sua base de código que verificam o estado dos objetos em busca de valores nulos.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-279">You may have similar methods in your codebase that check the state of objects for null values.</span></span> <span data-ttu-id="a3d7f-280">O compilador não reconhecerá os métodos de verificação NULL personalizados e você precisará adicionar as anotações por conta própria.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-280">The compiler won't recognize custom null check methods, and you'll need to add the annotations yourself.</span></span> <span data-ttu-id="a3d7f-281">Quando você adiciona o atributo, a análise estática do compilador sabe quando a variável testada foi marcada como nula.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-281">When you add the attribute, the compiler's static analysis knows when the tested variable has been null checked.</span></span>

<span data-ttu-id="a3d7f-282">Outro uso para esses atributos é o `Try*` padrão.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-282">Another use for these attributes is the `Try*` pattern.</span></span> <span data-ttu-id="a3d7f-283">As condições para `ref` e `out` as variáveis são comunicadas por meio do valor de retorno.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-283">The postconditions for `ref` and `out` variables are communicated through the return value.</span></span> <span data-ttu-id="a3d7f-284">Considere este método mostrado anteriormente:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-284">Consider this method shown earlier:</span></span>

```csharp
bool TryGetMessage(string key, out string message)
```

<span data-ttu-id="a3d7f-285">O método anterior segue um idioma .net típico: o valor de retorno indica `message` se foi definido como o valor encontrado ou, se nenhuma mensagem for encontrada, ao valor padrão.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-285">The preceding method follows a typical .NET idiom: the return value indicates if `message` was set to the found value or, if no message is found, to the default value.</span></span> <span data-ttu-id="a3d7f-286">Se o método retornar `true`, o valor de `message` não será nulo; caso contrário, o `message` método definirá como nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-286">If the method returns `true`, the value of `message` isn't null; otherwise, the method sets `message` to null.</span></span>

<span data-ttu-id="a3d7f-287">Você pode comunicar esse idioma usando o `NotNullWhen` atributo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-287">You can communicate that idiom using the `NotNullWhen` attribute.</span></span> <span data-ttu-id="a3d7f-288">Quando você atualiza a assinatura para tipos de referência anuláveis `message` , `string?` faça um e adicione um atributo:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-288">When you update the signature for nullable reference types, make `message` a `string?` and add an attribute:</span></span>

```csharp
bool TryGetMessage(string key, [NotNullWhen(true)] out string? message)
```

<span data-ttu-id="a3d7f-289">No exemplo anterior, o valor de `message` é conhecido como não nulo quando `TryGetMessage` retorna `true`.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-289">In the preceding example, the value of `message` is known to be not null when `TryGetMessage` returns `true`.</span></span> <span data-ttu-id="a3d7f-290">Você deve anotar métodos semelhantes em sua base de código da mesma maneira: os argumentos podem `null`ser, e são conhecidos como não nulos quando o método `true`retorna.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-290">You should annotate similar methods in your codebase in the same way: the arguments could be `null`, and are known to be not null when the method returns `true`.</span></span>

<span data-ttu-id="a3d7f-291">Há um atributo final que você também pode precisar.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-291">There's one final attribute you may also need.</span></span> <span data-ttu-id="a3d7f-292">Às vezes, o estado nulo de um valor de retorno depende do estado nulo de um ou mais argumentos de entrada.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-292">Sometimes the null state of a return value depends on the null state of one or more input arguments.</span></span> <span data-ttu-id="a3d7f-293">Esses métodos retornarão um valor não nulo sempre que determinados argumentos de entrada `null`não forem.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-293">These methods will return a non-null value whenever certain input arguments aren't `null`.</span></span> <span data-ttu-id="a3d7f-294">Para anotar corretamente esses métodos, use o `NotNullIfNotNull` atributo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-294">To correctly annotate these methods, you use the `NotNullIfNotNull` attribute.</span></span> <span data-ttu-id="a3d7f-295">Considere o seguinte método:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-295">Consider the following method:</span></span>

```csharp
string GetTopLevelDomainFromFullUrl(string url);
```

<span data-ttu-id="a3d7f-296">Se o `url` argumento não for nulo, a saída `null`não será.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-296">If the `url` argument isn't null, the output isn't `null`.</span></span> <span data-ttu-id="a3d7f-297">Depois que as referências anuláveis estiverem habilitadas, essa assinatura funcionará corretamente, desde que sua API nunca aceite uma entrada nula.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-297">Once nullable references are enabled, that signature works correctly, provided your API never accepts a null input.</span></span> <span data-ttu-id="a3d7f-298">No entanto, se a entrada puder ser nula, o valor de retorno também poderá ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-298">However, if the input could be null, then return value could also be null.</span></span> <span data-ttu-id="a3d7f-299">Portanto, você pode alterar a assinatura para o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-299">Therefore, you could change the signature to the following code:</span></span>

```csharp
string? GetTopLevelDomainFromFullUrl(string? url);
```

<span data-ttu-id="a3d7f-300">Isso também funciona, mas geralmente forçará os chamadores a implementarem verificações adicionais `null` .</span><span class="sxs-lookup"><span data-stu-id="a3d7f-300">That also works, but will often force callers to implement extra `null` checks.</span></span> <span data-ttu-id="a3d7f-301">O contrato é que o valor de retorno seria `null` apenas quando o argumento `url` de entrada `null`é.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-301">The contract is that the return value would be `null` only when the input argument `url` is `null`.</span></span> <span data-ttu-id="a3d7f-302">Para expressar esse contrato, você anotaria esse método, conforme mostrado no código a seguir:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-302">To express that contract, you would annotate this method as shown in the following code:</span></span>

```csharp
[return: NotNullIfNotNull("url")]
string? GetTopLevelDomainFromFullUrl(string? url);
```

<span data-ttu-id="a3d7f-303">O valor de retorno e o argumento foram anotados com o `?` que indica que pode ser. `null`</span><span class="sxs-lookup"><span data-stu-id="a3d7f-303">The return value and the argument have both been annotated with the `?` indicating that either could be `null`.</span></span> <span data-ttu-id="a3d7f-304">O atributo esclarece ainda mais que o valor de retorno não será nulo quando `url` o argumento `null`não for.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-304">The attribute further clarifies that the return value won't be null when the `url` argument isn't `null`.</span></span>

<span data-ttu-id="a3d7f-305">Você especifica condições recondicionais usando estes atributos:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-305">You specify conditional postconditions using these attributes:</span></span>

- <span data-ttu-id="a3d7f-306">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Um argumento não anulável `out` ou `ref` pode ser nulo quando o valor de retorno satisfizer uma condição.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-306">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="a3d7f-307">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Um argumento `out` Anulável `ref` ou não pode ser nulo quando o valor de retorno satisfizer uma condição.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-307">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="a3d7f-308">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Um valor de retorno não será nulo se o argumento de entrada para o parâmetro especificado não for nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-308">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>

## <a name="generic-definitions-and-nullability"></a><span data-ttu-id="a3d7f-309">Definições genéricas e nulidade</span><span class="sxs-lookup"><span data-stu-id="a3d7f-309">Generic definitions and nullability</span></span>

<span data-ttu-id="a3d7f-310">Comunicar corretamente o estado nulo de tipos genéricos e métodos genéricos requer um cuidado especial.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-310">Correctly communicating the null state of generic types and generic methods requires special care.</span></span> <span data-ttu-id="a3d7f-311">Isso deriva do fato de que um tipo de valor anulável e um tipo de referência anulável são fundamentalmente diferentes.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-311">This stems from the fact that a nullable value type and a nullable reference type are fundamentally different.</span></span> <span data-ttu-id="a3d7f-312">Um `int?` é sinônimo de `Nullable<int>`, enquanto `string?` é `string` um atributo adicionado pelo compilador.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-312">An `int?` is a synonym for `Nullable<int>`, whereas `string?` is `string` with an attribute added by the compiler.</span></span> <span data-ttu-id="a3d7f-313">O resultado é que o compilador não pode gerar o código `T?` correto para sem `T` saber se `class` é um `struct`ou um.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-313">The result is that the compiler can't generate correct code for `T?` without knowing if `T` is a `class` or a `struct`.</span></span> 

<span data-ttu-id="a3d7f-314">Isso não significa que você não pode usar um tipo anulável (tipo de valor ou tipo de referência) como o argumento de tipo para um tipo genérico fechado.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-314">This doesn't mean you can't use a nullable type (either value type or reference type) as the type argument for a closed generic type.</span></span> <span data-ttu-id="a3d7f-315">E são instanciações válidas do `List<T>`. `List<string?>` `List<int?>`</span><span class="sxs-lookup"><span data-stu-id="a3d7f-315">Both `List<string?>` and `List<int?>` are valid instantiations of `List<T>`.</span></span> 

<span data-ttu-id="a3d7f-316">O que significa é que você não pode usar `T?` em uma classe genérica ou declaração de método sem restrições.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-316">What it does mean is that you can't use `T?` in a generic class or method declaration without constraints.</span></span> <span data-ttu-id="a3d7f-317">Por exemplo, <xref:System.Linq.Enumerable.FirstOrDefault%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D)?displayProperty=nameWithType> não será alterado para retornar `T?`.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-317">For example, <xref:System.Linq.Enumerable.FirstOrDefault%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D)?displayProperty=nameWithType> won't be changed to return `T?`.</span></span> <span data-ttu-id="a3d7f-318">Você pode superar essa limitação adicionando a `struct` restrição ou. `class`</span><span class="sxs-lookup"><span data-stu-id="a3d7f-318">You can overcome this limitation by adding either the `struct` or `class` constraint.</span></span> <span data-ttu-id="a3d7f-319">Com qualquer uma dessas restrições, o compilador sabe como gerar código para o `T` e `T?`o.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-319">With either of those constraints, the compiler knows how to generate code for both `T` and `T?`.</span></span>

<span data-ttu-id="a3d7f-320">Talvez você queira restringir os tipos usados para que um argumento de tipo genérico seja de tipos não anuláveis.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-320">You may want to restrict the types used for a generic type argument to be non-nullable types.</span></span> <span data-ttu-id="a3d7f-321">Você pode fazer isso adicionando a restrição `notnull` a esse argumento de tipo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-321">You can do that by adding the `notnull` constraint on that type argument.</span></span> <span data-ttu-id="a3d7f-322">Quando essa restrição é aplicada, o argumento de tipo não deve ser um tipo anulável.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-322">When that constraint is applied, the type argument must not be a nullable type.</span></span>

## <a name="conclusions"></a><span data-ttu-id="a3d7f-323">Conclusões</span><span class="sxs-lookup"><span data-stu-id="a3d7f-323">Conclusions</span></span>

<span data-ttu-id="a3d7f-324">A adição de tipos de referência anuláveis fornece um vocabulário inicial para descrever suas expectativas de APIs `null`para variáveis que podem ser.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-324">Adding nullable reference types provides an initial vocabulary to describe your APIs expectations for variables that could be `null`.</span></span> <span data-ttu-id="a3d7f-325">Os atributos adicionais fornecem um vocabulário mais rico para descrever o estado nulo de variáveis como pré-condições e condições.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-325">The additional attributes provide a richer vocabulary to describe the null state of variables as preconditions and postconditions.</span></span> <span data-ttu-id="a3d7f-326">Esses atributos descrevem mais claramente suas expectativas e fornecem uma experiência melhor para os desenvolvedores que usam suas APIs.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-326">These attributes more clearly describe your expectations and provide a better experience for the developers using your APIs.</span></span>

<span data-ttu-id="a3d7f-327">Conforme você atualiza as bibliotecas para um contexto anulável, adicione esses atributos para orientar os usuários de suas APIs para o uso correto.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-327">As you update libraries for a nullable context, add these attributes to guide users of your APIs to the correct usage.</span></span> <span data-ttu-id="a3d7f-328">Esses atributos ajudam você a descrever totalmente o estado nulo dos argumentos de entrada e valores de retorno:</span><span class="sxs-lookup"><span data-stu-id="a3d7f-328">These attributes help you fully describe the null-state of input arguments and return values:</span></span>

- <span data-ttu-id="a3d7f-329">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Um argumento de entrada não anulável pode ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-329">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="a3d7f-330">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Um argumento de entrada anulável nunca deve ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-330">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>
- <span data-ttu-id="a3d7f-331">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Um valor de retorno não anulável pode ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-331">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="a3d7f-332">Não [nulo](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Um valor de retorno anulável nunca será nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-332">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>
- <span data-ttu-id="a3d7f-333">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Um argumento não anulável `out` ou `ref` pode ser nulo quando o valor de retorno satisfizer uma condição.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-333">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="a3d7f-334">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Um argumento `out` Anulável `ref` ou não pode ser nulo quando o valor de retorno satisfizer uma condição.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-334">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="a3d7f-335">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Um valor de retorno não será nulo se o argumento de entrada para o parâmetro especificado não for nulo.</span><span class="sxs-lookup"><span data-stu-id="a3d7f-335">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>
