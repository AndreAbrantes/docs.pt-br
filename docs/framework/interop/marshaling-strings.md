---
title: Realizando marshaling de cadeias de caracteres
description: Examine como realizar marshaling de cadeias de caracteres. Veja opções de marshaling de cadeias de caracteres por valor ou referência, como resultado, em uma estrutura ou classe por valor ou referência e muito mais.
ms.date: 03/30/2017
helpviewer_keywords:
- marshaling, samples
- platform invoke, marshaling data
- data marshaling, strings
- data marshaling, samples
- data marshaling, platform invoke
- marshaling. strings
- marshaling, platform invoke
- sample applications [.NET Framework], marshaling strings
ms.assetid: e21b078b-70fb-4905-be26-c097ab2433ff
ms.openlocfilehash: 0be5a5817bd92c5be6b701200a74650ef9de1955
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/01/2020
ms.locfileid: "85621477"
---
# <a name="marshaling-strings"></a><span data-ttu-id="940ae-104">Realizando marshaling de cadeias de caracteres</span><span class="sxs-lookup"><span data-stu-id="940ae-104">Marshaling Strings</span></span>
<span data-ttu-id="940ae-105">A invocação de plataforma copia parâmetros de cadeia de caracteres, convertendo-os do formato do .NET Framework (Unicode) para o formato não gerenciado (ANSI), se necessário.</span><span class="sxs-lookup"><span data-stu-id="940ae-105">Platform invoke copies string parameters, converting them from the .NET Framework format (Unicode) to the unmanaged format (ANSI), if needed.</span></span> <span data-ttu-id="940ae-106">Já que as cadeias de caracteres gerenciadas são imutáveis, a invocação de plataforma não as copia de volta da memória não gerenciada para a memória gerenciada quando a função retorna.</span><span class="sxs-lookup"><span data-stu-id="940ae-106">Because managed strings are immutable, platform invoke does not copy them back from unmanaged memory to managed memory when the function returns.</span></span>  
  
 <span data-ttu-id="940ae-107">A tabela a seguir lista as opções de marshaling para cadeias de caracteres, descreve o uso delas e fornece um link para a amostra de .NET Framework correspondente.</span><span class="sxs-lookup"><span data-stu-id="940ae-107">The following table lists marshaling options for strings, describes their usage, and provides a link to the corresponding .NET Framework sample.</span></span>  
  
|<span data-ttu-id="940ae-108">String</span><span class="sxs-lookup"><span data-stu-id="940ae-108">String</span></span>|<span data-ttu-id="940ae-109">Descrição</span><span class="sxs-lookup"><span data-stu-id="940ae-109">Description</span></span>|<span data-ttu-id="940ae-110">Amostra</span><span class="sxs-lookup"><span data-stu-id="940ae-110">Sample</span></span>|  
|------------|-----------------|------------|  
|<span data-ttu-id="940ae-111">Por valor.</span><span class="sxs-lookup"><span data-stu-id="940ae-111">By value.</span></span>|<span data-ttu-id="940ae-112">Passa cadeias de caracteres como parâmetros In.</span><span class="sxs-lookup"><span data-stu-id="940ae-112">Passes strings as In parameters.</span></span>|[<span data-ttu-id="940ae-113">MsgBox</span><span class="sxs-lookup"><span data-stu-id="940ae-113">MsgBox</span></span>](msgbox-sample.md)|  
|<span data-ttu-id="940ae-114">Como resultado.</span><span class="sxs-lookup"><span data-stu-id="940ae-114">As result.</span></span>|<span data-ttu-id="940ae-115">Retorna cadeias de caracteres de código não gerenciado.</span><span class="sxs-lookup"><span data-stu-id="940ae-115">Returns strings from unmanaged code.</span></span>|<span data-ttu-id="940ae-116">[Cadeias de caracteres](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/e765dyyy(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="940ae-116">[Strings](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/e765dyyy(v=vs.100))</span></span>|  
|<span data-ttu-id="940ae-117">Por referência.</span><span class="sxs-lookup"><span data-stu-id="940ae-117">By reference.</span></span>|<span data-ttu-id="940ae-118">Passa cadeias de caracteres como parâmetros In/Out usando <xref:System.Text.StringBuilder>.</span><span class="sxs-lookup"><span data-stu-id="940ae-118">Passes strings as In/Out parameters using <xref:System.Text.StringBuilder>.</span></span>|<span data-ttu-id="940ae-119">[Buffers](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/x3txb6xc(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="940ae-119">[Buffers](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/x3txb6xc(v=vs.100))</span></span>|  
|<span data-ttu-id="940ae-120">Em uma estrutura por valor.</span><span class="sxs-lookup"><span data-stu-id="940ae-120">In a structure by value.</span></span>|<span data-ttu-id="940ae-121">Passa cadeias de caracteres em uma estrutura que é um parâmetro In.</span><span class="sxs-lookup"><span data-stu-id="940ae-121">Passes strings in a structure that is an In parameter.</span></span>|<span data-ttu-id="940ae-122">[Estruturas](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/eadtsekz(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="940ae-122">[Structs](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/eadtsekz(v=vs.100))</span></span>|  
|<span data-ttu-id="940ae-123">Em uma estrutura por referência **(Char \* )**.</span><span class="sxs-lookup"><span data-stu-id="940ae-123">In a structure by reference **(char\*)**.</span></span>|<span data-ttu-id="940ae-124">Passa cadeias de caracteres em uma estrutura que é um parâmetro In/Out.</span><span class="sxs-lookup"><span data-stu-id="940ae-124">Passes strings in a structure that is an In/Out parameter.</span></span> <span data-ttu-id="940ae-125">A função não gerenciada espera um ponteiro para um buffer de caracteres e o tamanho do buffer é um membro da estrutura.</span><span class="sxs-lookup"><span data-stu-id="940ae-125">The unmanaged function expects a pointer to a character buffer and the buffer size is a member of the structure.</span></span>|<span data-ttu-id="940ae-126">[Cadeias de caracteres](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/e765dyyy(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="940ae-126">[Strings](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/e765dyyy(v=vs.100))</span></span>|  
|<span data-ttu-id="940ae-127">Em uma estrutura por referência **(char[])**.</span><span class="sxs-lookup"><span data-stu-id="940ae-127">In a structure by reference **(char[])**.</span></span>|<span data-ttu-id="940ae-128">Passa cadeias de caracteres em uma estrutura que é um parâmetro In/Out.</span><span class="sxs-lookup"><span data-stu-id="940ae-128">Passes strings in a structure that is an In/Out parameter.</span></span> <span data-ttu-id="940ae-129">A função não gerenciada espera um buffer de caracteres inserido.</span><span class="sxs-lookup"><span data-stu-id="940ae-129">The unmanaged function expects an embedded character buffer.</span></span>|<span data-ttu-id="940ae-130">[OSInfo](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/795sy883(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="940ae-130">[OSInfo](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/795sy883(v=vs.100))</span></span>|  
|<span data-ttu-id="940ae-131">Em uma classe por valor **(char\*)**.</span><span class="sxs-lookup"><span data-stu-id="940ae-131">In a class by value **(char\*)**.</span></span>|<span data-ttu-id="940ae-132">Passa cadeias de caracteres em uma classe (uma classe é um parâmetro In/Out).</span><span class="sxs-lookup"><span data-stu-id="940ae-132">Passes strings in a class (a class is an In/Out parameter).</span></span> <span data-ttu-id="940ae-133">A função não gerenciada espera um ponteiro para um buffer de caracteres.</span><span class="sxs-lookup"><span data-stu-id="940ae-133">The unmanaged function expects a pointer to a character buffer.</span></span>|<span data-ttu-id="940ae-134">[OpenFileDlg](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w5tyztk9(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="940ae-134">[OpenFileDlg](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w5tyztk9(v=vs.100))</span></span>|  
|<span data-ttu-id="940ae-135">Em uma classe por valor **(Char [])**.</span><span class="sxs-lookup"><span data-stu-id="940ae-135">In a class by value **(char[])**.</span></span>|<span data-ttu-id="940ae-136">Passa cadeias de caracteres em uma classe (uma classe é um parâmetro In/Out).</span><span class="sxs-lookup"><span data-stu-id="940ae-136">Passes strings in a class (a class is an In/Out parameter).</span></span> <span data-ttu-id="940ae-137">A função não gerenciada espera um buffer de caracteres inserido.</span><span class="sxs-lookup"><span data-stu-id="940ae-137">The unmanaged function expects an embedded character buffer.</span></span>|<span data-ttu-id="940ae-138">[OSInfo](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/795sy883(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="940ae-138">[OSInfo](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/795sy883(v=vs.100))</span></span>|  
|<span data-ttu-id="940ae-139">Como uma matriz de cadeias de caracteres por valor.</span><span class="sxs-lookup"><span data-stu-id="940ae-139">As an array of strings by value.</span></span>|<span data-ttu-id="940ae-140">Cria uma matriz de cadeias de caracteres que é passada por valor.</span><span class="sxs-lookup"><span data-stu-id="940ae-140">Creates an array of strings that is passed by value.</span></span>|[<span data-ttu-id="940ae-141">Matrizes</span><span class="sxs-lookup"><span data-stu-id="940ae-141">Arrays</span></span>](marshaling-different-types-of-arrays.md)|  
|<span data-ttu-id="940ae-142">Como uma matriz de estruturas que contêm cadeias de caracteres por valor.</span><span class="sxs-lookup"><span data-stu-id="940ae-142">As an array of structures that contain strings by value.</span></span>|<span data-ttu-id="940ae-143">Cria uma matriz de estruturas que contêm cadeias de caracteres e a matriz é transmitida por valor.</span><span class="sxs-lookup"><span data-stu-id="940ae-143">Creates an array of structures that contain strings and the array is passed by value.</span></span>|[<span data-ttu-id="940ae-144">Matrizes</span><span class="sxs-lookup"><span data-stu-id="940ae-144">Arrays</span></span>](marshaling-different-types-of-arrays.md)|  
  
## <a name="see-also"></a><span data-ttu-id="940ae-145">Consulte também</span><span class="sxs-lookup"><span data-stu-id="940ae-145">See also</span></span>

- [<span data-ttu-id="940ae-146">Marshaling padrão para cadeias de caracteres</span><span class="sxs-lookup"><span data-stu-id="940ae-146">Default Marshaling for Strings</span></span>](default-marshaling-for-strings.md)
- [<span data-ttu-id="940ae-147">Marshaling de dados com invocação de plataforma</span><span class="sxs-lookup"><span data-stu-id="940ae-147">Marshaling Data with Platform Invoke</span></span>](marshaling-data-with-platform-invoke.md)
- [<span data-ttu-id="940ae-148">Marshaling de classes, estruturas e uniões</span><span class="sxs-lookup"><span data-stu-id="940ae-148">Marshaling Classes, Structures, and Unions</span></span>](marshaling-classes-structures-and-unions.md)
- [<span data-ttu-id="940ae-149">Marshaling de diversos tipos de matrizes</span><span class="sxs-lookup"><span data-stu-id="940ae-149">Marshaling Different Types of Arrays</span></span>](marshaling-different-types-of-arrays.md)
- <span data-ttu-id="940ae-150">[Exemplos diversos de marshaling](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ss9sb93t(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="940ae-150">[Miscellaneous Marshaling Samples](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ss9sb93t(v=vs.100))</span></span>
