---
title: Problemas de migração do .NET Framework 4
ms.date: 05/02/2017
helpviewer_keywords:
- .NET Framework 4, migration
- application compatibility
ms.assetid: df478548-8c05-4de2-8ba7-adcdbe1c2a60
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 23612e6729314d988eed9401539547b133d4a9fa
ms.sourcegitcommit: c93fd5139f9efcf6db514e3474301738a6d1d649
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/28/2018
ms.locfileid: "50201631"
---
# <a name="net-framework-4-migration-issues"></a><span data-ttu-id="6d01c-102">Problemas de migração do .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="6d01c-102">.NET Framework 4 migration issues</span></span>

<span data-ttu-id="6d01c-103">Este tópico descreve problemas de migração entre o .NET Framework versão 3.5 Service Pack 1 e o .NET Framework versão 4, incluindo correções, alterações para conformidade com os padrões e segurança e alterações baseadas nos comentários do cliente.</span><span class="sxs-lookup"><span data-stu-id="6d01c-103">This topic describes migration issues between the .NET Framework version 3.5 Service Pack 1 and the .NET Framework version 4, including fixes, changes for standards compliance and security, and changes based on customer feedback.</span></span> <span data-ttu-id="6d01c-104">A maioria dessas alterações não requer a modificação da programação dos seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="6d01c-104">Most of these changes do not require any programming modifications in your applications.</span></span> <span data-ttu-id="6d01c-105">Para as que talvez envolvam modificações, consulte a coluna Alterações recomendadas da tabela.</span><span class="sxs-lookup"><span data-stu-id="6d01c-105">For those that may involve modifications, see the Recommended changes column of the table.</span></span>

<span data-ttu-id="6d01c-106">Esse tópico descreve alterações notáveis nas seguintes áreas:</span><span class="sxs-lookup"><span data-stu-id="6d01c-106">This topic describes notable changes in the following areas:</span></span>

* [<span data-ttu-id="6d01c-107">ASP.NET e Web</span><span class="sxs-lookup"><span data-stu-id="6d01c-107">ASP.NET and Web</span></span>](#aspnet-and-web)

* [<span data-ttu-id="6d01c-108">Core</span><span class="sxs-lookup"><span data-stu-id="6d01c-108">Core</span></span>](#core)

* [<span data-ttu-id="6d01c-109">Dados</span><span class="sxs-lookup"><span data-stu-id="6d01c-109">Data</span></span>](#data)

* [<span data-ttu-id="6d01c-110">WCF (Windows Communication Foundation)</span><span class="sxs-lookup"><span data-stu-id="6d01c-110">Windows Communication Foundation (WCF)</span></span>](#windows-communication-foundation-wcf)

* [<span data-ttu-id="6d01c-111">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="6d01c-111">Windows Presentation Foundation (WPF)</span></span>](#windows-presentation-foundation-wpf)

* [<span data-ttu-id="6d01c-112">XML</span><span class="sxs-lookup"><span data-stu-id="6d01c-112">XML</span></span>](#xml)

<span data-ttu-id="6d01c-113">Para obter uma visão geral de nível superior dos problemas neste tópico, consulte o [Migration Guide to the .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff657133%28v=vs.100%29) (Guia de Migração para o .NET Framework 4).</span><span class="sxs-lookup"><span data-stu-id="6d01c-113">For an higher-level overview of the issues in this topic, see the [Migration Guide to the .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff657133%28v=vs.100%29).</span></span>

<span data-ttu-id="6d01c-114">Para obter informações sobre novos recursos, consulte [What's New in the .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms171868%28v=vs.100%29) (Novidades no .NET Framework 4).</span><span class="sxs-lookup"><span data-stu-id="6d01c-114">For information about new features, see [What's New in the .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms171868%28v=vs.100%29).</span></span>

## <a name="aspnet-and-web"></a><span data-ttu-id="6d01c-115">ASP.NET e Web</span><span class="sxs-lookup"><span data-stu-id="6d01c-115">ASP.NET and Web</span></span>

<span data-ttu-id="6d01c-116">Namespaces: <xref:System.Web>, <xref:System.Web.Mobile>, <xref:System.Web.Security>, <xref:System.Web.UI.WebControls>; assembly: System. Web (em System.Web.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-116">Namespaces: <xref:System.Web>, <xref:System.Web.Mobile>, <xref:System.Web.Security>, <xref:System.Web.UI.WebControls>; assembly: System.Web (in System.Web.dll)</span></span>

| <span data-ttu-id="6d01c-117">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-117">Feature</span></span> | <span data-ttu-id="6d01c-118">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-118">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-119">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-119">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-120">**Arquivos de definição do navegador**</span><span class="sxs-lookup"><span data-stu-id="6d01c-120">**Browser definition files**</span></span> | <span data-ttu-id="6d01c-121">Os arquivos de definição do navegador foram atualizados para incluir informações sobre dispositivos e navegadores novos e atualizados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-121">The browser definition files have been updated to include information about new and updated browsers and devices.</span></span> <span data-ttu-id="6d01c-122">Navegadores e dispositivos mais antigos como o Netscape Navigator foram removidos e navegadores e dispositivos mais novos como o Google Chrome e Apple iPhone foram adicionados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-122">Older browsers and devices such as Netscape Navigator have been removed, and newer browsers and devices such as Google Chrome and Apple iPhone have been added.</span></span><br><br><span data-ttu-id="6d01c-123">Se seu aplicativo contiver definições do navegador personalizadas herdadas de uma das definições do navegador que foram removidas, você verá um erro.</span><span class="sxs-lookup"><span data-stu-id="6d01c-123">If your application contains custom browser definitions that inherit from one of the browser definitions that have been removed, you will see an error.</span></span><br><br><span data-ttu-id="6d01c-124">O objeto <xref:System.Web.HttpBrowserCapabilities> (exposto pela propriedade da página `Request.Browse`) é orientada pelos arquivos de definição do navegador.</span><span class="sxs-lookup"><span data-stu-id="6d01c-124">The <xref:System.Web.HttpBrowserCapabilities> object (which is exposed by the page's `Request.Browse` property) is driven by the browser definition files.</span></span> <span data-ttu-id="6d01c-125">Portanto, as informações retornadas ao acessar uma propriedade desse objeto no ASP.NET 4 talvez sejam diferentes das informações retornadas em uma versão anterior do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6d01c-125">Therefore, the information that is returned by accessing a property of this object in ASP.NET 4 might be different than the information that was returned in an earlier version of ASP.NET.</span></span> | <span data-ttu-id="6d01c-126">Se seu aplicativo depender dos antigos arquivos de definição do navegador, será possível copiá-los da pasta a seguir:</span><span class="sxs-lookup"><span data-stu-id="6d01c-126">If your application relies on the old browser definition files, you can copy them from the following folder:</span></span><br><br><span data-ttu-id="6d01c-127">*Windows\\Microsoft.NET\\Framework\\v2.0.50727\\CONFIG\\Browsers*</span><span class="sxs-lookup"><span data-stu-id="6d01c-127">*Windows\\Microsoft.NET\\Framework\\v2.0.50727\\CONFIG\\Browsers*</span></span><br><br><span data-ttu-id="6d01c-128">Copie os arquivos para a pasta  *\\CONFIG\\Browsers* correspondente do ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="6d01c-128">Copy the files into the corresponding *\\CONFIG\\Browsers* folder for ASP.NET 4.</span></span> <span data-ttu-id="6d01c-129">Depois de copiar os arquivos, execute a ferramenta de linha de comando [Aspnet_regbrowsers.exe](https://msdn.microsoft.com/library/ms229858.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d01c-129">After you copy the files, run the [Aspnet_regbrowsers.exe](https://msdn.microsoft.com/library/ms229858.aspx) command-line tool.</span></span> <span data-ttu-id="6d01c-130">Para obter mais informações, consulte o site [https://www.asp.net/mobile](/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="6d01c-130">For more information, see the [https://www.asp.net/mobile](/aspnet/mobile/overview) Web site.</span></span> |
| <span data-ttu-id="6d01c-131">**Aplicativos filho em execução em diferentes versões do ASP.NET**</span><span class="sxs-lookup"><span data-stu-id="6d01c-131">**Child applications running under mixed versions of ASP.NET**</span></span> | <span data-ttu-id="6d01c-132">Os aplicativos ASP.NET 4 configurados como filhos de aplicativos que executam versões anteriores do ASP.NET talvez falhem ao iniciar devido a erros de configuração ou de compilação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-132">ASP.NET 4 applications that are configured as children of applications that run earlier versions of ASP.NET might fail to start because of configuration or compilation errors.</span></span> <span data-ttu-id="6d01c-133">O erro específico que ocorre depende se o aplicativo é executado no IIS 6.0 ou no IIS 7 ou no IIS 7.5.</span><span class="sxs-lookup"><span data-stu-id="6d01c-133">The specific error that occurs depends on whether the application runs under IIS 6.0, or under IIS 7 or IIS 7.5.</span></span> | <span data-ttu-id="6d01c-134">É possível fazer alterações nos arquivos de configuração dos aplicativos afetados para que o sistema de configuração reconheça corretamente o aplicativo ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="6d01c-134">You can make changes to the configuration files of the affected applications so that the configuration system correctly recognizes the ASP.NET 4 application.</span></span> <span data-ttu-id="6d01c-135">Para obter informações sobre as alterações que você deverá fazer, consulte a seção "ASP.NET 4 Child Applications Fail to Start When Under ASP.NET 2.0 or ASP.NET 3.5 Applications" (Aplicativos ASP.NET 4 filho falham ao iniciar nos Aplicativos ASP.NET 2.0 ou ASP.NET 3.5) no documento [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) (Alterações recentes do ASP.NET 4) no site da Web do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6d01c-135">For information about the changes you must make, see the section "ASP.NET 4 Child Applications Fail to Start When Under ASP.NET 2.0 or ASP.NET 3.5 Applications" in the document [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) on the ASP.NET Web site.</span></span> |
| <span data-ttu-id="6d01c-136">**Alterações da ClientID**</span><span class="sxs-lookup"><span data-stu-id="6d01c-136">**ClientID changes**</span></span> | <span data-ttu-id="6d01c-137">A nova configuração `clientIDMode` no ASP.NET 4 permite especificar como o ASP.NET gera o atributo `id` para elementos HTML.</span><span class="sxs-lookup"><span data-stu-id="6d01c-137">The new `clientIDMode` setting in ASP.NET 4 lets you specify how ASP.NET generates the `id` attribute for HTML elements.</span></span> <span data-ttu-id="6d01c-138">Nas versões anteriores do ASP.NET, o comportamento padrão era equivalente à configuração `AutoID` do `clientIDMode`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-138">In previous versions of ASP.NET, the default behavior was equivalent to the `AutoID` setting of `clientIDMode`.</span></span> <span data-ttu-id="6d01c-139">A configuração padrão agora é `Predictable`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-139">The default setting is now `Predictable`.</span></span> <span data-ttu-id="6d01c-140">Para obter mais informações, consulte [ASP.NET Web Server Control Identification](https://docs.microsoft.com/previous-versions/aspnet/1d04y8ss%28v=vs.100%29) (Identificação de controles do servidor Web do ASP.NET).</span><span class="sxs-lookup"><span data-stu-id="6d01c-140">For more information, see [ASP.NET Web Server Control Identification](https://docs.microsoft.com/previous-versions/aspnet/1d04y8ss%28v=vs.100%29).</span></span> | <span data-ttu-id="6d01c-141">Se você usar o Visual Studio para atualizar seu aplicativo do ASP.NET 2.0 ou do ASP.NET 3.5, a ferramenta adicionará automaticamente uma configuração ao arquivo Web.config que preservará o comportamento das versões anteriores do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6d01c-141">If you use Visual Studio to upgrade your application from ASP.NET 2.0 or ASP.NET 3.5, the tool automatically adds a setting to the Web.config file that preserves the behavior of earlier versions of the .NET Framework.</span></span> <span data-ttu-id="6d01c-142">No entanto, se você atualizar um aplicativo alterando o pool de aplicativos no IIS para direcionar o .NET Framework 4, o ASP.NET usará o novo modo por padrão.</span><span class="sxs-lookup"><span data-stu-id="6d01c-142">However, if you upgrade an application by changing the application pool in IIS to target the .NET Framework 4, ASP.NET uses the new mode by default.</span></span> <span data-ttu-id="6d01c-143">Para desabilitar o novo modo da ID do cliente, adicione a seguinte configuração ao arquivo Web.config:</span><span class="sxs-lookup"><span data-stu-id="6d01c-143">To disable the new client ID mode, add the following setting to the Web.config file:</span></span><br><br>`<pages clientIDMode="AutoID" />` |
| <span data-ttu-id="6d01c-144">**CAS (Segurança de Acesso do Código)**</span><span class="sxs-lookup"><span data-stu-id="6d01c-144">**Code access security (CAS)**</span></span> | <span data-ttu-id="6d01c-145">Os recursos NET do ASP.NET 2.0 que foram adicionados no ASP.NET 3.5 usam o modelo CAS (Segurança de Acesso do Código) do .NET Framework 1.1 e .NET Framework 2.0.</span><span class="sxs-lookup"><span data-stu-id="6d01c-145">ASP.NET 2.0 NET features that were added in ASP.NET 3.5 use the .NET Framework 1.1 and .NET Framework 2.0 code access security (CAS) model.</span></span> <span data-ttu-id="6d01c-146">No entanto, a implementação da CAS no ASP.NET 4 foi substancialmente revisada.</span><span class="sxs-lookup"><span data-stu-id="6d01c-146">However, the implementation of CAS in ASP.NET 4 has been substantially overhauled.</span></span> <span data-ttu-id="6d01c-147">Como resultado, os aplicativos ASP.NET de confiança parcial que dependem de código confiável em execução no cache de assembly global talvez falhem com diversas exceções de segurança.</span><span class="sxs-lookup"><span data-stu-id="6d01c-147">As a result, partial-trust ASP.NET applications that rely on trusted code running in the global assembly cache might fail with various security exceptions.</span></span> <span data-ttu-id="6d01c-148">Aplicativos de confiança parcial que dependem de grandes modificações na política de CAS do computador talvez falhem e gerem exceções de segurança também.</span><span class="sxs-lookup"><span data-stu-id="6d01c-148">Partial-trust applications that rely on extensive modifications to machine CAS policy might also fail and throw security exceptions.</span></span> | <span data-ttu-id="6d01c-149">É possível reverter aplicativos ASP.NET 4 de confiança parcial para o comportamento do ASP.NET 1.1 e 2.0 usando o novo atributo `legacyCasModel` no elemento `trust`, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="6d01c-149">You can revert partial-trust ASP.NET 4 applications to the behavior of ASP.NET 1.1 and 2.0 by using the new `legacyCasModel` attribute in the `trust` configuration element, as shown in the following example:</span></span><br><br>`<trust level= "Medium" legacyCasModel="true" />`<br><br><span data-ttu-id="6d01c-150">Importante: reverter para o modelo CAS mais antigo talvez represente menos segurança.</span><span class="sxs-lookup"><span data-stu-id="6d01c-150">Important: Reverting to the older CAS model might represent reduced security.</span></span><br><br><span data-ttu-id="6d01c-151">Para obter mais informações sobre o novo modelo de segurança de acesso do código do ASP.NET 4, consulte [Segurança de acesso do código em aplicativos ASP.NET 4](https://msdn.microsoft.com/library/dd984947.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d01c-151">For more information about the new ASP.NET 4 code access security model, see [Code Access Security in ASP.NET 4 Applications](https://msdn.microsoft.com/library/dd984947.aspx).</span></span> |
| <span data-ttu-id="6d01c-152">**Arquivos de configuração**</span><span class="sxs-lookup"><span data-stu-id="6d01c-152">**Configuration files**</span></span> | <span data-ttu-id="6d01c-153">Os arquivos de configuração raiz (o arquivo machine.config e o arquivo Web.config raiz) do .NET Framework e do ASP.NET 4 foram atualizados para incluir a maioria das informações de configuração clichês encontradas nos arquivos Web.config do aplicativo no ASP.NET 3.5.</span><span class="sxs-lookup"><span data-stu-id="6d01c-153">The root configuration files (the machine.config file and the root Web.config file) for the .NET Framework and ASP.NET 4 have been updated to include most of the boilerplate configuration information that was found in the application Web.config files in ASP.NET 3.5.</span></span> <span data-ttu-id="6d01c-154">Devido à complexidade dos sistemas de configuração do IIS 7 e IIS 7.5 gerenciados, executar aplicativos ASP.NET 3.5 no ASP.NET 4 e no IIS 7 e IIS 7.5 pode resultar em erros do ASP.NET ou do IIS.</span><span class="sxs-lookup"><span data-stu-id="6d01c-154">Because of the complexity of the managed IIS 7 and IIS 7.5 configuration systems, running ASP.NET 3.5 applications under ASP.NET 4 and under IIS 7 and IIS 7.5 can result in either ASP.NET errors or IIS errors.</span></span> | <span data-ttu-id="6d01c-155">Atualize os aplicativos ASP.NET 3.5 para ASP.NET 4 usando as ferramentas de atualização de projeto no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6d01c-155">Upgrade ASP.NET 3.5 applications to ASP.NET 4 by using the project upgrade tools in Visual Studio.</span></span> <span data-ttu-id="6d01c-156">O Visual Studio 2010 modifica automaticamente o arquivo Web.config do aplicativo ASP.NET 3.5 para conter as configurações apropriadas do ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="6d01c-156">Visual Studio 2010 automatically modifies the ASP.NET 3.5 application's Web.config file to contain the appropriate settings for ASP.NET 4.</span></span><br><br><span data-ttu-id="6d01c-157">No entanto, é possível executar aplicativos ASP.NET 3.5 usando o .NET Framework 4 sem recompilação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-157">However, you can run ASP.NET 3.5 applications using the .NET Framework 4 without recompilation.</span></span> <span data-ttu-id="6d01c-158">Nesse caso, talvez seja necessário modificar manualmente o arquivo Web.config do aplicativo antes de executar o aplicativo no .NET Framework 4 e no IIS 7 ou IIS 7.5.</span><span class="sxs-lookup"><span data-stu-id="6d01c-158">In that case, you might have to manually modify the application's Web.config file before you run the application under the .NET Framework 4 and under IIS 7 or IIS 7.5.</span></span> <span data-ttu-id="6d01c-159">A alteração específica que é necessário ser feita depende da combinação de software com a qual você está trabalhando, incluindo as versões do SP (Service Pack).</span><span class="sxs-lookup"><span data-stu-id="6d01c-159">The specific change you must make depends on the combination of software you are working with, including Service Pack (SP) releases.</span></span> <span data-ttu-id="6d01c-160">Para obter informações sobre as combinações de software possíveis afetadas por essa alteração e como resolver problemas com combinações específicas, consulte a seção "Erros de configuração relacionados à nova configuração raiz do ASP.NET 4" no documento [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) (Alterações recentes do ASP.NET 4) no site da Web do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6d01c-160">For information about the possible software combinations that are affected by this change and how to resolve problems with specific combinations, see the section "Configuration Errors Related to New ASP.NET 4 Root Configuration" in the document [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) on the ASP.NET Web site.</span></span> |
| <span data-ttu-id="6d01c-161">**Renderização de controles**</span><span class="sxs-lookup"><span data-stu-id="6d01c-161">**Control rendering**</span></span> | <span data-ttu-id="6d01c-162">Em versões anteriores do ASP.NET, alguns controles emitiam marcação que não podiam ser desabilitadas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-162">In previous versions of ASP.NET, some controls emitted markup that you could not disable.</span></span> <span data-ttu-id="6d01c-163">Por padrão, esse tipo de marcação não é mais gerado no ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="6d01c-163">By default, this type of markup is no longer generated in ASP.NET 4.</span></span> <span data-ttu-id="6d01c-164">As alterações de renderização afetam os seguintes controles:</span><span class="sxs-lookup"><span data-stu-id="6d01c-164">The rendering changes affect the following controls:</span></span><br><br><span data-ttu-id="6d01c-165">\* Os controles `Image` e `ImageButton` não renderizam mais um atributo `border="0"`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-165">\* The `Image` and `ImageButton` controls no longer render a `border="0"` attribute.</span></span><br><span data-ttu-id="6d01c-166">\* A classe `BaseValidator` e os controles de validação derivados dela não renderizam mais texto vermelho por padrão.</span><span class="sxs-lookup"><span data-stu-id="6d01c-166">\* The `BaseValidator` class and validation controls that derive from it no longer render red text by default.</span></span><br><span data-ttu-id="6d01c-167">\* O controle `HtmlForm` não renderiza um atributo `name`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-167">\* The `HtmlForm` control does not render a `name` attribute.</span></span><br><span data-ttu-id="6d01c-168">\* O controle `Table` não renderiza mais um atributo `border="0"`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-168">\* The `Table` control no longer renders a `border="0"` attribute.</span></span><br><br><span data-ttu-id="6d01c-169">Os controles que não foram projetados para a entrada de usuário (por exemplo, o controle `Label`) não renderizarão mais o atributo `disabled="disabled"` se sua propriedade `Enabled` for definida como `false` (ou se eles herdarem essa configuração de uma caixa de controles).</span><span class="sxs-lookup"><span data-stu-id="6d01c-169">Controls that are not designed for user input (for example, the `Label` control) no longer render the `disabled="disabled"` attribute if their `Enabled` property is set to `false` (or if they inherit this setting from a container control).</span></span> | <span data-ttu-id="6d01c-170">Se você usar o Visual Studio para atualizar seu aplicativo do ASP.NET 2.0 ou do ASP.NET 3.5, a ferramenta adicionará automaticamente uma configuração ao arquivo Web.config que preservará a renderização herdada.</span><span class="sxs-lookup"><span data-stu-id="6d01c-170">If you use Visual Studio to upgrade your application from ASP.NET 2.0 or ASP.NET 3.5, the tool automatically adds a setting to the Web.config file that preserves legacy rendering.</span></span> <span data-ttu-id="6d01c-171">No entanto, se você atualizar um aplicativo alterando o pool de aplicativos no IIS para direcionar o .NET Framework 4, o ASP.NET usará o novo modo de renderização por padrão.</span><span class="sxs-lookup"><span data-stu-id="6d01c-171">However, if you upgrade an application by changing the application pool in IIS to target the .NET Framework 4, ASP.NET uses the new rendering mode by default.</span></span> <span data-ttu-id="6d01c-172">Para desabilitar o novo modo de renderização, adicione a seguinte configuração ao arquivo Web.config:</span><span class="sxs-lookup"><span data-stu-id="6d01c-172">To disable the new rendering mode, add the following setting to the Web.config file:</span></span><br><br>`<pages controlRenderingCompatibilityVersion="3.5" />` |
| <span data-ttu-id="6d01c-173">**Manipuladores de eventos em documentos padrão**</span><span class="sxs-lookup"><span data-stu-id="6d01c-173">**Event handlers in default documents**</span></span> | <span data-ttu-id="6d01c-174">O ASP.NET 4 renderiza o valor do atributo `action` do elemento `form` HTML como uma cadeia de caracteres vazia quando uma solicitação é feita em uma URL sem extensão que tem um documento padrão mapeado para ela.</span><span class="sxs-lookup"><span data-stu-id="6d01c-174">ASP.NET  4 renders the HTML `form` element's `action` attribute value as an empty string when a request is made to an extensionless URL that has a default document mapped to it.</span></span> <span data-ttu-id="6d01c-175">Em versões anteriores do ASP.NET, uma solicitação para `http://contoso.com` resultaria em uma solicitação para Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="6d01c-175">In earlier releases of ASP.NET, a request to `http://contoso.com` would result in a request to Default.aspx.</span></span> <span data-ttu-id="6d01c-176">Nesse documento, a marca `form` de abertura seria renderizada como no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="6d01c-176">In that document, the opening `form` tag would be rendered as in the following example:</span></span><br><br>`<form action="Default.aspx" />`<br><br><span data-ttu-id="6d01c-177">No ASP.NET 4, uma solicitação para `http://contoso.com` também resulta em uma solicitação para Default.aspx, mas agora o ASP.NET renderiza a marca `form` de abertura HTML como no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="6d01c-177">In ASP.NET 4, a request to `http://contoso.com` also results in a request to Default.aspx, but ASP.NET now renders the HTML opening `form` tag as in the following example:</span></span><br><br>`<form action="" />`<br><br><span data-ttu-id="6d01c-178">Quando o atributo `action` é uma cadeia de caracteres vazia, o objeto `DefaultDocumentModule` do IIS cria uma solicitação filho para Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="6d01c-178">When the `action` attribute is an empty string, the IIS `DefaultDocumentModule` object creates a child request to Default.aspx.</span></span> <span data-ttu-id="6d01c-179">Na maioria das condições, essa solicitação filho é transparente para o código do aplicativo e a página Default.aspx é executada normalmente.</span><span class="sxs-lookup"><span data-stu-id="6d01c-179">Under most conditions, this child request is transparent to application code, and the Default.aspx page runs normally.</span></span> <span data-ttu-id="6d01c-180">No entanto, uma eventual interação entre código gerenciado e o modo integrado do IIS 7 ou IIS 7.5 pode fazer páginas .aspx gerenciadas pararem de funcionar adequadamente durante a solicitação filho.</span><span class="sxs-lookup"><span data-stu-id="6d01c-180">However, a potential interaction between managed code and IIS 7 or IIS 7.5 Integrated mode can cause managed .aspx pages to stop working properly during the child request.</span></span> <span data-ttu-id="6d01c-181">Se ocorrerem as condições a seguir, a solicitação filho para um documento .aspx padrão resultará em um erro ou em um comportamento inesperado:</span><span class="sxs-lookup"><span data-stu-id="6d01c-181">If the following conditions occur, the child request to a default .aspx document will result in an error or in unexpected behavior:</span></span><br><br><span data-ttu-id="6d01c-182">\* Uma página .aspx é enviada ao navegador com o atributo `action` do elemento `form` definido como "".</span><span class="sxs-lookup"><span data-stu-id="6d01c-182">\* An .aspx page is sent to the browser with the `form` element's `action` attribute set to "".</span></span><br><span data-ttu-id="6d01c-183">\* O formulário é publicado de volta no ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6d01c-183">\* The form is posted back to ASP.NET.</span></span><br><span data-ttu-id="6d01c-184">\* Um módulo HTTP gerenciado lê alguma parte do corpo da entidade, como `Request.Form` ou `Request.Params`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-184">\* A managed HTTP module reads some part of the entity body, such as `Request.Form` or `Request.Params`.</span></span> <span data-ttu-id="6d01c-185">Isso faz o corpo da entidade da solicitação POST ser lido na memória gerenciada.</span><span class="sxs-lookup"><span data-stu-id="6d01c-185">This causes the entity body of the POST request to be read into managed memory.</span></span> <span data-ttu-id="6d01c-186">Como resultado, o corpo da entidade não está mais disponível para quaisquer módulos de código nativo em execução no modo integrado do IIS 7 ou do IIS 7.5.</span><span class="sxs-lookup"><span data-stu-id="6d01c-186">As a result, the entity body is no longer available to any native code modules that are running in IIS 7 or IIS 7.5 Integrated mode.</span></span><br><span data-ttu-id="6d01c-187">\* Em algum momento, o objeto `DefaultDocumentModule` do IIS é executado e cria uma solicitação filho para o documento Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="6d01c-187">\* The IIS `DefaultDocumentModule` object eventually runs and creates a child request to the Default.aspx document.</span></span> <span data-ttu-id="6d01c-188">No entanto, como o corpo da entidade já foi lido por um trecho de código gerenciado, não há nenhum corpo de entidade disponível para enviar a solicitação filho.</span><span class="sxs-lookup"><span data-stu-id="6d01c-188">However, because the entity body has already been read by a piece of managed code, there is no entity body available to send to the child request.</span></span><br><span data-ttu-id="6d01c-189">\* Quando o pipeline HTTP é executado para a solicitação filho, o manipulador dos arquivos .aspx é executado durante a fase de handler-execute.</span><span class="sxs-lookup"><span data-stu-id="6d01c-189">\* When the HTTP pipeline runs for the child request, the handler for .aspx files runs during the handler-execute phase.</span></span><br><br><span data-ttu-id="6d01c-190">Como não há nenhum corpo de entidade, há nenhuma variável de formulário e nenhum estado de exibição.</span><span class="sxs-lookup"><span data-stu-id="6d01c-190">Because there is no entity body, there are no form variables and no view state.</span></span> <span data-ttu-id="6d01c-191">Portanto, não há nenhuma informação disponível para o manipulador de página .aspx para determinar qual evento (se houver) deve ser gerado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-191">Therefore there is no information available for the .aspx page handler to determine what event (if any) should be raised.</span></span> <span data-ttu-id="6d01c-192">Como resultado, nenhum manipulador de eventos de postback para a página .aspx afetada é executado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-192">As a result, none of the postback event handlers for the affected .aspx page run.</span></span> | <span data-ttu-id="6d01c-193">Para obter informações sobre como solucionar problemas que possam surgir como resultado dessa alteração, consulte “Event Handlers Might Not Be Not Raised in a Default Document in IIS 7 or IIS 7.5 Integrated Mode” (Manipuladores de eventos podem não ser gerados em um documento padrão no modo integrado do IIS 7 ou IIS 7.5) no documento [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) (Alterações recentes do ASP.NET 4) no site da Web do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6d01c-193">For information about ways to work around problems that might arise as a result of this change, see "Event Handlers Might Not Be Not Raised in a Default Document in IIS 7 or IIS 7.5 Integrated Mode" in the document [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) on the ASP.NET Web site.</span></span> |
| <span data-ttu-id="6d01c-194">**Algoritmo de hash**</span><span class="sxs-lookup"><span data-stu-id="6d01c-194">**Hashing algorithm**</span></span> | <span data-ttu-id="6d01c-195">O ASP.NET usa algoritmos de hash e criptografia para ajudar a proteger dados como cookies de autenticação de formulários e estado de exibição.</span><span class="sxs-lookup"><span data-stu-id="6d01c-195">ASP.NET uses both encryption and hashing algorithms to help secure data such as forms authentication cookies and view state.</span></span> <span data-ttu-id="6d01c-196">Por padrão, o ASP.NET 4 usa o algoritmo <xref:System.Security.Cryptography.HMACSHA256> para operações de hash em cookies e estado de exibição.</span><span class="sxs-lookup"><span data-stu-id="6d01c-196">By default, ASP.NET 4 uses the <xref:System.Security.Cryptography.HMACSHA256> algorithm for hash operations on cookies and view state.</span></span> <span data-ttu-id="6d01c-197">As versões anteriores do ASP.NET usavam o algoritmo <xref:System.Security.Cryptography.HMACSHA1> mais antigo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-197">Earlier versions of ASP.NET used the older <xref:System.Security.Cryptography.HMACSHA1> algorithm.</span></span> | <span data-ttu-id="6d01c-198">Se você executar aplicativos que combinam o ASP.NET 2.0 e o ASP.NET 4, em que dados como os cookies de autenticação de formulários devem funcionar em versões do .NET Framework, configure um aplicativo Web ASP.NET 4 para usar o algoritmo <xref:System.Security.Cryptography.HMACSHA1> mais antigo adicionando a seguinte configuração no arquivo Web.config:</span><span class="sxs-lookup"><span data-stu-id="6d01c-198">If you run applications that mix ASP.NET 2.0 and ASP.NET 4, where data such as forms authentication cookies must work across .NET Framework versions, configure an ASP.NET 4 Web application to use the older <xref:System.Security.Cryptography.HMACSHA1> algorithm by adding the following setting in the Web.config file:</span></span><br><br>`<machineKey validation="SHA1" />` |
| <span data-ttu-id="6d01c-199">**Hospedando controles no Internet Explorer**</span><span class="sxs-lookup"><span data-stu-id="6d01c-199">**Hosting controls in Internet Explorer**</span></span> | <span data-ttu-id="6d01c-200">Não é mais possível hospedar controles do Windows Forms no Internet Explorer, porque há soluções melhores para hospedar controles na Web.</span><span class="sxs-lookup"><span data-stu-id="6d01c-200">You can no longer host Windows Forms controls in the Internet Explorer, because there are better solutions for hosting controls on the Web.</span></span> <span data-ttu-id="6d01c-201">Portanto, os assemblies IEHost.dll e IEExec.exe foram removidos do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6d01c-201">Therefore, the IEHost.dll and IEExec.exe assemblies have been removed from the .NET Framework.</span></span> | <span data-ttu-id="6d01c-202">É possível usar as seguintes tecnologias para o desenvolvimento de controles personalizados em aplicativos Web:</span><span class="sxs-lookup"><span data-stu-id="6d01c-202">You can use the following technologies for custom control development in Web applications:</span></span><br><br><span data-ttu-id="6d01c-203">\* É possível criar um aplicativo Silverlight e configurá-lo para ser executado fora do navegador.</span><span class="sxs-lookup"><span data-stu-id="6d01c-203">\* You can create a Silverlight application and configure it to run outside the browser.</span></span> <span data-ttu-id="6d01c-204">Para obter mais informações, consulte [Out-of-Browser Support](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/dd550721%28v=vs.95%29) (Suporte à execução fora do navegador).</span><span class="sxs-lookup"><span data-stu-id="6d01c-204">For more information, see [Out-of-Browser Support](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/dd550721%28v=vs.95%29).</span></span><br><span data-ttu-id="6d01c-205">\* É possível compilar um XBAP (aplicativo de navegador XAML) para usar os recursos WPF (requer o .NET Framework em computadores cliente).</span><span class="sxs-lookup"><span data-stu-id="6d01c-205">\* You can build a XAML browser application (XBAP) to take advantage of WPF capabilities (requires the .NET Framework on client machines).</span></span> <span data-ttu-id="6d01c-206">Para obter mais informações, consulte [Visão geral de aplicativos de navegador XAML WPF](../../../docs/framework/wpf/app-development/wpf-xaml-browser-applications-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6d01c-206">For more information, see [WPF XAML Browser Applications Overview](../../../docs/framework/wpf/app-development/wpf-xaml-browser-applications-overview.md).</span></span> |
| <span data-ttu-id="6d01c-207">**Métodos HtmlEncode e UrlEncode**</span><span class="sxs-lookup"><span data-stu-id="6d01c-207">**HtmlEncode and UrlEncode methods**</span></span> | <span data-ttu-id="6d01c-208">Os métodos `HtmlEncode` e `UrlEncode` das classes <xref:System.Web.HttpUtility> e <xref:System.Web.HttpServerUtility> foram atualizados para codificar o caractere de aspas simples (') da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="6d01c-208">The `HtmlEncode` and `UrlEncode` methods of the <xref:System.Web.HttpUtility> and <xref:System.Web.HttpServerUtility> classes have been updated to encode the single quotation mark character (') as follows:</span></span><br><br><span data-ttu-id="6d01c-209">\* O método `HtmlEncode` codifica instâncias de aspas simples como `&#39;`</span><span class="sxs-lookup"><span data-stu-id="6d01c-209">\* The `HtmlEncode` method encodes instances of the single quotation mark as `&#39;`</span></span><br><span data-ttu-id="6d01c-210">\* O método `UrlEncode` codifica instâncias de aspas simples como `%27`</span><span class="sxs-lookup"><span data-stu-id="6d01c-210">\* The `UrlEncode` method encodes instances of the single quotation mark as `%27`</span></span> | <span data-ttu-id="6d01c-211">Em seu código, procure locais nos quais você usa os métodos `HtmlEncode` e `UrlEncode`, e certifique-se de que a alteração na codificação não resulte em uma alteração que possa afetar seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-211">Examine your code for places where you use the `HtmlEncode` and `UrlEncode` methods, and make sure that the change in encoding does not result in a change that would affect your application.</span></span> |
| <span data-ttu-id="6d01c-212">**Erros HttpException em aplicativos ASP.NET 2.0**</span><span class="sxs-lookup"><span data-stu-id="6d01c-212">**HttpException errors in ASP.NET 2.0 applications**</span></span> | <span data-ttu-id="6d01c-213">Depois que o ASP.NET 4 tiver sido habilitado no IIS 6, os aplicativos ASP.NET 2.0 executados no IIS 6 (no Windows Server 2003 ou Windows Server 2003 R2) poderão gerar erros como o seguinte: `System.Web.HttpException: Path '/[yourApplicationRoot]/eurl.axd/[Value]' was not found.`</span><span class="sxs-lookup"><span data-stu-id="6d01c-213">After ASP.NET 4 has been enabled on IIS 6, ASP.NET 2.0 applications that run on IIS 6 (in either Windows Server 2003 or Windows Server 2003 R2) might generate errors such as the following: `System.Web.HttpException: Path '/[yourApplicationRoot]/eurl.axd/[Value]' was not found.`</span></span> | <span data-ttu-id="6d01c-214">\* Se não for necessário ter o ASP.NET 4 para executar o site da Web, remapeie o site para usar o ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="6d01c-214">\* If ASP.NET 4 is not required in order to run the Web site, remap the site to use ASP.NET 2.0 instead.</span></span><br><br><span data-ttu-id="6d01c-215">-ou-</span><span class="sxs-lookup"><span data-stu-id="6d01c-215">-or-</span></span><br><br><span data-ttu-id="6d01c-216">\* Se for necessário ter o ASP.NET 4 para executar o site da Web, mova quaisquer diretórios virtuais do ASP.NET 2.0 filho para um site da Web diferente mapeado para o ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="6d01c-216">\* If ASP.NET 4 is required in order to run the Web site, move any child ASP.NET 2.0 virtual directories to a different Web site that is mapped to ASP.NET 2.0.</span></span><br><br><span data-ttu-id="6d01c-217">-ou-</span><span class="sxs-lookup"><span data-stu-id="6d01c-217">-or-</span></span><br><br><span data-ttu-id="6d01c-218">\* Desabilite URLs sem extensão.</span><span class="sxs-lookup"><span data-stu-id="6d01c-218">\* Disable extensionless URLs.</span></span> <span data-ttu-id="6d01c-219">Para obter mais informações, consulte "Aplicativos ASP.NET 2.0 podem gerar erros HttpException que referenciam eurl.axd" no documento [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) (Alterações recentes do ASP.NET 4) no site da Web do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6d01c-219">For more information, see "ASP.NET 2.0 Applications Might Generate HttpException Errors That Reference eurl.axd" in the document [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) on the ASP.NET Web site.</span></span> |
| <span data-ttu-id="6d01c-220">**Tipos de associação**</span><span class="sxs-lookup"><span data-stu-id="6d01c-220">**Membership types**</span></span> | <span data-ttu-id="6d01c-221">Alguns tipos (por exemplo, <xref:System.Web.Security.MembershipProvider>) usados na associação do ASP.NET foram movidos do System.Web.dll para o assembly System.Web.ApplicationServices.dll.</span><span class="sxs-lookup"><span data-stu-id="6d01c-221">Some types (for example, <xref:System.Web.Security.MembershipProvider>) that are used in ASP.NET membership have been moved from System.Web.dll to the System.Web.ApplicationServices.dll assembly.</span></span> <span data-ttu-id="6d01c-222">Os tipos foram movidos para resolver as dependências de camadas de arquitetura entre os tipos no cliente e nos SKUs do .NET Framework estendido.</span><span class="sxs-lookup"><span data-stu-id="6d01c-222">The types were moved in order to resolve architectural layering dependencies between types in the client and in extended .NET Framework SKUs.</span></span> | <span data-ttu-id="6d01c-223">As bibliotecas de classes que foram atualizadas de versões anteriores do ASP.NET e que usarem os tipos de associação movidos poderão falhar ao compilar quando usadas em um projeto do ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="6d01c-223">Class libraries that have been upgraded from earlier versions of ASP.NET and that use membership types that have been moved might fail to compile when used in an ASP.NET 4 project.</span></span> <span data-ttu-id="6d01c-224">Nesse caso, adicione uma referência no projeto da biblioteca de classes ao System.Web.ApplicationServices.dll.</span><span class="sxs-lookup"><span data-stu-id="6d01c-224">If so, add a reference in the class library project to System.Web.ApplicationServices.dll.</span></span> |
| <span data-ttu-id="6d01c-225">**Alterações no Controle de menu**</span><span class="sxs-lookup"><span data-stu-id="6d01c-225">**Menu control changes**</span></span> | <span data-ttu-id="6d01c-226">Alterações no controle <xref:System.Web.UI.WebControls.Menu> resultam no seguinte comportamento:</span><span class="sxs-lookup"><span data-stu-id="6d01c-226">Changes to the <xref:System.Web.UI.WebControls.Menu> control result in the following behavior:</span></span><br><br><span data-ttu-id="6d01c-227">\* Se <xref:System.Web.UI.WebControls.MenuRenderingMode> for definido como `List` ou se <xref:System.Web.UI.WebControls.MenuRenderingMode> for definido como `Default` e <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> for definido como `4.0` ou posterior, a propriedade <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> não terá nenhum efeito.</span><span class="sxs-lookup"><span data-stu-id="6d01c-227">\* If <xref:System.Web.UI.WebControls.MenuRenderingMode> is set to `List`, or if <xref:System.Web.UI.WebControls.MenuRenderingMode> is set to `Default` and <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> is set to `4.0` or later, the <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> property has no effect.</span></span><br><span data-ttu-id="6d01c-228">\* Se o caminho definido nas propriedades <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> e <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> contiver uma barra invertida (\\), as imagens não serão renderizadas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-228">\* If the path that is set in the <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> and <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> properties contains a backslash (\\), the images do not render.</span></span> <span data-ttu-id="6d01c-229">(Nas versões anteriores do ASP.NET, o caminho podia incluir uma barra invertida.)</span><span class="sxs-lookup"><span data-stu-id="6d01c-229">(In earlier versions of ASP.NET, the path could include a backslash.)</span></span> | <span data-ttu-id="6d01c-230">\* Em vez de configurar a propriedade <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> para itens de menu individuais, defina o <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> ou <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> do controle pai <xref:System.Web.UI.WebControls.Menu>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-230">\* Instead of setting the <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> property for individual menu items, set the <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> or <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> of the parent <xref:System.Web.UI.WebControls.Menu> control.</span></span><br><br><span data-ttu-id="6d01c-231">-ou-</span><span class="sxs-lookup"><span data-stu-id="6d01c-231">-or-</span></span><br><br><span data-ttu-id="6d01c-232">Defina <xref:System.Web.UI.WebControls.MenuRenderingMode> como `Table` ou defina <xref:System.Web.UI.WebControls.MenuRenderingMode> como `Default` e defina <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> como `3.5`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-232">Set <xref:System.Web.UI.WebControls.MenuRenderingMode> to `Table`, or set <xref:System.Web.UI.WebControls.MenuRenderingMode> to `Default` and set <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> to `3.5`.</span></span> <span data-ttu-id="6d01c-233">Essas configurações fazem o controle <xref:System.Web.UI.WebControls.Menu> usar o layout baseado em tabela HTML usado em versões anteriores do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6d01c-233">These settings cause the <xref:System.Web.UI.WebControls.Menu> control to use the HTML table-based layout that it used in earlier versions of ASP.NET.</span></span><br><span data-ttu-id="6d01c-234">\* Se o caminho na propriedade <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> ou <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> contiver uma barra invertida (\\), substitua um caractere de barra (/).</span><span class="sxs-lookup"><span data-stu-id="6d01c-234">\* If the path in the <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> or <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> property contains a backslash (\\), substitute a slash character (/).</span></span> |
| <span data-ttu-id="6d01c-235">**Assembly móvel no arquivo Web.config**</span><span class="sxs-lookup"><span data-stu-id="6d01c-235">**Mobile assembly in Web.config file**</span></span> | <span data-ttu-id="6d01c-236">Nas versões anteriores do ASP.NET, uma referência ao assembly System.Web.Mobile.dll foi incluída no arquivo Web.config raiz na seção `assemblies` em `system.web`/`compilation`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-236">In previous versions of ASP.NET, a reference to the System.Web.Mobile.dll assembly was included in the root Web.config file in the `assemblies` section under `system.web`/`compilation`.</span></span> <span data-ttu-id="6d01c-237">Para melhorar o desempenho, a referência a esse assembly foi removida.</span><span class="sxs-lookup"><span data-stu-id="6d01c-237">To improve performance, the reference to this assembly has been removed.</span></span><br><br><span data-ttu-id="6d01c-238">Observação: o assembly System.Web.Mobile.dll e os controles móveis do ASP.NET estão incluídos no ASP.NET 4, mas eles são preteridos.</span><span class="sxs-lookup"><span data-stu-id="6d01c-238">Note: The System.Web.Mobile.dll assembly and the ASP.NET mobile controls are included in ASP.NET 4, but they are deprecated.</span></span> | <span data-ttu-id="6d01c-239">Se você desejar usar tipos desse assembly, adicione uma referência ao assembly no arquivo Web.config raiz ou em um arquivo Web.config do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-239">If you want to use types from this assembly, add a reference to the assembly in either the root Web.config file or in an application Web.config file.</span></span> |
| <span data-ttu-id="6d01c-240">**Cache de saída**</span><span class="sxs-lookup"><span data-stu-id="6d01c-240">**Output caching**</span></span> | <span data-ttu-id="6d01c-241">No ASP.NET 1.0, um bug fez as páginas armazenadas em cache que especificavam `Location="ServerAndClient"` como uma configuração de cache de saída emitirem um cabeçalho HTTP `Vary:*` na resposta.</span><span class="sxs-lookup"><span data-stu-id="6d01c-241">In ASP.NET 1.0, a bug caused cached pages that specified `Location="ServerAndClient"` as an output€“cache setting to emit a `Vary:*` HTTP header in the response.</span></span> <span data-ttu-id="6d01c-242">O efeito disso era informar os navegadores de clientes a nunca armazenar a página em cache localmente.</span><span class="sxs-lookup"><span data-stu-id="6d01c-242">This had the effect of telling client browsers to never cache the page locally.</span></span> <span data-ttu-id="6d01c-243">No ASP.NET 1.1, o método <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> foi adicionado, que poderia ser chamado para suprimir o cabeçalho `Vary:*`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-243">In ASP.NET 1.1, the <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> method was added, which could be called in order to suppress the `Vary:*` header.</span></span> <span data-ttu-id="6d01c-244">No entanto, os relatórios de bugs sugerem que os desenvolvedores não têm conhecimento do comportamento `SetOmitVaryStar` existente.</span><span class="sxs-lookup"><span data-stu-id="6d01c-244">However, bug reports suggest that developers are unaware of the existing `SetOmitVaryStar` behavior.</span></span><br><br><span data-ttu-id="6d01c-245">No ASP.NET 4, o cabeçalho HTTP `Vary:*` não é mais emitido com base em respostas que especificam a seguinte diretiva:</span><span class="sxs-lookup"><span data-stu-id="6d01c-245">In ASP.NET 4, the `Vary:*` HTTP header is no longer emitted from responses that specify the following directive:</span></span><br><br>`<%@ OutputCache Location="ServerAndClient" %>`<br><br><span data-ttu-id="6d01c-246">Como resultado, o método <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> não é mais necessário para suprimir o cabeçalho `Vary:*`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-246">As a result, the <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> method is no longer needed in order to suppress the `Vary:*` header.</span></span> <span data-ttu-id="6d01c-247">Em aplicativos que especificam "ServerAndClient" para o atributo `Location`, as páginas poderão ser armazenadas em cache no navegador sem a necessidade de chamar <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-247">In applications that specify "ServerAndClient" for the `Location` attribute, pages will be cacheable in the browser without requiring that you call <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A>.</span></span> | <span data-ttu-id="6d01c-248">Se as páginas do aplicativo precisarem emitir `Vary:*`, chame o método <xref:System.Web.HttpResponse.AppendHeader%2A> conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="6d01c-248">If pages in the application must emit `Vary:*`, call the <xref:System.Web.HttpResponse.AppendHeader%2A> method as shown in the following example:</span></span><br><br>`System.Web.HttpResponse.AppendHeader("Vary","*");`<br><br><span data-ttu-id="6d01c-249">Ou é possível alterar o valor do atributo `Location` do cache de saída para "Servidor".</span><span class="sxs-lookup"><span data-stu-id="6d01c-249">Alternatively, you can change the value of the output caching `Location` attribute to "Server".</span></span> |
| <span data-ttu-id="6d01c-250">**Análise da página**</span><span class="sxs-lookup"><span data-stu-id="6d01c-250">**Page parsing**</span></span> | <span data-ttu-id="6d01c-251">O analisador de página para páginas da Web do ASP.NET (arquivos .aspx) e controles de usuário (arquivos .ascx) é mais rígido no ASP.NET 4 do que em versões anteriores do ASP.NET e ele sinaliza mais marcações como inválidas do que em versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="6d01c-251">The page parser for ASP.NET Web pages (.aspx files) and user controls (.ascx files) is stricter in ASP.NET 4 than in earlier versions of ASP.NET, and it flags more markup as invalid than in earlier versions.</span></span> | <span data-ttu-id="6d01c-252">Examine mensagens de erro produzidas quando uma página é executada e corrigem erros resultantes de marcação inválida.</span><span class="sxs-lookup"><span data-stu-id="6d01c-252">Examine error messages that are produced when a page runs and fix errors that result from invalid markup.</span></span> |
| <span data-ttu-id="6d01c-253">**Tipos de Passport**</span><span class="sxs-lookup"><span data-stu-id="6d01c-253">**Passport types**</span></span> | <span data-ttu-id="6d01c-254">O suporte ao Passport incorporado no ASP.NET 2.0 é obsoleto e não tem mais suporte devido a alterações no Passport (agora SDK do Live ID).</span><span class="sxs-lookup"><span data-stu-id="6d01c-254">The Passport support built into ASP.NET 2.0 is obsolete and is unsupported due to changes in Passport (now Live ID SDK).</span></span> <span data-ttu-id="6d01c-255">Como resultado, agora os tipos relacionados ao Passport no <xref:System.Web.Security> são marcados com o atributo `ObsoleteAttribute`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-255">As a result, the types related to Passport in <xref:System.Web.Security> are now marked with the `ObsoleteAttribute` attribute.</span></span> | <span data-ttu-id="6d01c-256">Altere qualquer código que você tenha que use tipos do Passport no namespace <xref:System.Web.Security> (por exemplo, <xref:System.Web.Security.PassportIdentity>) para usar o [SDK](https://go.microsoft.com/fwlink/?LinkId=106346).</span><span class="sxs-lookup"><span data-stu-id="6d01c-256">Change any code you have that uses Passport types in the <xref:System.Web.Security> namespace (for example, <xref:System.Web.Security.PassportIdentity>) to use the [SDK](https://go.microsoft.com/fwlink/?LinkId=106346).</span></span> |
| <span data-ttu-id="6d01c-257">**Informação PathInfo na propriedade FilePath**</span><span class="sxs-lookup"><span data-stu-id="6d01c-257">**PathInfo information in the FilePath property**</span></span> | <span data-ttu-id="6d01c-258">O ASP.NET 4 não inclui mais o valor `PathInfo` nos valores de retorno de propriedades como <xref:System.Web.HttpRequest.FilePath>, <xref:System.Web.HttpRequest.AppRelativeCurrentExecutionFilePath> e <xref:System.Web.HttpRequest.CurrentExecutionFilePath>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-258">ASP.NET 4 no longer includes the `PathInfo` value in the return values from properties such as <xref:System.Web.HttpRequest.FilePath>, <xref:System.Web.HttpRequest.AppRelativeCurrentExecutionFilePath>, and <xref:System.Web.HttpRequest.CurrentExecutionFilePath>.</span></span> <span data-ttu-id="6d01c-259">Em vez disso, as informações `PathInfo` do estão disponíveis em <xref:System.Web.HttpRequest.PathInfo>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-259">Instead, the `PathInfo` information is available in <xref:System.Web.HttpRequest.PathInfo>.</span></span> <span data-ttu-id="6d01c-260">Por exemplo, imagine o fragmento da URL a seguir:</span><span class="sxs-lookup"><span data-stu-id="6d01c-260">For example, imagine the following URL fragment:</span></span><br><br>`/testapp/Action.mvc/SomeAction`<br><br><span data-ttu-id="6d01c-261">Em versões anteriores do ASP.NET, as propriedades <xref:System.Web.HttpRequest> têm os seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="6d01c-261">In earlier versions of ASP.NET, <xref:System.Web.HttpRequest> properties have the following values:</span></span><br><br><span data-ttu-id="6d01c-262">\* <xref:System.Web.HttpRequest.FilePath>: `/testapp/Action.mvc/SomeAction`</span><span class="sxs-lookup"><span data-stu-id="6d01c-262">\* <xref:System.Web.HttpRequest.FilePath>: `/testapp/Action.mvc/SomeAction`</span></span><br><span data-ttu-id="6d01c-263">\* <xref:System.Web.HttpRequest.PathInfo>: (vazio)</span><span class="sxs-lookup"><span data-stu-id="6d01c-263">\* <xref:System.Web.HttpRequest.PathInfo>: (empty)</span></span><br><br><span data-ttu-id="6d01c-264">No ASP.NET 4, as propriedades <xref:System.Web.HttpRequest> têm os seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="6d01c-264">In ASP.NET 4, <xref:System.Web.HttpRequest> properties instead have the following values:</span></span><br><br><span data-ttu-id="6d01c-265">\* <xref:System.Web.HttpRequest.FilePath>: `/testapp/Action.mvc`</span><span class="sxs-lookup"><span data-stu-id="6d01c-265">\* <xref:System.Web.HttpRequest.FilePath>: `/testapp/Action.mvc`</span></span><br><span data-ttu-id="6d01c-266">\* <xref:System.Web.HttpRequest.PathInfo>: `SomeAction`</span><span class="sxs-lookup"><span data-stu-id="6d01c-266">\* <xref:System.Web.HttpRequest.PathInfo>: `SomeAction`</span></span> | <span data-ttu-id="6d01c-267">Em seu código, examine os locais nos quais você depende de propriedades da classe <xref:System.Web.HttpRequest> para retornar as informações do caminho; altere o código para refletir as alterações na maneira como as informações do caminho são retornadas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-267">Examine your code for places where you rely on properties of the <xref:System.Web.HttpRequest> class to return path information; change the code to reflect the changes in how path information is returned.</span></span> |
| <span data-ttu-id="6d01c-268">**Validação de solicitação**</span><span class="sxs-lookup"><span data-stu-id="6d01c-268">**Request validation**</span></span> | <span data-ttu-id="6d01c-269">Para melhorar a validação de solicitação, a validação de solicitação do ASP.NET é invocada anteriormente no ciclo de vida da solicitação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-269">To improve request validation, the ASP.NET request validation is invoked earlier in the request life cycle.</span></span> <span data-ttu-id="6d01c-270">Como resultado, a validação de solicitação é executada para solicitações que não são para arquivos .aspx, como para chamadas de serviço Web e para manipuladores personalizados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-270">As a result, request validation runs for requests that are not for .aspx files, such as for Web service calls and for custom handlers.</span></span> <span data-ttu-id="6d01c-271">A validação de solicitação também estará ativa quando os módulos HTTP personalizados estiverem sendo executados no pipeline de processamento da solicitação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-271">Request validation will also be active when custom HTTP modules are running in the request processing pipeline.</span></span><br><br><span data-ttu-id="6d01c-272">Em decorrência dessa alteração, as solicitações de recursos que não sejam arquivos .aspx talvez gerem erros de validação de solicitação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-272">As a result of this change, requests for resources other than .aspx files might throw request validation errors.</span></span> <span data-ttu-id="6d01c-273">Código personalizado executado no pipeline de solicitação (por exemplo, módulos HTTP personalizados) talvez gerem também erros de validação de solicitação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-273">Custom code that runs in the request pipeline (for example, custom HTTP modules) might also throw request validation errors.</span></span> | <span data-ttu-id="6d01c-274">Se necessário, é possível reverter para o antigo comportamento de ter apenas páginas .aspx disparando validação de solicitação por meio da seguinte configuração no arquivo de configuração da Web:</span><span class="sxs-lookup"><span data-stu-id="6d01c-274">If necessary, you can revert to the old behavior of having only .aspx pages triggering request validation by using the following setting in the Web configuration file:</span></span><br><br>`<httpRuntime requestValidationMode="2.0" />`<br><br><span data-ttu-id="6d01c-275">Aviso: se você reverter para o comportamento antigo, certifique-se de que todo o código nos manipuladores, módulos e outros códigos personalizados existentes realize verificações de entradas HTTP potencialmente não seguras que possam ser vetores de ataque XSS.</span><span class="sxs-lookup"><span data-stu-id="6d01c-275">Warning: If you revert to the old behavior, make sure that all code in existing handlers, modules, and other custom code performs checks for potentially unsafe HTTP inputs that could be XSS attack vectors.\`</span></span> |
| <span data-ttu-id="6d01c-276">**Roteamento**</span><span class="sxs-lookup"><span data-stu-id="6d01c-276">**Routing**</span></span> | <span data-ttu-id="6d01c-277">Se você criar um site da Web do sistema de arquivos no Visual Studio 2010 e ele estiver em uma pasta que contenha um ponto (.) no nome da pasta, o roteamento de URL não funcionará com segurança.</span><span class="sxs-lookup"><span data-stu-id="6d01c-277">If you create a file system Web site in Visual Studio 2010 and the Web site is in a folder that contains a dot (.) in the folder name, URL routing will not work reliably.</span></span> <span data-ttu-id="6d01c-278">Um erro 404 de HTTP é retornado de alguns caminhos virtuais.</span><span class="sxs-lookup"><span data-stu-id="6d01c-278">An HTTP 404 error is returned from some virtual paths.</span></span> <span data-ttu-id="6d01c-279">Isso ocorre porque o Visual Studio 2010 abre o Visual Studio Development Server que usa um caminho incorreto para o diretório virtual raiz.</span><span class="sxs-lookup"><span data-stu-id="6d01c-279">This occurs because Visual Studio 2010 launches the Visual Studio Development Server using an incorrect path for the root virtual directory.</span></span> | <span data-ttu-id="6d01c-280">\* Na página **Propriedades** do site da Web baseado em arquivo, altere o atributo **Caminho virtual** para "/".</span><span class="sxs-lookup"><span data-stu-id="6d01c-280">\* In the **Properties** page for the file-based Web site, change the **Virtual Path** attribute to "/".</span></span><br><br><span data-ttu-id="6d01c-281">-ou-</span><span class="sxs-lookup"><span data-stu-id="6d01c-281">-or-</span></span><br><br><span data-ttu-id="6d01c-282">\* Crie um projeto de aplicativo Web em vez de um projeto de site da Web.</span><span class="sxs-lookup"><span data-stu-id="6d01c-282">\* Create a Web application project instead of a Web site project.</span></span> <span data-ttu-id="6d01c-283">Os projetos de aplicativo Web não apresentam esse problema e o roteamento de URL funcionará mesmo se a pasta de projeto tiver um ponto no nome.</span><span class="sxs-lookup"><span data-stu-id="6d01c-283">Web application projects do not have this issue, and URL routing works even if the project folder has a dot in its name.</span></span><br><br><span data-ttu-id="6d01c-284">-ou-</span><span class="sxs-lookup"><span data-stu-id="6d01c-284">-or-</span></span><br><br><span data-ttu-id="6d01c-285">\* Crie um site da Web baseado em HTTP hospedado no IIS.</span><span class="sxs-lookup"><span data-stu-id="6d01c-285">\* Create an HTTP-based Web site that is hosted in IIS.</span></span> <span data-ttu-id="6d01c-286">Os sites da Web hospedados pelo IIS podem ter pontos do caminho virtual, bem como a pasta do arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="6d01c-286">IIS-hosted Web sites can have dots in the virtual path as well as in the project file folder.</span></span> |
| <span data-ttu-id="6d01c-287">**Sites do SharePoint**</span><span class="sxs-lookup"><span data-stu-id="6d01c-287">**SharePoint sites**</span></span> | <span data-ttu-id="6d01c-288">Se você tentar executar um site da Web ASP.NET 4 implantado como filho de um site da Web do SharePoint que contém um nível de confiança parcial personalizado nomeado `WSS_Minimal`, você verá o seguinte erro:</span><span class="sxs-lookup"><span data-stu-id="6d01c-288">If you try to run an ASP.NET 4 Web site that is deployed as a child of a SharePoint Web site that contains a custom partial-trust level named `WSS_Minimal`, you will see the following error:</span></span><br><br>`Could not find permission set named 'ASP.Net'.` | <span data-ttu-id="6d01c-289">No momento, nenhuma versão do SharePoint é compatível com o ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6d01c-289">Currently, no versions of SharePoint are compatible with ASP.NET.</span></span> <span data-ttu-id="6d01c-290">Como resultado, você não deverá tentar executar um site da Web do ASP.NET 4 como um filho de um site da Web do SharePoint.</span><span class="sxs-lookup"><span data-stu-id="6d01c-290">As a result, you should not attempt to run an ASP.NET 4 Web site as a child of a SharePoint Web site.</span></span> |
| <span data-ttu-id="6d01c-291">**Padrões XHTML 1.1**</span><span class="sxs-lookup"><span data-stu-id="6d01c-291">**XHTML 1.1 standards**</span></span> | <span data-ttu-id="6d01c-292">Para habilitar a conformidade XHTML 1.1 para novos sites da Web, os controles ASP.NET no .NET Framework 4 gerarão HTML compatível com XHTML 1.1.</span><span class="sxs-lookup"><span data-stu-id="6d01c-292">To enable XHTML 1.1 compliance for new Web sites, the ASP.NET controls in the .NET Framework 4 will generate XHTML 1.1 compliant HTML.</span></span> <span data-ttu-id="6d01c-293">Essa renderização é habilitada usando a seguinte opção no arquivo Web.config dentro do elemento `<system.Web>`:</span><span class="sxs-lookup"><span data-stu-id="6d01c-293">This rendering is enabled using the following option in the Web.config file inside the `<system.Web>` element:</span></span><br><br>`<pages controlRenderingCompatibilityVersion="4.0"/>`<br><br><span data-ttu-id="6d01c-294">Essa opção é definida, por padrão, como 4.0.</span><span class="sxs-lookup"><span data-stu-id="6d01c-294">This option is set by default to 4.0.</span></span> <span data-ttu-id="6d01c-295">Os projetos da Web atualizados do Visual Studio 2008 têm a configuração 3.5 habilitada para compatibilidade.</span><span class="sxs-lookup"><span data-stu-id="6d01c-295">Web projects that are upgraded from Visual Studio 2008 have the 3.5 setting enabled for compatibility.</span></span> | <span data-ttu-id="6d01c-296">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-296">None.</span></span> |

## <a name="core"></a><span data-ttu-id="6d01c-297">Núcleo</span><span class="sxs-lookup"><span data-stu-id="6d01c-297">Core</span></span>

### <a name="general-features"></a><span data-ttu-id="6d01c-298">Recursos gerais</span><span class="sxs-lookup"><span data-stu-id="6d01c-298">General features</span></span>

| <span data-ttu-id="6d01c-299">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-299">Feature</span></span> | <span data-ttu-id="6d01c-300">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-300">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-301">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-301">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-302">**CardSpace**</span><span class="sxs-lookup"><span data-stu-id="6d01c-302">**CardSpace**</span></span> | <span data-ttu-id="6d01c-303">O Windows CardSpace não está mais incluído no .NET Framework; ele é fornecido separadamente.</span><span class="sxs-lookup"><span data-stu-id="6d01c-303">Windows CardSpace is no longer included in the .NET Framework; it is provided separately.</span></span> | <span data-ttu-id="6d01c-304">Baixe o Windows CardSpace do [Centro de Download da Microsoft](https://go.microsoft.com/fwlink/?LinkId=199868).</span><span class="sxs-lookup"><span data-stu-id="6d01c-304">Download Windows CardSpace from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?LinkId=199868).</span></span> |
| <span data-ttu-id="6d01c-305">**Arquivos de configuração**</span><span class="sxs-lookup"><span data-stu-id="6d01c-305">**Configuration files**</span></span> | <span data-ttu-id="6d01c-306">Foram feitas correções na maneira como o .NET Framework acessa os arquivos de configuração de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-306">Corrections have been made in how the .NET Framework accesses application configuration files.</span></span> | <span data-ttu-id="6d01c-307">Se o arquivo de configuração de aplicativo for nomeado *application-name.config*, renomeie-o como *application-name.exe.config*. Por exemplo, renomeie *MyApp.config* como *MyApp.exe.config*.</span><span class="sxs-lookup"><span data-stu-id="6d01c-307">If your application configuration file is named *application-name.config*, rename it to *application-name.exe.config*. For example, rename *MyApp.config* to *MyApp.exe.config*.</span></span> |
| <span data-ttu-id="6d01c-308">**Compilador de código C#**</span><span class="sxs-lookup"><span data-stu-id="6d01c-308">**C# code compiler**</span></span> | <span data-ttu-id="6d01c-309">As classes `Compiler`, `CompilerError` e `ErrorLevel` que estavam no namespace <xref:Microsoft.CSharp> não estão mais disponíveis e seu assembly (cscompmgd.dll) não está mais incluído no .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6d01c-309">The `Compiler`, `CompilerError`, and `ErrorLevel` classes that were in the <xref:Microsoft.CSharp> namespace are no longer available, and their assembly (cscompmgd.dll) is no longer included in the .NET Framework.</span></span> | <span data-ttu-id="6d01c-310">Use a classe <xref:System.CodeDom.Compiler.CodeDomProvider> e outras classes no namespace <xref:System.CodeDom.Compiler>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-310">Use the <xref:System.CodeDom.Compiler.CodeDomProvider> class and other classes in the <xref:System.CodeDom.Compiler> namespace.</span></span> <span data-ttu-id="6d01c-311">Para obter mais informações, consulte [Usando o CodeDOM](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/y2k85ax6%28v=vs.100%29).</span><span class="sxs-lookup"><span data-stu-id="6d01c-311">For more information, see [Using the CodeDOM](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/y2k85ax6%28v=vs.100%29).</span></span> |
| <span data-ttu-id="6d01c-312">**Hospedagem** (API não gerenciada)</span><span class="sxs-lookup"><span data-stu-id="6d01c-312">**Hosting** (unmanaged API)</span></span> | <span data-ttu-id="6d01c-313">Para melhorar os recursos de hospedagem, algumas APIs de ativação de hospedagem foram preteridas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-313">To improve hosting capabilities, some of the hosting activation APIs have been deprecated.</span></span> <span data-ttu-id="6d01c-314">Os recursos de execução lado a lado em processo permitem que um aplicativo carregue e inicie várias versões do .NET Framework no mesmo processo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-314">In-process side-by-side execution features enable an application to load and start multiple versions of the .NET Framework in the same process.</span></span> <span data-ttu-id="6d01c-315">Por exemplo, é possível executar aplicativos que carregam suplementos (ou componentes) baseados no .NET Framework 2.0 SP1 e os suplementos baseados no .NET Framework 4 no mesmo processo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-315">For example, you can run applications that load add-ins (or components) that are based on the .NET Framework 2.0 SP1 and add-ins that are based on the .NET Framework 4 in the same process.</span></span> <span data-ttu-id="6d01c-316">Componentes mais antigos continuam usando a versão mais antiga do .NET Framework e os novos usam a nova versão do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6d01c-316">Older components continue to use the older .NET Framework version, and new components use the new .NET Framework version.</span></span> | <span data-ttu-id="6d01c-317">Use as configurações descritas na [Execução lado a lado em processo](../../../docs/framework/deployment/in-process-side-by-side-execution.md).</span><span class="sxs-lookup"><span data-stu-id="6d01c-317">Use the configurations described in [In-Process Side-by-Side Execution](../../../docs/framework/deployment/in-process-side-by-side-execution.md).</span></span> |
| <span data-ttu-id="6d01c-318">**Novo modelo de segurança**</span><span class="sxs-lookup"><span data-stu-id="6d01c-318">**New security model**</span></span> | <span data-ttu-id="6d01c-319">A política de CAS (Segurança de Acesso do Código) foi desativada e substituída por um modelo simplificado, conforme descrito em [Security Changes in the .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd233103%28v=vs.100%29) (Alterações de segurança no .NET Framework 4).</span><span class="sxs-lookup"><span data-stu-id="6d01c-319">The code access security (CAS) policy has been turned off and replaced with a simplified model, as described in [Security Changes in the .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd233103%28v=vs.100%29).</span></span> | <span data-ttu-id="6d01c-320">Talvez sejam necessárias modificações se você depender do CAS em seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="6d01c-320">Modifications may be required if you depend on CAS in your applications.</span></span> <span data-ttu-id="6d01c-321">Para obter mais informações, consulte [Compatibilidade de política de segurança de acesso de código e migração](../../../docs/framework/misc/code-access-security-policy-compatibility-and-migration.md).</span><span class="sxs-lookup"><span data-stu-id="6d01c-321">For more information, see [Code Access Security Policy Compatibility and Migration](../../../docs/framework/misc/code-access-security-policy-compatibility-and-migration.md).</span></span> |

### <a name="date-and-time"></a><span data-ttu-id="6d01c-322">Data e Hora</span><span class="sxs-lookup"><span data-stu-id="6d01c-322">Date and time</span></span>

<span data-ttu-id="6d01c-323">Namespace: <xref:System>; assembly: mscorlib (em mscorlib.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-323">Namespace: <xref:System>; assembly: mscorlib (in mscorlib.dll)</span></span>

| <span data-ttu-id="6d01c-324">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-324">Feature</span></span> | <span data-ttu-id="6d01c-325">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-325">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-326">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-326">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-327">**Horário de verão**</span><span class="sxs-lookup"><span data-stu-id="6d01c-327">**Daylight savings**</span></span> | <span data-ttu-id="6d01c-328">Para ser consistente com o relógio do sistema, agora as propriedades de tempo (como <xref:System.TimeZoneInfo.Local> e <xref:System.DateTime.Now>) usam regras do sistema operacional, em vez de outros dados do .NET Framework para operações de horário de verão.</span><span class="sxs-lookup"><span data-stu-id="6d01c-328">To be consistent with the system clock, time properties (such as <xref:System.TimeZoneInfo.Local> and <xref:System.DateTime.Now>) now use operating system rules instead of other .NET Framework data for daylight saving time operations.</span></span> | <span data-ttu-id="6d01c-329">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-329">None.</span></span> |
| <span data-ttu-id="6d01c-330">**Formatação de cadeia de caracteres**</span><span class="sxs-lookup"><span data-stu-id="6d01c-330">**Formatting strings**</span></span> | <span data-ttu-id="6d01c-331">Para dar suporte à formatação que faz diferenciação de culturas, a estrutura <xref:System.TimeSpan> inclui novas sobrecargas dos métodos `ToString`, `Parse` e `TryParse` além dos novos métodos `ParseExact` e `TryParseExact`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-331">To support culture-sensitive formatting, the <xref:System.TimeSpan> structure includes new overloads of the `ToString`, `Parse`, and `TryParse` methods in addition to new `ParseExact` and `TryParseExact` methods.</span></span> | <span data-ttu-id="6d01c-332">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-332">None.</span></span> |


### <a name="globalization"></a><span data-ttu-id="6d01c-333">Globalização</span><span class="sxs-lookup"><span data-stu-id="6d01c-333">Globalization</span></span>

<span data-ttu-id="6d01c-334">Para obter uma lista de novas culturas neutras e específicas, consulte [Novidades sobre globalização e localização](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd997383%28v=vs.100%29).</span><span class="sxs-lookup"><span data-stu-id="6d01c-334">For a list of new neutral and specific cultures, see [What's New in Globalization and Localization](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd997383%28v=vs.100%29).</span></span>

<span data-ttu-id="6d01c-335">Namespace: <xref:System.Globalization>; assembly: mscorlib (em mscorlib.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-335">Namespace: <xref:System.Globalization>; assembly: mscorlib (in mscorlib.dll)</span></span>

| <span data-ttu-id="6d01c-336">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-336">Feature</span></span> | <span data-ttu-id="6d01c-337">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-337">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-338">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-338">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-339">**Nomes de cultura**</span><span class="sxs-lookup"><span data-stu-id="6d01c-339">**Culture names**</span></span> | <span data-ttu-id="6d01c-340">As alterações de nome a seguir afetam as culturas alemã, divehi e africana:</span><span class="sxs-lookup"><span data-stu-id="6d01c-340">The following name changes affect the German, Divehi, and African cultures:</span></span><br><br><span data-ttu-id="6d01c-341">\* <xref:System.Globalization.CultureAndRegionInfoBuilder.CurrencyEnglishName>: o nome da moeda para a cultura alemã (Suíça) (de-CH) foi alterado de "sFr."</span><span class="sxs-lookup"><span data-stu-id="6d01c-341">\* <xref:System.Globalization.CultureAndRegionInfoBuilder.CurrencyEnglishName>: The currency name for the German (Switizerland) (de-CH) culture has changed from "sFr."</span></span> <span data-ttu-id="6d01c-342">para "Fr.".</span><span class="sxs-lookup"><span data-stu-id="6d01c-342">to "Fr.".</span></span><br><span data-ttu-id="6d01c-343">\* <xref:System.Globalization.DateTimeFormatInfo.LongDatePattern>: o padrão de data longo para a cultura divehi (Maldivas) (dv-MV) foi alterado de "dd/MMMM/aaaa" para "dd/MM/aaaa".</span><span class="sxs-lookup"><span data-stu-id="6d01c-343">\* <xref:System.Globalization.DateTimeFormatInfo.LongDatePattern>: The long date pattern for the Divehi (Maldives) (dv-MV) culture has changed from "dd/MMMM/yyyy" to "dd/MM/yyyy".</span></span><br><span data-ttu-id="6d01c-344">\* <xref:System.Globalization.DateTimeFormatInfo.PMDesignator>: o designador</span><span class="sxs-lookup"><span data-stu-id="6d01c-344">\* <xref:System.Globalization.DateTimeFormatInfo.PMDesignator>: The P.M.</span></span> <span data-ttu-id="6d01c-345">P.M. da cultura africâner (África do Sul) (af-ZA) foi alterado de "nm" para "PM".</span><span class="sxs-lookup"><span data-stu-id="6d01c-345">designator of the Afrikaans (South Africa) (af-ZA) culture has changed from "nm" to "PM".</span></span> | <span data-ttu-id="6d01c-346">Observe as alterações no nome da cultura.</span><span class="sxs-lookup"><span data-stu-id="6d01c-346">Note culture name changes.</span></span> |
| <span data-ttu-id="6d01c-347">**Parâmetro LCID**</span><span class="sxs-lookup"><span data-stu-id="6d01c-347">**LCID parameter**</span></span> | <span data-ttu-id="6d01c-348">Para ser consistente com o comportamento esperado nas configurações do servidor de automação, o CLR não passa mais a cultura atual para o parâmetro `LCID` para aplicativos baseados em COM não gerenciados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-348">To be consistent with expected behavior in automation server settings, the CLR no longer passes the current culture for the `LCID` parameter to unmanaged COM-based applications.</span></span> <span data-ttu-id="6d01c-349">Em vez disso, ele passa 1033 (en-us) para a cultura.</span><span class="sxs-lookup"><span data-stu-id="6d01c-349">Instead, it passes 1033 (en-us) for the culture.</span></span> | <span data-ttu-id="6d01c-350">Nenhuma modificação necessária, exceto para aplicativos nativos que exigem uma cultura especificada.</span><span class="sxs-lookup"><span data-stu-id="6d01c-350">No modifications necessary except for native applications that require a specified culture.</span></span> |
| <span data-ttu-id="6d01c-351">**Tipos de cultura obsoletos**</span><span class="sxs-lookup"><span data-stu-id="6d01c-351">**Obsolete culture types**</span></span> | <span data-ttu-id="6d01c-352">Agora os tipos de cultura <xref:System.Globalization.CultureTypes> e <xref:System.Globalization.CultureTypes> estão obsoletos.</span><span class="sxs-lookup"><span data-stu-id="6d01c-352">The <xref:System.Globalization.CultureTypes> and <xref:System.Globalization.CultureTypes> culture types are now obsolete.</span></span><br><br><span data-ttu-id="6d01c-353">Para compatibilidade com versões anteriores, agora o <xref:System.Globalization.CultureTypes> retorna culturas neutras e específicos incluídas com a versão anterior do .NET Framework e agora o <xref:System.Globalization.CultureTypes> retorna uma lista vazia.</span><span class="sxs-lookup"><span data-stu-id="6d01c-353">For backward compatibility, <xref:System.Globalization.CultureTypes> now returns neutral and specific cultures that were included with the previous .NET Framework, and <xref:System.Globalization.CultureTypes> now returns an empty list.</span></span> | <span data-ttu-id="6d01c-354">Use outros valores da enumeração <xref:System.Globalization.CultureTypes>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-354">Use other values of the <xref:System.Globalization.CultureTypes> enumeration.</span></span> |
| <span data-ttu-id="6d01c-355">**Recuperação da cultura**</span><span class="sxs-lookup"><span data-stu-id="6d01c-355">**Retrieving culture**</span></span> | <span data-ttu-id="6d01c-356">A partir do Windows 7, o .NET Framework 4 recupera informações de cultura do sistema operacional em vez de armazenar os dados em si.</span><span class="sxs-lookup"><span data-stu-id="6d01c-356">Beginning with Windows 7, the .NET Framework 4 retrieves culture information from the operating system instead of storing the data itself.</span></span> <span data-ttu-id="6d01c-357">Além disso, o .NET Framework sincroniza com o Windows para classificar e alojar dados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-357">In addition, the .NET Framework synchronizes with Windows for sorting and casing data.</span></span> | <span data-ttu-id="6d01c-358">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-358">None.</span></span> |
| <span data-ttu-id="6d01c-359">**Padrões Unicode 5.1**</span><span class="sxs-lookup"><span data-stu-id="6d01c-359">**Unicode 5.1 standards**</span></span> | <span data-ttu-id="6d01c-360">Agora o .NET Framework dá suporte a todos os caracteres Unicode 5.1 – uma acréscimo de aproximadamente 1400 caracteres.</span><span class="sxs-lookup"><span data-stu-id="6d01c-360">The .NET Framework now supports all Unicode 5.1 characters -- an addition of approximately 1400 characters.</span></span> <span data-ttu-id="6d01c-361">Os caracteres adicionais incluem novos símbolos, setas, marcas diacríticas, pontuação, símbolos matemáticos, ideogramas e traços CJK, caracteres numéricos malaiala e télugo adicionais e vários caracteres birmanês, latino, árabe, grego, mongol e cirílico adicionais.</span><span class="sxs-lookup"><span data-stu-id="6d01c-361">The additional characters include new symbols, arrows, diacritics, punctuation, mathematical symbols, CJK strokes and ideographs, additional Malayalam and Telugu numeric characters, and various Myanmar, Latin, Arabic, Greek, Mongolian, and Cyrillic characters.</span></span> <span data-ttu-id="6d01c-362">Há suporte para os novos scripts a seguir com Unicode 5.1: caracteres sudanês, lepcha, ol chiki, vai, saurashtra, kayah li, rejang, gurmukhi, odia, tâmil, télugo e malaiala e Cham.</span><span class="sxs-lookup"><span data-stu-id="6d01c-362">The following new scripts are supported with Unicode 5.1: Sundanese, Lepcha, Ol Chiki, Vai, Saurashtra, Kayah Li, Rejang, Gurmukhi, Odia, Tamil, Telugu, and Malayalam characters and Cham.</span></span> | <span data-ttu-id="6d01c-363">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-363">None.</span></span> |

### <a name="exceptions"></a><span data-ttu-id="6d01c-364">Exceções</span><span class="sxs-lookup"><span data-stu-id="6d01c-364">Exceptions</span></span>

<span data-ttu-id="6d01c-365">Namespace: <xref:System>, <xref:System.Runtime.ExceptionServices>; assembly: mscorlib (em mscorlib.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-365">Namespaces: <xref:System>, <xref:System.Runtime.ExceptionServices>; assembly: mscorlib (in mscorlib.dll)</span></span>

| <span data-ttu-id="6d01c-366">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-366">Feature</span></span> | <span data-ttu-id="6d01c-367">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-367">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-368">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-368">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-369">**Exceções do estado de processo corrompido**</span><span class="sxs-lookup"><span data-stu-id="6d01c-369">**Exceptions for corrupted process state**</span></span> | <span data-ttu-id="6d01c-370">O CLR não oferece mais exceções do estado de processo corrompido a manipuladores de exceção no código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-370">The CLR no longer delivers exceptions for corrupted process state to exception handlers in managed code.</span></span> | <span data-ttu-id="6d01c-371">Essas exceções indicam que o estado de um processo foi corrompido.</span><span class="sxs-lookup"><span data-stu-id="6d01c-371">These exceptions indicate that the state of a process has been corrupted.</span></span> <span data-ttu-id="6d01c-372">Não é recomendável executar o aplicativo nesse estado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-372">We do not recommend that you run your application in this state.</span></span><br><br><span data-ttu-id="6d01c-373">Para obter mais informações, consulte o <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> e a entrada [Handling Corrupted State Exceptions](https://go.microsoft.com/fwlink/?LinkID=179681) (Tratamento de exceções de estado corrompido) no blog CLR Inside Out.</span><span class="sxs-lookup"><span data-stu-id="6d01c-373">For more information, see the <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> and the entry [Handling Corrupted State Exceptions](https://go.microsoft.com/fwlink/?LinkID=179681) in the CLR Inside Out blog.</span></span> |
| <span data-ttu-id="6d01c-374">**Exceções do mecanismo de execução**</span><span class="sxs-lookup"><span data-stu-id="6d01c-374">**Execution engine exceptions**</span></span> | <span data-ttu-id="6d01c-375">Agora o <xref:System.ExecutionEngineException> é obsoleto, porque uma exceção capturável permitirá que um processo instável continue sendo executado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-375"><xref:System.ExecutionEngineException> is now obsolete, because a catchable exception will allow an unstable process to continue to run.</span></span> <span data-ttu-id="6d01c-376">Essa alteração melhora a confiabilidade e a previsibilidade no tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="6d01c-376">This change improves predictability and reliability in the runtime.</span></span> | <span data-ttu-id="6d01c-377">Use um <xref:System.InvalidOperationException> para indicar a condição.</span><span class="sxs-lookup"><span data-stu-id="6d01c-377">Use an <xref:System.InvalidOperationException> to signal the condition.</span></span> |

### <a name="reflection"></a><span data-ttu-id="6d01c-378">Reflexão</span><span class="sxs-lookup"><span data-stu-id="6d01c-378">Reflection</span></span>

<span data-ttu-id="6d01c-379">Namespace: <xref:System.Reflection>; assembly: mscorlib (em mscorlib.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-379">Namespace: <xref:System.Reflection>; assembly: mscorlib (in mscorlib.dll)</span></span>

| <span data-ttu-id="6d01c-380">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-380">Feature</span></span> | <span data-ttu-id="6d01c-381">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-381">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-382">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-382">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-383">**Algoritmos de hash do assembly**</span><span class="sxs-lookup"><span data-stu-id="6d01c-383">**Assembly hash algorithms**</span></span> | <span data-ttu-id="6d01c-384">A propriedade <xref:System.Reflection.AssemblyName.HashAlgorithm> retorna <xref:System.Configuration.Assemblies.AssemblyHashAlgorithm>, pois o tempo de execução não conhece o algoritmo de hash do assembly referenciado quando o assembly não está carregado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-384">The <xref:System.Reflection.AssemblyName.HashAlgorithm> property now returns <xref:System.Configuration.Assemblies.AssemblyHashAlgorithm>, because the runtime does not know the hash algorithm of the referenced assembly when the assembly is not loaded.</span></span> <span data-ttu-id="6d01c-385">(Isso se refere ao uso da propriedade em um assembly referenciado como o retornado pelo método <xref:System.Reflection.Assembly.GetReferencedAssemblies%2A>.)</span><span class="sxs-lookup"><span data-stu-id="6d01c-385">(This refers to using the property on a referenced assembly such as that returned by the <xref:System.Reflection.Assembly.GetReferencedAssemblies%2A> method.)</span></span> | <span data-ttu-id="6d01c-386">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-386">None.</span></span> |
| <span data-ttu-id="6d01c-387">**Carregamento de assembly**</span><span class="sxs-lookup"><span data-stu-id="6d01c-387">**Assembly loading**</span></span> | <span data-ttu-id="6d01c-388">Para evitar o carregamento redundante de assemblies e para poupar espaço de endereço virtual, agora o CLR carrega assemblies usando apenas a função `MapViewOfFile` Win32.</span><span class="sxs-lookup"><span data-stu-id="6d01c-388">To prevent redundant loading of assemblies and to save virtual address space, the CLR now loads assemblies by using only the Win32 `MapViewOfFile` function.</span></span> <span data-ttu-id="6d01c-389">Ele também não chama mais a função `LoadLibrary`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-389">It no longer also calls the `LoadLibrary` function.</span></span><br><br><span data-ttu-id="6d01c-390">Essa alteração afeta os aplicativos de diagnóstico das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="6d01c-390">This change affects diagnostic applications in the following ways:</span></span><br><br><span data-ttu-id="6d01c-391">\* Um <xref:System.Diagnostics.ProcessModuleCollection> não conterá mais módulos de uma biblioteca de classes (arquivo .dll), conforme obtido de uma chamada para `Process.GetCurrentProcess().Modules`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-391">\* A <xref:System.Diagnostics.ProcessModuleCollection> will no longer contain any modules from a class library (.dll file), as obtained from a call to `Process.GetCurrentProcess().Modules`.</span></span><br><span data-ttu-id="6d01c-392">\* Os aplicativos Win32 que usam a função `EnumProcessModules` não verão todos módulos gerenciados listados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-392">\* Win32 applications that use the `EnumProcessModules` function will not see all managed modules listed.</span></span> | <span data-ttu-id="6d01c-393">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-393">None.</span></span> |
| <span data-ttu-id="6d01c-394">**Tipo declarativo**</span><span class="sxs-lookup"><span data-stu-id="6d01c-394">**Declaring type**</span></span> | <span data-ttu-id="6d01c-395">Agora a propriedade <xref:System.Type.DeclaringType> retorna null corretamente quando o tipo não tem um tipo declarativo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-395">The <xref:System.Type.DeclaringType> property now correctly returns null when the type does not have a declaring type.</span></span> | <span data-ttu-id="6d01c-396">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-396">None.</span></span> |
| <span data-ttu-id="6d01c-397">**Delegados**</span><span class="sxs-lookup"><span data-stu-id="6d01c-397">**Delegates**</span></span> | <span data-ttu-id="6d01c-398">Agora um delegado gera um <xref:System.ArgumentNullException> em vez de um <xref:System.NullReferenceException> quando um valor null é passado para o construtor do delegado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-398">A delegate now throws an <xref:System.ArgumentNullException> instead of a <xref:System.NullReferenceException> when a null value is passed to the delegate's constructor.</span></span> | <span data-ttu-id="6d01c-399">Certifique-se de que qualquer tratamento de exceção capture <xref:System.ArgumentNullException>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-399">Ensure that any exception handling catches <xref:System.ArgumentNullException>.</span></span> |
| <span data-ttu-id="6d01c-400">**Alteração no local do cache de assembly global**</span><span class="sxs-lookup"><span data-stu-id="6d01c-400">**Global assembly cache location change**</span></span> | <span data-ttu-id="6d01c-401">Para assemblies do .NET Framework 4, o cache de assembly global foi movido do diretório Windows (%WINDIR%) para o subdiretório Microsoft.Net (*%WINDIR%\\Microsoft.Net*).</span><span class="sxs-lookup"><span data-stu-id="6d01c-401">For .NET Framework 4 assemblies, the global assembly cache has been moved from the Windows directory (%WINDIR%) to the Microsoft.Net subdirectory (*%WINDIR%\\Microsoft.Net*).</span></span> <span data-ttu-id="6d01c-402">Os assemblies de versões anteriores continuam no diretório mais antigo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-402">Assemblies from earlier versions remain in the older directory.</span></span><br><br><span data-ttu-id="6d01c-403">A enumeração [ASM_CACHE_FLAGS](../unmanaged-api/fusion/asm-cache-flags-enumeration.md) não gerenciada contém o novo sinalizador `ASM_CACHE_ROOT_EX`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-403">The unmanaged [ASM_CACHE_FLAGS](../unmanaged-api/fusion/asm-cache-flags-enumeration.md) enumeration contains the new `ASM_CACHE_ROOT_EX` flag.</span></span> <span data-ttu-id="6d01c-404">Esse sinalizador obtém o local do cache para assemblies do .NET Framework 4, que podem ser obtidos pela função [GetCachePath](../unmanaged-api/fusion/getcachepath-function.md).</span><span class="sxs-lookup"><span data-stu-id="6d01c-404">This flag gets the cache location for .NET Framework 4 assemblies, which can be obtained by the [GetCachePath](../unmanaged-api/fusion/getcachepath-function.md) function.</span></span> | <span data-ttu-id="6d01c-405">Nenhum, supondo que os aplicativos não usam caminhos explícitos para assemblies, que não é uma prática recomendada.</span><span class="sxs-lookup"><span data-stu-id="6d01c-405">None, assuming that applications do not use explicit paths to assemblies, which is not a recommended practice.</span></span> |
| <span data-ttu-id="6d01c-406">**Ferramenta do cache de assembly global**</span><span class="sxs-lookup"><span data-stu-id="6d01c-406">**Global assembly cache tool**</span></span> | <span data-ttu-id="6d01c-407">A [Gacutil.exe (Ferramenta do cache de assembly global)](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ex0ss12c%28v=vs.100%29) não dá mais suporte ao visualizador de plugin shell.</span><span class="sxs-lookup"><span data-stu-id="6d01c-407">The [Gacutil.exe (Global Assembly Cache Tool)](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ex0ss12c%28v=vs.100%29) no longer supports the shell plugin viewer.</span></span> | <span data-ttu-id="6d01c-408">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-408">None.</span></span> |

### <a name="interoperability"></a><span data-ttu-id="6d01c-409">Interoperabilidade</span><span class="sxs-lookup"><span data-stu-id="6d01c-409">Interoperability</span></span>

<span data-ttu-id="6d01c-410">Namespace: <xref:System.Runtime.InteropServices>; assembly: mscorlib (em mscorlib.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-410">Namespace: <xref:System.Runtime.InteropServices>; assembly: mscorlib (in mscorlib.dll)</span></span>

| <span data-ttu-id="6d01c-411">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-411">Feature</span></span> | <span data-ttu-id="6d01c-412">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-412">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-413">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-413">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-414">**Tamanho do buffer** (API não gerenciada)</span><span class="sxs-lookup"><span data-stu-id="6d01c-414">**Buffer length** (unmanaged API)</span></span> | <span data-ttu-id="6d01c-415">Para economizar memória, a funcionalidade do parâmetro `pBufferLengthOffset` para o método [ICorProfilerInfo2::GetStringLayout](../unmanaged-api/profiling/icorprofilerinfo2-getstringlayout-method.md) foi alterada para corresponder ao parâmetro `pStringLengthOffset`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-415">To save memory, the functionality for the `pBufferLengthOffset` parameter for the [ICorProfilerInfo2::GetStringLayout](../unmanaged-api/profiling/icorprofilerinfo2-getstringlayout-method.md) method has been changed to match the `pStringLengthOffset` parameter.</span></span> <span data-ttu-id="6d01c-416">Ambos os parâmetros agora apontam para o local de deslocamento do tamanho da cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="6d01c-416">Both parameters now point to the offset location of the string's length.</span></span> <span data-ttu-id="6d01c-417">O tamanho do buffer foi removido da representação da classe da cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="6d01c-417">Buffer length has been removed from the representation of the string class.</span></span> | <span data-ttu-id="6d01c-418">Remova qualquer dependência do tamanho do buffer.</span><span class="sxs-lookup"><span data-stu-id="6d01c-418">Remove any dependency on the buffer length.</span></span> |
| <span data-ttu-id="6d01c-419">**Depuração JIT**</span><span class="sxs-lookup"><span data-stu-id="6d01c-419">**JIT debugging**</span></span> | <span data-ttu-id="6d01c-420">Para simplificar o registro de depuração JIT (Just-In-Time), agora o depurador do .NET Framework usa apenas a chave do Registro AeDebug, que controla o comportamento de depuração JIT para o código nativo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-420">To simplify registration for just-in-time (JIT) debugging, the .NET Framework debugger now uses only the AeDebug registry key, which controls the JIT debugging behavior for native code.</span></span> <span data-ttu-id="6d01c-421">Essa alteração resulta no seguinte:</span><span class="sxs-lookup"><span data-stu-id="6d01c-421">This change results in the following:</span></span><br><br><span data-ttu-id="6d01c-422">\* Não é mais possível registrar dois depuradores diferentes para código gerenciado e nativo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-422">\* You can no longer register two different debuggers for managed and native code.</span></span><br><span data-ttu-id="6d01c-423">\* Não é mais possível iniciar o depurador automaticamente para um processo não interativo, mas é possível notificar o usuário para um processo interativo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-423">\* You can no longer start the debugger automatically for a non-interactive process, but you can prompt the user for an interactive process.</span></span><br><span data-ttu-id="6d01c-424">\* Você não será mais notificado quando o depurador falhar ao iniciar ou quando não houver depurador registrado que deva ser iniciado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-424">\* You are no longer notified when the debugger fails to start, or when there is no registered debugger that should be started.</span></span><br><span data-ttu-id="6d01c-425">\* Não há mais suporte a políticas de início automático que dependem da interatividade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-425">\* Auto-launch policies that depend on the interactivity of the application are no longer supported.</span></span> | <span data-ttu-id="6d01c-426">Ajuste as operações de depuração conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="6d01c-426">Adjust debugging operations as required.</span></span> |
| <span data-ttu-id="6d01c-427">**Invocação de plataforma**</span><span class="sxs-lookup"><span data-stu-id="6d01c-427">**Platform invoke**</span></span> | <span data-ttu-id="6d01c-428">Para melhorar o desempenho na interoperabilidade com código não gerenciado, agora as convenções de chamada incorretas em uma invocação de plataforma geram falhas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-428">To improve performance in interoperability with unmanaged code, incorrect calling conventions in a platform invoke now cause the application to fail.</span></span> <span data-ttu-id="6d01c-429">Nas versões anteriores, a camada de marshaling resolvia esses erros na pilha.</span><span class="sxs-lookup"><span data-stu-id="6d01c-429">In previous versions, the marshaling layer resolved these errors up the stack.</span></span> | <span data-ttu-id="6d01c-430">A depuração dos seus aplicativos no Microsoft Visual Studio alertam você sobre esses erros para que você possa corrigi-los.</span><span class="sxs-lookup"><span data-stu-id="6d01c-430">Debugging your applications in Microsoft Visual Studio alerts you to these errors so you can correct them.</span></span><br><br><span data-ttu-id="6d01c-431">Se você tiver binários que não podem ser atualizados, será possível incluir o elemento [\<NetFx40_PInvokeStackResilience>](../configure-apps/file-schema/runtime/netfx40-pinvokestackresilience-element.md) no arquivo de configuração do seu aplicativo para permitir que erros de chamada sejam resolvidos na pilha como nas versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="6d01c-431">If you have binaries that cannot be updated, you can include the [\<NetFx40_PInvokeStackResilience>](../configure-apps/file-schema/runtime/netfx40-pinvokestackresilience-element.md) element in your application's configuration file to enable calling errors to be resolved up the stack as in earlier versions.</span></span> <span data-ttu-id="6d01c-432">No entanto, isso pode afetar o desempenho do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6d01c-432">However, this may affect the performance of your application.</span></span> |
| <span data-ttu-id="6d01c-433">**Interfaces removidas** (API não gerenciada)</span><span class="sxs-lookup"><span data-stu-id="6d01c-433">**Removed interfaces** (unmanaged API)</span></span> | <span data-ttu-id="6d01c-434">Para evitar que os desenvolvedores se confundam, as interfaces a seguir foram removidas porque elas não forneciam nenhum cenário de tempo de execução útil e o CLR não fornecia nem aceitava nenhuma implementação:</span><span class="sxs-lookup"><span data-stu-id="6d01c-434">To avoid developer confusion, the following interfaces were removed, because they did not provide any useful run-time scenarios, and the CLR did not provide or accept any implementations:</span></span><br><br><span data-ttu-id="6d01c-435">\* **INativeImageINativeImageDependency**</span><span class="sxs-lookup"><span data-stu-id="6d01c-435">\* **INativeImageINativeImageDependency**</span></span><br><span data-ttu-id="6d01c-436">\* **INativeImageInstallInfo**</span><span class="sxs-lookup"><span data-stu-id="6d01c-436">\* **INativeImageInstallInfo**</span></span><br><span data-ttu-id="6d01c-437">\* **INativeImageEvaluate**</span><span class="sxs-lookup"><span data-stu-id="6d01c-437">\* **INativeImageEvaluate**</span></span><br><span data-ttu-id="6d01c-438">\* **INativeImageConverter**</span><span class="sxs-lookup"><span data-stu-id="6d01c-438">\* **INativeImageConverter**</span></span><br><span data-ttu-id="6d01c-439">\* **ICorModule**</span><span class="sxs-lookup"><span data-stu-id="6d01c-439">\* **ICorModule**</span></span><br><span data-ttu-id="6d01c-440">\* **IMetaDataConverter**</span><span class="sxs-lookup"><span data-stu-id="6d01c-440">\* **IMetaDataConverter**</span></span> | <span data-ttu-id="6d01c-441">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-441">None.</span></span> |

## <a name="data"></a><span data-ttu-id="6d01c-442">Dados</span><span class="sxs-lookup"><span data-stu-id="6d01c-442">Data</span></span>

<span data-ttu-id="6d01c-443">Esta seção descreve problemas de migração para usar conjuntos de dados e clientes SQL, o Entity Framework, LINQ to SQL e os servidores de dados WCF (anteriormente conhecidos como Serviços de Dados ADO.NET).</span><span class="sxs-lookup"><span data-stu-id="6d01c-443">This section describes migration issues for using data sets and SQL clients, the Entity Framework, LINQ to SQL, and WCF Data Servers (formerly known as ADO.NET Data Services).</span></span>

### <a name="dataset-and-sql-client"></a><span data-ttu-id="6d01c-444">DataSet and Cliente do SQL</span><span class="sxs-lookup"><span data-stu-id="6d01c-444">DataSet and SQL Client</span></span>

<span data-ttu-id="6d01c-445">A tabela a seguir descreve melhorias em recursos que anteriormente tinham limitações ou outros problemas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-445">The following table describes improvements to features that previously had limitations or other issues.</span></span>

<span data-ttu-id="6d01c-446">Namespaces: <xref:System.Data>, <xref:System.Data.Objects.DataClasses>, <xref:System.Data.SqlClient>; assemblies: System. Data (em System.Data.dll), System.Data.Entity (em System.Data.Entity.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-446">Namespaces: <xref:System.Data>, <xref:System.Data.Objects.DataClasses>, <xref:System.Data.SqlClient>; assemblies: System.Data (in System.Data.dll), System.Data.Entity (in System.Data.Entity.dll)</span></span>

| <span data-ttu-id="6d01c-447">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-447">Feature</span></span> | <span data-ttu-id="6d01c-448">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-448">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="6d01c-449">**Cenários POCO**</span><span class="sxs-lookup"><span data-stu-id="6d01c-449">**POCO Scenarios**</span></span> | <span data-ttu-id="6d01c-450">A interface <xref:System.Data.Objects.DataClasses.IRelatedEnd> tem novos métodos para melhorar seu uso em cenários POCO (Objeto CLR Básico).</span><span class="sxs-lookup"><span data-stu-id="6d01c-450">The <xref:System.Data.Objects.DataClasses.IRelatedEnd> interface has new methods to improve its usability in Plain Old CLR Object (POCO) scenarios.</span></span> <span data-ttu-id="6d01c-451">Esses novos métodos usam um <xref:System.Object> em vez de uma entidade <xref:System.Data.Objects.DataClasses.IEntityWithRelationships> como parâmetro.</span><span class="sxs-lookup"><span data-stu-id="6d01c-451">These new methods take an <xref:System.Object> instead of an <xref:System.Data.Objects.DataClasses.IEntityWithRelationships> entity as a parameter.</span></span> |
| <span data-ttu-id="6d01c-452">**Edição de linhas**</span><span class="sxs-lookup"><span data-stu-id="6d01c-452">**Editing Rows**</span></span> | <span data-ttu-id="6d01c-453">O método <xref:System.Collections.IList.IndexOf%2A>, conforme implementado pela classe <xref:System.Data.DataView>, agora retorna corretamente o valor de uma linha que está sendo editada, em vez de retornar -1.</span><span class="sxs-lookup"><span data-stu-id="6d01c-453">The <xref:System.Collections.IList.IndexOf%2A> method, as implemented by the <xref:System.Data.DataView> class, now correctly returns the value of a row that is being edited, instead of returning -1.</span></span> |
| <span data-ttu-id="6d01c-454">**Eventos**</span><span class="sxs-lookup"><span data-stu-id="6d01c-454">**Events**</span></span> | <span data-ttu-id="6d01c-455">Agora o evento <xref:System.Data.DataRowView.PropertyChanged> é gerado quando uma linha está em um estado modificado e o método <xref:System.Data.DataRow.RejectChanges%2A> é chamado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-455">The <xref:System.Data.DataRowView.PropertyChanged> event is now raised when a row is in a modified state and the <xref:System.Data.DataRow.RejectChanges%2A> method is called.</span></span> <span data-ttu-id="6d01c-456">Essa alteração facilita a criação de controles de interface do usuário que expõem o conteúdo de um objeto <xref:System.Data.DataSet>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-456">This change makes it easier to create UI controls that expose the contents of a <xref:System.Data.DataSet> object.</span></span> |
| <span data-ttu-id="6d01c-457">**Exceções**</span><span class="sxs-lookup"><span data-stu-id="6d01c-457">**Exceptions**</span></span> | <span data-ttu-id="6d01c-458">Agora o método <xref:System.Data.SqlClient.SqlCommand.Prepare%2A> gera um <xref:System.InvalidOperationException> quando uma conexão não está definida ou aberta em vez de um <xref:System.NullReferenceException>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-458">The <xref:System.Data.SqlClient.SqlCommand.Prepare%2A> method now throws an <xref:System.InvalidOperationException> when a connection is not set or open instead of a <xref:System.NullReferenceException>.</span></span> |
| <span data-ttu-id="6d01c-459">**Mapeamento de exibições**</span><span class="sxs-lookup"><span data-stu-id="6d01c-459">**Mapping Views**</span></span> | <span data-ttu-id="6d01c-460">Agora os erros de mapeamento de visualização da consulta são detectados em tempo de design em vez de gerar um tempo de execução <xref:System.NullReferenceException>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-460">Query view mapping errors are now caught at design time instead of throwing a <xref:System.NullReferenceException> at run time.</span></span><br><br><span data-ttu-id="6d01c-461">Agora a validação do mapeamento detecta o erro no qual dois conjuntos de associações no CSDL (linguagem de definição de esquema conceitual) são mapeados para a mesma coluna.</span><span class="sxs-lookup"><span data-stu-id="6d01c-461">Mapping validation now catches the error in which two association sets in Conceptual Schema (CSDL) are mapped to the same column.</span></span> |
| <span data-ttu-id="6d01c-462">**Transações**</span><span class="sxs-lookup"><span data-stu-id="6d01c-462">**Transactions**</span></span> | <span data-ttu-id="6d01c-463">Se um aplicativo tentar executar uma instrução em uma conexão após uma transação ter sido concluída (inclusive anulada ou revertida), agora um <xref:System.InvalidOperationException> é gerado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-463">If an application tries to execute a statement on a connection after a transaction has been completed (including aborted or rolled back), an <xref:System.InvalidOperationException> is now thrown.</span></span> <span data-ttu-id="6d01c-464">As versões anteriores não geravam uma exceção e permitiam que você executasse comandos adicionais mesmo se uma transação fosse abortada.</span><span class="sxs-lookup"><span data-stu-id="6d01c-464">Previous versions did not throw an exception and let you execute additional commands even if a transaction was aborted.</span></span> |

### <a name="entity-framework"></a><span data-ttu-id="6d01c-465">Entity Framework</span><span class="sxs-lookup"><span data-stu-id="6d01c-465">Entity Framework</span></span>

<span data-ttu-id="6d01c-466">A tabela a seguir descreve melhorias em recursos que anteriormente tinham limitações ou outros problemas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-466">The following table describes improvements to features that previously had limitations or other issues.</span></span>

<span data-ttu-id="6d01c-467">Namespaces: <xref:System.Data>, <xref:System.Data.Objects>, <xref:System.Data.Objects.DataClasses>; assembly: System.Data.Entity (em System.Data.Entity.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-467">Namespaces: <xref:System.Data>, <xref:System.Data.Objects>, <xref:System.Data.Objects.DataClasses>; assembly: System.Data.Entity (in System.Data.Entity.dll)</span></span>

| <span data-ttu-id="6d01c-468">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-468">Feature</span></span> | <span data-ttu-id="6d01c-469">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-469">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="6d01c-470">**Objetos de entidade**</span><span class="sxs-lookup"><span data-stu-id="6d01c-470">**Entity objects**</span></span> | <span data-ttu-id="6d01c-471">Agora há uma paridade entre o método <xref:System.Data.Objects.ObjectContext.Detach%2A> e o estado do objeto de entidade quando o método <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> é chamado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-471">There is now parity between the <xref:System.Data.Objects.ObjectContext.Detach%2A> method and the state of the entity object when the <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> method is called.</span></span> <span data-ttu-id="6d01c-472">Essa consistência aprimorada impede que exceções inesperadas sejam lançadas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-472">This improved consistency prevents unexpected exceptions from being thrown.</span></span> |
| <span data-ttu-id="6d01c-473">**Entity SQL**</span><span class="sxs-lookup"><span data-stu-id="6d01c-473">**Entity SQL**</span></span> | <span data-ttu-id="6d01c-474">As regras foram aprimoradas para resoluções de identificador no Entity SQL.</span><span class="sxs-lookup"><span data-stu-id="6d01c-474">Rules have been improved for identifier resolutions in Entity SQL.</span></span><br><br><span data-ttu-id="6d01c-475">O analisador do Entity SQL melhorou a lógica para resolver os identificadores de partes múltiplas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-475">The Entity SQL parser has improved logic for resolving multipart identifiers.</span></span> |
| <span data-ttu-id="6d01c-476">**Anotações estruturais**</span><span class="sxs-lookup"><span data-stu-id="6d01c-476">**Structural annotations**</span></span> | <span data-ttu-id="6d01c-477">Agora o Entity Framework reconhece anotações estruturais.</span><span class="sxs-lookup"><span data-stu-id="6d01c-477">The Entity Framework now recognizes structural annotations.</span></span> |
| <span data-ttu-id="6d01c-478">**Consultas**</span><span class="sxs-lookup"><span data-stu-id="6d01c-478">**Queries**</span></span> | <span data-ttu-id="6d01c-479">As seguintes melhorias foram feitas em consultas:</span><span class="sxs-lookup"><span data-stu-id="6d01c-479">The following improvements were made in queries:</span></span><br><br><span data-ttu-id="6d01c-480">\* A consulta `GroupBy` que usa uma chave null em uma coleção vazia não retornará nenhuma linha, independentemente se houver qualquer seleção adicional na consulta.</span><span class="sxs-lookup"><span data-stu-id="6d01c-480">\* A `GroupBy` query using a null key over an empty collection will not return any rows, regardless if there are any additional selects in the query.</span></span><br><span data-ttu-id="6d01c-481">\* Agora o SQL gerado nas consultas do LINQ e do Entity-SQL trata os parâmetros de cadeia de caracteres como valores não Unicode por padrão.</span><span class="sxs-lookup"><span data-stu-id="6d01c-481">\* Generated SQL in LINQ and Entity-SQL queries now treat string parameters as non-Unicode values by default.</span></span> |

### <a name="linq-to-sql"></a><span data-ttu-id="6d01c-482">LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="6d01c-482">LINQ to SQL</span></span>

<span data-ttu-id="6d01c-483">A tabela a seguir descreve melhorias em recursos que anteriormente tinham limitações ou outros problemas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-483">The following table describes improvements to features that previously had limitations or other issues.</span></span>

<span data-ttu-id="6d01c-484">Namespace: <xref:System.Data.Linq>; assembly: System.Data.Linq (em System.Data.Linq.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-484">Namespace: <xref:System.Data.Linq>; assembly: System.Data.Linq (in System.Data.Linq.dll)</span></span>

| <span data-ttu-id="6d01c-485">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-485">Feature</span></span> | <span data-ttu-id="6d01c-486">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-486">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="6d01c-487">**Eventos**</span><span class="sxs-lookup"><span data-stu-id="6d01c-487">**Events**</span></span> | <span data-ttu-id="6d01c-488">Uma coleção <xref:System.Data.Linq.EntitySet%601> agora gera o evento <xref:System.Data.Linq.EntitySet%601.ListChanged> para adicionar e remover as operações quando o <xref:System.Data.Linq.EntitySet%601> é descarregado, além de gerar o evento quando a coleção é carregada.</span><span class="sxs-lookup"><span data-stu-id="6d01c-488">A <xref:System.Data.Linq.EntitySet%601> collection now raises the <xref:System.Data.Linq.EntitySet%601.ListChanged> event for add and remove operations if the <xref:System.Data.Linq.EntitySet%601> is unloaded, in addition to raising the event when the collection is loaded.</span></span> |
| <span data-ttu-id="6d01c-489">**Consultas**</span><span class="sxs-lookup"><span data-stu-id="6d01c-489">**Queries**</span></span> | <span data-ttu-id="6d01c-490">`Skip(0)` não é mais ignorado em chamadas LINQ to SQL.</span><span class="sxs-lookup"><span data-stu-id="6d01c-490">`Skip(0)` is no longer ignored in LINQ to SQL queries.</span></span> <span data-ttu-id="6d01c-491">Como resultado, as consultas que têm esse método podem se comportar de maneira diferente.</span><span class="sxs-lookup"><span data-stu-id="6d01c-491">As a result, queries that have this method might behave differently.</span></span> <span data-ttu-id="6d01c-492">Por exemplo, em alguns casos, uma cláusula `OrderBy` é necessária com `Skip(0)` e a consulta agora lançará uma exceção <xref:System.NotSupportedException> se a cláusula `OrderBy` não tiver sido incluída.</span><span class="sxs-lookup"><span data-stu-id="6d01c-492">For example in some cases, an `OrderBy` clause is required with `Skip(0)`, and the query will now throw a <xref:System.NotSupportedException> exception if the `OrderBy` clause was not included.</span></span> |

### <a name="wcf-data-services"></a><span data-ttu-id="6d01c-493">WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="6d01c-493">WCF Data Services</span></span>

<span data-ttu-id="6d01c-494">A tabela a seguir descreve melhorias em recursos que anteriormente tinham limitações ou outros problemas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-494">The following table describes improvements to features that previously had limitations or other issues.</span></span>

<span data-ttu-id="6d01c-495">Namespaces: <xref:System.Data.Services>, <xref:System.Data.Services.Client>, <xref:System.Data.Services.Common>, <xref:System.Data.Services.Providers>; assemblies: System.Data.Services (em System.Data.Services.dll), System.Data.Services.Client (em System.Data.Services.Client.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-495">Namespaces: <xref:System.Data.Services>, <xref:System.Data.Services.Client>, <xref:System.Data.Services.Common>, <xref:System.Data.Services.Providers>; assemblies: System.Data.Services (in System.Data.Services.dll), System.Data.Services.Client (in System.Data.Services.Client.dll)</span></span>

| <span data-ttu-id="6d01c-496">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-496">Feature</span></span> | <span data-ttu-id="6d01c-497">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-497">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="6d01c-498">**Conteúdo binário em lote**</span><span class="sxs-lookup"><span data-stu-id="6d01c-498">**Batched Binary Content**</span></span> | <span data-ttu-id="6d01c-499">Agora o WCF Data Services dá suporte ao conteúdo binário em lote em solicitações e respostas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-499">WCF Data Services now supports batched binary content in requests and responses.</span></span> |
| <span data-ttu-id="6d01c-500">**Interceptadores de alteração**</span><span class="sxs-lookup"><span data-stu-id="6d01c-500">**Change interceptors**</span></span> | <span data-ttu-id="6d01c-501">Agora os interceptadores de alteração são executados para uma solicitação de exclusão.</span><span class="sxs-lookup"><span data-stu-id="6d01c-501">Change interceptors are now executed for a delete request.</span></span><br><br><span data-ttu-id="6d01c-502">Um interceptador de alteração é um método executado sempre que uma solicitação é recebida pelo servidor para modificar uma entidade no conjunto de entidades.</span><span class="sxs-lookup"><span data-stu-id="6d01c-502">A change interceptor is a method that runs every time a request is received by the server to modify an entity in the entity set.</span></span> <span data-ttu-id="6d01c-503">Ele é executado antes que a solicitação de entrada é executada.</span><span class="sxs-lookup"><span data-stu-id="6d01c-503">It runs before the incoming request is executed.</span></span> <span data-ttu-id="6d01c-504">O interceptador de alteração fornece acesso à entidade que está sendo alterada e à operação que está sendo executada nela.</span><span class="sxs-lookup"><span data-stu-id="6d01c-504">The change interceptor provides access to the entity that is being changed and the operation that is being performed on it.</span></span> |
| <span data-ttu-id="6d01c-505">**Exceções**</span><span class="sxs-lookup"><span data-stu-id="6d01c-505">**Exceptions**</span></span> | <span data-ttu-id="6d01c-506">Agora as condições a seguir lançam exceções mais úteis em vez de um <xref:System.NullReferenceException>:</span><span class="sxs-lookup"><span data-stu-id="6d01c-506">The following conditions now throw more useful exceptions instead of a <xref:System.NullReferenceException>:</span></span><br><br><span data-ttu-id="6d01c-507">\* Um <xref:System.ServiceProcess.TimeoutException> quando uma chamada para um serviço de dados atinge o tempo limite.</span><span class="sxs-lookup"><span data-stu-id="6d01c-507">\* A <xref:System.ServiceProcess.TimeoutException> when a call to a data service times out.</span></span><br><span data-ttu-id="6d01c-508">\* Um <xref:System.Data.Services.Client.DataServiceRequestException> quando uma solicitação incorreta é feita para um serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-508">\* A <xref:System.Data.Services.Client.DataServiceRequestException> when a bad request is made to a data service.</span></span><br><br><span data-ttu-id="6d01c-509">Em seus aplicativos, você deve alterar o tratamento de exceções para capturar novas exceções.</span><span class="sxs-lookup"><span data-stu-id="6d01c-509">In your applications, you should change exception handling to catch the new exceptions.</span></span> |
| <span data-ttu-id="6d01c-510">**Cabeçalhos**</span><span class="sxs-lookup"><span data-stu-id="6d01c-510">**Headers**</span></span> | <span data-ttu-id="6d01c-511">As seguintes melhorias foram feitas em cabeçalhos:</span><span class="sxs-lookup"><span data-stu-id="6d01c-511">The following improvements were made to headers:</span></span><br><br><span data-ttu-id="6d01c-512">\* Agora o WCF Data Services rejeita corretamente um cabeçalho `eTag` que tem um valor não especificado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-512">\* WCF Data Services now correctly rejects an `eTag` header that has an unspecified value.</span></span><br><span data-ttu-id="6d01c-513">\* Agora o WCF Data Services retorna um erro e não executa a solicitação para uma solicitação de exclusão para um link quando um cabeçalho `if-*` está na solicitação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-513">\* WCF Data Services now returns an error and does not execute the request for a delete request to a link when an `if-*` header is in the request.</span></span><br><span data-ttu-id="6d01c-514">\* O WCF Data Services agora retorna um erro para o cliente no formato (Atom, JSON) que o cliente especificou no cabeçalho de aceitação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-514">\* WCF Data Services now returns an error to the client in the format (Atom, JSON) that the client specified in the Accept header.</span></span> |
| <span data-ttu-id="6d01c-515">**Leitor JSON**</span><span class="sxs-lookup"><span data-stu-id="6d01c-515">**JSON Reader**</span></span> | <span data-ttu-id="6d01c-516">Agora o leitor JSON (JavaScript Object Notation) retorna corretamente um erro quando ele lê o caractere de escape barra invertida única ("\\"), quando ele processa o conteúdo JSON enviado para um Serviço de Dados do WCF.</span><span class="sxs-lookup"><span data-stu-id="6d01c-516">The JavaScript Object Notation (JSON) reader now correctly returns an error when it reads the single backslash ("\\") escape character, when it processes JSON payloads sent to a WCF Data Service.</span></span> |
| <span data-ttu-id="6d01c-517">**Mesclagens**</span><span class="sxs-lookup"><span data-stu-id="6d01c-517">**Merges**</span></span> | <span data-ttu-id="6d01c-518">As seguintes melhorias foram feitas na enumeração <xref:System.Data.Services.Client.MergeOption>:</span><span class="sxs-lookup"><span data-stu-id="6d01c-518">The following improvements were made to the <xref:System.Data.Services.Client.MergeOption> enumeration:</span></span><br><br><span data-ttu-id="6d01c-519">\* A opção de mesclagem <xref:System.Data.Services.Client.MergeOption> não modifica mais a entidade no cliente como resultado de qualquer resposta subsequente de um serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-519">\* The <xref:System.Data.Services.Client.MergeOption> merge option no longer modifies the entity on the client as a result of any subsequent response from a data service.</span></span><br><span data-ttu-id="6d01c-520">\* Agora a opção <xref:System.Data.Services.Client.MergeOption> é consistente entre o SQL dinâmico e as atualizações baseadas em procedimentos armazenados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-520">\* The <xref:System.Data.Services.Client.MergeOption> option is now consistent between dynamic SQL and stored procedure-based updates.</span></span> |
| <span data-ttu-id="6d01c-521">**Solicitações**</span><span class="sxs-lookup"><span data-stu-id="6d01c-521">**Requests**</span></span> | <span data-ttu-id="6d01c-522">O método <xref:System.Data.Services.DataService%601.OnStartProcessingRequest%2A> agora é chamado antes que uma solicitação aos serviços de dados seja processada.</span><span class="sxs-lookup"><span data-stu-id="6d01c-522">The <xref:System.Data.Services.DataService%601.OnStartProcessingRequest%2A> method is now called before a request to data services is processed.</span></span> <span data-ttu-id="6d01c-523">Isso permite que a solicitação funcione corretamente para os serviços <xref:System.Data.Services.Providers.ServiceOperation>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-523">This enables the request to work correctly for <xref:System.Data.Services.Providers.ServiceOperation> services.</span></span> |
| <span data-ttu-id="6d01c-524">**Fluxos**</span><span class="sxs-lookup"><span data-stu-id="6d01c-524">**Streams**</span></span> | <span data-ttu-id="6d01c-525">O WCF Data Services não fecha mais o fluxo subjacente para operações de leitura e de gravação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-525">WCF Data Services no longer closes the underlying stream for read and write operations.</span></span> |
| <span data-ttu-id="6d01c-526">**URIs**</span><span class="sxs-lookup"><span data-stu-id="6d01c-526">**URIs**</span></span> | <span data-ttu-id="6d01c-527">A saída de URIs pelo cliente WCF Data Services foi corrigida.</span><span class="sxs-lookup"><span data-stu-id="6d01c-527">The escaping of URIs by WCF Data Services client has been corrected.</span></span> |

## <a name="windows-communication-foundation-wcf"></a><span data-ttu-id="6d01c-528">Windows Communication Foundation (WCF)</span><span class="sxs-lookup"><span data-stu-id="6d01c-528">Windows Communication Foundation (WCF)</span></span>

<span data-ttu-id="6d01c-529">A tabela a seguir descreve melhorias em recursos que anteriormente tinham limitações ou outros problemas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-529">The following table describes improvements to features that previously had limitations or other issues.</span></span>

| <span data-ttu-id="6d01c-530">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-530">Feature</span></span> | <span data-ttu-id="6d01c-531">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-531">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="6d01c-532">**Arquivos de configuração**</span><span class="sxs-lookup"><span data-stu-id="6d01c-532">**Configuration files**</span></span> | <span data-ttu-id="6d01c-533">Para habilitar a herança de comportamentos por meio da hierarquia do arquivo de configuração, agora o WCF dá suporte à mesclagem em arquivos de configuração.</span><span class="sxs-lookup"><span data-stu-id="6d01c-533">To enable inheritance of behaviors through the configuration file hierarchy, WCF now supports merging across configuration files.</span></span><br><br><span data-ttu-id="6d01c-534">Agora o modelo de herança de configuração foi expandido para permitir que os usuários definam os comportamentos que serão aplicados a todos os serviços em execução no computador.</span><span class="sxs-lookup"><span data-stu-id="6d01c-534">The configuration inheritance model is now expanded to let users define behaviors that will be applied to all the services that are running on the computer.</span></span><br><br><span data-ttu-id="6d01c-535">Talvez você encontre alterações de comportamento se houver comportamentos com o mesmo nome em diferentes níveis da hierarquia.</span><span class="sxs-lookup"><span data-stu-id="6d01c-535">You may encounter behavioral changes if there are behaviors with the same name at different levels of the hierarchy.</span></span> |
| <span data-ttu-id="6d01c-536">**Hospedagem de serviço**</span><span class="sxs-lookup"><span data-stu-id="6d01c-536">**Service hosting**</span></span> | <span data-ttu-id="6d01c-537">Não é mais possível especificar o elemento de configuração `<serviceHostingEnvironment>` no nível de serviço, adicionando o atributo `allowDefinition="MachineToApplication"` à definição do elemento.</span><span class="sxs-lookup"><span data-stu-id="6d01c-537">You can no longer specify the `<serviceHostingEnvironment>` configuration element at the service level by adding the attribute `allowDefinition="MachineToApplication"` to the element definition.</span></span><br><br><span data-ttu-id="6d01c-538">Especificar o elemento `<serviceHostingEnvironment>` no nível de serviço é tecnicamente incorreto e causa um comportamento inconsistente.</span><span class="sxs-lookup"><span data-stu-id="6d01c-538">Specifying the `<serviceHostingEnvironment>` element at the service level is technically incorrect and causes inconsistent behavior.</span></span> |

## <a name="windows-presentation-foundation-wpf"></a><span data-ttu-id="6d01c-539">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="6d01c-539">Windows Presentation Foundation (WPF)</span></span>

### <a name="applications"></a><span data-ttu-id="6d01c-540">Aplicativos</span><span class="sxs-lookup"><span data-stu-id="6d01c-540">Applications</span></span>

<span data-ttu-id="6d01c-541">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>; assembly: PresentationFramework (em PresentationFramework.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-541">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>; assembly: PresentationFramework (in PresentationFramework.dll)</span></span>

| <span data-ttu-id="6d01c-542">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-542">Feature</span></span> | <span data-ttu-id="6d01c-543">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-543">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-544">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-544">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-545">**Tratamento de exceções**</span><span class="sxs-lookup"><span data-stu-id="6d01c-545">**Exception handling**</span></span> | <span data-ttu-id="6d01c-546">Para permitir que os erros sejam detectados mais cedo, o WPF lança um <xref:System.Reflection.TargetInvocationException> e define a propriedade <xref:System.Exception.InnerException> como exceções críticas, como <xref:System.NullReferenceException>, <xref:System.OutOfMemoryException>, <xref:System.StackOverflowException> e <xref:System.Security.SecurityException>, em vez de capturar a exceção original.</span><span class="sxs-lookup"><span data-stu-id="6d01c-546">To enable errors to be detected earlier, WPF throws a <xref:System.Reflection.TargetInvocationException> and sets the <xref:System.Exception.InnerException> property to critical exceptions, such as <xref:System.NullReferenceException>, <xref:System.OutOfMemoryException>, <xref:System.StackOverflowException>, and <xref:System.Security.SecurityException>, instead of catching the original exception.</span></span> | <span data-ttu-id="6d01c-547">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-547">None.</span></span> |
| <span data-ttu-id="6d01c-548">**Recursos vinculados**</span><span class="sxs-lookup"><span data-stu-id="6d01c-548">**Linked resources**</span></span> | <span data-ttu-id="6d01c-549">Para facilitar a vinculação, os arquivos de recurso (como imagens) localizados em um local diferente da estrutura de pasta do projeto usam o caminho completo do arquivo de recurso em vez de apenas do nome de arquivo, como a ID do recurso quando o aplicativo é criado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-549">To make linking easier, resource files (such as images) that are located in a location other than the project's folder structure use the resource file's full path instead of just its file name as the resource ID when the application is built.</span></span> <span data-ttu-id="6d01c-550">O aplicativo será capaz de localizar os arquivos em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="6d01c-550">The application will be able to locate the files at run time.</span></span> | <span data-ttu-id="6d01c-551">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-551">None.</span></span> |
| <span data-ttu-id="6d01c-552">**Aplicativos de confiança parcial**</span><span class="sxs-lookup"><span data-stu-id="6d01c-552">**Partial-trust applications**</span></span> | <span data-ttu-id="6d01c-553">Para ver as considerações de segurança, os aplicativos baseados no Windows executados em confiança parcial e que contêm um controle <xref:System.Windows.Controls.WebBrowser> ou um controle <xref:System.Windows.Controls.Frame> que contém o HTML lançará um <xref:System.Security.SecurityException> quando o controle for criado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-553">For security considerations, Windows-based applications that run in partial trust and contain a <xref:System.Windows.Controls.WebBrowser> control or a <xref:System.Windows.Controls.Frame> control that contains HTML will throw a <xref:System.Security.SecurityException> when the control is created.</span></span><br><br><span data-ttu-id="6d01c-554">Os aplicativos de navegador lançarão uma exceção e exibirão uma mensagem se todas as seguintes condições forem atendidas:</span><span class="sxs-lookup"><span data-stu-id="6d01c-554">Browser applications will throw an exception and display a message if all of the following conditions are met:</span></span><br><br><span data-ttu-id="6d01c-555">\* O aplicativo está sendo executado no Firefox.</span><span class="sxs-lookup"><span data-stu-id="6d01c-555">\* The application is running in Firefox.</span></span><br><span data-ttu-id="6d01c-556">\* O aplicativo está sendo executado em confiança parcial na zona da Internet de sites não confiáveis.</span><span class="sxs-lookup"><span data-stu-id="6d01c-556">\* The application is running in partial trust in the Internet zone from non-trusted sites.</span></span><br><span data-ttu-id="6d01c-557">\* O aplicativo contém um controle <xref:System.Windows.Controls.WebBrowser> ou um controle <xref:System.Windows.Controls.Frame> que contém o HTML.</span><span class="sxs-lookup"><span data-stu-id="6d01c-557">\* The application contains a <xref:System.Windows.Controls.WebBrowser> control or a <xref:System.Windows.Controls.Frame> control that contains HTML.</span></span><br><br><span data-ttu-id="6d01c-558">Observe que os aplicativos executados de sites confiáveis ou da zona da intranet não serão afetados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-558">Note that applications that run from trusted sites or from the intranet zone will not be affected.</span></span> | <span data-ttu-id="6d01c-559">Em seus aplicativos de navegador, é possível facilitar essa alteração seguindo um destes procedimentos:</span><span class="sxs-lookup"><span data-stu-id="6d01c-559">In your browser applications, you can ease this change by doing one of the following:</span></span><br><br><span data-ttu-id="6d01c-560">\* Execute o aplicativo de navegador em confiança total.</span><span class="sxs-lookup"><span data-stu-id="6d01c-560">\* Run the browser application in full trust.</span></span><br><span data-ttu-id="6d01c-561">\* Peça para os clientes adicionarem o site do aplicativo à zona de sites confiáveis.</span><span class="sxs-lookup"><span data-stu-id="6d01c-561">\* Have customers add the application's site to the trusted sites zone.</span></span><br><span data-ttu-id="6d01c-562">\* Peça para os clientes executarem o aplicativo no Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="6d01c-562">\* Have customers run the application in Internet Explorer.</span></span> |
| <span data-ttu-id="6d01c-563">**Dicionários de recurso**</span><span class="sxs-lookup"><span data-stu-id="6d01c-563">**Resource dictionaries**</span></span> | <span data-ttu-id="6d01c-564">Para melhorar os dicionários de recurso de nível de tema e impedir que eles mudem, agora os recursos congeláveis definidos em um dicionário de recurso e mesclados em um dicionário de nível de tema são sempre marcados como congelados e são imutáveis.</span><span class="sxs-lookup"><span data-stu-id="6d01c-564">To improve theme-level resource dictionaries and prevent them from changing, freezable resources that are defined in a resource dictionary and merged into a theme-level dictionary are now always marked as frozen and are immutable.</span></span> <span data-ttu-id="6d01c-565">Esse é o comportamento esperado para recursos congeláveis.</span><span class="sxs-lookup"><span data-stu-id="6d01c-565">This is the expected behavior for freezable resources.</span></span> | <span data-ttu-id="6d01c-566">Os aplicativos que modificam um recurso definido em um dicionário mesclado de nível de tema devem clonar o recurso e modificar a cópia clonada.</span><span class="sxs-lookup"><span data-stu-id="6d01c-566">Applications that modify a resource that is defined in a theme-level merged dictionary should clone the resource and modify the cloned copy.</span></span> <span data-ttu-id="6d01c-567">Como alternativa, o recurso poderá ser marcado `x:Shared="false"` para que o <xref:System.Windows.ResourceDictionary> crie uma nova cópia toda vez que o recurso for consultado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-567">Alternatively, the resource can be marked `x:Shared="false"` so that the <xref:System.Windows.ResourceDictionary> creates a new copy every time the resource is queried.</span></span> |
| <span data-ttu-id="6d01c-568">**Windows 7**</span><span class="sxs-lookup"><span data-stu-id="6d01c-568">**Windows 7**</span></span> | <span data-ttu-id="6d01c-569">Para fazer os aplicativos WPF funcionarem melhor no Windows 7, as seguintes melhorias foram feitas para corrigir o comportamento de uma janela:</span><span class="sxs-lookup"><span data-stu-id="6d01c-569">To make WPF applications work better on Windows 7, the following improvements were made to correct the behavior of a window:</span></span><br><br><span data-ttu-id="6d01c-570">\* Agora os estados de encaixe e de gesto funcionam conforme esperado com base nas interações do usuário.</span><span class="sxs-lookup"><span data-stu-id="6d01c-570">\* Dock and gesture states now work as expected based on user interactions.</span></span><br><span data-ttu-id="6d01c-571">\* Agora os comandos da barra de tarefas **Janelas em cascata, Mostrar janelas empilhadas** e **Mostrar janelas lado a lado** têm o comportamento correto e atualizam as propriedades adequadas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-571">\* The taskbar commands **Cascade windows, Show windows stacked**, and **Show windows side-by-side** now have the correct behavior and update the appropriate properties.</span></span><br><span data-ttu-id="6d01c-572">\* Agora as propriedades `Top`, `Left`, `Width` e `Height` de uma janela minimizada ou maximizada contêm o local de restauração correto da janela, em vez de outros valores, dependendo do monitor.</span><span class="sxs-lookup"><span data-stu-id="6d01c-572">\* The `Top`, `Left`, `Width`, and `Height` properties for a maximized or minimized window now contain the correct restore location of the window instead of other values, depending on the monitor.</span></span> | <span data-ttu-id="6d01c-573">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-573">None.</span></span> |
| <span data-ttu-id="6d01c-574">**Transparência e estilo do Windows**</span><span class="sxs-lookup"><span data-stu-id="6d01c-574">**Windows style and transparency**</span></span> | <span data-ttu-id="6d01c-575">Um <xref:System.InvalidOperationException> será gerado se você tentar definir <xref:System.Windows.Window.WindowStyle> como um valor diferente de <xref:System.Windows.WindowStyle> quando <xref:System.Windows.Window.AllowsTransparency> for `true` e <xref:System.Windows.WindowState> for <xref:System.Windows.WindowState>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-575">An <xref:System.InvalidOperationException> is thrown if you try to set <xref:System.Windows.Window.WindowStyle> to a value other than <xref:System.Windows.WindowStyle> when <xref:System.Windows.Window.AllowsTransparency> is `true` and <xref:System.Windows.WindowState> is <xref:System.Windows.WindowState>.</span></span> | <span data-ttu-id="6d01c-576">Se for necessário alterar o <xref:System.Windows.Window.WindowStyle> quando <xref:System.Windows.Window.AllowsTransparency> for `true`, será possível chamar a função `SetWindowLongPtr` Win32.</span><span class="sxs-lookup"><span data-stu-id="6d01c-576">If you must change the <xref:System.Windows.Window.WindowStyle> when <xref:System.Windows.Window.AllowsTransparency> is `true`, you can call the Win32 `SetWindowLongPtr` function.</span></span> |
| <span data-ttu-id="6d01c-577">**Visualizador XPS**</span><span class="sxs-lookup"><span data-stu-id="6d01c-577">**XPS Viewer**</span></span> | <span data-ttu-id="6d01c-578">O WPF não inclui o XPSEP (Microsoft XML Paper Specification Essentials Pack).</span><span class="sxs-lookup"><span data-stu-id="6d01c-578">WPF does not include the Microsoft XML Paper Specification Essentials Pack (XPSEP).</span></span> <span data-ttu-id="6d01c-579">O XPSEP é incluído com o Windows 7 e o Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="6d01c-579">XPSEP is included with Windows 7 and Windows Vista.</span></span><br><br><span data-ttu-id="6d01c-580">Em um computador que está executando o Windows XP sem o .NET Framework 3.5 SP1 instalado, imprimir usando uma API WPF que não sejam aquelas no <xref:System.Windows.Controls.PrintDialog> dependerá do WINSPOOL.</span><span class="sxs-lookup"><span data-stu-id="6d01c-580">On a computer that is running Windows XP without the .NET Framework 3.5 SP1 installed, printing by using a WPF API other than those in <xref:System.Windows.Controls.PrintDialog> will rely on the WINSPOOL.</span></span> <span data-ttu-id="6d01c-581">Alguns recursos da impressora não serão relatados e algumas configurações da impressora não serão aplicadas durante a impressão.</span><span class="sxs-lookup"><span data-stu-id="6d01c-581">Some printer capabilities will not be reported and some printer settings will not be applied during printing.</span></span> | <span data-ttu-id="6d01c-582">Se necessário, instale o [Microsoft XML Paper Specification Essentials Pack](https://go.microsoft.com/fwlink/?LinkId=178895).</span><span class="sxs-lookup"><span data-stu-id="6d01c-582">If needed, install the [Microsoft XML Paper Specification Essentials Pack](https://go.microsoft.com/fwlink/?LinkId=178895).</span></span> |

### <a name="controls"></a><span data-ttu-id="6d01c-583">Controles</span><span class="sxs-lookup"><span data-stu-id="6d01c-583">Controls</span></span>

<span data-ttu-id="6d01c-584">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; assemblies: PresentationFramework (em PresentationFramework.dll), PresentationCore (em PresentationCore.dll), WindowsBase (em WindowsBase.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-584">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; assemblies: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), WindowsBase (in WindowsBase.dll)</span></span>

| <span data-ttu-id="6d01c-585">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-585">Feature</span></span> | <span data-ttu-id="6d01c-586">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-586">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-587">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-587">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-588">**Caixas de diálogo**</span><span class="sxs-lookup"><span data-stu-id="6d01c-588">**Dialog boxes**</span></span> | <span data-ttu-id="6d01c-589">Para aumentar a confiabilidade, o método <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> é chamado no mesmo thread que criou o controle <xref:Microsoft.Win32.FileDialog>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-589">To improve reliability, the <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> method is called on the same thread that created the <xref:Microsoft.Win32.FileDialog> control.</span></span> | <span data-ttu-id="6d01c-590">Certifique-se de criar um controle <xref:Microsoft.Win32.FileDialog> e de chamar o método <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> no mesmo thread.</span><span class="sxs-lookup"><span data-stu-id="6d01c-590">Be sure to create a <xref:Microsoft.Win32.FileDialog> control and call the <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> method on the same thread.</span></span> |
| <span data-ttu-id="6d01c-591">**Janelas flutuantes**</span><span class="sxs-lookup"><span data-stu-id="6d01c-591">**Floating windows**</span></span> | <span data-ttu-id="6d01c-592">Para corrigir a lógica de restauração de foco que mantém incorretamente a reativação de uma janela flutuante (fazendo-a ser exibida como uma caixa de diálogo modal), agora a restauração de foco será evitada se o candidato não for um filho da janela.</span><span class="sxs-lookup"><span data-stu-id="6d01c-592">To fix focus restoration logic that incorrectly keeps reactivating a floating window (making it appear like a modal dialog box), focus restoration is now prevented if the candidate is not a child of the window.</span></span> | <span data-ttu-id="6d01c-593">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-593">None.</span></span> |
| <span data-ttu-id="6d01c-594">**Itens em coleções**</span><span class="sxs-lookup"><span data-stu-id="6d01c-594">**Items in collections**</span></span> | <span data-ttu-id="6d01c-595">Quando um item é movido ou adicionado a uma coleção subjacente, ele será exibido no <xref:System.Windows.Data.CollectionView> no mesmo local relativo se o <xref:System.Windows.Data.CollectionView> não for classificado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-595">When an item is moved or added to an underlying collection, it appears in the <xref:System.Windows.Data.CollectionView> in the same relative location if the <xref:System.Windows.Data.CollectionView> is not sorted.</span></span> <span data-ttu-id="6d01c-596">Isso fornece consistência entre a posição do item na coleção e no <xref:System.Windows.Data.CollectionView> associado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-596">This provides consistency between the item's position in the collection and in the associated <xref:System.Windows.Data.CollectionView>.</span></span> | <span data-ttu-id="6d01c-597">Use o método <xref:System.Windows.Controls.ItemContainerGenerator.ContainerFromItem%2A> ou <xref:System.Windows.Data.CollectionView.IndexOf%2A> para encontrar o local de um item em um <xref:System.Windows.Data.CollectionView> em vez de depender de um local fixo de um item.</span><span class="sxs-lookup"><span data-stu-id="6d01c-597">Use the <xref:System.Windows.Controls.ItemContainerGenerator.ContainerFromItem%2A> or <xref:System.Windows.Data.CollectionView.IndexOf%2A> method to find the location of an item in a <xref:System.Windows.Data.CollectionView> instead of relying on a fixed location of an item.</span></span> |
| <span data-ttu-id="6d01c-598">**Layouts**</span><span class="sxs-lookup"><span data-stu-id="6d01c-598">**Layouts**</span></span> | <span data-ttu-id="6d01c-599">Para eliminar re-layouts desnecessários, alterar o <xref:System.Windows.Controls.Page.ShowsNavigationUI> não invalida mais o layout nem faz outro layout passar.</span><span class="sxs-lookup"><span data-stu-id="6d01c-599">To eliminate unnecessary re-layouts, changing the <xref:System.Windows.Controls.Page.ShowsNavigationUI> no longer invalidates layout or causes another layout pass.</span></span> | <span data-ttu-id="6d01c-600">Se você espera que a alteração de <xref:System.Windows.Controls.Page.ShowsNavigationUI> faça outro layout passar, chame <xref:System.Windows.UIElement.InvalidateVisual%2A> depois de definir a propriedade.</span><span class="sxs-lookup"><span data-stu-id="6d01c-600">If you expect that changing <xref:System.Windows.Controls.Page.ShowsNavigationUI> will cause another layout pass, call <xref:System.Windows.UIElement.InvalidateVisual%2A> after you set the property.</span></span> |
| <span data-ttu-id="6d01c-601">**Menus**</span><span class="sxs-lookup"><span data-stu-id="6d01c-601">**Menus**</span></span> | <span data-ttu-id="6d01c-602">Para habilitar o texto ClearType nas pop-ups de menu, foram feitas modificações na classe <xref:System.Windows.Controls.ControlTemplate> e no controle <xref:System.Windows.Controls.MenuItem> e em outros controles.</span><span class="sxs-lookup"><span data-stu-id="6d01c-602">To enable ClearType text in menu pop-ups, modifications were made to the <xref:System.Windows.Controls.ControlTemplate> class and to the <xref:System.Windows.Controls.MenuItem> control and other controls.</span></span> | <span data-ttu-id="6d01c-603">Os aplicativos não devem depender da estrutura visual dos modelos de controle.</span><span class="sxs-lookup"><span data-stu-id="6d01c-603">Applications should not rely on the visual structure of control templates.</span></span> <span data-ttu-id="6d01c-604">Apenas partes nomeadas de um <xref:System.Windows.Controls.ControlTemplate> fazem parte do contrato público.</span><span class="sxs-lookup"><span data-stu-id="6d01c-604">Only named parts of a <xref:System.Windows.Controls.ControlTemplate> are part of the public contract.</span></span> <span data-ttu-id="6d01c-605">Se um aplicativo precisar localizar um determinado objeto em um <xref:System.Windows.Controls.ControlTemplate>, pesquise um tipo específico na árvore visual em vez de depender de um local fixo de um objeto na árvore.</span><span class="sxs-lookup"><span data-stu-id="6d01c-605">If an application must find a certain object in a <xref:System.Windows.Controls.ControlTemplate>, search the visual tree for a specific type instead of relying on a fixed location of an object in the tree.</span></span> |
| <span data-ttu-id="6d01c-606">**Navegação**</span><span class="sxs-lookup"><span data-stu-id="6d01c-606">**Navigating**</span></span> | <span data-ttu-id="6d01c-607">Se um <xref:System.Windows.Controls.Frame> navegar diretamente para um local, a propriedade <xref:System.Windows.Navigation.NavigatingCancelEventArgs.IsNavigationInitiator> será `true` após a navegação inicial.</span><span class="sxs-lookup"><span data-stu-id="6d01c-607">If a <xref:System.Windows.Controls.Frame> directly navigates to a location, the <xref:System.Windows.Navigation.NavigatingCancelEventArgs.IsNavigationInitiator> property is `true` after the initial navigation.</span></span> <span data-ttu-id="6d01c-608">Essa alteração impede eventos adicionais de serem gerados durante os cenários de inicialização.</span><span class="sxs-lookup"><span data-stu-id="6d01c-608">This change prevents additional events from being raised during startup scenarios.</span></span> | <span data-ttu-id="6d01c-609">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-609">None.</span></span> |
| <span data-ttu-id="6d01c-610">**Pop-ups**</span><span class="sxs-lookup"><span data-stu-id="6d01c-610">**Pop-ups**</span></span> | <span data-ttu-id="6d01c-611">Agora o delegado <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> pode ser chamado várias vezes durante passagem de um layout em vez de apenas uma vez.</span><span class="sxs-lookup"><span data-stu-id="6d01c-611">The <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> delegate can now be called multiple times during a layout pass instead of only once.</span></span> | <span data-ttu-id="6d01c-612">Se seu delegado <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> calcular a posição de um <xref:System.Windows.Controls.Primitives.Popup> com base na posição anterior, recalcule a posição apenas se os valores dos parâmetros `popupSize`, `targetSize` ou `offset` forem alterados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-612">If your <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> delegate calculates the position of a <xref:System.Windows.Controls.Primitives.Popup> based on its previous position, recalculate the position only if the values of the `popupSize`, `targetSize`, or `offset` parameters change.</span></span> |
| <span data-ttu-id="6d01c-613">**Valores de propriedade**</span><span class="sxs-lookup"><span data-stu-id="6d01c-613">**Property values**</span></span> | <span data-ttu-id="6d01c-614">Agora o método <xref:System.Windows.DependencyObject.SetCurrentValue%2A> permite que você defina uma propriedade como um valor efetivo, embora ela continue respeitando qualquer associação, estilo ou gatilho que afeta a propriedade.</span><span class="sxs-lookup"><span data-stu-id="6d01c-614">The <xref:System.Windows.DependencyObject.SetCurrentValue%2A> method now lets you set a property to an effective value, although it continues to respects any binding, style, or trigger that affects the property.</span></span> | <span data-ttu-id="6d01c-615">Os autores de controle devem usar <xref:System.Windows.DependencyObject.SetCurrentValue%2A> sempre que o valor da propriedade é alterado como um efeito colateral de alguma outra ação, incluindo a manipulação do usuário.</span><span class="sxs-lookup"><span data-stu-id="6d01c-615">Control authors should use <xref:System.Windows.DependencyObject.SetCurrentValue%2A> whenever the property value changes as a side-effect of some other action, including user manipulation.</span></span> |
| <span data-ttu-id="6d01c-616">**Caixas de texto**</span><span class="sxs-lookup"><span data-stu-id="6d01c-616">**Text boxes**</span></span> | <span data-ttu-id="6d01c-617">Para ver considerações de segurança, os métodos <xref:System.Windows.Forms.TextBoxBase.Copy%2A> e <xref:System.Windows.Forms.TextBoxBase.Cut%2A> falham silenciosamente quando são chamados em confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="6d01c-617">For security considerations, the <xref:System.Windows.Forms.TextBoxBase.Copy%2A> and <xref:System.Windows.Forms.TextBoxBase.Cut%2A> methods silently fail when they are called in partial trust.</span></span><br><br><span data-ttu-id="6d01c-618">Além disso, a execução programática da propriedade <xref:System.Windows.Input.ApplicationCommands.Copy> ou <xref:System.Windows.Input.ApplicationCommands.Cut> em um controle herdado de <xref:System.Windows.Controls.Primitives.TextBoxBase> será bloqueada em confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="6d01c-618">In addition, programmatic execution of the <xref:System.Windows.Input.ApplicationCommands.Copy> or <xref:System.Windows.Input.ApplicationCommands.Cut> property on a control that inherits from <xref:System.Windows.Controls.Primitives.TextBoxBase> will be blocked in partial trust.</span></span> <span data-ttu-id="6d01c-619">No entanto, os comandos copiar e recortar iniciados pelo usuário, como clicar em um botão cuja propriedade <xref:System.Windows.Controls.Primitives.ButtonBase.Command> esteja associada a um desses comandos, funcionarão.</span><span class="sxs-lookup"><span data-stu-id="6d01c-619">However, user-initiated copy and cut commands, such as clicking a button whose <xref:System.Windows.Controls.Primitives.ButtonBase.Command> property is bound to one of these commands, will work.</span></span> <span data-ttu-id="6d01c-620">O copiar e cortar padrão por meio de atalhos do teclado e o menu de contexto ainda funcionarão como antes em confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="6d01c-620">Standard copy and cut through keyboard shortcuts and the context menu will still work as before in partial trust.</span></span> | <span data-ttu-id="6d01c-621">Associe o comando <xref:System.Windows.Input.ApplicationCommands.Copy> ou <xref:System.Windows.Input.ApplicationCommands.Cut> a uma ação iniciada pelo usuário, como clicar em um botão.</span><span class="sxs-lookup"><span data-stu-id="6d01c-621">Bind the <xref:System.Windows.Input.ApplicationCommands.Copy> or <xref:System.Windows.Input.ApplicationCommands.Cut> command to a user-initiated action, such as clicking a button.</span></span> |

### <a name="graphics"></a><span data-ttu-id="6d01c-622">Gráficos</span><span class="sxs-lookup"><span data-stu-id="6d01c-622">Graphics</span></span>

<span data-ttu-id="6d01c-623">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Media.Effects>; assemblies: PresentationFramework (em PresentationFramework.dll), PresentationCore (em PresentationCore.dll), WindowsBase (em WindowsBase.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-623">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Media.Effects>; assemblies: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), WindowsBase (in WindowsBase.dll)</span></span>

| <span data-ttu-id="6d01c-624">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-624">Feature</span></span> | <span data-ttu-id="6d01c-625">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-625">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-626">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-626">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-627">**Efeitos de bitmap**</span><span class="sxs-lookup"><span data-stu-id="6d01c-627">**Bitmap effects**</span></span> | <span data-ttu-id="6d01c-628">Para melhorar o desempenho, a classe <xref:System.Windows.Media.Effects.BitmapEffect> e as classes herdadas da classe <xref:System.Windows.Media.Effects.BitmapEffect>, embora ainda presentes, estão desabilitadas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-628">To improve performance, the <xref:System.Windows.Media.Effects.BitmapEffect> class and the classes that inherit from the <xref:System.Windows.Media.Effects.BitmapEffect> class, although still present, are disabled.</span></span> <span data-ttu-id="6d01c-629">O efeito será renderizado usando o pipeline de renderização acelerado por hardware, se as seguintes condições forem verdadeiras:</span><span class="sxs-lookup"><span data-stu-id="6d01c-629">The effect will render by using the hardware-accelerated rendering pipeline if the following conditions are true:</span></span><br><br><span data-ttu-id="6d01c-630">\* O aplicativo usa um <xref:System.Windows.Media.Effects.DropShadowBitmapEffect> ou um <xref:System.Windows.Media.Effects.BlurBitmapEffect> que tem uma propriedade de raio definida como menos de 100 DIU.</span><span class="sxs-lookup"><span data-stu-id="6d01c-630">\* The application uses a <xref:System.Windows.Media.Effects.DropShadowBitmapEffect> or a <xref:System.Windows.Media.Effects.BlurBitmapEffect> that has a radius property set less than 100 DIU.</span></span><br><span data-ttu-id="6d01c-631">\* A placa de vídeo no computador que executa o aplicativo dá suporte a sombreador de pixel 2.0.</span><span class="sxs-lookup"><span data-stu-id="6d01c-631">\* The video card on the computer that runs the application supports pixel shader 2.0.</span></span><br><br><span data-ttu-id="6d01c-632">Se essas condições não forem atendidas, um objeto <xref:System.Windows.Media.Effects.BitmapEffect> não terá efeito.</span><span class="sxs-lookup"><span data-stu-id="6d01c-632">If these conditions are not met, a <xref:System.Windows.Media.Effects.BitmapEffect> object will have no effect.</span></span><br><br><span data-ttu-id="6d01c-633">Além disso, o Visual Studio produz um aviso do compilador quando encontra o objeto <xref:System.Windows.Media.Effects.BitmapEffect> ou uma subclasse.</span><span class="sxs-lookup"><span data-stu-id="6d01c-633">Also, Visual Studio produces a compiler warning when it encounters the <xref:System.Windows.Media.Effects.BitmapEffect> object or a subclass.</span></span><br><br><span data-ttu-id="6d01c-634">O método <xref:System.Windows.Media.DrawingContext.PushEffect%2A> está marcado como obsoleto.</span><span class="sxs-lookup"><span data-stu-id="6d01c-634">The <xref:System.Windows.Media.DrawingContext.PushEffect%2A> method is marked obsolete.</span></span> | <span data-ttu-id="6d01c-635">Interrompa o uso do <xref:System.Windows.Media.Effects.BitmapEffect> herdado e as classes derivadas e, em vez disso, use as novas classes derivadas de <xref:System.Windows.Media.Effects.Effect>: <xref:System.Windows.Media.Effects.BlurEffect>, <xref:System.Windows.Media.Effects.DropShadowEffect> e <xref:System.Windows.Media.Effects.ShaderEffect>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-635">Discontinue using the legacy <xref:System.Windows.Media.Effects.BitmapEffect> and derived classes and instead use the new classes derived from <xref:System.Windows.Media.Effects.Effect>: <xref:System.Windows.Media.Effects.BlurEffect>, <xref:System.Windows.Media.Effects.DropShadowEffect>, and <xref:System.Windows.Media.Effects.ShaderEffect>.</span></span><br><br><span data-ttu-id="6d01c-636">Também é possível criar seus próprios efeitos herdando da classe <xref:System.Windows.Media.Effects.ShaderEffect>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-636">You can also create your own effects by inheriting from the <xref:System.Windows.Media.Effects.ShaderEffect> class.</span></span> |
| <span data-ttu-id="6d01c-637">**Quadros de bitmap**</span><span class="sxs-lookup"><span data-stu-id="6d01c-637">**Bitmap frames**</span></span> | <span data-ttu-id="6d01c-638">Agora os objetos <xref:System.Windows.Media.Imaging.BitmapFrame> clonados recebem os eventos <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted> e <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-638">The cloned <xref:System.Windows.Media.Imaging.BitmapFrame> objects now receive the <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted>, and <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed> events.</span></span> <span data-ttu-id="6d01c-639">Isso permite que as imagens baixadas da Web e aplicadas ao controle <xref:System.Windows.Controls.Image> por meio de um <xref:System.Windows.Style> funcionem corretamente.</span><span class="sxs-lookup"><span data-stu-id="6d01c-639">This enables images that are downloaded from the Web and applied to the <xref:System.Windows.Controls.Image> control through a <xref:System.Windows.Style> to work correctly.</span></span><br><br><span data-ttu-id="6d01c-640">Você verá uma alteração no comportamento apenas se todas as instruções a seguir forem verdadeiras:</span><span class="sxs-lookup"><span data-stu-id="6d01c-640">You will see a change in behavior only if all of the following statements are true:</span></span><br><br><span data-ttu-id="6d01c-641">\* Você assinar o evento <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted> ou <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-641">\* You subscribe to the <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted>, or <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed> event.</span></span><br><span data-ttu-id="6d01c-642">\* A fonte do <xref:System.Windows.Media.Imaging.BitmapFrame> for da Web.</span><span class="sxs-lookup"><span data-stu-id="6d01c-642">\* The source of the <xref:System.Windows.Media.Imaging.BitmapFrame> is from the Web.</span></span><br><span data-ttu-id="6d01c-643">\* O <xref:System.Windows.Media.Imaging.BitmapFrame> for clonado enquanto o download ainda estiver em andamento.</span><span class="sxs-lookup"><span data-stu-id="6d01c-643">\* The <xref:System.Windows.Media.Imaging.BitmapFrame> is cloned while the download is still in progress.</span></span> | <span data-ttu-id="6d01c-644">Verifique o remetente no manipulador de eventos e execute a ação apenas se o remetente for original <xref:System.Windows.Media.Imaging.BitmapFrame>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-644">Check the sender in the event handler and take action only if the sender is the original <xref:System.Windows.Media.Imaging.BitmapFrame>.</span></span> |
| <span data-ttu-id="6d01c-645">**Decodificação de imagens**</span><span class="sxs-lookup"><span data-stu-id="6d01c-645">**Decoding images**</span></span> | <span data-ttu-id="6d01c-646">Para impedir que um <xref:System.IO.IOException> não seja tratado quando as imagens não puderem ser decodificadas, a classe <xref:System.Windows.Media.Imaging.BitmapSource> gerará o evento <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> quando ele não decodificar uma imagem.</span><span class="sxs-lookup"><span data-stu-id="6d01c-646">To prevent an <xref:System.IO.IOException> from not being handled when images may not decode, the <xref:System.Windows.Media.Imaging.BitmapSource> class will raise the <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> event when it does not decode an image.</span></span> | <span data-ttu-id="6d01c-647">Remova qualquer tratamento de exceções para <xref:System.IO.IOException> e use o evento <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> para verificar se há falha na decodificação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-647">Remove any exception handling for <xref:System.IO.IOException>, and use the <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> event to check for decode failure.</span></span> |

### <a name="input"></a><span data-ttu-id="6d01c-648">Entrada</span><span class="sxs-lookup"><span data-stu-id="6d01c-648">Input</span></span>

<span data-ttu-id="6d01c-649">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; assemblies: PresentationFramework (em PresentationFramework.dll), PresentationCore (em PresentationCore.dll), WindowsBase (em WindowsBase.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-649">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; assemblies: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), WindowsBase (in WindowsBase.dll)</span></span>

| <span data-ttu-id="6d01c-650">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-650">Feature</span></span> | <span data-ttu-id="6d01c-651">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-651">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-652">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-652">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-653">**Associação de instâncias de comando**</span><span class="sxs-lookup"><span data-stu-id="6d01c-653">**Binding command instances**</span></span> | <span data-ttu-id="6d01c-654">Para fornecer um mecanismo para associar as instâncias do comando baseado em View-Model para gestos de entrada baseados em View, agora a classe <xref:System.Windows.Input.InputBinding> é herdada de <xref:System.Windows.Freezable> em vez de <xref:System.Windows.DependencyObject>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-654">To provide a mechanism to bind View-Model-based command instances to View-based input gestures, the <xref:System.Windows.Input.InputBinding> class now inherits from <xref:System.Windows.Freezable> instead of <xref:System.Windows.DependencyObject>.</span></span> <span data-ttu-id="6d01c-655">Agora as seguintes propriedades são propriedades de dependência:</span><span class="sxs-lookup"><span data-stu-id="6d01c-655">The following properties are now dependency properties:</span></span><br><br>* <xref:System.Windows.Input.InputBinding.Command><br>* <xref:System.Windows.Input.InputBinding.CommandParameter><br>* <xref:System.Windows.Input.InputBinding.CommandTarget><br><br><span data-ttu-id="6d01c-656">Essa alteração resulta no seguinte:</span><span class="sxs-lookup"><span data-stu-id="6d01c-656">This change results in the following:</span></span><br><br><span data-ttu-id="6d01c-657">\* Agora um objeto <xref:System.Windows.Input.InputBinding> é congelado quando ele é registrado em vez de permanecer mutável.</span><span class="sxs-lookup"><span data-stu-id="6d01c-657">\* An <xref:System.Windows.Input.InputBinding> object is now frozen when it is registered instead of remaining mutable.</span></span><br><span data-ttu-id="6d01c-658">\* Não é possível acessar os objetos <xref:System.Windows.Input.InputBinding> de nível de instância de vários threads devido a restrições da classe <xref:System.Windows.DependencyObject>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-658">\* You cannot access instance-level <xref:System.Windows.Input.InputBinding> objects from multiple threads, due to the restrictions of the <xref:System.Windows.DependencyObject> class.</span></span><br><span data-ttu-id="6d01c-659">\* Não é possível modificar associações de entrada de nível de classe após seu registro devido a restrições da classe <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-659">\* You cannot mutate class-level input bindings after their registration, due to the restrictions of the <xref:System.Windows.Freezable> class.</span></span><br><span data-ttu-id="6d01c-660">\* Não é possível especificar associações de entrada em instâncias de comando criadas em um View-Model.</span><span class="sxs-lookup"><span data-stu-id="6d01c-660">\* You cannot specify input bindings on command instances that are created in a View-Model.</span></span> | <span data-ttu-id="6d01c-661">Crie instâncias separadas de uma classe <xref:System.Windows.Input.InputBinding> em threads separados se as associações precisarem ser mutáveis ou congele-as caso contrário.</span><span class="sxs-lookup"><span data-stu-id="6d01c-661">Create separate instances of an <xref:System.Windows.Input.InputBinding> class on separate threads if bindings are to be mutable, or freeze them otherwise.</span></span> <span data-ttu-id="6d01c-662">Não modifique um <xref:System.Windows.Input.InputBinding> estático de nível de classe depois de ele ser registrado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-662">Do not mutate a class-level static <xref:System.Windows.Input.InputBinding> after it has been registered.</span></span> |
| <span data-ttu-id="6d01c-663">**Aplicativos de navegador**</span><span class="sxs-lookup"><span data-stu-id="6d01c-663">**Browser applications**</span></span> | <span data-ttu-id="6d01c-664">Agora os .XBAP (aplicativos de navegador do WPF) processam eventos-chave como aplicativos do WPF autônomos para que os objetos recebam eventos-chave roteados na ordem correta.</span><span class="sxs-lookup"><span data-stu-id="6d01c-664">WPF Browser applications (.XBAP) now process key events just like stand-alone WPF applications so that objects receive routed key events in the correct order.</span></span> | <span data-ttu-id="6d01c-665">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-665">None.</span></span> |
| <span data-ttu-id="6d01c-666">**Combinações de teclas inativas**</span><span class="sxs-lookup"><span data-stu-id="6d01c-666">**Dead key combinations**</span></span> | <span data-ttu-id="6d01c-667">O WPF ofusca teclas inativas, que não produzem nenhum caractere visível, mas, em vez disso, indica que a chave deve ser combinada com a próxima chave de letra para produzir um caractere.</span><span class="sxs-lookup"><span data-stu-id="6d01c-667">WPF obfuscates dead keys, which produce no visible character, but instead indicates that the key is to be combined with the next letter key to produce one character.</span></span> <span data-ttu-id="6d01c-668">Os eventos-chave de entrada, como o evento <xref:System.Windows.Input.Keyboard.KeyDownEvent>, relatam quando uma chave é uma tecla inativa, definindo a propriedade <xref:System.Windows.Input.KeyEventArgs.Key> como o valor <xref:System.Windows.Input.Key>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-668">The key input events, such as the <xref:System.Windows.Input.Keyboard.KeyDownEvent> event, report when a key is a dead key by setting the <xref:System.Windows.Input.KeyEventArgs.Key> property to the <xref:System.Windows.Input.Key> value.</span></span> <span data-ttu-id="6d01c-669">Geralmente esse é o comportamento esperado, porque os aplicativos normalmente não pretendem responder à entrada do teclado que cria um caractere combinado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-669">This is usually expected behavior because applications usually do not intend to respond to keyboard input that creates a combined character.</span></span> | <span data-ttu-id="6d01c-670">Os aplicativos que esperam ler as chaves que faziam parte de caracteres combinadas podem obter a chave agora ofuscada usando a propriedade <xref:System.Windows.Input.KeyEventArgs.DeadCharProcessedKey>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-670">Applications that expect to read keys that were part of combined characters can get the now obfuscated key by using the <xref:System.Windows.Input.KeyEventArgs.DeadCharProcessedKey> property.</span></span> |
| <span data-ttu-id="6d01c-671">**Gerenciador de foco**</span><span class="sxs-lookup"><span data-stu-id="6d01c-671">**Focus manager**</span></span> | <span data-ttu-id="6d01c-672">Quando o método <xref:System.Windows.Input.FocusManager.GetFocusedElement(System.Windows.DependencyObject)?displayProperty=nameWithType> receber um elemento que tem a propriedade anexada [IsFocusScope](xref:System.Windows.Input.FocusManager.IsFocusScope%2A) definida como `true`, o método retornará um elemento que é o último elemento de foco no teclado dentro do escopo desse foco se e somente se o elemento retornado pertencer ao mesmo objeto <xref:System.Windows.PresentationSource> que o elemento passado para o método.</span><span class="sxs-lookup"><span data-stu-id="6d01c-672">When the <xref:System.Windows.Input.FocusManager.GetFocusedElement(System.Windows.DependencyObject)?displayProperty=nameWithType> method is passed an element that has the [IsFocusScope](xref:System.Windows.Input.FocusManager.IsFocusScope%2A) attached property set to `true`, the method returns an element that is the last keyboard-focused element within that focus scope if and only if the returned element belongs to the same <xref:System.Windows.PresentationSource> object as the element that is passed to the method.</span></span> | <span data-ttu-id="6d01c-673">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-673">None.</span></span> |

### <a name="ui-automation"></a><span data-ttu-id="6d01c-674">Automação da interface do usuário</span><span class="sxs-lookup"><span data-stu-id="6d01c-674">UI Automation</span></span>

<span data-ttu-id="6d01c-675">Namespace: <xref:System.Windows>, <xref:System.Windows.Automation.Peers>, <xref:System.Windows.Automation.Provider>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; assemblies: PresentationFramework (em PresentationFramework.dll), PresentationCore (em PresentationCore.dll), UIAutomationProvider (em UIAutomationProvider.dll), WindowsBase (em WindowsBase.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-675">Namespace: <xref:System.Windows>, <xref:System.Windows.Automation.Peers>, <xref:System.Windows.Automation.Provider>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; assemblies: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), UIAutomationProvider (in UIAutomationProvider.dll), WindowsBase (in WindowsBase.dll)</span></span>

| <span data-ttu-id="6d01c-676">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-676">Feature</span></span> | <span data-ttu-id="6d01c-677">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-677">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-678">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-678">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-679">**Hierarquia de classe de exibições**</span><span class="sxs-lookup"><span data-stu-id="6d01c-679">**Class hierarchy of views**</span></span> | <span data-ttu-id="6d01c-680">As classes <xref:System.Windows.Automation.Peers.TreeViewAutomationPeer> e <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> são herdadas de <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer> em vez de <xref:System.Windows.Automation.Peers.FrameworkElementAutomationPeer>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-680">The <xref:System.Windows.Automation.Peers.TreeViewAutomationPeer> and <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> classes inherit from <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer> instead of <xref:System.Windows.Automation.Peers.FrameworkElementAutomationPeer>.</span></span> | <span data-ttu-id="6d01c-681">Se você herdar das classes <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> e substituir o método <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer.GetChildrenCore%2A>, considere retornar um objeto herdado da nova classe <xref:System.Windows.Automation.Peers.TreeViewDataItemAutomationPeer>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-681">If you inherit from the <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> classes and override the <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer.GetChildrenCore%2A> method, consider returning an object that inherits from the new <xref:System.Windows.Automation.Peers.TreeViewDataItemAutomationPeer> class.</span></span> |
| <span data-ttu-id="6d01c-682">**Contêineres fora da tela**</span><span class="sxs-lookup"><span data-stu-id="6d01c-682">**Containers off screen**</span></span> | <span data-ttu-id="6d01c-683">Para corrigir um valor retornado incorreto, agora o método <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.IsOffscreenCore%2A> retorna corretamente `false` para contêineres de itens rolados para fora da exibição.</span><span class="sxs-lookup"><span data-stu-id="6d01c-683">To fix an incorrect return value, the <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.IsOffscreenCore%2A> method now correctly returns `false` for item containers that are scrolled out of view.</span></span> <span data-ttu-id="6d01c-684">Além disso, o valor do método não é afetado por oclusão por outras janelas ou se o elemento está visível em um monitor específico.</span><span class="sxs-lookup"><span data-stu-id="6d01c-684">Also, the value of the method is not affected by occlusion by other windows, or by whether the element is visible on a specific monitor.</span></span> | <span data-ttu-id="6d01c-685">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-685">None.</span></span> |
| <span data-ttu-id="6d01c-686">**Menus e objetos filho**</span><span class="sxs-lookup"><span data-stu-id="6d01c-686">**Menus and child objects**</span></span> | <span data-ttu-id="6d01c-687">Para habilitar a automação da interface do usuário dos menus que contêm filhos diferentes de objetos <xref:System.Windows.Controls.MenuItem>, agora o método <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer.GetChildrenCore%2A> retorna o objeto <xref:System.Windows.Automation.Peers.AutomationPeer> de um objeto <xref:System.Windows.UIElement> filho, em vez de um objeto <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-687">To enable UI automation of menus that contain children other than <xref:System.Windows.Controls.MenuItem> objects, the <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer.GetChildrenCore%2A> method now returns the <xref:System.Windows.Automation.Peers.AutomationPeer> object of a child <xref:System.Windows.UIElement> object, instead of a <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer> object.</span></span> | <span data-ttu-id="6d01c-688">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-688">None.</span></span> |
| <span data-ttu-id="6d01c-689">**Novas interfaces e assembly**</span><span class="sxs-lookup"><span data-stu-id="6d01c-689">**New interfaces and assembly**</span></span> | <span data-ttu-id="6d01c-690">Para habilitar novos recursos de automação de interface do usuário, as interfaces a seguir foram adicionadas:</span><span class="sxs-lookup"><span data-stu-id="6d01c-690">To enable new features for UI automation, the following interfaces were added:</span></span><br><br>* <xref:System.Windows.Automation.Provider.IItemContainerProvider><br>* <xref:System.Windows.Automation.Provider.ISynchronizedInputProvider><br>* <xref:System.Windows.Automation.Provider.IVirtualizedItemProvider> | <span data-ttu-id="6d01c-691">Qualquer projeto que cria pares de automação do WPF deve adicionar uma referência explícita a UIAutomationProvider.dll.</span><span class="sxs-lookup"><span data-stu-id="6d01c-691">Any project that builds WPF automation peers must add an explicit reference to UIAutomationProvider.dll.</span></span> |
| <span data-ttu-id="6d01c-692">**Miniaturas**</span><span class="sxs-lookup"><span data-stu-id="6d01c-692">**Thumbs**</span></span> | <span data-ttu-id="6d01c-693">O método <xref:System.Windows.Automation.Peers.ThumbAutomationPeer.GetClassNameCore%2A> retorna um valor em vez de null.</span><span class="sxs-lookup"><span data-stu-id="6d01c-693">The <xref:System.Windows.Automation.Peers.ThumbAutomationPeer.GetClassNameCore%2A> method returns a value instead of null.</span></span> <span data-ttu-id="6d01c-694">Portanto, controles como <xref:System.Windows.Controls.GridSplitter> herdados da classe <xref:System.Windows.Controls.Primitives.Thumb> relatarão um nome para a automação da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="6d01c-694">Therefore, controls such as <xref:System.Windows.Controls.GridSplitter> that inherit from the <xref:System.Windows.Controls.Primitives.Thumb> class will report a name to UI Automation.</span></span> | <span data-ttu-id="6d01c-695">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="6d01c-695">None.</span></span> |
| <span data-ttu-id="6d01c-696">**Elementos virtualizados**</span><span class="sxs-lookup"><span data-stu-id="6d01c-696">**Virtualized elements**</span></span> | <span data-ttu-id="6d01c-697">Para aprimorar o desempenho, o método <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.GetChildrenCore%2A> retorna apenas os objetos filho que realmente estão na árvore visual, em vez de todos os objetos filho, independentemente se eles são virtualizados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-697">To improve performance, the <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.GetChildrenCore%2A> method returns only the child objects that are actually in the visual tree, instead of all child objects, regardless of whether they are virtualized.</span></span> | <span data-ttu-id="6d01c-698">Use <xref:System.Windows.Automation.ItemContainerPattern> para iterar em todos os itens de um <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-698">Use <xref:System.Windows.Automation.ItemContainerPattern> to iterate over all items of an <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer>.</span></span> |

### <a name="xaml"></a><span data-ttu-id="6d01c-699">XAML</span><span class="sxs-lookup"><span data-stu-id="6d01c-699">XAML</span></span>

<span data-ttu-id="6d01c-700">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Markup>; assemblies: PresentationFramework (em PresentationFramework.dll), PresentationCore (em PresentationCore.dll), WindowsBase (em WindowsBase.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-700">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Markup>; assemblies: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), WindowsBase (in WindowsBase.dll)</span></span>

| <span data-ttu-id="6d01c-701">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-701">Feature</span></span> | <span data-ttu-id="6d01c-702">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-702">Differences from 3.5 SP1</span></span> | <span data-ttu-id="6d01c-703">Alterações recomendadas</span><span class="sxs-lookup"><span data-stu-id="6d01c-703">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="6d01c-704">**Extensão de marcação**</span><span class="sxs-lookup"><span data-stu-id="6d01c-704">**Markup extension**</span></span> | <span data-ttu-id="6d01c-705">Agora o WPF sempre usa corretamente o valor do método <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> em vez de retornar o objeto <xref:System.Windows.Markup.MarkupExtension> em determinados casos quando uma extensão de marcação é usada para definir uma propriedade ou para criar um item em uma coleção.</span><span class="sxs-lookup"><span data-stu-id="6d01c-705">WPF now correctly always uses the value from the <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> method instead of returning the <xref:System.Windows.Markup.MarkupExtension> object in certain cases when a markup extension is used to set a property or to create an item in a collection.</span></span> <span data-ttu-id="6d01c-706">Uma extensão de marcação pode retornar a si mesma em alguns casos.</span><span class="sxs-lookup"><span data-stu-id="6d01c-706">A markup extension might return itself in some cases.</span></span> | <span data-ttu-id="6d01c-707">Se seu aplicativo acessar um recurso que retornou um objeto <xref:System.Windows.Markup.MarkupExtension> em versões anteriores, referencie o objeto retornado de <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, em vez do objeto <xref:System.Windows.Markup.MarkupExtension>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-707">If your application accesses a resource that returned a <xref:System.Windows.Markup.MarkupExtension> object in earlier versions, reference the object that is returned from <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, instead of the <xref:System.Windows.Markup.MarkupExtension> object.</span></span> |
| <span data-ttu-id="6d01c-708">**Análise de atributos**</span><span class="sxs-lookup"><span data-stu-id="6d01c-708">**Parsing attributes**</span></span> | <span data-ttu-id="6d01c-709">Agora os atributos em XAML podem ter apenas um ponto.</span><span class="sxs-lookup"><span data-stu-id="6d01c-709">Attributes in XAML can now have only one period.</span></span> <span data-ttu-id="6d01c-710">Por exemplo, os exemplos a seguir são válidos:</span><span class="sxs-lookup"><span data-stu-id="6d01c-710">For example, the following are valid:</span></span><br><br><span data-ttu-id="6d01c-711">`<Button Background="Red"/>` (nenhum ponto)</span><span class="sxs-lookup"><span data-stu-id="6d01c-711">`<Button Background="Red"/>` (no periods)</span></span><br><br><span data-ttu-id="6d01c-712">`<Button Button.Background = "Red"/>` (um ponto)</span><span class="sxs-lookup"><span data-stu-id="6d01c-712">`<Button Button.Background = "Red"/>` (one period)</span></span><br><br><span data-ttu-id="6d01c-713">O exemplo a seguir não é mais válido:</span><span class="sxs-lookup"><span data-stu-id="6d01c-713">The following is no longer valid:</span></span><br><br><span data-ttu-id="6d01c-714">`<Button Control.Button.Background = "Red"/>` (mais de um ponto)</span><span class="sxs-lookup"><span data-stu-id="6d01c-714">`<Button Control.Button.Background = "Red"/>` (more than one period)</span></span> | <span data-ttu-id="6d01c-715">Atributos XAML corretos que têm mais de um período.</span><span class="sxs-lookup"><span data-stu-id="6d01c-715">Correct XAML attributes that have more than one period.</span></span> |

## <a name="xml"></a><span data-ttu-id="6d01c-716">XML</span><span class="sxs-lookup"><span data-stu-id="6d01c-716">XML</span></span>

<span data-ttu-id="6d01c-717">As linhas desta tabela descrevem aprimoramentos em recursos que anteriormente tinham limitações ou outros problemas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-717">The rows in this table describe improvements to features that previously had limitations or other issues.</span></span>

### <a name="schema-and-transforms"></a><span data-ttu-id="6d01c-718">Esquema e transformações</span><span class="sxs-lookup"><span data-stu-id="6d01c-718">Schema and transforms</span></span>

<span data-ttu-id="6d01c-719">Namespaces: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; assemblies: System.Xml (em System.Xml.dll), System.Xml.Linq (em System.Xml.Linq.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-719">Namespaces: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; assemblies: System.Xml (in System.Xml.dll), System.Xml.Linq (in System.Xml.Linq.dll)</span></span>

| <span data-ttu-id="6d01c-720">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-720">Feature</span></span> | <span data-ttu-id="6d01c-721">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-721">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="6d01c-722">**Esquemas Chameleon**</span><span class="sxs-lookup"><span data-stu-id="6d01c-722">**Chameleon schemas**</span></span> | <span data-ttu-id="6d01c-723">Para evitar dados corrompidos, agora os esquemas Chameleon são clonados corretamente quando são incluídos com vários esquemas.</span><span class="sxs-lookup"><span data-stu-id="6d01c-723">To prevent data corruption, chameleon schemas are now cloned correctly when they are included with multiple schemas.</span></span><br><br><span data-ttu-id="6d01c-724">Os esquemas Chameleon são esquemas que não têm um namespace de destino e quando eles são incluídos em outro XSD, eles assumem o namespace de destino do esquema de importação.</span><span class="sxs-lookup"><span data-stu-id="6d01c-724">Chameleon schemas are schemas that do not have a target namespace, and when they are included in another XSD, they take on the target namespace of the importing schema.</span></span> <span data-ttu-id="6d01c-725">Geralmente, eles são usados para incluir tipos comuns em um esquema.</span><span class="sxs-lookup"><span data-stu-id="6d01c-725">They are often used to include common types into a schema.</span></span> |
| <span data-ttu-id="6d01c-726">**Funções de ID**</span><span class="sxs-lookup"><span data-stu-id="6d01c-726">**ID functions**</span></span> | <span data-ttu-id="6d01c-727">Agora a [função de ID](/sql/xquery/functions-on-sequences-id) XSLT retorna o valor correto, em vez de null quando um objeto <xref:System.Xml.XmlReader> é passado para um XSLT.</span><span class="sxs-lookup"><span data-stu-id="6d01c-727">The XSLT [id function](/sql/xquery/functions-on-sequences-id) now returns the correct value instead of null when an <xref:System.Xml.XmlReader> object is passed to an XLST.</span></span><br><br><span data-ttu-id="6d01c-728">Se o usuário criou um objeto <xref:System.Xml.XmlReader> de uma classe LINQ to XML usando o método <xref:System.Xml.Linq.XNode.CreateReader%2A> e esse objeto <xref:System.Xml.XmlReader> foi passado para um XSLT, quaisquer instâncias da função `id` no XSLT anteriormente retornavam null.</span><span class="sxs-lookup"><span data-stu-id="6d01c-728">If the user created an <xref:System.Xml.XmlReader> object from a LINQ to XML class by using the <xref:System.Xml.Linq.XNode.CreateReader%2A> method, and this <xref:System.Xml.XmlReader> object was passed to an XSLT, any instances of the `id` function in the XSLT previously returned null.</span></span> <span data-ttu-id="6d01c-729">Esse não é um valor retornado permitido para a função `id`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-729">This is not an allowed return value for the `id` function.</span></span> |
| <span data-ttu-id="6d01c-730">**Atributo do namespace**</span><span class="sxs-lookup"><span data-stu-id="6d01c-730">**Namespace attribute**</span></span> | <span data-ttu-id="6d01c-731">Para evitar dados corrompidos, agora um objeto <xref:System.Xml.XPath.XPathNavigator> retorna o nome local do atributo `x:xmlns` corretamente.</span><span class="sxs-lookup"><span data-stu-id="6d01c-731">To prevent data corruption, an <xref:System.Xml.XPath.XPathNavigator> object now returns the local name of the `x:xmlns` attribute correctly.</span></span> |
| <span data-ttu-id="6d01c-732">**Declarações de namespace**</span><span class="sxs-lookup"><span data-stu-id="6d01c-732">**Namespace declarations**</span></span> | <span data-ttu-id="6d01c-733">Um objeto <xref:System.Xml.XmlReader> em uma subárvore não cria mais declarações de namespace duplicadas em um elemento XML.</span><span class="sxs-lookup"><span data-stu-id="6d01c-733">An <xref:System.Xml.XmlReader> object on a sub-tree no longer creates duplicate namespace declarations within one XML element.</span></span> |
| <span data-ttu-id="6d01c-734">**Validação do esquema**</span><span class="sxs-lookup"><span data-stu-id="6d01c-734">**Schema validation**</span></span> | <span data-ttu-id="6d01c-735">Para impedir uma validação do esquema incorreta, a classe <xref:System.Xml.Schema.XmlSchemaSet> permite que esquemas XSD sejam compilados de maneira correta e consistente.</span><span class="sxs-lookup"><span data-stu-id="6d01c-735">To prevent erroneous schema validation, the <xref:System.Xml.Schema.XmlSchemaSet> class allows for XSD schemas to be compiled correctly and consistently.</span></span> <span data-ttu-id="6d01c-736">Esses esquemas podem incluir outros esquemas; por exemplo, `A.xsd` pode incluir `B.xsd`, que pode incluir `C.xsd`.</span><span class="sxs-lookup"><span data-stu-id="6d01c-736">These schemas can include other schemas; for example, `A.xsd` can include `B.xsd`, which can include `C.xsd`.</span></span> <span data-ttu-id="6d01c-737">A compilação de qualquer um desses exemplos faz o grafo de dependências ser atravessado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-737">Compiling any one of these causes this graph of dependencies to be traversed.</span></span> |
| <span data-ttu-id="6d01c-738">**Funções de script**</span><span class="sxs-lookup"><span data-stu-id="6d01c-738">**Script functions**</span></span> | <span data-ttu-id="6d01c-739">A [função function-available](https://msdn.microsoft.com/library/ms256124(v=vs.110).aspx) não retorna mais `false` incorretamente quando a função está realmente disponível.</span><span class="sxs-lookup"><span data-stu-id="6d01c-739">The [function-available function](https://msdn.microsoft.com/library/ms256124(v=vs.110).aspx) no longer incorrectly returns `false` when the function is actually available.</span></span> |
| <span data-ttu-id="6d01c-740">**URIs**</span><span class="sxs-lookup"><span data-stu-id="6d01c-740">**URIs**</span></span> | <span data-ttu-id="6d01c-741">Agora o método <xref:System.Xml.Linq.XElement.Load%2A> retorna o BaseURI correto em consultas LINQ.</span><span class="sxs-lookup"><span data-stu-id="6d01c-741">The <xref:System.Xml.Linq.XElement.Load%2A> method now returns the correct BaseURI in LINQ queries.</span></span> |

### <a name="validation"></a><span data-ttu-id="6d01c-742">Validação</span><span class="sxs-lookup"><span data-stu-id="6d01c-742">Validation</span></span>

<span data-ttu-id="6d01c-743">Namespaces: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; assemblies: System.Xml (em System.Xml.dll), System.Xml.Linq (em System.Xml.Linq.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-743">Namespaces: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; assemblies: System.Xml (in System.Xml.dll), System.Xml.Linq (in System.Xml.Linq.dll)</span></span>

| <span data-ttu-id="6d01c-744">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-744">Feature</span></span> | <span data-ttu-id="6d01c-745">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-745">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="6d01c-746">**Resolvedores de namespace**</span><span class="sxs-lookup"><span data-stu-id="6d01c-746">**Namespace resolvers**</span></span> | <span data-ttu-id="6d01c-747">O método <xref:System.Xml.XmlReader.ReadContentAs%2A> não ignora mais o resolvedor <xref:System.Xml.IXmlNamespaceResolver> passado para ele.</span><span class="sxs-lookup"><span data-stu-id="6d01c-747">The <xref:System.Xml.XmlReader.ReadContentAs%2A> method no longer ignores the <xref:System.Xml.IXmlNamespaceResolver> resolver passed to it.</span></span><br><br><span data-ttu-id="6d01c-748">Nas versões anteriores, o resolvedor de namespace especificado foi ignorado e o <xref:System.Xml.XmlReader> foi usado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-748">In previous versions, the specified namespace resolver was ignored, and the <xref:System.Xml.XmlReader> was used instead.</span></span> |
| <span data-ttu-id="6d01c-749">**Espaço em branco**</span><span class="sxs-lookup"><span data-stu-id="6d01c-749">**White space**</span></span> | <span data-ttu-id="6d01c-750">Para evitar a perda de dados quando você estiver criando um leitor, o método <xref:System.Xml.XmlReader.Create%2A> não descarta mais espaços em branco significativos.</span><span class="sxs-lookup"><span data-stu-id="6d01c-750">To prevent data loss when you are creating a reader, the <xref:System.Xml.XmlReader.Create%2A> method no longer discards significant white space.</span></span><br><br><span data-ttu-id="6d01c-751">A validação de XML reconhece o modo de conteúdo misto, no qual o texto pode ser mesclado com a marcação XML.</span><span class="sxs-lookup"><span data-stu-id="6d01c-751">XML validation recognizes mixed-content mode, where text can be intermixed with XML markup.</span></span> <span data-ttu-id="6d01c-752">No modo misto, qualquer espaço em branco é significativo e deve ser relatado.</span><span class="sxs-lookup"><span data-stu-id="6d01c-752">In mixed mode, all white space is significant and should be reported.</span></span> |

### <a name="writing"></a><span data-ttu-id="6d01c-753">Gravação</span><span class="sxs-lookup"><span data-stu-id="6d01c-753">Writing</span></span>

<span data-ttu-id="6d01c-754">Namespaces: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; assemblies: System.Xml (em System.Xml.dll), System.Xml.Linq (em System.Xml.Linq.dll)</span><span class="sxs-lookup"><span data-stu-id="6d01c-754">Namespaces: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; assemblies: System.Xml (in System.Xml.dll), System.Xml.Linq (in System.Xml.Linq.dll)</span></span>

| <span data-ttu-id="6d01c-755">Recurso</span><span class="sxs-lookup"><span data-stu-id="6d01c-755">Feature</span></span> | <span data-ttu-id="6d01c-756">Diferenças de 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="6d01c-756">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="6d01c-757">**Referências de entidade**</span><span class="sxs-lookup"><span data-stu-id="6d01c-757">**Entity references**</span></span> | <span data-ttu-id="6d01c-758">Para evitar dados corrompidos, as referências de entidade não são mais criadas duas vezes em atributos XML.</span><span class="sxs-lookup"><span data-stu-id="6d01c-758">To prevent data corruption, entity references are no longer entitized twice in XML attributes.</span></span><br><br><span data-ttu-id="6d01c-759">Se o usuário tentou gravar uma entidade em um atributo `xmlns` ou em um atributo `xml:lang` ou `xml:space` usando o método <xref:System.Xml.XmlWriter.WriteEntityRef%2A>, a entidade foi criada duas vezes na saída, corrompendo, portanto, os dados.</span><span class="sxs-lookup"><span data-stu-id="6d01c-759">If the user tried to write an entity into an `xmlns` attribute or into an `xml:lang` or `xml:space` attribute by using the <xref:System.Xml.XmlWriter.WriteEntityRef%2A> method, the entity was entitized twice in the output, therefore corrupting the data.</span></span> |
| <span data-ttu-id="6d01c-760">**Tratamento de nova linha**</span><span class="sxs-lookup"><span data-stu-id="6d01c-760">**New line handling**</span></span> | <span data-ttu-id="6d01c-761">Para evitar dados corrompidos, os objetos <xref:System.Xml.XmlWriter> respeitam a opção <xref:System.Xml.NewLineHandling>.</span><span class="sxs-lookup"><span data-stu-id="6d01c-761">To prevent data corruption, <xref:System.Xml.XmlWriter> objects respect the <xref:System.Xml.NewLineHandling> option.</span></span> |

## <a name="see-also"></a><span data-ttu-id="6d01c-762">Consulte também</span><span class="sxs-lookup"><span data-stu-id="6d01c-762">See also</span></span>

### <a name="reference"></a><span data-ttu-id="6d01c-763">Referência</span><span class="sxs-lookup"><span data-stu-id="6d01c-763">Reference</span></span>

- [<span data-ttu-id="6d01c-764">Novos tipos e membros no .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="6d01c-764">New Types and Members in the .NET Framework 4</span></span>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff641764%28v=vs.100%29)

### <a name="concepts"></a><span data-ttu-id="6d01c-765">Conceitos</span><span class="sxs-lookup"><span data-stu-id="6d01c-765">Concepts</span></span>

- [<span data-ttu-id="6d01c-766">Guia de migração do .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="6d01c-766">Migration Guide to the .NET Framework 4</span></span>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff657133%28v=vs.100%29)
- [<span data-ttu-id="6d01c-767">Novidades do .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="6d01c-767">What's New in the .NET Framework 4</span></span>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms171868%28v=vs.100%29)
- [<span data-ttu-id="6d01c-768">Compatibilidade de versão no .NET Framework</span><span class="sxs-lookup"><span data-stu-id="6d01c-768">Version Compatibility in the .NET Framework</span></span>](../../../docs/framework/migration-guide/version-compatibility.md)
- [<span data-ttu-id="6d01c-769">Migração de soluções do Office para o .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="6d01c-769">Migrating Office Solutions to the .NET Framework 4</span></span>](/visualstudio/vsto/migrating-office-solutions-to-the-dotnet-framework-4-or-later)

### <a name="other-resources"></a><span data-ttu-id="6d01c-770">Outros recursos</span><span class="sxs-lookup"><span data-stu-id="6d01c-770">Other resources</span></span>

- [<span data-ttu-id="6d01c-771">O que está obsoleto na biblioteca de classes .NET Framework</span><span class="sxs-lookup"><span data-stu-id="6d01c-771">What's Obsolete in the .NET Framework Class Library</span></span>](../whats-new/whats-obsolete.md)
