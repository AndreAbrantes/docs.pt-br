---
title: Considerações sobre segurança de assemblies
ms.date: 03/30/2017
helpviewer_keywords:
- assemblies [.NET Framework], security
- signcodes
- names [.NET Framework], assemblies
- strong-named assemblies, security considerations
- signing assemblies
- assemblies [.NET Framework], signing
- granting permissions, assemblies
- assemblies [.NET Framework], strong-named
- names [.NET Framework], strong names
- permissions [.NET Framework], assemblies
- security [.NET Framework], assemblies
- integrity with assemblies
ms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 53b33bdc70f00d5c824d502043a69f4ee05acc71
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/22/2019
ms.locfileid: "69927971"
---
# <a name="assembly-security-considerations"></a><span data-ttu-id="bb45b-102">Considerações sobre segurança de assemblies</span><span class="sxs-lookup"><span data-stu-id="bb45b-102">Assembly Security Considerations</span></span>
<a name="top"></a> <span data-ttu-id="bb45b-103">Ao criar um assembly, você pode especificar um conjunto de permissões que o assembly exige para ser executado.</span><span class="sxs-lookup"><span data-stu-id="bb45b-103">When you build an assembly, you can specify a set of permissions that the assembly requires to run.</span></span> <span data-ttu-id="bb45b-104">Se determinadas permissões são concedidas ou não a um assembly é algo que se baseia na evidência.</span><span class="sxs-lookup"><span data-stu-id="bb45b-104">Whether certain permissions are granted or not granted to an assembly is based on evidence.</span></span>  
  
 <span data-ttu-id="bb45b-105">Existem duas formas distintas de usar a evidência:</span><span class="sxs-lookup"><span data-stu-id="bb45b-105">There are two distinct ways evidence is used:</span></span>  
  
- <span data-ttu-id="bb45b-106">A evidência de entrada é mesclada com a evidência coletada pelo carregador para criar um conjunto final de evidências usado na resolução da política.</span><span class="sxs-lookup"><span data-stu-id="bb45b-106">The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution.</span></span> <span data-ttu-id="bb45b-107">Entre os métodos que usam essa semântica estão **Assembly.Load**, **Assembly.LoadFrom** e **Activator.CreateInstance**.</span><span class="sxs-lookup"><span data-stu-id="bb45b-107">The methods that use this semantic include **Assembly.Load**, **Assembly.LoadFrom**, and **Activator.CreateInstance**.</span></span>  
  
- <span data-ttu-id="bb45b-108">A evidência de entrada é usada inalterada como o conjunto final de evidências usado na resolução da política.</span><span class="sxs-lookup"><span data-stu-id="bb45b-108">The input evidence is used unaltered as the final set of evidence used for policy resolution.</span></span> <span data-ttu-id="bb45b-109">Entre os métodos que usam essa semântica estão **Assembly.Load(byte[])** e **AppDomain.DefineDynamicAssembly()** .</span><span class="sxs-lookup"><span data-stu-id="bb45b-109">The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()**.</span></span>  
  
 <span data-ttu-id="bb45b-110">Permissões opcionais podem ser concedidas pelo conjunto de [políticas de segurança](../../../docs/framework/misc/code-access-security-basics.md) no computador em que o assembly será executado.</span><span class="sxs-lookup"><span data-stu-id="bb45b-110">Optional permissions can be granted by the [security policy](../../../docs/framework/misc/code-access-security-basics.md) set on the computer where the assembly will run.</span></span> <span data-ttu-id="bb45b-111">Se quiser que o código identifique todas as exceções de segurança em potencial, você poderá seguir um destes procedimentos:</span><span class="sxs-lookup"><span data-stu-id="bb45b-111">If you want your code to handle all potential security exceptions, you can do one of the following:</span></span>  
  
- <span data-ttu-id="bb45b-112">Insira uma solicitação de permissão para todas as permissões que seu código deve ter e identifique antecipadamente a falha de tempo de carga que ocorrerá se as permissões não forem concedidas.</span><span class="sxs-lookup"><span data-stu-id="bb45b-112">Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.</span></span>  
  
- <span data-ttu-id="bb45b-113">Não use uma solicitação de permissão para obter permissões de que seu código possa precisar, mas esteja preparado para identificar exceções de segurança se as permissões não forem concedidas.</span><span class="sxs-lookup"><span data-stu-id="bb45b-113">Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="bb45b-114">Segurança é uma área complexa, e você tem várias opções para escolher.</span><span class="sxs-lookup"><span data-stu-id="bb45b-114">Security is a complex area, and you have many options to choose from.</span></span> <span data-ttu-id="bb45b-115">Para saber mais, confira [Conceitos-chave sobre segurança](../../standard/security/key-security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="bb45b-115">For more information, see [Key Security Concepts](../../standard/security/key-security-concepts.md).</span></span>  
  
 <span data-ttu-id="bb45b-116">No momento do carregamento, a evidência do assembly é usada como entrada para uma política de segurança.</span><span class="sxs-lookup"><span data-stu-id="bb45b-116">At load time, the assembly's evidence is used as input to security policy.</span></span> <span data-ttu-id="bb45b-117">A política de segurança é estabelecida pela empresa e pelo administrador do computador, bem como por configurações de política do usuário e determina o conjunto de permissões concedido a todo o código gerenciado quando executado.</span><span class="sxs-lookup"><span data-stu-id="bb45b-117">Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed.</span></span> <span data-ttu-id="bb45b-118">A política de segurança pode ser estabelecida para o editor do assembly (se ele tiver uma assinatura gerada por uma ferramenta de assinatura), para o site e a zona (em termos do Internet Explorer) de onde o assembly foi baixado, ou para o nome forte do assembly.</span><span class="sxs-lookup"><span data-stu-id="bb45b-118">Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name.</span></span> <span data-ttu-id="bb45b-119">Por exemplo, um administrador de computador pode estabelecer uma política de segurança que permite que todo código baixado de um site e assinado por uma determinada empresa de software acesse um banco de dados em um computador, mas não dê acesso para gravar no disco do computador.</span><span class="sxs-lookup"><span data-stu-id="bb45b-119">For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.</span></span>  
  
## <a name="strong-named-assemblies-and-signing-tools"></a><span data-ttu-id="bb45b-120">Assemblies de nome forte e ferramentas de assinatura</span><span class="sxs-lookup"><span data-stu-id="bb45b-120">Strong-Named Assemblies and Signing Tools</span></span>  

 > [!WARNING]
 > <span data-ttu-id="bb45b-121">Por segurança, não confie em nomes fortes.</span><span class="sxs-lookup"><span data-stu-id="bb45b-121">Do not rely on strong names for security.</span></span> <span data-ttu-id="bb45b-122">Eles apenas fornecem uma identidade exclusiva.</span><span class="sxs-lookup"><span data-stu-id="bb45b-122">They provide a unique identity only.</span></span>

 <span data-ttu-id="bb45b-123">Você pode assinar um assembly de duas maneiras diferentes, mas complementares: com um nome forte ou usando [SignTool.exe (Ferramenta de assinatura)](../../../docs/framework/tools/signtool-exe.md).</span><span class="sxs-lookup"><span data-stu-id="bb45b-123">You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md).</span></span> <span data-ttu-id="bb45b-124">Assinar um assembly com um nome forte adiciona uma criptografia de chave pública ao arquivo que contém o manifesto do assembly.</span><span class="sxs-lookup"><span data-stu-id="bb45b-124">Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest.</span></span> <span data-ttu-id="bb45b-125">Assinatura de nome forte ajuda a verificar a exclusividade do nome, a evitar falsificação de nome e a fornecer chamadores com uma identidade quando uma referência é resolvida.</span><span class="sxs-lookup"><span data-stu-id="bb45b-125">Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.</span></span>  
  
 <span data-ttu-id="bb45b-126">Nenhum nível de confiança está associado a um nome forte, o que torna a [SignTool.exe (Ferramenta de Assinatura)](../../../docs/framework/tools/signtool-exe.md) importante.</span><span class="sxs-lookup"><span data-stu-id="bb45b-126">No level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) important.</span></span> <span data-ttu-id="bb45b-127">As duas ferramentas de assinatura exigem um editor para comprovar sua identidade para uma autoridade de terceiros e obter um certificado.</span><span class="sxs-lookup"><span data-stu-id="bb45b-127">The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate.</span></span> <span data-ttu-id="bb45b-128">Assim, esse certificado é inserido no seu arquivo e pode ser usado por um administrador para decidir se confia na autenticidade do código.</span><span class="sxs-lookup"><span data-stu-id="bb45b-128">This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.</span></span>  
  
 <span data-ttu-id="bb45b-129">Você pode fornecer tanto um nome forte quanto uma assinatura digital criada usando-se o [SignTool.exe (Ferramenta de assinatura)](../../../docs/framework/tools/signtool-exe.md) a um assembly, ou pode usar qualquer um sozinho.</span><span class="sxs-lookup"><span data-stu-id="bb45b-129">You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) to an assembly, or you can use either alone.</span></span> <span data-ttu-id="bb45b-130">As duas ferramentas de assinatura podem assinar somente um arquivo por vez; para um assembly com vários arquivos, você assina o arquivo que contém o manifesto do assembly.</span><span class="sxs-lookup"><span data-stu-id="bb45b-130">The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest.</span></span> <span data-ttu-id="bb45b-131">Um nome forte é armazenado no arquivo que contém o manifesto do assembly, mas uma assinatura criada com o [SignTool.exe (Ferramenta de assinatura)](../../../docs/framework/tools/signtool-exe.md) é armazenada em um slot reservado no arquivo PE (Portable Executable) contendo a manifesto do assembly.</span><span class="sxs-lookup"><span data-stu-id="bb45b-131">A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest.</span></span> <span data-ttu-id="bb45b-132">A assinatura de um assembly usando o [SignTool.exe (Ferramenta de assinatura)](../../../docs/framework/tools/signtool-exe.md) pode ser usada (com ou sem um nome forte) quando você já tem uma hierarquia de confiança que se baseia em assinaturas geradas por [SignTool.exe (Ferramenta de assinatura)](../../../docs/framework/tools/signtool-exe.md) ou quando a sua política usa somente a parte da chave e não verifica uma cadeia de confiança.</span><span class="sxs-lookup"><span data-stu-id="bb45b-132">Signing of an assembly using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="bb45b-133">Ao usar um nome forte e uma assinatura gerada por uma ferramenta de assinatura em um assembly, o nome forte deve ser atribuído primeiro.</span><span class="sxs-lookup"><span data-stu-id="bb45b-133">When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.</span></span>  
  
 <span data-ttu-id="bb45b-134">O Common Language Runtime também executa uma verificação de hash; o manifesto do assembly contém uma lista de todos os arquivos que compõem o assembly, incluindo um hash de cada arquivo conforme ele existia quando o manifesto foi compilado.</span><span class="sxs-lookup"><span data-stu-id="bb45b-134">The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built.</span></span> <span data-ttu-id="bb45b-135">À medida que cada arquivo é carregado, seu conteúdo recebe um hash e é comparado com o valor de hash armazenado no manifesto.</span><span class="sxs-lookup"><span data-stu-id="bb45b-135">As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest.</span></span> <span data-ttu-id="bb45b-136">Se os dois hashes não corresponderem, o assembly não será carregado.</span><span class="sxs-lookup"><span data-stu-id="bb45b-136">If the two hashes do not match, the assembly fails to load.</span></span>  
  
 <span data-ttu-id="bb45b-137">Como a nomenclatura forte e a assinatura usando o [SignTool.exe (Ferramenta de assinatura)](../../../docs/framework/tools/signtool-exe.md) garantem integridade, você pode basear a política de segurança de acesso a códigos nessas duas formas de evidência do assembly.</span><span class="sxs-lookup"><span data-stu-id="bb45b-137">Because strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence.</span></span> <span data-ttu-id="bb45b-138">Nomenclatura forte e assinatura usando o [SignTool.exe (Ferramenta de Assinatura)](../../../docs/framework/tools/signtool-exe.md) garantem a integridade por meio de certificados e assinaturas digitais.</span><span class="sxs-lookup"><span data-stu-id="bb45b-138">Strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates.</span></span> <span data-ttu-id="bb45b-139">Todas as tecnologias mencionadas — verificação de hash, nomenclatura forte e assinatura usando o [SignTool.exe (Ferramenta de Assinatura)](../../../docs/framework/tools/signtool-exe.md) — funcionam juntas para garantir que o assembly não tenha sido alterado de forma alguma.</span><span class="sxs-lookup"><span data-stu-id="bb45b-139">All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bb45b-140">Consulte também</span><span class="sxs-lookup"><span data-stu-id="bb45b-140">See also</span></span>

- [<span data-ttu-id="bb45b-141">Assemblies de nomes fortes</span><span class="sxs-lookup"><span data-stu-id="bb45b-141">Strong-Named Assemblies</span></span>](../../../docs/framework/app-domains/strong-named-assemblies.md)
- [<span data-ttu-id="bb45b-142">Assemblies no Common Language Runtime</span><span class="sxs-lookup"><span data-stu-id="bb45b-142">Assemblies in the Common Language Runtime</span></span>](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)
- [<span data-ttu-id="bb45b-143">SignTool.exe (Ferramenta de Assinatura)</span><span class="sxs-lookup"><span data-stu-id="bb45b-143">SignTool.exe (Sign Tool)</span></span>](../../../docs/framework/tools/signtool-exe.md)
