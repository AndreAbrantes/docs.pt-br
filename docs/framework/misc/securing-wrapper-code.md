---
title: Protegendo código de wrapper
ms.date: 03/30/2017
helpviewer_keywords:
- security [.NET Framework], wrapper code
- wrapper code, securing
- secure coding, wrapper code
- code security, wrapper code
ms.assetid: 1df6c516-5bba-48bd-b450-1070e04b7389
ms.openlocfilehash: 3d38a4d4fd33798cf5987f5ce67305725ad9daec
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/14/2020
ms.locfileid: "79399906"
---
# <a name="securing-wrapper-code"></a><span data-ttu-id="8f9ff-102">Protegendo código de wrapper</span><span class="sxs-lookup"><span data-stu-id="8f9ff-102">Securing Wrapper Code</span></span>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="8f9ff-103">O código do invólucro, especialmente quando o invólucro tem maior confiança do que o código que o usa, pode abrir um conjunto único de fraquezas de segurança.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-103">Wrapper code, especially where the wrapper has higher trust than code that uses it, can open a unique set of security weaknesses.</span></span> <span data-ttu-id="8f9ff-104">Qualquer coisa feita em nome de um chamador, onde as permissões limitadas do chamador não estão incluídas na verificação de segurança apropriada, é uma fraqueza potencial a ser explorada.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-104">Anything done on behalf of a caller, where the caller's limited permissions are not included in the appropriate security check, is a potential weakness to be exploited.</span></span>  
  
 <span data-ttu-id="8f9ff-105">Nunca habilite algo através do invólucro que o chamador não poderia fazer sozinho.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-105">Never enable something through the wrapper that the caller could not do itself.</span></span> <span data-ttu-id="8f9ff-106">Este é um perigo especial ao fazer algo que envolve uma verificação de segurança limitada, em oposição a uma demanda de caminhada de pilha completa.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-106">This is a special danger when doing something that involves a limited security check, as opposed to a full stack walk demand.</span></span> <span data-ttu-id="8f9ff-107">Quando as verificações de nível único estão envolvidas, interpor o código de invólucro entre o chamador real e o elemento API em questão pode facilmente fazer com que a verificação de segurança tenha sucesso quando não deveria, enfraquecendo assim a segurança.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-107">When single-level checks are involved, interposing the wrapper code between the real caller and the API element in question can easily cause the security check to succeed when it should not, thereby weakening security.</span></span>  
  
## <a name="delegates"></a><span data-ttu-id="8f9ff-108">Delega</span><span class="sxs-lookup"><span data-stu-id="8f9ff-108">Delegates</span></span>  
 <span data-ttu-id="8f9ff-109">A segurança do delegado difere entre as versões do Quadro .NET.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-109">Delegate security differs between versions of the .NET Framework.</span></span>  <span data-ttu-id="8f9ff-110">Esta seção descreve os diferentes comportamentos dos delegados e considerações de segurança associadas.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-110">This section describes the different delegate behaviors and associated security considerations.</span></span>  
  
### <a name="in-version-10-and-11-of-the-net-framework"></a><span data-ttu-id="8f9ff-111">Na versão 1.0 e 1.1 do Quadro .NET</span><span class="sxs-lookup"><span data-stu-id="8f9ff-111">In version 1.0 and 1.1 of the .NET Framework</span></span>  
 <span data-ttu-id="8f9ff-112">As versões 1.0 e 1.1 do .NET Framework executam as seguintes ações de segurança contra um criador de delegados e um chamador de delegado.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-112">Version 1.0 and 1.1 of the .NET Framework perform the following security actions against a delegate creator and a delegate caller.</span></span>  
  
- <span data-ttu-id="8f9ff-113">Quando um delegado é criado, as demandas de link de segurança no método de destino do delegado são realizadas contra o conjunto de subvenções do delegado criador.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-113">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="8f9ff-114">A falha em satisfazer a <xref:System.Security.SecurityException>ação de segurança resulta em um .</span><span class="sxs-lookup"><span data-stu-id="8f9ff-114">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="8f9ff-115">Quando o delegado é invocado, quaisquer exigências de segurança existentes sobre o chamador do delegado são realizadas.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-115">When the delegate is invoked, any existing security demands on the delegate caller are performed.</span></span>  
  
 <span data-ttu-id="8f9ff-116">Sempre que seu <xref:System.Delegate> código pegar um código menos confiável que possa chamá-lo, certifique-se de que você não está permitindo que o código menos confiável aumente suas permissões.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-116">Whenever your code takes a <xref:System.Delegate> from less-trusted code that might call it, make sure that you are not enabling the less-trusted code to escalate its permissions.</span></span> <span data-ttu-id="8f9ff-117">Se você pegar um delegado e usá-lo mais tarde, o código que criou o delegado não está na pilha de chamadas e suas permissões não serão testadas se o código dentro ou o delegado tentar uma operação protegida.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-117">If you take a delegate and use it later, the code that created the delegate is not on the call stack and its permissions will not be tested if code in or under the delegate attempts a protected operation.</span></span> <span data-ttu-id="8f9ff-118">Se seu código e o código de chamada tiverem privilégios maiores que o criador, o criador pode orquestrar o caminho de chamada sem fazer parte da pilha de chamadas.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-118">If your code and the caller code have higher privileges than the creator, the creator can orchestrate the call path without being part of the call stack.</span></span>  
  
### <a name="in-version-20-and-later-versions-of-the-net-framework"></a><span data-ttu-id="8f9ff-119">Na versão 2.0 e versões posteriores do Quadro .NET</span><span class="sxs-lookup"><span data-stu-id="8f9ff-119">In version 2.0 and later versions of the .NET Framework</span></span>  
 <span data-ttu-id="8f9ff-120">Ao contrário das versões anteriores, a versão 2.0 e versões posteriores do .NET Framework executa ações de segurança contra o criador do delegado quando o delegado é criado e chamado.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-120">Unlike previous versions, version 2.0 and later versions of the .NET Framework performs security action against the delegate creator when the delegate is created and called.</span></span>  
  
- <span data-ttu-id="8f9ff-121">Quando um delegado é criado, as demandas de link de segurança no método de destino do delegado são realizadas contra o conjunto de subvenções do delegado criador.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-121">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="8f9ff-122">A falha em satisfazer a <xref:System.Security.SecurityException>ação de segurança resulta em um .</span><span class="sxs-lookup"><span data-stu-id="8f9ff-122">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="8f9ff-123">O conjunto de subvenções do delegado também é capturado durante a criação do delegado e armazenado com o delegado.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-123">The delegate creator's grant set is also captured during delegate creation and stored with the delegate.</span></span>  
  
- <span data-ttu-id="8f9ff-124">Quando o delegado é invocado, o conjunto de subvenções capturado sustais do delegado é primeiro avaliado contra quaisquer demandas no contexto atual se o criador e o chamador do delegado pertencerem a assembléias diferentes.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-124">When the delegate is invoked, the delegate creator's captured grant set is first evaluated against any demands in the current context if the delegate creator and caller belong to different assemblies.</span></span>  <span data-ttu-id="8f9ff-125">Em seguida, todas as exigências de segurança existentes no chamador do delegado são executadas.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-125">Next, any existing security demands on the delegate caller are performed.</span></span>  
  
## <a name="link-demands-and-wrappers"></a><span data-ttu-id="8f9ff-126">Demandas de links e invólucros</span><span class="sxs-lookup"><span data-stu-id="8f9ff-126">Link demands and wrappers</span></span>  
 <span data-ttu-id="8f9ff-127">Um caso de proteção especial com demandas de links foi reforçado na infra-estrutura de segurança, mas ainda é uma fonte de possível fraqueza em seu código.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-127">A special protection case with link demands has been strengthened in the security infrastructure, but it is still a source of possible weakness in your code.</span></span>  
  
 <span data-ttu-id="8f9ff-128">Se o código totalmente confiável chamar uma propriedade, evento ou método protegido por um [LinkDemand,](link-demands.md)a chamada será bem-sucedida se a verificação de permissão **LinkDemand** para o chamador estiver satisfeita.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-128">If fully trusted code calls a property, event, or method protected by a [LinkDemand](link-demands.md), the call succeeds if the **LinkDemand** permission check for the caller is satisfied.</span></span> <span data-ttu-id="8f9ff-129">Além disso, se o código totalmente confiável expõe uma classe que leva o nome de uma propriedade e chama seu acessório **get** usando reflexão, essa chamada para o acessório **get** é bem sucedida mesmo que o código do usuário não tenha o direito de acessar essa propriedade.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-129">Additionally, if the fully trusted code exposes a class that takes the name of a property and calls its **get** accessor using reflection, that call to the **get** accessor succeeds even though the user code does not have the right to access this property.</span></span> <span data-ttu-id="8f9ff-130">Isso porque o **LinkDemand** verifica apenas o chamador imediato, que é o código totalmente confiável.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-130">This is because the **LinkDemand** checks only the immediate caller, which is the fully trusted code.</span></span> <span data-ttu-id="8f9ff-131">Em essência, o código totalmente confiável é fazer uma chamada privilegiada em nome do código do usuário sem ter certeza de que o código do usuário tem o direito de fazer essa chamada.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-131">In essence, the fully trusted code is making a privileged call on behalf of user code without making sure that the user code has the right to make that call.</span></span>  
  
 <span data-ttu-id="8f9ff-132">Para ajudar a evitar tais falhas de segurança, o tempo de execução do idioma comum estende a verificação para uma demanda completa de empilhadeiras em qualquer chamada indireta para um método, construtor, propriedade ou evento protegido por um **LinkDemand**.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-132">To help prevent such security holes, the common language runtime extends the check into a full stack-walking demand on any indirect call to a method, constructor, property, or event protected by a **LinkDemand**.</span></span> <span data-ttu-id="8f9ff-133">Essa proteção incorre em alguns custos de desempenho e altera a semântica da verificação de segurança; a demanda completa de stack-walk pode falhar onde a verificação mais rápida e de um nível teria passado.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-133">This protection incurs some performance costs and changes the semantics of the security check; the full stack-walk demand might fail where the faster, one-level check would have passed.</span></span>  
  
## <a name="assembly-loading-wrappers"></a><span data-ttu-id="8f9ff-134">Embalagem de carregamento de montagem</span><span class="sxs-lookup"><span data-stu-id="8f9ff-134">Assembly loading wrappers</span></span>  
 <span data-ttu-id="8f9ff-135">Vários métodos usados para carregar <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>código gerenciado, incluindo , conjuntos de carga com a evidência do chamador.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-135">Several methods used to load managed code, including <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, load assemblies with the evidence of the caller.</span></span> <span data-ttu-id="8f9ff-136">Se você envolver qualquer um desses métodos, o sistema de segurança poderia usar a concessão de permissão do seu código, em vez das permissões do chamador para o seu invólucro, para carregar os conjuntos.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-136">If you wrap any of these methods, the security system could use your code's permission grant, instead of the permissions of the caller to your wrapper, to load the assemblies.</span></span> <span data-ttu-id="8f9ff-137">Você não deve permitir que códigos menos confiáveis carreguem códigos que recebem permissões mais altas do que as do chamador para o seu invólucro.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-137">You should not allow less-trusted code to load code that is granted higher permissions than those of the caller to your wrapper.</span></span>  
  
 <span data-ttu-id="8f9ff-138">Qualquer código que tenha total confiança ou confiança significativamente maior do que um chamador em potencial (incluindo um chamador de nível de permissões da Internet) poderia enfraquecer a segurança desta forma.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-138">Any code that has full trust or significantly higher trust than a potential caller (including an Internet-permissions-level caller) could weaken security in this way.</span></span> <span data-ttu-id="8f9ff-139">Se o seu código tiver um método público que pegue uma matriz de bytes e passe-o para **Assembly.Load,** criando assim uma montagem em nome do chamador, ele pode quebrar a segurança.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-139">If your code has a public method that takes a byte array and passes it to **Assembly.Load**, thereby creating an assembly on the caller's behalf, it might break security.</span></span>  
  
 <span data-ttu-id="8f9ff-140">Este problema se aplica aos seguintes elementos da API:</span><span class="sxs-lookup"><span data-stu-id="8f9ff-140">This issue applies to the following API elements:</span></span>  
  
- <xref:System.AppDomain.DefineDynamicAssembly%2A?displayProperty=nameWithType>  
  
- <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>  
  
## <a name="demand-vs-linkdemand"></a><span data-ttu-id="8f9ff-141">Demand versus LinkDemand</span><span class="sxs-lookup"><span data-stu-id="8f9ff-141">Demand vs. LinkDemand</span></span>  
 <span data-ttu-id="8f9ff-142">A segurança declarativa oferece dois tipos de verificações de segurança que são semelhantes, mas realizam verificações muito diferentes.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-142">Declarative security offers two kinds of security checks that are similar but perform very different checks.</span></span> <span data-ttu-id="8f9ff-143">Você deve entender ambas as formas porque a escolha errada pode resultar em baixa segurança ou perda de desempenho.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-143">You should understand both forms because the wrong choice can result in weak security or performance loss.</span></span>  
  
 <span data-ttu-id="8f9ff-144">A segurança declarativa oferece as seguintes verificações de segurança:</span><span class="sxs-lookup"><span data-stu-id="8f9ff-144">Declarative security offers the following security checks:</span></span>  
  
- <span data-ttu-id="8f9ff-145"><xref:System.Security.Permissions.SecurityAction.Demand>especifica a caminhada da pilha de segurança de acesso ao código.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-145"><xref:System.Security.Permissions.SecurityAction.Demand> specifies the code access security stack walk.</span></span> <span data-ttu-id="8f9ff-146">Todos os chamadores na pilha devem ter a permissão ou identidade especificadas para passar.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-146">All callers on the stack must have the specified permission or identity to pass.</span></span> <span data-ttu-id="8f9ff-147">**A demanda** ocorre em cada chamada porque a pilha pode conter diferentes chamadores.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-147">**Demand** occurs on every call because the stack might contain different callers.</span></span> <span data-ttu-id="8f9ff-148">Se você chamar um método repetidamente, esta verificação de segurança ocorre todas as vezes.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-148">If you call a method repeatedly, this security check occurs each time.</span></span> <span data-ttu-id="8f9ff-149">**A demanda** é uma boa proteção contra ataques de atração; código não autorizado tentando passar por ele será detectado.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-149">**Demand** is good protection against luring attacks; unauthorized code trying to get through it will be detected.</span></span>  
  
- <span data-ttu-id="8f9ff-150">[LinkDemand](link-demands.md) acontece no tempo de compilação just-in-time (JIT) e verifica apenas o chamador imediato.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-150">[LinkDemand](link-demands.md) happens at just-in-time (JIT) compilation time and checks only the immediate caller.</span></span> <span data-ttu-id="8f9ff-151">Esta verificação de segurança não verifica o chamador do chamador.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-151">This security check does not check the caller's caller.</span></span> <span data-ttu-id="8f9ff-152">Uma vez que esta verificação passa, não há sobrecarga adicional de segurança, não importa quantas vezes o chamador possa ligar.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-152">Once this check passes, there is no additional security overhead no matter how many times the caller might call.</span></span> <span data-ttu-id="8f9ff-153">No entanto, também não há proteção contra ataques de atração.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-153">However, there is also no protection from luring attacks.</span></span> <span data-ttu-id="8f9ff-154">Com **o LinkDemand**, qualquer código que passe no teste e possa fazer referência ao seu código pode potencialmente quebrar a segurança, permitindo que o código malicioso ligue usando o código autorizado.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-154">With **LinkDemand**, any code that passes the test and can reference your code can potentially break security by allowing malicious code to call using the authorized code.</span></span> <span data-ttu-id="8f9ff-155">Portanto, não use **LinkDemand** a menos que todas as possíveis fraquezas possam ser completamente evitadas.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-155">Therefore, do not use **LinkDemand** unless all the possible weaknesses can be thoroughly avoided.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="8f9ff-156">No Quadro .NET 4, as demandas de <xref:System.Security.SecurityCriticalAttribute> link <xref:System.Security.SecurityRuleSet.Level2> foram substituídas pelo atributo em assembléias.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-156">In the .NET Framework 4, link demands have been replaced by the <xref:System.Security.SecurityCriticalAttribute> attribute in <xref:System.Security.SecurityRuleSet.Level2> assemblies.</span></span> <span data-ttu-id="8f9ff-157">O <xref:System.Security.SecurityCriticalAttribute> equivalente a uma demanda de link para confiança total; no entanto, também afeta as regras de herança.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-157">The <xref:System.Security.SecurityCriticalAttribute> is equivalent to a link demand for full trust; however, it also affects inheritance rules.</span></span> <span data-ttu-id="8f9ff-158">Para obter mais informações sobre essa alteração, consulte [Código transparente de segurança, nível 2](security-transparent-code-level-2.md).</span><span class="sxs-lookup"><span data-stu-id="8f9ff-158">For more information about this change, see [Security-Transparent Code, Level 2](security-transparent-code-level-2.md).</span></span>  
  
 <span data-ttu-id="8f9ff-159">As precauções extras necessárias ao usar **o LinkDemand** devem ser programadas individualmente; o sistema de segurança pode ajudar na aplicação.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-159">The extra precautions required when using **LinkDemand** must be programmed individually; the security system can help with enforcement.</span></span> <span data-ttu-id="8f9ff-160">Qualquer erro abre uma fraqueza de segurança.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-160">Any mistake opens a security weakness.</span></span> <span data-ttu-id="8f9ff-161">Todo o código autorizado que usa seu código deve ser responsável pela implementação de segurança adicional, fazendo o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8f9ff-161">All authorized code that uses your code must be responsible for implementing additional security by doing the following:</span></span>  
  
- <span data-ttu-id="8f9ff-162">Restringindo o acesso do código de chamada à classe ou à montagem.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-162">Restricting the calling code's access to the class or assembly.</span></span>  
  
- <span data-ttu-id="8f9ff-163">Colocando as mesmas verificações de segurança no código de chamada que aparecem no código que está sendo chamado e obrigando seus chamadores a fazê-lo.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-163">Placing the same security checks on the calling code that appear on the code being called and obligating its callers to do so.</span></span> <span data-ttu-id="8f9ff-164">Por exemplo, se você escrever código que chama um método <xref:System.Security.Permissions.SecurityPermission> protegido <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> com um **LinkDemand** para o com o sinalizador especificado, seu método também deve fazer um **LinkDemand** (ou **Demand**, que é mais forte) para essa permissão.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-164">For example, if you write code that calls a method that is protected with a **LinkDemand** for the <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> flag specified, your method should also make a **LinkDemand** (or **Demand**, which is stronger) for this permission.</span></span> <span data-ttu-id="8f9ff-165">A exceção é se o seu código usar o método protegido pelo **LinkDemand**de forma limitada que você decidir que é seguro, dado outros mecanismos de proteção de segurança (como demandas) em seu código.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-165">The exception is if your code uses the **LinkDemand**-protected method in a limited way that you decide is safe, given other security protection mechanisms (such as demands) in your code.</span></span> <span data-ttu-id="8f9ff-166">Neste caso excepcional, o chamador assume a responsabilidade de enfraquecer a proteção de segurança no código subjacente.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-166">In this exceptional case, the caller takes responsibility in weakening the security protection on the underlying code.</span></span>  
  
- <span data-ttu-id="8f9ff-167">Garantir que os chamadores do seu código não possam enganar seu código para chamar o código protegido em seu nome.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-167">Ensuring that your code's callers cannot trick your code into calling the protected code on their behalf.</span></span> <span data-ttu-id="8f9ff-168">Em outras palavras, os chamadores não podem forçar o código autorizado a passar parâmetros específicos para o código protegido ou obter resultados de volta a partir dele.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-168">In other words, callers cannot force the authorized code to pass specific parameters to the protected code, or to get results back from it.</span></span>  
  
### <a name="interfaces-and-link-demands"></a><span data-ttu-id="8f9ff-169">Interfaces e Demandas de Link</span><span class="sxs-lookup"><span data-stu-id="8f9ff-169">Interfaces and Link Demands</span></span>  
 <span data-ttu-id="8f9ff-170">Se um método virtual, propriedade ou evento com **LinkDemand** substitui um método de classe base, o método de classe base também deve ter o mesmo **LinkDemand** para o método substituído para ser eficaz.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-170">If a virtual method, property, or event with **LinkDemand** overrides a base class method, the base class method must also have the same **LinkDemand** for the overridden method in order to be effective.</span></span> <span data-ttu-id="8f9ff-171">É possível que o código malicioso volte ao tipo base e chame o método de classe base.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-171">It is possible for malicious code to cast back to the base type and call the base class method.</span></span> <span data-ttu-id="8f9ff-172">Observe também que as demandas de link podem ser <xref:System.Security.AllowPartiallyTrustedCallersAttribute> adicionadas implicitamente a assembléias que não têm o atributo de nível de montagem.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-172">Also note that link demands can be added implicitly to assemblies that do not have the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> assembly-level attribute.</span></span>  
  
 <span data-ttu-id="8f9ff-173">É uma boa prática proteger implementações de métodos com demandas de link quando os métodos de interface também têm demandas de link.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-173">It is a good practice to protect method implementations with link demands when interface methods also have link demands.</span></span> <span data-ttu-id="8f9ff-174">Observe o seguinte sobre o uso de demandas de link com interfaces:</span><span class="sxs-lookup"><span data-stu-id="8f9ff-174">Note the following about using link demands with interfaces:</span></span>  
  
- <span data-ttu-id="8f9ff-175">Se você colocar um **LinkDemand** em um método público de uma classe que implemente um método de interface, o **LinkDemand** não será aplicado se você for lançado para a interface e chamar o método.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-175">If you place a **LinkDemand** on a public method of a class that implements an interface method, the **LinkDemand** will not be enforced if you then cast to the interface and call the method.</span></span> <span data-ttu-id="8f9ff-176">Neste caso, como você se vinculou à interface, apenas o **LinkDemand** na interface é honrado.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-176">In this case, because you linked against the interface, only the **LinkDemand** on the interface is honored.</span></span>  
  
 <span data-ttu-id="8f9ff-177">Revise os seguintes itens para problemas de segurança:</span><span class="sxs-lookup"><span data-stu-id="8f9ff-177">Review the following items for security issues:</span></span>  
  
- <span data-ttu-id="8f9ff-178">Demandas explícitas de link em métodos de interface.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-178">Explicit link demands on interface methods.</span></span> <span data-ttu-id="8f9ff-179">Certifique-se de que essas demandas de links ofereçam a proteção esperada.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-179">Make sure these link demands offer the expected protection.</span></span> <span data-ttu-id="8f9ff-180">Determine se o código malicioso pode usar um elenco para contornar as demandas de link descritas anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-180">Determine whether malicious code can use a cast to get around the link demands as described previously.</span></span>  
  
- <span data-ttu-id="8f9ff-181">Métodos virtuais com demandas de link aplicadas.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-181">Virtual methods with link demands applied.</span></span>  
  
- <span data-ttu-id="8f9ff-182">Tipos e interfaces que implementam.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-182">Types and the interfaces they implement.</span></span> <span data-ttu-id="8f9ff-183">Estes devem usar demandas de link de forma consistente.</span><span class="sxs-lookup"><span data-stu-id="8f9ff-183">These should use link demands consistently.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8f9ff-184">Confira também</span><span class="sxs-lookup"><span data-stu-id="8f9ff-184">See also</span></span>

- [<span data-ttu-id="8f9ff-185">Diretrizes de codificação segura</span><span class="sxs-lookup"><span data-stu-id="8f9ff-185">Secure Coding Guidelines</span></span>](../../standard/security/secure-coding-guidelines.md)
