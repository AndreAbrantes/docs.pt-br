---
title: "Segurança de acesso do código"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- named permission sets, code access security
- call stacks
- malicious code
- stack walk
- security [.NET Framework], code access security
- permissions [.NET Framework], code access security
- trusted code
- mobile code security
- unmanaged code, code access security
- granting permissions, code access security
- user authentication, code access security
- code access security
ms.assetid: 859af632-c80d-4736-8d6f-1e01b09ce127
caps.latest.revision: "25"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: a28f8994c8cffdad69272322575df37c437b8b6c
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/22/2017
---
# <a name="code-access-security"></a><span data-ttu-id="d272e-102">Segurança de acesso do código</span><span class="sxs-lookup"><span data-stu-id="d272e-102">Code Access Security</span></span>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="d272e-103">Sistemas de computador altamente conectado de hoje com frequência são expostos para codificar provenientes de várias, fontes desconhecidas possivelmente.</span><span class="sxs-lookup"><span data-stu-id="d272e-103">Today's highly connected computer systems are frequently exposed to code originating from various, possibly unknown sources.</span></span> <span data-ttu-id="d272e-104">Código pode ser anexado a um email, contido em documentos ou baixado pela Internet.</span><span class="sxs-lookup"><span data-stu-id="d272e-104">Code can be attached to e-mail, contained in documents, or downloaded over the Internet.</span></span> <span data-ttu-id="d272e-105">Infelizmente, muitos usuários de computador tem ficado em primeira mão os efeitos de código móvel mal-intencionado, incluindo vírus e worms, que podem danificar ou destruir dados e tempo e dinheiro.</span><span class="sxs-lookup"><span data-stu-id="d272e-105">Unfortunately, many computer users have experienced firsthand the effects of malicious mobile code, including viruses and worms, which can damage or destroy data and cost time and money.</span></span>  
  
 <span data-ttu-id="d272e-106">Mecanismos de segurança mais comuns conceder direitos a usuários com base em suas credenciais de logon (geralmente uma senha) e restringem os recursos (geralmente diretórios e arquivos) que o usuário tem permissão para acessar.</span><span class="sxs-lookup"><span data-stu-id="d272e-106">Most common security mechanisms give rights to users based on their logon credentials (usually a password) and restrict resources (often directories and files) that the user is allowed to access.</span></span> <span data-ttu-id="d272e-107">No entanto, essa abordagem não consegue resolver vários problemas: os usuários a obter código de várias fontes, alguns dos quais podem não ser confiáveis; código pode conter bugs ou vulnerabilidades que habilitá-lo para ser explorado por códigos mal-intencionados. e o código faz, às vezes, coisas que o usuário não sabe que isso será feito.</span><span class="sxs-lookup"><span data-stu-id="d272e-107">However, this approach fails to address several issues: users obtain code from many sources, some of which might be unreliable; code can contain bugs or vulnerabilities that enable it to be exploited by malicious code; and code sometimes does things that the user does not know it will do.</span></span> <span data-ttu-id="d272e-108">Como resultado, os sistemas de computador podem estar danificados e dados privados podem vazar quando usuários cuidados e confiáveis executam software mal-intencionado ou preenchidas com erro.</span><span class="sxs-lookup"><span data-stu-id="d272e-108">As a result, computer systems can be damaged and private data can be leaked when cautious and trustworthy users run malicious or error-filled software.</span></span> <span data-ttu-id="d272e-109">A maioria dos mecanismos de segurança do sistema operacional requerem que cada pedaço de código deve ser totalmente confiável para executar, exceto talvez para scripts em uma página da Web.</span><span class="sxs-lookup"><span data-stu-id="d272e-109">Most operating system security mechanisms require that every piece of code must be completely trusted in order to run, except perhaps for scripts on a Web page.</span></span> <span data-ttu-id="d272e-110">Portanto, ainda há a necessidade de um mecanismo de segurança amplamente aplicável que permite que o código do sistema de um computador para executar com proteção em outro sistema, mesmo quando não há nenhuma relação de confiança entre os sistemas de origem.</span><span class="sxs-lookup"><span data-stu-id="d272e-110">Therefore, there is still a need for a widely applicable security mechanism that allows code originating from one computer system to execute with protection on another system, even when there is no trust relationship between the systems.</span></span>  
  
 <span data-ttu-id="d272e-111">O .NET Framework fornece um mecanismo de segurança chamado segurança de acesso do código para ajudar a proteger os sistemas de computador de código móvel mal-intencionado, para permitir que o código de origens desconhecidas seja executado com a proteção e para ajudar a evitar código confiável de intencionalmente ou não comprometer a segurança.</span><span class="sxs-lookup"><span data-stu-id="d272e-111">The .NET Framework provides a security mechanism called code access security to help protect computer systems from malicious mobile code, to allow code from unknown origins to run with protection, and to help prevent trusted code from intentionally or accidentally compromising security.</span></span> <span data-ttu-id="d272e-112">Segurança de acesso ao código permite que o código se torne confiável em vários graus, dependendo de onde se origina o código e outros aspectos da identidade do código.</span><span class="sxs-lookup"><span data-stu-id="d272e-112">Code access security enables code to be trusted to varying degrees depending on where the code originates and on other aspects of the code's identity.</span></span> <span data-ttu-id="d272e-113">Segurança de acesso do código também impõe os vários níveis de confiança no código, o que minimiza a quantidade de código que deve ser totalmente confiável para executar.</span><span class="sxs-lookup"><span data-stu-id="d272e-113">Code access security also enforces the varying levels of trust on code, which minimizes the amount of code that must be fully trusted in order to run.</span></span> <span data-ttu-id="d272e-114">Usando a segurança de acesso de código pode reduzir a probabilidade de que seu código será mal utilizadas por código mal-intencionado ou preenchidas com erro.</span><span class="sxs-lookup"><span data-stu-id="d272e-114">Using code access security can reduce the likelihood that your code will be misused by malicious or error-filled code.</span></span> <span data-ttu-id="d272e-115">Isso pode reduzir sua responsabilidade, porque você pode especificar o conjunto de operações que seu código deve ter permissão para executar.</span><span class="sxs-lookup"><span data-stu-id="d272e-115">It can reduce your liability, because you can specify the set of operations your code should be allowed to perform.</span></span> <span data-ttu-id="d272e-116">Segurança de acesso do código também pode ajudar a minimizar os danos que podem resultar de vulnerabilidades de segurança em seu código.</span><span class="sxs-lookup"><span data-stu-id="d272e-116">Code access security can also help minimize the damage that can result from security vulnerabilities in your code.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d272e-117">Foram feitas alterações importantes à segurança de acesso do código no [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d272e-117">Major changes have been made to code access security in the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)].</span></span> <span data-ttu-id="d272e-118">A alteração mais notável foi [transparência de segurança](../../../docs/framework/misc/security-transparent-code.md), mas também há outras alterações significativas que afetam a segurança de acesso do código.</span><span class="sxs-lookup"><span data-stu-id="d272e-118">The most notable change has been [security transparency](../../../docs/framework/misc/security-transparent-code.md), but there are also other significant changes that affect code access security.</span></span> <span data-ttu-id="d272e-119">Para obter informações sobre essas alterações, consulte [alterações de segurança](../../../docs/framework/security/security-changes.md).</span><span class="sxs-lookup"><span data-stu-id="d272e-119">For information about these changes, see [Security Changes](../../../docs/framework/security/security-changes.md).</span></span>  
  
 <span data-ttu-id="d272e-120">Segurança de acesso do código afeta principalmente aplicativos parcialmente confiáveis e código da biblioteca.</span><span class="sxs-lookup"><span data-stu-id="d272e-120">Code access security primarily affects library code and partially trusted applications.</span></span> <span data-ttu-id="d272e-121">Os desenvolvedores de biblioteca devem proteger seu código de acesso não autorizado de aplicativos parcialmente confiáveis.</span><span class="sxs-lookup"><span data-stu-id="d272e-121">Library developers must protect their code from unauthorized access from partially trusted applications.</span></span> <span data-ttu-id="d272e-122">Aplicativos parcialmente confiáveis são aplicativos que são carregados de origens externas, como a Internet.</span><span class="sxs-lookup"><span data-stu-id="d272e-122">Partially trusted applications are applications that are loaded from external sources such as the Internet.</span></span> <span data-ttu-id="d272e-123">Aplicativos que estão instalados em sua área de trabalho ou da intranet local é executado em confiança total.</span><span class="sxs-lookup"><span data-stu-id="d272e-123">Applications that are installed on your desktop or on the local intranet run in full trust.</span></span> <span data-ttu-id="d272e-124">Aplicativos de confiança total não são afetados pela segurança de acesso do código, a menos que eles serão marcados como [transparência de segurança](../../../docs/framework/misc/security-transparent-code.md), porque eles são totalmente confiáveis.</span><span class="sxs-lookup"><span data-stu-id="d272e-124">Full-trust applications are not affected by code access security unless they are marked as [security-transparent](../../../docs/framework/misc/security-transparent-code.md), because they are fully trusted.</span></span> <span data-ttu-id="d272e-125">A única limitação para aplicativos de confiança total é que os aplicativos que são marcados com o <xref:System.Security.SecurityTransparentAttribute> atributo não é possível chamar o código que está marcado com o <xref:System.Security.SecurityCriticalAttribute> atributo.</span><span class="sxs-lookup"><span data-stu-id="d272e-125">The only limitation for full-trust applications is that applications that are marked with the <xref:System.Security.SecurityTransparentAttribute> attribute cannot call code that is marked with the <xref:System.Security.SecurityCriticalAttribute> attribute.</span></span> <span data-ttu-id="d272e-126">Aplicativos parcialmente confiáveis devem ser executados em uma área restrita (por exemplo, no Internet Explorer) para que a segurança de acesso do código pode ser aplicada.</span><span class="sxs-lookup"><span data-stu-id="d272e-126">Partially trusted applications must be run in a sandbox (for example, in Internet Explorer) so that code access security can be applied.</span></span> <span data-ttu-id="d272e-127">Se você baixa um aplicativo da Internet e tente executá-lo da área de trabalho, você obterá um <xref:System.NotSupportedException> com a mensagem: "foi feita uma tentativa de carregar um assembly de um local de rede que faria com o assembly ficasse em versões anteriores do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d272e-127">If you download an application from the Internet and try to run it from your desktop, you will get a <xref:System.NotSupportedException> with the message: "An attempt was made to load an assembly from a network location which would have caused the assembly to be sandboxed in previous versions of the .NET Framework.</span></span> <span data-ttu-id="d272e-128">Nesta versão do .NET Framework não habilitar a política de CAS por padrão, portanto esse carregamento pode ser perigoso."</span><span class="sxs-lookup"><span data-stu-id="d272e-128">This release of the .NET Framework does not enable CAS policy by default, so this load may be dangerous."</span></span> <span data-ttu-id="d272e-129">Se você tiver certeza de que o aplicativo pode ser confiável, você poderá habilitá-lo ser executado em confiança total usando o [ \<loadFromRemoteSources > elemento](../../../docs/framework/configure-apps/file-schema/runtime/loadfromremotesources-element.md).</span><span class="sxs-lookup"><span data-stu-id="d272e-129">If you are sure that the application can be trusted, you can enable it to be run as full trust by using the [\<loadFromRemoteSources> element](../../../docs/framework/configure-apps/file-schema/runtime/loadfromremotesources-element.md).</span></span> <span data-ttu-id="d272e-130">Para obter informações sobre como executar um aplicativo em uma área restrita, consulte [como: executar código parcialmente confiável em uma área restrita](../../../docs/framework/misc/how-to-run-partially-trusted-code-in-a-sandbox.md).</span><span class="sxs-lookup"><span data-stu-id="d272e-130">For information about running an application in a sandbox, see [How to: Run Partially Trusted Code in a Sandbox](../../../docs/framework/misc/how-to-run-partially-trusted-code-in-a-sandbox.md).</span></span>  
  
 <span data-ttu-id="d272e-131">Todos os gerenciados de código que tem como alvo o common language runtime recebe os benefícios de segurança de acesso do código, mesmo se esse código não fazer um segurança de acesso ao código única chamada.</span><span class="sxs-lookup"><span data-stu-id="d272e-131">All managed code that targets the common language runtime receives the benefits of code access security, even if that code does not make a single code access security call.</span></span> <span data-ttu-id="d272e-132">Para obter mais informações, consulte [Noções Básicas da Segurança de Acesso do Código](../../../docs/framework/misc/code-access-security-basics.md).</span><span class="sxs-lookup"><span data-stu-id="d272e-132">For more information, see [Code Access Security Basics](../../../docs/framework/misc/code-access-security-basics.md).</span></span>  
  
<a name="key_functions"></a>   
## <a name="key-functions-of-code-access-security"></a><span data-ttu-id="d272e-133">Principais funções de segurança de acesso ao código</span><span class="sxs-lookup"><span data-stu-id="d272e-133">Key Functions of Code Access Security</span></span>  
 <span data-ttu-id="d272e-134">Segurança de acesso ao código ajuda a limitar o acesso ao código tem a recursos protegidos e operações.</span><span class="sxs-lookup"><span data-stu-id="d272e-134">Code access security helps limit the access that code has to protected resources and operations.</span></span> <span data-ttu-id="d272e-135">No .NET Framework, a segurança de acesso ao código executa as seguintes funções:</span><span class="sxs-lookup"><span data-stu-id="d272e-135">In the .NET Framework, code access security performs the following functions:</span></span>  
  
-   <span data-ttu-id="d272e-136">Define as permissões e os conjuntos de permissões que representam o direito de acesso a vários recursos do sistema.</span><span class="sxs-lookup"><span data-stu-id="d272e-136">Defines permissions and permission sets that represent the right to access various system resources.</span></span>  
  
-   <span data-ttu-id="d272e-137">Permite que o código que os chamadores têm permissões específicas de demanda.</span><span class="sxs-lookup"><span data-stu-id="d272e-137">Enables code to demand that its callers have specific permissions.</span></span>  
  
-   <span data-ttu-id="d272e-138">Permite que o código que os chamadores tenha uma assinatura digital, permitindo que somente os chamadores de uma determinada organização ou um site chamar o código protegido de demanda.</span><span class="sxs-lookup"><span data-stu-id="d272e-138">Enables code to demand that its callers possess a digital signature, thus allowing only callers from a particular organization or site to call the protected code.</span></span>  
  
-   <span data-ttu-id="d272e-139">Impõe restrições no código em tempo de execução, comparando as permissões concedidas de todos os chamadores na pilha de chamadas para as permissões que os chamadores devem ter.</span><span class="sxs-lookup"><span data-stu-id="d272e-139">Enforces restrictions on code at run time by comparing the granted permissions of every caller on the call stack to the permissions that callers must have.</span></span>  
  
<a name="walking_the_call_stack"></a>   
## <a name="walking-the-call-stack"></a><span data-ttu-id="d272e-140">Percorrer a pilha de chamadas</span><span class="sxs-lookup"><span data-stu-id="d272e-140">Walking the Call Stack</span></span>  
 <span data-ttu-id="d272e-141">Para determinar se o código está autorizado a acessar um recurso ou executar uma operação, o sistema de segurança do tempo de execução orienta a pilha de chamadas, comparando as permissões concedidas de cada chamador as permissões exigidas.</span><span class="sxs-lookup"><span data-stu-id="d272e-141">To determine whether code is authorized to access a resource or perform an operation, the runtime's security system walks the call stack, comparing the granted permissions of each caller to the permission being demanded.</span></span> <span data-ttu-id="d272e-142">Se qualquer chamador na pilha de chamadas não tem a permissão exigida, será gerada uma exceção de segurança e acesso foi recusado.</span><span class="sxs-lookup"><span data-stu-id="d272e-142">If any caller in the call stack does not have the demanded permission, a security exception is thrown and access is refused.</span></span> <span data-ttu-id="d272e-143">A movimentação da pilha foi projetada para ajudar a evitar ataques de atração, no qual menos confiável código chama o código altamente confiável e o utiliza para executar ações não autorizadas.</span><span class="sxs-lookup"><span data-stu-id="d272e-143">The stack walk is designed to help prevent luring attacks, in which less-trusted code calls highly trusted code and uses it to perform unauthorized actions.</span></span> <span data-ttu-id="d272e-144">Exigem permissões de todos os chamadores em tempo de execução afeta o desempenho, mas é essencial para ajudar a proteger o código de ataques de atração pelo código menos confiável.</span><span class="sxs-lookup"><span data-stu-id="d272e-144">Demanding permissions of all callers at run time affects performance, but it is essential to help protect code from luring attacks by less-trusted code.</span></span> <span data-ttu-id="d272e-145">Para otimizar o desempenho, você pode ter seu código executar menos movimentações de pilha; No entanto, você deve ter certeza de que não expõem uma vulnerabilidade de segurança sempre que você fizer isso.</span><span class="sxs-lookup"><span data-stu-id="d272e-145">To optimize performance, you can have your code perform fewer stack walks; however, you must be sure that you do not expose a security weakness whenever you do this.</span></span>  
  
 <span data-ttu-id="d272e-146">A ilustração a seguir mostra a movimentação da pilha que ocorre quando um método no Assembly A4 exige que os chamadores tem permissão P.</span><span class="sxs-lookup"><span data-stu-id="d272e-146">The following illustration shows the stack walk that results when a method in Assembly A4 demands that its callers have permission P.</span></span>  
  
 <span data-ttu-id="d272e-147">![Segurança de acesso ao código](../../../docs/framework/misc/media/slide-10a.gif "slide_10a")</span><span class="sxs-lookup"><span data-stu-id="d272e-147">![Code access security](../../../docs/framework/misc/media/slide-10a.gif "slide_10a")</span></span>  
<span data-ttu-id="d272e-148">Movimentação de pilha de segurança</span><span class="sxs-lookup"><span data-stu-id="d272e-148">Security stack walk</span></span>  
  
<a name="related_topics"></a>   
## <a name="related-topics"></a><span data-ttu-id="d272e-149">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="d272e-149">Related Topics</span></span>  
  
|<span data-ttu-id="d272e-150">Título</span><span class="sxs-lookup"><span data-stu-id="d272e-150">Title</span></span>|<span data-ttu-id="d272e-151">Descrição</span><span class="sxs-lookup"><span data-stu-id="d272e-151">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="d272e-152">Noções Básicas da Segurança de Acesso do Código</span><span class="sxs-lookup"><span data-stu-id="d272e-152">Code Access Security Basics</span></span>](../../../docs/framework/misc/code-access-security-basics.md)|<span data-ttu-id="d272e-153">Descreve a segurança de acesso do código e seus usos mais comuns.</span><span class="sxs-lookup"><span data-stu-id="d272e-153">Describes code access security and its most common uses.</span></span>|  
|[<span data-ttu-id="d272e-154">Código transparente de segurança, nível 2</span><span class="sxs-lookup"><span data-stu-id="d272e-154">Security-Transparent Code, Level 2</span></span>](../../../docs/framework/misc/security-transparent-code-level-2.md)|<span data-ttu-id="d272e-155">Descreve o modelo de transparência de segurança no [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d272e-155">Describes the security transparency model in the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)].</span></span>|  
|[<span data-ttu-id="d272e-156">Usando bibliotecas de código parcialmente confiável</span><span class="sxs-lookup"><span data-stu-id="d272e-156">Using Libraries from Partially Trusted Code</span></span>](../../../docs/framework/misc/using-libraries-from-partially-trusted-code.md)|<span data-ttu-id="d272e-157">Descreve como habilitar bibliotecas para uso com código não gerenciado e como usar bibliotecas de código não gerenciado.</span><span class="sxs-lookup"><span data-stu-id="d272e-157">Describes how to enable libraries for use with unmanaged code and how to use libraries from unmanaged code.</span></span>|  
|[<span data-ttu-id="d272e-158">Principais conceitos de segurança</span><span class="sxs-lookup"><span data-stu-id="d272e-158">Key Security Concepts</span></span>](../../../docs/standard/security/key-security-concepts.md)|<span data-ttu-id="d272e-159">Fornece uma visão geral dos muitos dos principais termos e conceitos usados no sistema de segurança do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d272e-159">Provides an overview of many of the key terms and concepts used in the .NET Framework security system.</span></span>|  
|[<span data-ttu-id="d272e-160">Segurança baseada em Função</span><span class="sxs-lookup"><span data-stu-id="d272e-160">Role-Based Security</span></span>](../../../docs/standard/security/role-based-security.md)|<span data-ttu-id="d272e-161">Descreve como incorporar a segurança baseada em funções.</span><span class="sxs-lookup"><span data-stu-id="d272e-161">Describes how to incorporate security based on roles.</span></span>|  
|[<span data-ttu-id="d272e-162">Serviços criptográficos</span><span class="sxs-lookup"><span data-stu-id="d272e-162">Cryptographic Services</span></span>](../../../docs/standard/security/cryptographic-services.md)|<span data-ttu-id="d272e-163">Descreve como incorporar a criptografia em seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="d272e-163">Describes how to incorporate cryptography into your applications.</span></span>|
