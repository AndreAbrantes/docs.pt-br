---
title: Conceitos fundamentais de fluxo de trabalho do Windows
ms.date: 03/30/2017
ms.assetid: 0e930e80-5060-45d2-8a7a-95c0690105d4
ms.openlocfilehash: ef2f327bdf2641648d266cecd0c6674762a95c18
ms.sourcegitcommit: fd8d4587cc26e53f0e27e230d6e27d828ef4306b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/16/2018
ms.locfileid: "49347819"
---
# <a name="fundamental-windows-workflow-concepts"></a><span data-ttu-id="46ba8-102">Conceitos fundamentais de fluxo de trabalho do Windows</span><span class="sxs-lookup"><span data-stu-id="46ba8-102">Fundamental Windows Workflow Concepts</span></span>
<span data-ttu-id="46ba8-103">Desenvolvimento de fluxo de trabalho nos conceitos dos usos de [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] que podem ser novos a alguns desenvolvedores.</span><span class="sxs-lookup"><span data-stu-id="46ba8-103">Workflow development in the [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] uses concepts that may be new to some developers.</span></span> <span data-ttu-id="46ba8-104">Este tópico descreve alguns dos conceitos e como eles são implementados.</span><span class="sxs-lookup"><span data-stu-id="46ba8-104">This topic describes some of the concepts and how they are implemented.</span></span>  
  
## <a name="workflows-and-activities"></a><span data-ttu-id="46ba8-105">Fluxos de trabalho e atividades</span><span class="sxs-lookup"><span data-stu-id="46ba8-105">Workflows and Activities</span></span>  
 <span data-ttu-id="46ba8-106">Um fluxo de trabalho é uma coleção estruturada de ações que modela um processo.</span><span class="sxs-lookup"><span data-stu-id="46ba8-106">A workflow is a structured collection of actions that models a process.</span></span> <span data-ttu-id="46ba8-107">Cada ação no fluxo de trabalho é modelada como uma atividade.</span><span class="sxs-lookup"><span data-stu-id="46ba8-107">Each action in the workflow is modeled as an activity.</span></span> <span data-ttu-id="46ba8-108">Um host interage com um fluxo de trabalho usando <xref:System.Activities.WorkflowInvoker> para chamar um fluxo de trabalho como se fosse um método, <xref:System.Activities.WorkflowApplication> para o controle explícito sobre a execução de uma única instância de fluxo de trabalho, e <xref:System.ServiceModel.WorkflowServiceHost> para interações mensagem- com base em cenários de várias instâncias.</span><span class="sxs-lookup"><span data-stu-id="46ba8-108">A host interacts with a workflow by using <xref:System.Activities.WorkflowInvoker> for invoking a workflow as if it were a method,  <xref:System.Activities.WorkflowApplication> for explicit control over the execution of a single workflow instance, and <xref:System.ServiceModel.WorkflowServiceHost> for message-based interactions in multi-instance scenarios.</span></span> <span data-ttu-id="46ba8-109">Porque as etapas de fluxo de trabalho são definidas como uma hierarquia de atividades, a atividade o nível mais alto na hierarquia pode ser determina definir o fluxo de trabalho propriamente dito.</span><span class="sxs-lookup"><span data-stu-id="46ba8-109">Because steps of the workflow are defined as a hierarchy of activities, the topmost activity in the hierarchy can be said to define the workflow itself.</span></span> <span data-ttu-id="46ba8-110">Esse modelo de hierarquia toma o lugar de `SequentialWorkflow` e classes explícitos de `StateMachineWorkflow` versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="46ba8-110">This hierarchy model takes the place of the explicit `SequentialWorkflow` and `StateMachineWorkflow` classes from previous versions.</span></span> <span data-ttu-id="46ba8-111">As atividades elas mesmas são desenvolvidas como coleções de outras atividades (usando a classe de <xref:System.Activities.Activity> como uma base, geralmente definidas usando XAML) ou são normalmente criado usando a classe de <xref:System.Activities.CodeActivity> , que pode usar o tempo de execução para acesso a dados, ou usando a classe de <xref:System.Activities.NativeActivity> , que expõe a largura de fluxo de trabalho para o autor de atividade.</span><span class="sxs-lookup"><span data-stu-id="46ba8-111">Activities themselves are developed as collections of other activities (using the <xref:System.Activities.Activity> class as a base, usually defined by using XAML) or are custom created by using the <xref:System.Activities.CodeActivity> class, which can use the runtime for data access, or by using the <xref:System.Activities.NativeActivity> class, which exposes the breadth of the workflow runtime to the activity author.</span></span> <span data-ttu-id="46ba8-112">As atividades desenvolvidas utilizando <xref:System.Activities.CodeActivity> e <xref:System.Activities.NativeActivity> são criados usando linguagens compatíveis CLR- como C#.</span><span class="sxs-lookup"><span data-stu-id="46ba8-112">Activities developed by using <xref:System.Activities.CodeActivity> and <xref:System.Activities.NativeActivity> are created by using CLR-compliant languages such as C#.</span></span>  
  
## <a name="activity-data-model"></a><span data-ttu-id="46ba8-113">Modelo de dados de atividades</span><span class="sxs-lookup"><span data-stu-id="46ba8-113">Activity Data Model</span></span>  
 <span data-ttu-id="46ba8-114">As atividades armazenam e compartilham dados usando os tipos mostrados na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="46ba8-114">Activities store and share data by using the types shown in the following table.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="46ba8-115">Variável</span><span class="sxs-lookup"><span data-stu-id="46ba8-115">Variable</span></span>|<span data-ttu-id="46ba8-116">Armazena dados em uma atividade.</span><span class="sxs-lookup"><span data-stu-id="46ba8-116">Stores data in an activity.</span></span>|  
|<span data-ttu-id="46ba8-117">Argumento</span><span class="sxs-lookup"><span data-stu-id="46ba8-117">Argument</span></span>|<span data-ttu-id="46ba8-118">Dados de move e fora de uma atividade.</span><span class="sxs-lookup"><span data-stu-id="46ba8-118">Moves data into and out of an activity.</span></span>|  
|<span data-ttu-id="46ba8-119">Expressão</span><span class="sxs-lookup"><span data-stu-id="46ba8-119">Expression</span></span>|<span data-ttu-id="46ba8-120">Uma atividade com um valor de retorno alto usado em associações do argumento.</span><span class="sxs-lookup"><span data-stu-id="46ba8-120">An activity with an elevated return value used in argument bindings.</span></span>|  
  
## <a name="workflow-runtime"></a><span data-ttu-id="46ba8-121">Tempo de Execução do Fluxo de Trabalho</span><span class="sxs-lookup"><span data-stu-id="46ba8-121">Workflow Runtime</span></span>  
 <span data-ttu-id="46ba8-122">O tempo de execução de fluxo de trabalho é o ambiente no qual os fluxos de trabalho são executadas.</span><span class="sxs-lookup"><span data-stu-id="46ba8-122">The workflow runtime is the environment in which workflows execute.</span></span> <span data-ttu-id="46ba8-123"><xref:System.Activities.WorkflowInvoker> é a maneira mais simples para executar um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="46ba8-123"><xref:System.Activities.WorkflowInvoker> is the simplest way to execute a workflow.</span></span> <span data-ttu-id="46ba8-124">O host usa <xref:System.Activities.WorkflowInvoker> para o seguinte:</span><span class="sxs-lookup"><span data-stu-id="46ba8-124">The host uses <xref:System.Activities.WorkflowInvoker> for the following:</span></span>  
  
-   <span data-ttu-id="46ba8-125">Para chamar sincronamente um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="46ba8-125">To synchronously invoke a workflow.</span></span>  
  
-   <span data-ttu-id="46ba8-126">Para fornecer a entrada, ou recupere saída de um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="46ba8-126">To provide input to, or retrieve output from a workflow.</span></span>  
  
-   <span data-ttu-id="46ba8-127">Para adicionar as extensões a ser usadas por atividades.</span><span class="sxs-lookup"><span data-stu-id="46ba8-127">To add extensions to be used by activities.</span></span>  
  
 <span data-ttu-id="46ba8-128"><xref:System.Activities.ActivityInstance> é o proxy thread-safe que hospeda pode usar para interagir com o tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="46ba8-128"><xref:System.Activities.ActivityInstance> is the thread-safe proxy that hosts can use to interact with the runtime.</span></span> <span data-ttu-id="46ba8-129">O host usa <xref:System.Activities.ActivityInstance> para o seguinte:</span><span class="sxs-lookup"><span data-stu-id="46ba8-129">The host uses <xref:System.Activities.ActivityInstance> for the following:</span></span>  
  
-   <span data-ttu-id="46ba8-130">Para obter uma instância ou criando o carregar o de um armazenamento de instância.</span><span class="sxs-lookup"><span data-stu-id="46ba8-130">To acquire an instance by creating it or loading it from an instance store.</span></span>  
  
-   <span data-ttu-id="46ba8-131">Para ser notificado de eventos de ciclo de vida da instância.</span><span class="sxs-lookup"><span data-stu-id="46ba8-131">To be notified of instance life-cycle events.</span></span>  
  
-   <span data-ttu-id="46ba8-132">Para controlar a execução de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="46ba8-132">To control workflow execution.</span></span>  
  
-   <span data-ttu-id="46ba8-133">Para fornecer a entrada, ou recupere saída de um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="46ba8-133">To provide input to, or retrieve output from a workflow.</span></span>  
  
-   <span data-ttu-id="46ba8-134">Para sinalizar uma continuação de fluxo de trabalho e passar valores no fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="46ba8-134">To signal a workflow continuation and pass values into the workflow.</span></span>  
  
-   <span data-ttu-id="46ba8-135">Para persistir dados de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="46ba8-135">To persist workflow data.</span></span>  
  
-   <span data-ttu-id="46ba8-136">Para adicionar as extensões a ser usadas por atividades.</span><span class="sxs-lookup"><span data-stu-id="46ba8-136">To add extensions to be used by activities.</span></span>  
  
 <span data-ttu-id="46ba8-137">As atividades acedem para o ambiente de tempo de execução de fluxo de trabalho usando a classe derivada apropriada de <xref:System.Activities.ActivityContext> , como <xref:System.Activities.NativeActivityContext> ou <xref:System.Activities.CodeActivityContext>.</span><span class="sxs-lookup"><span data-stu-id="46ba8-137">Activities gain access to the workflow runtime environment by using the appropriate <xref:System.Activities.ActivityContext> derived class, such as <xref:System.Activities.NativeActivityContext> or <xref:System.Activities.CodeActivityContext>.</span></span> <span data-ttu-id="46ba8-138">Usam essa resolvendo argumentos e variáveis, agendando atividades filhos, e muitas outras para fins.</span><span class="sxs-lookup"><span data-stu-id="46ba8-138">They use this for resolving arguments and variables, for scheduling child activities, and for many other purposes.</span></span>  
  
## <a name="services"></a><span data-ttu-id="46ba8-139">Serviços</span><span class="sxs-lookup"><span data-stu-id="46ba8-139">Services</span></span>  
 <span data-ttu-id="46ba8-140">Fluxos de trabalho fornecem uma maneira natural de implementar e acessar serviços fracamente acoplados, usando atividades de mensagem.</span><span class="sxs-lookup"><span data-stu-id="46ba8-140">Workflows provide a natural way to implement and access loosely-coupled services, using messaging activities.</span></span> <span data-ttu-id="46ba8-141">As atividades de mensagem são baseadas no WCF e são o principal mecanismo usado para obter dados dentro e fora de um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="46ba8-141">Messaging activities are built on WCF and are the primary mechanism used to get data into and out of a workflow.</span></span> <span data-ttu-id="46ba8-142">Você pode composto atividades de mensagem juntos para modelar qualquer tipo de padrão de troca de mensagem você deseja.</span><span class="sxs-lookup"><span data-stu-id="46ba8-142">You can compose messaging activities together to model any kind of message exchange pattern you wish.</span></span> <span data-ttu-id="46ba8-143">Para obter mais informações, consulte [atividades de mensagens](../../../docs/framework/wcf/feature-details/messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="46ba8-143">For more information, see [Messaging Activities](../../../docs/framework/wcf/feature-details/messaging-activities.md).</span></span> <span data-ttu-id="46ba8-144">Os serviços de fluxo de trabalho são hospedados usando a classe de <xref:System.ServiceModel.Activities.WorkflowServiceHost> .</span><span class="sxs-lookup"><span data-stu-id="46ba8-144">Workflow services are hosted using the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class.</span></span> <span data-ttu-id="46ba8-145">Para obter mais informações, consulte [visão geral dos serviços de fluxo de trabalho de hospedagem](../../../docs/framework/wcf/feature-details/hosting-workflow-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="46ba8-145">For more information, see [Hosting Workflow Services Overview](../../../docs/framework/wcf/feature-details/hosting-workflow-services-overview.md).</span></span> <span data-ttu-id="46ba8-146">Para obter mais informações sobre os serviços de fluxo de trabalho consulte [serviços de fluxo de trabalho](../../../docs/framework/wcf/feature-details/workflow-services.md)</span><span class="sxs-lookup"><span data-stu-id="46ba8-146">For more information about workflow services see [Workflow Services](../../../docs/framework/wcf/feature-details/workflow-services.md)</span></span>  
  
## <a name="persistence-unloading-and-long-running-workflows"></a><span data-ttu-id="46ba8-147">Persistência, descarga, e fluxos de trabalho longos</span><span class="sxs-lookup"><span data-stu-id="46ba8-147">Persistence, Unloading, and Long-Running Workflows</span></span>  
 <span data-ttu-id="46ba8-148">O fluxo de trabalho do Windows simplifica a criação de programas reativos longos fornecendo:</span><span class="sxs-lookup"><span data-stu-id="46ba8-148">Windows Workflow simplifies the authoring of long-running reactive programs by providing:</span></span>  
  
-   <span data-ttu-id="46ba8-149">Atividades que acessam a entrada externo.</span><span class="sxs-lookup"><span data-stu-id="46ba8-149">Activities that access external input.</span></span>  
  
-   <span data-ttu-id="46ba8-150">A capacidade de criar os objetos de <xref:System.Activities.Bookmark> que podem ser continuados por um ouvinte host.</span><span class="sxs-lookup"><span data-stu-id="46ba8-150">The ability to create <xref:System.Activities.Bookmark> objects that can be resumed by a host listener.</span></span>  
  
-   <span data-ttu-id="46ba8-151">A capacidade de persistir os dados de um fluxo de trabalho e de descarregar o fluxo de trabalho, e recarregar e reativar no fluxo de trabalho em resposta a ressunção de objetos <xref:System.Activities.Bookmark> em um fluxo de trabalho específico.</span><span class="sxs-lookup"><span data-stu-id="46ba8-151">The ability to persist a workflow’s data and unload the workflow, and then reload and reactivate the workflow in response to the resumption of <xref:System.Activities.Bookmark> objects in a particular workflow.</span></span>  
  
 <span data-ttu-id="46ba8-152">Um fluxo de trabalho executar continuamente atividades até que não haja mais atividade a executar ou até que todas as atividades atualmente em execução esperem entrada.</span><span class="sxs-lookup"><span data-stu-id="46ba8-152">A workflow continuously executes activities until there are no more activities to execute or until all currently executing activities are waiting for input.</span></span> <span data-ttu-id="46ba8-153">Nesse último estado, o fluxo de trabalho estiver ocioso.</span><span class="sxs-lookup"><span data-stu-id="46ba8-153">In this latter state, the workflow is idle.</span></span> <span data-ttu-id="46ba8-154">É comum para um host descarregar fluxos de trabalho que tenham a ociosa ida e para os recarregar para continuar a execução quando uma mensagem chega.</span><span class="sxs-lookup"><span data-stu-id="46ba8-154">It is common for a host to unload workflows that have gone idle and to reload them to continue execution when a message arrives.</span></span> <span data-ttu-id="46ba8-155"><xref:System.ServiceModel.Activities.WorkflowServiceHost> fornece a funcionalidade para este recurso e fornece um extensível descarrega a política.</span><span class="sxs-lookup"><span data-stu-id="46ba8-155"><xref:System.ServiceModel.Activities.WorkflowServiceHost> provides functionality for this feature and provides an extensible unload policy.</span></span> <span data-ttu-id="46ba8-156">Para os blocos de execução que usam os dados voláteis de estado ou outros dados que não podem ser mantidos, uma atividade pode indicar a um host que não deve ser mantidas usando <xref:System.Activities.NoPersistHandle>.</span><span class="sxs-lookup"><span data-stu-id="46ba8-156">For blocks of execution that use volatile state data or other data that cannot be persisted, an activity can indicate to a host that it should not be persisted by using the <xref:System.Activities.NoPersistHandle>.</span></span> <span data-ttu-id="46ba8-157">Um fluxo de trabalho também pode explicitamente persistir os dados a um meio de armazenamento durável usando a atividade de <xref:System.Activities.Statements.Persist> .</span><span class="sxs-lookup"><span data-stu-id="46ba8-157">A workflow can also explicitly persist its data to a durable storage medium by using the <xref:System.Activities.Statements.Persist> activity.</span></span>
