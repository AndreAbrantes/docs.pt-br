---
title: Usando representantes de atividades
ms.date: 03/30/2017
ms.assetid: e33cf876-8979-440b-9b23-4a12d1139960
ms.openlocfilehash: 7ed4032f8f8070648f8a2f0fcfb386101740f1ad
ms.sourcegitcommit: e42d09e5966dd9fd02847d3e7eeb4ec0877069f8
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/17/2018
ms.locfileid: "49374229"
---
# <a name="using-activity-delegates"></a><span data-ttu-id="863e8-102">Usando representantes de atividades</span><span class="sxs-lookup"><span data-stu-id="863e8-102">Using Activity Delegates</span></span>
<span data-ttu-id="863e8-103">Os representantes de atividade permitem autores de atividade para expor retornos de chamada com assinaturas específicas, para que os usuários de atividade podem fornecer manipuladores atividades base.</span><span class="sxs-lookup"><span data-stu-id="863e8-103">Activity delegates enable activity authors to expose callbacks with specific signatures, for which users of the activity can provide activity-based handlers.</span></span> <span data-ttu-id="863e8-104">Dois tipos de representantes de atividade estão disponíveis: <xref:System.Activities.ActivityAction%601> é usado para definir os representantes de atividade que não têm um valor de retorno, e <xref:System.Activities.ActivityFunc%601> é usado para definir os representantes de atividade que têm um valor de retorno.</span><span class="sxs-lookup"><span data-stu-id="863e8-104">Two types of activity delegates are available: <xref:System.Activities.ActivityAction%601> is used to define activity delegates that do not have a return value, and <xref:System.Activities.ActivityFunc%601> is used to define activity delegates that do have a return value.</span></span>  
  
 <span data-ttu-id="863e8-105">Os representantes de atividade são úteis em situações onde uma atividade filho deve ser restrita a ter uma determinada assinatura.</span><span class="sxs-lookup"><span data-stu-id="863e8-105">Activity delegates are useful in scenarios where a child activity must be constrained to having a certain signature.</span></span> <span data-ttu-id="863e8-106">Por exemplo, uma atividade de <xref:System.Activities.Statements.While> pode conter qualquer tipo de atividade filho sem restrições, mas o corpo de uma atividade de <xref:System.Activities.Statements.ForEach%601> é <xref:System.Activities.ActivityAction%601>, e a atividade filho que é executada por finalmente <xref:System.Activities.Statements.ForEach%601> deve ter <xref:System.Activities.InArgument%601> que é o mesmo tipo dos membros da coleção que <xref:System.Activities.Statements.ForEach%601> enumera.</span><span class="sxs-lookup"><span data-stu-id="863e8-106">For example, a <xref:System.Activities.Statements.While> activity can contain any type of child activity with no constraints, but the body of a <xref:System.Activities.Statements.ForEach%601> activity is an <xref:System.Activities.ActivityAction%601>, and the child activity that is ultimately executed by <xref:System.Activities.Statements.ForEach%601> must have an <xref:System.Activities.InArgument%601> that is the same type of the members of the collection that the <xref:System.Activities.Statements.ForEach%601> enumerates.</span></span>  
  
## <a name="using-activityaction"></a><span data-ttu-id="863e8-107">Usando ActivityAction</span><span class="sxs-lookup"><span data-stu-id="863e8-107">Using ActivityAction</span></span>  
 <span data-ttu-id="863e8-108">Várias atividades de [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] usam ações de atividade, como a atividade de <xref:System.Activities.Statements.Catch> e a atividade de <xref:System.Activities.Statements.ForEach%601> .</span><span class="sxs-lookup"><span data-stu-id="863e8-108">Several [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] activities use activity actions, such as the <xref:System.Activities.Statements.Catch> activity and the <xref:System.Activities.Statements.ForEach%601> activity.</span></span> <span data-ttu-id="863e8-109">Em cada caso, a ação de atividade representa um local onde o autor de fluxo de trabalho especifica uma atividade para fornecer um comportamento desejado quando estiver compondo um fluxo de trabalho usando uma dessas atividades.</span><span class="sxs-lookup"><span data-stu-id="863e8-109">In each case, the activity action represents a location where the workflow author specifies an activity to provide the desired behavior when composing a workflow using one of these activities.</span></span> <span data-ttu-id="863e8-110">No exemplo a seguir, uma atividade de <xref:System.Activities.Statements.ForEach%601> é usada para exibir texto na janela do console.</span><span class="sxs-lookup"><span data-stu-id="863e8-110">In the following example, a <xref:System.Activities.Statements.ForEach%601> activity is used to display text to the console window.</span></span> <span data-ttu-id="863e8-111">O corpo de <xref:System.Activities.Statements.ForEach%601> é especificado usando <xref:System.Activities.ActivityAction%601> que corresponde ao tipo de <xref:System.Activities.Statements.ForEach%601> que é cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="863e8-111">The body of the <xref:System.Activities.Statements.ForEach%601> is specified by using an <xref:System.Activities.ActivityAction%601> that matches the type of the <xref:System.Activities.Statements.ForEach%601> which is string.</span></span> <span data-ttu-id="863e8-112">A atividade de <xref:System.Activities.Statements.WriteLine> especificada em <xref:System.Activities.ActivityDelegate.Handler%2A> tem seu argumento de <xref:System.Activities.Statements.WriteLine.Text%2A> associado a valores de cadeia de caracteres na coleção que a atividade de <xref:System.Activities.Statements.ForEach%601> itera.</span><span class="sxs-lookup"><span data-stu-id="863e8-112">The <xref:System.Activities.Statements.WriteLine> activity specified in the <xref:System.Activities.ActivityDelegate.Handler%2A> has its <xref:System.Activities.Statements.WriteLine.Text%2A> argument bound to the string values in the collection that the <xref:System.Activities.Statements.ForEach%601> activity iterates.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#6](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#6)]  
  
 <span data-ttu-id="863e8-113">O actionArgument é usado para fluir itens individuais na coleção para WriteLine.</span><span class="sxs-lookup"><span data-stu-id="863e8-113">The actionArgument is used to flow the individual items in the collection to the WriteLine.</span></span> <span data-ttu-id="863e8-114">Quando o fluxo de trabalho é chamado, a saída a seguir são exibidas no console.</span><span class="sxs-lookup"><span data-stu-id="863e8-114">When the workflow is invoked, the following output is displayed to the console.</span></span>  
 ``` 
 HelloWorld.
 ```  
<span data-ttu-id="863e8-115">Os exemplos deste tópico usam sintaxe de inicialização de objeto.</span><span class="sxs-lookup"><span data-stu-id="863e8-115">The examples in this topic use object initialization syntax.</span></span> <span data-ttu-id="863e8-116">A sintaxe de inicialização de objeto pode ser uma maneira útil de criar definições de fluxo de trabalho no código porque fornece uma exibição hierárquica das atividades no fluxo de trabalho e mostra a relação entre as atividades.</span><span class="sxs-lookup"><span data-stu-id="863e8-116">Object initialization syntax can be a useful way to create workflow definitions in code because it provides a hierarchical view of the activities in the workflow and shows the relationship between the activities.</span></span> <span data-ttu-id="863e8-117">Não há nenhum requisito para usar a sintaxe de inicialização de objeto quando você cria fluxos de trabalho programaticamente.</span><span class="sxs-lookup"><span data-stu-id="863e8-117">There is no requirement to use object initialization syntax when you programmatically create workflows.</span></span> <span data-ttu-id="863e8-118">O exemplo a seguir é funcionalmente equivalente ao exemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="863e8-118">The following example is functionally equivalent to the previous example.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#7](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#7)]  
  
 <span data-ttu-id="863e8-119">Para obter mais informações sobre inicializadores de objeto, consulte [como: inicializar objetos sem chamar um construtor (guia de programação em C#)](https://go.microsoft.com/fwlink/?LinkId=161015) e [como: declarar um objeto usando um inicializador de objeto](https://go.microsoft.com/fwlink/?LinkId=161016).</span><span class="sxs-lookup"><span data-stu-id="863e8-119">For more information about object initializers, see [How to: Initialize Objects without Calling a Constructor (C# Programming Guide)](https://go.microsoft.com/fwlink/?LinkId=161015) and [How to: Declare an Object by Using an Object Initializer](https://go.microsoft.com/fwlink/?LinkId=161016).</span></span>  
  
 <span data-ttu-id="863e8-120">No exemplo a seguir, uma atividade de <xref:System.Activities.Statements.TryCatch> é usada em um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="863e8-120">In the following example, a <xref:System.Activities.Statements.TryCatch> activity is used in a workflow.</span></span> <span data-ttu-id="863e8-121"><xref:System.ApplicationException> é gerada pelo fluxo de trabalho, e tratado por uma atividade de <xref:System.Activities.Statements.Catch%601> .</span><span class="sxs-lookup"><span data-stu-id="863e8-121">An <xref:System.ApplicationException> is thrown by the workflow, and is handled by a <xref:System.Activities.Statements.Catch%601> activity.</span></span> <span data-ttu-id="863e8-122">O manipulador para o <xref:System.Activities.Statements.Catch%601> ação de atividade da atividade é um <xref:System.Activities.Statements.WriteLine> atividade e os detalhes de exceção é corrido por que usar o `ex` <xref:System.Activities.DelegateInArgument%601>.</span><span class="sxs-lookup"><span data-stu-id="863e8-122">The handler for the <xref:System.Activities.Statements.Catch%601> activity's activity action is a <xref:System.Activities.Statements.WriteLine> activity, and the exception detail is flowed through to it using the `ex` <xref:System.Activities.DelegateInArgument%601>.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#33](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#33)]  
  
 <span data-ttu-id="863e8-123">Ao criar uma atividade personalizado que define <xref:System.Activities.ActivityAction%601>, use <xref:System.Activities.Statements.InvokeAction%601> para modelar invocação do <xref:System.Activities.ActivityAction%601>.</span><span class="sxs-lookup"><span data-stu-id="863e8-123">When creating a custom activity that defines an <xref:System.Activities.ActivityAction%601>, use an <xref:System.Activities.Statements.InvokeAction%601> to model the invocation of that <xref:System.Activities.ActivityAction%601>.</span></span> <span data-ttu-id="863e8-124">Nesse exemplo, uma atividade de `WriteLineWithNotification` personalizado é definida.</span><span class="sxs-lookup"><span data-stu-id="863e8-124">In this example, a custom `WriteLineWithNotification` activity is defined.</span></span> <span data-ttu-id="863e8-125">Esta atividade é composta de <xref:System.Activities.Statements.Sequence> que contém uma atividade de <xref:System.Activities.Statements.WriteLine> seguida por <xref:System.Activities.Statements.InvokeAction%601> que invoca <xref:System.Activities.ActivityAction%601> que recebe um argumento de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="863e8-125">This activity is composed of a <xref:System.Activities.Statements.Sequence> that contains a <xref:System.Activities.Statements.WriteLine> activity followed by an <xref:System.Activities.Statements.InvokeAction%601> that invokes an <xref:System.Activities.ActivityAction%601> that takes one string argument.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#1](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#1)]  
  
 <span data-ttu-id="863e8-126">Quando um fluxo de trabalho é criado usando a atividade de `WriteLineWithNotification` , o autor de fluxo de trabalho especifica a lógica personalizada desejada em <xref:System.Activities.ActivityDelegate.Handler%2A>de ação de atividade.</span><span class="sxs-lookup"><span data-stu-id="863e8-126">When a workflow is created by using the `WriteLineWithNotification` activity, the workflow author specifies the desired custom logic in the activity action’s <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span> <span data-ttu-id="863e8-127">Nesse exemplo, um fluxo de trabalho é criado usando a atividade de `WriteLineWithNotification` , e uma atividade de <xref:System.Activities.Statements.WriteLine> é usada como <xref:System.Activities.ActivityDelegate.Handler%2A>.</span><span class="sxs-lookup"><span data-stu-id="863e8-127">In this example, a workflow is created that use the `WriteLineWithNotification` activity, and a <xref:System.Activities.Statements.WriteLine> activity is used as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#2](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#2)]  
  
 <span data-ttu-id="863e8-128">Há várias versões genéricas de <xref:System.Activities.Statements.InvokeAction%601> e de <xref:System.Activities.ActivityAction%601> fornecidos passando um ou mais argumentos.</span><span class="sxs-lookup"><span data-stu-id="863e8-128">There are multiple generic versions of <xref:System.Activities.Statements.InvokeAction%601> and <xref:System.Activities.ActivityAction%601> provided for passing one or more arguments.</span></span>  
  
## <a name="using-activityfunc"></a><span data-ttu-id="863e8-129">Usando ActivityFunc</span><span class="sxs-lookup"><span data-stu-id="863e8-129">Using ActivityFunc</span></span>  
 <span data-ttu-id="863e8-130"><xref:System.Activities.ActivityAction%601> é útil quando não há nenhum valor do resultado da atividade, e <xref:System.Activities.ActivityFunc%601> é usado quando um valor de resultado é retornado.</span><span class="sxs-lookup"><span data-stu-id="863e8-130"><xref:System.Activities.ActivityAction%601> is useful when there is no result value from the activity, and <xref:System.Activities.ActivityFunc%601> is used when a result value is returned.</span></span> <span data-ttu-id="863e8-131">Ao criar uma atividade personalizado que define <xref:System.Activities.ActivityFunc%601>, use <xref:System.Activities.Expressions.InvokeFunc%601> para modelar invocação do <xref:System.Activities.ActivityFunc%601>.</span><span class="sxs-lookup"><span data-stu-id="863e8-131">When creating a custom activity that defines an <xref:System.Activities.ActivityFunc%601>, use an <xref:System.Activities.Expressions.InvokeFunc%601> to model the invocation of that <xref:System.Activities.ActivityFunc%601>.</span></span> <span data-ttu-id="863e8-132">No exemplo a seguir, uma atividade de `WriteFillerText` é definida.</span><span class="sxs-lookup"><span data-stu-id="863e8-132">In the following example, a `WriteFillerText` activity is defined.</span></span> <span data-ttu-id="863e8-133">Para fornecer o texto de preencher, <xref:System.Activities.Expressions.InvokeFunc%601> é especificado que recebe um argumento integer e tem um resultado de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="863e8-133">To supply the filler text, an <xref:System.Activities.Expressions.InvokeFunc%601> is specified that takes an integer argument and has a string result.</span></span> <span data-ttu-id="863e8-134">Uma vez que o texto do enchimento é recuperado, é exibido no console usando uma atividade de <xref:System.Activities.Statements.WriteLine> .</span><span class="sxs-lookup"><span data-stu-id="863e8-134">Once the filler text is retrieved, it is displayed to the console using a <xref:System.Activities.Statements.WriteLine> activity.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#3](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#3)]  
  
 <span data-ttu-id="863e8-135">Para fornecer texto, uma atividade deve ser usada que recebe um argumento de `int` e tem um resultado de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="863e8-135">To supply the text, an activity must be used that takes one `int` argument and has a string result.</span></span> <span data-ttu-id="863e8-136">Este exemplo mostra uma atividade de `TextGenerator` que atenda a esses requisitos.</span><span class="sxs-lookup"><span data-stu-id="863e8-136">This example shows a `TextGenerator` activity that meets these requirements.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#4](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#4)]  
  
 <span data-ttu-id="863e8-137">Para usar a atividade de `TextGenerator` com a atividade de `WriteFillerText` , especifique-o como <xref:System.Activities.ActivityDelegate.Handler%2A>.</span><span class="sxs-lookup"><span data-stu-id="863e8-137">To use the `TextGenerator` activity with the `WriteFillerText` activity, specify it as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#5](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#5)]
