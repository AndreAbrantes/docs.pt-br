---
title: Escopo e visibilidade de definição de atividades
ms.date: 03/30/2017
ms.assetid: ccdffa07-9503-4eea-a61b-17f1564368b7
ms.openlocfilehash: 27c43323a176c841f3d90cb9c52f25599bc0686d
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61945945"
---
# <a name="activity-definition-scoping-and-visibility"></a><span data-ttu-id="9bfe3-102">Escopo e visibilidade de definição de atividades</span><span class="sxs-lookup"><span data-stu-id="9bfe3-102">Activity Definition Scoping and Visibility</span></span>
<span data-ttu-id="9bfe3-103">O escopo e a visibilidade de definição de atividade, assim como o escopo e a visibilidade de um objeto, são a capacidade de objetos ou outras atividades para acessar membros da atividade.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-103">Activity definition scoping and visibility, just like scoping and visibility of an object, is the ability of other objects or activities to access members of the activity.</span></span> <span data-ttu-id="9bfe3-104">A definição da atividade é executada por implementações seguintes:</span><span class="sxs-lookup"><span data-stu-id="9bfe3-104">Activity definition is performed by the following implementations:</span></span>  
  
1. <span data-ttu-id="9bfe3-105">Determinando os membros (<xref:System.Activities.Argument>, <xref:System.Activities.Variable>, e objetos de <xref:System.Activities.ActivityDelegate> , e atividades filho) expõe de uma atividade para os usuários.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-105">Determining the members (<xref:System.Activities.Argument>, <xref:System.Activities.Variable>, and <xref:System.Activities.ActivityDelegate> objects, and child activities) an activity exposes to its users.</span></span>  
  
2. <span data-ttu-id="9bfe3-106">Implementando lógica de execução de atividades</span><span class="sxs-lookup"><span data-stu-id="9bfe3-106">Implementing the execution logic of the activity</span></span>  
  
 <span data-ttu-id="9bfe3-107">A implementação pode envolver os membros que não são expostos aos consumidores de atividade, mas é um pouco detalhes de implementação.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-107">The implementation may involve members that are not exposed to consumers of the activity, but are rather details of the implementation.</span></span>  <span data-ttu-id="9bfe3-108">Semelhante à definição de tipo, o modelo de atividade permite que um autor qualifica a visibilidade de um membro da atividade em relação à definição da atividade sendo definida.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-108">Similar to type definition, the activity model allows an author to qualify the visibility of an activity member regarding the definition of the activity being defined.</span></span>  <span data-ttu-id="9bfe3-109">Controla a visibilidade aspectos do membro, como o escopo de dados.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-109">This visibility governs aspects of member usage, such as data scoping.</span></span>  
  
## <a name="scope"></a><span data-ttu-id="9bfe3-110">Escopo</span><span class="sxs-lookup"><span data-stu-id="9bfe3-110">Scope</span></span>  
 <span data-ttu-id="9bfe3-111">Além do escopo de dados, visibilidade modelo de atividade pode restringir o acesso a outros aspectos da atividade, como validação, a depuração, o rastreamento, ou o rastreamento.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-111">In addition to data scoping, activity model visibility can restrict access to other aspects of the activity, such as validation, debugging, tracking, or tracing.</span></span> <span data-ttu-id="9bfe3-112">As propriedades de execução usam a visibilidade e o escopo para características de execução em um escopo específico de definição.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-112">Execution properties use visibility and scoping for constraining execution characteristics to a particular scope of definition.</span></span> <span data-ttu-id="9bfe3-113">As raízes secundários usam a visibilidade e o escopo para restringir o estado capturado por <xref:System.Activities.Statements.CompensableActivity> escopo de definição em que as atividades compensáveis são usadas.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-113">Secondary roots use visibility and scoping to constrain the state captured by a <xref:System.Activities.Statements.CompensableActivity> to the scope of definition in which the compensable activities are used.</span></span>  
  
## <a name="definition-and-usage"></a><span data-ttu-id="9bfe3-114">Definição e uso</span><span class="sxs-lookup"><span data-stu-id="9bfe3-114">Definition and usage</span></span>  
 <span data-ttu-id="9bfe3-115">Um fluxo de trabalho é escrito criando novos atividades herdar de classes de base de atividade e usando atividades do [biblioteca de atividades internas](net-framework-4-5-built-in-activity-library.md).</span><span class="sxs-lookup"><span data-stu-id="9bfe3-115">A workflow is written by authoring new activities by inheriting from base activity classes, and by using activities from the [Built-In Activity Library](net-framework-4-5-built-in-activity-library.md).</span></span> <span data-ttu-id="9bfe3-116">Para usar uma atividade, o autor de atividade deve configurar a visibilidade de cada componente de sua definição.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-116">In order to use an activity, the activity author must configure the visibility of each component of its definition.</span></span>  
  
### <a name="activity-members"></a><span data-ttu-id="9bfe3-117">Membros de atividades</span><span class="sxs-lookup"><span data-stu-id="9bfe3-117">Activity Members</span></span>  
 <span data-ttu-id="9bfe3-118">O modelo de atividade define argumentos, variáveis, representantes, e as atividades filhos que a atividade torna disponíveis para os consumidores.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-118">The activity model defines the arguments, variables, delegates, and child activities that the activity makes available to consumers.</span></span> <span data-ttu-id="9bfe3-119">Cada um desses membros pode ser declarado como `public` ou `private`.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-119">Each of these members can be declared as `public` or `private`.</span></span> <span data-ttu-id="9bfe3-120">Os membros públicos são configurados pelo consumidor de atividade, enquanto os membros de `private` usam uma implementação fixa pelo autor de atividade.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-120">Public members are configured by the consumer of the activity, whereas `private` members use an implementation fixed by the author of the activity.</span></span> <span data-ttu-id="9bfe3-121">As regras de visibilidade para o escopo de dados são:</span><span class="sxs-lookup"><span data-stu-id="9bfe3-121">The visibility rules for data scoping are as follows:</span></span>  
  
1. <span data-ttu-id="9bfe3-122">Os membros públicos e membros públicos de atividades filhos públicas podem referenciar variáveis públicas.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-122">Public members and the public members of public child activities can reference public variables.</span></span>  
  
2. <span data-ttu-id="9bfe3-123">Os membros particulares e membros públicos de atividades filhos públicas podem referenciar argumentos e variáveis privadas.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-123">Private members and the public members of public child activities can reference arguments and private variables.</span></span>  
  
 <span data-ttu-id="9bfe3-124">Um membro que pode ser definido pelo consumidor de uma atividade nunca deve ser feito particular.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-124">A member that can be set by the consumer of an activity should never be made private.</span></span>  
  
### <a name="authoring-models"></a><span data-ttu-id="9bfe3-125">Criando modelos</span><span class="sxs-lookup"><span data-stu-id="9bfe3-125">Authoring Models</span></span>  
 <span data-ttu-id="9bfe3-126">As atividades personalizados são definidas usando <xref:System.Activities.NativeActivity>, <xref:System.Activities.Activity>, <xref:System.Activities.CodeActivity>, ou <xref:System.Activities.AsyncCodeActivity>.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-126">Custom activities are defined by using <xref:System.Activities.NativeActivity>, <xref:System.Activities.Activity>, <xref:System.Activities.CodeActivity>, or <xref:System.Activities.AsyncCodeActivity>.</span></span> <span data-ttu-id="9bfe3-127">As atividades que derivam dessas classes podem expor tipos diferentes de membro com visibilidades diferentes.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-127">Activities that derive from these classes can expose different member types with different visibilities.</span></span>  
  
#### <a name="nativeactivity"></a><span data-ttu-id="9bfe3-128">NativeActivity</span><span class="sxs-lookup"><span data-stu-id="9bfe3-128">NativeActivity</span></span>  
 <span data-ttu-id="9bfe3-129">As atividades que derivam de <xref:System.Activities.NativeActivity> têm o comportamento que é escrito em código obrigatórias, e opcionalmente podem ser definidas usando atividades existentes.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-129">Activities that derive from <xref:System.Activities.NativeActivity> have behavior that is written in imperative code, and can optionally be defined by using existing activities.</span></span> <span data-ttu-id="9bfe3-130">Derivando de atividades concede acesso de <xref:System.Activities.NativeActivity> a todos os recursos expostos em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-130">Deriving activities from <xref:System.Activities.NativeActivity> grants access to all of the features exposed by the runtime.</span></span> <span data-ttu-id="9bfe3-131">Qualquer membro de uma atividade pode ser definido usando a visibilidade pública ou privadas, exceto os argumentos, que só podem ser declarados como `public`.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-131">Any member of such an activity can be defined by using either public or private visibility, except arguments, which can only be declared as `public`.</span></span>  
  
 <span data-ttu-id="9bfe3-132">Membros de classes derivadas de <xref:System.Activities.NativeActivity> são declarados em tempo de execução usando a estrutura de <xref:System.Activities.NativeActivityMetadata> passado para o método de <xref:System.Activities.NativeActivity.CacheMetadata%2A> .</span><span class="sxs-lookup"><span data-stu-id="9bfe3-132">Members of classes derived from <xref:System.Activities.NativeActivity> are declared to the runtime using the <xref:System.Activities.NativeActivityMetadata> struct passed to the <xref:System.Activities.NativeActivity.CacheMetadata%2A> method.</span></span>  
  
#### <a name="activity"></a><span data-ttu-id="9bfe3-133">Atividade</span><span class="sxs-lookup"><span data-stu-id="9bfe3-133">Activity</span></span>  
 <span data-ttu-id="9bfe3-134">As atividades criadas usando <xref:System.Activities.Activity> têm o comportamento que é criado com estritamente composto outras atividades.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-134">Activities created by using <xref:System.Activities.Activity> have behavior that is designed strictly through composing other activities.</span></span> <span data-ttu-id="9bfe3-135">A classe de <xref:System.Activities.Activity> tem uma atividade filho de implementação, obtida em tempo de execução usando <xref:System.Activities.Activity.Implementation%2A>.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-135">The <xref:System.Activities.Activity> class has one implementation child activity, obtained by the runtime using <xref:System.Activities.Activity.Implementation%2A>.</span></span> <span data-ttu-id="9bfe3-136">Uma atividade que deriva de <xref:System.Activities.Activity> pode definir argumentos públicos, variáveis públicas, ActivityDelegates importado, e atividades importados.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-136">An activity deriving from <xref:System.Activities.Activity> can define public arguments, public variables, imported ActivityDelegates, and imported Activities.</span></span>  
  
 <span data-ttu-id="9bfe3-137">ActivityDelegates importado e as atividades são declarados como filhos públicos de atividade, mas não podem ser agendados diretamente pela atividade.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-137">Imported ActivityDelegates and Activities are declared as public children of the activity, but cannot be directly scheduled by the activity.</span></span> <span data-ttu-id="9bfe3-138">Essa informação é usada durante a validação para evitar executar validações pais suporte em locais onde a atividade nunca será executado.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-138">This information is used during validation to avoid running parent-facing validations at locations where the activity will never execute.</span></span> <span data-ttu-id="9bfe3-139">Além disso, os filhos importados, assim como filhos públicos, podem ser referenciados e agendada pela implementação de atividade.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-139">Also, imported children, just like public children, can be referenced and scheduled by the activity’s implementation.</span></span> <span data-ttu-id="9bfe3-140">Isso significa que uma atividade que importe uma atividade chamada Activity1 pode conter <xref:System.Activities.Statements.Sequence> em sua implementação que agenda Activity1.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-140">This means that an activity which imports an activity called Activity1 can contain a <xref:System.Activities.Statements.Sequence> in its implementation which schedules Activity1.</span></span>  
  
#### <a name="codeactivity-asynccodeactivity"></a><span data-ttu-id="9bfe3-141">CodeActivity/AsyncCodeActivity</span><span class="sxs-lookup"><span data-stu-id="9bfe3-141">CodeActivity/ AsyncCodeActivity</span></span>  
 <span data-ttu-id="9bfe3-142">Essa classe base é usada criando o comportamento no código obrigatório.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-142">This base class is used for authoring behavior in imperative code.</span></span> <span data-ttu-id="9bfe3-143">As atividades que derivam dessa classe só tem acesso aos argumentos que expõe.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-143">Activities that derive from this class only have access to the arguments they expose.</span></span> <span data-ttu-id="9bfe3-144">Isso significa que os únicos membros que essas atividades podem expor são argumentos públicos.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-144">This means that the only members that these activities can expose are public arguments.</span></span> <span data-ttu-id="9bfe3-145">Nenhuma outra membro ou visibilidade se aplicam às atividades.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-145">No other members or visibilities apply to these activities.</span></span>  
  
#### <a name="summary-of-visibilities"></a><span data-ttu-id="9bfe3-146">Resumo de visibilidades</span><span class="sxs-lookup"><span data-stu-id="9bfe3-146">Summary of visibilities</span></span>  
 <span data-ttu-id="9bfe3-147">A tabela a seguir resume informações anteriormente nesta seção.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-147">The following table summarizes the information earlier in this section.</span></span>  
  
|<span data-ttu-id="9bfe3-148">Tipo do membro</span><span class="sxs-lookup"><span data-stu-id="9bfe3-148">Member Type</span></span>|<span data-ttu-id="9bfe3-149">NativeActivity</span><span class="sxs-lookup"><span data-stu-id="9bfe3-149">NativeActivity</span></span>|<span data-ttu-id="9bfe3-150">Atividade</span><span class="sxs-lookup"><span data-stu-id="9bfe3-150">Activity</span></span>|<span data-ttu-id="9bfe3-151">CodeActivity/AsyncCodeActivity</span><span class="sxs-lookup"><span data-stu-id="9bfe3-151">CodeActivity/ AsyncCodeActivity</span></span>|  
|-----------------|--------------------|--------------|--------------------------------------|  
|<span data-ttu-id="9bfe3-152">Arguments</span><span class="sxs-lookup"><span data-stu-id="9bfe3-152">Arguments</span></span>|<span data-ttu-id="9bfe3-153">Público particular</span><span class="sxs-lookup"><span data-stu-id="9bfe3-153">Public/ Private</span></span>|<span data-ttu-id="9bfe3-154">Público</span><span class="sxs-lookup"><span data-stu-id="9bfe3-154">Public</span></span>|<span data-ttu-id="9bfe3-155">não aplicável</span><span class="sxs-lookup"><span data-stu-id="9bfe3-155">not applicable</span></span>|  
|<span data-ttu-id="9bfe3-156">Variáveis</span><span class="sxs-lookup"><span data-stu-id="9bfe3-156">Variables</span></span>|<span data-ttu-id="9bfe3-157">Público particular</span><span class="sxs-lookup"><span data-stu-id="9bfe3-157">Public/ Private</span></span>|<span data-ttu-id="9bfe3-158">Público</span><span class="sxs-lookup"><span data-stu-id="9bfe3-158">Public</span></span>|<span data-ttu-id="9bfe3-159">não aplicável</span><span class="sxs-lookup"><span data-stu-id="9bfe3-159">not applicable</span></span>|  
|<span data-ttu-id="9bfe3-160">Atividades filhos</span><span class="sxs-lookup"><span data-stu-id="9bfe3-160">Child Activities</span></span>|<span data-ttu-id="9bfe3-161">Público particular</span><span class="sxs-lookup"><span data-stu-id="9bfe3-161">Public/ Private</span></span>|<span data-ttu-id="9bfe3-162">Público, um filho particular corrigido definido na implementação.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-162">Public, one fixed private child defined in Implementation.</span></span>|<span data-ttu-id="9bfe3-163">não aplicável</span><span class="sxs-lookup"><span data-stu-id="9bfe3-163">not applicable</span></span>|  
|<span data-ttu-id="9bfe3-164">ActivityDelegates</span><span class="sxs-lookup"><span data-stu-id="9bfe3-164">ActivityDelegates</span></span>|<span data-ttu-id="9bfe3-165">Público particular</span><span class="sxs-lookup"><span data-stu-id="9bfe3-165">Public/ Private</span></span>|<span data-ttu-id="9bfe3-166">Público</span><span class="sxs-lookup"><span data-stu-id="9bfe3-166">Public</span></span>|<span data-ttu-id="9bfe3-167">não aplicável</span><span class="sxs-lookup"><span data-stu-id="9bfe3-167">not applicable</span></span>|  
  
 <span data-ttu-id="9bfe3-168">Em geral, um membro que não pode ser definido pelo consumidor de uma atividade não deve ser feito público.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-168">In general, a member that cannot be set by the consumer of an activity should not be made public.</span></span>  
  
### <a name="execution-properties"></a><span data-ttu-id="9bfe3-169">Propriedades de execução</span><span class="sxs-lookup"><span data-stu-id="9bfe3-169">Execution Properties</span></span>  
 <span data-ttu-id="9bfe3-170">Em alguns cenários, é útil o escopo de uma propriedade específica de execução para filhos públicos de uma atividade.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-170">In some scenarios, it is useful to scope a particular execution property to the public children of an activity.</span></span> <span data-ttu-id="9bfe3-171">A coleção de <xref:System.Activities.ExecutionProperties> fornece esse recurso com o método de <xref:System.Activities.ExecutionProperties.Add%2A> .</span><span class="sxs-lookup"><span data-stu-id="9bfe3-171">The <xref:System.Activities.ExecutionProperties> collection provides this capability with the <xref:System.Activities.ExecutionProperties.Add%2A> method.</span></span> <span data-ttu-id="9bfe3-172">Este método possui a indicação booleana de um parâmetro de se uma determinada propriedade é o escopo para todos os filhos, ou apenas aqueles que são públicos.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-172">This method has a Boolean parameter indicating whether a particular property is scoped to all children, or just those that are public.</span></span> <span data-ttu-id="9bfe3-173">Se esse parâmetro é definido como `true`, a propriedade será visível somente a membros públicos e a membros públicos de seus filhos públicos.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-173">If this parameter is set to `true`, the property will only be visible to public members and the public members of their public children.</span></span>  
  
### <a name="secondary-roots"></a><span data-ttu-id="9bfe3-174">Raízes secundários</span><span class="sxs-lookup"><span data-stu-id="9bfe3-174">Secondary Roots</span></span>  
 <span data-ttu-id="9bfe3-175">Uma raiz new é o mecanismo do tempo de execução interno para gerenciar o estado para atividades de compensação.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-175">A secondary root is the runtime’s internal mechanism for managing state for compensation activities.</span></span> <span data-ttu-id="9bfe3-176">Quando <xref:System.Activities.Statements.CompensableActivity> terminou de executar, seu estado não está limpado imediatamente.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-176">When a <xref:System.Activities.Statements.CompensableActivity> has finished running, its state is not cleaned up immediately.</span></span> <span data-ttu-id="9bfe3-177">Em vez disso, o estado é mantido em tempo de execução em uma raiz new até que o episódio de compensação terminar.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-177">Instead, the state is maintained by the runtime in a secondary root until the compensation episode has completed.</span></span> <span data-ttu-id="9bfe3-178">Os ambientes de local capturados com a raiz new correspondem ao escopo de definição em que a atividade compensável é usada.</span><span class="sxs-lookup"><span data-stu-id="9bfe3-178">The location environments captured with the secondary root correspond to the scope of definition in which the Compensable activity is used.</span></span>
