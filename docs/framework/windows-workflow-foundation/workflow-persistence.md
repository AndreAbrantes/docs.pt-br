---
title: Persistência de fluxo de trabalho
description: .NET Framework 4.6.1 inclui a classe SqlWorkflowInstanceStore, que permite a persistência de dados de fluxo de trabalho e metadados em um banco de SQL Server.
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], persistence
ms.assetid: 39e69d1f-b771-4c16-9e18-696fa43b65b2
ms.openlocfilehash: 2184a159423a611a8936e900591a480ce7ef6ec8
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96293800"
---
# <a name="workflow-persistence"></a><span data-ttu-id="c44e7-103">Persistência de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="c44e7-103">Workflow Persistence</span></span>

<span data-ttu-id="c44e7-104">Persistência de fluxo de trabalho é a captura durável do estado de uma instância de fluxo de trabalho, independente de processo ou de informações do computador.</span><span class="sxs-lookup"><span data-stu-id="c44e7-104">Workflow persistence is the durable capture of a workflow instance's state, independent of process or computer information.</span></span> <span data-ttu-id="c44e7-105">Isso é feito para fornecer um ponto conhecido de recuperação para a instância de fluxo de trabalho no caso de falha do sistema, ou para preservar a memória descarregando as instâncias de fluxo de trabalho que não estão fazendo ativamente o trabalho, ou para mover o estado da instância de fluxo de trabalho de um nó para outro nó em um farm de servidores.</span><span class="sxs-lookup"><span data-stu-id="c44e7-105">This is done to provide a well-known point of recovery for the workflow instance in the event of system failure, or to preserve memory by unloading workflow instances that are not actively doing work, or to move the state of the workflow instance from one node to another node in a server farm.</span></span>  
  
 <span data-ttu-id="c44e7-106">Persistência permite a agilidade do processo, a escalabilidade, a recuperação face falhar, e a capacidade gerenciar mais eficientemente a memória.</span><span class="sxs-lookup"><span data-stu-id="c44e7-106">Persistence enables process agility, scalability, recovery in the face of failure, and the ability to manage memory more efficiently.</span></span> <span data-ttu-id="c44e7-107">O processo de persistência inclui a identificação de um ponto de persistência, a coleta de dados a ser salvos, e finalmente a delegação de armazenamento real de dados a um provedor de persistência.</span><span class="sxs-lookup"><span data-stu-id="c44e7-107">The persistence process includes the identification of a persistence point, the gathering of the data to be saved, and finally the delegation of the actual storage of the data to a persistence provider.</span></span>  
  
 <span data-ttu-id="c44e7-108">Para habilitar a persistência de um fluxo de trabalho, você precisa associar um repositório de instância com **WorkflowApplication** ou **WorkflowServiceHost** , conforme mencionado em [como habilitar a persistência para fluxos de trabalho e serviços de fluxo de trabalho](how-to-enable-persistence-for-workflows-and-workflow-services.md).</span><span class="sxs-lookup"><span data-stu-id="c44e7-108">To enable persistence for a workflow, you need to associate an instance store with the **WorkflowApplication** or **WorkflowServiceHost** as mentioned in [How to: Enable Persistence for Workflows and Workflow Services](how-to-enable-persistence-for-workflows-and-workflow-services.md).</span></span> <span data-ttu-id="c44e7-109">O **WorkflowApplication** e o **WorkflowServiceHost** usam o repositório de instância associado a eles para permitir a persistência de instâncias de fluxo de trabalho em um repositório de persistência e o carregamento de instâncias de fluxo de trabalho na memória com base nos dados de instância de fluxo de trabalho armazenados no repositório de persistência.</span><span class="sxs-lookup"><span data-stu-id="c44e7-109">The **WorkflowApplication** and **WorkflowServiceHost** use the instance store associated with them to enable persisting workflow instances into a persistence store and loading workflow instances into memory based on the workflow instance data stored in the persistence store.</span></span>  
  
 <span data-ttu-id="c44e7-110">O [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] é fornecido com a classe **SqlWorkflowInstanceStore** , que permite a persistência de dados e metadados sobre instâncias de fluxo de trabalho em um SQL Server 2005 ou SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="c44e7-110">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the **SqlWorkflowInstanceStore** class, which allows persistence of data and metadata about workflow instances into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="c44e7-111">Consulte [repositório de instância de fluxo de trabalho SQL](sql-workflow-instance-store.md) para obter mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="c44e7-111">See [SQL Workflow Instance Store](sql-workflow-instance-store.md) for more details.</span></span>  
  
 <span data-ttu-id="c44e7-112">Para armazenar e carregar os dados específicos do aplicativo junto com informações relacionadas instância de fluxo de trabalho, você pode criar os participantes de persistência que estendem a classe de <xref:System.Activities.Persistence.PersistenceParticipant> .</span><span class="sxs-lookup"><span data-stu-id="c44e7-112">To store and load your application-specific data along with the workflow instance-related information, you can create persistence participants that extend the <xref:System.Activities.Persistence.PersistenceParticipant> class.</span></span> <span data-ttu-id="c44e7-113">Um participante de persistência participa no processo de persistência para salvar dados serializados personalizados no armazenamento de persistência, para carregar os dados da instância na memória, e executar qualquer lógica adicional em uma transação de persistência.</span><span class="sxs-lookup"><span data-stu-id="c44e7-113">A persistence participant participates in the persistence process to save custom serializable data into the persistence store, to load the data from the instance store into memory, and to perform any additional logic under a persistence transaction.</span></span> <span data-ttu-id="c44e7-114">Para obter mais informações, consulte [participantes da persistência](persistence-participants.md).</span><span class="sxs-lookup"><span data-stu-id="c44e7-114">For more information, see [Persistence Participants](persistence-participants.md).</span></span>  
  
 <span data-ttu-id="c44e7-115">A tela de aplicativo Windows Server simplifica o processo de configurar a persistência.</span><span class="sxs-lookup"><span data-stu-id="c44e7-115">Windows Server App Fabric simplifies the process of configuring persistence.</span></span> <span data-ttu-id="c44e7-116">Para obter mais informações, consulte [conceitos de persistência com o Windows Server app Fabric](/previous-versions/appfabric/ee677272(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="c44e7-116">For more information, see [Persistence Concepts with Windows Server App Fabric](/previous-versions/appfabric/ee677272(v=azure.10))</span></span>  
  
## <a name="implicit-persistence-points"></a><span data-ttu-id="c44e7-117">Pontos implícitos de persistência</span><span class="sxs-lookup"><span data-stu-id="c44e7-117">Implicit Persistence Points</span></span>  

 <span data-ttu-id="c44e7-118">A lista a seguir contém exemplos das circunstâncias na qual um fluxo de trabalho é mantido quando um armazenamento de instância é associado com um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="c44e7-118">The following list contains examples of the conditions upon which a workflow is persisted when an instance store is associated with a workflow.</span></span>  
  
- <span data-ttu-id="c44e7-119">Quando uma atividade **TransactionScope** é concluída ou uma atividade **TransactedReceiveScope** é concluída.</span><span class="sxs-lookup"><span data-stu-id="c44e7-119">When a **TransactionScope** activity completes or a **TransactedReceiveScope** activity completes.</span></span>  
  
- <span data-ttu-id="c44e7-120">Quando uma instância de fluxo de trabalho se torna ociosa e o **WorkflowIdleBehavior** é definido no host do fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="c44e7-120">When a workflow instance becomes idle and the **WorkflowIdleBehavior** is set on workflow host.</span></span> <span data-ttu-id="c44e7-121">Isso ocorre, por exemplo, quando você usa atividades de mensagens ou uma atividade de **atraso** .</span><span class="sxs-lookup"><span data-stu-id="c44e7-121">This occurs, for example, when you use messaging activities or a **Delay** activity.</span></span>  
  
- <span data-ttu-id="c44e7-122">Quando um WorkflowApplication se torna ocioso e a propriedade **PersistableIdle** do aplicativo é definida como **PersistableIdleAction. Persist**.</span><span class="sxs-lookup"><span data-stu-id="c44e7-122">When a WorkflowApplication becomes idle and the **PersistableIdle** property of the application is set to **PersistableIdleAction.Persist**.</span></span>  
  
- <span data-ttu-id="c44e7-123">Quando um aplicativo host seja instruído para persistir ou descarregar uma instância de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="c44e7-123">When a host application is instructed to persist or unload a workflow instance.</span></span>  
  
- <span data-ttu-id="c44e7-124">Quando uma instância de fluxo de trabalho seja finalizada ou termina.</span><span class="sxs-lookup"><span data-stu-id="c44e7-124">When a workflow instance is terminated or finishes.</span></span>  
  
- <span data-ttu-id="c44e7-125">Quando uma atividade de **persistência** é executada.</span><span class="sxs-lookup"><span data-stu-id="c44e7-125">When a **Persist** activity executes.</span></span>  
  
- <span data-ttu-id="c44e7-126">Quando uma instância de um fluxo de trabalho desenvolvido usando uma versão anterior do Windows Workflow Foundation localizar um ponto de persistência durante a execução interoperável.</span><span class="sxs-lookup"><span data-stu-id="c44e7-126">When an instance of a workflow developed using a previous version of Windows Workflow Foundation encounters a persistence point during interoperable execution.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="c44e7-127">Nesta seção</span><span class="sxs-lookup"><span data-stu-id="c44e7-127">In This Section</span></span>  
  
- [<span data-ttu-id="c44e7-128">Store instância de fluxo de trabalho do SQL</span><span class="sxs-lookup"><span data-stu-id="c44e7-128">SQL Workflow Instance Store</span></span>](sql-workflow-instance-store.md)  
  
- [<span data-ttu-id="c44e7-129">Armazenamentos de instância</span><span class="sxs-lookup"><span data-stu-id="c44e7-129">Instance Stores</span></span>](instance-stores.md)  
  
- [<span data-ttu-id="c44e7-130">Participantes de persistência</span><span class="sxs-lookup"><span data-stu-id="c44e7-130">Persistence Participants</span></span>](persistence-participants.md)  
  
- [<span data-ttu-id="c44e7-131">Práticas recomendadas de persistência</span><span class="sxs-lookup"><span data-stu-id="c44e7-131">Persistence Best Practices</span></span>](persistence-best-practices.md)  
  
- [<span data-ttu-id="c44e7-132">Instâncias são persistentes de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="c44e7-132">Non-Persisted Workflow Instances</span></span>](non-persisted-workflow-instances.md)  
  
- [<span data-ttu-id="c44e7-133">Pausando e continuando um fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="c44e7-133">Pausing and Resuming a Workflow</span></span>](pausing-and-resuming-a-workflow.md)
