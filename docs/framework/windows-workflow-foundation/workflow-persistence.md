---
title: Persistência de fluxo de trabalho
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], persistence
ms.assetid: 39e69d1f-b771-4c16-9e18-696fa43b65b2
ms.openlocfilehash: db0e4acc76f758004948857fc0b23a9cbc62f244
ms.sourcegitcommit: 160a88c8087b0e63606e6e35f9bd57fa5f69c168
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/09/2019
ms.locfileid: "57715536"
---
# <a name="workflow-persistence"></a><span data-ttu-id="1efb9-102">Persistência de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="1efb9-102">Workflow Persistence</span></span>
<span data-ttu-id="1efb9-103">Persistência de fluxo de trabalho é a captura durável do estado de uma instância de fluxo de trabalho, independente de processo ou de informações do computador.</span><span class="sxs-lookup"><span data-stu-id="1efb9-103">Workflow persistence is the durable capture of a workflow instance's state, independent of process or computer information.</span></span> <span data-ttu-id="1efb9-104">Isso é feito para fornecer um ponto conhecido de recuperação para a instância de fluxo de trabalho no caso de falha do sistema, ou para preservar a memória descarregando as instâncias de fluxo de trabalho que não estão fazendo ativamente o trabalho, ou para mover o estado da instância de fluxo de trabalho de um nó para outro nó em um farm de servidores.</span><span class="sxs-lookup"><span data-stu-id="1efb9-104">This is done to provide a well-known point of recovery for the workflow instance in the event of system failure, or to preserve memory by unloading workflow instances that are not actively doing work, or to move the state of the workflow instance from one node to another node in a server farm.</span></span>  
  
 <span data-ttu-id="1efb9-105">Persistência permite a agilidade do processo, a escalabilidade, a recuperação face falhar, e a capacidade gerenciar mais eficientemente a memória.</span><span class="sxs-lookup"><span data-stu-id="1efb9-105">Persistence enables process agility, scalability, recovery in the face of failure, and the ability to manage memory more efficiently.</span></span> <span data-ttu-id="1efb9-106">O processo de persistência inclui a identificação de um ponto de persistência, a coleta de dados a ser salvos, e finalmente a delegação de armazenamento real de dados a um provedor de persistência.</span><span class="sxs-lookup"><span data-stu-id="1efb9-106">The persistence process includes the identification of a persistence point, the gathering of the data to be saved, and finally the delegation of the actual storage of the data to a persistence provider.</span></span>  
  
 <span data-ttu-id="1efb9-107">Para ativar persistência para um fluxo de trabalho, você precisa associar um armazenamento de instância com o **WorkflowApplication** ou **WorkflowServiceHost** conforme mencionado na [como: Ativar persistência para fluxos de trabalho e serviços de fluxo de trabalho](how-to-enable-persistence-for-workflows-and-workflow-services.md).</span><span class="sxs-lookup"><span data-stu-id="1efb9-107">To enable persistence for a workflow, you need to associate an instance store with the **WorkflowApplication** or **WorkflowServiceHost** as mentioned in [How to: Enable Persistence for Workflows and Workflow Services](how-to-enable-persistence-for-workflows-and-workflow-services.md).</span></span> <span data-ttu-id="1efb9-108">O **WorkflowApplication** e **WorkflowServiceHost** usar o armazenamento de instância associado a eles para ativar persistir instâncias de fluxo de trabalho em um repositório de persistência e carregar instâncias de fluxo de trabalho em memória com base nos dados de instância de fluxo de trabalho armazenados no repositório de persistência.</span><span class="sxs-lookup"><span data-stu-id="1efb9-108">The **WorkflowApplication** and **WorkflowServiceHost** use the instance store associated with them to enable persisting workflow instances into a persistence store and loading workflow instances into memory based on the workflow instance data stored in the persistence store.</span></span>  
  
 <span data-ttu-id="1efb9-109">O [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] é fornecido com o **SqlWorkflowInstanceStore** classe, que permite a persistência dos dados e metadados sobre instâncias de fluxo de trabalho em um banco de dados do SQL Server 2005 ou SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="1efb9-109">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the **SqlWorkflowInstanceStore** class, which allows persistence of data and metadata about workflow instances into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="1efb9-110">Ver [Store de instância de fluxo de trabalho do SQL](sql-workflow-instance-store.md) para obter mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="1efb9-110">See [SQL Workflow Instance Store](sql-workflow-instance-store.md) for more details.</span></span>  
  
 <span data-ttu-id="1efb9-111">Para armazenar e carregar os dados específicos do aplicativo junto com informações relacionadas instância de fluxo de trabalho, você pode criar os participantes de persistência que estendem a classe de <xref:System.Activities.Persistence.PersistenceParticipant> .</span><span class="sxs-lookup"><span data-stu-id="1efb9-111">To store and load your application-specific data along with the workflow instance-related information, you can create persistence participants that extend the <xref:System.Activities.Persistence.PersistenceParticipant> class.</span></span> <span data-ttu-id="1efb9-112">Um participante de persistência participa no processo de persistência para salvar dados serializados personalizados no armazenamento de persistência, para carregar os dados da instância na memória, e executar qualquer lógica adicional em uma transação de persistência.</span><span class="sxs-lookup"><span data-stu-id="1efb9-112">A persistence participant participates in the persistence process to save custom serializable data into the persistence store, to load the data from the instance store into memory, and to perform any additional logic under a persistence transaction.</span></span> <span data-ttu-id="1efb9-113">Para obter mais informações, consulte [participantes de persistência](persistence-participants.md).</span><span class="sxs-lookup"><span data-stu-id="1efb9-113">For more information, see [Persistence Participants](persistence-participants.md).</span></span>  
  
 <span data-ttu-id="1efb9-114">A tela de aplicativo Windows Server simplifica o processo de configurar a persistência.</span><span class="sxs-lookup"><span data-stu-id="1efb9-114">Windows Server App Fabric simplifies the process of configuring persistence.</span></span> <span data-ttu-id="1efb9-115">Para obter mais informações, consulte [conceitos de persistência com tela de aplicativo do Windows Server](https://go.microsoft.com/fwlink/?LinkId=201200)</span><span class="sxs-lookup"><span data-stu-id="1efb9-115">For more information, see [Persistence Concepts with Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkId=201200)</span></span>  
  
## <a name="implicit-persistence-points"></a><span data-ttu-id="1efb9-116">Pontos implícitos de persistência</span><span class="sxs-lookup"><span data-stu-id="1efb9-116">Implicit Persistence Points</span></span>  
 <span data-ttu-id="1efb9-117">A lista a seguir contém exemplos das circunstâncias na qual um fluxo de trabalho é mantido quando um armazenamento de instância é associado com um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1efb9-117">The following list contains examples of the conditions upon which a workflow is persisted when an instance store is associated with a workflow.</span></span>  
  
-   <span data-ttu-id="1efb9-118">Quando um **TransactionScope** conclusão da atividade ou um **TransactedReceiveScope** atividade é concluída.</span><span class="sxs-lookup"><span data-stu-id="1efb9-118">When a **TransactionScope** activity completes or a **TransactedReceiveScope** activity completes.</span></span>  
  
-   <span data-ttu-id="1efb9-119">Quando uma instância de fluxo de trabalho fica ociosa e o **WorkflowIdleBehavior** é definido no host de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1efb9-119">When a workflow instance becomes idle and the **WorkflowIdleBehavior** is set on workflow host.</span></span> <span data-ttu-id="1efb9-120">Isso ocorre, por exemplo, quando você usar as atividades de mensagem ou uma **atraso** atividade.</span><span class="sxs-lookup"><span data-stu-id="1efb9-120">This occurs, for example, when you use messaging activities or a **Delay** activity.</span></span>  
  
-   <span data-ttu-id="1efb9-121">Quando um WorkflowApplication se torna ocioso e o **PersistableIdle** do aplicativo estiver definida como **Persistableidleaction**.</span><span class="sxs-lookup"><span data-stu-id="1efb9-121">When a WorkflowApplication becomes idle and the **PersistableIdle** property of the application is set to **PersistableIdleAction.Persist**.</span></span>  
  
-   <span data-ttu-id="1efb9-122">Quando um aplicativo host seja instruído para persistir ou descarregar uma instância de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1efb9-122">When a host application is instructed to persist or unload a workflow instance.</span></span>  
  
-   <span data-ttu-id="1efb9-123">Quando uma instância de fluxo de trabalho seja finalizada ou termina.</span><span class="sxs-lookup"><span data-stu-id="1efb9-123">When a workflow instance is terminated or finishes.</span></span>  
  
-   <span data-ttu-id="1efb9-124">Quando um **Persist** atividade é executada.</span><span class="sxs-lookup"><span data-stu-id="1efb9-124">When a **Persist** activity executes.</span></span>  
  
-   <span data-ttu-id="1efb9-125">Quando uma instância de um fluxo de trabalho desenvolvido usando uma versão anterior do Windows Workflow Foundation localizar um ponto de persistência durante a execução interoperável.</span><span class="sxs-lookup"><span data-stu-id="1efb9-125">When an instance of a workflow developed using a previous version of Windows Workflow Foundation encounters a persistence point during interoperable execution.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="1efb9-126">Nesta seção</span><span class="sxs-lookup"><span data-stu-id="1efb9-126">In This Section</span></span>  
  
-   [<span data-ttu-id="1efb9-127">Repositório de instâncias de fluxo de trabalho do SQL</span><span class="sxs-lookup"><span data-stu-id="1efb9-127">SQL Workflow Instance Store</span></span>](sql-workflow-instance-store.md)  
  
-   [<span data-ttu-id="1efb9-128">Armazenamentos de instância</span><span class="sxs-lookup"><span data-stu-id="1efb9-128">Instance Stores</span></span>](instance-stores.md)  
  
-   [<span data-ttu-id="1efb9-129">Participantes da persistência</span><span class="sxs-lookup"><span data-stu-id="1efb9-129">Persistence Participants</span></span>](persistence-participants.md)  
  
-   [<span data-ttu-id="1efb9-130">Práticas recomendadas de persistência</span><span class="sxs-lookup"><span data-stu-id="1efb9-130">Persistence Best Practices</span></span>](persistence-best-practices.md)  
  
-   [<span data-ttu-id="1efb9-131">Instâncias de fluxo de trabalho não persistentes</span><span class="sxs-lookup"><span data-stu-id="1efb9-131">Non-Persisted Workflow Instances</span></span>](non-persisted-workflow-instances.md)  
  
-   [<span data-ttu-id="1efb9-132">Pausando e continuando um fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="1efb9-132">Pausing and Resuming a Workflow</span></span>](pausing-and-resuming-a-workflow.md)
