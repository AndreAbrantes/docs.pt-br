---
title: Confirme automaticamente o padrão
ms.date: 03/30/2017
ms.assetid: 668aec65-78d3-4636-9c7b-deed643a18f9
ms.openlocfilehash: b30703ffba3b721ac544ea6471ec47ce7f746d2b
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/04/2018
---
# <a name="auto-confirm-pattern"></a><span data-ttu-id="d98cc-102">Confirme automaticamente o padrão</span><span class="sxs-lookup"><span data-stu-id="d98cc-102">Auto-Confirm Pattern</span></span>
<span data-ttu-id="d98cc-103">Esse exemplo consiste em três situações a execução que ilustra uma atividade personalizado de `AutoConfirmScope` .</span><span class="sxs-lookup"><span data-stu-id="d98cc-103">This sample consists of three scenarios that run illustrating a custom `AutoConfirmScope` activity.</span></span> <span data-ttu-id="d98cc-104">O primeiro exemplo mostra a execução bem-sucedida de uma sequência de quatro atividades compensáveis onde o segundo e terceiro é aninhado em lugar em `AutoConfirmScope`.</span><span class="sxs-lookup"><span data-stu-id="d98cc-104">The first sample shows the successful execution of a sequence of four compensable activities where the second and third are nested in an `AutoConfirmScope`.</span></span> <span data-ttu-id="d98cc-105">O segundo exemplo mostra a mesma sequência com uma exceção que ocorre após a execução do quarto <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="d98cc-105">The second sample shows the same sequence with an exception occurring after the execution of the fourth <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="d98cc-106">O terceiro cenário mostra a mesma sequência com uma exceção que ocorre em `AutoConfirmScope` após segundo <xref:System.Activities.Statements.CompensableActivity> completa.</span><span class="sxs-lookup"><span data-stu-id="d98cc-106">The third scenario shows the same sequence with an exception occurring in the `AutoConfirmScope` after the second <xref:System.Activities.Statements.CompensableActivity> completes.</span></span>  
  
 <span data-ttu-id="d98cc-107">O exemplo demonstra o padrão de uma confirmação onde todas as atividades compensáveis filho são confirmadas em cima de conclusão com êxito de escopo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-107">The sample demonstrates the auto-confirm pattern where all child compensable activities are confirmed upon successful completion of the scope.</span></span> <span data-ttu-id="d98cc-108">Esse padrão define o tempo de vida de todas as atividades compensáveis filhos, porque não podem mais ser compensados ou confirmado.</span><span class="sxs-lookup"><span data-stu-id="d98cc-108">This pattern defines the lifetime of all child compensable activities, as they can no longer be compensated or confirmed.</span></span>  
  
 <span data-ttu-id="d98cc-109">O escopo consiste em <xref:System.Activities.Statements.TryCatch> onde <xref:System.Activities.Statements.TryCatch.Try%2A> é <xref:System.Activities.Statements.CompensableActivity>interno.</span><span class="sxs-lookup"><span data-stu-id="d98cc-109">The scope consists of a <xref:System.Activities.Statements.TryCatch> where the <xref:System.Activities.Statements.TryCatch.Try%2A> is an internal <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="d98cc-110">O corpo especificado pelo usuário de `AutoConfirmScope` é o corpo de <xref:System.Activities.Statements.CompensableActivity>interno.</span><span class="sxs-lookup"><span data-stu-id="d98cc-110">The user-specified body of the `AutoConfirmScope` is the body of the inner <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="d98cc-111">Quando esse <xref:System.Activities.Statements.CompensableActivity> interno for concluída, gerenciar <xref:System.Activities.Statements.CompensationToken> como um argumento para fora-.</span><span class="sxs-lookup"><span data-stu-id="d98cc-111">When this internal <xref:System.Activities.Statements.CompensableActivity> completes, it produces a <xref:System.Activities.Statements.CompensationToken> as an out-argument.</span></span> <span data-ttu-id="d98cc-112">`AutoConfirmScope` usa <xref:System.Activities.Statements.TryCatch.Finally%2A> para verificar se o símbolo é gerado e tem então ele confirma <xref:System.Activities.Statements.CompensableActivity>interno.</span><span class="sxs-lookup"><span data-stu-id="d98cc-112">The `AutoConfirmScope` uses a <xref:System.Activities.Statements.TryCatch.Finally%2A> to check whether the token has been produced and if it has then it confirms the inner <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="d98cc-113"><xref:System.Activities.Statements.CompensableActivity> interno chama a compensação padrão para todas as atividades compensáveis que podem existir no corpo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-113">The inner <xref:System.Activities.Statements.CompensableActivity> invokes the default compensation for any compensable activities that may exist in its body.</span></span>  
  
 <span data-ttu-id="d98cc-114">O primeiro cenário mostra a execução bem-sucedida de fluxo de trabalho e demonstrar-la que a segunda e terceira atividades compensáveis são confirmadas já quando o fluxo de trabalho e conclui as primeiras e em quarto confirmadas.</span><span class="sxs-lookup"><span data-stu-id="d98cc-114">The first scenario shows successful execution of the workflow and demonstrates that the second and third compensable activities are already confirmed when the workflow completes and the first and fourth are confirmed.</span></span> <span data-ttu-id="d98cc-115">Isso gerencia uma ordem de confirmação de três, de dois, de quatro, e um.</span><span class="sxs-lookup"><span data-stu-id="d98cc-115">This produces a confirmation order of three, two, four, and one.</span></span>  
  
 <span data-ttu-id="d98cc-116">O segundo cenário mostra uma exceção depois que as quatro atividades compensáveis terminar.</span><span class="sxs-lookup"><span data-stu-id="d98cc-116">The second scenario shows an exception after the four compensable activities have completed.</span></span> <span data-ttu-id="d98cc-117">Porque as atividades compensáveis dois e três já estão confirmado eles não são afetadas mas uma e quatro é compensado.</span><span class="sxs-lookup"><span data-stu-id="d98cc-117">Because compensable activities two and three are already confirmed they are unaffected but one and four are compensated.</span></span> <span data-ttu-id="d98cc-118">Isso gerencia confirma três, confirmar dois, compensa quatro e compensa um.</span><span class="sxs-lookup"><span data-stu-id="d98cc-118">This produces confirm three, confirm two, compensate four and compensate one.</span></span>  
  
 <span data-ttu-id="d98cc-119">A situação final mostra a execução mal sucedido de `AutoConfirmScope`.</span><span class="sxs-lookup"><span data-stu-id="d98cc-119">The final scenario shows unsuccessful execution of the `AutoConfirmScope`.</span></span> <span data-ttu-id="d98cc-120">Nesse cenário, uma exceção ocorre após a conclusão do segundo <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="d98cc-120">In this scenario, an exception occurs after the completion of the second <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="d98cc-121">Porque o terceiro e quartas atividades compensáveis não sua execução, não são afetadas.</span><span class="sxs-lookup"><span data-stu-id="d98cc-121">Because the third and fourth compensable activities have not executed, they are unaffected.</span></span> <span data-ttu-id="d98cc-122">Porque o escopo não terminou com êxito, conforme <xref:System.Activities.Statements.CompensableActivity> não é confirmado.</span><span class="sxs-lookup"><span data-stu-id="d98cc-122">Because the scope did not complete successfully, the second <xref:System.Activities.Statements.CompensableActivity> does not get confirmed.</span></span> <span data-ttu-id="d98cc-123">Isso gerenciar e ordem de compensação de dois em um.</span><span class="sxs-lookup"><span data-stu-id="d98cc-123">This produces and compensation order of two then one.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="d98cc-124">Para usar este exemplo</span><span class="sxs-lookup"><span data-stu-id="d98cc-124">To use this sample</span></span>  
  
1.  <span data-ttu-id="d98cc-125">Usando [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], abra o arquivo de solução de AutoConfirmSample.sln.</span><span class="sxs-lookup"><span data-stu-id="d98cc-125">Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the AutoConfirmSample.sln solution file.</span></span>  
  
2.  <span data-ttu-id="d98cc-126">Para criar a solução, pressione CTRL+SHIFT+B.</span><span class="sxs-lookup"><span data-stu-id="d98cc-126">To build the solution, press CTRL+SHIFT+B.</span></span>  
  
3.  <span data-ttu-id="d98cc-127">Para executar a solução, pressione CTRL+F5.</span><span class="sxs-lookup"><span data-stu-id="d98cc-127">To run the solution, press CTRL+F5.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="d98cc-128">Os exemplos podem já estar instalados no seu computador.</span><span class="sxs-lookup"><span data-stu-id="d98cc-128">The samples may already be installed on your machine.</span></span> <span data-ttu-id="d98cc-129">Verifique o seguinte diretório (padrão) antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="d98cc-129">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="d98cc-130">Se este diretório não existir, vá para [Windows Communication Foundation (WCF) e exemplos do Windows Workflow Foundation (WF) para o .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) para baixar todos os Windows Communication Foundation (WCF) e [!INCLUDE[wf1](../../../../includes/wf1-md.md)] exemplos.</span><span class="sxs-lookup"><span data-stu-id="d98cc-130">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="d98cc-131">Este exemplo está localizado no seguinte diretório.</span><span class="sxs-lookup"><span data-stu-id="d98cc-131">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Scenario\Compensation\AutoConfirm`