---
title: Host de WorkflowApplication ReadLine
ms.date: 03/30/2017
ms.assetid: f7b362be-cb42-40d7-b9ef-cfc4aed2455b
ms.openlocfilehash: 4388ff0285de58b0dc6f86af93aad84b2894373f
ms.sourcegitcommit: efff8f331fd9467f093f8ab8d23a203d6ecb5b60
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/02/2018
ms.locfileid: "43470847"
---
# <a name="workflowapplication-readline-host"></a><span data-ttu-id="cab90-102">Host de WorkflowApplication ReadLine</span><span class="sxs-lookup"><span data-stu-id="cab90-102">WorkflowApplication ReadLine Host</span></span>
<span data-ttu-id="cab90-103">Este exemplo é um host genérica de ReadLine.</span><span class="sxs-lookup"><span data-stu-id="cab90-103">This sample is a generic ReadLine host.</span></span> <span data-ttu-id="cab90-104">Você pode carregar e executar qualquer fluxo de trabalho usando a atividade incluída de `ReadLine` (ou outras atividades como ele obtém dados de indexadores continuados com cadeias de caracteres).</span><span class="sxs-lookup"><span data-stu-id="cab90-104">You can load and run any workflow using the included `ReadLine` activity (or other activities like it that get data from bookmarks resumed with strings).</span></span> <span data-ttu-id="cab90-105">A saída de atividade ou de qualquer coisa de `WriteLine` gravação para a extensão de <xref:System.Activities.Statements.WriteLine.TextWriter%2A> está direcionada para a janela aeromoça.</span><span class="sxs-lookup"><span data-stu-id="cab90-105">Output from the `WriteLine` activity or anything writing to the <xref:System.Activities.Statements.WriteLine.TextWriter%2A> extension is directed to the host window.</span></span> <span data-ttu-id="cab90-106">Quando uma instância estiver ocioso, os indicadores disponíveis para essa instância aparecem em uma caixa de combinação.</span><span class="sxs-lookup"><span data-stu-id="cab90-106">When an instance is idle, the available bookmarks for that instance appear in a combo box.</span></span> <span data-ttu-id="cab90-107">Selecione um marcador, inserir texto, e pressione o botão do indexador de resumo continuam a execução de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="cab90-107">Selecting a bookmark, inputting some text, and pressing the resume bookmark button continue the execution of the workflow.</span></span> <span data-ttu-id="cab90-108">Você também pode cancelar, nulo, ou finalizar um fluxo de trabalho selecionado.</span><span class="sxs-lookup"><span data-stu-id="cab90-108">You can also cancel, abort, or terminate a selected workflow.</span></span> <span data-ttu-id="cab90-109">Persistência está ativada por padrão – você pode fechar o host e trazer-lhe a voltar, e a lista de instância é preenchida com instâncias armazenadas na base de dados.</span><span class="sxs-lookup"><span data-stu-id="cab90-109">Persistence is on by default – you can shut down the host and bring it back, and the instance list is populated with the instances stored in the database.</span></span> <span data-ttu-id="cab90-110">O rastreamento é usado para produzir <xref:System.Activities.WorkflowApplication>- eventos de nível para o host com a opção adicionar controle detalhado a nível de atividade.</span><span class="sxs-lookup"><span data-stu-id="cab90-110">Tracking is used to output <xref:System.Activities.WorkflowApplication>-level events to the host with the option to add detailed tracking at the activity level.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="cab90-111">Detalhes de exemplo</span><span class="sxs-lookup"><span data-stu-id="cab90-111">Sample Details</span></span>  
 <span data-ttu-id="cab90-112">Há duas camadas para este host: a exibição e gerente da instância.</span><span class="sxs-lookup"><span data-stu-id="cab90-112">There are two layers to this host: the view and the instance manager.</span></span> <span data-ttu-id="cab90-113">A exibição consiste nas classes de `HostView` e de `WorkflowApplicationInfo` .</span><span class="sxs-lookup"><span data-stu-id="cab90-113">The view consists of the `HostView` and `WorkflowApplicationInfo` classes.</span></span> <span data-ttu-id="cab90-114">O padrão geral para este host é a classe de `HostView` exiba opções disponíveis para o usuário com base em objetos de `WorkflowApplicationInfo` que são mantidos bastante em sincronia com instâncias que representam.</span><span class="sxs-lookup"><span data-stu-id="cab90-114">The general pattern for this host is for the `HostView` class to display available options to the user based on `WorkflowApplicationInfo` objects that are kept reasonably in synchronization with the instances they represent.</span></span> <span data-ttu-id="cab90-115">A camada do gerenciador de instância consiste na classe de `WorkflowApplicationManager` , que é o núcleo de todas as comunicações host, e a classe de `WorkflowDefinitionExtension` , que persiste a relação entre uma instância e a definição de programa foi iniciado com e algumas outras classes.</span><span class="sxs-lookup"><span data-stu-id="cab90-115">The instance manager layer consists of the `WorkflowApplicationManager` class, which is the core of all host communications, and the `WorkflowDefinitionExtension` class, which persists the relationship between an instance and the program definition it was started with and a few other classes.</span></span> <span data-ttu-id="cab90-116">Operações de controle de chamadas de `HostView` em `WorkflowApplicationManager`.</span><span class="sxs-lookup"><span data-stu-id="cab90-116">The `HostView` calls control operations on the `WorkflowApplicationManager`.</span></span> <span data-ttu-id="cab90-117">Essas chamadas assíncronas são normalmente manter uma interface de usuário responde.</span><span class="sxs-lookup"><span data-stu-id="cab90-117">These calls are typically asynchronous to maintain a responsive user interface.</span></span> <span data-ttu-id="cab90-118">Quando fazer chamadas assíncronas, `WorkflowApplicationManager` faz chamadas de novo na camada de exibição através de uma interface bem definido (`IHostView`).</span><span class="sxs-lookup"><span data-stu-id="cab90-118">When the asynchronous calls complete, the `WorkflowApplicationManager` makes calls back into the view layer through a well-defined interface (`IHostView`).</span></span> <span data-ttu-id="cab90-119">A classe de `HostView` distribui com mais freqüência essas chamadas de classe de `WorkflowApplicationManager` ao encadeamento de interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="cab90-119">The `HostView` class most often dispatches these calls from the `WorkflowApplicationManager` class to the user interface thread.</span></span> <span data-ttu-id="cab90-120">Gravação de texto é feita aos objetos thread-safe de <xref:System.Activities.Statements.WriteLine.TextWriter%2A> fornecidos pela classe de `HostView` .</span><span class="sxs-lookup"><span data-stu-id="cab90-120">Text writing is done to thread-safe <xref:System.Activities.Statements.WriteLine.TextWriter%2A> objects provided by the `HostView` class.</span></span> <span data-ttu-id="cab90-121">A interface do usuário não é a única coisa que gerencia eventos.</span><span class="sxs-lookup"><span data-stu-id="cab90-121">The user interface is not the only thing generating events.</span></span> <span data-ttu-id="cab90-122">Os objetos de <xref:System.Activities.WorkflowApplication> também sinalizam quando `WorkflowApplicationManager` vão `Idle`, `Complete`, ou são `Aborted`, por exemplo.</span><span class="sxs-lookup"><span data-stu-id="cab90-122">The <xref:System.Activities.WorkflowApplication> objects also signal the `WorkflowApplicationManager` when they go `Idle`, `Complete`, or are `Aborted`, for example.</span></span> <span data-ttu-id="cab90-123">A classe de `WorkflowApplicationManager` sai do segmento do evento distribuir limpa ou atualizar o trabalho para o host.</span><span class="sxs-lookup"><span data-stu-id="cab90-123">The `WorkflowApplicationManager` class gets off the event thread by dispatching clean up or updating work to the host.</span></span>  
  
 <span data-ttu-id="cab90-124">A gravação do arquivo usado para iniciar <xref:System.Activities.WorkflowApplication> é facilitada pela classe de `WorkflowDefinitionExtension` .</span><span class="sxs-lookup"><span data-stu-id="cab90-124">The recording of the file used to launch a <xref:System.Activities.WorkflowApplication> is facilitated by the `WorkflowDefinitionExtension` class.</span></span> <span data-ttu-id="cab90-125">Implementa a interface de <xref:System.Activities.Persistence.PersistenceIOParticipant> para participar na persistência e persistir o caminho para a definição de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="cab90-125">It implements the <xref:System.Activities.Persistence.PersistenceIOParticipant> interface to participate in persistence and persist the path to the workflow definition.</span></span>  
  
 <span data-ttu-id="cab90-126">O método de `WorkflowApplicationManager.Load` usa o caminho armazenado para instanciar os programas de fluxo de trabalho necessários carregando objetos incompletas de <xref:System.Activities.WorkflowApplication> .</span><span class="sxs-lookup"><span data-stu-id="cab90-126">The `WorkflowApplicationManager.Load` method uses the stored path to instantiate the workflow programs required for loading unfinished <xref:System.Activities.WorkflowApplication> objects.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="cab90-127">Para configurar, compilar, e executar o exemplo</span><span class="sxs-lookup"><span data-stu-id="cab90-127">To set up, build, and run the sample</span></span>  
  
1.  <span data-ttu-id="cab90-128">Este exemplo requer o SQL express para ser instalado.</span><span class="sxs-lookup"><span data-stu-id="cab90-128">This sample requires SQL Express to be installed.</span></span> <span data-ttu-id="cab90-129">O SQL express vem com [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cab90-129">SQL Express comes with [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="cab90-130">Abra um prompt de comando Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="cab90-130">Open a Visual Studio 2010 command prompt.</span></span>  
  
3.  <span data-ttu-id="cab90-131">Navegue para o diretório de exemplo (\ \ WF básico \ \ execução ControllingWorkflowApplications) e a CreateInstanceStore.cmd executado.</span><span class="sxs-lookup"><span data-stu-id="cab90-131">Navigate to the sample directory (\WF\Basic\Execution\ControllingWorkflowApplications) and run CreateInstanceStore.cmd.</span></span>  
  
4.  <span data-ttu-id="cab90-132">O script de CreateInstanceStore.cmd tentar criar o base de dados na instância padrão do SQL Server 2008 Express.</span><span class="sxs-lookup"><span data-stu-id="cab90-132">The CreateInstanceStore.cmd script attempts to create the database on the default instance of SQL Server 2008 Express.</span></span> <span data-ttu-id="cab90-133">Se você deseja instalar o base de dados em uma instância diferente, modifique o script para fazer isso.</span><span class="sxs-lookup"><span data-stu-id="cab90-133">If you want to install the database on a different instance, modify the script to do so.</span></span>  
  
5.  <span data-ttu-id="cab90-134">Compile o projeto de WorkflowApplicationReadLineHost e executá-lo de linha de comando.</span><span class="sxs-lookup"><span data-stu-id="cab90-134">Compile the WorkflowApplicationReadLineHost project and run it from the command line.</span></span>  
  
6.  <span data-ttu-id="cab90-135">Depois de executar opcionalmente, você pode desativar a persistência ou sobre.</span><span class="sxs-lookup"><span data-stu-id="cab90-135">Once running, you can optionally turn persistence off or on.</span></span> <span data-ttu-id="cab90-136">Mais, você pode opcionalmente girar controlar detalhado da atividade ligado/desligado.</span><span class="sxs-lookup"><span data-stu-id="cab90-136">Further, you can optionally turn detailed activity tracking on or off.</span></span>  
  
7.  <span data-ttu-id="cab90-137">Pressione o botão de reticências ao lado de **executar** botão para procurar um fluxo de trabalho definido em um arquivo XAML</span><span class="sxs-lookup"><span data-stu-id="cab90-137">Press the ellipsis button next to the **Run** button to browse for a workflow defined in a XAML file</span></span>  
  
     <span data-ttu-id="cab90-138">Dois exemplos podem ser localizados na pasta de SampleWorkflows.</span><span class="sxs-lookup"><span data-stu-id="cab90-138">Two samples can be found under the SampleWorkflows folder.</span></span> <span data-ttu-id="cab90-139">O exemplo de parallel1.xaml vai ociosa.</span><span class="sxs-lookup"><span data-stu-id="cab90-139">The parallel1.xaml example goes idle.</span></span>  
  
8.  <span data-ttu-id="cab90-140">Depois que um exemplo é selecionado, pressione a **executar** botão.</span><span class="sxs-lookup"><span data-stu-id="cab90-140">Once an example is selected, press the **Run** button.</span></span>  
  
9. <span data-ttu-id="cab90-141">Se ou quando o fluxo de trabalho aparece ocioso, o **indicadores** caixa de combinação é preenchida com indicadores disponíveis.</span><span class="sxs-lookup"><span data-stu-id="cab90-141">If or when the workflow goes idle, the **Bookmarks** combo box is populated with available bookmarks.</span></span>  
  
10. <span data-ttu-id="cab90-142">As opções são nesse momento retomar um marcador, cancelar, nulo, ou finalizar o fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="cab90-142">The options at this point are to resume a bookmark, cancel, abort, or terminate the workflow.</span></span> <span data-ttu-id="cab90-143">Você também pode fechar o host e reinicie.</span><span class="sxs-lookup"><span data-stu-id="cab90-143">You can also shut down the host and restart it.</span></span> <span data-ttu-id="cab90-144">Se a persistência é deixada em, as instâncias são descarregadas no desligamento e recarregados rapidamente iniciar anterior.</span><span class="sxs-lookup"><span data-stu-id="cab90-144">If persistence is left on, the instances are unloaded on shutdown and reloaded on start up.</span></span>  
  
     <span data-ttu-id="cab90-145">Para retomar um indicador, selecione o indicador desejado, digite um valor na caixa de texto ao lado da caixa de combinação e pressione **retomar o indicador**.</span><span class="sxs-lookup"><span data-stu-id="cab90-145">To resume a bookmark, select the desired bookmark, type in a value in the text box next to the combo box and press **Resume Bookmark**.</span></span>  
  
#### <a name="to-remove-the-instance-store-database"></a><span data-ttu-id="cab90-146">Para remover o base de dados do armazenamento de instância</span><span class="sxs-lookup"><span data-stu-id="cab90-146">To remove the instance store database</span></span>  
  
1.  <span data-ttu-id="cab90-147">Abra um prompt de comando Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="cab90-147">Open a Visual Studio 2010 command prompt.</span></span>  
  
2.  <span data-ttu-id="cab90-148">Navegue para o diretório de exemplo (\ \ WF básico \ \ execução ControllingWorkflowApplications) e a RemoveInstanceStore.cmd executado.</span><span class="sxs-lookup"><span data-stu-id="cab90-148">Navigate to the sample directory (\WF\Basic\Execution\ControllingWorkflowApplications) and run RemoveInstanceStore.cmd.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="cab90-149">Os exemplos podem já estar instalados no seu computador.</span><span class="sxs-lookup"><span data-stu-id="cab90-149">The samples may already be installed on your machine.</span></span> <span data-ttu-id="cab90-150">Verifique o seguinte diretório (padrão) antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="cab90-150">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="cab90-151">Se este diretório não existir, vá para [Windows Communication Foundation (WCF) e o Windows Workflow Foundation (WF) exemplos do .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) para baixar todos os Windows Communication Foundation (WCF) e [!INCLUDE[wf1](../../../../includes/wf1-md.md)] exemplos.</span><span class="sxs-lookup"><span data-stu-id="cab90-151">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="cab90-152">Este exemplo está localizado no seguinte diretório.</span><span class="sxs-lookup"><span data-stu-id="cab90-152">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Execution\ControllingWorkflowApplications`