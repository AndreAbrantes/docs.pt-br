---
title: Confirmação
ms.date: 03/30/2017
ms.assetid: 8637aeaf-ac9e-49b8-93f4-da15dee45277
ms.openlocfilehash: caa712aa52da01ce44335a361fd6c9f5215316bf
ms.sourcegitcommit: 4b6490b2529707627ad77c3a43fbe64120397175
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/10/2018
ms.locfileid: "44276936"
---
# <a name="confirmation"></a><span data-ttu-id="a1ec5-102">Confirmação</span><span class="sxs-lookup"><span data-stu-id="a1ec5-102">Confirmation</span></span>
<span data-ttu-id="a1ec5-103">Este exemplo mostra quatro cenários comuns envolvendo o uso de <xref:System.Activities.Statements.CompensableActivity> e de confirmação.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-103">This sample shows four common scenarios surrounding the use of <xref:System.Activities.Statements.CompensableActivity> and confirmation.</span></span> <span data-ttu-id="a1ec5-104">O exemplo é executado quatro fluxos de trabalho para mostrar a confirmação.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-104">The sample runs four workflows to show confirmation.</span></span> <span data-ttu-id="a1ec5-105">Este exemplo está disponível em versões declarativas e imperativas.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-105">This sample is available in declarative and imperative versions.</span></span>  
  
## <a name="confirm-a-compensable-activity"></a><span data-ttu-id="a1ec5-106">Confirme uma atividade compensável</span><span class="sxs-lookup"><span data-stu-id="a1ec5-106">Confirm a Compensable Activity</span></span>  
 <span data-ttu-id="a1ec5-107">O primeiro fluxo de trabalho demonstra como confirmar uma atividade compensável e consiste em uma sequência de duas instâncias de <xref:System.Activities.Statements.CompensableActivity> .</span><span class="sxs-lookup"><span data-stu-id="a1ec5-107">The first workflow demonstrates how to confirm a compensable activity and consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity> instances.</span></span> <span data-ttu-id="a1ec5-108">Após a conclusão do segundo <xref:System.Activities.Statements.CompensableActivity> uma atividade de confirmação confirmar a primeira atividade.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-108">After the completion of the second <xref:System.Activities.Statements.CompensableActivity> a confirm activity confirms the first activity.</span></span> <span data-ttu-id="a1ec5-109">Quando o fluxo de trabalho concluída com sucesso, todas as instâncias de <xref:System.Activities.Statements.CompensableActivity> que não foram confirmadas ou não foram compensadas são confirmadas automaticamente usando a ordem padrão.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-109">When the workflow successfully completes, all <xref:System.Activities.Statements.CompensableActivity> instances that have not been confirmed or compensated are automatically confirmed using the default order.</span></span> <span data-ttu-id="a1ec5-110">Sem confirmação, conforme <xref:System.Activities.Statements.CompensableActivity> seria confirmado primeiro.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-110">Without the confirm, the second <xref:System.Activities.Statements.CompensableActivity> would have been confirmed first.</span></span>  
  
## <a name="explicit-compensation"></a><span data-ttu-id="a1ec5-111">Compensação explícita</span><span class="sxs-lookup"><span data-stu-id="a1ec5-111">Explicit Compensation</span></span>  
 <span data-ttu-id="a1ec5-112">O segundo cenário mostra o efeito de confirmação padrão quando <xref:System.Activities.Statements.CompensableActivity> é compensado explicitamente.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-112">The second scenario shows the affect on default confirmation when a <xref:System.Activities.Statements.CompensableActivity> is explicitly compensated.</span></span> <span data-ttu-id="a1ec5-113">O fluxo de trabalho consiste em uma sequência de duas atividades de <xref:System.Activities.Statements.CompensableActivity> , depois que o segundo concluir o primeiro é compensado explicitamente.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-113">The workflow consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity> activities, after the second completes the first is explicitly compensated.</span></span> <span data-ttu-id="a1ec5-114">Como resultado quando o fluxo de trabalho, conclui-se somente como <xref:System.Activities.Statements.CompensableActivity> é confirmado.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-114">As a result when the workflow, completes only the second <xref:System.Activities.Statements.CompensableActivity> is confirmed.</span></span>  
  
## <a name="controlling-the-order-of-confirmation-for-nested-compensableactivity-activities"></a><span data-ttu-id="a1ec5-115">Controlando a ordem de confirmação para atividades aninhados de CompensableActivity</span><span class="sxs-lookup"><span data-stu-id="a1ec5-115">Controlling the Order of Confirmation for Nested CompensableActivity Activities</span></span>  
 <span data-ttu-id="a1ec5-116">O terceiro cenário mostra como controlar a ordem de confirmação para <xref:System.Activities.Statements.CompensableActivity>aninhado.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-116">The third scenario shows how to control the order of confirmation for nested <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="a1ec5-117">O cenário consiste em <xref:System.Activities.Statements.CompensableActivity> como a raiz de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-117">The scenario consists of a <xref:System.Activities.Statements.CompensableActivity> as the root of the workflow.</span></span> <span data-ttu-id="a1ec5-118">O corpo da raiz <xref:System.Activities.Statements.CompensableActivity> é uma sequência de três <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-118">The body of the root <xref:System.Activities.Statements.CompensableActivity> is a sequence of three <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="a1ec5-119"><xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> para a raiz <xref:System.Activities.Statements.CompensableActivity> é uma sequência que especifica para confirmar o primeiro em segundo <xref:System.Activities.Statements.CompensableActivity>aninhado.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-119">The <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> for the root <xref:System.Activities.Statements.CompensableActivity> is a sequence that specifies to confirm the first then the second nested <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="a1ec5-120">Quando o fluxo de trabalho concluir confirmar a raiz <xref:System.Activities.Statements.CompensableActivity>, que confirma em seguida, primeiro segundo e terceiro <xref:System.Activities.Statements.CompensableActivity>aninhado, nessa ordem.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-120">When the workflow completes it confirms the root <xref:System.Activities.Statements.CompensableActivity>, which then confirms the first, second and third nested <xref:System.Activities.Statements.CompensableActivity>, in that order.</span></span> <span data-ttu-id="a1ec5-121">Como resultado, a ordem padrão de confirmação é invertido essencialmente.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-121">As a result, the default confirmation order is essentially reversed.</span></span> <span data-ttu-id="a1ec5-122">Como a terceira <xref:System.Activities.Statements.CompensableActivity> não foi confirmado explicitamente como parte da raiz <xref:System.Activities.Statements.CompensableActivity> por <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>, confirma-se de acordo com a ordem padrão.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-122">Because the third <xref:System.Activities.Statements.CompensableActivity> was not explicitly confirmed as part of the root <xref:System.Activities.Statements.CompensableActivity> by the <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>, it is confirmed according to the default order.</span></span> <span data-ttu-id="a1ec5-123">No entanto, como é único <xref:System.Activities.Statements.CompensableActivity> não-confirmado isso significa apertado confirma-se.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-123">However, because it is the only unconfirmed <xref:System.Activities.Statements.CompensableActivity> this just means it is confirmed.</span></span>  
  
## <a name="scoping-of-variables"></a><span data-ttu-id="a1ec5-124">Escopo de variáveis</span><span class="sxs-lookup"><span data-stu-id="a1ec5-124">Scoping of Variables</span></span>  
 <span data-ttu-id="a1ec5-125">O quarto cenário mostra como o tempo de vida de variáveis definidas para <xref:System.Activities.Statements.CompensableActivity> ou um de seus pais ainda estão no escopo quando <xref:System.Activities.Statements.CompensableActivity.CompensationHandler%2A>, <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> ou manipuladores de <xref:System.Activities.Statements.CompensableActivity.CancellationHandler%2A> são executados mesmo se a atividade concluiu ou o fluxo de trabalho concluído.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-125">The fourth scenario shows how the lifetime of variables defined for a <xref:System.Activities.Statements.CompensableActivity> or one of their parents are still in scope when the <xref:System.Activities.Statements.CompensableActivity.CompensationHandler%2A>, <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> or <xref:System.Activities.Statements.CompensableActivity.CancellationHandler%2A> handlers are executed even if the activity has completed or the workflow has completed.</span></span> <span data-ttu-id="a1ec5-126">O fluxo de trabalho consiste em uma sequência de dois <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-126">The workflow consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="a1ec5-127">O corpo do primeiro, `mySum` variável é definido a soma de 5 e 10 e o resultado impresso.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-127">In the body of the first, the variable `mySum` is set to the sum of 5 and 10 and the result printed.</span></span> <span data-ttu-id="a1ec5-128">No corpo da segunda <xref:System.Activities.Statements.CompensableActivity>, o resultado é definida como a soma de soma e os 7 existentes e o resultado impresso.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-128">In the body of the second <xref:System.Activities.Statements.CompensableActivity>, the sum is set to the sum of the existing sum and 7 and the result printed.</span></span> <span data-ttu-id="a1ec5-129">Um manipulador personalizado de confirmação é definido para o primeiro <xref:System.Activities.Statements.CompensableActivity>, que imprimir a soma, subtraia 7 e imprimir a soma novamente.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-129">A custom confirmation handler is defined for the first <xref:System.Activities.Statements.CompensableActivity>, which prints the sum, subtracts 7 and prints the sum again.</span></span> <span data-ttu-id="a1ec5-130">É claro inspecionando as somas impressas que a variável está no escopo não apenas para os corpos de ambos <xref:System.Activities.Statements.CompensableActivity> de <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> mas também.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-130">It is clear by inspecting the printed sums that the variable is in scope not only for the bodies of both <xref:System.Activities.Statements.CompensableActivity> but the <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> as well.</span></span>  
  
#### <a name="to-run-the-sample"></a><span data-ttu-id="a1ec5-131">Para executar a amostra</span><span class="sxs-lookup"><span data-stu-id="a1ec5-131">To run the sample</span></span>  
  
1.  <span data-ttu-id="a1ec5-132">Carregar a solução em [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a1ec5-132">Load the solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="a1ec5-133">Execute o aplicativo de ConfirmationSample.exe.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-133">Run the ConfirmationSample.exe application.</span></span>  
  
3.  <span data-ttu-id="a1ec5-134">Observe a saída a seguir:</span><span class="sxs-lookup"><span data-stu-id="a1ec5-134">Observe the following output:</span></span>  
  
 <span data-ttu-id="a1ec5-135">**Confirmação explícito: início do workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: HandlerEnd de confirmação de workflowCompensableActivity2: confirmação HandlerExplicit compensação: início do workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: HandlerEnd de compensação de workflowCompensableActivity2: confirmação HandlerCustom confirmação: início do manipulador de workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity3: BodyEnd de workflowCompensableActivity1: confirmação HandlerCompensableActivity2: confirmação HandlerCompensableActivity3: acesso HandlerVariable de confirmação em um manipulador de confirmação: Início do workflowCompensableActivity1: BodyCompensableActivity1: A soma é: 15CompensableActivity2: BodyCompensableActivity2: adicionando 7 para o sumCompensableActivity2: A soma agora é: 22End de workflowCompensableActivity2: confirmação HandlerCompensableActivity1: Confirmação HandlerCompensableActivity2: A soma é: 22CompensableActivity2: depois da subtração de 12 a soma agora é: 10Press ENTER para sair.**</span><span class="sxs-lookup"><span data-stu-id="a1ec5-135">**Explicit confirmation:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Confirmation HandlerEnd of workflowCompensableActivity2: Confirmation HandlerExplicit compensation:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Compensation HandlerEnd of workflowCompensableActivity2: Confirmation HandlerCustom confirmation handler:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity3: BodyEnd of workflowCompensableActivity1: Confirmation HandlerCompensableActivity2: Confirmation HandlerCompensableActivity3: Confirmation HandlerVariable access in a confirmation handler:Start of workflowCompensableActivity1: BodyCompensableActivity1: The sum is: 15CompensableActivity2: BodyCompensableActivity2: Adding 7 to the sumCompensableActivity2: The sum is now: 22End of workflowCompensableActivity2: Confirmation HandlerCompensableActivity1: Confirmation HandlerCompensableActivity2: The sum is: 22CompensableActivity2: After subtracting 12 the sum is now: 10Press ENTER to exit.**</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="a1ec5-136">Os exemplos podem já estar instalados no seu computador.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-136">The samples may already be installed on your machine.</span></span> <span data-ttu-id="a1ec5-137">Verifique o seguinte diretório (padrão) antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-137">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="a1ec5-138">Se este diretório não existir, vá para [Windows Communication Foundation (WCF) e o Windows Workflow Foundation (WF) exemplos do .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) para baixar todos os Windows Communication Foundation (WCF) e [!INCLUDE[wf1](../../../../includes/wf1-md.md)] exemplos.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-138">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="a1ec5-139">Este exemplo está localizado no seguinte diretório.</span><span class="sxs-lookup"><span data-stu-id="a1ec5-139">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Compensation\Confirmation`