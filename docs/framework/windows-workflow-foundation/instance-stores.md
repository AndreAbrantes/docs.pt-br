---
title: "Armazenamentos de instância"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f2629668-0923-4987-b943-67477131c1e0
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: c794c6e20b479ea4686caba29704f8851d108432
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/02/2017
---
# <a name="instance-stores"></a><span data-ttu-id="af1a9-102">Armazenamentos de instância</span><span class="sxs-lookup"><span data-stu-id="af1a9-102">Instance Stores</span></span>
<span data-ttu-id="af1a9-103">Um armazenamento de instância é um contêiner lógico instâncias.</span><span class="sxs-lookup"><span data-stu-id="af1a9-103">An instance store is a logical container of instances.</span></span> <span data-ttu-id="af1a9-104">É o local onde os dados e os metadados de instância são armazenados.</span><span class="sxs-lookup"><span data-stu-id="af1a9-104">It is the place where the instance data and metadata is stored.</span></span> <span data-ttu-id="af1a9-105">Um armazenamento de instância não implica o armazenamento físico dedicado.</span><span class="sxs-lookup"><span data-stu-id="af1a9-105">An instance store does not imply dedicated physical storage.</span></span> <span data-ttu-id="af1a9-106">Um armazenamento de instância pode conter informações durável em uma base de dados SQL Server ou em uma informações de estado não durável na memória.</span><span class="sxs-lookup"><span data-stu-id="af1a9-106">An instance store could contain durable information in a SQL Server database or non-durable state information in a memory.</span></span> <span data-ttu-id="af1a9-107">Os vem de [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] com a instância Store de fluxo de trabalho SQL, que é uma implementação concreta de um armazenamento de instância que permite que os fluxos de trabalho persistam dados e metadados de instância em uma base de dados SQL Server 2005 ou SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="af1a9-107">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the SQL Workflow Instance Store, which is a concrete implementation of an instance store that allows workflows to persist instance data and metadata into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="af1a9-108">Além a tela de aplicativo Windows Server também fornece uma implementação concreta de um armazenamento de instância.</span><span class="sxs-lookup"><span data-stu-id="af1a9-108">In addition Windows Server App Fabric also provides a concrete implementation of an instance store.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="af1a9-109">[Loja instância de malha de aplicativos do Windows Server, consulta e provedores de controle](http://go.microsoft.com/fwlink/?LinkID=201201&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="af1a9-109"> [Windows Server App Fabric Instance Store, Query, and Control Providers](http://go.microsoft.com/fwlink/?LinkID=201201&clcid=0x409).</span></span>  
  
 <span data-ttu-id="af1a9-110">Persistência API é a interface entre um host e um armazenamento de instância que permite que o host enviar solicitações de comando (por exemplo, <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> e <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) para o armazenamento de instância.</span><span class="sxs-lookup"><span data-stu-id="af1a9-110">The persistence API is the interface between a host and an instance store that allows the host to send command requests (for example, <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> and <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) to the instance store.</span></span> <span data-ttu-id="af1a9-111">A implementação concreta deste API é chamado um provedor de persistência.</span><span class="sxs-lookup"><span data-stu-id="af1a9-111">The concrete implementation of this API is called a persistence provider.</span></span> <span data-ttu-id="af1a9-112">O provedor de persistência recebe solicitações de um host e altera o armazenamento de instância.</span><span class="sxs-lookup"><span data-stu-id="af1a9-112">The persistence provider receives requests from a host and modifies the instance store.</span></span>  
  
 <span data-ttu-id="af1a9-113">Hosts e armazenamentos de instância são pluggable de modo que um host pode ser usado com muitos armazenamentos de instância, e um armazenamento de instância pode ser usado com muitos host.</span><span class="sxs-lookup"><span data-stu-id="af1a9-113">Hosts and instance stores are pluggable so that a host can be used with many instance stores, and an instance store can be used with many hosts.</span></span> <span data-ttu-id="af1a9-114">Um armazenamento de instância é otimizado para normalmente os padrões de uso de um host específico, embora o armazenamento e o host de instância possa evoluir em ciclos de vida independente.</span><span class="sxs-lookup"><span data-stu-id="af1a9-114">An instance store is typically optimized for the usage patterns of a particular host, although the instance store and host may evolve on independent life cycles.</span></span> <span data-ttu-id="af1a9-115">Por exemplo, o **WorkflowServiceHost** e **SqlWorkflowInstanceStore** são projetados para funcionar bem juntos.</span><span class="sxs-lookup"><span data-stu-id="af1a9-115">For example, the **WorkflowServiceHost** and the **SqlWorkflowInstanceStore** are designed to work well together.</span></span> <span data-ttu-id="af1a9-116">Você pode criar seu próprio repositório de instância para manter dados e metadados de instâncias de serviço de fluxo de trabalho e usar esse repositório de instância com o **WorkflowServiceHost**.</span><span class="sxs-lookup"><span data-stu-id="af1a9-116">You can create your own instance store to persist data and metadata of workflow service instances and use that instance store with the **WorkflowServiceHost**.</span></span> <span data-ttu-id="af1a9-117">Por exemplo, você pode criar um OracleWorkflowInstanceStore que permite fluxos de trabalho manter informações em uma base de dados Oracle em vez de salvar em uma base de dados SQL Server.</span><span class="sxs-lookup"><span data-stu-id="af1a9-117">For example, you can create an OracleWorkflowInstanceStore that lets workflows persist information into an Oracle database instead of saving them into a SQL Server database.</span></span>  
  
 <span data-ttu-id="af1a9-118">É comum para hosts sejam estendidos com funcionalidade adicional que altera os objetos persistentes.</span><span class="sxs-lookup"><span data-stu-id="af1a9-118">It is common for hosts to be extended with additional functionality that modifies the persisted objects.</span></span> <span data-ttu-id="af1a9-119">Por exemplo, um sistema de persistência da instância pode ter um host de fluxo de trabalho, uma extensão com suporte para a operação "Suspend" e um repositório de instâncias do SQL.</span><span class="sxs-lookup"><span data-stu-id="af1a9-119">For example, an instance persistence system may have a workflow host, an extension that supports the "Suspend" operation, and an SQL instance store.</span></span>  <span data-ttu-id="af1a9-120">O host de fluxo de trabalho pode enviar um comando padrão como salvar ou carregá-lo para salvar ou carregar um fluxo de trabalho de um armazenamento de instância ou para salvar um fluxo de trabalho em um armazenamento de instância.</span><span class="sxs-lookup"><span data-stu-id="af1a9-120">The workflow host might send a standard command such as Save or Load to save or load a workflow from an instance store or to save a workflow into an instance store.</span></span> <span data-ttu-id="af1a9-121">A extensão de suspensão pode adicionar a semântica adicional para comandos para salvar e carregar instâncias de fluxo de trabalho de forma que uma instância suspendida de fluxo de trabalho não pode ser carregada.</span><span class="sxs-lookup"><span data-stu-id="af1a9-121">The suspend extension might add additional semantics to the commands for saving and loading workflow instances so that a suspended workflow instance cannot be loaded.</span></span> <span data-ttu-id="af1a9-122">O provedor de persistência para o armazenamento de instância de SQL entenda os comandos para salvar e carregar instâncias de fluxo de trabalho, e implementa os comandos chamando procedimentos armazenados apropriadas que alteram as tabelas de objetos persistentes em uma base de dados SQL Server.</span><span class="sxs-lookup"><span data-stu-id="af1a9-122">The persistence provider for the SQL instance store understands the commands for saving and loading workflow instances, and implements the commands by calling appropriate stored procedures that change the tables of persistent objects in an SQL Server database.</span></span>  
  
 <span data-ttu-id="af1a9-123">Um host atua como um proprietário de instância em um armazenamento de instância.</span><span class="sxs-lookup"><span data-stu-id="af1a9-123">A host acts as an instance owner within an instance store.</span></span> <span data-ttu-id="af1a9-124">Um host pode atuar como mais de um proprietário da instância com mais de uma instância armazena ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="af1a9-124">A host may act as more than one instance owner with more than one instance store at the same time.</span></span> <span data-ttu-id="af1a9-125">O host fornece as chaves de GUIDs por exemplo associadas com instâncias.</span><span class="sxs-lookup"><span data-stu-id="af1a9-125">The host provides GUIDs for instance keys associated with the instances.</span></span> <span data-ttu-id="af1a9-126">Uma chave de instância é um alias exclusivos que identifiquem uma instância.</span><span class="sxs-lookup"><span data-stu-id="af1a9-126">An instance key is a unique alias that identifies an instance.</span></span> <span data-ttu-id="af1a9-127">O sistema de persistência cria, atualizações, e informações do proprietário de instância exclui como executar comandos por aplicativos host.</span><span class="sxs-lookup"><span data-stu-id="af1a9-127">The persistence system creates, updates, and deletes instance owner information as it executes commands requested by hosts.</span></span>  
  
 <span data-ttu-id="af1a9-128">A lista a seguir contém as etapas importantes envolvidas na interação de host com o armazenamento de instância:</span><span class="sxs-lookup"><span data-stu-id="af1a9-128">The following list contains the important steps involved in the host’s interaction with the instance store:</span></span>  
  
1.  <span data-ttu-id="af1a9-129">Obter um **InstanceStore** de um provedor de persistência.</span><span class="sxs-lookup"><span data-stu-id="af1a9-129">Obtain an **InstanceStore** from a persistence provider.</span></span>  

2.  <span data-ttu-id="af1a9-130">Obter o identificador para uma instância chamando o <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> método sobre o **InstanceStore**.</span><span class="sxs-lookup"><span data-stu-id="af1a9-130">Obtain the handle to an instance by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> method on the **InstanceStore**.</span></span>  
  
3.  <span data-ttu-id="af1a9-131">Chamar comandos em relação ao identificador de instância, chamando o <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> método o **InstanceStore**.</span><span class="sxs-lookup"><span data-stu-id="af1a9-131">Invoke commands against the instance handle by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> method on the **InstanceStore**.</span></span>  
  
4.  <span data-ttu-id="af1a9-132">Examine o <xref:System.Runtime.DurableInstancing.InstanceView> retornado por **Instancestore** para determinar os resultados dos comandos.</span><span class="sxs-lookup"><span data-stu-id="af1a9-132">Examine the <xref:System.Runtime.DurableInstancing.InstanceView> returned by **InstanceStore.Execute** to determine the results of the commands.</span></span>
