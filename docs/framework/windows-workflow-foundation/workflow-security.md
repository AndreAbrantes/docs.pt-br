---
title: Segurança de fluxo de trabalho
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], workflow security
ms.assetid: d712a566-f435-44c0-b8c0-49298e84b114
ms.openlocfilehash: b14dd600526612b6af8b9fad15f65a748eb0b368
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/15/2019
ms.locfileid: "65637534"
---
# <a name="workflow-security"></a><span data-ttu-id="8d81b-102">Segurança de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="8d81b-102">Workflow Security</span></span>
<span data-ttu-id="8d81b-103">Windows Workflow Foundation (WF) está integrado com várias tecnologias diferentes, como Microsoft SQL Server e Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="8d81b-103">Windows Workflow Foundation (WF) is integrated with several different technologies, such as Microsoft SQL Server and Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="8d81b-104">Interagir com essas tecnologias pode gerar problemas de segurança no fluxo de trabalho se feito de modo inadequado.</span><span class="sxs-lookup"><span data-stu-id="8d81b-104">Interacting with these technologies may introduce security issues into your workflow if done improperly.</span></span>

## <a name="persistence-security-concerns"></a><span data-ttu-id="8d81b-105">Problemas de segurança de persistência</span><span class="sxs-lookup"><span data-stu-id="8d81b-105">Persistence Security Concerns</span></span>

1. <span data-ttu-id="8d81b-106">Fluxos de trabalho que usam uma necessidade de atividade e de persistência <xref:System.Activities.Statements.Delay> de ser reactivated por um serviço.</span><span class="sxs-lookup"><span data-stu-id="8d81b-106">Workflows that use a <xref:System.Activities.Statements.Delay> activity and persistence need to be reactivated by a service.</span></span> <span data-ttu-id="8d81b-107">Windows AppFabric usa o serviço de gerenciamento (WMS) de fluxo de trabalho para reativar fluxos de trabalho com timers expirados.</span><span class="sxs-lookup"><span data-stu-id="8d81b-107">Windows AppFabric uses the Workflow Management Service (WMS) to reactivate workflows with expired timers.</span></span> <span data-ttu-id="8d81b-108">WMS cria <xref:System.ServiceModel.WorkflowServiceHost> para hospedar o fluxo de trabalho reactivated.</span><span class="sxs-lookup"><span data-stu-id="8d81b-108">WMS creates a <xref:System.ServiceModel.WorkflowServiceHost> to host the reactivated workflow.</span></span> <span data-ttu-id="8d81b-109">Se o serviço de WMS é interrompida, os fluxos de trabalho mantidas não reactivated quando seus timers eles expiram.</span><span class="sxs-lookup"><span data-stu-id="8d81b-109">If the WMS service is stopped, persisted workflows will not be reactivated when their timers expire.</span></span>

2. <span data-ttu-id="8d81b-110">Acesso a métodos de como exemplo de bens deve ser protegido contra as entidades mal-intencionados externos ao domínio do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8d81b-110">Access to durable instancing should be protected against malicious entities external to the application domain.</span></span> <span data-ttu-id="8d81b-111">Além disso, os desenvolvedores devem garantir que o código mal-intencionado não pode ser executado no mesmo domínio de aplicativo que o código de instâncias durável.</span><span class="sxs-lookup"><span data-stu-id="8d81b-111">In addition, developers should ensure that malicious code can't be executed in the same application domain as the durable instancing code.</span></span>

3. <span data-ttu-id="8d81b-112">Citar como exemplo de bens não deve ser executado com permissões elevadas (de administrador).</span><span class="sxs-lookup"><span data-stu-id="8d81b-112">Durable instancing should not be run with elevated (Administrator) permissions.</span></span>

4. <span data-ttu-id="8d81b-113">Os dados que estão sendo processadas fora do domínio de aplicativo devem ser protegidos.</span><span class="sxs-lookup"><span data-stu-id="8d81b-113">Data being processed outside the application domain should be protected.</span></span>

5. <span data-ttu-id="8d81b-114">Aplicativos que requerem isolamento de segurança não devem compartilhar a mesma instância de abstração de esquema.</span><span class="sxs-lookup"><span data-stu-id="8d81b-114">Applications that require security isolation should not share the same instance of the schema abstraction.</span></span> <span data-ttu-id="8d81b-115">Esses aplicativos devem usar diferentes provedores de armazenamento, ou provedores de armazenamento configurados para usar instanciações diferentes de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="8d81b-115">Such applications should use different store providers, or store providers configured to use different store instantiations.</span></span>

## <a name="sql-server-security-concerns"></a><span data-ttu-id="8d81b-116">Problemas de segurança do SQL Server</span><span class="sxs-lookup"><span data-stu-id="8d81b-116">SQL Server Security Concerns</span></span>

- <span data-ttu-id="8d81b-117">Quando um grande número de atividades filhos, locais, indexadores, hospedam extensões, ou os escopos são usados, ou quando os indicadores com as carrega úteis muito grandes são usados, a memória pode ser esgotada, ou as quantidades inadequadas do espaço de base de dados podem ser atribuídas durante a persistência.</span><span class="sxs-lookup"><span data-stu-id="8d81b-117">When large numbers of child activities, locations, bookmarks, host extensions, or scopes are used, or when bookmarks with very large payloads are used, memory can be exhausted, or undue amounts of database space can be allocated during persistence.</span></span> <span data-ttu-id="8d81b-118">Isso pode ser abrandado utilizando em nível de objeto e a segurança de base de dados - nível.</span><span class="sxs-lookup"><span data-stu-id="8d81b-118">This can be mitigated by using object-level and database-level security.</span></span>

- <span data-ttu-id="8d81b-119">Ao usar <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, o armazenamento de instância deve ser protegido.</span><span class="sxs-lookup"><span data-stu-id="8d81b-119">When using <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, the instance store must be secured.</span></span> <span data-ttu-id="8d81b-120">Para obter mais informações, consulte [práticas recomendadas do SQL Server](https://go.microsoft.com/fwlink/?LinkId=164972).</span><span class="sxs-lookup"><span data-stu-id="8d81b-120">For more information, see [SQL Server Best Practices](https://go.microsoft.com/fwlink/?LinkId=164972).</span></span>

- <span data-ttu-id="8d81b-121">Dados confidenciais no armazenamento de instância devem ser criptografados.</span><span class="sxs-lookup"><span data-stu-id="8d81b-121">Sensitive data in the instance store should be encrypted.</span></span> <span data-ttu-id="8d81b-122">Para obter mais informações, consulte [1&gt;{2&gt;criptografia de segurança](https://go.microsoft.com/fwlink/?LinkId=164976).</span><span class="sxs-lookup"><span data-stu-id="8d81b-122">For more information, see [SQL Security Encryption](https://go.microsoft.com/fwlink/?LinkId=164976).</span></span>

- <span data-ttu-id="8d81b-123">Desde que a cadeia de conexão caracteres de base de dados é incluída com frequência em um arquivo de configuração, a segurança do windows nível (ACL) deve ser usada para garantir que o arquivo de configuração (Web.Config) geralmente é seguro, e que o logon e informações de senha não estão incluídos na cadeia de conexão.</span><span class="sxs-lookup"><span data-stu-id="8d81b-123">Since the database connection string is often included in a configuration file, windows-level security (ACL) should be used to ensure that the configuration file (Web.Config usually) is secure, and that login and password information are not included in the connection string.</span></span> <span data-ttu-id="8d81b-124">A autenticação do Windows deve ser usada entre o base de dados e o servidor web em vez disso.</span><span class="sxs-lookup"><span data-stu-id="8d81b-124">Windows authentication should be used between the database and the web server instead.</span></span>

## <a name="considerations-for-workflowservicehost"></a><span data-ttu-id="8d81b-125">Considerações para WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="8d81b-125">Considerations for WorkflowServiceHost</span></span>

- <span data-ttu-id="8d81b-126">Pontos de extremidade do Windows Communication Foundation (WCF) usados em fluxos de trabalho devem ser protegidos.</span><span class="sxs-lookup"><span data-stu-id="8d81b-126">Windows Communication Foundation (WCF) endpoints used in workflows should be secured.</span></span> <span data-ttu-id="8d81b-127">Para obter mais informações, consulte [visão geral de segurança do WCF](https://go.microsoft.com/fwlink/?LinkID=164975).</span><span class="sxs-lookup"><span data-stu-id="8d81b-127">For more information, see [WCF Security Overview](https://go.microsoft.com/fwlink/?LinkID=164975).</span></span>

- <span data-ttu-id="8d81b-128">Autorização do nível pode ser implementada usando <xref:System.ServiceModel.ServiceAuthorizationManager>.</span><span class="sxs-lookup"><span data-stu-id="8d81b-128">Host-level authorization can be implemented by using <xref:System.ServiceModel.ServiceAuthorizationManager>.</span></span> <span data-ttu-id="8d81b-129">Consulte [como: Criar um Gerenciador de autorização personalizado para um serviço](https://go.microsoft.com/fwlink/?LinkId=192228) para obter detalhes.</span><span class="sxs-lookup"><span data-stu-id="8d81b-129">See [How To: Create a Custom Authorization Manager for a Service](https://go.microsoft.com/fwlink/?LinkId=192228) for details.</span></span>

- <span data-ttu-id="8d81b-130">O ServiceSecurityContext para a mensagem de entrada também está disponível no fluxo de trabalho acessando OperationContext.</span><span class="sxs-lookup"><span data-stu-id="8d81b-130">The ServiceSecurityContext for the incoming message is also available from within workflow by accessing OperationContext.</span></span>

## <a name="wf-security-pack-ctp"></a><span data-ttu-id="8d81b-131">Bloco CTP de segurança de WF</span><span class="sxs-lookup"><span data-stu-id="8d81b-131">WF Security Pack CTP</span></span>
 <span data-ttu-id="8d81b-132">A Microsoft WF CTP 1 de segurança é a versão primeiro community technology preview (CTP) de um conjunto de atividades e sua implementação com base em [Windows Workflow Foundation](index.md) na [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) e o [Windows Identity Foundation (WIF)](../security/index.md).</span><span class="sxs-lookup"><span data-stu-id="8d81b-132">The Microsoft WF Security Pack CTP 1 is the first community technology preview (CTP) release of a set of activities and their implementation based on [Windows Workflow Foundation](index.md) in [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) and the [Windows Identity Foundation (WIF)](../security/index.md).</span></span>  <span data-ttu-id="8d81b-133">O bloco CTP 1 de segurança do Microsoft WF contém ambas as atividades e seus designers que ilustram como facilmente ative vários cenários relacionados a segurança usando o fluxo de trabalho, incluindo:</span><span class="sxs-lookup"><span data-stu-id="8d81b-133">The Microsoft WF Security Pack CTP 1 contains both activities and their designers which illustrate how to easily enable various security-related scenarios using workflow, including:</span></span>

1. <span data-ttu-id="8d81b-134">Representando uma identidade de cliente no fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="8d81b-134">Impersonating a client identity in the workflow</span></span>

2. <span data-ttu-id="8d81b-135">Autorização de Em- fluxo de trabalho, como PrincipalPermission e validação de reivindicações</span><span class="sxs-lookup"><span data-stu-id="8d81b-135">In-workflow authorization, such as PrincipalPermission and validation of Claims</span></span>

3. <span data-ttu-id="8d81b-136">Autenticada mensagem usando ClientCredentials especificado no fluxo de trabalho, como o nome de usuário ou senha/um token recuperado de um serviço (STS) de símbolo de segurança</span><span class="sxs-lookup"><span data-stu-id="8d81b-136">Authenticated messaging using ClientCredentials specified in the workflow, such as username/password or a token retrieved from a Security Token Service (STS)</span></span>

4. <span data-ttu-id="8d81b-137">Fluxo um símbolo de segurança de cliente a um serviço back-end (delegação reivindicação- base) usando a ws-trust Ata</span><span class="sxs-lookup"><span data-stu-id="8d81b-137">Flowing a client security token to a back-end service (claims-based delegation) using WS-Trust ActAs</span></span>

<span data-ttu-id="8d81b-138">Para obter mais informações e baixar a CTP de segurança de WF, consulte: [Pacote de segurança WF CTP](https://archive.codeplex.com/?p=wf)</span><span class="sxs-lookup"><span data-stu-id="8d81b-138">For more information and to download the WF Security Pack CTP, see: [WF Security Pack CTP](https://archive.codeplex.com/?p=wf)</span></span>
