---
title: Usando WorkflowInvoker e WorkflowApplication
description: Este artigo descreve a hospedagem de fluxo de trabalho usando WorkflowInvoker e WorkflowApplication no Windows Workflow Foundation.
ms.date: 03/30/2017
ms.assetid: cd0e583c-a3f9-4fa2-b247-c7b3368c48a7
ms.openlocfilehash: 50ad291bc73818092e7a08d489d6860636f9c379
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/15/2020
ms.locfileid: "83421313"
---
# <a name="using-workflowinvoker-and-workflowapplication"></a><span data-ttu-id="84dd8-103">Usando WorkflowInvoker e WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="84dd8-103">Using WorkflowInvoker and WorkflowApplication</span></span>
<span data-ttu-id="84dd8-104">Windows Workflow Foundation (WF) fornece vários métodos de Hospedagem de fluxos de trabalho.</span><span class="sxs-lookup"><span data-stu-id="84dd8-104">Windows Workflow Foundation (WF) provides several methods of hosting workflows.</span></span> <span data-ttu-id="84dd8-105"><xref:System.Activities.WorkflowInvoker> fornece uma maneira simples para chamar um fluxo de trabalho como se fosse uma chamada de método e pode ser usado somente para os fluxos de trabalho que não usam persistência.</span><span class="sxs-lookup"><span data-stu-id="84dd8-105"><xref:System.Activities.WorkflowInvoker> provides a simple way for invoking a workflow as if it were a method call and can be used only for workflows that do not use persistence.</span></span> <span data-ttu-id="84dd8-106"><xref:System.Activities.WorkflowApplication> fornece um modelo mais rico para executar fluxos de trabalho que inclui notificação de eventos de ciclo de vida, controle de execução, de ressunção do indexador, e de persistência.</span><span class="sxs-lookup"><span data-stu-id="84dd8-106"><xref:System.Activities.WorkflowApplication> provides a richer model for executing workflows that includes notification of lifecycle events, execution control, bookmark resumption, and persistence.</span></span> <span data-ttu-id="84dd8-107"><xref:System.ServiceModel.Activities.WorkflowServiceHost> fornece suporte para atividades de mensagem e é basicamente usado com serviços de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="84dd8-107"><xref:System.ServiceModel.Activities.WorkflowServiceHost> provides support for messaging activities and is primarily used with workflow services.</span></span> <span data-ttu-id="84dd8-108">Este tópico apresenta o fluxo de trabalho que hospeda com <xref:System.Activities.WorkflowInvoker> e <xref:System.Activities.WorkflowApplication>.</span><span class="sxs-lookup"><span data-stu-id="84dd8-108">This topic introduces you to workflow hosting with <xref:System.Activities.WorkflowInvoker> and <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="84dd8-109">Para obter mais informações sobre como hospedar fluxos de trabalho com o <xref:System.ServiceModel.Activities.WorkflowServiceHost> , consulte [serviços de fluxo](../wcf/feature-details/workflow-services.md) de trabalho e [serviços de fluxo de trabalho de hospedagem](../wcf/feature-details/hosting-workflow-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="84dd8-109">For more information about hosting workflows with <xref:System.ServiceModel.Activities.WorkflowServiceHost>, see [Workflow Services](../wcf/feature-details/workflow-services.md) and [Hosting Workflow Services Overview](../wcf/feature-details/hosting-workflow-services-overview.md).</span></span>  
  
## <a name="using-workflowinvoker"></a><span data-ttu-id="84dd8-110">Usando WorkflowInvoker</span><span class="sxs-lookup"><span data-stu-id="84dd8-110">Using WorkflowInvoker</span></span>  
 <span data-ttu-id="84dd8-111"><xref:System.Activities.WorkflowInvoker> fornece um modelo para executar um fluxo de trabalho como se fosse um chamada de método.</span><span class="sxs-lookup"><span data-stu-id="84dd8-111"><xref:System.Activities.WorkflowInvoker> provides a model for executing a workflow as if it were a method call.</span></span> <span data-ttu-id="84dd8-112">Para chamar um fluxo de trabalho usando <xref:System.Activities.WorkflowInvoker>, chame o método de <xref:System.Activities.WorkflowInvoker.Invoke%2A> e passe a definição de fluxo de trabalho de fluxo de trabalho para chamar.</span><span class="sxs-lookup"><span data-stu-id="84dd8-112">To invoke a workflow using <xref:System.Activities.WorkflowInvoker>, call the <xref:System.Activities.WorkflowInvoker.Invoke%2A> method and pass in the workflow definition of the workflow to invoke.</span></span> <span data-ttu-id="84dd8-113">Nesse exemplo, uma atividade de <xref:System.Activities.Statements.WriteLine> é chamada usando <xref:System.Activities.WorkflowInvoker>.</span><span class="sxs-lookup"><span data-stu-id="84dd8-113">In this example, a <xref:System.Activities.Statements.WriteLine> activity is invoked using <xref:System.Activities.WorkflowInvoker>.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#1](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#1)]  
  
 <span data-ttu-id="84dd8-114">Quando um fluxo de trabalho é chamado usando <xref:System.Activities.WorkflowInvoker>, o fluxo de trabalho é executado no segmento de chamada e os blocos de método <xref:System.Activities.WorkflowInvoker.Invoke%2A> até que o fluxo de trabalho está completo, incluindo qualquer tempo ocioso.</span><span class="sxs-lookup"><span data-stu-id="84dd8-114">When a workflow is invoked using <xref:System.Activities.WorkflowInvoker>, the workflow executes on the calling thread and the <xref:System.Activities.WorkflowInvoker.Invoke%2A> method blocks until the workflow is complete, including any idle time.</span></span> <span data-ttu-id="84dd8-115">Para configurar um intervalo de tempo limite em que o fluxo de trabalho deveria concluir, use uma das sobrecargas de <xref:System.Activities.WorkflowInvoker.Invoke%2A> que usa um parâmetro de <xref:System.TimeSpan> .</span><span class="sxs-lookup"><span data-stu-id="84dd8-115">To configure a time-out interval in which the workflow must complete, use one of the <xref:System.Activities.WorkflowInvoker.Invoke%2A> overloads that takes a <xref:System.TimeSpan> parameter.</span></span> <span data-ttu-id="84dd8-116">Nesse exemplo, um fluxo de trabalho é chamado duas vezes em com dois intervalos de tempo limite diferentes.</span><span class="sxs-lookup"><span data-stu-id="84dd8-116">In this example, a workflow is invoked twice with two different time-out intervals.</span></span> <span data-ttu-id="84dd8-117">Os primeiros complets de fluxo de trabalho, mas os segundos não.</span><span class="sxs-lookup"><span data-stu-id="84dd8-117">The first workflow complets, but the second does not.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#50](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#50)]  
  
> [!NOTE]
> <span data-ttu-id="84dd8-118"><xref:System.TimeoutException> é acionada somente se o intervalo de tempo limite decorre e fluxo de trabalho se torna ocioso durante a execução.</span><span class="sxs-lookup"><span data-stu-id="84dd8-118">The <xref:System.TimeoutException> is only thrown if the time-out interval elapses and the workflow becomes idle during execution.</span></span> <span data-ttu-id="84dd8-119">Um fluxo de trabalho que recebe mais tempo do intervalo de tempo limite especificado para concluir concluída com êxito se o fluxo de trabalho não se torna ocioso.</span><span class="sxs-lookup"><span data-stu-id="84dd8-119">A workflow that takes longer than the specified time-out interval to complete completes successfully if the workflow does not become idle.</span></span>  
  
 <span data-ttu-id="84dd8-120"><xref:System.Activities.WorkflowInvoker> também fornece versões assíncronas do método invoke.</span><span class="sxs-lookup"><span data-stu-id="84dd8-120"><xref:System.Activities.WorkflowInvoker> also provides asynchronous versions of the invoke method.</span></span> <span data-ttu-id="84dd8-121">Para obter mais informações, consulte <xref:System.Activities.WorkflowInvoker.InvokeAsync%2A> e <xref:System.Activities.WorkflowInvoker.BeginInvoke%2A>.</span><span class="sxs-lookup"><span data-stu-id="84dd8-121">For more information, see <xref:System.Activities.WorkflowInvoker.InvokeAsync%2A> and <xref:System.Activities.WorkflowInvoker.BeginInvoke%2A>.</span></span>  
  
### <a name="setting-input-arguments-of-a-workflow"></a><span data-ttu-id="84dd8-122">Argumentos de entrada de configuração de um fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="84dd8-122">Setting Input Arguments of a Workflow</span></span>  
 <span data-ttu-id="84dd8-123">Os dados podem ser passados em um fluxo de trabalho usando um dicionário de parâmetros de entrada, fechado pelo nome de argumento, que mapeiam para argumentos de entrada de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="84dd8-123">Data can be passed into a workflow using a dictionary of input parameters, keyed by argument name, that map to the input arguments of the workflow.</span></span> <span data-ttu-id="84dd8-124">Nesse exemplo, <xref:System.Activities.Statements.WriteLine> é chamado e o valor para o argumento de <xref:System.Activities.Statements.WriteLine.Text%2A> é especificado usando o dicionário de parâmetros.</span><span class="sxs-lookup"><span data-stu-id="84dd8-124">In this example, a <xref:System.Activities.Statements.WriteLine> is invoked and the value for its <xref:System.Activities.Statements.WriteLine.Text%2A> argument is specified using the dictionary of input parameters.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#3](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#3)]  
  
### <a name="retrieving-output-arguments-of-a-workflow"></a><span data-ttu-id="84dd8-125">Recuperando argumentos de saída de um fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="84dd8-125">Retrieving Output Arguments of a Workflow</span></span>  
 <span data-ttu-id="84dd8-126">Parâmetros de saída de um fluxo de trabalho podem ser obtidos usando o dicionário de saída que é retornado da chamada a <xref:System.Activities.WorkflowInvoker.Invoke%2A>.</span><span class="sxs-lookup"><span data-stu-id="84dd8-126">The output parameters of a workflow can be obtained using the outputs dictionary that is returned from the call to <xref:System.Activities.WorkflowInvoker.Invoke%2A>.</span></span> <span data-ttu-id="84dd8-127">O exemplo a seguir chama um fluxo de trabalho que consiste em uma única atividade de `Divide` que tem dois argumentos conectados e dois argumentos de saída.</span><span class="sxs-lookup"><span data-stu-id="84dd8-127">The following example invokes a workflow consisting of a single `Divide` activity that has two input arguments and two output arguments.</span></span> <span data-ttu-id="84dd8-128">Quando o fluxo de trabalho é chamado, o dicionário de `arguments` é passado que contém os valores para cada argumento de entrada, fechado pelo nome do argumento.</span><span class="sxs-lookup"><span data-stu-id="84dd8-128">When the workflow is invoked, the `arguments` dictionary is passed which contains the values for each input argument, keyed by argument name.</span></span> <span data-ttu-id="84dd8-129">Quando o `Invoke` a chamada retorna, cada argumento de saída é retornado no dicionário de `outputs` , também fechado pelo nome do argumento.</span><span class="sxs-lookup"><span data-stu-id="84dd8-129">When the call to `Invoke` returns, each output argument is returned in the `outputs` dictionary, also keyed by argument name.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#120](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#120)]  
  
 [!code-csharp[CFX_WorkflowInvokerExample#20](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#20)]  
  
 <span data-ttu-id="84dd8-130">Se o fluxo de trabalho deriva de <xref:System.Activities.ActivityWithResult>, como `CodeActivity<TResult>` ou `Activity<TResult>`, e há argumentos de saída além do argumento bem definido de saída de <xref:System.Activities.Activity%601.Result%2A> , uma sobrecarga não genérico de `Invoke` deve ser usada para recuperar os argumentos adicionais.</span><span class="sxs-lookup"><span data-stu-id="84dd8-130">If the workflow derives from <xref:System.Activities.ActivityWithResult>, such as `CodeActivity<TResult>` or `Activity<TResult>`, and there are output arguments in addition to the well-defined <xref:System.Activities.Activity%601.Result%2A> output argument, a non-generic overload of `Invoke` must be used in order to retrieve the additional arguments.</span></span> <span data-ttu-id="84dd8-131">Para fazer isso, a definição de fluxo de trabalho passada em `Invoke` deve ser do tipo <xref:System.Activities.Activity>.</span><span class="sxs-lookup"><span data-stu-id="84dd8-131">To do this, the workflow definition passed into `Invoke` must be of type <xref:System.Activities.Activity>.</span></span> <span data-ttu-id="84dd8-132">Nesse exemplo a atividade de `Divide` deriva de `CodeActivity<int>`, mas é declarada como <xref:System.Activities.Activity> de modo que uma sobrecarga não genérico de `Invoke` é usada que retorna um dicionário dos argumentos em vez de um único valor de retorno.</span><span class="sxs-lookup"><span data-stu-id="84dd8-132">In this example the `Divide` activity derives from `CodeActivity<int>`, but is declared as <xref:System.Activities.Activity> so that a non-generic overload of `Invoke` is used which returns a dictionary of arguments instead of a single return value.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#121](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#121)]  
  
 [!code-csharp[CFX_WorkflowInvokerExample#21](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#21)]  
  
## <a name="using-workflowapplication"></a><span data-ttu-id="84dd8-133">Usando WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="84dd8-133">Using WorkflowApplication</span></span>  
 <span data-ttu-id="84dd8-134"><xref:System.Activities.WorkflowApplication> fornece um conjunto rico de recursos para gerenciamento de instância de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="84dd8-134"><xref:System.Activities.WorkflowApplication> provides a rich set of features for workflow instance management.</span></span> <span data-ttu-id="84dd8-135"><xref:System.Activities.WorkflowApplication> atua como um proxy segura do que a <xref:System.Activities.Hosting.WorkflowInstance>real, que encapsula o runtime, e fornece métodos para criar e carregar instâncias de fluxo de trabalho, pausar e continuar-las, finalizar, e notificação de eventos de ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="84dd8-135"><xref:System.Activities.WorkflowApplication> acts as a thread safe proxy to the actual  <xref:System.Activities.Hosting.WorkflowInstance>, which encapsulates the runtime, and provides methods for creating and loading workflow instances, pausing and resuming, terminating, and notification of lifecycle events.</span></span> <span data-ttu-id="84dd8-136">Para executar um fluxo de trabalho usando <xref:System.Activities.WorkflowApplication> que você cria <xref:System.Activities.WorkflowApplication>, assinar os eventos desejados do ciclo de vida, a inicia o fluxo de trabalho, e espera-o em concluir.</span><span class="sxs-lookup"><span data-stu-id="84dd8-136">To run a workflow using <xref:System.Activities.WorkflowApplication> you create the <xref:System.Activities.WorkflowApplication>, subscribe to any desired lifecycle events, start the workflow, and then wait for it to finish.</span></span> <span data-ttu-id="84dd8-137">Nesse exemplo, uma definição de fluxo de trabalho que consiste em uma atividade de <xref:System.Activities.Statements.WriteLine> é criada e <xref:System.Activities.WorkflowApplication> são criados usando a definição especificada de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="84dd8-137">In this example, a workflow definition that consists of a <xref:System.Activities.Statements.WriteLine> activity is created and a <xref:System.Activities.WorkflowApplication> is created using the specified workflow definition.</span></span> <span data-ttu-id="84dd8-138"><xref:System.Activities.WorkflowApplication.Completed%2A> é tratado para que o host é notificado quando o fluxo de trabalho for concluída, o fluxo de trabalho é iniciado com uma chamada a <xref:System.Activities.WorkflowApplication.Run%2A>, e então o host espera o fluxo de trabalho para concluir.</span><span class="sxs-lookup"><span data-stu-id="84dd8-138"><xref:System.Activities.WorkflowApplication.Completed%2A> is handled so the host is notified when the workflow completes, the workflow is started with a call to <xref:System.Activities.WorkflowApplication.Run%2A>, and then the host waits for the workflow to complete.</span></span> <span data-ttu-id="84dd8-139">Quando o fluxo de trabalho terminar, <xref:System.Threading.AutoResetEvent> é ajustado e o aplicativo host pode continuar a execução, conforme mostrado no exemplo o seguir.</span><span class="sxs-lookup"><span data-stu-id="84dd8-139">When the workflow completes, the <xref:System.Threading.AutoResetEvent> is set and the host application can resume execution, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#31](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#31)]  
  
### <a name="workflowapplication-lifecycle-events"></a><span data-ttu-id="84dd8-140">Eventos de ciclo de vida de WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="84dd8-140">WorkflowApplication Lifecycle Events</span></span>  
 <span data-ttu-id="84dd8-141">Além de <xref:System.Activities.WorkflowApplication.Completed%2A>, os autores de host podem ser notificados quando um fluxo de trabalho é descarregado (<xref:System.Activities.WorkflowApplication.Unloaded%2A>), anuladas (<xref:System.Activities.WorkflowApplication.Aborted%2A>), se torna ocioso (<xref:System.Activities.WorkflowApplication.Idle%2A> e <xref:System.Activities.WorkflowApplication.PersistableIdle%2A>), ou uma exceção não manipulada ocorre (<xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>).</span><span class="sxs-lookup"><span data-stu-id="84dd8-141">In addition to <xref:System.Activities.WorkflowApplication.Completed%2A>, host authors can be notified when a workflow is unloaded (<xref:System.Activities.WorkflowApplication.Unloaded%2A>), aborted (<xref:System.Activities.WorkflowApplication.Aborted%2A>), becomes idle (<xref:System.Activities.WorkflowApplication.Idle%2A> and <xref:System.Activities.WorkflowApplication.PersistableIdle%2A>), or an unhandled exception occurs (<xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>).</span></span> <span data-ttu-id="84dd8-142">Os desenvolvedores de aplicativos de fluxo de trabalho podem tratar essas notificações e a ação apropriada, conforme mostrado no exemplo o seguir.</span><span class="sxs-lookup"><span data-stu-id="84dd8-142">Workflow application developers can handle these notifications and take appropriate action, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#32](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#32)]  
  
### <a name="setting-input-arguments-of-a-workflow"></a><span data-ttu-id="84dd8-143">Argumentos de entrada de configuração de um fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="84dd8-143">Setting Input Arguments of a Workflow</span></span>  
 <span data-ttu-id="84dd8-144">Os dados podem ser passados em um fluxo de trabalho como são iniciados usar um dicionário de parâmetros, semelhante à forma que os dados são passados na o usar <xref:System.Activities.WorkflowInvoker>.</span><span class="sxs-lookup"><span data-stu-id="84dd8-144">Data can be passed into a workflow as it is started using a dictionary of parameters, similar to the way data is passed in when using <xref:System.Activities.WorkflowInvoker>.</span></span> <span data-ttu-id="84dd8-145">Cada item em mapas de dicionário para um argumento de entrada de fluxo de trabalho especificado.</span><span class="sxs-lookup"><span data-stu-id="84dd8-145">Each item in the dictionary maps to an input argument of the specified workflow.</span></span> <span data-ttu-id="84dd8-146">Nesse exemplo, um fluxo de trabalho que consiste em uma atividade de <xref:System.Activities.Statements.WriteLine> é chamado e o argumento de <xref:System.Activities.Statements.WriteLine.Text%2A> são especificados usando o dicionário de parâmetros.</span><span class="sxs-lookup"><span data-stu-id="84dd8-146">In this example, a workflow that consists of a <xref:System.Activities.Statements.WriteLine> activity is invoked and its <xref:System.Activities.Statements.WriteLine.Text%2A> argument is specified using the dictionary of input parameters.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#30](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#30)]  
  
### <a name="retrieving-output-arguments-of-a-workflow"></a><span data-ttu-id="84dd8-147">Recuperando argumentos de saída de um fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="84dd8-147">Retrieving Output Arguments of a Workflow</span></span>  
 <span data-ttu-id="84dd8-148">Quando um fluxo de trabalho concluir, os argumentos de saída podem ser recuperados no manipulador de <xref:System.Activities.WorkflowApplication.Completed%2A> acessando o dicionário de <xref:System.Activities.WorkflowApplicationCompletedEventArgs.Outputs%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="84dd8-148">When a workflow completes, any output arguments can be retrieved in the <xref:System.Activities.WorkflowApplication.Completed%2A> handler by accessing the <xref:System.Activities.WorkflowApplicationCompletedEventArgs.Outputs%2A?displayProperty=nameWithType> dictionary.</span></span> <span data-ttu-id="84dd8-149">O exemplo a seguir hospeda um fluxo de trabalho usando <xref:System.Activities.WorkflowApplication>.</span><span class="sxs-lookup"><span data-stu-id="84dd8-149">The following example hosts a workflow using <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="84dd8-150">Uma <xref:System.Activities.WorkflowApplication> instância é construída usando uma definição de fluxo de trabalho que consiste em uma única `DiceRoll` atividade.</span><span class="sxs-lookup"><span data-stu-id="84dd8-150">A <xref:System.Activities.WorkflowApplication> instance is constructed using a workflow definition consisting of a single `DiceRoll` activity.</span></span> <span data-ttu-id="84dd8-151">A atividade de `DiceRoll` tem dois argumentos de saída que representam os resultados da operação de rolagem de dados.</span><span class="sxs-lookup"><span data-stu-id="84dd8-151">The `DiceRoll` activity has two output arguments that represent the results of the dice roll operation.</span></span> <span data-ttu-id="84dd8-152">Quando o fluxo de trabalho for concluído, a saída são recuperadas no manipulador de <xref:System.Activities.WorkflowApplication.Completed%2A> .</span><span class="sxs-lookup"><span data-stu-id="84dd8-152">When the workflow completes, the outputs are retrieved in the <xref:System.Activities.WorkflowApplication.Completed%2A> handler.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#130](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#130)]  
  
 [!code-csharp[CFX_WorkflowApplicationExample#21](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#21)]  
  
> [!NOTE]
> <span data-ttu-id="84dd8-153"><xref:System.Activities.WorkflowApplication> e <xref:System.Activities.WorkflowInvoker> têm um dicionário de argumentos de entrada e retornam um dicionário de argumentos de `out` .</span><span class="sxs-lookup"><span data-stu-id="84dd8-153"><xref:System.Activities.WorkflowApplication> and <xref:System.Activities.WorkflowInvoker> take a dictionary of input arguments and return a dictionary of `out` arguments.</span></span> <span data-ttu-id="84dd8-154">Esses parâmetros, propriedades, e valores de retorno do dicionário são do tipo `IDictionary<string, object>`.</span><span class="sxs-lookup"><span data-stu-id="84dd8-154">These dictionary parameters, properties, and return values are of type `IDictionary<string, object>`.</span></span> <span data-ttu-id="84dd8-155">A instância real da classe dicionário que é passada em pode ser qualquer classe que implemente `IDictionary<string, object>`.</span><span class="sxs-lookup"><span data-stu-id="84dd8-155">The actual instance of the dictionary class that is passed in can be any class that implements `IDictionary<string, object>`.</span></span> <span data-ttu-id="84dd8-156">Nesses exemplos, `Dictionary<string, object>` é usado.</span><span class="sxs-lookup"><span data-stu-id="84dd8-156">In these examples, `Dictionary<string, object>` is used.</span></span> <span data-ttu-id="84dd8-157">Para obter mais informações sobre dicionários, consulte <xref:System.Collections.Generic.IDictionary%602> e <xref:System.Collections.Generic.Dictionary%602> .</span><span class="sxs-lookup"><span data-stu-id="84dd8-157">For more information about dictionaries, see <xref:System.Collections.Generic.IDictionary%602> and <xref:System.Collections.Generic.Dictionary%602>.</span></span>  
  
### <a name="passing-data-into-a-running-workflow-using-bookmarks"></a><span data-ttu-id="84dd8-158">Passando dados em um fluxo de trabalho em execução usando indicadores</span><span class="sxs-lookup"><span data-stu-id="84dd8-158">Passing Data into a Running Workflow Using Bookmarks</span></span>  
 <span data-ttu-id="84dd8-159">Indexadores são o mecanismo por que uma atividade passiva pode esperar para ser continuado e é um mecanismo para passar dados em uma instância em execução de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="84dd8-159">Bookmarks are the mechanism by which an activity can passively wait to be resumed and are a mechanism for passing data into a running workflow instance.</span></span> <span data-ttu-id="84dd8-160">Se uma atividade está aguardando dados, <xref:System.Activities.Bookmark> pode criar e registrar um método callback a ser chamado quando <xref:System.Activities.Bookmark> é que, conforme mostrado no exemplo o seguir.</span><span class="sxs-lookup"><span data-stu-id="84dd8-160">If an activity is waiting for data, it can create a <xref:System.Activities.Bookmark> and register a callback method to be called when the <xref:System.Activities.Bookmark> is resumed, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#15](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#15)]  
  
 <span data-ttu-id="84dd8-161">Quando executada, a atividade de `ReadLine` cria <xref:System.Activities.Bookmark>, registra um retorno de chamada, e espera em <xref:System.Activities.Bookmark> a ser continuado.</span><span class="sxs-lookup"><span data-stu-id="84dd8-161">When executed, the `ReadLine` activity creates a <xref:System.Activities.Bookmark>, registers a callback, and then waits for the <xref:System.Activities.Bookmark> to be resumed.</span></span> <span data-ttu-id="84dd8-162">Quando é continuada, a atividade de `ReadLine` atribui os dados que foram passados com <xref:System.Activities.Bookmark> ao seu argumento de <xref:System.Activities.Activity%601.Result%2A> .</span><span class="sxs-lookup"><span data-stu-id="84dd8-162">When it is resumed, the `ReadLine` activity assigns the data that was passed with the <xref:System.Activities.Bookmark> to its <xref:System.Activities.Activity%601.Result%2A> argument.</span></span> <span data-ttu-id="84dd8-163">Nesse exemplo, um fluxo de trabalho é criado que usa a atividade de `ReadLine` para coletar o nome de usuário e para o exibir a janela do console.</span><span class="sxs-lookup"><span data-stu-id="84dd8-163">In this example, a workflow is created that uses the `ReadLine` activity to gather the user’s name and display it to the console window.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#22](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#22)]  
  
 <span data-ttu-id="84dd8-164">Quando a atividade de `ReadLine` é executada, cria <xref:System.Activities.Bookmark> chamado `UserName` e espera no indexador a ser continuado.</span><span class="sxs-lookup"><span data-stu-id="84dd8-164">When the `ReadLine` activity is executed, it creates a <xref:System.Activities.Bookmark> named `UserName` and then waits for the bookmark to be resumed.</span></span> <span data-ttu-id="84dd8-165">O host reúne os dados desejados e depois <xref:System.Activities.Bookmark>.</span><span class="sxs-lookup"><span data-stu-id="84dd8-165">The host collects the desired data and then resumes the <xref:System.Activities.Bookmark>.</span></span> <span data-ttu-id="84dd8-166">Retoma de fluxo de trabalho, exibe o nome, e então usa.</span><span class="sxs-lookup"><span data-stu-id="84dd8-166">The workflow resumes, displays the name, and then completes.</span></span>  
  
 <span data-ttu-id="84dd8-167">O aplicativo host pode inspecionar o fluxo de trabalho para determinar se houver qualquer marcador ativo.</span><span class="sxs-lookup"><span data-stu-id="84dd8-167">The host application can inspect the workflow to determine if there are any active bookmarks.</span></span> <span data-ttu-id="84dd8-168">Pode fazer isso chamando o método de <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> de uma instância de <xref:System.Activities.WorkflowApplication> , ou inspecionando <xref:System.Activities.WorkflowApplicationIdleEventArgs> no manipulador de <xref:System.Activities.WorkflowApplication.Idle%2A> .</span><span class="sxs-lookup"><span data-stu-id="84dd8-168">It can do this by calling the <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> method of a <xref:System.Activities.WorkflowApplication> instance, or by inspecting the <xref:System.Activities.WorkflowApplicationIdleEventArgs> in the <xref:System.Activities.WorkflowApplication.Idle%2A> handler.</span></span>  
  
 <span data-ttu-id="84dd8-169">O exemplo de código é como o exemplo anterior exceto que os indicadores ativas são enumerados antes que o indexador é continuado.</span><span class="sxs-lookup"><span data-stu-id="84dd8-169">The following code example is like the previous example except that the active bookmarks are enumerated before the bookmark is resumed.</span></span> <span data-ttu-id="84dd8-170">O fluxo de trabalho é iniciado, e depois que <xref:System.Activities.Bookmark> é criado e fluxo de trabalho aparece ociosa, <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> é chamado.</span><span class="sxs-lookup"><span data-stu-id="84dd8-170">The workflow is started, and once the <xref:System.Activities.Bookmark> is created and the workflow goes idle, <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> is called.</span></span> <span data-ttu-id="84dd8-171">Quando o fluxo de trabalho for concluído, a saída a seguir são exibidas no console.</span><span class="sxs-lookup"><span data-stu-id="84dd8-171">When the workflow is completed, the following output is displayed to the console.</span></span>  
  
 <span data-ttu-id="84dd8-172">**Que é o nome?**</span><span class="sxs-lookup"><span data-stu-id="84dd8-172">**What is your name?**</span></span>  
<span data-ttu-id="84dd8-173">**BookmarkName: username-OwnerDisplayName: ReadLine** 
 **Steve** 
 **Olá, Steve**</span><span class="sxs-lookup"><span data-stu-id="84dd8-173">**BookmarkName: UserName - OwnerDisplayName: ReadLine**
**Steve**
**Hello, Steve**</span></span>

[!code-csharp[CFX_WorkflowApplicationExample#14](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#14)]  
  
 <span data-ttu-id="84dd8-174">O exemplo de código inspeciona <xref:System.Activities.WorkflowApplicationIdleEventArgs> passado para o manipulador de <xref:System.Activities.WorkflowApplication.Idle%2A> de uma instância de <xref:System.Activities.WorkflowApplication> .</span><span class="sxs-lookup"><span data-stu-id="84dd8-174">The following code example inspects the <xref:System.Activities.WorkflowApplicationIdleEventArgs> passed into the <xref:System.Activities.WorkflowApplication.Idle%2A> handler of a <xref:System.Activities.WorkflowApplication> instance.</span></span> <span data-ttu-id="84dd8-175">Nesse exemplo a ociosa indo de fluxo de trabalho tem um <xref:System.Activities.Bookmark> com um nome de `EnterGuess`, possuídas por uma atividade chamada `ReadInt`.</span><span class="sxs-lookup"><span data-stu-id="84dd8-175">In this example the workflow going idle has one <xref:System.Activities.Bookmark> with a name of `EnterGuess`, owned by an activity named `ReadInt`.</span></span> <span data-ttu-id="84dd8-176">Este exemplo de código se baseia em [como: executar um fluxo de trabalho](how-to-run-a-workflow.md), que faz parte do [tutorial de introdução](getting-started-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="84dd8-176">This code example is based off of [How to: Run a Workflow](how-to-run-a-workflow.md), which is part of the [Getting Started Tutorial](getting-started-tutorial.md).</span></span> <span data-ttu-id="84dd8-177">Se o manipulador de <xref:System.Activities.WorkflowApplication.Idle%2A> nessa etapa é alterado para conter o código deste exemplo, a seguinte saída são exibidas.</span><span class="sxs-lookup"><span data-stu-id="84dd8-177">If the <xref:System.Activities.WorkflowApplication.Idle%2A> handler in that step is modified to contain the code from this example, the following output is displayed.</span></span>  
  
 <span data-ttu-id="84dd8-178">**BookmarkName: EnterGuess - OwnerDisplayName: ReadInt**</span><span class="sxs-lookup"><span data-stu-id="84dd8-178">**BookmarkName: EnterGuess - OwnerDisplayName: ReadInt**</span></span>

 [!code-csharp[CFX_WorkflowApplicationExample#2](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#2)]  
  
## <a name="summary"></a><span data-ttu-id="84dd8-179">Resumo</span><span class="sxs-lookup"><span data-stu-id="84dd8-179">Summary</span></span>  
 <span data-ttu-id="84dd8-180"><xref:System.Activities.WorkflowInvoker> fornece uma maneira leve de invocar fluxos de trabalho e, embora fornece métodos para passar dados no início de um fluxo de trabalho e extrair dados de um fluxo de trabalho concluído, não fornece cenários mais complexos que é onde <xref:System.Activities.WorkflowApplication> pode ser usado.</span><span class="sxs-lookup"><span data-stu-id="84dd8-180"><xref:System.Activities.WorkflowInvoker> provides a lightweight way to invoke workflows, and although it provides methods for passing data in at the start of a workflow and extracting data from a completed workflow, it does not provide for more complex scenarios which is where <xref:System.Activities.WorkflowApplication> can be used.</span></span>
