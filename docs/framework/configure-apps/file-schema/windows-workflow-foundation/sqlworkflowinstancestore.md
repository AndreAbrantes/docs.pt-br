---
title: <sqlWorkflowInstanceStore>
ms.date: 03/30/2017
ms.topic: reference
ms.assetid: 8a4e4214-fc51-4f4d-b968-0427c37a9520
ms.openlocfilehash: 56a44fdb62062903ca3ad00f8105a66ccab02cca
ms.sourcegitcommit: b16c00371ea06398859ecd157defc81301c9070f
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/06/2020
ms.locfileid: "79151956"
---
# \<sqlWorkflowInstanceStore>
<span data-ttu-id="270ec-101">Um comportamento de serviço que permite configurar o recurso <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, que dá suporte a informações de estado persistentes para instâncias de serviço de fluxo de trabalho em um banco de dados do SQL Server 2005 ou do SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="270ec-101">A service behavior that allows you to configure the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> feature, which supports persisting state information for workflow service instances into an SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="270ec-102">Para obter mais informações sobre esse recurso, consulte [repositório de instância de fluxo de trabalho SQL](../../../windows-workflow-foundation/sql-workflow-instance-store.md).</span><span class="sxs-lookup"><span data-stu-id="270ec-102">For more information on this feature, see [SQL Workflow Instance Store](../../../windows-workflow-foundation/sql-workflow-instance-store.md).</span></span>  
  
[**\<configuration>**](../configuration-element.md)\
&nbsp;&nbsp;[**\<system.ServiceModel>**](system-servicemodel-of-workflow.md)\
&nbsp;&nbsp;&nbsp;&nbsp;[**\<behaviors>**](behaviors-of-workflow.md)\
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[**\<serviceBehaviors>**](servicebehaviors-of-workflow.md)\
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[**\<behavior>**](behavior-of-servicebehaviors-of-workflow.md)\
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**\<sqlWorkflowInstanceStore>**  
  
## <a name="syntax"></a><span data-ttu-id="270ec-103">Sintaxe</span><span class="sxs-lookup"><span data-stu-id="270ec-103">Syntax</span></span>  
  
```xml  
<behaviors>
  <serviceBehaviors>
    <behavior name="String">
      <sqlWorkflowInstanceStore connectionStringName="String"
                                hostLockRenewalPeriod="TimeSpan"
                                instanceCompletionAction="DeleteNothing/DeleteAll"
                                instanceEncodingAction="None/GZip"
                                instanceLockedExceptionAction="NoRetry/BasicRetry/AggressiveRetry"
                                runnableInstancesDetectionPeriod="TimeSpan" />
    </behavior>
  </serviceBehaviors>
</behaviors>  
```  
  
## <a name="attributes-and-elements"></a><span data-ttu-id="270ec-104">Atributos e elementos</span><span class="sxs-lookup"><span data-stu-id="270ec-104">Attributes and Elements</span></span>  
 <span data-ttu-id="270ec-105">As seções a seguir descrevem atributos, elementos filho e elementos pai.</span><span class="sxs-lookup"><span data-stu-id="270ec-105">The following sections describe attributes, child elements, and parent elements.</span></span>  
  
### <a name="attributes"></a><span data-ttu-id="270ec-106">Atributos</span><span class="sxs-lookup"><span data-stu-id="270ec-106">Attributes</span></span>  
  
|<span data-ttu-id="270ec-107">Atributo</span><span class="sxs-lookup"><span data-stu-id="270ec-107">Attribute</span></span>|<span data-ttu-id="270ec-108">Descrição</span><span class="sxs-lookup"><span data-stu-id="270ec-108">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="270ec-109">connectionString</span><span class="sxs-lookup"><span data-stu-id="270ec-109">connectionString</span></span>|<span data-ttu-id="270ec-110">Uma cadeia de caracteres que contém uma cadeia de conexão usada para se conectar a um banco de dados de persistência subjacente.</span><span class="sxs-lookup"><span data-stu-id="270ec-110">A string that contains a connection string used to connect to an underlying persistence database.</span></span>|  
|<span data-ttu-id="270ec-111">connectionStringName</span><span class="sxs-lookup"><span data-stu-id="270ec-111">connectionStringName</span></span>|<span data-ttu-id="270ec-112">Uma cadeia de caracteres que contém uma cadeia de conexão nomeada para o servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="270ec-112">A string that contains a named connection string to the database server.</span></span> <span data-ttu-id="270ec-113">Um exemplo de uma cadeia de conexão nomeada é "defaultconnectionstring".</span><span class="sxs-lookup"><span data-stu-id="270ec-113">An example of a named connection string is "DefaultConnectionString".</span></span>|  
|<span data-ttu-id="270ec-114">hostLockRenewalPeriod</span><span class="sxs-lookup"><span data-stu-id="270ec-114">hostLockRenewalPeriod</span></span>|<span data-ttu-id="270ec-115">Um valor de Timespan que especifica o período de tempo em que o host deve renovar o bloqueio em uma instância.</span><span class="sxs-lookup"><span data-stu-id="270ec-115">A Timespan value that specifies the time period in which the host must renew the lock on an instance.</span></span> <span data-ttu-id="270ec-116">Se o host não renova o bloqueio no período de tempo especificado, a instância é desbloqueada e pode ser selecionada por outro host.</span><span class="sxs-lookup"><span data-stu-id="270ec-116">If the host does not renew the lock in the specified time period, the instance is unlocked and may be picked up by another host.</span></span><br /><br /> <span data-ttu-id="270ec-117">Descarregar um fluxo de trabalho significa que ele também é mantido.</span><span class="sxs-lookup"><span data-stu-id="270ec-117">Unloading a workflow implies that it is also persisted.</span></span> <span data-ttu-id="270ec-118">Se esse atributo for definido como zero, a instância de fluxo de trabalho é mantida e descarregada imediatamente após o fluxo de trabalho fica ocioso.</span><span class="sxs-lookup"><span data-stu-id="270ec-118">If this attribute is set to zero the workflow instance is persisted and unloaded immediately after the workflow becomes idle.</span></span> <span data-ttu-id="270ec-119">Definir esse atributo como TimeSpan efetivamente desabilita a operação.</span><span class="sxs-lookup"><span data-stu-id="270ec-119">Setting this attribute to TimeSpan.MaxValue effectively disables the unload operation.</span></span> <span data-ttu-id="270ec-120">Instâncias de fluxo de trabalho ocioso nunca são descarregadas.</span><span class="sxs-lookup"><span data-stu-id="270ec-120">Idle workflow instances are never unloaded.</span></span>|  
|<span data-ttu-id="270ec-121">instanceCompletionAction</span><span class="sxs-lookup"><span data-stu-id="270ec-121">instanceCompletionAction</span></span>|<span data-ttu-id="270ec-122">Um valor que especifica se os dados da instância de fluxo de trabalho são mantidos no armazenamento de persistência depois que a instância de fluxo de trabalho seja concluída ou se ele for excluído nesse ponto.</span><span class="sxs-lookup"><span data-stu-id="270ec-122">A value that specifies whether workflow instance data is kept in the persistence store after the workflow instance completes or if it is deleted at that point.</span></span> <span data-ttu-id="270ec-123">Esse valor é do tipo <xref:System.Activities.DurableInstancing.InstanceCompletionAction>.</span><span class="sxs-lookup"><span data-stu-id="270ec-123">This value is of type <xref:System.Activities.DurableInstancing.InstanceCompletionAction>.</span></span><br /><br /> <span data-ttu-id="270ec-124">As ações enumeradas consistem em Excluir os dados da instância do armazenamento de persistência ou não excluir os dados da instância do armazenamento de persistência, quando a instância concluiu sua operação.</span><span class="sxs-lookup"><span data-stu-id="270ec-124">The enumerated actions consist of deleting the instance data from the persistence store or not deleting the instance data from the persistence store, when the instance has completed its operation.</span></span><br /><br /> <span data-ttu-id="270ec-125">Manter instâncias após conclusão faz com que o banco de dados de persistência crescer rapidamente e isso afeta o desempenho do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="270ec-125">Keeping instances after completion causes the persistence database to grow rapidly and this affects the performance of the database.</span></span> <span data-ttu-id="270ec-126">Você deve configurar uma política de limpeza do banco de dados para excluir esses registros periodicamente para garantir que o desempenho do banco de dados está no nível que atender às suas necessidades de desempenho.</span><span class="sxs-lookup"><span data-stu-id="270ec-126">You should configure a database purge policy to delete these records periodically to ensure that the performance of the database is at the level that satisfy your performance requirements.</span></span>|  
|<span data-ttu-id="270ec-127">instanceEncodingOption</span><span class="sxs-lookup"><span data-stu-id="270ec-127">instanceEncodingOption</span></span>|<span data-ttu-id="270ec-128">Um valor opcional que especifica se as informações de estado da instância são compactadas usando o algoritmo de GZip antes que as informações são salvas no armazenamento de persistência.</span><span class="sxs-lookup"><span data-stu-id="270ec-128">An optional value that specifies  whether the instance state information is compressed using the GZip algorithm before the information is saved in the persistence store..</span></span> <span data-ttu-id="270ec-129">Esse valor é do tipo <xref:System.Activities.DurableInstancing.InstanceEncodingOption>.</span><span class="sxs-lookup"><span data-stu-id="270ec-129">This value is of type <xref:System.Activities.DurableInstancing.InstanceEncodingOption>.</span></span> <span data-ttu-id="270ec-130">Os valores possíveis para essa propriedade são <xref:System.Activities.DurableInstancing.InstanceEncodingOption.None> , que especifica nenhuma compactação e <xref:System.Activities.DurableInstancing.InstanceEncodingOption.GZip> , que especifica que os dados da instância são compactados e usa o algoritmo gzip.</span><span class="sxs-lookup"><span data-stu-id="270ec-130">Possible values for this property are <xref:System.Activities.DurableInstancing.InstanceEncodingOption.None>, which specifies no compression, and <xref:System.Activities.DurableInstancing.InstanceEncodingOption.GZip>, which specifies that instance data is compressed and uses the gzip algorithm.</span></span>|  
|<span data-ttu-id="270ec-131">instanceLockedExceptionAction</span><span class="sxs-lookup"><span data-stu-id="270ec-131">instanceLockedExceptionAction</span></span>|<span data-ttu-id="270ec-132">Um valor que especifica a ação que ocorre em resposta a uma exceção que é lançada quando o host tenta bloquear uma instância porque a instância está atualmente bloqueada por outro host.</span><span class="sxs-lookup"><span data-stu-id="270ec-132">A value that specifies the action that occurs in response to an exception that is thrown when the host tries to lock an instance because the instance is currently locked by another host.</span></span> <span data-ttu-id="270ec-133">Esse valor é do tipo <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction>.</span><span class="sxs-lookup"><span data-stu-id="270ec-133">This value is of type <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction>.</span></span><br /><br /> <span data-ttu-id="270ec-134">As opções permitidas para este campo são: None, repetição básica e repita agressiva.</span><span class="sxs-lookup"><span data-stu-id="270ec-134">The options allowed for this field are: None, Basic Retry, and Aggressive Retry.</span></span> <span data-ttu-id="270ec-135">O valor padrão é Nenhum.</span><span class="sxs-lookup"><span data-stu-id="270ec-135">The default value is None.</span></span> <span data-ttu-id="270ec-136">A lista a seguir fornece descrições para esses três opções:</span><span class="sxs-lookup"><span data-stu-id="270ec-136">The following list provides you with the descriptions for these three options:</span></span><br /><br /> <span data-ttu-id="270ec-137">– Nenhum.</span><span class="sxs-lookup"><span data-stu-id="270ec-137">-   None.</span></span> <span data-ttu-id="270ec-138">O host de serviço não tenta bloquear a instância e passa o <xref:System.Runtime.DurableInstancing.InstanceLockedException> ao chamador.</span><span class="sxs-lookup"><span data-stu-id="270ec-138">The service host does not attempt to lock the instance and passes the <xref:System.Runtime.DurableInstancing.InstanceLockedException> to the caller.</span></span><br /><span data-ttu-id="270ec-139">-Repetição básica.</span><span class="sxs-lookup"><span data-stu-id="270ec-139">-   Basic Retry.</span></span> <span data-ttu-id="270ec-140">O host de serviço reattempts bloquear a instância com um intervalo de repetição linear e passa a exceção para o chamador no final da sequência.</span><span class="sxs-lookup"><span data-stu-id="270ec-140">The service host reattempts to lock the instance with a linear retry interval and passes the exception to the caller at the end of the sequence.</span></span><br /><span data-ttu-id="270ec-141">-Repetição agressiva.</span><span class="sxs-lookup"><span data-stu-id="270ec-141">-   Aggressive Retry.</span></span> <span data-ttu-id="270ec-142">Reattempts de host do serviço bloquear a instância com um atraso cresce exponencialmente e passa o <xref:System.Runtime.DurableInstancing.InstanceLockedException> ao chamador no final da sequência.</span><span class="sxs-lookup"><span data-stu-id="270ec-142">The service host reattempts to lock the instance with an exponentially increasing delay and passes the <xref:System.Runtime.DurableInstancing.InstanceLockedException> to the caller at the end of the sequence.</span></span>|  
|<span data-ttu-id="270ec-143">runnableInstancesDetectionPeriod</span><span class="sxs-lookup"><span data-stu-id="270ec-143">runnableInstancesDetectionPeriod</span></span>||  
  
### <a name="child-elements"></a><span data-ttu-id="270ec-144">Elementos filho</span><span class="sxs-lookup"><span data-stu-id="270ec-144">Child Elements</span></span>  
 <span data-ttu-id="270ec-145">Nenhum.</span><span class="sxs-lookup"><span data-stu-id="270ec-145">None.</span></span>  
  
### <a name="parent-elements"></a><span data-ttu-id="270ec-146">Elementos pai</span><span class="sxs-lookup"><span data-stu-id="270ec-146">Parent Elements</span></span>  
  
|<span data-ttu-id="270ec-147">Elemento</span><span class="sxs-lookup"><span data-stu-id="270ec-147">Element</span></span>|<span data-ttu-id="270ec-148">Descrição</span><span class="sxs-lookup"><span data-stu-id="270ec-148">Description</span></span>|  
|-------------|-----------------|  
|[<span data-ttu-id="270ec-149">\<behavior>desse\<serviceBehaviors></span><span class="sxs-lookup"><span data-stu-id="270ec-149">\<behavior> of \<serviceBehaviors></span></span>](behavior-of-servicebehaviors-of-workflow.md)|<span data-ttu-id="270ec-150">Especifica um elemento de comportamento.</span><span class="sxs-lookup"><span data-stu-id="270ec-150">Specifies a behavior element.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="270ec-151">Confira também</span><span class="sxs-lookup"><span data-stu-id="270ec-151">See also</span></span>

- <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior>
- <xref:System.ServiceModel.Activities.Configuration.SqlWorkflowInstanceStoreElement>
- <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>
- [<span data-ttu-id="270ec-152">Repositório de instâncias de fluxo de trabalho do SQL</span><span class="sxs-lookup"><span data-stu-id="270ec-152">SQL Workflow Instance Store</span></span>](../../../windows-workflow-foundation/sql-workflow-instance-store.md)
