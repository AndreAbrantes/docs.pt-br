---
title: O que há de novo no Windows Identity Foundation 4.5
ms.date: 03/30/2017
ms.assetid: 3b381f04-593b-471f-bd33-0362be1aade5
author: BrucePerlerMS
ms.openlocfilehash: 9009f3bd6e782aefdeca0f071dc70d6247c3987b
ms.sourcegitcommit: 14355b4b2fe5bcf874cac96d0a9e6376b567e4c7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/30/2019
ms.locfileid: "55275412"
---
# <a name="whats-new-in-windows-identity-foundation-45"></a><span data-ttu-id="6e20b-102">O que há de novo no Windows Identity Foundation 4.5</span><span class="sxs-lookup"><span data-stu-id="6e20b-102">What's New in Windows Identity Foundation 4.5</span></span>
<span data-ttu-id="6e20b-103">Esta é a primeira versão do Windows Identity Foundation (WIF) fornecido como um download autônomo. Ela também é conhecida como WIF 3.5 porque foi introduzida no período de tempo de distribuição do .NET 3.5 SP1.</span><span class="sxs-lookup"><span data-stu-id="6e20b-103">The first version of Windows Identity Foundation (WIF) shipped as a standalone download and is known as WIF 3.5 because it was introduced in the .NET 3.5 SP1 timeframe.</span></span> <span data-ttu-id="6e20b-104">A partir do .NET 4.5, o WIF faz parte do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6e20b-104">Starting with .NET 4.5, WIF is part of the .NET framework.</span></span> <span data-ttu-id="6e20b-105">Ter as classes do WIF diretamente disponíveis na estrutura permite uma integração muito mais profunda da identidade baseada em declarações no .NET, facilitando o uso de declarações.</span><span class="sxs-lookup"><span data-stu-id="6e20b-105">Having the WIF classes directly available in the framework allows for a much deeper integration of claims-based identity in .NET, making it easier to use claims.</span></span> <span data-ttu-id="6e20b-106">Os aplicativos escritos para o WIF 3.5 precisam ser modificados para aproveitar o novo modelo; para obter informações, consulte [Diretrizes para migrar um aplicativo criado usando o WIF 3.5 para o WIF 4.5](../../../docs/framework/security/guidelines-for-migrating-an-application-built-using-wif-3-5-to-wif-4-5.md).</span><span class="sxs-lookup"><span data-stu-id="6e20b-106">Applications written for WIF 3.5 will need to be modified in order to take advantage of the new model; for information, see [Guidelines for Migrating an Application Built Using WIF 3.5 to WIF 4.5](../../../docs/framework/security/guidelines-for-migrating-an-application-built-using-wif-3-5-to-wif-4-5.md).</span></span>  
  
 <span data-ttu-id="6e20b-107">Abaixo você pode encontrar alguns destaques sobre as alterações principais.</span><span class="sxs-lookup"><span data-stu-id="6e20b-107">Below you can find some highlights of the main changes.</span></span>  
  
## <a name="wif-is-now-part-of-the-net-framework"></a><span data-ttu-id="6e20b-108">O WIF agora é parte do .NET Framework</span><span class="sxs-lookup"><span data-stu-id="6e20b-108">WIF Is Now Part of the .NET Framework</span></span>  
 <span data-ttu-id="6e20b-109">As classes WIF agora são distribuídas por meio de vários assemblies, sendo os principais `mscorlib`, `System.IdentityModel`, `System.IdentityModel.Services` e `System.ServiceModel`.</span><span class="sxs-lookup"><span data-stu-id="6e20b-109">WIF classes are now spread across several assemblies, the main ones being `mscorlib`, `System.IdentityModel`, `System.IdentityModel.Services`, and `System.ServiceModel`.</span></span> <span data-ttu-id="6e20b-110">Do mesmo modo, as classes do WIF são distribuídas em vários namespaces: <xref:System.Security.Claims?displayProperty=nameWithType>, vários namespaces [System.IdentityModel](https://go.microsoft.com/fwlink/?LinkId=272004) e <xref:System.ServiceModel.Security?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6e20b-110">Likewise, the WIF classes are spread across several namespaces: <xref:System.Security.Claims?displayProperty=nameWithType>, several [System.IdentityModel](https://go.microsoft.com/fwlink/?LinkId=272004) namespaces, and <xref:System.ServiceModel.Security?displayProperty=nameWithType>.</span></span> <span data-ttu-id="6e20b-111">O namespace <xref:System.Security.Claims?displayProperty=nameWithType> contém as novas classes <xref:System.Security.Claims.ClaimsPrincipal> e <xref:System.Security.Claims.ClaimsIdentity> (consulte abaixo).</span><span class="sxs-lookup"><span data-stu-id="6e20b-111">The <xref:System.Security.Claims?displayProperty=nameWithType> namespace contains the new <xref:System.Security.Claims.ClaimsPrincipal> and <xref:System.Security.Claims.ClaimsIdentity> classes (see below).</span></span> <span data-ttu-id="6e20b-112">Todas as entidades de segurança do .NET agora derivam de <xref:System.Security.Claims.ClaimsPrincipal>.</span><span class="sxs-lookup"><span data-stu-id="6e20b-112">All principals in .NET now derive from <xref:System.Security.Claims.ClaimsPrincipal>.</span></span> <span data-ttu-id="6e20b-113">Para obter informações mais detalhadas sobre os namespaces do WIF e os tipos de classes que eles contêm, consulte [Referência de API do WIF](../../../docs/framework/security/wif-api-reference.md).</span><span class="sxs-lookup"><span data-stu-id="6e20b-113">For more detailed information about the WIF namespaces and the kinds of classes that they contain, see [WIF API Reference](../../../docs/framework/security/wif-api-reference.md).</span></span> <span data-ttu-id="6e20b-114">Para obter informações sobre como os namespaces são mapeados entre o WIF 3.5 e o WIF 4.5, consulte [Mapeamento de namespaces entre o WIF 3.5 e o WIF 4.5](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md).</span><span class="sxs-lookup"><span data-stu-id="6e20b-114">For information about how namespaces map between WIF 3.5 and WIF 4.5, see [Namespace Mapping between WIF 3.5 and WIF 4.5](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md).</span></span>  
  
## <a name="new-claims-model-and-principal-object"></a><span data-ttu-id="6e20b-115">Novos modelo de declaração e objeto principal</span><span class="sxs-lookup"><span data-stu-id="6e20b-115">New Claims Model and Principal Object</span></span>  
 <span data-ttu-id="6e20b-116">As declarações estão no núcleo do .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="6e20b-116">Claims are at the very core of the .NET Framework 4.5.</span></span> <span data-ttu-id="6e20b-117">As classes de declaração de base (<xref:System.Security.Claims.Claim>, <xref:System.Security.Claims.ClaimsIdentity>, <xref:System.Security.Claims.ClaimsPrincipal>, <xref:System.Security.Claims.ClaimTypes> e <xref:System.Security.Claims.ClaimValueTypes>) estão diretamente em `mscorlib` no namespace <xref:System.Security.Claims?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6e20b-117">The base claim classes (<xref:System.Security.Claims.Claim>, <xref:System.Security.Claims.ClaimsIdentity>, <xref:System.Security.Claims.ClaimsPrincipal>, <xref:System.Security.Claims.ClaimTypes>, and <xref:System.Security.Claims.ClaimValueTypes>) all live directly in `mscorlib` in the <xref:System.Security.Claims?displayProperty=nameWithType> namespace.</span></span> <span data-ttu-id="6e20b-118">Não é mais necessário usar interfaces para conectar declarações ao sistema de identidade .NET: <xref:System.Security.Principal.WindowsPrincipal>, <xref:System.Security.Principal.GenericPrincipal> e <xref:System.Web.Security.RolePrincipal> agora herdam de <xref:System.Security.Claims.ClaimsPrincipal>; e <xref:System.Security.Principal.WindowsIdentity>, <xref:System.Security.Principal.GenericIdentity> e <xref:System.Web.Security.FormsIdentity> agora herdam de <xref:System.Security.Claims.ClaimsIdentity>.</span><span class="sxs-lookup"><span data-stu-id="6e20b-118">It is no longer necessary to use interfaces in order to plug claims into the .NET identity system: <xref:System.Security.Principal.WindowsPrincipal>, <xref:System.Security.Principal.GenericPrincipal>, and <xref:System.Web.Security.RolePrincipal> now inherit from <xref:System.Security.Claims.ClaimsPrincipal>; and <xref:System.Security.Principal.WindowsIdentity>, <xref:System.Security.Principal.GenericIdentity>, and <xref:System.Web.Security.FormsIdentity> now inherit from <xref:System.Security.Claims.ClaimsIdentity>.</span></span> <span data-ttu-id="6e20b-119">Em outras palavras, cada classe principal servirá agora solicitações.</span><span class="sxs-lookup"><span data-stu-id="6e20b-119">In short, every principal class will now serve claims.</span></span> <span data-ttu-id="6e20b-120">As classes de integração do WIF 3.5 e as interfaces (`WindowsClaimsIdentity`, `WindowsClaimsPrincipal`, `IClaimsPrincipal`, `IClaimsIdentity`) foram removidas.</span><span class="sxs-lookup"><span data-stu-id="6e20b-120">The WIF 3.5 integration classes and interfaces (`WindowsClaimsIdentity`, `WindowsClaimsPrincipal`, `IClaimsPrincipal`, `IClaimsIdentity`) have thus been removed.</span></span> <span data-ttu-id="6e20b-121">Além disso, a classe <xref:System.Security.Claims.ClaimsIdentity> agora expõe métodos que facilitam consultar a coleção de declarações de identidade.</span><span class="sxs-lookup"><span data-stu-id="6e20b-121">In addition, the <xref:System.Security.Claims.ClaimsIdentity> class now exposes methods which make it easier to query the identity’s claims collection.</span></span>  
  
## <a name="changes-to-the-wif-45-visual-studio-experience"></a><span data-ttu-id="6e20b-122">Alterações na experiência do WIF Visual Studio 4.5</span><span class="sxs-lookup"><span data-stu-id="6e20b-122">Changes to the WIF 4.5 Visual Studio Experience</span></span>  
  
-   <span data-ttu-id="6e20b-123">A funcionalidade **Adicionar Referência do STS...**</span><span class="sxs-lookup"><span data-stu-id="6e20b-123">The **Add STS Reference …**</span></span> <span data-ttu-id="6e20b-124">do Visual Studio (utilitário de linha de comando FedUtil) não existe mais; em vez disso, use a nova extensão do Visual Studio **Ferramenta de Identidade e Acesso para o Visual Studio 2012**.</span><span class="sxs-lookup"><span data-stu-id="6e20b-124">Visual Studio functionality (cmdline utility FedUtil) no longer exists; instead you can use the new Visual Studio extension **Identity and Access Tool for Visual Studio 2012**.</span></span> <span data-ttu-id="6e20b-125">Isso permite que você realize uma federação com um STS existente ou use um LocalSTS para testar soluções.</span><span class="sxs-lookup"><span data-stu-id="6e20b-125">This allows you to federate with an existing STS or use LocalSTS to test your solutions.</span></span> <span data-ttu-id="6e20b-126">Depois de instalar a extensão, clique com o botão direito do mouse no projeto e procure **Identidade e Acesso** no menu de contexto.</span><span class="sxs-lookup"><span data-stu-id="6e20b-126">After installing the extension you can right-click on your project and look for **Identity and Access** in the context menu.</span></span>  
  
-   <span data-ttu-id="6e20b-127">Os modelos ASP.NET e STS não são mais fornecidos como declarações que podem ser usadas diretamente em modelos de projeto existentes do ASP.Net, de sites e do WCF.</span><span class="sxs-lookup"><span data-stu-id="6e20b-127">The ASP.NET and STS templates are no longer provided as claims can be used directly in existing project templates for ASP.Net, web sites, and WCF.</span></span>  
  
-   <span data-ttu-id="6e20b-128">Os controles no namespace `Microsoft.IdentityModel.Web.Controls` (`SignInControl`, `FederatedPassiveSignInControl` e `FederatedPassiveSignInStatus`) não são transferidos para o WIF 4.5.</span><span class="sxs-lookup"><span data-stu-id="6e20b-128">The controls in the `Microsoft.IdentityModel.Web.Controls` namespace (`SignInControl`, `FederatedPassiveSignInControl`, and `FederatedPassiveSignInStatus`) are not carried over into WIF 4.5.</span></span>  
  
## <a name="changes-to-the-wif-45-api"></a><span data-ttu-id="6e20b-129">Alterações no WIF 4.5 API</span><span class="sxs-lookup"><span data-stu-id="6e20b-129">Changes to the WIF 4.5 API</span></span>  
  
-   <span data-ttu-id="6e20b-130">Em geral, as classes relacionadas a declarações estão no namespace <xref:System.Security.Claims?displayProperty=nameWithType>; as classes relacionadas ao WCF – contratos de serviço, canais, fábricas de canal e hosts de serviço usados para cenários do WS-Trust – estão no <xref:System.ServiceModel.Security?displayProperty=nameWithType>; e todas as outras classes do WIF são distribuídas entre vários namespaces [System.IdentityModel](https://go.microsoft.com/fwlink/?LinkId=272004) – que incluem, por exemplo, classes que representam artefatos do WS-\* e do SAML, manipuladores de token e classes relacionadas, além das classes usadas em cenários da Web Services Federation.</span><span class="sxs-lookup"><span data-stu-id="6e20b-130">In general, claims related classes are in the <xref:System.Security.Claims?displayProperty=nameWithType> namespace; WCF related classes –- service contracts, channels, channel factories, and service hosts that are used for WS-Trust scenarios -- are in <xref:System.ServiceModel.Security?displayProperty=nameWithType>; and all other WIF classes are spread across various [System.IdentityModel](https://go.microsoft.com/fwlink/?LinkId=272004) namespaces – these include, for example, classes that represent WS-\* and SAML artifacts, token handlers and related classes, and classes used in WS-Federation scenarios.</span></span> <span data-ttu-id="6e20b-131">Para obter mais informações, consulte [Mapeamento de namespaces entre o WIF 3.5 e o WIF 4.5](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md) e [Referência de API do WIF](../../../docs/framework/security/wif-api-reference.md).</span><span class="sxs-lookup"><span data-stu-id="6e20b-131">For more information, see [Namespace Mapping between WIF 3.5 and WIF 4.5](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md) and [WIF API Reference](../../../docs/framework/security/wif-api-reference.md).</span></span>  
  
-   <span data-ttu-id="6e20b-132">A chave do computador foi habilitada para uso em cookies de sessão para cenários de farm Web.</span><span class="sxs-lookup"><span data-stu-id="6e20b-132">Machine key has been enabled for use in session cookies for web farm scenarios.</span></span> <span data-ttu-id="6e20b-133">Para obter mais informações, consulte [WIF e Web farms](../../../docs/framework/security/wif-and-web-farms.md).</span><span class="sxs-lookup"><span data-stu-id="6e20b-133">For more information, see [WIF and Web Farms](../../../docs/framework/security/wif-and-web-farms.md).</span></span>  
  
-   <span data-ttu-id="6e20b-134">Agora, configure o WIF de forma declarativa nos elementos [\<system.identityModel>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) e [\<system.identityModel.services>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel-services.md).</span><span class="sxs-lookup"><span data-stu-id="6e20b-134">You now declaratively configure WIF under the [\<system.identityModel>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) and [\<system.identityModel.services>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel-services.md) elements.</span></span> <span data-ttu-id="6e20b-135">Para obter mais informações sobre a configuração do WIF, consulte [Referência de configuração do WIF](../../../docs/framework/security/wif-configuration-reference.md).</span><span class="sxs-lookup"><span data-stu-id="6e20b-135">For more information about WIF configuration, see [WIF Configuration Reference](../../../docs/framework/security/wif-configuration-reference.md).</span></span>  
  
## <a name="other-notable-net-changes-or-features-that-are-caused-by-the-integration-of-wif-into-net"></a><span data-ttu-id="6e20b-136">Outras alterações notáveis ou recursos do .NET causados pela integração do WIF no .NET</span><span class="sxs-lookup"><span data-stu-id="6e20b-136">Other notable .NET changes or features that are caused by the integration of WIF into .NET</span></span>  
  
-   <span data-ttu-id="6e20b-137">O potencial para executar a autorização baseada em declarações (CBAC) é agora integral na estrutura do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6e20b-137">The potential for performing claims-based authorization (CBAC) is now integral to the .NET framework.</span></span> <span data-ttu-id="6e20b-138">Você pode configurar um objeto <xref:System.Security.Claims.ClaimsAuthorizationManager> e usar as classes <xref:System.IdentityModel.Services.ClaimsPrincipalPermission> e <xref:System.IdentityModel.Services.ClaimsPrincipalPermissionAttribute> para executar verificações de acesso obrigatórias e declarativas no código.</span><span class="sxs-lookup"><span data-stu-id="6e20b-138">You can configure a <xref:System.Security.Claims.ClaimsAuthorizationManager> object and then use the <xref:System.IdentityModel.Services.ClaimsPrincipalPermission> and <xref:System.IdentityModel.Services.ClaimsPrincipalPermissionAttribute> classes to perform imperative and declarative access checks in your code.</span></span> <span data-ttu-id="6e20b-139">A CBAC oferece mais flexibilidade e granularidade maior do que verificações de acesso com base em funções tradicionais (RBAC).</span><span class="sxs-lookup"><span data-stu-id="6e20b-139">CBAC provides more flexibility and greater granularity than traditional role-based access checks (RBAC).</span></span> <span data-ttu-id="6e20b-140">Também permite uma maior separação entre as políticas de autorização e a lógica de negócios, porque a lógica de negócios pode basear a verificação de acesso em uma declaração específica ou em um conjunto de declarações, e a política de autorização dessas declarações pode ser configurada de forma declarativa no elemento [\<claimsAuthorizationManager>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/claimsauthorizationmanager.md).</span><span class="sxs-lookup"><span data-stu-id="6e20b-140">It also allows greater separation of authorization policy from business logic because the business logic can base the access check on a specific claim or set of claims and the authorization policy for those claims can be configured declaratively under the [\<claimsAuthorizationManager>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/claimsauthorizationmanager.md) element.</span></span>  
  
## <a name="wcf-changes-as-a-result-of-wif-integration"></a><span data-ttu-id="6e20b-141">O WCF muda como resultado da integração com o WIF:</span><span class="sxs-lookup"><span data-stu-id="6e20b-141">WCF changes as a result of WIF integration:</span></span>  
  
-   <span data-ttu-id="6e20b-142">O modelo de identidade baseada em declarações do WCF é substituído pelo do WIF.</span><span class="sxs-lookup"><span data-stu-id="6e20b-142">The WCF claims-based identity model is superseded by WIF.</span></span> <span data-ttu-id="6e20b-143">Isso significa que as classes em <xref:System.IdentityModel.Claims?displayProperty=nameWithType>, em <xref:System.IdentityModel.Policy?displayProperty=nameWithType>, e os namespaces <xref:System.IdentityModel.Selectors?displayProperty=nameWithType> devem ser descartados em favor do uso de classes do WIF.</span><span class="sxs-lookup"><span data-stu-id="6e20b-143">This means that classes in the <xref:System.IdentityModel.Claims?displayProperty=nameWithType>, <xref:System.IdentityModel.Policy?displayProperty=nameWithType>, and <xref:System.IdentityModel.Selectors?displayProperty=nameWithType> namespaces should be dropped in favor of using WIF classes.</span></span>  
  
-   <span data-ttu-id="6e20b-144">O WIF agora é habilitado em um serviço WCF com a especificação do atributo `useIdentityConfiguration` no elemento `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>` como mostrado no seguinte XML:</span><span class="sxs-lookup"><span data-stu-id="6e20b-144">WIF is now enabled on a WCF service by specifying the `useIdentityConfiguration` attribute on the `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>` element as in the following XML:</span></span>  
  
    ```xml  
    <serviceCredentials useIdentityConfiguration="true">  
        <!--Certificate added by Identity And Access VS Package.  Subject='CN=localhost', Issuer='CN=localhost'. Make sure you have this certificate installed. The Identity and Access tool does not install this certificate.-->  
        <serviceCertificate findValue="CN=localhost" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectDistinguishedName" />  
    </serviceCredentials>  
    ```  
  
     <span data-ttu-id="6e20b-145">Ao usar a **Ferramenta de Identidade e Acesso para o Visual Studio 2012** (consulte **Alterações na experiência do Visual Studio** acima), a ferramenta adicionará um elemento `<serviceCredentials>` com o atributo `useIdentityConfiguration` definido com o arquivo de configuração para você.</span><span class="sxs-lookup"><span data-stu-id="6e20b-145">When you use the **Identity and Access Tool for Visual Studio 2012** (see **Changes to the Visual Studio Experience** above), the tool adds a `<serviceCredentials>` element with the `useIdentityConfiguration` attribute set to the configuration file for you.</span></span> <span data-ttu-id="6e20b-146">Ele também adiciona um elemento [\<system.identityModel>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) correspondente que contém as definições de configuração do WIF e adiciona uma associação e outras configurações necessárias para terceirizar a autenticação para o STS escolhido.</span><span class="sxs-lookup"><span data-stu-id="6e20b-146">It also adds a corresponding [\<system.identityModel>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) element that contains the WIF configuration settings and adds a binding and other settings necessary to outsource authentication to your chosen STS.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6e20b-147">Consulte também</span><span class="sxs-lookup"><span data-stu-id="6e20b-147">See also</span></span>
- [<span data-ttu-id="6e20b-148">Diretrizes para migrar um aplicativo criado usando o WIF 3.5 para o WIF 4.5</span><span class="sxs-lookup"><span data-stu-id="6e20b-148">Guidelines for Migrating an Application Built Using WIF 3.5 to WIF 4.5</span></span>](../../../docs/framework/security/guidelines-for-migrating-an-application-built-using-wif-3-5-to-wif-4-5.md)
- [<span data-ttu-id="6e20b-149">Mapeamento de namespace entre o WIF 3.5 e o WIF 4.5</span><span class="sxs-lookup"><span data-stu-id="6e20b-149">Namespace Mapping between WIF 3.5 and WIF 4.5</span></span>](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md)
- [<span data-ttu-id="6e20b-150">Referência de API do WIF</span><span class="sxs-lookup"><span data-stu-id="6e20b-150">WIF API Reference</span></span>](../../../docs/framework/security/wif-api-reference.md)
- [<span data-ttu-id="6e20b-151">Referência de configuração do WIF</span><span class="sxs-lookup"><span data-stu-id="6e20b-151">WIF Configuration Reference</span></span>](../../../docs/framework/security/wif-configuration-reference.md)
