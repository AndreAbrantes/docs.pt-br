---
title: Visão geral de animações personalizadas
ms.date: 03/30/2017
helpviewer_keywords:
- custom classes [WPF], animation
- key frames [WPF], custom
- custom key frames [WPF]
- animation [WPF], custom classes
- custom animation classes [WPF]
ms.assetid: 9be69d50-3384-4938-886f-08ce00e4a7a6
ms.openlocfilehash: a18898f340c68b7890c56b586c87870c50fd4686
ms.sourcegitcommit: a885cc8c3e444ca6471348893d5373c6e9e49a47
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/06/2018
ms.locfileid: "43879673"
---
# <a name="custom-animations-overview"></a><span data-ttu-id="6cd6a-102">Visão geral de animações personalizadas</span><span class="sxs-lookup"><span data-stu-id="6cd6a-102">Custom Animations Overview</span></span>
<span data-ttu-id="6cd6a-103">Este tópico descreve como e quando estender o [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] sistema de animação criando quadros-chave personalizados, classes de animação ou utilizando callback por quadro para contorná-lo.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-103">This topic describes how and when to extend the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system by creating custom key frames, animation classes, or by using per-frame callback to bypass it.</span></span>  
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="6cd6a-104">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="6cd6a-104">Prerequisites</span></span>  
 <span data-ttu-id="6cd6a-105">Para entender esse tópico, você deve estar familiarizado com os diferentes tipos de animação fornecidos pelo [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6cd6a-105">To understand this topic, you should be familiar with the different types of animations provided by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="6cd6a-106">Para obter mais informações, consulte Visão geral sobre animações de From/To/By a [visão geral de animações de quadro-chave](../../../../docs/framework/wpf/graphics-multimedia/key-frame-animations-overview.md)e o [visão geral de animações de caminho](../../../../docs/framework/wpf/graphics-multimedia/path-animations-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6cd6a-106">For more information, see the From/To/By Animations Overview, the [Key-Frame Animations Overview](../../../../docs/framework/wpf/graphics-multimedia/key-frame-animations-overview.md), and the [Path Animations Overview](../../../../docs/framework/wpf/graphics-multimedia/path-animations-overview.md).</span></span>  
  
 <span data-ttu-id="6cd6a-107">Porque as classes de animação herdam os <xref:System.Windows.Freezable> classe, você deve estar familiarizado com <xref:System.Windows.Freezable> objetos e como herdar de <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-107">Because the animation classes inherit from the <xref:System.Windows.Freezable> class, you should be familiar with <xref:System.Windows.Freezable> objects and how to inherit from <xref:System.Windows.Freezable>.</span></span> <span data-ttu-id="6cd6a-108">Para obter mais informações, consulte a [visão geral de objetos congeláveis](../../../../docs/framework/wpf/advanced/freezable-objects-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6cd6a-108">For more information, see the [Freezable Objects Overview](../../../../docs/framework/wpf/advanced/freezable-objects-overview.md).</span></span>  
  
<a name="extendingtheanimationsystem"></a>   
## <a name="extending-the-animation-system"></a><span data-ttu-id="6cd6a-109">Estendendo o sistema de animação</span><span class="sxs-lookup"><span data-stu-id="6cd6a-109">Extending the Animation System</span></span>  
 <span data-ttu-id="6cd6a-110">Há várias maneiras de estender o sistema de animação [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], dependendo do nível de funcionalidade interna que você deseja usar.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-110">There are a number of ways to extend the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system, depending on the level of built-in functionality you want to use.</span></span>  <span data-ttu-id="6cd6a-111">Há três pontos principais de extensibilidade no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mecanismo de animação:</span><span class="sxs-lookup"><span data-stu-id="6cd6a-111">There are three primary extensibility points in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine:</span></span>  
  
-   <span data-ttu-id="6cd6a-112">Criar um objeto de quadro-chave personalizado herdando de uma da  *\<tipo >* classes de quadro-chave, como <xref:System.Windows.Media.Animation.DoubleKeyFrame>.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-112">Create a custom key frame object by inheriting from one of the *\<Type>* KeyFrame classes, such as <xref:System.Windows.Media.Animation.DoubleKeyFrame>.</span></span> <span data-ttu-id="6cd6a-113">Essa abordagem utiliza a maior parte da funcionalidade interna do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mecanismo de animação.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-113">This approach uses most of the built-in functionality of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine.</span></span>  
  
-   <span data-ttu-id="6cd6a-114">Criar sua própria classe de animação herdando <xref:System.Windows.Media.Animation.AnimationTimeline> ou um dos  *\<tipo >* classes AnimationBase.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-114">Create your own animation class by inheriting from <xref:System.Windows.Media.Animation.AnimationTimeline> or one of the *\<Type>* AnimationBase classes.</span></span>  
  
-   <span data-ttu-id="6cd6a-115">Use o callback por quadro para gerar animações por quadro.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-115">Use per-frame callback to generate animations on a per-frame basis.</span></span> <span data-ttu-id="6cd6a-116">Essa abordagem ignora completamente a animação e o sistema de tempo.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-116">This approach completely bypasses the animation and timing system.</span></span>  
  
 <span data-ttu-id="6cd6a-117">A tabela a seguir descreve alguns dos cenários para estender o sistema de animação.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-117">The following table describes some the scenarios for extending the animation system.</span></span>  
  
|<span data-ttu-id="6cd6a-118">Quando você quiser...</span><span class="sxs-lookup"><span data-stu-id="6cd6a-118">When you want to...</span></span>|<span data-ttu-id="6cd6a-119">Use essa abordagem</span><span class="sxs-lookup"><span data-stu-id="6cd6a-119">Use this approach</span></span>|  
|-------------------------|-----------------------|  
|<span data-ttu-id="6cd6a-120">Personalizar a interpolação entre valores de um tipo que tem um correspondente  *\<Tipo>* AnimationUsingKeyFrames</span><span class="sxs-lookup"><span data-stu-id="6cd6a-120">Customize the interpolation between values of a type that has a corresponding *\<Type>* AnimationUsingKeyFrames</span></span>|<span data-ttu-id="6cd6a-121">Criar um quadro-chave personalizado.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-121">Create a custom key frame.</span></span> <span data-ttu-id="6cd6a-122">Para obter mais informações, consulte a seção [Criar um quadro de chave personalizada](#createacustomkeyframe).</span><span class="sxs-lookup"><span data-stu-id="6cd6a-122">For more information, see the [Create a Custom Key Frame](#createacustomkeyframe) section.</span></span>|  
|<span data-ttu-id="6cd6a-123">Personalizar mais do que apenas a interpolação entre valores de um tipo que tem um  *\<Tipo >* Animação correspondente.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-123">Customize more than just the interpolation between values of a type that has a corresponding *\<Type>* Animation.</span></span>|<span data-ttu-id="6cd6a-124">Criar uma classe de animação personalizada que herda da classe *\<Tipo>* AnimationBase que corresponde ao tipo que você deseja animar.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-124">Create a custom animation class that inherits from the *\<Type>* AnimationBase class that corresponds to the type you want to animate.</span></span> <span data-ttu-id="6cd6a-125">Para obter mais informações, consulte a seção [Criar uma classe de animação personalizada](#createacustomanimationtype).</span><span class="sxs-lookup"><span data-stu-id="6cd6a-125">For more information, see the [Create a Custom Animation Class](#createacustomanimationtype) section.</span></span>|  
|<span data-ttu-id="6cd6a-126">Animar um tipo que não tem animação [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] correspondente</span><span class="sxs-lookup"><span data-stu-id="6cd6a-126">Animate a type that has no corresponding [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation</span></span>|<span data-ttu-id="6cd6a-127">Use uma <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> ou crie uma classe que herda de <xref:System.Windows.Media.Animation.AnimationTimeline>.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-127">Use an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> or create a class that inherits from <xref:System.Windows.Media.Animation.AnimationTimeline>.</span></span> <span data-ttu-id="6cd6a-128">Para obter mais informações, consulte a seção [Criar uma classe de animação personalizada](#createacustomanimationtype).</span><span class="sxs-lookup"><span data-stu-id="6cd6a-128">For more information, see the [Create a Custom Animation Class](#createacustomanimationtype) section.</span></span>|  
|<span data-ttu-id="6cd6a-129">Animar múltiplos objetos com valores que são computados a cada quadro e baseados no último conjunto de interações de objetos</span><span class="sxs-lookup"><span data-stu-id="6cd6a-129">Animate multiple objects with values that are computed each frame and are based on the last set of object interactions</span></span>|<span data-ttu-id="6cd6a-130">Retorno de chamada de quadro de animação.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-130">Use per-frame callback.</span></span> <span data-ttu-id="6cd6a-131">Para obter mais informações, consulte a seção [Criar um retorno de chamada do uso por quadro](#useperframecallback).</span><span class="sxs-lookup"><span data-stu-id="6cd6a-131">For more information, see the [Create a Use Per-Frame Callback](#useperframecallback) section.</span></span>|  
  
<a name="createacustomkeyframe"></a>   
## <a name="create-a-custom-key-frame"></a><span data-ttu-id="6cd6a-132">Criar um quadro-chave personalizado</span><span class="sxs-lookup"><span data-stu-id="6cd6a-132">Create a Custom Key Frame</span></span>  
 <span data-ttu-id="6cd6a-133">Criar uma classe de quadro-chave personalizado é a maneira mais simples para estender o sistema de animação.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-133">Creating a custom key frame class is the simplest way to extend the animation system.</span></span> <span data-ttu-id="6cd6a-134">Use essa abordagem para um método de interpolação diferente para uma animação de quadro-chave.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-134">Use this approach when you want to a different interpolation method for a key-frame animation.</span></span>  <span data-ttu-id="6cd6a-135">Conforme descrito na [Visão geral de animações de quadro-chave](../../../../docs/framework/wpf/graphics-multimedia/key-frame-animations-overview.md), uma animação de quadro-chave utiliza objetos de quadro-chave para gerar seus valores de saída.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-135">As described in the [Key-Frame Animations Overview](../../../../docs/framework/wpf/graphics-multimedia/key-frame-animations-overview.md), a key-frame animation uses key frame objects to generate its output values.</span></span> <span data-ttu-id="6cd6a-136">Cada objeto de quadro-chave realiza três funções:</span><span class="sxs-lookup"><span data-stu-id="6cd6a-136">Each key frame object performs three functions:</span></span>  
  
-   <span data-ttu-id="6cd6a-137">Especifica um valor de destino usando seu <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-137">Specifies a target value using its <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> property.</span></span>  
  
-   <span data-ttu-id="6cd6a-138">Especifica a hora em que esse valor deve ser alcançado usando sua <xref:System.Windows.Media.Animation.IKeyFrame.KeyTime%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-138">Specifies the time at which that value should be reached using its <xref:System.Windows.Media.Animation.IKeyFrame.KeyTime%2A> property.</span></span>  
  
-   <span data-ttu-id="6cd6a-139">Interpola entre o valor do quadro chave anterior e seu próprio valor implementando o método InterpolateValueCore.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-139">Interpolates between the value of the previous key frame and its own value by implementing the InterpolateValueCore method.</span></span>  
  
 <span data-ttu-id="6cd6a-140">**Instruções de implementação**</span><span class="sxs-lookup"><span data-stu-id="6cd6a-140">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="6cd6a-141">Derivam da classe *\<Tipo>* KeyFrame abstrata e implementa o método InterpolateValueCore.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-141">Derive from the *\<Type>* KeyFrame abstract class and implement the InterpolateValueCore method.</span></span> <span data-ttu-id="6cd6a-142">O método InterpolateValueCore retorna o valor atual do quadro-chave.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-142">The InterpolateValueCore method returns the current value of the key frame.</span></span> <span data-ttu-id="6cd6a-143">Ele usa dois parâmetros: o valor do quadro chave anterior e um valor de progresso que varia de 0 a 1.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-143">It takes two parameters: the value of the previous key frame and a progress value that ranges from 0 to 1.</span></span> <span data-ttu-id="6cd6a-144">Um progresso de 0 indica o quadro-chave começou e um valor de 1 indica que o quadro-chave completou e deve retornar o valor especificado pelo seu <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-144">A progress of 0 indicates the key frame has just started, and a value of 1 indicates that the key frame has just completed and should return the value specified by its <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> property.</span></span>  
  
 <span data-ttu-id="6cd6a-145">Porque o  *\<tipo >* herdarem de classes de quadro-chave as <xref:System.Windows.Freezable> classe, você também deve substituir <xref:System.Windows.Freezable.CreateInstanceCore%2A> para retornar uma nova instância da sua classe.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-145">Because the *\<Type>* KeyFrame classes inherit from the <xref:System.Windows.Freezable> class, you must also override <xref:System.Windows.Freezable.CreateInstanceCore%2A> core to return a new instance of your class.</span></span> <span data-ttu-id="6cd6a-146">Se a classe não usar propriedades de dependência para armazenar seus dados ou requer inicialização extra após a criação, talvez seja necessário substituir métodos adicionais; Consulte a [Visão geral de objetos congeláveis](../../../../docs/framework/wpf/advanced/freezable-objects-overview.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-146">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../../../../docs/framework/wpf/advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="6cd6a-147">Depois de criar sua animação personalizada de *\<Tipo >* KeyFrame, você pode usá-la com o  *\<Tipo>* AnimationUsingKeyFrames para aquele tipo.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-147">After you've created your custom *\<Type>* KeyFrame animation, you can use it with the *\<Type>* AnimationUsingKeyFrames for that type.</span></span>  
  
<a name="createacustomanimationtype"></a>   
## <a name="create-a-custom-animation-class"></a><span data-ttu-id="6cd6a-148">Criar uma classe de animação personalizada</span><span class="sxs-lookup"><span data-stu-id="6cd6a-148">Create a Custom Animation Class</span></span>  
 <span data-ttu-id="6cd6a-149">Criando sua própria animação tipo lhe dá que mais controle sobre como um objeto é animado.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-149">Creating your own animation type gives you more control over how an object in animated.</span></span> <span data-ttu-id="6cd6a-150">Há duas maneiras recomendadas para criar seu próprio tipo de animação: você pode derivar o <xref:System.Windows.Media.Animation.AnimationTimeline> classe ou o  *\<tipo >* classe AnimationBase.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-150">There are two recommended ways to create your own animation type: you can derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class or the *\<Type>* AnimationBase class.</span></span> <span data-ttu-id="6cd6a-151">Derivar das classes *\<Tipo >* Animação ou *\<Tipo >* AnimationUsingKeyFrames não é recomendado.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-151">Deriving from the *\<Type>* Animation or *\<Type>* AnimationUsingKeyFrames classes is not recommended.</span></span>  
  
### <a name="derive-from-typeanimationbase"></a><span data-ttu-id="6cd6a-152">Derivar de \<Tipo>AnimationBase</span><span class="sxs-lookup"><span data-stu-id="6cd6a-152">Derive from \<Type>AnimationBase</span></span>  
 <span data-ttu-id="6cd6a-153">Derivar de uma classe *\<Tipo >* AnimationBase é a maneira mais simples de criar um novo tipo de animação.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-153">Deriving from a *\<Type>* AnimationBase class is the simplest way to create a new animation type.</span></span> <span data-ttu-id="6cd6a-154">Use esta abordagem quando você deseja criar uma animação nova para o tipo que já tem uma classe *\<Tipo >* AnimationBase correspondente.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-154">Use this approach when you want to create a new animation for type that already has a corresponding *\<Type>* AnimationBase class.</span></span>  
  
 <span data-ttu-id="6cd6a-155">**Instruções de implementação**</span><span class="sxs-lookup"><span data-stu-id="6cd6a-155">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="6cd6a-156">Derivar de uma classe *\<Tipo>* Animação e implementar o método GetCurrentValueCore.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-156">Derive from a *\<Type>* Animation class and implement the GetCurrentValueCore method.</span></span> <span data-ttu-id="6cd6a-157">O método GetCurrentValueCore retorna o valor atual da animação.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-157">The GetCurrentValueCore method returns the current value of the animation.</span></span> <span data-ttu-id="6cd6a-158">Ele usa três parâmetros: um valor inicial sugerido, um valor final sugerido e um <xref:System.Windows.Media.Animation.AnimationClock>, que você pode usar para determinar o progresso da animação.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-158">It takes three parameters: a suggested starting value, a suggested ending value, and an <xref:System.Windows.Media.Animation.AnimationClock>, which you use to determine the progress of the animation.</span></span>  
  
 <span data-ttu-id="6cd6a-159">Porque o  *\<tipo >* classes AnimationBase herdam o <xref:System.Windows.Freezable> classe, você também deve substituir <xref:System.Windows.Freezable.CreateInstanceCore%2A> para retornar uma nova instância da sua classe.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-159">Because the *\<Type>* AnimationBase classes inherit from the <xref:System.Windows.Freezable> class, you must also override <xref:System.Windows.Freezable.CreateInstanceCore%2A> core to return a new instance of your class.</span></span> <span data-ttu-id="6cd6a-160">Se a classe não usar propriedades de dependência para armazenar seus dados ou requer inicialização extra após a criação, talvez seja necessário substituir métodos adicionais; Consulte a [Visão geral de objetos congeláveis](../../../../docs/framework/wpf/advanced/freezable-objects-overview.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-160">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../../../../docs/framework/wpf/advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="6cd6a-161">Para obter mais informações, consulte a documentação do método GetCurrentValueCore para a classe *\<Tipo>* AnimationBase para o tipo que você deseja animar.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-161">For more information, see the GetCurrentValueCore method documentation for the *\<Type>* AnimationBase class for the type that you want to animate.</span></span> <span data-ttu-id="6cd6a-162">Para obter um exemplo, consulte a [Exemplo de animação personalizada](https://go.microsoft.com/fwlink/?LinkID=159981)</span><span class="sxs-lookup"><span data-stu-id="6cd6a-162">For an example, see the [Custom Animation Sample](https://go.microsoft.com/fwlink/?LinkID=159981)</span></span>  
  
 <span data-ttu-id="6cd6a-163">**Abordagens alternativas**</span><span class="sxs-lookup"><span data-stu-id="6cd6a-163">**Alternative Approaches**</span></span>  
  
 <span data-ttu-id="6cd6a-164">Se você simplesmente quer mudar como os valores de animação são interpolados, considere derivar de uma classe *\<Tipo>* KeyFrame.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-164">If you simply want to change how animation values are interpolated, considering deriving from one of the *\<Type>* KeyFrame classes.</span></span> <span data-ttu-id="6cd6a-165">O quadro chave que você criar pode ser usado com a classe *\<Tipo >* AnimationUsingKeyFrames correspondente fornecida pelo [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6cd6a-165">The key frame you create can be used with the corresponding *\<Type>* AnimationUsingKeyFrames provided by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
### <a name="derive-from-animationtimeline"></a><span data-ttu-id="6cd6a-166">Derivar de AnimationTimeline</span><span class="sxs-lookup"><span data-stu-id="6cd6a-166">Derive from AnimationTimeline</span></span>  
 <span data-ttu-id="6cd6a-167">Derivam de <xref:System.Windows.Media.Animation.AnimationTimeline> classe quando você deseja criar uma animação para um tipo que ainda não tenha uma correspondência [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animação, ou se deseja criar uma animação que não seja fortemente tipada.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-167">Derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class when you want to create an animation for a type that doesn't already have a matching [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation, or you want to create an animation that is not strongly typed.</span></span>  
  
 <span data-ttu-id="6cd6a-168">**Instruções de implementação**</span><span class="sxs-lookup"><span data-stu-id="6cd6a-168">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="6cd6a-169">Derivar o <xref:System.Windows.Media.Animation.AnimationTimeline> de classe e substituir os seguintes membros:</span><span class="sxs-lookup"><span data-stu-id="6cd6a-169">Derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class and override the following members:</span></span>  
  
-   <span data-ttu-id="6cd6a-170"><xref:System.Windows.Freezable.CreateInstanceCore%2A> – Se sua nova classe é concreta, você deve substituir <xref:System.Windows.Freezable.CreateInstanceCore%2A> para retornar uma nova instância da sua classe.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-170"><xref:System.Windows.Freezable.CreateInstanceCore%2A> – If your new class is concrete, you must override <xref:System.Windows.Freezable.CreateInstanceCore%2A> to return a new instance of your class.</span></span>  
  
-   <span data-ttu-id="6cd6a-171"><xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> – Substitua este método para retornar o valor atual da sua animação.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-171"><xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> – Override this method to return the current value of your animation.</span></span> <span data-ttu-id="6cd6a-172">Ele usa três parâmetros: um valor de origem padrão, um valor de destino padrão e um <xref:System.Windows.Media.Animation.AnimationClock>.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-172">It takes three parameters: a default origin value, a default destination value, and an <xref:System.Windows.Media.Animation.AnimationClock>.</span></span> <span data-ttu-id="6cd6a-173">Use o <xref:System.Windows.Media.Animation.AnimationClock> para obter o tempo atual ou o progresso da animação.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-173">Use the <xref:System.Windows.Media.Animation.AnimationClock> to obtain the current time or progress for the animation.</span></span> <span data-ttu-id="6cd6a-174">Você pode optar por usar os valores padrão de origem e destino.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-174">You can choose whether to use the default origin and destination values.</span></span>  
  
-   <span data-ttu-id="6cd6a-175"><xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> – Substituir essa propriedade para indicar se sua animação utiliza o valor de destino padrão especificado pelo <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> método.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-175"><xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> – Override this property to indicate whether your animation uses the default destination value specified by the <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> method.</span></span>  
  
-   <span data-ttu-id="6cd6a-176"><xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> – Substituir essa propriedade para indicar o <xref:System.Type> da saída de sua animação produz.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-176"><xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> – Override this property to indicate the <xref:System.Type> of output your animation produces.</span></span>  
  
 <span data-ttu-id="6cd6a-177">Se a classe não usar propriedades de dependência para armazenar seus dados ou requer inicialização extra após a criação, talvez seja necessário substituir métodos adicionais; Consulte a [Visão geral de objetos congeláveis](../../../../docs/framework/wpf/advanced/freezable-objects-overview.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-177">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../../../../docs/framework/wpf/advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="6cd6a-178">O paradigma recomendado (usada pelas [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animações) é utilizar dois níveis de herança:</span><span class="sxs-lookup"><span data-stu-id="6cd6a-178">The recommended paradigm (used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animations) is to use two inheritance levels:</span></span>  
  
1.  <span data-ttu-id="6cd6a-179">Criar um resumo  *\<tipo >* classe AnimationBase que deriva de <xref:System.Windows.Media.Animation.AnimationTimeline>.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-179">Create an abstract *\<Type>* AnimationBase class that derives from <xref:System.Windows.Media.Animation.AnimationTimeline>.</span></span> <span data-ttu-id="6cd6a-180">Essa classe deve substituir o <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> método.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-180">This class should override the <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> method.</span></span> <span data-ttu-id="6cd6a-181">Também deve introduzir um novo método abstrato, GetCurrentValueCore e substituir <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> , de modo que ele valida os tipos dos parâmetros de valor de destino padrão e o valor de origem padrão, em seguida, chama o GetCurrentValueCore.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-181">It should also introduce a new abstract method, GetCurrentValueCore, and override <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> so that it validates the types of the default origin value and default destination value parameters, then calls GetCurrentValueCore.</span></span>  
  
2.  <span data-ttu-id="6cd6a-182">Criar outra classe que herda de sua nova  *\<tipo >* classe AnimationBase e substitui o <xref:System.Windows.Freezable.CreateInstanceCore%2A> método, o método GetCurrentValueCore que você introduziu, e o <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-182">Create another class that inherits from your new *\<Type>* AnimationBase class and overrides the <xref:System.Windows.Freezable.CreateInstanceCore%2A> method, the GetCurrentValueCore method that you introduced, and the <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> property.</span></span>  
  
 <span data-ttu-id="6cd6a-183">**Abordagens alternativas**</span><span class="sxs-lookup"><span data-stu-id="6cd6a-183">**Alternative Approaches**</span></span>  
  
 <span data-ttu-id="6cd6a-184">Se você quiser animar um tipo que não tem animação correspondente de/para/por ou animação de quadro-chave, considere o uso de um <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames>.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-184">If you want to animate a type that has no corresponding From/To/By animation or key-frame animation, consider using an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames>.</span></span> <span data-ttu-id="6cd6a-185">Como é fracamente tipado, um <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> pode animar qualquer tipo de valor.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-185">Because it is weakly typed, an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> can animate any type of value.</span></span> <span data-ttu-id="6cd6a-186">A desvantagem dessa abordagem é que <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> dá suporte apenas a interpolação discreta.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-186">The drawback to this approach is that <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> only supports discrete interpolation.</span></span>  
  
<a name="useperframecallback"></a>   
## <a name="use-per-frame-callback"></a><span data-ttu-id="6cd6a-187">Utilize Chamada por quadro</span><span class="sxs-lookup"><span data-stu-id="6cd6a-187">Use Per-Frame Callback</span></span>  
 <span data-ttu-id="6cd6a-188">Use esta abordagem quando você precisar ignorar completamente o sistema de animação [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6cd6a-188">Use this approach when you need to completely bypass the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system.</span></span> <span data-ttu-id="6cd6a-189">Um cenário para essa abordagem é animações de física, na qual em cada animação etapa que uma nova direção ou posição de objetos animados precisa ser recalculada com base no último conjunto de interações de objetos.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-189">One scenario for this approach is physics animations, where at each animation step a new direction or position of animated objects needs to be recomputed based on the  last set of object interactions.</span></span>  
  
 <span data-ttu-id="6cd6a-190">**Instruções de implementação**</span><span class="sxs-lookup"><span data-stu-id="6cd6a-190">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="6cd6a-191">Diferentemente de outras abordagens descritas nesta visão geral, para utilizar callback por quadro você não precisa criar uma classe de quadro-chave ou animação personalizada.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-191">Unlike the other approaches described in this overview, to use per-frame callback you don't need to create a custom animation or key frame class.</span></span>  
  
 <span data-ttu-id="6cd6a-192">Em vez disso, você pode se registrar para o <xref:System.Windows.Media.CompositionTarget.Rendering> eventos do objeto que contém os objetos que você deseja animar.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-192">Instead, you register for the <xref:System.Windows.Media.CompositionTarget.Rendering> event of the object that contains the objects you want to animate.</span></span> <span data-ttu-id="6cd6a-193">Esse método de manipulador de eventos é chamado uma vez por quadro.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-193">This event handler method gets called once per frame.</span></span> <span data-ttu-id="6cd6a-194">Toda vez que [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] realizar marshaling dos dados persistentes de renderização na árvore visual para o gráfico de cena de composição, o método de manipulador de eventos será chamado.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-194">Each time that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] marshals the persisted rendering data in the visual tree across to the composition tree, your event handler method is called.</span></span>  
  
 <span data-ttu-id="6cd6a-195">Em seu manipulador de evento, realize todos cálculos necessários para a animação em vigor e definir as propriedades dos objetos que você deseja animar com esses valores.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-195">In your event handler, perform your whatever calculations necessary for your animation effect and set the properties of the objects you want to animate with these values.</span></span>  
  
 <span data-ttu-id="6cd6a-196">Para obter a hora de apresentação do quadro atual, o <xref:System.EventArgs> associado a este evento pode ser convertido como <xref:System.Windows.Media.RenderingEventArgs>, que fornecem um <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> tempo de processamento da propriedade que você pode usar para obter o quadro atual.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-196">To obtain the presentation time of the current frame, the <xref:System.EventArgs> associated with this event can be cast as <xref:System.Windows.Media.RenderingEventArgs>, which provide a <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> property that you can use to obtain the current frame's rendering time.</span></span>  
  
 <span data-ttu-id="6cd6a-197">Para obter mais informações, consulte o <xref:System.Windows.Media.CompositionTarget.Rendering> página.</span><span class="sxs-lookup"><span data-stu-id="6cd6a-197">For more information, see the <xref:System.Windows.Media.CompositionTarget.Rendering> page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6cd6a-198">Consulte também</span><span class="sxs-lookup"><span data-stu-id="6cd6a-198">See Also</span></span>  
 <xref:System.Windows.Media.Animation.AnimationTimeline>  
 <xref:System.Windows.Media.Animation.IKeyFrame>  
 [<span data-ttu-id="6cd6a-199">Visão geral das técnicas de animação da propriedade</span><span class="sxs-lookup"><span data-stu-id="6cd6a-199">Property Animation Techniques Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/property-animation-techniques-overview.md)  
 [<span data-ttu-id="6cd6a-200">Visão geral de objetos congeláveis</span><span class="sxs-lookup"><span data-stu-id="6cd6a-200">Freezable Objects Overview</span></span>](../../../../docs/framework/wpf/advanced/freezable-objects-overview.md)  
 [<span data-ttu-id="6cd6a-201">Visão geral das animações de quadro-chave</span><span class="sxs-lookup"><span data-stu-id="6cd6a-201">Key-Frame Animations Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/key-frame-animations-overview.md)  
 [<span data-ttu-id="6cd6a-202">Visão geral de animações de caminho</span><span class="sxs-lookup"><span data-stu-id="6cd6a-202">Path Animations Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/path-animations-overview.md)  
 [<span data-ttu-id="6cd6a-203">Visão geral da animação</span><span class="sxs-lookup"><span data-stu-id="6cd6a-203">Animation Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md)  
 [<span data-ttu-id="6cd6a-204">Visão geral da animação e do sistema de tempo</span><span class="sxs-lookup"><span data-stu-id="6cd6a-204">Animation and Timing System Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/animation-and-timing-system-overview.md)  
 [<span data-ttu-id="6cd6a-205">Exemplo de animação personalizada</span><span class="sxs-lookup"><span data-stu-id="6cd6a-205">Custom Animation Sample</span></span>](https://go.microsoft.com/fwlink/?LinkID=159981)
