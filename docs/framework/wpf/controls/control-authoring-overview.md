---
title: Visão geral da criação de controle
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- controls [WPF], authoring overview
- authoring overview for controls [WPF]
ms.assetid: 3d864748-cff0-4e63-9b23-d8e5a635b28f
ms.openlocfilehash: 1ac8964f915206205d5c9e6ab782fcaa59bf2a99
ms.sourcegitcommit: f348c84443380a1959294cdf12babcb804cfa987
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/12/2019
ms.locfileid: "73975727"
---
# <a name="control-authoring-overview"></a><span data-ttu-id="8b424-102">Visão geral da criação de controle</span><span class="sxs-lookup"><span data-stu-id="8b424-102">Control Authoring Overview</span></span>

<span data-ttu-id="8b424-103">A extensibilidade do modelo de controle do [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] reduz consideravelmente a necessidade de criar um novo controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-103">The extensibility of the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] control model greatly reduces the need to create a new control.</span></span> <span data-ttu-id="8b424-104">No entanto, em alguns casos, você ainda precisará criar um controle personalizado.</span><span class="sxs-lookup"><span data-stu-id="8b424-104">However, in certain cases you may still need to create a custom control.</span></span> <span data-ttu-id="8b424-105">Este tópico aborda os recursos que minimizam sua necessidade de criar um controle personalizado e os diferentes modelos de criação no [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b424-105">This topic discusses the features that minimize your need to create a custom control and the different control authoring models in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="8b424-106">Este tópico também demonstra como criar um novo controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-106">This topic also demonstrates how to create a new control.</span></span>

<a name="when_to_write_a_new_control"></a>

## <a name="alternatives-to-writing-a-new-control"></a><span data-ttu-id="8b424-107">Alternativas a escrever um novo controle</span><span class="sxs-lookup"><span data-stu-id="8b424-107">Alternatives to Writing a New Control</span></span>

<span data-ttu-id="8b424-108">Historicamente, se você quisesse obter uma experiência personalizada de um controle existente, você era limitado a alterar as propriedades padrão do controle, como a cor da tela de fundo, a largura da borda e o tamanho da fonte.</span><span class="sxs-lookup"><span data-stu-id="8b424-108">Historically, if you wanted to get a customized experience from an existing control, you were limited to changing the standard properties of the control, such as background color, border width, and font size.</span></span> <span data-ttu-id="8b424-109">Se você quisesse estender a aparência ou o comportamento de um controle além desses parâmetros predefinidos, você precisaria criar um novo controle, geralmente herdando um controle existente e substituindo o método responsável por desenhar o controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-109">If you wished to extend the appearance or behavior of a control beyond these predefined parameters, you would need to create a new control, usually by inheriting from an existing control and overriding the method responsible for drawing the control.</span></span>  <span data-ttu-id="8b424-110">Embora ainda seja uma opção, o [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] lhe permite personalizar os controles existentes usando seu modelo de conteúdo sofisticado, estilos, modelos e disparadores.</span><span class="sxs-lookup"><span data-stu-id="8b424-110">Although that is still an option, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] enables to you customize existing controls by using its rich content model, styles, templates, and triggers.</span></span> <span data-ttu-id="8b424-111">A lista a seguir fornece exemplos de como esses recursos podem ser usados para criar experiências personalizadas e consistentes sem ter de criar um novo controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-111">The following list gives examples of how these features can be used to create custom and consistent experiences without having to create a new control.</span></span>

- <span data-ttu-id="8b424-112">**Conteúdo sofisticado.**</span><span class="sxs-lookup"><span data-stu-id="8b424-112">**Rich Content.**</span></span> <span data-ttu-id="8b424-113">Muitos dos controles padrão do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] dão suporte a conteúdo sofisticado.</span><span class="sxs-lookup"><span data-stu-id="8b424-113">Many of the standard [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controls support rich content.</span></span> <span data-ttu-id="8b424-114">Por exemplo, a propriedade Content de um <xref:System.Windows.Controls.Button> é do tipo <xref:System.Object>, teoricamente, qualquer coisa pode ser exibida em um <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="8b424-114">For example, the content property of a <xref:System.Windows.Controls.Button> is of type <xref:System.Object>, so theoretically anything can be displayed on a <xref:System.Windows.Controls.Button>.</span></span>  <span data-ttu-id="8b424-115">Para que um botão exiba uma imagem e um texto, você pode adicionar uma imagem e uma <xref:System.Windows.Controls.TextBlock> a uma <xref:System.Windows.Controls.StackPanel> e atribuir a <xref:System.Windows.Controls.StackPanel> à propriedade <xref:System.Windows.Controls.ContentControl.Content%2A>.</span><span class="sxs-lookup"><span data-stu-id="8b424-115">To have a button display an image and text, you can add an image and a <xref:System.Windows.Controls.TextBlock> to a <xref:System.Windows.Controls.StackPanel> and assign the <xref:System.Windows.Controls.StackPanel> to the <xref:System.Windows.Controls.ContentControl.Content%2A> property.</span></span> <span data-ttu-id="8b424-116">Como os controles podem exibir dados arbitrários e elementos visuais do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], há menos necessidade de criar um novo controle ou modificar um controle existente para dar suporte a uma visualização complexa.</span><span class="sxs-lookup"><span data-stu-id="8b424-116">Because the controls can display [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] visual elements and arbitrary data, there is less need to create a new control or to modify an existing control to support a complex visualization.</span></span> <span data-ttu-id="8b424-117">Para obter mais informações sobre o modelo de conteúdo para <xref:System.Windows.Controls.Button> e outros modelos de conteúdo no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], consulte [modelo de conteúdo do WPF](wpf-content-model.md).</span><span class="sxs-lookup"><span data-stu-id="8b424-117">For more information about the content model for <xref:System.Windows.Controls.Button> and other content models in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [WPF Content Model](wpf-content-model.md).</span></span>

- <span data-ttu-id="8b424-118">**Estilos.**</span><span class="sxs-lookup"><span data-stu-id="8b424-118">**Styles.**</span></span> <span data-ttu-id="8b424-119">Uma <xref:System.Windows.Style> é uma coleção de valores que representam as propriedades de um controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-119">A <xref:System.Windows.Style> is a collection of values that represent properties for a control.</span></span> <span data-ttu-id="8b424-120">Usando estilos, você pode criar uma representação reutilizável da aparência e comportamento de um controle desejado sem escrever um novo controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-120">By using styles, you can create a reusable representation of a desired control appearance and behavior without writing a new control.</span></span> <span data-ttu-id="8b424-121">Por exemplo, suponha que você queira que todos os seus controles de <xref:System.Windows.Controls.TextBlock> tenham uma fonte vermelha, Arial com um tamanho de fonte de 14.</span><span class="sxs-lookup"><span data-stu-id="8b424-121">For example, assume that you want all of your <xref:System.Windows.Controls.TextBlock> controls to have red, Arial font with a font size of 14.</span></span> <span data-ttu-id="8b424-122">Você pode criar um estilo como um recurso e definir as propriedades adequadas de acordo com isso.</span><span class="sxs-lookup"><span data-stu-id="8b424-122">You can create a style as a resource and set the appropriate properties accordingly.</span></span> <span data-ttu-id="8b424-123">Em seguida, cada <xref:System.Windows.Controls.TextBlock> que você adicionar ao seu aplicativo terá a mesma aparência.</span><span class="sxs-lookup"><span data-stu-id="8b424-123">Then every <xref:System.Windows.Controls.TextBlock> that you add to your application will have the same appearance.</span></span>

- <span data-ttu-id="8b424-124">**Modelos de dados.**</span><span class="sxs-lookup"><span data-stu-id="8b424-124">**Data Templates.**</span></span> <span data-ttu-id="8b424-125">Uma <xref:System.Windows.DataTemplate> permite que você personalize como os dados são exibidos em um controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-125">A <xref:System.Windows.DataTemplate> enables you to customize how data is displayed on a control.</span></span> <span data-ttu-id="8b424-126">Por exemplo, um <xref:System.Windows.DataTemplate> pode ser usado para especificar como os dados são exibidos em um <xref:System.Windows.Controls.ListBox>.</span><span class="sxs-lookup"><span data-stu-id="8b424-126">For example, a <xref:System.Windows.DataTemplate> can be used to specify how data is displayed in a <xref:System.Windows.Controls.ListBox>.</span></span>  <span data-ttu-id="8b424-127">Para obter um exemplo disso, consulte [Visão geral de modelagem de dados](../data/data-templating-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8b424-127">For an example of this, see [Data Templating Overview](../data/data-templating-overview.md).</span></span>  <span data-ttu-id="8b424-128">Além de personalizar a aparência dos dados, um <xref:System.Windows.DataTemplate> pode incluir elementos da interface do usuário, o que proporciona muita flexibilidade em UIs personalizadas.</span><span class="sxs-lookup"><span data-stu-id="8b424-128">In addition to customizing the appearance of data, a <xref:System.Windows.DataTemplate> can include UI elements, which gives you a lot of flexibility in custom UIs.</span></span>  <span data-ttu-id="8b424-129">Por exemplo, usando uma <xref:System.Windows.DataTemplate>, você pode criar um <xref:System.Windows.Controls.ComboBox> no qual cada item contém uma caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="8b424-129">For example, by using a <xref:System.Windows.DataTemplate>, you can create a <xref:System.Windows.Controls.ComboBox> in which each item contains a check box.</span></span>

- <span data-ttu-id="8b424-130">**Modelos de controle.**</span><span class="sxs-lookup"><span data-stu-id="8b424-130">**Control Templates.**</span></span> <span data-ttu-id="8b424-131">Muitos controles em [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] usam uma <xref:System.Windows.Controls.ControlTemplate> para definir a estrutura e a aparência do controle, o que separa a aparência de um controle da funcionalidade do controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-131">Many controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] use a <xref:System.Windows.Controls.ControlTemplate> to define the control's structure and appearance, which separates the appearance of a control from the functionality of the control.</span></span> <span data-ttu-id="8b424-132">Você pode alterar drasticamente a aparência de um controle redefinindo sua <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="8b424-132">You can drastically change the appearance of a control by redefining its <xref:System.Windows.Controls.ControlTemplate>.</span></span>  <span data-ttu-id="8b424-133">Por exemplo, suponha que você deseja um controle que se pareça com um alerta.</span><span class="sxs-lookup"><span data-stu-id="8b424-133">For example, suppose you want a control that looks like a stoplight.</span></span> <span data-ttu-id="8b424-134">Esse controle tem uma interface do usuário e uma e funcionalidade simples.</span><span class="sxs-lookup"><span data-stu-id="8b424-134">This control has a simple user interface and functionality.</span></span>  <span data-ttu-id="8b424-135">O controle é composto de três círculos, sendo que apenas um deles pode ser aceso por vez.</span><span class="sxs-lookup"><span data-stu-id="8b424-135">The control is three circles, only one of which can be lit up at a time.</span></span> <span data-ttu-id="8b424-136">Após alguns reflexos, você pode perceber que uma <xref:System.Windows.Controls.RadioButton> oferece a funcionalidade de apenas uma selecionada de cada vez, mas a aparência padrão da <xref:System.Windows.Controls.RadioButton> não parece nada como as luzes em um alerta.</span><span class="sxs-lookup"><span data-stu-id="8b424-136">After some reflection, you might realize that a <xref:System.Windows.Controls.RadioButton> offers the functionality of only one being selected at a time, but the default appearance of the <xref:System.Windows.Controls.RadioButton> looks nothing like the lights on a stoplight.</span></span>  <span data-ttu-id="8b424-137">Como o <xref:System.Windows.Controls.RadioButton> usa um modelo de controle para definir sua aparência, é fácil redefinir o <xref:System.Windows.Controls.ControlTemplate> para se ajustar aos requisitos do controle e usar botões de opção para fazer seu alerta.</span><span class="sxs-lookup"><span data-stu-id="8b424-137">Because the <xref:System.Windows.Controls.RadioButton> uses a control template to define its appearance, it is easy to redefine the <xref:System.Windows.Controls.ControlTemplate> to fit the requirements of the control, and use radio buttons to make your stoplight.</span></span>

  > [!NOTE]
  > <span data-ttu-id="8b424-138">Embora um <xref:System.Windows.Controls.RadioButton> possa usar um <xref:System.Windows.DataTemplate>, um <xref:System.Windows.DataTemplate> não é suficiente neste exemplo.</span><span class="sxs-lookup"><span data-stu-id="8b424-138">Although a <xref:System.Windows.Controls.RadioButton> can use a <xref:System.Windows.DataTemplate>, a <xref:System.Windows.DataTemplate> is not sufficient in this example.</span></span>  <span data-ttu-id="8b424-139">O <xref:System.Windows.DataTemplate> define a aparência do conteúdo de um controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-139">The <xref:System.Windows.DataTemplate> defines the appearance of the content of a control.</span></span> <span data-ttu-id="8b424-140">No caso de um <xref:System.Windows.Controls.RadioButton>, o conteúdo é aquele que aparece à direita do círculo que indica se a <xref:System.Windows.Controls.RadioButton> está selecionada.</span><span class="sxs-lookup"><span data-stu-id="8b424-140">In the case of a <xref:System.Windows.Controls.RadioButton>, the content is whatever appears to the right of the circle that indicates whether the <xref:System.Windows.Controls.RadioButton> is selected.</span></span>  <span data-ttu-id="8b424-141">No exemplo do alerta, o botão de opção precisa ser apenas um círculo que pode se "acender."</span><span class="sxs-lookup"><span data-stu-id="8b424-141">In the example of the stoplight, the radio button needs just be a circle that can "light up."</span></span> <span data-ttu-id="8b424-142">Como o requisito de aparência para o alerta é tão diferente da aparência padrão do <xref:System.Windows.Controls.RadioButton>, é necessário redefinir o <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="8b424-142">Because the appearance requirement for the stoplight is so different than the default appearance of the <xref:System.Windows.Controls.RadioButton>, it is necessary to redefine the <xref:System.Windows.Controls.ControlTemplate>.</span></span>  <span data-ttu-id="8b424-143">Em geral, um <xref:System.Windows.DataTemplate> é usado para definir o conteúdo (ou dados) de um controle e um <xref:System.Windows.Controls.ControlTemplate> é usado para definir como um controle é estruturado.</span><span class="sxs-lookup"><span data-stu-id="8b424-143">In general a <xref:System.Windows.DataTemplate> is used for defining the content (or data) of a control, and a <xref:System.Windows.Controls.ControlTemplate> is used for defining how a control is structured.</span></span>

- <span data-ttu-id="8b424-144">**Gatilhos.**</span><span class="sxs-lookup"><span data-stu-id="8b424-144">**Triggers.**</span></span> <span data-ttu-id="8b424-145">Uma <xref:System.Windows.Trigger> permite que você altere dinamicamente a aparência e o comportamento de um controle sem criar um novo controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-145">A <xref:System.Windows.Trigger> allows you to dynamically change the appearance and behavior of a control without creating a new control.</span></span> <span data-ttu-id="8b424-146">Por exemplo, suponha que você tenha vários controles de <xref:System.Windows.Controls.ListBox> em seu aplicativo e queira que os itens em cada <xref:System.Windows.Controls.ListBox> sejam negrito e vermelho quando forem selecionados.</span><span class="sxs-lookup"><span data-stu-id="8b424-146">For example, suppose you have multiple <xref:System.Windows.Controls.ListBox> controls in your application and want the items in each <xref:System.Windows.Controls.ListBox> to be bold and red when they are selected.</span></span> <span data-ttu-id="8b424-147">Seu primeiro instinto pode ser criar uma classe que herda de <xref:System.Windows.Controls.ListBox> e substituir o método <xref:System.Windows.Controls.Primitives.Selector.OnSelectionChanged%2A> para alterar a aparência do item selecionado, mas uma abordagem melhor é adicionar um gatilho a um estilo de um <xref:System.Windows.Controls.ListBoxItem> que altera a aparência do item selecionado.</span><span class="sxs-lookup"><span data-stu-id="8b424-147">Your first instinct might be to create a class that inherits from <xref:System.Windows.Controls.ListBox> and override the <xref:System.Windows.Controls.Primitives.Selector.OnSelectionChanged%2A> method to change the appearance of the selected item, but a better approach is to add a trigger to a style of a <xref:System.Windows.Controls.ListBoxItem> that changes the appearance of the selected item.</span></span> <span data-ttu-id="8b424-148">Um gatilho permite que você altere os valores da propriedade ou execute ações com base no valor de uma propriedade.</span><span class="sxs-lookup"><span data-stu-id="8b424-148">A trigger enables you to change property values or take actions based on the value of a property.</span></span> <span data-ttu-id="8b424-149">Um <xref:System.Windows.EventTrigger> permite que você execute ações quando um evento ocorre.</span><span class="sxs-lookup"><span data-stu-id="8b424-149">An <xref:System.Windows.EventTrigger> enables you to take actions when an event occurs.</span></span>

<span data-ttu-id="8b424-150">Para obter mais informações sobre estilos, modelos e gatilhos, consulte [Estilo e modelagem](styling-and-templating.md).</span><span class="sxs-lookup"><span data-stu-id="8b424-150">For more information about styles, templates, and triggers, see [Styling and Templating](styling-and-templating.md).</span></span>

<span data-ttu-id="8b424-151">Em geral, se o seu controle espelha a funcionalidade de um controle existente mas você deseja que seu controle tenha uma aparência diferente, você deve primeiro considerar se você pode ou não usar qualquer um dos métodos abordados nesta seção para alterar a aparência do controle existente.</span><span class="sxs-lookup"><span data-stu-id="8b424-151">In general, if your control mirrors the functionality of an existing control, but you want the control to look different, you should first consider whether you can use any of the methods discussed in this section to change the existing control's appearance.</span></span>

<a name="models_for_control_authoring"></a>

## <a name="models-for-control-authoring"></a><span data-ttu-id="8b424-152">Modelos para criação de controles</span><span class="sxs-lookup"><span data-stu-id="8b424-152">Models for Control Authoring</span></span>

<span data-ttu-id="8b424-153">O modelo de conteúdo sofisticado, estilos, modelos e gatilhos minimizam a necessidade de criar um novo controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-153">The rich content model, styles, templates, and triggers minimize the need for you to create a new control.</span></span> <span data-ttu-id="8b424-154">No entanto, se você precisar criar um novo controle, será importante compreender os diferentes modelos de criação no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b424-154">However, if you do need to create a new control, it is important to understand the different control authoring models in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="8b424-155">O [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] fornece três modelos gerais para criar um controle, cada um deles fornece um conjunto de recursos e um nível de flexibilidade diferentes.</span><span class="sxs-lookup"><span data-stu-id="8b424-155">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] provides three general models for creating a control, each of which provides a different set of features and level of flexibility.</span></span> <span data-ttu-id="8b424-156">As classes base para os três modelos são <xref:System.Windows.Controls.UserControl>, <xref:System.Windows.Controls.Control>e <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="8b424-156">The base classes for the three models are <xref:System.Windows.Controls.UserControl>, <xref:System.Windows.Controls.Control>, and <xref:System.Windows.FrameworkElement>.</span></span>

### <a name="deriving-from-usercontrol"></a><span data-ttu-id="8b424-157">Derivar de UserControl</span><span class="sxs-lookup"><span data-stu-id="8b424-157">Deriving from UserControl</span></span>

<span data-ttu-id="8b424-158">A maneira mais simples de criar um controle no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] é derivar de <xref:System.Windows.Controls.UserControl>.</span><span class="sxs-lookup"><span data-stu-id="8b424-158">The simplest way to create a control in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is to derive from <xref:System.Windows.Controls.UserControl>.</span></span> <span data-ttu-id="8b424-159">Quando você cria um controle que herda de <xref:System.Windows.Controls.UserControl>, adiciona componentes existentes ao <xref:System.Windows.Controls.UserControl>, nomeie os componentes e os manipuladores de eventos de referência no [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b424-159">When you build a control that inherits from <xref:System.Windows.Controls.UserControl>, you add existing components to the <xref:System.Windows.Controls.UserControl>, name the components, and reference event handlers in [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)].</span></span> <span data-ttu-id="8b424-160">Em seguida, você pode referenciar os elementos nomeados e definir os manipuladores de eventos no código.</span><span class="sxs-lookup"><span data-stu-id="8b424-160">You can then reference the named elements and define the event handlers in code.</span></span> <span data-ttu-id="8b424-161">Este modelo de desenvolvimento é muito semelhante ao modelo usado para o desenvolvimento de aplicativos no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b424-161">This development model is very similar to the model used for application development in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>

<span data-ttu-id="8b424-162">Se criado corretamente, uma <xref:System.Windows.Controls.UserControl> pode aproveitar os benefícios do conteúdo, dos estilos e dos gatilhos avançados.</span><span class="sxs-lookup"><span data-stu-id="8b424-162">If built correctly, a <xref:System.Windows.Controls.UserControl> can take advantage of the benefits of rich content, styles, and triggers.</span></span> <span data-ttu-id="8b424-163">No entanto, se seu controle herdar de <xref:System.Windows.Controls.UserControl>, as pessoas que usam seu controle não poderão usar uma <xref:System.Windows.DataTemplate> ou <xref:System.Windows.Controls.ControlTemplate> para personalizar sua aparência.</span><span class="sxs-lookup"><span data-stu-id="8b424-163">However, if your control inherits from <xref:System.Windows.Controls.UserControl>, people who use your control will not be able to use a <xref:System.Windows.DataTemplate> or <xref:System.Windows.Controls.ControlTemplate> to customize its appearance.</span></span>  <span data-ttu-id="8b424-164">É necessário derivar da classe <xref:System.Windows.Controls.Control> ou de uma de suas classes derivadas (diferente de <xref:System.Windows.Controls.UserControl>) para criar um controle personalizado que ofereça suporte a modelos.</span><span class="sxs-lookup"><span data-stu-id="8b424-164">It is necessary to derive from the <xref:System.Windows.Controls.Control> class or one of its derived classes (other than <xref:System.Windows.Controls.UserControl>) to create a custom control that supports templates.</span></span>

#### <a name="benefits-of-deriving-from-usercontrol"></a><span data-ttu-id="8b424-165">Benefícios de derivar de UserControl</span><span class="sxs-lookup"><span data-stu-id="8b424-165">Benefits of Deriving from UserControl</span></span>

<span data-ttu-id="8b424-166">Considere a derivação de <xref:System.Windows.Controls.UserControl> se todas as seguintes opções se aplicarem:</span><span class="sxs-lookup"><span data-stu-id="8b424-166">Consider deriving from <xref:System.Windows.Controls.UserControl> if all of the following apply:</span></span>

- <span data-ttu-id="8b424-167">Você deseja criar o controle da mesma forma como cria um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8b424-167">You want to build your control similarly to how you build an application.</span></span>

- <span data-ttu-id="8b424-168">O controle consiste somente de componentes existentes.</span><span class="sxs-lookup"><span data-stu-id="8b424-168">Your control consists only of existing components.</span></span>

- <span data-ttu-id="8b424-169">Não é necessário dar suporte a personalização complexa.</span><span class="sxs-lookup"><span data-stu-id="8b424-169">You don't need to support complex customization.</span></span>

### <a name="deriving-from-control"></a><span data-ttu-id="8b424-170">Derivar de Control</span><span class="sxs-lookup"><span data-stu-id="8b424-170">Deriving from Control</span></span>

<span data-ttu-id="8b424-171">Derivar da classe <xref:System.Windows.Controls.Control> é o modelo usado pela maioria dos controles de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] existentes.</span><span class="sxs-lookup"><span data-stu-id="8b424-171">Deriving from the <xref:System.Windows.Controls.Control> class is the model used by most of the existing [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controls.</span></span> <span data-ttu-id="8b424-172">Quando você cria um controle que herda da classe <xref:System.Windows.Controls.Control>, você define sua aparência usando modelos.</span><span class="sxs-lookup"><span data-stu-id="8b424-172">When you create a control that inherits from the <xref:System.Windows.Controls.Control> class, you define its appearance by using templates.</span></span> <span data-ttu-id="8b424-173">Fazendo isso, você pode separar a lógica operacional da representação visual.</span><span class="sxs-lookup"><span data-stu-id="8b424-173">By doing so, you separate the operational logic from the visual representation.</span></span> <span data-ttu-id="8b424-174">Você também pode garantir a desassociação da interface do usuário e da lógica usando comandos e associações em vez de eventos e evitando a referência de elementos no <xref:System.Windows.Controls.ControlTemplate> sempre que possível.</span><span class="sxs-lookup"><span data-stu-id="8b424-174">You can also ensure the decoupling of the UI and logic by using commands and bindings instead of events and avoiding referencing elements in the <xref:System.Windows.Controls.ControlTemplate> whenever possible.</span></span>  <span data-ttu-id="8b424-175">Se a interface do usuário e a lógica do seu controle estiverem desacopladas corretamente, um usuário do seu controle poderá redefinir o <xref:System.Windows.Controls.ControlTemplate> do controle para personalizar sua aparência.</span><span class="sxs-lookup"><span data-stu-id="8b424-175">If the UI and logic of your control are properly decoupled, a user of your control can redefine the control's <xref:System.Windows.Controls.ControlTemplate> to customize its appearance.</span></span> <span data-ttu-id="8b424-176">Embora a criação de um <xref:System.Windows.Controls.Control> personalizado não seja tão simples quanto a criação de um <xref:System.Windows.Controls.UserControl>, uma <xref:System.Windows.Controls.Control> personalizada fornece mais flexibilidade.</span><span class="sxs-lookup"><span data-stu-id="8b424-176">Although building a custom <xref:System.Windows.Controls.Control> is not as simple as building a <xref:System.Windows.Controls.UserControl>, a custom <xref:System.Windows.Controls.Control> provides the most flexibility.</span></span>

#### <a name="benefits-of-deriving-from-control"></a><span data-ttu-id="8b424-177">Benefícios de derivar de Control</span><span class="sxs-lookup"><span data-stu-id="8b424-177">Benefits of Deriving from Control</span></span>

<span data-ttu-id="8b424-178">Considere a derivação de <xref:System.Windows.Controls.Control> em vez de usar a classe <xref:System.Windows.Controls.UserControl> se alguma das seguintes opções for aplicável:</span><span class="sxs-lookup"><span data-stu-id="8b424-178">Consider deriving from <xref:System.Windows.Controls.Control> instead of using the <xref:System.Windows.Controls.UserControl> class if any of the following apply:</span></span>

- <span data-ttu-id="8b424-179">Você deseja que a aparência do seu controle seja personalizável por meio do <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="8b424-179">You want the appearance of your control to be customizable via the <xref:System.Windows.Controls.ControlTemplate>.</span></span>

- <span data-ttu-id="8b424-180">Você quiser que o controle dê suporte a diferentes temas.</span><span class="sxs-lookup"><span data-stu-id="8b424-180">You want your control to support different themes.</span></span>

### <a name="deriving-from-frameworkelement"></a><span data-ttu-id="8b424-181">Derivar de FrameworkElement</span><span class="sxs-lookup"><span data-stu-id="8b424-181">Deriving from FrameworkElement</span></span>

<span data-ttu-id="8b424-182">Controles que derivam de <xref:System.Windows.Controls.UserControl> ou <xref:System.Windows.Controls.Control> contam com a composição de elementos existentes.</span><span class="sxs-lookup"><span data-stu-id="8b424-182">Controls that derive from <xref:System.Windows.Controls.UserControl> or <xref:System.Windows.Controls.Control> rely upon composing existing elements.</span></span> <span data-ttu-id="8b424-183">Para muitos cenários, essa é uma solução aceitável, pois qualquer objeto herdado de <xref:System.Windows.FrameworkElement> pode estar em um <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="8b424-183">For many scenarios, this is an acceptable solution, because any object that inherits from <xref:System.Windows.FrameworkElement> can be in a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="8b424-184">No entanto, há vezes em que a aparência de um controle requer mais do que a funcionalidade da composição simples de elementos.</span><span class="sxs-lookup"><span data-stu-id="8b424-184">However, there are times when a control's appearance requires more than the functionality of simple element composition.</span></span> <span data-ttu-id="8b424-185">Para esses cenários, basear um componente em <xref:System.Windows.FrameworkElement> é a escolha certa.</span><span class="sxs-lookup"><span data-stu-id="8b424-185">For these scenarios, basing a component on <xref:System.Windows.FrameworkElement> is the right choice.</span></span>

<span data-ttu-id="8b424-186">Há dois métodos padrão para criar componentes baseados em <xref:System.Windows.FrameworkElement>: renderização direta e composição de elemento personalizado.</span><span class="sxs-lookup"><span data-stu-id="8b424-186">There are two standard methods for building <xref:System.Windows.FrameworkElement>-based components: direct rendering and custom element composition.</span></span> <span data-ttu-id="8b424-187">A renderização direta envolve a substituição do método <xref:System.Windows.UIElement.OnRender%2A> de <xref:System.Windows.FrameworkElement> e o fornecimento de operações <xref:System.Windows.Media.DrawingContext> que definem explicitamente os elementos visuais do componente.</span><span class="sxs-lookup"><span data-stu-id="8b424-187">Direct rendering involves overriding the <xref:System.Windows.UIElement.OnRender%2A> method of <xref:System.Windows.FrameworkElement> and providing <xref:System.Windows.Media.DrawingContext> operations that explicitly define the component visuals.</span></span> <span data-ttu-id="8b424-188">Esse é o método usado por <xref:System.Windows.Controls.Image> e <xref:System.Windows.Controls.Border>.</span><span class="sxs-lookup"><span data-stu-id="8b424-188">This is the method used by <xref:System.Windows.Controls.Image> and <xref:System.Windows.Controls.Border>.</span></span> <span data-ttu-id="8b424-189">A composição de elemento personalizado envolve o uso de objetos do tipo <xref:System.Windows.Media.Visual> para compor a aparência de seu componente.</span><span class="sxs-lookup"><span data-stu-id="8b424-189">Custom element composition involves using objects of type <xref:System.Windows.Media.Visual> to compose the appearance of your component.</span></span> <span data-ttu-id="8b424-190">Para obter um exemplo, consulte [Usando objetos DrawingVisual](../graphics-multimedia/using-drawingvisual-objects.md).</span><span class="sxs-lookup"><span data-stu-id="8b424-190">For an example, see [Using DrawingVisual Objects](../graphics-multimedia/using-drawingvisual-objects.md).</span></span> <span data-ttu-id="8b424-191"><xref:System.Windows.Controls.Primitives.Track> é um exemplo de um controle em [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] que usa composição de elemento personalizado.</span><span class="sxs-lookup"><span data-stu-id="8b424-191"><xref:System.Windows.Controls.Primitives.Track> is an example of a control in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] that uses custom element composition.</span></span> <span data-ttu-id="8b424-192">Também é possível misturar renderização direta e composição personalizada de elementos no mesmo controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-192">It is also possible to mix direct rendering and custom element composition in the same control.</span></span>

#### <a name="benefits-of-deriving-from-frameworkelement"></a><span data-ttu-id="8b424-193">Benefícios de derivar de FrameworkElement</span><span class="sxs-lookup"><span data-stu-id="8b424-193">Benefits of Deriving from FrameworkElement</span></span>

<span data-ttu-id="8b424-194">Considere a derivação de <xref:System.Windows.FrameworkElement> se alguma das seguintes opções for aplicável:</span><span class="sxs-lookup"><span data-stu-id="8b424-194">Consider deriving from <xref:System.Windows.FrameworkElement> if any of the following apply:</span></span>

- <span data-ttu-id="8b424-195">Você deseja ter controle preciso sobre a aparência de seu controle além do que é proporcionado pela composição simples de elementos.</span><span class="sxs-lookup"><span data-stu-id="8b424-195">You want to have precise control over the appearance of your control beyond what is provided by simple element composition.</span></span>

- <span data-ttu-id="8b424-196">Você deseja definir a aparência de seu controle definindo sua própria lógica de renderização.</span><span class="sxs-lookup"><span data-stu-id="8b424-196">You want to define the appearance of your control by defining your own render logic.</span></span>

- <span data-ttu-id="8b424-197">Você quer compor elementos existentes de maneiras novas que vão além do que é possível com <xref:System.Windows.Controls.UserControl> e <xref:System.Windows.Controls.Control>.</span><span class="sxs-lookup"><span data-stu-id="8b424-197">You want to compose existing elements in novel ways that go beyond what is possible with <xref:System.Windows.Controls.UserControl> and <xref:System.Windows.Controls.Control>.</span></span>

<a name="control_authoring_basics"></a>

## <a name="control-authoring-basics"></a><span data-ttu-id="8b424-198">Noções básicas de criação de controles</span><span class="sxs-lookup"><span data-stu-id="8b424-198">Control Authoring Basics</span></span>

<span data-ttu-id="8b424-199">Conforme discutido anteriormente, um dos recursos mais poderosos do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] é a capacidade de ir além da configuração das propriedades básicas de um controle para alterar sua aparência e comportamento, ainda assim não precisando criar um controle personalizado.</span><span class="sxs-lookup"><span data-stu-id="8b424-199">As discussed earlier, one of the most powerful features of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is the ability to go beyond setting basic properties of a control to change its appearance and behavior, yet still not needing to create a custom control.</span></span> <span data-ttu-id="8b424-200">Os estilos, vinculação de dados e recursos de gatilho são possibilitados pelo sistema de propriedades do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] e o sistema de eventos do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b424-200">The styling, data binding, and trigger features are made possible by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system and the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system.</span></span> <span data-ttu-id="8b424-201">As seções a seguir descrevem algumas práticas recomendadas que devem ser seguidas independentemente do modelo que você usar para criar o controle personalizado, de modo que os usuários do seu controle personalizado possam usar esses recursos exatamente como fariam para controle incluído no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b424-201">The following sections describe some practices that you should follow, regardless of the model you use to create the custom control, so that users of your custom control can use these features just as they would for a control that is included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>

### <a name="use-dependency-properties"></a><span data-ttu-id="8b424-202">Usar propriedades de dependência</span><span class="sxs-lookup"><span data-stu-id="8b424-202">Use Dependency Properties</span></span>

<span data-ttu-id="8b424-203">Quando uma propriedade é uma propriedade de dependência, é possível fazer o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8b424-203">When a property is a dependency property, it is possible to do the following:</span></span>

- <span data-ttu-id="8b424-204">Defina a propriedade em um estilo.</span><span class="sxs-lookup"><span data-stu-id="8b424-204">Set the property in a style.</span></span>

- <span data-ttu-id="8b424-205">Associe a propriedade a uma fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="8b424-205">Bind the property to a data source.</span></span>

- <span data-ttu-id="8b424-206">Use um recurso dinâmico como o valor da propriedade.</span><span class="sxs-lookup"><span data-stu-id="8b424-206">Use a dynamic resource as the property's value.</span></span>

- <span data-ttu-id="8b424-207">Anime a propriedade.</span><span class="sxs-lookup"><span data-stu-id="8b424-207">Animate the property.</span></span>

<span data-ttu-id="8b424-208">Se você quiser que uma propriedade de seu controle dê suporte a qualquer parte dessa funcionalidade, você deverá implementá-la como uma propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="8b424-208">If you want a property of your control to support any of this functionality, you should implement it as a dependency property.</span></span> <span data-ttu-id="8b424-209">O exemplo a seguir define uma propriedade de dependência chamada `Value`, fazendo o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8b424-209">The following example defines a dependency property named `Value` by doing the following:</span></span>

- <span data-ttu-id="8b424-210">Defina um identificador de <xref:System.Windows.DependencyProperty> chamado `ValueProperty` como um campo `public` `static` `readonly`.</span><span class="sxs-lookup"><span data-stu-id="8b424-210">Define a <xref:System.Windows.DependencyProperty> identifier named `ValueProperty` as a `public` `static` `readonly` field.</span></span>

- <span data-ttu-id="8b424-211">Registre o nome da propriedade com o sistema de propriedades, chamando <xref:System.Windows.DependencyProperty.Register%2A?displayProperty=nameWithType>, para especificar o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8b424-211">Register the property name with the property system, by calling <xref:System.Windows.DependencyProperty.Register%2A?displayProperty=nameWithType>, to specify the following:</span></span>

  - <span data-ttu-id="8b424-212">O nome da propriedade.</span><span class="sxs-lookup"><span data-stu-id="8b424-212">The name of the property.</span></span>

  - <span data-ttu-id="8b424-213">O tipo da propriedade.</span><span class="sxs-lookup"><span data-stu-id="8b424-213">The type of the property.</span></span>

  - <span data-ttu-id="8b424-214">O tipo que é proprietário da propriedade.</span><span class="sxs-lookup"><span data-stu-id="8b424-214">The type that owns the property.</span></span>

  - <span data-ttu-id="8b424-215">Os metadados da propriedade.</span><span class="sxs-lookup"><span data-stu-id="8b424-215">The metadata for the property.</span></span> <span data-ttu-id="8b424-216">Os metadados contêm o valor padrão da propriedade, um <xref:System.Windows.CoerceValueCallback> e um <xref:System.Windows.PropertyChangedCallback>.</span><span class="sxs-lookup"><span data-stu-id="8b424-216">The metadata contains the property's default value, a <xref:System.Windows.CoerceValueCallback> and a <xref:System.Windows.PropertyChangedCallback>.</span></span>

- <span data-ttu-id="8b424-217">Defina uma propriedade de wrapper de CLR chamada `Value`, que é o mesmo nome usado para registrar a propriedade de dependência, implementando os acessadores `get` e `set` da propriedade.</span><span class="sxs-lookup"><span data-stu-id="8b424-217">Define a CLR wrapper property named `Value`, which is the same name that is used to register the dependency property, by implementing the property's `get` and `set` accessors.</span></span> <span data-ttu-id="8b424-218">Observe que os acessadores `get` e `set` chamam apenas <xref:System.Windows.DependencyObject.GetValue%2A> e <xref:System.Windows.DependencyObject.SetValue%2A>, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="8b424-218">Note that the `get` and `set` accessors only call <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> respectively.</span></span> <span data-ttu-id="8b424-219">É recomendável que os acessadores das propriedades de dependência não contenham lógica adicional, pois os clientes e [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] podem ignorar os acessadores e chamar <xref:System.Windows.DependencyObject.GetValue%2A> e <xref:System.Windows.DependencyObject.SetValue%2A> diretamente.</span><span class="sxs-lookup"><span data-stu-id="8b424-219">It is recommended that the accessors of dependency properties not contain additional logic because clients and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] can bypass the accessors and call <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> directly.</span></span> <span data-ttu-id="8b424-220">Por exemplo, quando uma propriedade é associada a uma fonte de dados, o acessador `set` da propriedade não é chamado.</span><span class="sxs-lookup"><span data-stu-id="8b424-220">For example, when a property is bound to a data source, the property's `set` accessor is not called.</span></span>  <span data-ttu-id="8b424-221">Em vez de adicionar lógica adicional aos acessadores get e Set, use os delegados <xref:System.Windows.ValidateValueCallback>, <xref:System.Windows.CoerceValueCallback>e <xref:System.Windows.PropertyChangedCallback> para responder ou verificar o valor quando ele for alterado.</span><span class="sxs-lookup"><span data-stu-id="8b424-221">Instead of adding additional logic to the get and set accessors, use the <xref:System.Windows.ValidateValueCallback>, <xref:System.Windows.CoerceValueCallback>, and <xref:System.Windows.PropertyChangedCallback> delegates to respond to or check the value when it changes.</span></span>  <span data-ttu-id="8b424-222">Para obter mais informações sobre esses retornos de chamada, consulte [Retornos de chamada de propriedade de dependência e validação](../advanced/dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="8b424-222">For more information on these callbacks, see [Dependency Property Callbacks and Validation](../advanced/dependency-property-callbacks-and-validation.md).</span></span>

- <span data-ttu-id="8b424-223">Defina um método para o <xref:System.Windows.CoerceValueCallback> nomeado `CoerceValue`.</span><span class="sxs-lookup"><span data-stu-id="8b424-223">Define a method for the <xref:System.Windows.CoerceValueCallback> named `CoerceValue`.</span></span> <span data-ttu-id="8b424-224">`CoerceValue` garante que `Value` seja maior ou igual a `MinValue` e menor ou igual a `MaxValue`.</span><span class="sxs-lookup"><span data-stu-id="8b424-224">`CoerceValue` ensures that `Value` is greater or equal to `MinValue` and less than or equal to `MaxValue`.</span></span>

- <span data-ttu-id="8b424-225">Defina um método para o <xref:System.Windows.PropertyChangedCallback>, chamado `OnValueChanged`.</span><span class="sxs-lookup"><span data-stu-id="8b424-225">Define a method for the <xref:System.Windows.PropertyChangedCallback>, named `OnValueChanged`.</span></span> <span data-ttu-id="8b424-226">`OnValueChanged` cria um objeto <xref:System.Windows.RoutedPropertyChangedEventArgs%601> e se prepara para gerar o evento roteado `ValueChanged`.</span><span class="sxs-lookup"><span data-stu-id="8b424-226">`OnValueChanged` creates a <xref:System.Windows.RoutedPropertyChangedEventArgs%601> object and prepares to raise the `ValueChanged` routed event.</span></span> <span data-ttu-id="8b424-227">Eventos roteados são abordados na próxima seção.</span><span class="sxs-lookup"><span data-stu-id="8b424-227">Routed events are discussed in the next section.</span></span>

[!code-csharp[UserControlNumericUpDown#DependencyProperty](~/samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDown/CSharp/NumericUpDown.xaml.cs#dependencyproperty)]
[!code-vb[UserControlNumericUpDown#DependencyProperty](~/samples/snippets/visualbasic/VS_Snippets_Wpf/UserControlNumericUpDown/visualbasic/numericupdown.xaml.vb#dependencyproperty)]

<span data-ttu-id="8b424-228">Para obter mais informações, consulte [Propriedades de dependência personalizada](../advanced/custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="8b424-228">For more information, see [Custom Dependency Properties](../advanced/custom-dependency-properties.md).</span></span>

### <a name="use-routed-events"></a><span data-ttu-id="8b424-229">Usar eventos roteados</span><span class="sxs-lookup"><span data-stu-id="8b424-229">Use Routed Events</span></span>

<span data-ttu-id="8b424-230">Assim como as propriedades de dependência estendem a noção de propriedades CLR com funcionalidade adicional, os eventos roteados estendem a noção de eventos CLR padrão.</span><span class="sxs-lookup"><span data-stu-id="8b424-230">Just as dependency properties extend the notion of CLR properties with additional functionality, routed events extend the notion of standard CLR events.</span></span> <span data-ttu-id="8b424-231">Quando você cria um novo controle do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], também é uma boa prática implementar seu evento como um evento roteado, porque um evento roteado dá suporte ao seguinte comportamento:</span><span class="sxs-lookup"><span data-stu-id="8b424-231">When you create a new [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] control, it is also good practice to implement your event as a routed event because a routed event supports the following behavior:</span></span>

- <span data-ttu-id="8b424-232">Eventos podem ser manipulados em um pai de vários controles.</span><span class="sxs-lookup"><span data-stu-id="8b424-232">Events can be handled on a parent of multiple controls.</span></span> <span data-ttu-id="8b424-233">Se um evento é um evento por propagação, um único pai na árvore de elementos pode assinar o evento.</span><span class="sxs-lookup"><span data-stu-id="8b424-233">If an event is a bubbling event, a single parent in the element tree can subscribe to the event.</span></span> <span data-ttu-id="8b424-234">Em seguida, autores de aplicativos podem usar um manipulador para responder ao evento de vários controles.</span><span class="sxs-lookup"><span data-stu-id="8b424-234">Then application authors can use one handler to respond to the event of multiple controls.</span></span> <span data-ttu-id="8b424-235">Por exemplo, se o controle for uma parte de cada item em um <xref:System.Windows.Controls.ListBox> (porque está incluído em um <xref:System.Windows.DataTemplate>), o desenvolvedor do aplicativo poderá definir o manipulador de eventos para o evento do seu controle no <xref:System.Windows.Controls.ListBox>.</span><span class="sxs-lookup"><span data-stu-id="8b424-235">For example, if your control is a part of each item in a <xref:System.Windows.Controls.ListBox> (because it is included in a <xref:System.Windows.DataTemplate>), the application developer can define the event handler for your control's event on the <xref:System.Windows.Controls.ListBox>.</span></span> <span data-ttu-id="8b424-236">Sempre que o evento ocorre em qualquer um dos controles, o manipulador de eventos é chamado.</span><span class="sxs-lookup"><span data-stu-id="8b424-236">Whenever the event occurs on any of the controls, the event handler is called.</span></span>

- <span data-ttu-id="8b424-237">Eventos roteados podem ser usados em um <xref:System.Windows.EventSetter>, o que permite que os desenvolvedores de aplicativos especifiquem o manipulador de um evento dentro de um estilo.</span><span class="sxs-lookup"><span data-stu-id="8b424-237">Routed events can be used in an <xref:System.Windows.EventSetter>, which enables application developers to specify the handler of an event within a style.</span></span>

- <span data-ttu-id="8b424-238">Eventos roteados podem ser usados em um <xref:System.Windows.EventTrigger>, o que é útil para animar propriedades usando [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b424-238">Routed events can be used in an <xref:System.Windows.EventTrigger>, which is useful for animating properties by using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="8b424-239">Para obter mais informações, consulte [Visão geral de animação](../graphics-multimedia/animation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8b424-239">For more information, see [Animation Overview](../graphics-multimedia/animation-overview.md).</span></span>

<span data-ttu-id="8b424-240">O exemplo a seguir define um evento roteado fazendo o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8b424-240">The following example defines a routed event by doing the following:</span></span>

- <span data-ttu-id="8b424-241">Defina um identificador de <xref:System.Windows.RoutedEvent> chamado `ValueChangedEvent` como um campo `public` `static` `readonly`.</span><span class="sxs-lookup"><span data-stu-id="8b424-241">Define a <xref:System.Windows.RoutedEvent> identifier named `ValueChangedEvent` as a `public` `static` `readonly` field.</span></span>

- <span data-ttu-id="8b424-242">Registre o evento roteado chamando o método <xref:System.Windows.EventManager.RegisterRoutedEvent%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8b424-242">Register the routed event by calling the <xref:System.Windows.EventManager.RegisterRoutedEvent%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="8b424-243">O exemplo especifica as seguintes informações ao chamar <xref:System.Windows.EventManager.RegisterRoutedEvent%2A>:</span><span class="sxs-lookup"><span data-stu-id="8b424-243">The example specifies the following information when it calls <xref:System.Windows.EventManager.RegisterRoutedEvent%2A>:</span></span>

  - <span data-ttu-id="8b424-244">O nome do evento é `ValueChanged`.</span><span class="sxs-lookup"><span data-stu-id="8b424-244">The name of the event is `ValueChanged`.</span></span>

  - <span data-ttu-id="8b424-245">A estratégia de roteamento é <xref:System.Windows.RoutingStrategy.Bubble>, o que significa que um manipulador de eventos na origem (o objeto que gera o evento) é chamado primeiro e os manipuladores de eventos nos elementos pai da origem são chamados sucessivamente, começando com o manipulador de eventos no mais próximo elemento pai.</span><span class="sxs-lookup"><span data-stu-id="8b424-245">The routing strategy is <xref:System.Windows.RoutingStrategy.Bubble>, which means that an event handler on the source (the object that raises the event) is called first, and then event handlers on the source's parent elements are called in succession, starting with the event handler on the closest parent element.</span></span>

  - <span data-ttu-id="8b424-246">O tipo do manipulador de eventos é <xref:System.Windows.RoutedPropertyChangedEventHandler%601>, construído com um tipo de <xref:System.Decimal>.</span><span class="sxs-lookup"><span data-stu-id="8b424-246">The type of the event handler is <xref:System.Windows.RoutedPropertyChangedEventHandler%601>, constructed with a <xref:System.Decimal> type.</span></span>

  - <span data-ttu-id="8b424-247">O tipo proprietário do evento é `NumericUpDown`.</span><span class="sxs-lookup"><span data-stu-id="8b424-247">The owning type of the event is `NumericUpDown`.</span></span>

- <span data-ttu-id="8b424-248">Declare um evento público chamado `ValueChanged` e inclua declarações de acessador de evento.</span><span class="sxs-lookup"><span data-stu-id="8b424-248">Declare a public event named `ValueChanged` and includes event-accessor declarations.</span></span> <span data-ttu-id="8b424-249">O exemplo chama <xref:System.Windows.UIElement.AddHandler%2A> na declaração de acessador `add` e <xref:System.Windows.UIElement.RemoveHandler%2A> na declaração de acessador `remove` para usar os serviços de evento [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b424-249">The example calls <xref:System.Windows.UIElement.AddHandler%2A> in the `add` accessor declaration and <xref:System.Windows.UIElement.RemoveHandler%2A> in the `remove` accessor declaration to use the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event services.</span></span>

- <span data-ttu-id="8b424-250">Criar um método virtual protegido denominado `OnValueChanged` que aciona o evento `ValueChanged`.</span><span class="sxs-lookup"><span data-stu-id="8b424-250">Create a protected, virtual method named `OnValueChanged` that raises the `ValueChanged` event.</span></span>

[!code-csharp[UserControlNumericUpDown#RoutedEvent](~/samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDown/CSharp/NumericUpDown.xaml.cs#routedevent)]
[!code-vb[UserControlNumericUpDown#RoutedEvent](~/samples/snippets/visualbasic/VS_Snippets_Wpf/UserControlNumericUpDown/visualbasic/numericupdown.xaml.vb#routedevent)]

<span data-ttu-id="8b424-251">Para obter mais informações, consulte [Visão geral de eventos roteados](../advanced/routed-events-overview.md) e [Criar um evento roteado personalizado](../advanced/how-to-create-a-custom-routed-event.md).</span><span class="sxs-lookup"><span data-stu-id="8b424-251">For more information, see [Routed Events Overview](../advanced/routed-events-overview.md) and [Create a Custom Routed Event](../advanced/how-to-create-a-custom-routed-event.md).</span></span>

### <a name="use-binding"></a><span data-ttu-id="8b424-252">Usar associação</span><span class="sxs-lookup"><span data-stu-id="8b424-252">Use Binding</span></span>

<span data-ttu-id="8b424-253">Para desacoplar a interface do usuário usada pelo controle da respectiva lógica, considere usar vinculação de dados.</span><span class="sxs-lookup"><span data-stu-id="8b424-253">To decouple the UI of your control from its logic, consider using data binding.</span></span> <span data-ttu-id="8b424-254">Isso é particularmente importante se você definir a aparência do seu controle usando um <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="8b424-254">This is particularly important if you define the appearance of your control by using a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="8b424-255">Quando você usa vinculação de dados, você pode ser capaz de, diretamente do código, eliminar a necessidade de fazer referência a partes específicas da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="8b424-255">When you use data binding, you might be able to eliminate the need to reference specific parts of the UI from the code.</span></span> <span data-ttu-id="8b424-256">É uma boa ideia evitar a referência de elementos que estão no <xref:System.Windows.Controls.ControlTemplate> porque quando o código faz referência a elementos que estão no <xref:System.Windows.Controls.ControlTemplate> e o <xref:System.Windows.Controls.ControlTemplate> é alterado, o elemento referenciado precisa ser incluído no novo <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="8b424-256">It's a good idea to avoid referencing elements that are in the <xref:System.Windows.Controls.ControlTemplate> because when the code references elements that are in the <xref:System.Windows.Controls.ControlTemplate> and the <xref:System.Windows.Controls.ControlTemplate> is changed, the referenced element needs to be included in the new <xref:System.Windows.Controls.ControlTemplate>.</span></span>

<span data-ttu-id="8b424-257">O exemplo a seguir atualiza o <xref:System.Windows.Controls.TextBlock> do controle de `NumericUpDown`, atribuindo um nome a ele e referenciando a TextBox pelo nome no código.</span><span class="sxs-lookup"><span data-stu-id="8b424-257">The following example updates the <xref:System.Windows.Controls.TextBlock> of the `NumericUpDown` control, assigning a name to it and referencing the textbox by name in code.</span></span>

[!code-xaml[UserControlNumericUpDownSimple#UIRefMarkup](~/samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDownSimple/CSharp/NumericUpDown.xaml#uirefmarkup)]

[!code-csharp[UserControlNumericUpDownSimple#UIRefCode](~/samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDownSimple/CSharp/NumericUpDown.xaml.cs#uirefcode)]
[!code-vb[UserControlNumericUpDownSimple#UIRefCode](~/samples/snippets/visualbasic/VS_Snippets_Wpf/UserControlNumericUpDownSimple/VisualBasic/NumericUpDown.xaml.vb#uirefcode)]

<span data-ttu-id="8b424-258">O exemplo a seguir usa a associação para realizar a mesma coisa.</span><span class="sxs-lookup"><span data-stu-id="8b424-258">The following example uses binding to accomplish the same thing.</span></span>

[!code-xaml[UserControlNumericUpDown#Binding](~/samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDown/CSharp/NumericUpDown.xaml#binding)]

<span data-ttu-id="8b424-259">Para obter mais informações sobre vinculação de dados, veja [Noções básicas de vinculação de dados](../../../desktop-wpf/data/data-binding-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8b424-259">For more information about data binding, see [Data Binding Overview](../../../desktop-wpf/data/data-binding-overview.md).</span></span>

### <a name="design-for-designers"></a><span data-ttu-id="8b424-260">Design para designers</span><span class="sxs-lookup"><span data-stu-id="8b424-260">Design for Designers</span></span>

<span data-ttu-id="8b424-261">Para receber suporte para controles WPF personalizados no designer do WPF para Visual Studio (por exemplo, edição de propriedade com o janela Propriedades), siga estas diretrizes.</span><span class="sxs-lookup"><span data-stu-id="8b424-261">To receive support for custom WPF controls in the WPF Designer for Visual Studio (for example, property editing with the Properties window), follow these guidelines.</span></span>  <span data-ttu-id="8b424-262">Para obter mais informações sobre como desenvolver para o designer do WPF, consulte [criar XAML no Visual Studio](/visualstudio/xaml-tools/designing-xaml-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="8b424-262">For more information on developing for the WPF Designer, see [Design XAML in Visual Studio](/visualstudio/xaml-tools/designing-xaml-in-visual-studio).</span></span>

#### <a name="dependency-properties"></a><span data-ttu-id="8b424-263">Propriedades de Dependência</span><span class="sxs-lookup"><span data-stu-id="8b424-263">Dependency Properties</span></span>

<span data-ttu-id="8b424-264">Certifique-se de implementar o CLR `get` e acessadores `set` conforme descrito anteriormente, em "usar propriedades de dependência".</span><span class="sxs-lookup"><span data-stu-id="8b424-264">Be sure to implement CLR `get` and `set` accessors as described earlier, in "Use Dependency Properties."</span></span> <span data-ttu-id="8b424-265">Designers podem usar o wrapper para detectar a presença de uma propriedade de dependência mas eles, assim como o [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] e os clientes do controle, não precisam chamar os acessadores ao obter ou definir a propriedade.</span><span class="sxs-lookup"><span data-stu-id="8b424-265">Designers may use the wrapper to detect the presence of a dependency property, but they, like [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and clients of the control, are not required to call the accessors when getting or setting the property.</span></span>

#### <a name="attached-properties"></a><span data-ttu-id="8b424-266">Propriedades anexadas</span><span class="sxs-lookup"><span data-stu-id="8b424-266">Attached Properties</span></span>

<span data-ttu-id="8b424-267">Você deve implementar propriedades anexadas nos controles personalizados usando as diretrizes a seguir:</span><span class="sxs-lookup"><span data-stu-id="8b424-267">You should implement attached properties on custom controls using the following guidelines:</span></span>

- <span data-ttu-id="8b424-268">Tenha um `public` `static` `readonly` <xref:System.Windows.DependencyProperty> do formulário *PropertyName*`Property` que estava criando usando o método <xref:System.Windows.DependencyProperty.RegisterAttached%2A>.</span><span class="sxs-lookup"><span data-stu-id="8b424-268">Have a `public` `static` `readonly` <xref:System.Windows.DependencyProperty> of the form *PropertyName*`Property` that was creating using the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method.</span></span> <span data-ttu-id="8b424-269">O nome da propriedade que é passado para <xref:System.Windows.DependencyProperty.RegisterAttached%2A> deve corresponder a *PropertyName*.</span><span class="sxs-lookup"><span data-stu-id="8b424-269">The property name that is passed to <xref:System.Windows.DependencyProperty.RegisterAttached%2A> must match *PropertyName*.</span></span>

- <span data-ttu-id="8b424-270">Implemente um par de métodos CLR `public` `static` chamados `Set`*PropertyName* e `Get`*PropertyName*.</span><span class="sxs-lookup"><span data-stu-id="8b424-270">Implement a pair of `public` `static` CLR methods named `Set`*PropertyName* and `Get`*PropertyName*.</span></span> <span data-ttu-id="8b424-271">Os dois métodos devem aceitar uma classe derivada de <xref:System.Windows.DependencyProperty> como seu primeiro argumento.</span><span class="sxs-lookup"><span data-stu-id="8b424-271">Both methods should accept a class derived from <xref:System.Windows.DependencyProperty> as their first argument.</span></span> <span data-ttu-id="8b424-272">O método `Set`*PropertyName* também aceita um argumento cujo tipo corresponde ao tipo de dados registrado para a propriedade.</span><span class="sxs-lookup"><span data-stu-id="8b424-272">The `Set`*PropertyName* method also accepts an argument whose type matches the registered data type for the property.</span></span> <span data-ttu-id="8b424-273">O método `Get`*PropertyName* deve retornar um valor do mesmo tipo.</span><span class="sxs-lookup"><span data-stu-id="8b424-273">The `Get`*PropertyName* method should return a value of the same type.</span></span> <span data-ttu-id="8b424-274">Se o método `Set`*PropertyName* estiver ausente, a propriedade será somente leitura.</span><span class="sxs-lookup"><span data-stu-id="8b424-274">If the `Set`*PropertyName* method is missing, the property is marked read-only.</span></span>

- <span data-ttu-id="8b424-275">`Set` *PropertyName* e `Get`*PropertyName* devem ser roteados diretamente para os métodos <xref:System.Windows.DependencyObject.GetValue%2A> e <xref:System.Windows.DependencyObject.SetValue%2A> no objeto de dependência de destino, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="8b424-275">`Set` *PropertyName* and `Get`*PropertyName* must route directly to the <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> methods on the target dependency object, respectively.</span></span> <span data-ttu-id="8b424-276">Designers podem acessar a propriedade anexada chamando-a por meio dos métodos wrapper ou fazendo uma chamada direta para o objeto de dependência de destino.</span><span class="sxs-lookup"><span data-stu-id="8b424-276">Designers may access the attached property by calling through the method wrapper or making a direct call to the target dependency object.</span></span>

<span data-ttu-id="8b424-277">Para obter mais informações sobre as propriedades anexadas, consulte [Visão geral das propriedades anexadas](../advanced/attached-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8b424-277">For more information on attached properties, see [Attached Properties Overview](../advanced/attached-properties-overview.md).</span></span>

### <a name="define-and-use-shared-resources"></a><span data-ttu-id="8b424-278">Definir e usar recursos compartilhados</span><span class="sxs-lookup"><span data-stu-id="8b424-278">Define and Use Shared Resources</span></span>

<span data-ttu-id="8b424-279">Você pode incluir seu controle no mesmo assembly que seu aplicativo ou então você pode empacotar seu controle em um assembly separado, que pode ser usado em vários aplicativos.</span><span class="sxs-lookup"><span data-stu-id="8b424-279">You can include your control in the same assembly as your application, or you can package your control in a separate assembly that can be used in multiple applications.</span></span> <span data-ttu-id="8b424-280">Geralmente, as informações discutidas neste tópico são aplicáveis independentemente do método que você usar.</span><span class="sxs-lookup"><span data-stu-id="8b424-280">For the most part, the information discussed in this topic applies regardless of the method you use.</span></span>  <span data-ttu-id="8b424-281">No entanto, há uma diferença importante a observar.</span><span class="sxs-lookup"><span data-stu-id="8b424-281">There is one difference worth noting, however.</span></span>  <span data-ttu-id="8b424-282">Quando você coloca um controle no mesmo assembly que um aplicativo, você fica livre para adicionar recursos globais ao arquivo App.xaml.</span><span class="sxs-lookup"><span data-stu-id="8b424-282">When you put a control in the same assembly as an application, you are free to add global resources to the App.xaml file.</span></span> <span data-ttu-id="8b424-283">Mas um assembly que contém apenas controles não tem um objeto <xref:System.Windows.Application> associado a ele, portanto, um arquivo app. XAML não está disponível.</span><span class="sxs-lookup"><span data-stu-id="8b424-283">But an assembly that contains only controls does not have an <xref:System.Windows.Application> object associated with it, so an App.xaml file is not available.</span></span>

<span data-ttu-id="8b424-284">Quando um aplicativo procura um recurso, ele procura em três níveis na seguinte ordem:</span><span class="sxs-lookup"><span data-stu-id="8b424-284">When an application looks for a resource, it looks at three levels in the following order:</span></span>

1. <span data-ttu-id="8b424-285">O nível de elemento.</span><span class="sxs-lookup"><span data-stu-id="8b424-285">The element level.</span></span>

   <span data-ttu-id="8b424-286">O sistema começa com o elemento que referencia o recurso e pesquisa por recursos do pai lógico e assim por diante até o elemento raiz ser alcançado.</span><span class="sxs-lookup"><span data-stu-id="8b424-286">The system starts with the element that references the resource and then searches resources of the logical parent and so forth until the root element is reached.</span></span>

2. <span data-ttu-id="8b424-287">O nível de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8b424-287">The application level.</span></span>

   <span data-ttu-id="8b424-288">Recursos definidos pelo objeto <xref:System.Windows.Application>.</span><span class="sxs-lookup"><span data-stu-id="8b424-288">Resources defined by the <xref:System.Windows.Application> object.</span></span>

3. <span data-ttu-id="8b424-289">O nível de tema.</span><span class="sxs-lookup"><span data-stu-id="8b424-289">The theme level.</span></span>

   <span data-ttu-id="8b424-290">Dicionários no nível de tema são armazenados em uma subpasta denominada Themes.</span><span class="sxs-lookup"><span data-stu-id="8b424-290">Theme-level dictionaries are stored in a subfolder named Themes.</span></span>  <span data-ttu-id="8b424-291">Os arquivos na pasta Themes correspondem aos temas.</span><span class="sxs-lookup"><span data-stu-id="8b424-291">The files in the Themes folder correspond to themes.</span></span>  <span data-ttu-id="8b424-292">Por exemplo, você pode ter Aero.NormalColor.xaml, Luna.NormalColor.xaml, Royale.NormalColor.xaml e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="8b424-292">For example, you might have Aero.NormalColor.xaml, Luna.NormalColor.xaml, Royale.NormalColor.xaml, and so on.</span></span>  <span data-ttu-id="8b424-293">Você também pode ter um arquivo chamado generic.xaml.</span><span class="sxs-lookup"><span data-stu-id="8b424-293">You can also have a file named generic.xaml.</span></span>  <span data-ttu-id="8b424-294">Quando o sistema procura por um recurso no nível de temas, ele primeiro procura por esse recurso no arquivo específico do tema e, em seguida, procura por ele em generic.xaml.</span><span class="sxs-lookup"><span data-stu-id="8b424-294">When the system looks for a resource at the themes level, it first looks for it in the theme-specific file and then looks for it in generic.xaml.</span></span>

<span data-ttu-id="8b424-295">Quando o controle está em um assembly separado do aplicativo, você deve colocar os recursos globais no nível de elemento ou no nível de tema.</span><span class="sxs-lookup"><span data-stu-id="8b424-295">When your control is in an assembly that is separate from the application, you must put your global resources at the element level or at the theme level.</span></span> <span data-ttu-id="8b424-296">Os dois métodos têm suas vantagens.</span><span class="sxs-lookup"><span data-stu-id="8b424-296">Both methods have their advantages.</span></span>

#### <a name="defining-resources-at-the-element-level"></a><span data-ttu-id="8b424-297">Definir recursos no nível de elemento</span><span class="sxs-lookup"><span data-stu-id="8b424-297">Defining Resources at the Element Level</span></span>

<span data-ttu-id="8b424-298">Você pode definir recursos compartilhados no nível de elemento criando um dicionário de recursos personalizados e mesclando-o com o dicionário de recursos do controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-298">You can define shared resources at the element level by creating a custom resource dictionary and merging it with your control’s resource dictionary.</span></span>  <span data-ttu-id="8b424-299">Ao usar esse método, você pode nomear o arquivo de recurso da maneira que quiser, sendo que tais arquivos podem estar na mesma pasta que os controles.</span><span class="sxs-lookup"><span data-stu-id="8b424-299">When you use this method, you can name your resource file anything you want, and it can be in the same folder as your controls.</span></span> <span data-ttu-id="8b424-300">Recursos no nível de elemento também podem usar cadeias de caracteres simples como chaves.</span><span class="sxs-lookup"><span data-stu-id="8b424-300">Resources at the element level can also use simple strings as keys.</span></span> <span data-ttu-id="8b424-301">O exemplo a seguir cria um arquivo de recurso <xref:System.Windows.Media.LinearGradientBrush> chamado Dictionary1. XAML.</span><span class="sxs-lookup"><span data-stu-id="8b424-301">The following example creates a <xref:System.Windows.Media.LinearGradientBrush> resource file named Dictionary1.xaml.</span></span>

[!code-xaml[SharedResources#1](~/samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/Dictionary1.xaml#1)]

<span data-ttu-id="8b424-302">Depois de ter definido seu dicionário, você precisa mesclá-lo com o dicionário de recursos do controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-302">Once you have defined your dictionary, you need to merge it with your control's resource dictionary.</span></span>  <span data-ttu-id="8b424-303">Você pode fazer isso usando [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ou código.</span><span class="sxs-lookup"><span data-stu-id="8b424-303">You can do this by using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] or code.</span></span>

<span data-ttu-id="8b424-304">O exemplo a seguir mescla um dicionário de recursos usando [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b424-304">The following example merges a resource dictionary by using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>

[!code-xaml[SharedResources#2](~/samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/ShapeResizer.xaml#2)]

<span data-ttu-id="8b424-305">A desvantagem dessa abordagem é que um objeto <xref:System.Windows.ResourceDictionary> é criado cada vez que você faz referência a ele.</span><span class="sxs-lookup"><span data-stu-id="8b424-305">The disadvantage to this approach is that a <xref:System.Windows.ResourceDictionary> object is created each time you reference it.</span></span>  <span data-ttu-id="8b424-306">Por exemplo, se você tiver 10 controles personalizados em sua biblioteca e mesclar os dicionários de recursos compartilhados para cada controle usando XAML, você criará 10 objetos de <xref:System.Windows.ResourceDictionary> idênticos.</span><span class="sxs-lookup"><span data-stu-id="8b424-306">For example, if you have 10 custom controls in your library and merge the shared resource dictionaries for each control by using XAML, you create 10 identical <xref:System.Windows.ResourceDictionary> objects.</span></span>  <span data-ttu-id="8b424-307">Você pode evitar isso criando uma classe estática que mescla os recursos no código e retorna o <xref:System.Windows.ResourceDictionary>resultante.</span><span class="sxs-lookup"><span data-stu-id="8b424-307">You can avoid this by creating a static class that merges the resources in code and returns the resulting <xref:System.Windows.ResourceDictionary>.</span></span>

<span data-ttu-id="8b424-308">O exemplo a seguir cria uma classe que retorna um <xref:System.Windows.ResourceDictionary>compartilhado.</span><span class="sxs-lookup"><span data-stu-id="8b424-308">The following example creates a class that returns a shared <xref:System.Windows.ResourceDictionary>.</span></span>

[!code-csharp[SharedResources#3](~/samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/SharedDictionaryManager.cs#3)]

<span data-ttu-id="8b424-309">O exemplo a seguir mescla o recurso compartilhado com os recursos de um controle personalizado no construtor do controle antes de chamar `InitializeComponent`.</span><span class="sxs-lookup"><span data-stu-id="8b424-309">The following example merges the shared resource with the resources of a custom control in the control's constructor before it calls `InitializeComponent`.</span></span>  <span data-ttu-id="8b424-310">Como o `SharedDictionaryManager.SharedDictionary` é uma propriedade estática, a <xref:System.Windows.ResourceDictionary> é criada apenas uma vez.</span><span class="sxs-lookup"><span data-stu-id="8b424-310">Because the `SharedDictionaryManager.SharedDictionary` is a static property, the <xref:System.Windows.ResourceDictionary> is created only once.</span></span> <span data-ttu-id="8b424-311">Já que o dicionário de recursos foi mesclado antes de `InitializeComponent` ser chamado, os recursos estão disponíveis para o controle no seu arquivo [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b424-311">Because the resource dictionary was merged before `InitializeComponent` was called, the resources are available to the control in its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span>

[!code-csharp[SharedResources#4](~/samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/ShapeResizer.xaml.cs#4)]

#### <a name="defining-resources-at-the-theme-level"></a><span data-ttu-id="8b424-312">Definir recursos no nível de tema</span><span class="sxs-lookup"><span data-stu-id="8b424-312">Defining Resources at the Theme Level</span></span>

[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="8b424-313">permite que você crie recursos para diferentes temas do Windows.</span><span class="sxs-lookup"><span data-stu-id="8b424-313">enables you to create resources for different Windows themes.</span></span>  <span data-ttu-id="8b424-314">Como um autor de controle, você pode definir um recurso para um tema específico para alterar a aparência do controle dependendo de qual tema está em uso.</span><span class="sxs-lookup"><span data-stu-id="8b424-314">As a control author, you can define a resource for a specific theme to change your control's appearance depending on what theme is in use.</span></span> <span data-ttu-id="8b424-315">Por exemplo, a aparência de um <xref:System.Windows.Controls.Button> no tema clássico do Windows (o tema padrão do Windows 2000) difere de um <xref:System.Windows.Controls.Button> no tema do Windows Luna (o tema padrão do Windows XP), pois o <xref:System.Windows.Controls.Button> usa um <xref:System.Windows.Controls.ControlTemplate> diferente para cada tema.</span><span class="sxs-lookup"><span data-stu-id="8b424-315">For example, the appearance of a <xref:System.Windows.Controls.Button> in the Windows Classic theme (the default theme for Windows 2000) differs from a <xref:System.Windows.Controls.Button> in the Windows Luna theme (the default theme for Windows XP) because the <xref:System.Windows.Controls.Button> uses a different <xref:System.Windows.Controls.ControlTemplate> for each theme.</span></span>

<span data-ttu-id="8b424-316">Recursos específicos de um tema são mantidos em um dicionário de recursos com um nome de arquivo específico.</span><span class="sxs-lookup"><span data-stu-id="8b424-316">Resources that are specific to a theme are kept in a resource dictionary with a specific file name.</span></span> <span data-ttu-id="8b424-317">Esses arquivos devem estar em uma pasta chamada `Themes`, que é uma subpasta da pasta que contém o controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-317">These files must be in a folder named `Themes` that is a subfolder of the folder that contains the control.</span></span> <span data-ttu-id="8b424-318">A tabela a seguir lista os arquivos de dicionário de recursos e o tema que está associado a cada arquivo:</span><span class="sxs-lookup"><span data-stu-id="8b424-318">The following table lists the resource dictionary files and the theme that is associated with each file:</span></span>

|<span data-ttu-id="8b424-319">Nome do arquivo do dicionário de recursos</span><span class="sxs-lookup"><span data-stu-id="8b424-319">Resource dictionary file name</span></span>|<span data-ttu-id="8b424-320">Tema do Windows</span><span class="sxs-lookup"><span data-stu-id="8b424-320">Windows theme</span></span>|
|-----------------------------------|-------------------|
|`Classic.xaml`|<span data-ttu-id="8b424-321">Aparência do Tema Clássico do Windows 9x/2000 no Windows XP</span><span class="sxs-lookup"><span data-stu-id="8b424-321">Classic Windows 9x/2000 look on Windows XP</span></span>|
|`Luna.NormalColor.xaml`|<span data-ttu-id="8b424-322">Tema azul padrão no Windows XP</span><span class="sxs-lookup"><span data-stu-id="8b424-322">Default blue theme on Windows XP</span></span>|
|`Luna.Homestead.xaml`|<span data-ttu-id="8b424-323">Tema verde-oliva no Windows XP</span><span class="sxs-lookup"><span data-stu-id="8b424-323">Olive theme on Windows XP</span></span>|
|`Luna.Metallic.xaml`|<span data-ttu-id="8b424-324">Tema prateado no Windows XP</span><span class="sxs-lookup"><span data-stu-id="8b424-324">Silver theme on Windows XP</span></span>|
|`Royale.NormalColor.xaml`|<span data-ttu-id="8b424-325">Tema padrão no Windows XP Media Center Edition</span><span class="sxs-lookup"><span data-stu-id="8b424-325">Default theme on Windows XP Media Center Edition</span></span>|
|`Aero.NormalColor.xaml`|<span data-ttu-id="8b424-326">Tema padrão no Windows Vista</span><span class="sxs-lookup"><span data-stu-id="8b424-326">Default theme on Windows Vista</span></span>|

<span data-ttu-id="8b424-327">Você não precisa definir um recurso para cada tema.</span><span class="sxs-lookup"><span data-stu-id="8b424-327">You do not need to define a resource for every theme.</span></span> <span data-ttu-id="8b424-328">Se um recurso não está definido para um tema específico, o controle verifica `Classic.xaml` em busca do recurso.</span><span class="sxs-lookup"><span data-stu-id="8b424-328">If a resource is not defined for a specific theme, then the control checks `Classic.xaml` for the resource.</span></span> <span data-ttu-id="8b424-329">Se o recurso não está definido no arquivo que corresponde ao tema atual nem em `Classic.xaml`, o controle usa o recurso genérico, que está em um arquivo de dicionário de recursos chamado `generic.xaml`.</span><span class="sxs-lookup"><span data-stu-id="8b424-329">If the resource is not defined in the file that corresponds to the current theme or in `Classic.xaml`, the control uses the generic resource, which is in a resource dictionary file named `generic.xaml`.</span></span>  <span data-ttu-id="8b424-330">O arquivo `generic.xaml` está localizado na mesma pasta que os arquivos de dicionário de recursos específicos do tema.</span><span class="sxs-lookup"><span data-stu-id="8b424-330">The `generic.xaml` file is located in the same folder as the theme-specific resource dictionary files.</span></span> <span data-ttu-id="8b424-331">Embora `generic.xaml` não corresponda a um tema específico do Windows, ele ainda é um dicionário de nível de tema.</span><span class="sxs-lookup"><span data-stu-id="8b424-331">Although `generic.xaml` does not correspond to a specific Windows theme, it is still a theme-level dictionary.</span></span>

<span data-ttu-id="8b424-332">O [C#](https://github.com/dotnet/samples/tree/master/snippets/csharp/VS_Snippets_Wpf/CustomControlNumericUpDown/CSharp) exemplo ou [Visual Basic](https://github.com/dotnet/samples/tree/master/snippets/visualbasic/VS_Snippets_Wpf/CustomControlNumericUpDown/visualbasic) o controle personalizado NumericUpDown com suporte de automação de interface do usuário e tema contém dois dicionários de recurso para o controle de `NumericUpDown`: um está em Generic. XAML e o outro está em Luna. NormalColor. XAML.</span><span class="sxs-lookup"><span data-stu-id="8b424-332">The [C#](https://github.com/dotnet/samples/tree/master/snippets/csharp/VS_Snippets_Wpf/CustomControlNumericUpDown/CSharp) or [Visual Basic](https://github.com/dotnet/samples/tree/master/snippets/visualbasic/VS_Snippets_Wpf/CustomControlNumericUpDown/visualbasic) NumericUpDown custom control with theme and UI automation support sample contains two resource dictionaries for the `NumericUpDown` control: one is in generic.xaml, and the other is in Luna.NormalColor.xaml.</span></span> 

<span data-ttu-id="8b424-333">Ao colocar um <xref:System.Windows.Controls.ControlTemplate> em qualquer um dos arquivos de dicionário de recursos específicos do tema, você deve criar um construtor estático para seu controle e chamar o método <xref:System.Windows.DependencyProperty.OverrideMetadata%28System.Type%2CSystem.Windows.PropertyMetadata%29> no <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>, conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="8b424-333">When you put a <xref:System.Windows.Controls.ControlTemplate> in any of the theme-specific resource dictionary files, you must create a static constructor for your control and call the <xref:System.Windows.DependencyProperty.OverrideMetadata%28System.Type%2CSystem.Windows.PropertyMetadata%29> method on the <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>, as shown in the following example.</span></span>

[!code-csharp[CustomControlNumericUpDownOneProject#StaticConstructor](~/samples/snippets/csharp/VS_Snippets_Wpf/CustomControlNumericUpDownOneProject/CSharp/NumericUpDown.cs#staticconstructor)]
[!code-vb[CustomControlNumericUpDownOneProject#StaticConstructor](~/samples/snippets/visualbasic/VS_Snippets_Wpf/CustomControlNumericUpDownOneProject/visualbasic/numericupdown.vb#staticconstructor)]

##### <a name="defining-and-referencing-keys-for-theme-resources"></a><span data-ttu-id="8b424-334">Definir e referenciar chaves para recursos de tema</span><span class="sxs-lookup"><span data-stu-id="8b424-334">Defining and Referencing Keys for Theme Resources</span></span>

<span data-ttu-id="8b424-335">Quando você definir um recurso no nível de elemento, você poderá atribuir uma cadeia de caracteres como sua chave e acessar o recurso pela cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="8b424-335">When you define a resource at the element level, you can assign a string as its key and access the resource via the string.</span></span> <span data-ttu-id="8b424-336">Ao definir um recurso no nível do tema, você deve usar um <xref:System.Windows.ComponentResourceKey> como a chave.</span><span class="sxs-lookup"><span data-stu-id="8b424-336">When you define a resource at the theme level, you must use a <xref:System.Windows.ComponentResourceKey> as the key.</span></span>  <span data-ttu-id="8b424-337">O exemplo a seguir define um recurso em generic.xaml.</span><span class="sxs-lookup"><span data-stu-id="8b424-337">The following example defines a resource in generic.xaml.</span></span>

[!code-xaml[ThemeResourcesControlLibrary#5](~/samples/snippets/csharp/VS_Snippets_Wpf/ThemeResourcesControlLibrary/CS/Themes/generic.xaml#5)]

<span data-ttu-id="8b424-338">O exemplo a seguir faz referência ao recurso especificando o <xref:System.Windows.ComponentResourceKey> como a chave.</span><span class="sxs-lookup"><span data-stu-id="8b424-338">The following example references the resource by specifying the <xref:System.Windows.ComponentResourceKey> as the key.</span></span>

[!code-xaml[ThemeResourcesControlLibrary#6](~/samples/snippets/csharp/VS_Snippets_Wpf/ThemeResourcesControlLibrary/CS/NumericUpDown.xaml#6)]

##### <a name="specifying-the-location-of-theme-resources"></a><span data-ttu-id="8b424-339">Especificando o local dos recursos de tema</span><span class="sxs-lookup"><span data-stu-id="8b424-339">Specifying the Location of Theme Resources</span></span>

<span data-ttu-id="8b424-340">Para localizar os recursos de um controle, o aplicativo host precisa ter certeza de que o assembly contém recursos específicos do controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-340">To find the resources for a control, the hosting application needs to know that the assembly contains control-specific resources.</span></span> <span data-ttu-id="8b424-341">Você pode fazer isso adicionando o <xref:System.Windows.ThemeInfoAttribute> ao assembly que contém o controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-341">You can accomplish that by adding the <xref:System.Windows.ThemeInfoAttribute> to the assembly that contains the control.</span></span> <span data-ttu-id="8b424-342">O <xref:System.Windows.ThemeInfoAttribute> tem uma propriedade <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> que especifica o local dos recursos genéricos e uma propriedade <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> que especifica o local dos recursos específicos do tema.</span><span class="sxs-lookup"><span data-stu-id="8b424-342">The <xref:System.Windows.ThemeInfoAttribute> has a <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> property that specifies the location of generic resources, and a <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> property that specifies the location of the theme-specific resources.</span></span>

<span data-ttu-id="8b424-343">O exemplo a seguir define as propriedades <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> e <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> como <xref:System.Windows.ResourceDictionaryLocation.SourceAssembly>para especificar que os recursos genéricos e específicos do tema estão no mesmo assembly que o controle.</span><span class="sxs-lookup"><span data-stu-id="8b424-343">The following example sets the <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> and <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> properties to <xref:System.Windows.ResourceDictionaryLocation.SourceAssembly>, to specify that the generic and theme-specific resources are in the same assembly as the control.</span></span>

[!code-csharp[CustomControlNumericUpDown#ThemesSection](~/samples/snippets/csharp/VS_Snippets_Wpf/CustomControlNumericUpDown/CSharp/CustomControlLibrary/Properties/AssemblyInfo.cs#themessection)]
[!code-vb[CustomControlNumericUpDown#ThemesSection](~/samples/snippets/visualbasic/VS_Snippets_Wpf/CustomControlNumericUpDown/visualbasic/customcontrollibrary/my project/assemblyinfo.vb#themessection)]

## <a name="see-also"></a><span data-ttu-id="8b424-344">Consulte também</span><span class="sxs-lookup"><span data-stu-id="8b424-344">See also</span></span>

- [<span data-ttu-id="8b424-345">Criar o XAML no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="8b424-345">Design XAML in Visual Studio</span></span>](/visualstudio/xaml-tools/designing-xaml-in-visual-studio)
- [<span data-ttu-id="8b424-346">URIs "pack://" no WPF</span><span class="sxs-lookup"><span data-stu-id="8b424-346">Pack URIs in WPF</span></span>](../app-development/pack-uris-in-wpf.md)
- [<span data-ttu-id="8b424-347">Personalização do controle</span><span class="sxs-lookup"><span data-stu-id="8b424-347">Control Customization</span></span>](control-customization.md)
