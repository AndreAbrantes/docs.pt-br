---
title: Segurança de propriedade da dependência
ms.date: 03/30/2017
helpviewer_keywords:
- wrappers [WPF], access
- wrappers [WPF], security
- dependency properties [WPF], security
- security [WPF], wrappers
- validation [WPF], dependency properties
- dependency properties [WPF], access
- security [WPF], dependency properties
ms.assetid: d10150ec-90c5-4571-8d35-84bafa2429a4
ms.openlocfilehash: f5640b348ccd68819052f58756489489371862d0
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79186393"
---
# <a name="dependency-property-security"></a><span data-ttu-id="c0acd-102">Segurança de propriedade da dependência</span><span class="sxs-lookup"><span data-stu-id="c0acd-102">Dependency Property Security</span></span>
<span data-ttu-id="c0acd-103">As propriedades da dependência geralmente devem ser consideradas como propriedades públicas.</span><span class="sxs-lookup"><span data-stu-id="c0acd-103">Dependency properties should generally be considered to be public properties.</span></span> <span data-ttu-id="c0acd-104">A natureza do sistema de propriedades [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] impede que a capacidade de dar garantias de segurança sobre um valor da propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="c0acd-104">The nature of the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system prevents the ability to make security guarantees about a dependency property value.</span></span>  

<a name="AccessSecurity"></a>
## <a name="access-and-security-of-wrappers-and-dependency-properties"></a><span data-ttu-id="c0acd-105">Acesso e segurança de Wrappers e propriedades de dependência</span><span class="sxs-lookup"><span data-stu-id="c0acd-105">Access and Security of Wrappers and Dependency Properties</span></span>  
 <span data-ttu-id="c0acd-106">Normalmente, as propriedades de dependência são implementadas juntamente com propriedades de tempo de execução de linguagem comum (CLR) que simplificam a obtenção ou configuração da propriedade a partir de uma instância.</span><span class="sxs-lookup"><span data-stu-id="c0acd-106">Typically, dependency properties are implemented along with "wrapper" common language runtime (CLR) properties that simplify getting or setting the property from an instance.</span></span> <span data-ttu-id="c0acd-107">Mas os invólucros são realmente apenas <xref:System.Windows.DependencyObject.GetValue%2A> <xref:System.Windows.DependencyObject.SetValue%2A> métodos de conveniência que implementam as chamadas subjacentes e estáticas que são usadas ao interagir com propriedades de dependência.</span><span class="sxs-lookup"><span data-stu-id="c0acd-107">But the wrappers are really just convenience methods that implement the underlying <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> static calls that are used when interacting with dependency properties.</span></span> <span data-ttu-id="c0acd-108">Pensando nisso de outra forma, as propriedades são expostas como propriedades comuns de tempo de execução (CLR) que por acaso são apoiadas por uma propriedade de dependência e não por um campo privado.</span><span class="sxs-lookup"><span data-stu-id="c0acd-108">Thinking of it in another way, the properties are exposed as common language runtime (CLR) properties that happen to be backed by a dependency property rather than by a private field.</span></span> <span data-ttu-id="c0acd-109">Mecanismos de segurança aplicados aos wrappers não são paralelo ao comportamento do sistema de propriedade e acesso da propriedade de dependência subjacente.</span><span class="sxs-lookup"><span data-stu-id="c0acd-109">Security mechanisms applied to the wrappers do not parallel the property system behavior and access of the underlying dependency property.</span></span> <span data-ttu-id="c0acd-110">Colocar uma demanda de segurança no invólucro só impedirá o <xref:System.Windows.DependencyObject.GetValue%2A> <xref:System.Windows.DependencyObject.SetValue%2A>uso do método de conveniência, mas não impedirá chamadas ou .</span><span class="sxs-lookup"><span data-stu-id="c0acd-110">Placing a security demand on the wrapper will only prevent the usage of the convenience method but will not prevent calls to <xref:System.Windows.DependencyObject.GetValue%2A> or <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span> <span data-ttu-id="c0acd-111">Da mesma forma, impor um nível de acesso protegido ou privado aos wrappers não oferece nenhuma segurança efetiva.</span><span class="sxs-lookup"><span data-stu-id="c0acd-111">Similarly, placing protected or private access level on the wrappers does not provide any effective security.</span></span>  
  
 <span data-ttu-id="c0acd-112">Se você está escrevendo suas próprias propriedades de dependência, <xref:System.Windows.DependencyProperty> você deve declarar os invólucros e o campo identificador como membros públicos, para que os chamadores não obtenham informações enganosas sobre o verdadeiro nível de acesso dessa propriedade (devido à sua loja ser implementada como uma propriedade de dependência).</span><span class="sxs-lookup"><span data-stu-id="c0acd-112">If you are writing your own dependency properties, you should declare the wrappers and the <xref:System.Windows.DependencyProperty> identifier field as public members, so that callers do not get misleading information about the true access level of that property (because of its store being implemented as a dependency property).</span></span>  
  
 <span data-ttu-id="c0acd-113">Para uma propriedade de dependência personalizada, você pode registrar sua propriedade como uma propriedade de dependência somente leitura, e isso fornece um <xref:System.Windows.DependencyPropertyKey> meio eficaz de impedir que um imóvel seja definido por qualquer pessoa que não tenha uma referência à propriedade.</span><span class="sxs-lookup"><span data-stu-id="c0acd-113">For a custom dependency property, you can register your property as a read-only dependency property, and this does provide an effective means of preventing a property being set by anyone that does not hold a reference to the <xref:System.Windows.DependencyPropertyKey> for that property.</span></span> <span data-ttu-id="c0acd-114">Para obter mais informações, consulte [Propriedades de dependência somente leitura](read-only-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="c0acd-114">For more information, see [Read-Only Dependency Properties](read-only-dependency-properties.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c0acd-115">Declarar um <xref:System.Windows.DependencyProperty> campo identificador privado não é proibido, e pode ser usado para ajudar a reduzir o espaço de nome imediatamente exposto de uma classe personalizada, mas tal propriedade não deve ser considerada "privada" no mesmo sentido que as definições de linguagem comum (CLR) definem esse nível de acesso, por razões descritas na próxima seção.</span><span class="sxs-lookup"><span data-stu-id="c0acd-115">Declaring a <xref:System.Windows.DependencyProperty> identifier field private is not forbidden, and it can conceivably be used to help reduce the immediately exposed namespace of a custom class, but such a property should not be considered "private" in the same sense as the common language runtime (CLR) language definitions define that access level, for reasons described in the next section.</span></span>  
  
<a name="PropertySystemExposure"></a>
## <a name="property-system-exposure-of-dependency-properties"></a><span data-ttu-id="c0acd-116">Exposição do sistema de propriedades das propriedades de dependência</span><span class="sxs-lookup"><span data-stu-id="c0acd-116">Property System Exposure of Dependency Properties</span></span>  
 <span data-ttu-id="c0acd-117">Não é geralmente útil, e é potencialmente <xref:System.Windows.DependencyProperty> enganoso, declarar um como qualquer nível de acesso que não seja público.</span><span class="sxs-lookup"><span data-stu-id="c0acd-117">It is not generally useful, and it is potentially misleading, to declare a <xref:System.Windows.DependencyProperty> as any access level other than public.</span></span> <span data-ttu-id="c0acd-118">Essa configuração de nível de acesso só impede que alguém possa obter uma referência à instância da classe declarante.</span><span class="sxs-lookup"><span data-stu-id="c0acd-118">That access level setting only prevents someone from being able to get a reference to the instance from the declaring class.</span></span> <span data-ttu-id="c0acd-119">Mas há vários aspectos do sistema de <xref:System.Windows.DependencyProperty> propriedade que retornarão a como meio de identificar uma propriedade específica como ela existe em uma instância <xref:System.Windows.DependencyObject.SetValue%2A> de uma classe ou uma instância de classe derivada, e este identificador ainda é utilizável em uma chamada mesmo que o identificador estático original seja declarado como não público.</span><span class="sxs-lookup"><span data-stu-id="c0acd-119">But there are several aspects of the property system that will return a <xref:System.Windows.DependencyProperty> as the means of identifying a particular property as it exists on an instance of a class or a derived class instance, and this identifier is still usable in a <xref:System.Windows.DependencyObject.SetValue%2A> call even if the original static identifier is declared as nonpublic.</span></span> <span data-ttu-id="c0acd-120">Além <xref:System.Windows.DependencyObject.OnPropertyChanged%2A> disso, os métodos virtuais recebem informações de qualquer propriedade de dependência existente que alterou o valor.</span><span class="sxs-lookup"><span data-stu-id="c0acd-120">Also, <xref:System.Windows.DependencyObject.OnPropertyChanged%2A> virtual methods receive information of any existing dependency property that changed value.</span></span> <span data-ttu-id="c0acd-121">Além disso, <xref:System.Windows.DependencyObject.GetLocalValueEnumerator%2A> o método retorna identificadores para qualquer propriedade em instâncias com um valor definido localmente.</span><span class="sxs-lookup"><span data-stu-id="c0acd-121">In addition, the <xref:System.Windows.DependencyObject.GetLocalValueEnumerator%2A> method returns identifiers for any property on instances with a locally set value.</span></span>  
  
### <a name="validation-and-security"></a><span data-ttu-id="c0acd-122">Validação e segurança</span><span class="sxs-lookup"><span data-stu-id="c0acd-122">Validation and Security</span></span>  
 <span data-ttu-id="c0acd-123">Aplicar uma demanda <xref:System.Windows.DependencyProperty.ValidateValueCallback%2A> a um e esperar que a falha de validação em uma falha de demanda para impedir que uma propriedade seja definida não é um mecanismo de segurança adequado.</span><span class="sxs-lookup"><span data-stu-id="c0acd-123">Applying a demand to a <xref:System.Windows.DependencyProperty.ValidateValueCallback%2A> and expecting the validation failure on a demand failure to prevent a property from being set is not an adequate security mechanism.</span></span> <span data-ttu-id="c0acd-124">A invalidação de valor <xref:System.Windows.DependencyProperty.ValidateValueCallback%2A> definido aplicada também pode ser suprimida por chamadores mal-intencionados, se esses chamadores estiverem operando dentro do domínio do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c0acd-124">Set-value invalidation enforced through <xref:System.Windows.DependencyProperty.ValidateValueCallback%2A> could also be suppressed by malicious callers, if those callers are operating within the application domain.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c0acd-125">Confira também</span><span class="sxs-lookup"><span data-stu-id="c0acd-125">See also</span></span>

- [<span data-ttu-id="c0acd-126">Propriedades de dependência personalizada</span><span class="sxs-lookup"><span data-stu-id="c0acd-126">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
