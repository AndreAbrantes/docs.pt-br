---
title: Árvores no WPF
ms.date: 03/30/2017
helpviewer_keywords:
- logical tree [WPF]
- element tree [WPF]
- visual tree [WPF]
ms.assetid: e83f25e5-d66b-4fc7-92d2-50130c9a6649
ms.openlocfilehash: 1b1763f2fcad60da757a3d6ff23dc289e7506ead
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/22/2019
ms.locfileid: "69966102"
---
# <a name="trees-in-wpf"></a><span data-ttu-id="5f727-102">Árvores no WPF</span><span class="sxs-lookup"><span data-stu-id="5f727-102">Trees in WPF</span></span>
<span data-ttu-id="5f727-103">Em muitas tecnologias, elementos e componentes são organizados em uma estrutura de árvore em que os desenvolvedores manipulam diretamente os nós de objeto na árvore para afetar a renderização ou o comportamento de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5f727-103">In many technologies, elements and components are organized in a tree structure where developers directly manipulate the object nodes in the tree to affect the rendering or behavior of an application.</span></span> <span data-ttu-id="5f727-104">O [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] também usa várias metáforas de estrutura de árvore para definir relações entre elementos do programa.</span><span class="sxs-lookup"><span data-stu-id="5f727-104">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] also uses several tree structure metaphors to define relationships between program elements.</span></span> <span data-ttu-id="5f727-105">Em geral, os desenvolvedores de WPF conseguem criar um aplicativo em código ou definir partes do aplicativo em XAML enquanto pensam conceitualmente sobre a metáfora da árvore de objeto, mas chamarão uma API específica ou usarão marcação específica para fazer isso em vez de alguma API geral de manipulação de árvore de objeto, como a que poderia ser usada em XML DOM.</span><span class="sxs-lookup"><span data-stu-id="5f727-105">For the most part WPF developers can create an application in code or define portions of the application in XAML while thinking conceptually about the object tree metaphor, but will be calling specific API or using specific markup to do so rather than some general object tree manipulation API such as you might use in XML DOM.</span></span> <span data-ttu-id="5f727-106">O WPF expõe duas classes auxiliares que fornecem uma exibição <xref:System.Windows.LogicalTreeHelper> de metáfora de árvore e. <xref:System.Windows.Media.VisualTreeHelper></span><span class="sxs-lookup"><span data-stu-id="5f727-106">WPF exposes two helper classes that provide a tree metaphor view, <xref:System.Windows.LogicalTreeHelper> and <xref:System.Windows.Media.VisualTreeHelper>.</span></span> <span data-ttu-id="5f727-107">Os termos “árvore visual” e “árvore lógica” também são utilizados na documentação do WPF porque essas mesmas árvores são úteis para entender o comportamento de alguns recursos principais do WPF.</span><span class="sxs-lookup"><span data-stu-id="5f727-107">The terms visual tree and logical tree are also used in the WPF documentation because these same trees are useful for understanding the behavior of certain key WPF features.</span></span> <span data-ttu-id="5f727-108">Este tópico define o que a árvore visual e a árvore lógica representam, discute como essas árvores se relacionam a um conceito geral de árvore <xref:System.Windows.LogicalTreeHelper> de <xref:System.Windows.Media.VisualTreeHelper>objetos e apresenta e s.</span><span class="sxs-lookup"><span data-stu-id="5f727-108">This topic defines what the visual tree and logical tree represent, discusses how such trees relate to an overall object tree concept, and introduces <xref:System.Windows.LogicalTreeHelper> and <xref:System.Windows.Media.VisualTreeHelper>s.</span></span>  

<a name="element_tree"></a>   
## <a name="trees-in-wpf"></a><span data-ttu-id="5f727-109">Árvores no WPF</span><span class="sxs-lookup"><span data-stu-id="5f727-109">Trees in WPF</span></span>  
 <span data-ttu-id="5f727-110">A estrutura de árvore mais completa no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] é a árvore de objetos.</span><span class="sxs-lookup"><span data-stu-id="5f727-110">The most complete tree structure in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is the object tree.</span></span> <span data-ttu-id="5f727-111">Se você definir uma página de aplicativo no [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] e, em seguida, carregar o [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], a estrutura de árvore será criada com base nas relações de aninhamento dos elementos na marcação.</span><span class="sxs-lookup"><span data-stu-id="5f727-111">If you define an application page in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and then load the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], the tree structure is created based on the nesting relationships of the elements in the markup.</span></span> <span data-ttu-id="5f727-112">Se você definir um aplicativo ou uma parte do aplicativo em código, a estrutura de árvore será criada com base em como os valores de propriedade são designados para propriedades que implementam o modelo de conteúdo de um determinado objeto.</span><span class="sxs-lookup"><span data-stu-id="5f727-112">If you define an application or a portion of the application in code, then the tree structure is created based on how you assign property values for properties that implement the content model for a given object.</span></span> <span data-ttu-id="5f727-113">No [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], a árvore de objetos completa é conceitualizada e pode ser reportada à API pública de duas maneiras: como árvore lógica e como árvore visual.</span><span class="sxs-lookup"><span data-stu-id="5f727-113">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], there are two ways that the complete object tree is conceptualized and can be reported to its public API: as the logical tree and as the visual tree.</span></span> <span data-ttu-id="5f727-114">As distinções entre a árvore lógica e a árvore visual não são sempre necessariamente importantes, mas, ocasionalmente, podem causar problemas com alguns subsistemas do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] e afetar opções feitas na marcação ou código.</span><span class="sxs-lookup"><span data-stu-id="5f727-114">The distinctions between logical tree and visual tree are not always necessarily important, but they can occasionally cause issues with certain [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] subsystems and affect choices you make in markup or code.</span></span>  
  
 <span data-ttu-id="5f727-115">Apesar de a árvore lógica ou a árvore visual não serem sempre manipuladas diretamente, entender os conceitos de como elas interagem é útil para entender o WPF como uma tecnologia.</span><span class="sxs-lookup"><span data-stu-id="5f727-115">Even though you do not always manipulate either the logical tree or the visual tree directly, understanding the concepts of how the trees interact is useful for understanding WPF as a technology.</span></span> <span data-ttu-id="5f727-116">Ver o WPF como uma metáfora de árvore de algum tipo também é crucial para entender como a herança de propriedades e roteamento de evento funcionam no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5f727-116">Thinking of WPF as a tree metaphor of some kind is also crucial to understanding how property inheritance and event routing work in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5f727-117">Como a árvore de objetos é mais um conceito de uma API real, outra maneira de pensar o conceito é como um grafo de objeto.</span><span class="sxs-lookup"><span data-stu-id="5f727-117">Because the object tree is more of a concept than an actual API, another way to think of the concept is as an object graph.</span></span> <span data-ttu-id="5f727-118">Na prática, existem relações entre objetos em tempo de execução em que a metáfora de árvore travará.</span><span class="sxs-lookup"><span data-stu-id="5f727-118">In practice, there are relationships between objects at run time where the tree metaphor will break down.</span></span> <span data-ttu-id="5f727-119">No entanto, especialmente com a interface do usuário definida em XAML, a metáfora da árvore é relevante o suficiente para a maior parte da documentação do WPF usar o termo “árvore de objetos” ao fazer referência a esse conceito geral.</span><span class="sxs-lookup"><span data-stu-id="5f727-119">Nevertheless, particularly with XAML-defined UI, the tree metaphor is relevant enough that most WPF documentation will use the term object tree when referencing this general concept.</span></span>  
  
<a name="logical_tree"></a>   
## <a name="the-logical-tree"></a><span data-ttu-id="5f727-120">A árvore lógica</span><span class="sxs-lookup"><span data-stu-id="5f727-120">The Logical Tree</span></span>  
 <span data-ttu-id="5f727-121">No [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], conteúdo é adicionado aos elementos da interface do usuário mediante a configuração dos objetos que apoiam esses elementos.</span><span class="sxs-lookup"><span data-stu-id="5f727-121">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], you add content to UI elements by setting properties of the objects that back those elements.</span></span> <span data-ttu-id="5f727-122">Por exemplo, você adiciona itens a um <xref:System.Windows.Controls.ListBox> controle manipulando sua <xref:System.Windows.Controls.ItemsControl.Items%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="5f727-122">For example, you add items to a <xref:System.Windows.Controls.ListBox> control by manipulating its <xref:System.Windows.Controls.ItemsControl.Items%2A> property.</span></span> <span data-ttu-id="5f727-123">Ao fazer isso, você está colocando itens em um <xref:System.Windows.Controls.ItemCollection> que é o <xref:System.Windows.Controls.ItemsControl.Items%2A> valor da propriedade.</span><span class="sxs-lookup"><span data-stu-id="5f727-123">By doing this, you are placing items into the <xref:System.Windows.Controls.ItemCollection> that is the <xref:System.Windows.Controls.ItemsControl.Items%2A> property value.</span></span> <span data-ttu-id="5f727-124">Da mesma forma, para adicionar objetos <xref:System.Windows.Controls.DockPanel>a um, você <xref:System.Windows.Controls.Panel.Children%2A> manipula seu valor de propriedade.</span><span class="sxs-lookup"><span data-stu-id="5f727-124">Similarly, to add objects to a <xref:System.Windows.Controls.DockPanel>, you manipulate its <xref:System.Windows.Controls.Panel.Children%2A> property value.</span></span> <span data-ttu-id="5f727-125">Aqui, você está adicionando objetos ao <xref:System.Windows.Controls.UIElementCollection>.</span><span class="sxs-lookup"><span data-stu-id="5f727-125">Here, you are adding objects to the <xref:System.Windows.Controls.UIElementCollection>.</span></span> <span data-ttu-id="5f727-126">Para obter um exemplo de código [, consulte Como: Adicione um elemento dinamicamente](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="5f727-126">For a code example, see [How to: Add an Element Dynamically](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).</span></span>  
  
 <span data-ttu-id="5f727-127">No [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], quando você coloca itens de lista em <xref:System.Windows.Controls.ListBox> um ou em controles ou outros elementos da <xref:System.Windows.Controls.DockPanel>interface do usuário em um <xref:System.Windows.Controls.ItemsControl.Items%2A> , <xref:System.Windows.Controls.Panel.Children%2A> você também usa as propriedades e explicitamente ou implicitamente, como no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="5f727-127">In [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], when you place list items in a <xref:System.Windows.Controls.ListBox> or controls or other UI elements in a <xref:System.Windows.Controls.DockPanel>, you also use the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.Panel.Children%2A> properties, either explicitly or implicitly, as in the following example.</span></span>  
  
 [!code-xaml[TreeOvwsSupport#AllCode](~/samples/snippets/csharp/VS_Snippets_Wpf/TreeOvwsSupport/CS/page1.xaml#allcode)]  
  
 <span data-ttu-id="5f727-128">Se você fosse processar esse XAML como XML em um Modelo de Objeto do Documento e se tivesse incluído as marcas de comentário como implícitas (o que seria legal), a árvore DOM XML resultante incluiria elementos para o `<ListBox.Items>` e os outros itens implícitos.</span><span class="sxs-lookup"><span data-stu-id="5f727-128">If you were to process this XAML as XML under a document object model, and if you had included the tags commented out as implicit (which would have been legal), then the resulting XML DOM tree would have included elements for `<ListBox.Items>` and the other implicit items.</span></span> <span data-ttu-id="5f727-129">Contudo, o XAML não processa dessa forma quando você lê a marcação e grava em objetos; o grafo do objeto resultante não inclui, literalmente, o `ListBox.Items`.</span><span class="sxs-lookup"><span data-stu-id="5f727-129">But XAML does not process that way when you read the markup and write to objects, the resulting object graph does not literally include `ListBox.Items`.</span></span> <span data-ttu-id="5f727-130">No entanto, ele <xref:System.Windows.Controls.ListBox> tem uma `Items` propriedade chamada que <xref:System.Windows.Controls.ItemCollection>contém um, <xref:System.Windows.Controls.ItemCollection> que é inicializado, mas <xref:System.Windows.Controls.ListBox> vazio quando o XAML é processado.</span><span class="sxs-lookup"><span data-stu-id="5f727-130">It does however have a <xref:System.Windows.Controls.ListBox> property named `Items` that contains a <xref:System.Windows.Controls.ItemCollection>, and that <xref:System.Windows.Controls.ItemCollection> is initialized but empty when the <xref:System.Windows.Controls.ListBox> XAML is processed.</span></span> <span data-ttu-id="5f727-131">Em seguida, cada elemento de objeto filho que existe como conteúdo <xref:System.Windows.Controls.ListBox> para o é adicionado <xref:System.Windows.Controls.ItemCollection> ao pelo analisador chama `ItemCollection.Add`para.</span><span class="sxs-lookup"><span data-stu-id="5f727-131">Then, each child object element that exists as content for the <xref:System.Windows.Controls.ListBox> is added to the <xref:System.Windows.Controls.ItemCollection> by parser calls to `ItemCollection.Add`.</span></span> <span data-ttu-id="5f727-132">Esse exemplo de processamento de XAML em uma árvore de objetos é, até o momento, aparentemente um exemplo em que a árvore de objetos criada é, basicamente, a árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="5f727-132">This example of processing XAML into an object tree is so far seemingly an example where the created object tree is basically the logical tree.</span></span>  
  
 <span data-ttu-id="5f727-133">Todavia, a árvore lógica não é o grafo de objeto inteiro que existe para a interface do usuário do aplicativo no tempo de execução, mesmo com os itens de sintaxe implícitos do XAML fatorados. O principal motivo para isso são visuais e modelos.</span><span class="sxs-lookup"><span data-stu-id="5f727-133">However, the logical tree is not the entire object graph that exists for your application UI at run time, even with the XAML implicit syntax items factored out. The main reason for this is visuals and templates.</span></span> <span data-ttu-id="5f727-134">Por exemplo, considere o <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="5f727-134">For example, consider the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="5f727-135">A árvore lógica relata o <xref:System.Windows.Controls.Button> objeto e também sua cadeia `Content`de caracteres.</span><span class="sxs-lookup"><span data-stu-id="5f727-135">The logical tree reports the <xref:System.Windows.Controls.Button> object and also its string `Content`.</span></span> <span data-ttu-id="5f727-136">Porém, esse botão contém mais recursos na árvore de objetos de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="5f727-136">But there is more to this button in the run-time object tree.</span></span> <span data-ttu-id="5f727-137">Em particular, o botão só aparece na tela da maneira como ele ocorre porque um <xref:System.Windows.Controls.Button> modelo de controle específico foi aplicado.</span><span class="sxs-lookup"><span data-stu-id="5f727-137">In particular, the button only appears on screen the way it does because a specific <xref:System.Windows.Controls.Button> control template was applied.</span></span> <span data-ttu-id="5f727-138">Os visuais que vêm de um modelo aplicado (como o modelo definido <xref:System.Windows.Controls.Border> de cinza escuro em volta do botão Visual) não são relatados na árvore lógica, mesmo que você esteja olhando para a árvore lógica durante o tempo de execução (como manipular um evento de entrada do interface do usuário visível e, em seguida, lendo a árvore lógica).</span><span class="sxs-lookup"><span data-stu-id="5f727-138">The visuals that come from an applied template (such as the template-defined <xref:System.Windows.Controls.Border> of dark gray around the visual button) are not reported in the logical tree, even if you are looking at the logical tree during run time (such as handling an input event from the visible UI and then reading the logical tree).</span></span> <span data-ttu-id="5f727-139">Para encontrar os visuais do modelo, seria necessário examinar a árvore visual.</span><span class="sxs-lookup"><span data-stu-id="5f727-139">To find the template visuals, you would instead need to examine the visual tree.</span></span>  
  
 <span data-ttu-id="5f727-140">Para obter mais informações a respeito de como a sintaxe do [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] é mapeada para o grafo de objeto criado, bem como sobre a sintaxe implícita em XAML, consulte [Sintaxe XAML em detalhes](xaml-syntax-in-detail.md) ou [Visão geral de XAML (WPF)](xaml-overview-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="5f727-140">For more information about how [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntax maps to the created object graph, and implicit syntax in XAML, see [XAML Syntax In Detail](xaml-syntax-in-detail.md) or [XAML Overview (WPF)](xaml-overview-wpf.md).</span></span>  
  
<a name="tree_property_inheritance_event_routing"></a>   
### <a name="the-purpose-of-the-logical-tree"></a><span data-ttu-id="5f727-141">A finalidade da árvore lógica</span><span class="sxs-lookup"><span data-stu-id="5f727-141">The Purpose of the Logical Tree</span></span>  
 <span data-ttu-id="5f727-142">A árvore lógica existe para que os modelos de conteúdo possam ser iterados imediatamente sobre os possíveis objetos filho e para que os modelos de conteúdo possam ser extensíveis.</span><span class="sxs-lookup"><span data-stu-id="5f727-142">The logical tree exists so that content models can readily iterate over their possible child objects, and so that content models can be extensible.</span></span> <span data-ttu-id="5f727-143">Além disso, a árvore lógica fornece uma estrutura para determinadas notificações, como nos casos em que todos os objetos na árvore lógica são carregados.</span><span class="sxs-lookup"><span data-stu-id="5f727-143">Also, the logical tree provides a framework for certain notifications, such as when all objects in the logical tree are loaded.</span></span> <span data-ttu-id="5f727-144">Basicamente, a árvore lógica é uma aproximação de um grafo de objeto de tempo de execução no nível da estrutura, que exclui visuais, mas é adequada para várias operações de consulta em relação à composição do seu próprio aplicativo de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="5f727-144">Basically, the logical tree is an approximation of a run time object graph at the framework level, which excludes visuals, but is adequate for many querying operations against your own run time application's composition.</span></span>  
  
 <span data-ttu-id="5f727-145">Além disso, as referências de recursos estáticos e dinâmicos são resolvidas olhando para cima pela árvore lógica <xref:System.Windows.FrameworkElement.Resources%2A> para coleções no objeto de solicitação inicial e, em seguida, continuando a árvore lógica <xref:System.Windows.FrameworkElement> e verificando cada uma delas (ou <xref:System.Windows.FrameworkContentElement>) para outro `Resources` valor que contém um <xref:System.Windows.ResourceDictionary>, possivelmente contendo essa chave.</span><span class="sxs-lookup"><span data-stu-id="5f727-145">In addition, both static and dynamic resource references are resolved by looking upwards through the logical tree for <xref:System.Windows.FrameworkElement.Resources%2A> collections on the initial requesting object, and then continuing up the logical tree and checking each <xref:System.Windows.FrameworkElement> (or <xref:System.Windows.FrameworkContentElement>) for another `Resources` value that contains a <xref:System.Windows.ResourceDictionary>, possibly containing that key.</span></span> <span data-ttu-id="5f727-146">A árvore lógica é usada para pesquisa de recursos quando a árvore lógica e a árvore visual estão presentes.</span><span class="sxs-lookup"><span data-stu-id="5f727-146">The logical tree is used for resource lookup when both the logical tree and the visual tree are present.</span></span> <span data-ttu-id="5f727-147">Para obter mais informações sobre dicionários de recursos e pesquisa, consulte [Recursos de XAML](xaml-resources.md).</span><span class="sxs-lookup"><span data-stu-id="5f727-147">For more information on resource dictionaries and lookup, see [XAML Resources](xaml-resources.md).</span></span>  
  
<a name="composition"></a>   
### <a name="composition-of-the-logical-tree"></a><span data-ttu-id="5f727-148">Composição da árvore lógica</span><span class="sxs-lookup"><span data-stu-id="5f727-148">Composition of the Logical Tree</span></span>  
 <span data-ttu-id="5f727-149">A árvore lógica é definida no nível de estrutura do WPF, o que significa que o elemento base do WPF mais relevante para operações de árvore lógica é <xref:System.Windows.FrameworkElement> ou <xref:System.Windows.FrameworkContentElement>.</span><span class="sxs-lookup"><span data-stu-id="5f727-149">The logical tree is defined at the WPF framework-level, which means that the WPF base element that is most relevant for logical tree operations is either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="5f727-150">No entanto, como você pode ver se você realmente <xref:System.Windows.LogicalTreeHelper> usa a API, a árvore lógica às vezes contém nós que <xref:System.Windows.FrameworkElement> não <xref:System.Windows.FrameworkContentElement>são ou.</span><span class="sxs-lookup"><span data-stu-id="5f727-150">However, as you can see if you actually use the <xref:System.Windows.LogicalTreeHelper> API, the logical tree sometimes contains nodes that are not either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="5f727-151">Por exemplo, a árvore lógica relata o <xref:System.Windows.Controls.TextBlock.Text%2A> valor de a <xref:System.Windows.Controls.TextBlock>, que é uma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="5f727-151">For instance, the logical tree reports the <xref:System.Windows.Controls.TextBlock.Text%2A> value of a <xref:System.Windows.Controls.TextBlock>, which is a string.</span></span>  
  
<a name="override_logical_tree"></a>   
### <a name="overriding-the-logical-tree"></a><span data-ttu-id="5f727-152">Substituindo a árvore lógica</span><span class="sxs-lookup"><span data-stu-id="5f727-152">Overriding the Logical Tree</span></span>  
 <span data-ttu-id="5f727-153">Os autores de controle avançado podem substituir a árvore lógica substituindo várias APIs que definem como um objeto geral ou modelo de conteúdo adiciona ou remove objetos dentro da árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="5f727-153">Advanced control authors can override the logical tree by overriding several APIs that define how a general object or content model adds or removes objects within the logical tree.</span></span> <span data-ttu-id="5f727-154">Para ver um exemplo de como substituir a árvore lógica, consulte [Substituir a árvore lógica](how-to-override-the-logical-tree.md).</span><span class="sxs-lookup"><span data-stu-id="5f727-154">For an example of how to override the logical tree, see [Override the Logical Tree](how-to-override-the-logical-tree.md).</span></span>  
  
<a name="pvi"></a>   
### <a name="property-value-inheritance"></a><span data-ttu-id="5f727-155">Herança do valor de propriedade</span><span class="sxs-lookup"><span data-stu-id="5f727-155">Property Value Inheritance</span></span>  
 <span data-ttu-id="5f727-156">A herança do valor da propriedade opera por meio de uma árvore híbrida.</span><span class="sxs-lookup"><span data-stu-id="5f727-156">Property value inheritance operates through a hybrid tree.</span></span> <span data-ttu-id="5f727-157">Os metadados reais que contêm a <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> propriedade que habilita a herança de propriedade é a classe de <xref:System.Windows.FrameworkPropertyMetadata> nível de estrutura do WPF.</span><span class="sxs-lookup"><span data-stu-id="5f727-157">The actual metadata that contains the <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> property that enables property inheritance is the WPF framework-level <xref:System.Windows.FrameworkPropertyMetadata> class.</span></span> <span data-ttu-id="5f727-158">Portanto, o pai que contém o valor original e o objeto filho que herda esse valor devem ser <xref:System.Windows.FrameworkElement> ou <xref:System.Windows.FrameworkContentElement>, e ambos devem fazer parte de alguma árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="5f727-158">Therefore, both the parent that holds the original value and the child object that inherits that value must both be <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>, and they must both be part of some logical tree.</span></span> <span data-ttu-id="5f727-159">No entanto, para propriedades existentes do WPF que dão suporte à herança de propriedade, a herança de valor da propriedade pode ser perpetuada por meio de um objeto intermediário que não está na árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="5f727-159">However, for existing WPF properties that support property inheritance, property value inheritance is able to perpetuate through an intervening object that is not in the logical tree.</span></span> <span data-ttu-id="5f727-160">Principalmente, isso é relevante para fazer com que elementos de modelo usem valores da propriedade herdados definidos na instância que é modelada ou em níveis ainda mais altos de composição de nível de página e, portanto, mais altos na árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="5f727-160">Mainly this is relevant for having template elements use any inherited property values set either on the instance that is templated, or at still higher levels of page-level composition and therefore higher in the logical tree.</span></span> <span data-ttu-id="5f727-161">Para a herança de valor da propriedade funcionar consistentemente em tal limite, a propriedade que herda deve ser registrada como uma propriedade anexada. Você deve seguir esse padrão caso pretenda definir uma propriedade de dependência personalizada com comportamento de herança de propriedade.</span><span class="sxs-lookup"><span data-stu-id="5f727-161">In order for property value inheritance to work consistently across such a boundary, the inheriting property must be registered as an attached property, and you should follow this pattern if you intend to define a custom dependency property with property inheritance behavior.</span></span> <span data-ttu-id="5f727-162">A árvore exata usada para a herança de propriedade não pode ser totalmente prevista por um método de utilitário de classe auxiliar, mesmo em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="5f727-162">The exact tree used for property inheritance cannot be entirely anticipated by a helper class utility method, even at run time.</span></span> <span data-ttu-id="5f727-163">Para obter mais informações, consulte [Herança do valor da propriedade](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="5f727-163">For more information, see [Property Value Inheritance](property-value-inheritance.md).</span></span>  
  
<a name="two_trees"></a>   
## <a name="the-visual-tree"></a><span data-ttu-id="5f727-164">A árvore visual</span><span class="sxs-lookup"><span data-stu-id="5f727-164">The Visual Tree</span></span>  
 <span data-ttu-id="5f727-165">Além do conceito de árvore lógica, há também o conceito de árvore visual no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5f727-165">In addition to the concept of the logical tree, there is also the concept of the visual tree in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="5f727-166">A árvore visual descreve a estrutura de objetos visuais, conforme representado pela <xref:System.Windows.Media.Visual> classe base.</span><span class="sxs-lookup"><span data-stu-id="5f727-166">The visual tree describes the structure of visual objects, as represented by the <xref:System.Windows.Media.Visual> base class.</span></span> <span data-ttu-id="5f727-167">Quando você grava um modelo para um controle, define ou redefine a árvore visual que se aplica a ele.</span><span class="sxs-lookup"><span data-stu-id="5f727-167">When you write a template for a control, you are defining or redefining the visual tree that applies for that control.</span></span> <span data-ttu-id="5f727-168">A árvore visual também interessa aos desenvolvedores que desejam controle de baixo nível sobre o desenho por motivos de desempenho e otimização.</span><span class="sxs-lookup"><span data-stu-id="5f727-168">The visual tree is also of interest to developers who want lower-level control over drawing for performance and optimization reasons.</span></span> <span data-ttu-id="5f727-169">Uma exposição da árvore visual como parte da programação convencional do aplicativo [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] é que as rotas de eventos para um evento roteado viajam principalmente junto à árvore visual, não à árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="5f727-169">One exposure of the visual tree as part of conventional [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application programming is that event routes for a routed event mostly travel along the visual tree, not the logical tree.</span></span> <span data-ttu-id="5f727-170">Essa sutileza do comportamento do evento roteado pode não ser imediatamente aparente, a menos que você seja um autor de controle.</span><span class="sxs-lookup"><span data-stu-id="5f727-170">This subtlety of routed event behavior might not be immediately apparent unless you are a control author.</span></span> <span data-ttu-id="5f727-171">O roteamento de eventos através da árvore visual habilita controles que implementam composição no nível visual para manipular eventos ou criar setters de eventos.</span><span class="sxs-lookup"><span data-stu-id="5f727-171">Routing events through the visual tree enables controls that implement composition at the visual level to handle events or create event setters.</span></span>  
  
<a name="trees_content"></a>   
## <a name="trees-content-elements-and-content-hosts"></a><span data-ttu-id="5f727-172">Árvores, elementos de conteúdo e hosts de conteúdo</span><span class="sxs-lookup"><span data-stu-id="5f727-172">Trees, Content Elements, and Content Hosts</span></span>  
 <span data-ttu-id="5f727-173">Elementos de conteúdo (classes que derivam de <xref:System.Windows.ContentElement>) não fazem parte da árvore visual; eles não herdam de <xref:System.Windows.Media.Visual> e não têm uma representação visual.</span><span class="sxs-lookup"><span data-stu-id="5f727-173">Content elements (classes that derive from <xref:System.Windows.ContentElement>) are not part of the visual tree; they do not inherit from <xref:System.Windows.Media.Visual> and do not have a visual representation.</span></span> <span data-ttu-id="5f727-174">Para aparecer em uma interface do usuário, um <xref:System.Windows.ContentElement> deve ser hospedado em um host de conteúdo que seja um <xref:System.Windows.Media.Visual> participante de árvore lógica e.</span><span class="sxs-lookup"><span data-stu-id="5f727-174">In order to appear in a UI at all, a <xref:System.Windows.ContentElement> must be hosted in a content host that is both a <xref:System.Windows.Media.Visual> and a logical tree participant.</span></span> <span data-ttu-id="5f727-175">Normalmente, esse objeto é um <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="5f727-175">Usually such an object is a <xref:System.Windows.FrameworkElement>.</span></span> <span data-ttu-id="5f727-176">É possível conceitualizar que o host de conteúdo se assemelha a um “navegador” para o conteúdo e escolhe como exibir esse conteúdo dentro da região da tela controlada pelo host.</span><span class="sxs-lookup"><span data-stu-id="5f727-176">You can conceptualize that the content host is somewhat like a "browser" for the content and chooses how to display that content within the screen region that the host controls.</span></span> <span data-ttu-id="5f727-177">Quando o conteúdo é hospedado, pode se tornar um participante em determinados processos de árvore que, normalmente, estão associados à árvore visual.</span><span class="sxs-lookup"><span data-stu-id="5f727-177">When the content is hosted, the content can be made a participant in certain tree processes that are normally associated with the visual tree.</span></span> <span data-ttu-id="5f727-178">Em geral, <xref:System.Windows.FrameworkElement> a classe de host inclui o código de implementação <xref:System.Windows.ContentElement> que adiciona qualquer host à rota de eventos por meio de subnós da árvore lógica de conteúdo, mesmo que o conteúdo hospedado não faça parte da árvore visual verdadeira.</span><span class="sxs-lookup"><span data-stu-id="5f727-178">Generally, the <xref:System.Windows.FrameworkElement> host class includes implementation code that adds any hosted <xref:System.Windows.ContentElement> to the event route through subnodes of the content logical tree, even though the hosted content is not part of the true visual tree.</span></span> <span data-ttu-id="5f727-179">Isso é necessário para que um <xref:System.Windows.ContentElement> possa originar um evento roteado que roteia para qualquer elemento diferente de si mesmo.</span><span class="sxs-lookup"><span data-stu-id="5f727-179">This is necessary so that a <xref:System.Windows.ContentElement> can source a routed event that routes to any element other than itself.</span></span>  
  
<a name="tree_traversal"></a>   
## <a name="tree-traversal"></a><span data-ttu-id="5f727-180">Passagem da árvore</span><span class="sxs-lookup"><span data-stu-id="5f727-180">Tree Traversal</span></span>  
 <span data-ttu-id="5f727-181">A <xref:System.Windows.LogicalTreeHelper> classe fornece os <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>métodos <xref:System.Windows.LogicalTreeHelper.GetParent%2A>, e <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> para percurso de árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="5f727-181">The <xref:System.Windows.LogicalTreeHelper> class provides the <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>, and <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> methods for logical tree traversal.</span></span> <span data-ttu-id="5f727-182">Na maioria dos casos, não deve ser necessário atravessar a árvore lógica de controles existentes, porque esses controles quase sempre expõem seus elementos filho lógicos como uma propriedade de coleção dedicada que dá suporte ao acesso de coleção, como `Add`, um indexador etc.</span><span class="sxs-lookup"><span data-stu-id="5f727-182">In most cases, you should not have to traverse the logical tree of existing controls, because these controls almost always expose their logical child elements as a dedicated collection property that supports collection access such as `Add`, an indexer, and so on.</span></span> <span data-ttu-id="5f727-183">A travessia de árvore é principalmente um cenário usado pelos autores de controle que optam por não derivar de padrões de controle <xref:System.Windows.Controls.ItemsControl> pretendidos, como ou <xref:System.Windows.Controls.Panel> onde as propriedades da coleção já estão definidas, e quem pretende fornecer sua própria coleção suporte à propriedade.</span><span class="sxs-lookup"><span data-stu-id="5f727-183">Tree traversal is mainly a scenario that is used by control authors who choose not to derive from intended control patterns such as <xref:System.Windows.Controls.ItemsControl> or <xref:System.Windows.Controls.Panel> where collection properties are already defined, and who intend to provide their own collection property support.</span></span>  
  
 <span data-ttu-id="5f727-184">A árvore visual também dá suporte a uma classe auxiliar para percurso de árvore <xref:System.Windows.Media.VisualTreeHelper>Visual,.</span><span class="sxs-lookup"><span data-stu-id="5f727-184">The visual tree also supports a helper class for visual tree traversal, <xref:System.Windows.Media.VisualTreeHelper>.</span></span> <span data-ttu-id="5f727-185">A árvore visual não é exposta como convenientemente por meio de propriedades específicas do controle, <xref:System.Windows.Media.VisualTreeHelper> portanto, a classe é a maneira recomendada para percorrer a árvore visual se isso for necessário para seu cenário de programação.</span><span class="sxs-lookup"><span data-stu-id="5f727-185">The visual tree is not exposed as conveniently through control-specific properties, so the <xref:System.Windows.Media.VisualTreeHelper> class is the recommended way to traverse the visual tree if that is necessary for your programming scenario.</span></span> <span data-ttu-id="5f727-186">Para obter mais informações, consulte [Visão geral de renderização de gráficos do WPF](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5f727-186">For more information, see [WPF Graphics Rendering Overview](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5f727-187">Às vezes, é necessário examinar a árvore visual de um modelo aplicado.</span><span class="sxs-lookup"><span data-stu-id="5f727-187">Sometimes it is necessary to examine the visual tree of an applied template.</span></span> <span data-ttu-id="5f727-188">Você deve ter cuidado ao usar essa técnica.</span><span class="sxs-lookup"><span data-stu-id="5f727-188">You should be careful when using this technique.</span></span> <span data-ttu-id="5f727-189">Mesmo que você esteja atravessando uma árvore visual para um controle em que você define o modelo, os consumidores do seu controle podem sempre alterar o modelo definindo <xref:System.Windows.Controls.Control.Template%2A> a propriedade em instâncias e até mesmo o usuário final pode influenciar o modelo aplicado alterando o tema do sistema.</span><span class="sxs-lookup"><span data-stu-id="5f727-189">Even if you are traversing a visual tree for a control where you define the template, consumers of your control can always change the template by setting the <xref:System.Windows.Controls.Control.Template%2A> property on instances, and even the end user can influence the applied template by changing the system theme.</span></span>  
  
<a name="routes"></a>   
## <a name="routes-for-routed-events-as-a-tree"></a><span data-ttu-id="5f727-190">Rotas para eventos roteados como “árvore”</span><span class="sxs-lookup"><span data-stu-id="5f727-190">Routes for Routed Events as a "Tree"</span></span>  
 <span data-ttu-id="5f727-191">Como mencionado antes, a rota de qualquer evento roteado percorre um caminho único e predeterminado de uma árvore que é um híbrido das representações de árvore visual e lógica.</span><span class="sxs-lookup"><span data-stu-id="5f727-191">As mentioned before, the route of any given routed event travels along a single and predetermined path of a tree that is a hybrid of the visual and logical tree representations.</span></span> <span data-ttu-id="5f727-192">A rota do evento pode percorrer as direções para cima ou para baixo dentro da árvore, dependendo de ser um evento roteado por túnel ou propagação.</span><span class="sxs-lookup"><span data-stu-id="5f727-192">The event route can travel either in the up or down directions within the tree depending on whether it is a tunneling or bubbling routed event.</span></span> <span data-ttu-id="5f727-193">O conceito de rota de evento não tem uma classe auxiliar diretamente de suporte que possa ser usada para “conduzir” a rota do evento independentemente de gerar um evento que seja realmente roteado.</span><span class="sxs-lookup"><span data-stu-id="5f727-193">The event route concept does not have a directly supporting helper class that could be used to "walk" the event route independently of raising an event that actually routes.</span></span> <span data-ttu-id="5f727-194">Há uma classe que representa a rota, <xref:System.Windows.EventRoute>, mas os métodos dessa classe geralmente são apenas para uso interno.</span><span class="sxs-lookup"><span data-stu-id="5f727-194">There is a class that represents the route, <xref:System.Windows.EventRoute>, but the methods of that class are generally for internal use only.</span></span>  
  
<a name="resourcesandtrees"></a>   
## <a name="resource-dictionaries-and-trees"></a><span data-ttu-id="5f727-195">Dicionários de recursos e árvores</span><span class="sxs-lookup"><span data-stu-id="5f727-195">Resource Dictionaries and Trees</span></span>  
 <span data-ttu-id="5f727-196">A pesquisa de dicionário de recursos para todos os `Resources` definidos em uma página basicamente atravessa a árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="5f727-196">Resource dictionary lookup for all `Resources` defined in a page traverses basically the logical tree.</span></span> <span data-ttu-id="5f727-197">Os objetos que não estão na árvore lógica podem fazer referência a recursos com chave, mas a sequência de pesquisa de recursos começa no ponto em que o objeto está conectado à árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="5f727-197">Objects that are not in the logical tree can reference keyed resources, but the resource lookup sequence begins at the point where that object is connected to the logical tree.</span></span> <span data-ttu-id="5f727-198">No WPF, somente nós de árvore lógicas podem `Resources` ter uma propriedade que <xref:System.Windows.ResourceDictionary>contenha um, portanto, não há nenhum benefício em percorrer a árvore visual procurando por recursos <xref:System.Windows.ResourceDictionary>com chave de um.</span><span class="sxs-lookup"><span data-stu-id="5f727-198">In WPF, only logical tree nodes can have a `Resources` property that contains a <xref:System.Windows.ResourceDictionary>, therefore there is no benefit in traversing the visual tree looking for keyed resources from a <xref:System.Windows.ResourceDictionary>.</span></span>  
  
 <span data-ttu-id="5f727-199">No entanto, a pesquisa de recursos também pode se estender além da árvore lógica imediata.</span><span class="sxs-lookup"><span data-stu-id="5f727-199">However, resource lookup can also extend beyond the immediate logical tree.</span></span> <span data-ttu-id="5f727-200">Para marcação de aplicativo, a pesquisa de recurso pode seguir adiante até dicionários de recursos no nível do aplicativo e, a seguir, até valores de suporte e sistema de tema que são referenciados como propriedades estáticas ou chaves.</span><span class="sxs-lookup"><span data-stu-id="5f727-200">For application markup, the resource lookup can then continue onward to application-level resource dictionaries and then to theme support and system values that are referenced as static properties or keys.</span></span> <span data-ttu-id="5f727-201">Os próprios temas também poderão fazer referência a valores do sistema fora da árvore lógica de tema se as referências de recurso forem dinâmicas.</span><span class="sxs-lookup"><span data-stu-id="5f727-201">Themes themselves can also reference system values outside of the theme logical tree if the resource references are dynamic.</span></span> <span data-ttu-id="5f727-202">Para obter mais informações sobre dicionários de recursos e lógica de pesquisa, consulte [Recursos de XAML](xaml-resources.md).</span><span class="sxs-lookup"><span data-stu-id="5f727-202">For more information on resource dictionaries and the lookup logic, see [XAML Resources](xaml-resources.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5f727-203">Consulte também</span><span class="sxs-lookup"><span data-stu-id="5f727-203">See also</span></span>

- [<span data-ttu-id="5f727-204">Visão geral da entrada</span><span class="sxs-lookup"><span data-stu-id="5f727-204">Input Overview</span></span>](input-overview.md)
- [<span data-ttu-id="5f727-205">Visão geral de renderização de gráficos do WPF</span><span class="sxs-lookup"><span data-stu-id="5f727-205">WPF Graphics Rendering Overview</span></span>](../graphics-multimedia/wpf-graphics-rendering-overview.md)
- [<span data-ttu-id="5f727-206">Visão geral de eventos roteados</span><span class="sxs-lookup"><span data-stu-id="5f727-206">Routed Events Overview</span></span>](routed-events-overview.md)
- [<span data-ttu-id="5f727-207">Inicialização de elementos de objeto que não estão em uma árvore de objetos</span><span class="sxs-lookup"><span data-stu-id="5f727-207">Initialization for Object Elements Not in an Object Tree</span></span>](initialization-for-object-elements-not-in-an-object-tree.md)
- [<span data-ttu-id="5f727-208">Arquitetura do WPF</span><span class="sxs-lookup"><span data-stu-id="5f727-208">WPF Architecture</span></span>](wpf-architecture.md)
