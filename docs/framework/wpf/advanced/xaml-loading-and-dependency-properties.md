---
title: Carregamento de XAML e propriedades da dependência
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- custom dependency properties [WPF]
- dependency properties [WPF], XAML loading and
- loading XML data [WPF]
ms.assetid: 6eea9f4e-45ce-413b-a266-f08238737bf2
ms.openlocfilehash: 57c25297f995acd1ef307466258b5f4e03cc3098
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/03/2019
ms.locfileid: "73459537"
---
# <a name="xaml-loading-and-dependency-properties"></a><span data-ttu-id="74f42-102">Carregamento de XAML e propriedades da dependência</span><span class="sxs-lookup"><span data-stu-id="74f42-102">XAML Loading and Dependency Properties</span></span>
<span data-ttu-id="74f42-103">A implementação [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] atual de seu processador [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] é inerentemente com reconhecimento de propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="74f42-103">The current [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor is inherently dependency property aware.</span></span> <span data-ttu-id="74f42-104">O processador [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] usa métodos de sistema de propriedade de propriedades de dependência ao carregar [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] binários e processar atributos que são propriedades de dependência.</span><span class="sxs-lookup"><span data-stu-id="74f42-104">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor uses property system methods for dependency properties when loading binary [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and processing attributes that are dependency properties.</span></span> <span data-ttu-id="74f42-105">Isso desvia os wrappers de propriedade de forma efetiva.</span><span class="sxs-lookup"><span data-stu-id="74f42-105">This effectively bypasses the property wrappers.</span></span> <span data-ttu-id="74f42-106">Ao implementar propriedades de dependência personalizadas, você deve considerar esse comportamento e evitar colocar qualquer outro código em seu wrapper de propriedade diferente dos métodos do sistema de propriedades <xref:System.Windows.DependencyObject.GetValue%2A> e <xref:System.Windows.DependencyObject.SetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="74f42-106">When you implement custom dependency properties, you must account for this behavior and should avoid placing any other code in your property wrapper other than the property system methods <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span>  

<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="74f42-107">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="74f42-107">Prerequisites</span></span>  
 <span data-ttu-id="74f42-108">Este tópico pressupõe que você entende as propriedades de dependência das perspectivas de um consumidor e criador e que leu os tópicos [Visão Geral das Propriedades de Dependência](dependency-properties-overview.md) e [Propriedades de Dependência Personalizada](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="74f42-108">This topic assumes that you understand dependency properties both as consumer and author and have read [Dependency Properties Overview](dependency-properties-overview.md) and [Custom Dependency Properties](custom-dependency-properties.md).</span></span> <span data-ttu-id="74f42-109">Também é necessário ter lido [Visão Geral de XAML (WPF)](../../../desktop-wpf/fundamentals/xaml.md) e [Sintaxe XAML em Detalhes](xaml-syntax-in-detail.md).</span><span class="sxs-lookup"><span data-stu-id="74f42-109">You should also have read [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md) and [XAML Syntax In Detail](xaml-syntax-in-detail.md).</span></span>  
  
<a name="implementation"></a>   
## <a name="the-wpf-xaml-loader-implementation-and-performance"></a><span data-ttu-id="74f42-110">A implementação do Carregador XAML do WPF e o desempenho</span><span class="sxs-lookup"><span data-stu-id="74f42-110">The WPF XAML Loader Implementation, and Performance</span></span>  
 <span data-ttu-id="74f42-111">Por motivos de implementação, é computacionalmente menos dispendioso identificar uma propriedade como uma propriedade de dependência e acessar o sistema de propriedades <xref:System.Windows.DependencyObject.SetValue%2A> método para defini-lo, em vez de usar o wrapper de propriedade e seu Setter.</span><span class="sxs-lookup"><span data-stu-id="74f42-111">For implementation reasons, it is computationally less expensive to identify a property as a dependency property and access the property system <xref:System.Windows.DependencyObject.SetValue%2A> method to set it, rather than using the property wrapper and its setter.</span></span> <span data-ttu-id="74f42-112">Isso ocorre porque um processador [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] deve inferir todo o modelo de objeto do código de suporte baseado apenas no conhecimento das relações entre tipo e membro indicadas pela estrutura da marcação e várias cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="74f42-112">This is because a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor must infer the entire object model of the backing code based only on knowing the type and member relationships that are indicated by the structure of the markup and various strings.</span></span>  
  
 <span data-ttu-id="74f42-113">O tipo é pesquisado por meio de uma combinação de atributos xmlns e assembly, mas identificando os membros, determinando quais poderiam dar suporte a ser definido como um atributo e resolvendo a quais tipos os valores de propriedade dão suporte, caso contrário, exigiria reflexão extensiva usando <xref:System.Reflection.PropertyInfo>.</span><span class="sxs-lookup"><span data-stu-id="74f42-113">The type is looked up through a combination of xmlns and assembly attributes, but identifying the members, determining which could support being set as an attribute, and resolving what types the property values support would otherwise require extensive reflection using <xref:System.Reflection.PropertyInfo>.</span></span> <span data-ttu-id="74f42-114">Como as propriedades de dependência em um determinado tipo são acessíveis como uma tabela de armazenamento por meio do sistema de propriedades, a implementação de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] de seu processador de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] usa essa tabela e infere que qualquer determinada propriedade *ABC* pode ser definida com mais eficiência por chamando <xref:System.Windows.DependencyObject.SetValue%2A> no tipo derivado de <xref:System.Windows.DependencyObject> que a contém, usando o identificador de propriedade de dependência *ABCProperty*.</span><span class="sxs-lookup"><span data-stu-id="74f42-114">Because dependency properties on a given type are accessible as a storage table through the property system, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor uses this table and infers that any given property *ABC* can be more efficiently set by calling <xref:System.Windows.DependencyObject.SetValue%2A> on the containing <xref:System.Windows.DependencyObject> derived type, using the dependency property identifier *ABCProperty*.</span></span>  
  
<a name="implications"></a>   
## <a name="implications-for-custom-dependency-properties"></a><span data-ttu-id="74f42-115">Implicações para Propriedades de Dependência Personalizadas</span><span class="sxs-lookup"><span data-stu-id="74f42-115">Implications for Custom Dependency Properties</span></span>  
 <span data-ttu-id="74f42-116">Como a implementação [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] atual do comportamento do processador [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] para a configuração de propriedade desvia os wrappers como um todo, não é necessário colocar nenhuma lógica adicional nas definições estabelecidas do wrapper para a propriedade de dependência personalizada.</span><span class="sxs-lookup"><span data-stu-id="74f42-116">Because the current [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor behavior for property setting bypasses the wrappers entirely, you should not put any additional logic into the set definitions of the wrapper for your custom dependency property.</span></span> <span data-ttu-id="74f42-117">Se tal lógica for colocada na definição estabelecida, então, a lógica não será executada quando a propriedade estiver definida como [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] em vez de no código.</span><span class="sxs-lookup"><span data-stu-id="74f42-117">If you put such logic in the set definition, then the logic will not be executed when the property is set in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] rather than in code.</span></span>  
  
 <span data-ttu-id="74f42-118">Da mesma forma, outros aspectos do processador de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] que obtêm valores de Propriedade do processamento de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] também usam <xref:System.Windows.DependencyObject.GetValue%2A> em vez de usar o wrapper.</span><span class="sxs-lookup"><span data-stu-id="74f42-118">Similarly, other aspects of the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor that obtain property values from [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processing also use <xref:System.Windows.DependencyObject.GetValue%2A> rather than using the wrapper.</span></span> <span data-ttu-id="74f42-119">Portanto, você também deve evitar qualquer implementação adicional na definição de `get` além da chamada <xref:System.Windows.DependencyObject.GetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="74f42-119">Therefore, you should also avoid any additional implementation in the `get` definition beyond the <xref:System.Windows.DependencyObject.GetValue%2A> call.</span></span>  
  
 <span data-ttu-id="74f42-120">O exemplo a seguir é uma definição de propriedade de dependência recomendada com wrappers, em que o identificador de propriedade é armazenado como um campo `public` `static` `readonly` e as definições `get` e `set` não contêm nenhum código além dos métodos de sistema de propriedade necessários que definem o suporte à propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="74f42-120">The following example is a recommended dependency property definition with wrappers, where the property identifier is stored as a `public` `static` `readonly` field, and the `get` and `set` definitions contain no code beyond the necessary property system methods that define the dependency property backing.</span></span>  
  
 [!code-csharp[WPFAquariumSln#AGWithWrapper](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#agwithwrapper)]
 [!code-vb[WPFAquariumSln#AGWithWrapper](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#agwithwrapper)]  
  
## <a name="see-also"></a><span data-ttu-id="74f42-121">Consulte também</span><span class="sxs-lookup"><span data-stu-id="74f42-121">See also</span></span>

- [<span data-ttu-id="74f42-122">Visão geral das propriedades da dependência</span><span class="sxs-lookup"><span data-stu-id="74f42-122">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="74f42-123">Visão geral de XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="74f42-123">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="74f42-124">Metadados de propriedade da dependência</span><span class="sxs-lookup"><span data-stu-id="74f42-124">Dependency Property Metadata</span></span>](dependency-property-metadata.md)
- [<span data-ttu-id="74f42-125">Propriedades de dependência do tipo de coleção</span><span class="sxs-lookup"><span data-stu-id="74f42-125">Collection-Type Dependency Properties</span></span>](collection-type-dependency-properties.md)
- [<span data-ttu-id="74f42-126">Segurança de propriedade da dependência</span><span class="sxs-lookup"><span data-stu-id="74f42-126">Dependency Property Security</span></span>](dependency-property-security.md)
- [<span data-ttu-id="74f42-127">Padrões de construtor seguro para DependencyObjects</span><span class="sxs-lookup"><span data-stu-id="74f42-127">Safe Constructor Patterns for DependencyObjects</span></span>](safe-constructor-patterns-for-dependencyobjects.md)
