---
title: Visão geral de eventos roteados
description: Saiba mais sobre eventos roteados em Windows Presentation Foundation, incluindo como eles são roteados por meio de uma árvore de elementos e como criar eventos roteados personalizados.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- attached events [WPF]
- grouped button set [WPF]
- routed events [WPF]
- events [WPF], routed
- tunneling [WPF]
- events [WPF], attached
- routing strategies for events [WPF]
- button set [WPF], grouped
- bubbling [WPF]
ms.assetid: 1a2189ae-13b4-45b0-b12c-8de2e49c29d2
ms.openlocfilehash: d18b511a4886c68922cccac14942eb54e5735a71
ms.sourcegitcommit: 87cfeb69226fef01acb17c56c86f978f4f4a13db
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/24/2020
ms.locfileid: "87164812"
---
# <a name="routed-events-overview"></a><span data-ttu-id="c1679-103">Visão geral de eventos roteados</span><span class="sxs-lookup"><span data-stu-id="c1679-103">Routed Events Overview</span></span>

<span data-ttu-id="c1679-104">Este tópico descreve o conceito de eventos roteados no [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c1679-104">This topic describes the concept of routed events in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="c1679-105">O tópico define a terminologia de eventos roteados, descreve como eventos roteados são roteados por uma árvore de elementos, resume como manipular eventos roteados e apresenta como criar seus próprios eventos roteados personalizados.</span><span class="sxs-lookup"><span data-stu-id="c1679-105">The topic defines routed events terminology, describes how routed events are routed through a tree of elements, summarizes how you handle routed events, and introduces how to create your own custom routed events.</span></span>

<a name="prerequisites"></a>

## <a name="prerequisites"></a><span data-ttu-id="c1679-106">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="c1679-106">Prerequisites</span></span>

<span data-ttu-id="c1679-107">Este tópico pressupõe que você tenha conhecimento básico do Common Language Runtime (CLR) e da programação orientada a objeto, bem como o conceito de como as relações entre os [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elementos podem ser conceituadas como uma árvore.</span><span class="sxs-lookup"><span data-stu-id="c1679-107">This topic assumes that you have basic knowledge of the common language runtime (CLR) and object-oriented programming, as well as the concept of how the relationships between [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements can be conceptualized as a tree.</span></span> <span data-ttu-id="c1679-108">Para seguir os exemplos deste tópico, você também deve ter noções básicas de [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] e saber como escrever páginas ou aplicativos muito básicos do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c1679-108">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] and know how to write very basic [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications or pages.</span></span> <span data-ttu-id="c1679-109">Para obter mais informações, consulte [Walkthrough: meu primeiro aplicativo de área de trabalho do WPF](../getting-started/walkthrough-my-first-wpf-desktop-application.md) e [visão geral de XAML (WPF)](../../../desktop-wpf/fundamentals/xaml.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-109">For more information, see [Walkthrough: My first WPF desktop application](../getting-started/walkthrough-my-first-wpf-desktop-application.md) and [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md).</span></span>

<a name="routing"></a>

## <a name="what-is-a-routed-event"></a><span data-ttu-id="c1679-110">O que é um evento roteado?</span><span class="sxs-lookup"><span data-stu-id="c1679-110">What Is a Routed Event?</span></span>

<span data-ttu-id="c1679-111">Você pode pensar sobre eventos roteados de uma perspectiva funcional ou de implementação.</span><span class="sxs-lookup"><span data-stu-id="c1679-111">You can think about routed events either from a functional or implementation perspective.</span></span> <span data-ttu-id="c1679-112">Ambas as definições são apresentadas aqui, pois algumas pessoas acham uma delas mais útil.</span><span class="sxs-lookup"><span data-stu-id="c1679-112">Both definitions are presented here, because some people find one or the other definition more useful.</span></span>

<span data-ttu-id="c1679-113">Definição funcional: um evento roteado é um tipo de evento que pode invocar manipuladores em vários ouvintes em uma árvore de elementos, em vez de apenas no objeto que acionou o evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-113">Functional definition: A routed event is a type of event that can invoke handlers on multiple listeners in an element tree, rather than just on the object that raised the event.</span></span>

<span data-ttu-id="c1679-114">Definição de implementação: um evento roteado é um evento CLR que é apoiado por uma instância da <xref:System.Windows.RoutedEvent> classe e é processado pelo [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] sistema de eventos.</span><span class="sxs-lookup"><span data-stu-id="c1679-114">Implementation definition: A routed event is a CLR event that is backed by an instance of the <xref:System.Windows.RoutedEvent> class and is processed by the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] event system.</span></span>

<span data-ttu-id="c1679-115">Um aplicativo [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] típico contém muitos elementos.</span><span class="sxs-lookup"><span data-stu-id="c1679-115">A typical [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application contains many elements.</span></span> <span data-ttu-id="c1679-116">Sejam eles criados no código ou declarados em [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], esses elementos existem em uma relação de árvore de elementos uns com os outros.</span><span class="sxs-lookup"><span data-stu-id="c1679-116">Whether created in code or declared in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], these elements exist in an element tree relationship to each other.</span></span> <span data-ttu-id="c1679-117">A rota de evento pode deslocar-se em um de dois sentidos dependendo da definição do evento, mas geralmente a rota se desloca partindo do elemento de origem e, em seguida, "propaga-se" para cima pela árvore de elementos até atingir a raiz da árvore de elementos (geralmente uma página ou uma janela).</span><span class="sxs-lookup"><span data-stu-id="c1679-117">The event route can travel in one of two directions depending on the event definition, but generally the route travels from the source element and then "bubbles" upward through the element tree until it reaches the element tree root (typically a page or a window).</span></span> <span data-ttu-id="c1679-118">Esse conceito de propagação pode parecer familiar para você caso você tenha trabalhado com o modelo de objeto DHTML anteriormente.</span><span class="sxs-lookup"><span data-stu-id="c1679-118">This bubbling concept might be familiar to you if you have worked with the DHTML object model previously.</span></span>

<span data-ttu-id="c1679-119">Considere a seguinte árvore de elementos simples:</span><span class="sxs-lookup"><span data-stu-id="c1679-119">Consider the following simple element tree:</span></span>

[!code-xaml[EventOvwSupport#GroupButton](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#groupbutton)]

<span data-ttu-id="c1679-120">Essa árvore de elementos produz algo parecido com o seguinte:</span><span class="sxs-lookup"><span data-stu-id="c1679-120">This element tree produces something like the following:</span></span>

<span data-ttu-id="c1679-121">![Botões Sim, não e cancelar](./media/routedevent-ovw-1.gif "RoutedEvent_ovw_1")</span><span class="sxs-lookup"><span data-stu-id="c1679-121">![Yes, No, and Cancel buttons](./media/routedevent-ovw-1.gif "RoutedEvent_ovw_1")</span></span>

<span data-ttu-id="c1679-122">Nessa árvore de elementos simplificada, a origem de um <xref:System.Windows.Controls.Primitives.ButtonBase.Click> evento é um dos <xref:System.Windows.Controls.Button> elementos, e o <xref:System.Windows.Controls.Button> que foi clicado é o primeiro elemento que tem a oportunidade de lidar com o evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-122">In this simplified element tree, the source of a <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event is one of the <xref:System.Windows.Controls.Button> elements, and whichever <xref:System.Windows.Controls.Button> was clicked is the first element that has the opportunity to handle the event.</span></span> <span data-ttu-id="c1679-123">Mas se nenhum manipulador estiver anexado a <xref:System.Windows.Controls.Button> atos no evento, o evento será propagado para o <xref:System.Windows.Controls.Button> pai na árvore de elementos, que é o <xref:System.Windows.Controls.StackPanel> .</span><span class="sxs-lookup"><span data-stu-id="c1679-123">But if no handler attached to the <xref:System.Windows.Controls.Button> acts on the event, then the event will bubble upwards to the <xref:System.Windows.Controls.Button> parent in the element tree, which is the <xref:System.Windows.Controls.StackPanel>.</span></span> <span data-ttu-id="c1679-124">Potencialmente, o evento é bolhas <xref:System.Windows.Controls.Border> e, depois, para a raiz da página da árvore de elementos (não mostrado).</span><span class="sxs-lookup"><span data-stu-id="c1679-124">Potentially, the event bubbles to <xref:System.Windows.Controls.Border>, and then beyond to the page root of the element tree (not shown).</span></span>

<span data-ttu-id="c1679-125">Em outras palavras, a rota de eventos para esse <xref:System.Windows.Controls.Primitives.ButtonBase.Click> evento é:</span><span class="sxs-lookup"><span data-stu-id="c1679-125">In other words, the event route for this <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event is:</span></span>

<span data-ttu-id="c1679-126">Botão-->StackPanel-->Borda-->...</span><span class="sxs-lookup"><span data-stu-id="c1679-126">Button-->StackPanel-->Border-->...</span></span>

### <a name="top-level-scenarios-for-routed-events"></a><span data-ttu-id="c1679-127">Cenários de nível superior para eventos roteados</span><span class="sxs-lookup"><span data-stu-id="c1679-127">Top-level Scenarios for Routed Events</span></span>

<span data-ttu-id="c1679-128">Veja a seguir um breve resumo dos cenários que motivaram o conceito de evento roteado e por que um evento CLR típico não era adequado para esses cenários:</span><span class="sxs-lookup"><span data-stu-id="c1679-128">The following is a brief summary of the scenarios that motivated the routed event concept, and why a typical CLR event was not adequate for these scenarios:</span></span>

<span data-ttu-id="c1679-129">**Controlar a composição e encapsulamento:** vários controles no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] têm um modelo de conteúdo sofisticado.</span><span class="sxs-lookup"><span data-stu-id="c1679-129">**Control composition and encapsulation:** Various controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] have a rich content model.</span></span> <span data-ttu-id="c1679-130">Por exemplo, você pode inserir uma imagem dentro de uma <xref:System.Windows.Controls.Button> , que efetivamente estende a árvore visual do botão.</span><span class="sxs-lookup"><span data-stu-id="c1679-130">For example, you can place an image inside of a <xref:System.Windows.Controls.Button>, which effectively extends the visual tree of the button.</span></span> <span data-ttu-id="c1679-131">No entanto, a imagem adicionada não deve interromper o comportamento de teste de colisão que faz com que um botão responda a um <xref:System.Windows.Controls.Primitives.ButtonBase.Click> de seus conteúdos, mesmo se o usuário clicar em pixels que tecnicamente fazem parte da imagem.</span><span class="sxs-lookup"><span data-stu-id="c1679-131">However, the added image must not break the hit-testing behavior that causes a button to respond to a <xref:System.Windows.Controls.Primitives.ButtonBase.Click> of its content, even if the user clicks on pixels that are technically part of the image.</span></span>

<span data-ttu-id="c1679-132">**Pontos de anexo do manipulador singular:** Em Windows Forms, você teria que anexar o mesmo manipulador várias vezes para processar eventos que poderiam ser gerados de vários elementos.</span><span class="sxs-lookup"><span data-stu-id="c1679-132">**Singular handler attachment points:** In Windows Forms, you would have to attach the same handler multiple times to process events that could be raised from multiple elements.</span></span> <span data-ttu-id="c1679-133">Eventos roteados permitem que você anexe esse manipulador somente uma vez conforme mostrado no exemplo anterior, além de usarem a lógica de manipulador para determinar a origem do evento, se necessário.</span><span class="sxs-lookup"><span data-stu-id="c1679-133">Routed events enable you to attach that handler only once, as was shown in the previous example, and use handler logic to determine where the event came from if necessary.</span></span> <span data-ttu-id="c1679-134">Por exemplo, esse pode ser o manipulador para o [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] mostrado anteriormente:</span><span class="sxs-lookup"><span data-stu-id="c1679-134">For instance, this might be the handler for the previously shown [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]:</span></span>

[!code-csharp[EventOvwSupport#GroupButtonCodeBehind](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#groupbuttoncodebehind)]
[!code-vb[EventOvwSupport#GroupButtonCodeBehind](~/samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#groupbuttoncodebehind)]

<span data-ttu-id="c1679-135">**Manipulação de classe:** eventos roteados permitem um manipulador estático que é definido pela classe.</span><span class="sxs-lookup"><span data-stu-id="c1679-135">**Class handling:** Routed events permit a static handler that is defined by the class.</span></span> <span data-ttu-id="c1679-136">Esse manipulador de classe tem a oportunidade de manipular um evento antes que qualquer um dos manipuladores de instância anexados possa fazê-lo.</span><span class="sxs-lookup"><span data-stu-id="c1679-136">This class handler has the opportunity to handle an event before any attached instance handlers can.</span></span>

<span data-ttu-id="c1679-137">**Fazendo referência a um evento sem reflexão:** determinadas técnicas de código e marcação requerem uma maneira de identificar um evento específico.</span><span class="sxs-lookup"><span data-stu-id="c1679-137">**Referencing an event without reflection:** Certain code and markup techniques require a way to identify a specific event.</span></span> <span data-ttu-id="c1679-138">Um evento roteado cria um <xref:System.Windows.RoutedEvent> campo como um identificador, que fornece uma técnica de identificação de evento robusta que não requer reflexão estática ou em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="c1679-138">A routed event creates a <xref:System.Windows.RoutedEvent> field as an identifier, which provides a robust event identification technique that does not require static or run-time reflection.</span></span>

### <a name="how-routed-events-are-implemented"></a><span data-ttu-id="c1679-139">Como eventos roteados são implementados</span><span class="sxs-lookup"><span data-stu-id="c1679-139">How Routed Events Are Implemented</span></span>

<span data-ttu-id="c1679-140">Um evento roteado é um evento CLR que é apoiado por uma instância da <xref:System.Windows.RoutedEvent> classe e registrado com o [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] sistema de eventos.</span><span class="sxs-lookup"><span data-stu-id="c1679-140">A routed event is a CLR event that is backed by an instance of the <xref:System.Windows.RoutedEvent> class and registered with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system.</span></span> <span data-ttu-id="c1679-141">A <xref:System.Windows.RoutedEvent> instância obtida do registro é normalmente retida como um `public` `static` `readonly` membro de campo da classe que registra e, portanto, "proprietária" do evento roteado.</span><span class="sxs-lookup"><span data-stu-id="c1679-141">The <xref:System.Windows.RoutedEvent> instance obtained from registration is typically retained as a `public` `static` `readonly` field member of the class that registers and thus "owns" the routed event.</span></span> <span data-ttu-id="c1679-142">A conexão com o evento CLR nomeado de forma idêntica (que às vezes é denominada o evento "wrapper") é realizada substituindo as `add` `remove` implementações e para o evento CLR.</span><span class="sxs-lookup"><span data-stu-id="c1679-142">The connection to the identically named CLR event (which is sometimes termed the "wrapper" event) is accomplished by overriding the `add` and `remove` implementations for the CLR event.</span></span> <span data-ttu-id="c1679-143">Normalmente, `add` e `remove` são deixados como um padrão implícito que usa a sintaxe de evento específico a um idioma apropriada para adicionar e remover manipuladores desse evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-143">Ordinarily, the `add` and `remove` are left as an implicit default that uses the appropriate language-specific event syntax for adding and removing handlers of that event.</span></span> <span data-ttu-id="c1679-144">O mecanismo de backup e conexão de eventos roteados é conceitualmente semelhante a como uma propriedade de dependência é uma propriedade CLR que é apoiada pela <xref:System.Windows.DependencyProperty> classe e registrada com o [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] sistema de propriedades.</span><span class="sxs-lookup"><span data-stu-id="c1679-144">The routed event backing and connection mechanism is conceptually similar to how a dependency property is a CLR property that is backed by the <xref:System.Windows.DependencyProperty> class and registered with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system.</span></span>

<span data-ttu-id="c1679-145">O exemplo a seguir mostra a declaração para um `Tap` evento roteado personalizado, incluindo o registro e a exposição do <xref:System.Windows.RoutedEvent> campo identificador e as `add` `remove` implementações e para o `Tap` evento CLR.</span><span class="sxs-lookup"><span data-stu-id="c1679-145">The following example shows the declaration for a custom `Tap` routed event, including the registration and exposure of the <xref:System.Windows.RoutedEvent> identifier field and the `add` and `remove` implementations for the `Tap` CLR event.</span></span>

[!code-csharp[RoutedEventCustom#AddRemoveHandler](~/samples/snippets/csharp/VS_Snippets_Wpf/RoutedEventCustom/CSharp/SDKSampleLibrary/class1.cs#addremovehandler)]
[!code-vb[RoutedEventCustom#AddRemoveHandler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/RoutedEventCustom/VB/SDKSampleLibrary/Class1.vb#addremovehandler)]

### <a name="routed-event-handlers-and-xaml"></a><span data-ttu-id="c1679-146">Manipuladores de eventos roteados e XAML</span><span class="sxs-lookup"><span data-stu-id="c1679-146">Routed Event Handlers and XAML</span></span>

<span data-ttu-id="c1679-147">Para adicionar um manipulador para um evento utilizando [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], você declara o nome do evento como um atributo do elemento que é um ouvinte de eventos.</span><span class="sxs-lookup"><span data-stu-id="c1679-147">To add a handler for an event using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you declare the event name as an attribute on the element that is an event listener.</span></span> <span data-ttu-id="c1679-148">O valor do atributo é o nome do seu método manipulador implementado, que deve existir na classe parcial do arquivo code-behind.</span><span class="sxs-lookup"><span data-stu-id="c1679-148">The value of the attribute is the name of your implemented handler method, which must exist in the partial class of the code-behind file.</span></span>

[!code-xaml[EventOvwSupport#SimplestSyntax](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#simplestsyntax)]

<span data-ttu-id="c1679-149">A [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] sintaxe para adicionar manipuladores de eventos CLR padrão é a mesma para adicionar manipuladores de eventos roteados, porque você está realmente adicionando manipuladores ao wrapper de eventos CLR, que tem uma implementação de evento roteada sob.</span><span class="sxs-lookup"><span data-stu-id="c1679-149">The [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntax for adding standard CLR event handlers is the same for adding routed event handlers, because you are really adding handlers to the CLR event wrapper, which has a routed event implementation underneath.</span></span> <span data-ttu-id="c1679-150">Para obter mais informações sobre como adicionar manipuladores de eventos em [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], consulte [Visão geral de XAML (WPF)](../../../desktop-wpf/fundamentals/xaml.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-150">For more information about adding event handlers in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], see [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md).</span></span>

<a name="routing_strategies"></a>

## <a name="routing-strategies"></a><span data-ttu-id="c1679-151">Estratégias de roteamento</span><span class="sxs-lookup"><span data-stu-id="c1679-151">Routing Strategies</span></span>

<span data-ttu-id="c1679-152">Eventos roteados usam uma de três estratégias de roteamento:</span><span class="sxs-lookup"><span data-stu-id="c1679-152">Routed events use one of three routing strategies:</span></span>

- <span data-ttu-id="c1679-153">**Propagação:** manipuladores de eventos na origem do evento são invocados.</span><span class="sxs-lookup"><span data-stu-id="c1679-153">**Bubbling:** Event handlers on the event source are invoked.</span></span> <span data-ttu-id="c1679-154">O roteamento do evento roteado ocorre então para sucessivos elementos pai até alcançar a raiz da árvore de elementos.</span><span class="sxs-lookup"><span data-stu-id="c1679-154">The routed event then routes to successive parent elements until reaching the element tree root.</span></span> <span data-ttu-id="c1679-155">A maioria dos eventos roteados usa a estratégia de roteamento por propagação.</span><span class="sxs-lookup"><span data-stu-id="c1679-155">Most routed events use the bubbling routing strategy.</span></span> <span data-ttu-id="c1679-156">Eventos roteados por propagação geralmente são usados para relatar as alterações de entrada ou de estado de diferentes controles ou outros elementos de interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="c1679-156">Bubbling routed events are generally used to report input or state changes from distinct controls or other UI elements.</span></span>

- <span data-ttu-id="c1679-157">**Direto:** somente o próprio elemento de origem tem a oportunidade de invocar manipuladores em resposta.</span><span class="sxs-lookup"><span data-stu-id="c1679-157">**Direct:** Only the source element itself is given the opportunity to invoke handlers in response.</span></span> <span data-ttu-id="c1679-158">Isso é análogo ao "roteamento" que o Windows Forms usa para eventos.</span><span class="sxs-lookup"><span data-stu-id="c1679-158">This is analogous to the "routing" that Windows Forms uses for events.</span></span> <span data-ttu-id="c1679-159">No entanto, diferentemente de um evento CLR padrão, os eventos roteados diretos dão suporte à manipulação de classe (a manipulação de classes é explicada em uma próxima seção) e pode ser usada pelo <xref:System.Windows.EventSetter> e pelo <xref:System.Windows.EventTrigger> .</span><span class="sxs-lookup"><span data-stu-id="c1679-159">However, unlike a standard CLR event, direct routed events support class handling (class handling is explained in an upcoming section) and can be used by <xref:System.Windows.EventSetter> and <xref:System.Windows.EventTrigger>.</span></span>

- <span data-ttu-id="c1679-160">**Túnel:** inicialmente, os manipuladores de eventos na raiz da árvore de elementos são invocados.</span><span class="sxs-lookup"><span data-stu-id="c1679-160">**Tunneling:** Initially, event handlers at the element tree root are invoked.</span></span> <span data-ttu-id="c1679-161">O evento roteado, em seguida, passa por sucessivos elementos filho ao longo de uma rota, em direção ao elemento de nó que é a origem do evento roteado (o elemento que acionou o evento roteado).</span><span class="sxs-lookup"><span data-stu-id="c1679-161">The routed event then travels a route through successive child elements along the route, towards the node element that is the routed event source (the element that raised the routed event).</span></span> <span data-ttu-id="c1679-162">Eventos roteados por túnel são frequentemente usados ou manipulados como parte da composição de um controle, de modo que eventos de partes compostas podem ser deliberadamente suprimidos ou substituídos por eventos que são específicos do controle completo.</span><span class="sxs-lookup"><span data-stu-id="c1679-162">Tunneling routed events are often used or handled as part of the compositing for a control, such that events from composite parts can be deliberately suppressed or replaced by events that are specific to the complete control.</span></span> <span data-ttu-id="c1679-163">Eventos de entrada fornecidos no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] geralmente vêm implementados como um par por túnel/propagação.</span><span class="sxs-lookup"><span data-stu-id="c1679-163">Input events provided in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] often come implemented as a tunneling/bubbling pair.</span></span> <span data-ttu-id="c1679-164">Eventos por túnel também são chamados de eventos de Visualização, devido a uma convenção de nomenclatura que é usada para os pares.</span><span class="sxs-lookup"><span data-stu-id="c1679-164">Tunneling events are also sometimes referred to as Preview events, because of a naming convention that is used for the pairs.</span></span>

<a name="why_use"></a>

## <a name="why-use-routed-events"></a><span data-ttu-id="c1679-165">Por que usar eventos roteados?</span><span class="sxs-lookup"><span data-stu-id="c1679-165">Why Use Routed Events?</span></span>

<span data-ttu-id="c1679-166">Como desenvolvedor de aplicativos, você nem sempre precisa saber que o evento que você está tratando é implementado como um evento roteado, tampouco se preocupar com isso.</span><span class="sxs-lookup"><span data-stu-id="c1679-166">As an application developer, you do not always need to know or care that the event you are handling is implemented as a routed event.</span></span> <span data-ttu-id="c1679-167">Eventos roteados têm um comportamento especial, mas esse comportamento é praticamente invisível se você está manipulando um evento no elemento em que ele é acionado.</span><span class="sxs-lookup"><span data-stu-id="c1679-167">Routed events have special behavior, but that behavior is largely invisible if you are handling an event on the element where it is raised.</span></span>

<span data-ttu-id="c1679-168">Os eventos roteados se tornam realmente poderosos quando você usa qualquer um dos cenários sugeridos: definição de manipuladores comuns em uma raiz comum, composição de seu próprio controle ou definição de sua própria classe de controle personalizado.</span><span class="sxs-lookup"><span data-stu-id="c1679-168">Where routed events become powerful is if you use any of the suggested scenarios: defining common handlers at a common root, compositing your own control, or defining your own custom control class.</span></span>

<span data-ttu-id="c1679-169">Ouvintes de eventos roteados e origens de eventos roteados não precisam compartilhar um evento em comum em sua hierarquia.</span><span class="sxs-lookup"><span data-stu-id="c1679-169">Routed event listeners and routed event sources do not need to share a common event in their hierarchy.</span></span> <span data-ttu-id="c1679-170">Qualquer um <xref:System.Windows.UIElement> ou <xref:System.Windows.ContentElement> pode ser um ouvinte de eventos para qualquer evento roteado.</span><span class="sxs-lookup"><span data-stu-id="c1679-170">Any <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> can be an event listener for any routed event.</span></span> <span data-ttu-id="c1679-171">Portanto, você pode usar o conjunto completo de eventos roteados disponíveis em toda a API de trabalho definida como uma "interface" conceitual na qual elementos diferentes no aplicativo podem trocar informações de evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-171">Therefore, you can use the full set of routed events available throughout the working API set as a conceptual "interface" whereby disparate elements in the application can exchange event information.</span></span> <span data-ttu-id="c1679-172">Esse conceito de "interface" para eventos roteados é especialmente aplicável para eventos de entrada.</span><span class="sxs-lookup"><span data-stu-id="c1679-172">This "interface" concept for routed events is particularly applicable for input events.</span></span>

<span data-ttu-id="c1679-173">Eventos roteados também podem ser usados para se comunicar por meio da árvore de elementos, porque os dados do evento para o evento são perpetuados para cada elemento na rota.</span><span class="sxs-lookup"><span data-stu-id="c1679-173">Routed events can also be used to communicate through the element tree, because the event data for the event is perpetuated to each element in the route.</span></span> <span data-ttu-id="c1679-174">Um elemento poderia modificar algo nos dados do evento e essa alteração estaria disponível para o próximo elemento da rota.</span><span class="sxs-lookup"><span data-stu-id="c1679-174">One element could change something in the event data, and that change would be available to the next element in the route.</span></span>

<span data-ttu-id="c1679-175">Além do aspecto de roteamento, há dois outros motivos pelos quais um determinado [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] evento pode ser implementado como um evento roteado em vez de um evento CLR padrão.</span><span class="sxs-lookup"><span data-stu-id="c1679-175">Other than the routing aspect, there are two other reasons that any given [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event might be implemented as a routed event instead of a standard CLR event.</span></span> <span data-ttu-id="c1679-176">Se você estiver implementando seus próprios eventos, você também poderá considerar estes princípios:</span><span class="sxs-lookup"><span data-stu-id="c1679-176">If you are implementing your own events, you might also consider these principles:</span></span>

- <span data-ttu-id="c1679-177">Determinados [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] recursos de estilo e modelagem, como <xref:System.Windows.EventSetter> e <xref:System.Windows.EventTrigger> exigem que o evento referenciado seja um evento roteado.</span><span class="sxs-lookup"><span data-stu-id="c1679-177">Certain [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] styling and templating features such as <xref:System.Windows.EventSetter> and <xref:System.Windows.EventTrigger> require the referenced event to be a routed event.</span></span> <span data-ttu-id="c1679-178">Esse é o cenário de identificador do evento mencionado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="c1679-178">This is the event identifier scenario mentioned earlier.</span></span>

- <span data-ttu-id="c1679-179">Eventos roteados dão suporte a um mecanismo de manipulação de classe pelo qual a classe pode especificar métodos estáticos que têm a oportunidade de manipular eventos roteados antes que quaisquer manipuladores de instância registrados possam acessá-los.</span><span class="sxs-lookup"><span data-stu-id="c1679-179">Routed events support a class handling mechanism whereby the class can specify static methods that have the opportunity to handle routed events before any registered instance handlers can access them.</span></span> <span data-ttu-id="c1679-180">Isso é muito útil no design de controle, porque sua classe pode impor comportamentos de classe orientados a eventos que não podem ser acidentalmente suprimidos por meio da manipulação de um evento em uma instância.</span><span class="sxs-lookup"><span data-stu-id="c1679-180">This is very useful in control design, because your class can enforce event-driven class behaviors that cannot be accidentally suppressed by handling an event on an instance.</span></span>

<span data-ttu-id="c1679-181">Cada uma das considerações acima é discutida em uma seção separada deste tópico.</span><span class="sxs-lookup"><span data-stu-id="c1679-181">Each of the above considerations is discussed in a separate section of this topic.</span></span>

<a name="event_handing"></a>

## <a name="adding-and-implementing-an-event-handler-for-a-routed-event"></a><span data-ttu-id="c1679-182">Adicionar e implementar um manipulador de eventos para um evento roteado</span><span class="sxs-lookup"><span data-stu-id="c1679-182">Adding and Implementing an Event Handler for a Routed Event</span></span>

<span data-ttu-id="c1679-183">Para adicionar um manipulador de eventos em [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], basta adicionar o nome do evento a um elemento como um atributo e definir o valor do atributo como o nome do manipulador de eventos que implementa um delegado apropriado, assim como no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="c1679-183">To add an event handler in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you simply add the event name to an element as an attribute and set the attribute value as the name of the event handler that implements an appropriate delegate, as in the following example.</span></span>

[!code-xaml[EventOvwSupport#SimplestSyntax](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#simplestsyntax)]

<span data-ttu-id="c1679-184">`b1SetColor`é o nome do manipulador implementado que contém o código que manipula o <xref:System.Windows.Controls.Primitives.ButtonBase.Click> evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-184">`b1SetColor` is the name of the implemented handler that contains the code that handles the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span> <span data-ttu-id="c1679-185">`b1SetColor`deve ter a mesma assinatura que o <xref:System.Windows.RoutedEventHandler> delegado, que é o delegado do manipulador de eventos para o <xref:System.Windows.Controls.Primitives.ButtonBase.Click> evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-185">`b1SetColor` must have the same signature as the <xref:System.Windows.RoutedEventHandler> delegate, which is the event handler delegate for the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span> <span data-ttu-id="c1679-186">O primeiro parâmetro de todos os representantes de manipulador de eventos roteados especifica o elemento ao qual o manipulador de eventos é adicionado, enquanto o segundo parâmetro especifica os dados do evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-186">The first parameter of all routed event handler delegates specifies the element to which the event handler is added, and the second parameter specifies the data for the event.</span></span>

[!code-csharp[EventOvwSupport#SimpleHandlerA](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#simplehandlera)]
[!code-vb[EventOvwSupport#SimpleHandlerA](~/samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#simplehandlera)]

<span data-ttu-id="c1679-187"><xref:System.Windows.RoutedEventHandler>é o delegado manipulador de eventos roteados básico.</span><span class="sxs-lookup"><span data-stu-id="c1679-187"><xref:System.Windows.RoutedEventHandler> is the basic routed event handler delegate.</span></span> <span data-ttu-id="c1679-188">Para eventos roteados que são especializados para certos controles ou cenários, os delegados a usar para os manipuladores de eventos roteados também podem se tornar mais especializados, de modo que eles possam transmitir dados do evento especializados.</span><span class="sxs-lookup"><span data-stu-id="c1679-188">For routed events that are specialized for certain controls or scenarios, the delegates to use for the routed event handlers also might become more specialized, so that they can transmit specialized event data.</span></span> <span data-ttu-id="c1679-189">Por exemplo, em um cenário de entrada comum, você pode manipular um <xref:System.Windows.UIElement.DragEnter> evento roteado.</span><span class="sxs-lookup"><span data-stu-id="c1679-189">For instance, in a common input scenario, you might handle a <xref:System.Windows.UIElement.DragEnter> routed event.</span></span> <span data-ttu-id="c1679-190">Seu manipulador deve implementar o <xref:System.Windows.DragEventHandler> delegado.</span><span class="sxs-lookup"><span data-stu-id="c1679-190">Your handler should implement the <xref:System.Windows.DragEventHandler> delegate.</span></span> <span data-ttu-id="c1679-191">Usando o delegado mais específico, você pode processar o <xref:System.Windows.DragEventArgs> no manipulador e ler a <xref:System.Windows.DragEventArgs.Data%2A> propriedade, que contém o conteúdo da área de transferência da operação de arrastar.</span><span class="sxs-lookup"><span data-stu-id="c1679-191">By using the most specific delegate, you can process the <xref:System.Windows.DragEventArgs> in the handler and read the <xref:System.Windows.DragEventArgs.Data%2A> property, which contains the clipboard payload of the drag operation.</span></span>

<span data-ttu-id="c1679-192">Para obter um exemplo completo de como adicionar um manipulador de eventos a um elemento usando [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], consulte [Manipular um evento roteado](how-to-handle-a-routed-event.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-192">For a complete example of how to add an event handler to an element using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], see [Handle a Routed Event](how-to-handle-a-routed-event.md).</span></span>

<span data-ttu-id="c1679-193">Adicionar um manipulador para um evento roteado em um aplicativo que é criado em código é simples.</span><span class="sxs-lookup"><span data-stu-id="c1679-193">Adding a handler for a routed event in an application that is created in code is straightforward.</span></span> <span data-ttu-id="c1679-194">Manipuladores de eventos roteados sempre podem ser adicionados por meio de um método auxiliar <xref:System.Windows.UIElement.AddHandler%2A> (que é o mesmo método para o qual o backup existente faz a chamada `add` .) No entanto, os [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] eventos roteados existentes geralmente têm implementações `add` e `remove` lógicas de backup que permitem que os manipuladores de eventos roteados sejam adicionados por uma sintaxe de evento específica a um idioma, que é uma sintaxe mais intuitiva do que o método auxiliar.</span><span class="sxs-lookup"><span data-stu-id="c1679-194">Routed event handlers can always be added through a helper method <xref:System.Windows.UIElement.AddHandler%2A> (which is the same method that the existing backing calls for `add`.) However, existing [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] routed events generally have backing implementations of `add` and `remove` logic that allow the handlers for routed events to be added by a language-specific event syntax, which is more intuitive syntax than the helper method.</span></span> <span data-ttu-id="c1679-195">A seguir está um exemplo de uso do método auxiliar:</span><span class="sxs-lookup"><span data-stu-id="c1679-195">The following is an example usage of the helper method:</span></span>

[!code-csharp[EventOvwSupport#AddHandlerCode](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#addhandlercode)]
[!code-vb[EventOvwSupport#AddHandlerCode](~/samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#addhandlercode)]

<span data-ttu-id="c1679-196">O exemplo a seguir mostra a sintaxe do operador C# (Visual Basic tem uma sintaxe de operador ligeiramente diferente devido à sua manipulação de desreferenciar):</span><span class="sxs-lookup"><span data-stu-id="c1679-196">The next example shows the C# operator syntax (Visual Basic has slightly different operator syntax because of its handling of dereferencing):</span></span>

[!code-csharp[EventOvwSupport#AddHandlerPlusEquals](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#addhandlerplusequals)]
[!code-vb[EventOvwSupport#AddHandlerPlusEquals](~/samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#addhandlerplusequals)]

<span data-ttu-id="c1679-197">Para obter um exemplo de como adicionar um manipulador de eventos no código, consulte [Adicionar um manipulador de eventos usando código](how-to-add-an-event-handler-using-code.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-197">For an example of how to add an event handler in code, see [Add an Event Handler Using Code](how-to-add-an-event-handler-using-code.md).</span></span>

<span data-ttu-id="c1679-198">Se você estiver usando Visual Basic, também poderá usar a `Handles` palavra-chave para adicionar manipuladores como parte das declarações do manipulador.</span><span class="sxs-lookup"><span data-stu-id="c1679-198">If you are using Visual Basic, you can also use the `Handles` keyword to add handlers as part of the handler declarations.</span></span> <span data-ttu-id="c1679-199">Para obter mais informações, consulte [Manipulação de eventos WPF e do Visual Basic](visual-basic-and-wpf-event-handling.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-199">For more information, see [Visual Basic and WPF Event Handling](visual-basic-and-wpf-event-handling.md).</span></span>

<a name="concept_handled"></a>

### <a name="the-concept-of-handled"></a><span data-ttu-id="c1679-200">O conceito de manipulado</span><span class="sxs-lookup"><span data-stu-id="c1679-200">The Concept of Handled</span></span>

<span data-ttu-id="c1679-201">Todos os eventos roteados compartilham uma classe base de dados de evento comum, <xref:System.Windows.RoutedEventArgs> .</span><span class="sxs-lookup"><span data-stu-id="c1679-201">All routed events share a common event data base class, <xref:System.Windows.RoutedEventArgs>.</span></span> <span data-ttu-id="c1679-202"><xref:System.Windows.RoutedEventArgs>define a <xref:System.Windows.RoutedEventArgs.Handled%2A> propriedade, que usa um valor booliano.</span><span class="sxs-lookup"><span data-stu-id="c1679-202"><xref:System.Windows.RoutedEventArgs> defines the <xref:System.Windows.RoutedEventArgs.Handled%2A> property, which takes a Boolean value.</span></span> <span data-ttu-id="c1679-203">A finalidade da <xref:System.Windows.RoutedEventArgs.Handled%2A> propriedade é habilitar qualquer manipulador de eventos ao longo da rota para marcar o evento roteado como *manipulado*, definindo o valor de <xref:System.Windows.RoutedEventArgs.Handled%2A> para `true` .</span><span class="sxs-lookup"><span data-stu-id="c1679-203">The purpose of the <xref:System.Windows.RoutedEventArgs.Handled%2A> property is to enable any event handler along the route to mark the routed event as *handled*, by setting the value of <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true`.</span></span> <span data-ttu-id="c1679-204">Depois de serem processados pelo manipulador em um elemento ao longo da rota, os dados do evento compartilhado são relatados novamente para cada ouvinte na rota.</span><span class="sxs-lookup"><span data-stu-id="c1679-204">After being processed by the handler at one element along the route, the shared event data is again reported to each listener along the route.</span></span>

<span data-ttu-id="c1679-205">O valor de <xref:System.Windows.RoutedEventArgs.Handled%2A> afeta o modo como um evento roteado é relatado ou processado conforme ele viaja além da rota.</span><span class="sxs-lookup"><span data-stu-id="c1679-205">The value of <xref:System.Windows.RoutedEventArgs.Handled%2A> affects how a routed event is reported or processed as it travels further along the route.</span></span> <span data-ttu-id="c1679-206">Se <xref:System.Windows.RoutedEventArgs.Handled%2A> estiver `true` nos dados de evento de um evento roteado, os manipuladores que escutam esse evento roteado em outros elementos geralmente não são invocados para essa instância de evento específica.</span><span class="sxs-lookup"><span data-stu-id="c1679-206">If <xref:System.Windows.RoutedEventArgs.Handled%2A> is `true` in the event data for a routed event, then handlers that listen for that routed event on other elements are generally no longer invoked for that particular event instance.</span></span> <span data-ttu-id="c1679-207">Isso é verdade tanto para os manipuladores anexados em [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] quanto para manipuladores adicionados por sintaxes de anexação de manipuladores de eventos específicas a um idioma como `+=` ou `Handles`.</span><span class="sxs-lookup"><span data-stu-id="c1679-207">This is true both for handlers attached in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and for handlers added by language-specific event handler attachment syntaxes such as `+=` or `Handles`.</span></span> <span data-ttu-id="c1679-208">Para cenários de manipulador mais comuns, marcar um evento como manipulado pela configuração <xref:System.Windows.RoutedEventArgs.Handled%2A> para `true` "parar" o roteamento para uma rota de túnel ou uma rota de bolha, e também para qualquer evento que seja manipulado em um ponto na rota por um manipulador de classe.</span><span class="sxs-lookup"><span data-stu-id="c1679-208">For most common handler scenarios, marking an event as handled by setting <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true` will "stop" routing for either a tunneling route or a bubbling route, and also for any event that is handled at a point in the route by a class handler.</span></span>

<span data-ttu-id="c1679-209">No entanto, há um mecanismo "handledEventsToo" no qual os ouvintes ainda podem executar manipuladores em resposta a eventos roteados em que <xref:System.Windows.RoutedEventArgs.Handled%2A> estão `true` nos dados do evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-209">However, there is a "handledEventsToo" mechanism whereby listeners can still run handlers in response to routed events where <xref:System.Windows.RoutedEventArgs.Handled%2A> is `true` in the event data.</span></span> <span data-ttu-id="c1679-210">Em outras palavras, marcar os dados do evento como manipulados não interrompe realmente a rota de evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-210">In other words, the event route is not truly stopped by marking the event data as handled.</span></span> <span data-ttu-id="c1679-211">Você só pode usar o mecanismo handledEventsToo no código ou em um <xref:System.Windows.EventSetter> :</span><span class="sxs-lookup"><span data-stu-id="c1679-211">You can only use the handledEventsToo mechanism in code, or in an <xref:System.Windows.EventSetter>:</span></span>

- <span data-ttu-id="c1679-212">No código, em vez de usar uma sintaxe de evento específica a um idioma que funcione para eventos gerais do CLR, chame o [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] método <xref:System.Windows.UIElement.AddHandler%28System.Windows.RoutedEvent%2CSystem.Delegate%2CSystem.Boolean%29> para adicionar seu manipulador.</span><span class="sxs-lookup"><span data-stu-id="c1679-212">In code, instead of using a language-specific event syntax that works for general CLR events, call the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] method <xref:System.Windows.UIElement.AddHandler%28System.Windows.RoutedEvent%2CSystem.Delegate%2CSystem.Boolean%29> to add your handler.</span></span> <span data-ttu-id="c1679-213">Especifique o valor de `handledEventsToo` como `true`.</span><span class="sxs-lookup"><span data-stu-id="c1679-213">Specify the value of `handledEventsToo` as `true`.</span></span>

- <span data-ttu-id="c1679-214">Em um <xref:System.Windows.EventSetter> , defina o <xref:System.Windows.EventSetter.HandledEventsToo%2A> atributo como `true` .</span><span class="sxs-lookup"><span data-stu-id="c1679-214">In an <xref:System.Windows.EventSetter>, set the <xref:System.Windows.EventSetter.HandledEventsToo%2A> attribute to be `true`.</span></span>

<span data-ttu-id="c1679-215">Além do comportamento que o <xref:System.Windows.RoutedEventArgs.Handled%2A> estado produz em eventos roteados, o conceito de <xref:System.Windows.RoutedEventArgs.Handled%2A> tem implicações sobre como você deve projetar seu aplicativo e escrever o código do manipulador de eventos.</span><span class="sxs-lookup"><span data-stu-id="c1679-215">In addition to the behavior that <xref:System.Windows.RoutedEventArgs.Handled%2A> state produces in routed events, the concept of <xref:System.Windows.RoutedEventArgs.Handled%2A> has implications for how you should design your application and write the event handler code.</span></span> <span data-ttu-id="c1679-216">Você pode conceituar <xref:System.Windows.RoutedEventArgs.Handled%2A> como sendo um protocolo simples que é exposto por eventos roteados.</span><span class="sxs-lookup"><span data-stu-id="c1679-216">You can conceptualize <xref:System.Windows.RoutedEventArgs.Handled%2A> as being a simple protocol that is exposed by routed events.</span></span> <span data-ttu-id="c1679-217">A maneira exata de usar esse protocolo é a você, mas o design conceitual de como o valor do <xref:System.Windows.RoutedEventArgs.Handled%2A> é destinado a ser usado é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="c1679-217">Exactly how you use this protocol is up to you, but the conceptual design for how the value of <xref:System.Windows.RoutedEventArgs.Handled%2A> is intended to be used is as follows:</span></span>

- <span data-ttu-id="c1679-218">Se um evento roteado estiver marcado como manipulado, então ele não precisará ser manipulado novamente por outros elementos ao longo dessa rota.</span><span class="sxs-lookup"><span data-stu-id="c1679-218">If a routed event is marked as handled, then it does not need to be handled again by other elements along that route.</span></span>

- <span data-ttu-id="c1679-219">Se um evento roteado não estiver marcado como manipulado, outros ouvintes que estavam no início da rota optaram por não registrar um manipulador ou os manipuladores que foram registrados optaram por não manipular os dados do evento e definir <xref:System.Windows.RoutedEventArgs.Handled%2A> como `true` .</span><span class="sxs-lookup"><span data-stu-id="c1679-219">If a routed event is not marked as handled, then other listeners that were earlier along the route have chosen either not to register a handler, or the handlers that were registered chose not to manipulate the event data and set <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true`.</span></span> <span data-ttu-id="c1679-220">(Ou, é claro que o ouvinte atual é o primeiro ponto na rota.) Os manipuladores no ouvinte atual agora têm três possíveis cursos de ação:</span><span class="sxs-lookup"><span data-stu-id="c1679-220">(Or, it is of course possible that the current listener is the first point in the route.) Handlers on the current listener now have three possible courses of action:</span></span>

  - <span data-ttu-id="c1679-221">Não executar nenhuma ação: o evento permanece não manipulado e é roteado para o próximo ouvinte.</span><span class="sxs-lookup"><span data-stu-id="c1679-221">Take no action at all; the event remains unhandled, and the event routes to the next listener.</span></span>

  - <span data-ttu-id="c1679-222">Executar código em resposta ao evento, mas determinar que a ação tomada não foi suficientemente substancial para justificar a marcação do evento como manipulado.</span><span class="sxs-lookup"><span data-stu-id="c1679-222">Execute code in response to the event, but make the determination that the action taken was not substantial enough to warrant marking the event as handled.</span></span> <span data-ttu-id="c1679-223">O evento é roteado para o próximo ouvinte.</span><span class="sxs-lookup"><span data-stu-id="c1679-223">The event routes to the next listener.</span></span>

  - <span data-ttu-id="c1679-224">Executar código em resposta ao evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-224">Execute code in response to the event.</span></span> <span data-ttu-id="c1679-225">Marque o evento como manipulado nos dados do evento passados para o manipulador de eventos, porque a ação foi considerada suficientemente substancial para garantir a marcação como manipulado.</span><span class="sxs-lookup"><span data-stu-id="c1679-225">Mark the event as handled in the event data passed to the handler, because the action taken was deemed substantial enough to warrant marking as handled.</span></span> <span data-ttu-id="c1679-226">O evento ainda é roteado para o próximo ouvinte, mas com <xref:System.Windows.RoutedEventArgs.Handled%2A> = `true` em seus dados de evento, portanto, somente `handledEventsToo` ouvintes têm a oportunidade de invocar manipuladores adicionais.</span><span class="sxs-lookup"><span data-stu-id="c1679-226">The event still routes to the next listener, but with <xref:System.Windows.RoutedEventArgs.Handled%2A>=`true` in its event data, so only `handledEventsToo` listeners have the opportunity to invoke further handlers.</span></span>

<span data-ttu-id="c1679-227">Esse design conceitual é reforçado pelo comportamento de roteamento mencionado anteriormente: é mais difícil (embora ainda seja possível em código ou estilos) para anexar manipuladores para eventos roteados que são invocados mesmo que um manipulador anterior na rota já tenha sido definido <xref:System.Windows.RoutedEventArgs.Handled%2A> como `true` .</span><span class="sxs-lookup"><span data-stu-id="c1679-227">This conceptual design is reinforced by the routing behavior mentioned earlier: it is more difficult (although still possible in code or styles) to attach handlers for routed events that are invoked even if a previous handler along the route has already set <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true`.</span></span>

<span data-ttu-id="c1679-228">Para obter mais informações sobre <xref:System.Windows.RoutedEventArgs.Handled%2A> o, manipulação de classes de eventos roteados e recomendações sobre quando é apropriado marcar um evento roteado como <xref:System.Windows.RoutedEventArgs.Handled%2A> , consulte [marcação de eventos roteados como manipulados e manipulação de classes](marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-228">For more information about <xref:System.Windows.RoutedEventArgs.Handled%2A>, class handling of routed events, and recommendations about when it is appropriate to mark a routed event as <xref:System.Windows.RoutedEventArgs.Handled%2A>, see [Marking Routed Events as Handled, and Class Handling](marking-routed-events-as-handled-and-class-handling.md).</span></span>

<span data-ttu-id="c1679-229">Em aplicativos, é bastante comum apenas tratar um evento roteado por propagação no objeto que o acionou e não se preocupar em absoluto com as características de roteamento do evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-229">In applications, it is quite common to just handle a bubbling routed event on the object that raised it, and not be concerned with the event's routing characteristics at all.</span></span> <span data-ttu-id="c1679-230">No entanto, ainda é uma boa prática marcar o evento roteado como manipulado nos dados do evento para evitar efeitos colaterais não previstos caso um elemento que esteja mais acima na árvore de elementos também tenha um manipulador anexado para esse mesmo evento roteado.</span><span class="sxs-lookup"><span data-stu-id="c1679-230">However, it is still a good practice to mark the routed event as handled in the event data, to prevent unanticipated side effects just in case an element that is further up the element tree also has a handler attached for that same routed event.</span></span>

<a name="class_handlers"></a>

## <a name="class-handlers"></a><span data-ttu-id="c1679-231">Manipuladores de classe</span><span class="sxs-lookup"><span data-stu-id="c1679-231">Class Handlers</span></span>

<span data-ttu-id="c1679-232">Se você estiver definindo uma classe que deriva de alguma forma <xref:System.Windows.DependencyObject> , você também pode definir e anexar um manipulador de classe para um evento roteado que é um membro de evento declarado ou herdado de sua classe.</span><span class="sxs-lookup"><span data-stu-id="c1679-232">If you are defining a class that derives in some way from <xref:System.Windows.DependencyObject>, you can also define and attach a class handler for a routed event that is a declared or inherited event member of your class.</span></span> <span data-ttu-id="c1679-233">Manipuladores de classe são invocados antes de quaisquer manipuladores ouvintes de instância que são anexados a uma instância dessa classe, sempre que um evento roteado alcança uma instância de um elemento em sua rota.</span><span class="sxs-lookup"><span data-stu-id="c1679-233">Class handlers are invoked before any instance listener handlers that are attached to an instance of that class, whenever a routed event reaches an element instance in its route.</span></span>

<span data-ttu-id="c1679-234">Alguns controles [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] têm manipulação de classe inerente para certos eventos roteados.</span><span class="sxs-lookup"><span data-stu-id="c1679-234">Some [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controls have inherent class handling for certain routed events.</span></span> <span data-ttu-id="c1679-235">Isso pode dar a impressão de que o evento roteado nunca é acionado, mas na verdade ele está sofrendo manipulação de classe e, se você usar determinadas técnicas, ainda será possível que o evento roteado seja manipulado por seus manipuladores de instância.</span><span class="sxs-lookup"><span data-stu-id="c1679-235">This might give the outward appearance that the routed event is not ever raised, but in reality it is being class handled, and the routed event can potentially still be handled by your instance handlers if you use certain techniques.</span></span> <span data-ttu-id="c1679-236">Além disso, muitas classes base e controles expõem métodos virtuais que podem ser usados para substituir o comportamento de manipulação de classe.</span><span class="sxs-lookup"><span data-stu-id="c1679-236">Also, many base classes and controls expose virtual methods that can be used to override class handling behavior.</span></span> <span data-ttu-id="c1679-237">Para obter mais informações sobre como contornar manipulação de classe indesejada e sobre como definir sua própria manipulação de classe em uma classe personalizada, consulte [Marcando eventos roteados como manipulados e manipulação de classe](marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-237">For more information both on how to work around undesired class handling and on defining your own class handling in a custom class, see [Marking Routed Events as Handled, and Class Handling](marking-routed-events-as-handled-and-class-handling.md).</span></span>

<a name="attached_events"></a>

## <a name="attached-events-in-wpf"></a><span data-ttu-id="c1679-238">Eventos anexados no WPF</span><span class="sxs-lookup"><span data-stu-id="c1679-238">Attached Events in WPF</span></span>

<span data-ttu-id="c1679-239">A linguagem [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] também define um tipo especial de evento chamado de *evento anexado*.</span><span class="sxs-lookup"><span data-stu-id="c1679-239">The [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] language also defines a special type of event called an *attached event*.</span></span> <span data-ttu-id="c1679-240">Um evento anexado permite que você adicione um manipulador de um determinado evento a um elemento arbitrário.</span><span class="sxs-lookup"><span data-stu-id="c1679-240">An attached event enables you to add a handler for a particular event to an arbitrary element.</span></span> <span data-ttu-id="c1679-241">O elemento manipulando o evento não precisa definir nem herdar o evento anexado; o objeto potencialmente lançando o evento e a instância de manipulação de destino também não precisam definir nem "ser proprietários" desse evento como um membro de classe.</span><span class="sxs-lookup"><span data-stu-id="c1679-241">The element handling the event need not define or inherit the attached event, and neither the object potentially raising the event nor the destination handling instance must define or otherwise "own" that event as a class member.</span></span>

<span data-ttu-id="c1679-242">O sistema de entrada do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] faz ampla utilização de eventos anexados.</span><span class="sxs-lookup"><span data-stu-id="c1679-242">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] input system uses attached events extensively.</span></span> <span data-ttu-id="c1679-243">No entanto, quase todos esses eventos anexados são encaminhados por meio de elementos base.</span><span class="sxs-lookup"><span data-stu-id="c1679-243">However, nearly all of these attached events are forwarded through base elements.</span></span> <span data-ttu-id="c1679-244">Os eventos de entrada aparecem como eventos roteados não anexados equivalentes que são membros da classe do elemento base.</span><span class="sxs-lookup"><span data-stu-id="c1679-244">The input events then appear as equivalent non-attached routed events that are members of the base element class.</span></span> <span data-ttu-id="c1679-245">Por exemplo, o evento anexado subjacente <xref:System.Windows.Input.Mouse.MouseDown?displayProperty=nameWithType> pode ser manipulado com mais facilidade em qualquer dado <xref:System.Windows.UIElement> usando <xref:System.Windows.UIElement.MouseDown> , em <xref:System.Windows.UIElement> vez de lidar com a sintaxe de evento anexada [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ou em código.</span><span class="sxs-lookup"><span data-stu-id="c1679-245">For instance, the underlying attached event <xref:System.Windows.Input.Mouse.MouseDown?displayProperty=nameWithType> can more easily be handled on any given <xref:System.Windows.UIElement> by using <xref:System.Windows.UIElement.MouseDown> on that <xref:System.Windows.UIElement> rather than dealing with attached event syntax either in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] or code.</span></span>

<span data-ttu-id="c1679-246">Para obter mais informações sobre eventos anexados em [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], consulte [Visão geral de eventos anexados](attached-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-246">For more information about attached events in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Attached Events Overview](attached-events-overview.md).</span></span>

<a name="Qualifying_Event_Names_in_XAML_for_Anticipated_Routing"></a>

## <a name="qualified-event-names-in-xaml"></a><span data-ttu-id="c1679-247">Nomes de eventos qualificados em XAML</span><span class="sxs-lookup"><span data-stu-id="c1679-247">Qualified Event Names in XAML</span></span>

<span data-ttu-id="c1679-248">Outro uso de sintaxe que se assemelha à sintaxe de evento anexado *nomedotipo*.*nomedoevento* (mas não é, estritamente falando, um uso de evento anexado) é quando você anexa manipuladores para eventos roteados que são acionados por elementos filho.</span><span class="sxs-lookup"><span data-stu-id="c1679-248">Another syntax usage that resembles *typename*.*eventname* attached event syntax but is not strictly speaking an attached event usage is when you attach handlers for routed events that are raised by child elements.</span></span> <span data-ttu-id="c1679-249">Você anexa os manipuladores a um pai comum para tirar proveito do roteamento de eventos, mesmo que o pai comum talvez não tenha o evento roteado relevante como membro.</span><span class="sxs-lookup"><span data-stu-id="c1679-249">You attach the handlers to a common parent, to take advantage of event routing, even though the common parent might not have the relevant routed event as a member.</span></span> <span data-ttu-id="c1679-250">Considere este exemplo novamente:</span><span class="sxs-lookup"><span data-stu-id="c1679-250">Consider this example again:</span></span>

[!code-xaml[EventOvwSupport#GroupButton](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#groupbutton)]

<span data-ttu-id="c1679-251">Aqui, o ouvinte do elemento pai onde o manipulador é adicionado é um <xref:System.Windows.Controls.StackPanel> .</span><span class="sxs-lookup"><span data-stu-id="c1679-251">Here, the parent element listener where the handler is added is a <xref:System.Windows.Controls.StackPanel>.</span></span> <span data-ttu-id="c1679-252">No entanto, ele está adicionando um manipulador para um evento roteado que foi declarado e será gerado pela <xref:System.Windows.Controls.Button> classe ( <xref:System.Windows.Controls.Primitives.ButtonBase> na verdade, mas disponível para <xref:System.Windows.Controls.Button> por meio de herança).</span><span class="sxs-lookup"><span data-stu-id="c1679-252">However, it is adding a handler for a routed event that was declared and will be raised by the <xref:System.Windows.Controls.Button> class (<xref:System.Windows.Controls.Primitives.ButtonBase> actually, but available to <xref:System.Windows.Controls.Button> through inheritance).</span></span> <span data-ttu-id="c1679-253"><xref:System.Windows.Controls.Button>"possui" o evento, mas o sistema de eventos roteados permite que os manipuladores de qualquer evento roteado sejam anexados a qualquer <xref:System.Windows.UIElement> <xref:System.Windows.ContentElement> ouvinte de instância ou que poderia anexar ouvintes para um evento de Common Language Runtime (CLR).</span><span class="sxs-lookup"><span data-stu-id="c1679-253"><xref:System.Windows.Controls.Button> "owns" the event, but the routed event system permits handlers for any routed event to be attached to any <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> instance listener that could otherwise attach listeners for a common language runtime (CLR) event.</span></span> <span data-ttu-id="c1679-254">O namespace xmlns padrão para esses nomes de atributo de evento qualificado geralmente é o namespace xmlns [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] padrão, mas você também pode especificar namespaces prefixados para eventos roteados personalizados.</span><span class="sxs-lookup"><span data-stu-id="c1679-254">The default xmlns namespace for these qualified event attribute names is typically the default [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] xmlns namespace, but you can also specify prefixed namespaces for custom routed events.</span></span> <span data-ttu-id="c1679-255">Para obter mais informações sobre xmlns, consulte [Namespaces XAML e mapeamento de namespace para XAML WPF](xaml-namespaces-and-namespace-mapping-for-wpf-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-255">For more information about xmlns, see [XAML Namespaces and Namespace Mapping for WPF XAML](xaml-namespaces-and-namespace-mapping-for-wpf-xaml.md).</span></span>

<a name="how_event_processing_works"></a>

## <a name="wpf-input-events"></a><span data-ttu-id="c1679-256">Eventos de entrada WPF</span><span class="sxs-lookup"><span data-stu-id="c1679-256">WPF Input Events</span></span>

<span data-ttu-id="c1679-257">Uma aplicação frequente de eventos roteados dentro da plataforma [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] é para eventos de entrada.</span><span class="sxs-lookup"><span data-stu-id="c1679-257">One frequent application of routed events within the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] platform is for input events.</span></span> <span data-ttu-id="c1679-258">Em [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], nomes de eventos roteados por túnel são prefixados com a palavra "Preview", por convenção.</span><span class="sxs-lookup"><span data-stu-id="c1679-258">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], tunneling routed events names are prefixed with the word "Preview" by convention.</span></span> <span data-ttu-id="c1679-259">Eventos de entrada geralmente vêm em pares, com um deles sendo um evento por propagação e o outro sendo um evento por túnel.</span><span class="sxs-lookup"><span data-stu-id="c1679-259">Input events often come in pairs, with one being the bubbling event and the other being the tunneling event.</span></span> <span data-ttu-id="c1679-260">Por exemplo, o <xref:System.Windows.ContentElement.KeyDown> evento e o <xref:System.Windows.ContentElement.PreviewKeyDown> evento têm a mesma assinatura, sendo que o primeiro é o evento de entrada de bolha e o último é o evento de entrada de túnel.</span><span class="sxs-lookup"><span data-stu-id="c1679-260">For example, the <xref:System.Windows.ContentElement.KeyDown> event and the <xref:System.Windows.ContentElement.PreviewKeyDown> event have the same signature, with the former being the bubbling input event and the latter being the tunneling input event.</span></span> <span data-ttu-id="c1679-261">Ocasionalmente, eventos de entrada só têm uma versão por propagação ou talvez somente uma versão roteada de modo direto.</span><span class="sxs-lookup"><span data-stu-id="c1679-261">Occasionally, input events only have a bubbling version, or perhaps only a direct routed version.</span></span> <span data-ttu-id="c1679-262">Na documentação, tópicos do evento roteado fazem referência cruzada a eventos roteados similares com estratégias alternativas de roteamento desde que tais eventos roteados existam, enquanto seções nas páginas de referência gerenciada esclarecem a estratégia de roteamento de cada evento roteado.</span><span class="sxs-lookup"><span data-stu-id="c1679-262">In the documentation, routed event topics cross-reference similar routed events with alternative routing strategies if such routed events exist, and sections in the managed reference pages clarify the routing strategy of each routed event.</span></span>

<span data-ttu-id="c1679-263">Eventos de entrada [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] que vêm em pares são implementados para que uma única ação de usuário de entrada, por exemplo um pressionamento de botão do mouse, acione em sequência ambos os eventos roteados do par.</span><span class="sxs-lookup"><span data-stu-id="c1679-263">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] input events that come in pairs are implemented so that a single user action from input, such as a mouse button press, will raise both routed events of the pair in sequence.</span></span> <span data-ttu-id="c1679-264">Primeiro, o evento por túnel é acionado e desloca-se por sua rota.</span><span class="sxs-lookup"><span data-stu-id="c1679-264">First, the tunneling event is raised and travels its route.</span></span> <span data-ttu-id="c1679-265">Então o evento por propagação é acionado e desloca-se por sua rota.</span><span class="sxs-lookup"><span data-stu-id="c1679-265">Then the bubbling event is raised and travels its route.</span></span> <span data-ttu-id="c1679-266">Os dois eventos compartilham literalmente a mesma instância de dados de evento, porque a <xref:System.Windows.UIElement.RaiseEvent%2A> chamada do método na classe de implementação que gera o evento de bolha escuta os dados do evento do evento de encapsulamento e reutiliza-os no novo evento gerado.</span><span class="sxs-lookup"><span data-stu-id="c1679-266">The two events literally share the same event data instance, because the <xref:System.Windows.UIElement.RaiseEvent%2A> method call in the implementing class that raises the bubbling event listens for the event data from the tunneling event and reuses it in the new raised event.</span></span> <span data-ttu-id="c1679-267">Ouvintes com manipuladores para o evento por túnel têm a primeira oportunidade de marcar o evento roteado como manipulado (manipuladores de classe em primeiro lugar, em seguida, manipuladores de instância).</span><span class="sxs-lookup"><span data-stu-id="c1679-267">Listeners with handlers for the tunneling event have the first opportunity to mark the routed event handled (class handlers first, then instance handlers).</span></span> <span data-ttu-id="c1679-268">Se um elemento na rota de túnel marcou o evento roteado como manipulado, os dados do evento já manipulado são enviados para o evento roteado por propagação e os manipuladores típicos anexados para os eventos de entrada por propagação equivalentes não são invocados.</span><span class="sxs-lookup"><span data-stu-id="c1679-268">If an element along the tunneling route marked the routed event as handled, the already-handled event data is sent on for the bubbling event, and typical handlers attached for the equivalent bubbling input events will not be invoked.</span></span> <span data-ttu-id="c1679-269">A aparência externa será como se o evento por propagação manipulado ainda não tivesse sido acionado.</span><span class="sxs-lookup"><span data-stu-id="c1679-269">To outward appearances it will be as if the handled bubbling event has not even been raised.</span></span> <span data-ttu-id="c1679-270">Esse comportamento de manipulação é útil para composição de controle, em que você pode desejar que todos os eventos de entrada baseados em teste de clique ou eventos de entrada baseados em foco, em vez de suas partes compostas, sejam relatados para seu controle final.</span><span class="sxs-lookup"><span data-stu-id="c1679-270">This handling behavior is useful for control compositing, where you might want all hit-test based input events or focus-based input events to be reported by your final control, rather than its composite parts.</span></span> <span data-ttu-id="c1679-271">O elemento de controle final é mais próximo da raiz na composição e, portanto, tem a oportunidade de realizar primeiro a manipulação de classe do evento por túnel e, talvez, de "substituir" esse evento roteado por um evento de controle mais específico, como parte do código que dá suporte à classe de controle.</span><span class="sxs-lookup"><span data-stu-id="c1679-271">The final control element is closer to the root in the compositing, and therefore has the opportunity to class handle the tunneling event first and perhaps to "replace" that routed event with a more control-specific event, as part of the code that backs the control class.</span></span>

<span data-ttu-id="c1679-272">Como uma ilustração de como um evento de entrada funciona, considere o exemplo de evento de entrada a seguir.</span><span class="sxs-lookup"><span data-stu-id="c1679-272">As an illustration of how input event processing works, consider the following input event example.</span></span> <span data-ttu-id="c1679-273">Na ilustração de árvore a seguir, `leaf element #2` é a origem de um `PreviewMouseDown` e um `MouseDown` evento:</span><span class="sxs-lookup"><span data-stu-id="c1679-273">In the following tree illustration, `leaf element #2` is the source of both a `PreviewMouseDown` and then a `MouseDown` event:</span></span>

![Diagrama de roteamento de eventos](./media/routed-events-overview/input-event-routing.png)

<span data-ttu-id="c1679-275">A ordem de processamento de eventos é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="c1679-275">The order of event processing is as follows:</span></span>

1. <span data-ttu-id="c1679-276">`PreviewMouseDown` (túnel) no elemento raiz.</span><span class="sxs-lookup"><span data-stu-id="c1679-276">`PreviewMouseDown` (tunnel) on root element.</span></span>

2. <span data-ttu-id="c1679-277">`PreviewMouseDown` (túnel) no elemento intermediário No. 1.</span><span class="sxs-lookup"><span data-stu-id="c1679-277">`PreviewMouseDown` (tunnel) on intermediate element #1.</span></span>

3. <span data-ttu-id="c1679-278">`PreviewMouseDown` (túnel) no elemento de origem No. 2.</span><span class="sxs-lookup"><span data-stu-id="c1679-278">`PreviewMouseDown` (tunnel) on source element #2.</span></span>

4. <span data-ttu-id="c1679-279">`MouseDown` (propagação) no elemento de origem No. 2.</span><span class="sxs-lookup"><span data-stu-id="c1679-279">`MouseDown` (bubble) on source element #2.</span></span>

5. <span data-ttu-id="c1679-280">`MouseDown` (propagação) no elemento intermediário No. 1.</span><span class="sxs-lookup"><span data-stu-id="c1679-280">`MouseDown` (bubble) on intermediate element #1.</span></span>

6. <span data-ttu-id="c1679-281">`MouseDown` (propagação) no elemento raiz.</span><span class="sxs-lookup"><span data-stu-id="c1679-281">`MouseDown` (bubble) on root element.</span></span>

<span data-ttu-id="c1679-282">Um delegado do manipulador de eventos roteados fornece referências para dois objetos: o objeto que acionou o evento e o objeto em que o manipulador foi invocado.</span><span class="sxs-lookup"><span data-stu-id="c1679-282">A routed event handler delegate provides references to two objects: the object that raised the event and the object where the handler was invoked.</span></span> <span data-ttu-id="c1679-283">O objeto em que o manipulador foi invocado é o objeto relatado pelo parâmetro `sender`.</span><span class="sxs-lookup"><span data-stu-id="c1679-283">The object where the handler was invoked is the object reported by the `sender` parameter.</span></span> <span data-ttu-id="c1679-284">O objeto no qual o evento foi gerado pela primeira vez é relatado pela <xref:System.Windows.RoutedEventArgs.Source%2A> Propriedade nos dados do evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-284">The object where the event was first raised is reported by the <xref:System.Windows.RoutedEventArgs.Source%2A> property in the event data.</span></span> <span data-ttu-id="c1679-285">Um evento roteado ainda pode ser gerado e manipulado pelo mesmo objeto, nesse caso `sender` e <xref:System.Windows.RoutedEventArgs.Source%2A> é idêntico (esse é o caso com as etapas 3 e 4 na lista de exemplo de processamento de eventos).</span><span class="sxs-lookup"><span data-stu-id="c1679-285">A routed event can still be raised and handled by the same object, in which case `sender` and <xref:System.Windows.RoutedEventArgs.Source%2A> are identical (this is the case with Steps 3 and 4 in the event processing example list).</span></span>

<span data-ttu-id="c1679-286">Devido ao tunelamento e à bolha, os elementos pai recebem eventos de entrada em que o <xref:System.Windows.RoutedEventArgs.Source%2A> é um de seus elementos filho.</span><span class="sxs-lookup"><span data-stu-id="c1679-286">Because of tunneling and bubbling, parent elements receive input events where the <xref:System.Windows.RoutedEventArgs.Source%2A> is one of their child elements.</span></span> <span data-ttu-id="c1679-287">Quando é importante saber qual é o elemento de origem, você pode identificar o elemento de origem acessando a <xref:System.Windows.RoutedEventArgs.Source%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="c1679-287">When it is important to know what the source element is, you can identify the source element by accessing the <xref:System.Windows.RoutedEventArgs.Source%2A> property.</span></span>

<span data-ttu-id="c1679-288">Normalmente, depois que o evento de entrada é marcado <xref:System.Windows.RoutedEventArgs.Handled%2A> , os manipuladores adicionais não são invocados.</span><span class="sxs-lookup"><span data-stu-id="c1679-288">Usually, once the input event is marked <xref:System.Windows.RoutedEventArgs.Handled%2A>, further handlers are not invoked.</span></span> <span data-ttu-id="c1679-289">Normalmente, você deve marcar eventos de entrada como manipulados assim que um manipulador que atende sua manipulação lógica específica do aplicativo do significado do evento de entrada é invocado.</span><span class="sxs-lookup"><span data-stu-id="c1679-289">Typically, you should mark input events as handled as soon as a handler is invoked that addresses your application-specific logical handling of the meaning of the input event.</span></span>

<span data-ttu-id="c1679-290">A exceção a essa instrução geral sobre o <xref:System.Windows.RoutedEventArgs.Handled%2A> estado é que os manipuladores de eventos de entrada registrados para ignorar <xref:System.Windows.RoutedEventArgs.Handled%2A> o estado dos dados do evento ainda seriam invocados ao longo de uma rota.</span><span class="sxs-lookup"><span data-stu-id="c1679-290">The exception to this general statement about <xref:System.Windows.RoutedEventArgs.Handled%2A> state is that input event handlers that are registered to deliberately ignore <xref:System.Windows.RoutedEventArgs.Handled%2A> state of the event data would still be invoked along either route.</span></span> <span data-ttu-id="c1679-291">Para obter mais informações, consulte [Visualizar eventos](preview-events.md) ou [Marcar eventos roteados como manipulados e manipulação de classe](marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-291">For more information, see [Preview Events](preview-events.md) or [Marking Routed Events as Handled, and Class Handling](marking-routed-events-as-handled-and-class-handling.md).</span></span>

<span data-ttu-id="c1679-292">O modelo de dados do evento compartilhado entre eventos por túnel e eventos por propagação e o acionamento sequencial de eventos por túnel seguidos de eventos por propagação não é um conceito que seja geralmente verdadeiro para todos os eventos roteados.</span><span class="sxs-lookup"><span data-stu-id="c1679-292">The shared event data model between tunneling and bubbling events, and the sequential raising of first tunneling then bubbling events, is not a concept that is generally true for all routed events.</span></span> <span data-ttu-id="c1679-293">Esse comportamento é implementado especificamente pelo modo como dispositivos [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] de entrada escolhem acionar os pares de eventos de entrada e conectá-los.</span><span class="sxs-lookup"><span data-stu-id="c1679-293">That behavior is specifically implemented by how [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] input devices choose to raise and connect the input event pairs.</span></span> <span data-ttu-id="c1679-294">Implementar seus próprios eventos de entrada é um cenário avançado, mas você pode optar por seguir esse modelo também para seus próprios eventos de entrada.</span><span class="sxs-lookup"><span data-stu-id="c1679-294">Implementing your own input events is an advanced scenario, but you might choose to follow that model for your own input events also.</span></span>

<span data-ttu-id="c1679-295">Determinadas classes escolhem realizar a manipulação de classe de certos eventos de entrada, geralmente com a intenção de redefinir o significado de um determinado evento de entrada voltado para o usuário dentro desse controle e acionar um novo evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-295">Certain classes choose to class-handle certain input events, usually with the intent of redefining what a particular user-driven input event means within that control and raising a new event.</span></span> <span data-ttu-id="c1679-296">Para obter mais informações, consulte [Marcar eventos roteados como manipulados e manipulação de classe](marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-296">For more information, see [Marking Routed Events as Handled, and Class Handling](marking-routed-events-as-handled-and-class-handling.md).</span></span>

<span data-ttu-id="c1679-297">Para obter mais informações sobre entrada e como entrada e eventos interagem em cenários de aplicativos típicos, consulte [Visão geral de entrada](input-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-297">For more information on input and how input and events interact in typical application scenarios, see [Input Overview](input-overview.md).</span></span>

<a name="events_styles"></a>

## <a name="eventsetters-and-eventtriggers"></a><span data-ttu-id="c1679-298">EventSetters e EventTriggers</span><span class="sxs-lookup"><span data-stu-id="c1679-298">EventSetters and EventTriggers</span></span>

<span data-ttu-id="c1679-299">Em estilos, você pode incluir algumas sintaxes de tratamento de eventos previamente declaradas [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] na marcação usando um <xref:System.Windows.EventSetter> .</span><span class="sxs-lookup"><span data-stu-id="c1679-299">In styles, you can include some pre-declared [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] event handling syntax in the markup by using an <xref:System.Windows.EventSetter>.</span></span> <span data-ttu-id="c1679-300">Quando o estilo é aplicado, o manipulador referenciado é adicionado à instância estilizada.</span><span class="sxs-lookup"><span data-stu-id="c1679-300">When the style is applied, the referenced handler is added to the styled instance.</span></span> <span data-ttu-id="c1679-301">Você pode declarar um <xref:System.Windows.EventSetter> somente para um evento roteado.</span><span class="sxs-lookup"><span data-stu-id="c1679-301">You can declare an <xref:System.Windows.EventSetter> only for a routed event.</span></span> <span data-ttu-id="c1679-302">A seguir, é mostrado um exemplo.</span><span class="sxs-lookup"><span data-stu-id="c1679-302">The following is an example.</span></span> <span data-ttu-id="c1679-303">Observe que o método `b1SetColor` referenciado aqui está em um arquivo code-behind.</span><span class="sxs-lookup"><span data-stu-id="c1679-303">Note that the `b1SetColor` method referenced here is in a code-behind file.</span></span>

[!code-xaml[EventOvwSupport#XAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/page2.xaml#xaml2)]

<span data-ttu-id="c1679-304">A vantagem obtida aqui é que o estilo provavelmente conterá uma grande quantidade de outras informações que poderiam se aplicar a qualquer botão em seu aplicativo, e fazer com <xref:System.Windows.EventSetter> que a parte desse estilo promova a reutilização de código mesmo no nível de marcação.</span><span class="sxs-lookup"><span data-stu-id="c1679-304">The advantage gained here is that the style is likely to contain a great deal of other information that could apply to any button in your application, and having the <xref:System.Windows.EventSetter> be part of that style promotes code reuse even at the markup level.</span></span> <span data-ttu-id="c1679-305">Além disso, um <xref:System.Windows.EventSetter> método abstrato nomeia para os manipuladores uma etapa mais distante da marcação geral do aplicativo e da página.</span><span class="sxs-lookup"><span data-stu-id="c1679-305">Also, an <xref:System.Windows.EventSetter> abstracts method names for handlers one step further away from the general application and page markup.</span></span>

<span data-ttu-id="c1679-306">Outra sintaxe especializada que combina o evento roteado e os recursos de animação do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] é um <xref:System.Windows.EventTrigger> .</span><span class="sxs-lookup"><span data-stu-id="c1679-306">Another specialized syntax that combines the routed event and animation features of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is an <xref:System.Windows.EventTrigger>.</span></span> <span data-ttu-id="c1679-307">Assim como acontece com <xref:System.Windows.EventSetter> , somente eventos roteados podem ser usados para um <xref:System.Windows.EventTrigger> .</span><span class="sxs-lookup"><span data-stu-id="c1679-307">As with <xref:System.Windows.EventSetter>, only routed events may be used for an <xref:System.Windows.EventTrigger>.</span></span> <span data-ttu-id="c1679-308">Normalmente, um <xref:System.Windows.EventTrigger> é declarado como parte de um estilo, mas um <xref:System.Windows.EventTrigger> também pode ser declarado em elementos de nível de página como parte da <xref:System.Windows.FrameworkElement.Triggers%2A> coleção ou em um <xref:System.Windows.Controls.ControlTemplate> .</span><span class="sxs-lookup"><span data-stu-id="c1679-308">Typically, an <xref:System.Windows.EventTrigger> is declared as part of a style, but an <xref:System.Windows.EventTrigger> can also be declared on page-level elements as part of the <xref:System.Windows.FrameworkElement.Triggers%2A> collection, or in a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="c1679-309">Um <xref:System.Windows.EventTrigger> permite que você especifique um <xref:System.Windows.Media.Animation.Storyboard> que é executado sempre que um evento roteado atinge um elemento em sua rota que declara um <xref:System.Windows.EventTrigger> para esse evento.</span><span class="sxs-lookup"><span data-stu-id="c1679-309">An <xref:System.Windows.EventTrigger> enables you to specify a <xref:System.Windows.Media.Animation.Storyboard> that runs whenever a routed event reaches an element in its route that declares an <xref:System.Windows.EventTrigger> for that event.</span></span> <span data-ttu-id="c1679-310">A vantagem de <xref:System.Windows.EventTrigger> apenas tratar o evento e fazer com que ele inicie um storyboard existente é que um <xref:System.Windows.EventTrigger> fornece um melhor controle sobre o storyboard e seu comportamento em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="c1679-310">The advantage of an <xref:System.Windows.EventTrigger> over just handling the event and causing it to start an existing storyboard is that an <xref:System.Windows.EventTrigger> provides better control over the storyboard and its run-time behavior.</span></span> <span data-ttu-id="c1679-311">Para obter mais informações, consulte [Usar gatilhos de evento para controlar um storyboard depois de ele ser iniciado](../graphics-multimedia/how-to-use-event-triggers-to-control-a-storyboard-after-it-starts.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-311">For more information, see [Use Event Triggers to Control a Storyboard After It Starts](../graphics-multimedia/how-to-use-event-triggers-to-control-a-storyboard-after-it-starts.md).</span></span>

<a name="more_about"></a>

## <a name="more-about-routed-events"></a><span data-ttu-id="c1679-312">Mais informações sobre eventos roteados</span><span class="sxs-lookup"><span data-stu-id="c1679-312">More About Routed Events</span></span>

<span data-ttu-id="c1679-313">Este tópico aborda principalmente eventos roteados da perspectiva de descrever os conceitos básicos e oferecer diretrizes sobre como e quando responder a eventos roteados que já estão presentes nos diversos controles e elementos base.</span><span class="sxs-lookup"><span data-stu-id="c1679-313">This topic mainly discusses routed events from the perspective of describing the basic concepts and offering guidance on how and when to respond to the routed events that are already present in the various base elements and controls.</span></span> <span data-ttu-id="c1679-314">No entanto, você pode criar seu próprio evento roteado em sua classe personalizada juntamente com todo o suporte necessário, assim como delegados e classes de dados do evento especializado.</span><span class="sxs-lookup"><span data-stu-id="c1679-314">However, you can create your own routed event on your custom class along with all the necessary support, such as specialized event data classes and delegates.</span></span> <span data-ttu-id="c1679-315">O proprietário do evento roteado pode ser qualquer classe, mas eventos roteados devem ser gerados pelo e manipulados por <xref:System.Windows.UIElement> <xref:System.Windows.ContentElement> classes ou derivadas para serem úteis.</span><span class="sxs-lookup"><span data-stu-id="c1679-315">The routed event owner can be any class, but routed events must be raised by and handled by <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> derived classes in order to be useful.</span></span> <span data-ttu-id="c1679-316">Para obter mais informações sobre eventos personalizados, consulte [Criar um evento roteado personalizado](how-to-create-a-custom-routed-event.md).</span><span class="sxs-lookup"><span data-stu-id="c1679-316">For more information about custom events, see [Create a Custom Routed Event](how-to-create-a-custom-routed-event.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="c1679-317">Confira também</span><span class="sxs-lookup"><span data-stu-id="c1679-317">See also</span></span>

- <xref:System.Windows.EventManager>
- <xref:System.Windows.RoutedEvent>
- <xref:System.Windows.RoutedEventArgs>
- [<span data-ttu-id="c1679-318">Marcando eventos roteados como manipulados e tratamento de classes</span><span class="sxs-lookup"><span data-stu-id="c1679-318">Marking Routed Events as Handled, and Class Handling</span></span>](marking-routed-events-as-handled-and-class-handling.md)
- [<span data-ttu-id="c1679-319">Visão geral da entrada</span><span class="sxs-lookup"><span data-stu-id="c1679-319">Input Overview</span></span>](input-overview.md)
- [<span data-ttu-id="c1679-320">Visão geral dos comandos</span><span class="sxs-lookup"><span data-stu-id="c1679-320">Commanding Overview</span></span>](commanding-overview.md)
- [<span data-ttu-id="c1679-321">Propriedades de dependência personalizadas</span><span class="sxs-lookup"><span data-stu-id="c1679-321">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="c1679-322">Árvores no WPF</span><span class="sxs-lookup"><span data-stu-id="c1679-322">Trees in WPF</span></span>](trees-in-wpf.md)
- [<span data-ttu-id="c1679-323">Padrões de evento fraco</span><span class="sxs-lookup"><span data-stu-id="c1679-323">Weak Event Patterns</span></span>](weak-event-patterns.md)
