---
title: Extensões de marcação e XAML WPF
ms.date: 03/30/2017
helpviewer_keywords:
- brace character [WPF]
- Binding markup extensions [WPF]
- RelativeSource markup extensions [WPF]
- XAML [WPF], markup extensions
- markup extensions [WPF]
- nesting extension syntax [WPF]
- curly brace characters ({})
- TemplateBinding markup extensions [WPF]
- StaticResource markup extensions [WPF]
- literal curly brace characters ({})
- characters [WPF], curly brace
- DynamicResource markup extensions [WPF]
ms.assetid: 618dc745-8b14-4886-833f-486d2254bb78
ms.openlocfilehash: 46539f0cfdcc478e2f5e4cd7aecf16ac059e6332
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61804579"
---
# <a name="markup-extensions-and-wpf-xaml"></a><span data-ttu-id="f5d92-102">Extensões de marcação e XAML WPF</span><span class="sxs-lookup"><span data-stu-id="f5d92-102">Markup Extensions and WPF XAML</span></span>
<span data-ttu-id="f5d92-103">Este tópico apresenta o conceito de extensões de marcação para XAML, incluindo regras de sintaxe, finalidade e o modelo de objeto de classe subjacente.</span><span class="sxs-lookup"><span data-stu-id="f5d92-103">This topic introduces the concept of markup extensions for XAML, including their syntax rules, purpose, and the class object model that underlies them.</span></span> <span data-ttu-id="f5d92-104">As extensões de marcação são um recurso geral da linguagem XAML e da implementação .NET de serviços XAML.</span><span class="sxs-lookup"><span data-stu-id="f5d92-104">Markup extensions are a general feature of the XAML language and of the .NET implementation of XAML services.</span></span> <span data-ttu-id="f5d92-105">Este tópico detalha, especificamente, as extensões de marcação para uso em XAML do WPF.</span><span class="sxs-lookup"><span data-stu-id="f5d92-105">This topic specifically details markup extensions for use in WPF XAML.</span></span>  

<a name="XAML_Processors_and_Markup_Extensions"></a>   
## <a name="xaml-processors-and-markup-extensions"></a><span data-ttu-id="f5d92-106">Processadores XAML e extensões de marcação</span><span class="sxs-lookup"><span data-stu-id="f5d92-106">XAML Processors and Markup Extensions</span></span>  
 <span data-ttu-id="f5d92-107">De modo geral, um analisador XAML pode interpretar um valor de atributo como cadeia de caracteres literal que pode ser convertida em um primitivo ou convertê-lo em objeto por algum meio.</span><span class="sxs-lookup"><span data-stu-id="f5d92-107">Generally speaking, a XAML parser can either interpret an attribute value as a literal string that can be converted to a primitive, or convert it to an object by some means.</span></span> <span data-ttu-id="f5d92-108">Um desses meios é fazendo referência a um conversor de tipo; isso é documentado no tópico [TypeConverters e XAML](typeconverters-and-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-108">One such means is by referencing a type converter; this is documented in the topic [TypeConverters and XAML](typeconverters-and-xaml.md).</span></span> <span data-ttu-id="f5d92-109">No entanto, há cenários em que outro comportamento é necessário.</span><span class="sxs-lookup"><span data-stu-id="f5d92-109">However, there are scenarios where different behavior is required.</span></span> <span data-ttu-id="f5d92-110">Por exemplo, um processador XAML pode ser instruído de que um valor de um atributo não deve resultar em um novo objeto no grafo de objeto.</span><span class="sxs-lookup"><span data-stu-id="f5d92-110">For example, a XAML processor can be instructed that a value of an attribute should not result in a new object in the object graph.</span></span> <span data-ttu-id="f5d92-111">Em vez disso, o atributo deve resultar em um grafo de objeto que faz referência a um objeto já construído em outra parte do grafo ou em um objeto estático.</span><span class="sxs-lookup"><span data-stu-id="f5d92-111">Instead, the attribute should result in an object graph that makes a reference to an already constructed object in another part of the graph, or a static object.</span></span> <span data-ttu-id="f5d92-112">Outro cenário é que um processador XAML pode ser instruído a usar uma sintaxe que fornece argumentos não padrão para o construtor de um objeto.</span><span class="sxs-lookup"><span data-stu-id="f5d92-112">Another scenario is that a XAML processor can be instructed to use a syntax that provides non-default arguments to the constructor of an object.</span></span> <span data-ttu-id="f5d92-113">Estes são os tipos de cenários em que uma extensão de marcação pode fornecer a solução.</span><span class="sxs-lookup"><span data-stu-id="f5d92-113">These are the types of scenarios where a markup extension can provide the solution.</span></span>  
  
<a name="Basic_Markup_Extension_Syntax"></a>   
## <a name="basic-markup-extension-syntax"></a><span data-ttu-id="f5d92-114">Sintaxe de extensão de marcação básica</span><span class="sxs-lookup"><span data-stu-id="f5d92-114">Basic Markup Extension Syntax</span></span>  
 <span data-ttu-id="f5d92-115">Uma extensão de marcação pode ser implementada para fornecer valores para propriedades em uso de atributo e/ou para propriedades em uso de elemento de propriedade.</span><span class="sxs-lookup"><span data-stu-id="f5d92-115">A markup extension can be implemented to provide values for properties in an attribute usage, properties in a property element usage, or both.</span></span>  
  
 <span data-ttu-id="f5d92-116">Quando é usada para fornecer um valor de atributo, a sintaxe que distingue uma sequência de extensão de marcação para um processador XAML é a presença das chaves de abertura e fechamento ({ e }).</span><span class="sxs-lookup"><span data-stu-id="f5d92-116">When used to provide an attribute value, the syntax that distinguishes a markup extension sequence to a XAML processor is the presence of the opening and closing curly braces ({ and }).</span></span> <span data-ttu-id="f5d92-117">Em seguida, o tipo de extensão de marcação é identificado pelo token de cadeia de caracteres imediatamente após a chave de abertura.</span><span class="sxs-lookup"><span data-stu-id="f5d92-117">The type of markup extension is then identified by the string token immediately following the opening curly brace.</span></span>  
  
 <span data-ttu-id="f5d92-118">Quando usada na sintaxe de elemento de propriedade, uma extensão de marcação é visualmente igual a qualquer outro elemento utilizado para fornecer um valor de elemento de propriedade: uma declaração do elemento XAML que faz referência à classe de extensão de marcação como um elemento, entre colchetes angulares (<>).</span><span class="sxs-lookup"><span data-stu-id="f5d92-118">When used in property element syntax, a markup extension is visually the same as any other element used to provide a property element value: a XAML element declaration that references the markup extension class as an element, enclosed within angle brackets (<>).</span></span>  
  
<a name="XAML_Defined_Markup_Extensions"></a>   
## <a name="xaml-defined-markup-extensions"></a><span data-ttu-id="f5d92-119">Extensões de marcação definidas de XAML</span><span class="sxs-lookup"><span data-stu-id="f5d92-119">XAML-Defined Markup Extensions</span></span>  
 <span data-ttu-id="f5d92-120">Existem várias extensões de marcação que não são específicas à implementação de XAML do WPF, mas que são implementações de intrínsecos ou recursos de XAML como linguagem.</span><span class="sxs-lookup"><span data-stu-id="f5d92-120">Several markup extensions exist that are not specific to the WPF implementation of XAML, but are instead implementations of intrinsics or features of XAML as a language.</span></span> <span data-ttu-id="f5d92-121">Essas extensões de marcação são implementadas no assembly System.Xaml como parte dos serviços de XAML gerais do .NET Framework XAML e ficam dentro do namespace de XAML de linguagem XAML.</span><span class="sxs-lookup"><span data-stu-id="f5d92-121">These markup extensions are implemented in the System.Xaml assembly as part of the general .NET Framework XAML services, and are within the XAML language XAML namespace.</span></span> <span data-ttu-id="f5d92-122">Em termos de uso de marcação comum, essas extensões de marcação normalmente podem ser identificadas pelo prefixo `x:` no uso.</span><span class="sxs-lookup"><span data-stu-id="f5d92-122">In terms of common markup usage, these markup extensions are typically identifiable by the `x:` prefix in the usage.</span></span> <span data-ttu-id="f5d92-123">O <xref:System.Windows.Markup.MarkupExtension> classe base (também definida em System. XAML) fornece o padrão de todas as extensões de marcação devem usar para ter suporte em leitores XAML e gravadores XAML, incluindo em WPF XAML.</span><span class="sxs-lookup"><span data-stu-id="f5d92-123">The <xref:System.Windows.Markup.MarkupExtension> base class (also defined in System.Xaml) provides the pattern that all markup extensions should use in order to be supported in XAML readers and XAML writers, including in WPF XAML.</span></span>  
  
-   <span data-ttu-id="f5d92-124">`x:Type` fornece o <xref:System.Type> objeto para o tipo nomeado.</span><span class="sxs-lookup"><span data-stu-id="f5d92-124">`x:Type` supplies the <xref:System.Type> object for the named type.</span></span> <span data-ttu-id="f5d92-125">Esse recurso é usado com mais frequência em estilos e modelos.</span><span class="sxs-lookup"><span data-stu-id="f5d92-125">This facility is used most frequently in styles and templates.</span></span> <span data-ttu-id="f5d92-126">Para ver os detalhes, consulte [Extensão de marcação x:Type](../../xaml-services/x-type-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-126">For details, see [x:Type Markup Extension](../../xaml-services/x-type-markup-extension.md).</span></span>  
  
-   <span data-ttu-id="f5d92-127">O `x:Static` produz valores estáticos.</span><span class="sxs-lookup"><span data-stu-id="f5d92-127">`x:Static` produces static values.</span></span> <span data-ttu-id="f5d92-128">Os valores vêm de entidades de código de tipo de valor que não são, diretamente, o tipo de valor de uma propriedade de destino, mas podem ser avaliados para esse tipo.</span><span class="sxs-lookup"><span data-stu-id="f5d92-128">The values come from value-type code entities that are not directly the type of a target property's value, but can be evaluated to that type.</span></span> <span data-ttu-id="f5d92-129">Para ver os detalhes, consulte [Extensão de marcação x:Static](../../xaml-services/x-static-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-129">For details, see [x:Static Markup Extension](../../xaml-services/x-static-markup-extension.md).</span></span>  
  
-   <span data-ttu-id="f5d92-130">O `x:Null` especifica `null` como um valor para uma propriedade e pode ser utilizado para atributos ou valores de elemento de propriedade.</span><span class="sxs-lookup"><span data-stu-id="f5d92-130">`x:Null` specifies `null` as a value for a property and can be used either for attributes or property element values.</span></span> <span data-ttu-id="f5d92-131">Para ver os detalhes, consulte [Extensão de marcação x:Null](../../xaml-services/x-null-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-131">For details, see [x:Null Markup Extension](../../xaml-services/x-null-markup-extension.md).</span></span>  
  
-   <span data-ttu-id="f5d92-132">O `x:Array` fornece suporte para a criação de matrizes gerais na sintaxe XAML, para casos em que o suporte da coleção oferecido por modelos de controle e elementos base do WPF não é usado deliberadamente.</span><span class="sxs-lookup"><span data-stu-id="f5d92-132">`x:Array` provides support for creation of general arrays in XAML syntax, for cases where the collection support provided by WPF base elements and control models is deliberately not used.</span></span> <span data-ttu-id="f5d92-133">Para ver os detalhes, consulte [Extensão de marcação x:Array](../../xaml-services/x-array-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-133">For details, see [x:Array Markup Extension](../../xaml-services/x-array-markup-extension.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f5d92-134">O prefixo `x:` é utilizado para o mapeamento típico do namespace de XAML dos intrínsecos da linguagem XAML, no elemento raiz de uma produção ou arquivo XAML.</span><span class="sxs-lookup"><span data-stu-id="f5d92-134">The `x:` prefix is used for the typical XAML namespace mapping of the XAML language intrinsics, in the root element of a XAML file or production.</span></span> <span data-ttu-id="f5d92-135">Por exemplo, modelos do Visual Studio para aplicativos do WPF iniciam um arquivo XAML usando este `x:` mapeamento.</span><span class="sxs-lookup"><span data-stu-id="f5d92-135">For example, the Visual Studio templates for WPF applications initiate a XAML file using this `x:` mapping.</span></span> <span data-ttu-id="f5d92-136">Você poderia escolher um token de prefixo diferente no seu próprio mapeamento do namespace de XAML; porém, essa documentação assumirá o mapeamento padrão do `x:` como meio para identificar as entidades que são uma parte definida do namespace de XAML para a linguagem XAML, ao contrário do namespace padrão do WPF ou de outros namespaces XAML não relacionados a uma estrutura específica.</span><span class="sxs-lookup"><span data-stu-id="f5d92-136">You could choose a different prefix token in your own XAML namespace mapping, but this documentation will assume the default `x:` mapping as a means of identifying those entities that are a defined part of the XAML namespace for the XAML language, as opposed to the WPF default namespace or other XAML namespaces not related to a specific framework.</span></span>  
  
<a name="WPF_Specific_Markup_Extensions"></a>   
## <a name="wpf-specific-markup-extensions"></a><span data-ttu-id="f5d92-137">Extensões de marcação específicas do WPF</span><span class="sxs-lookup"><span data-stu-id="f5d92-137">WPF-Specific Markup Extensions</span></span>  
 <span data-ttu-id="f5d92-138">As extensões de marcação mais comuns usadas na programação do WPF são aquelas que dão suporte a referências de recurso (`StaticResource` e `DynamicResource`) e aquelas que dão suporte à vinculação de dados (`Binding`).</span><span class="sxs-lookup"><span data-stu-id="f5d92-138">The most common markup extensions used in WPF programming are those that support resource references (`StaticResource` and `DynamicResource`), and those that support data binding (`Binding`).</span></span>  
  
-   <span data-ttu-id="f5d92-139">O `StaticResource` fornece um valor para uma propriedade ao substituir o valor de um recurso já definido.</span><span class="sxs-lookup"><span data-stu-id="f5d92-139">`StaticResource` provides a value for a property by substituting the value of an already defined resource.</span></span> <span data-ttu-id="f5d92-140">Por fim, uma avaliação do `StaticResource` é feita no tempo de carregamento do XAML e não tem acesso ao grafo de objeto no tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="f5d92-140">A `StaticResource` evaluation is ultimately made at XAML load time and does not have access to the object graph at run time.</span></span> <span data-ttu-id="f5d92-141">Para ver os detalhes, consulte [Extensão de marcação StaticResource](staticresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-141">For details, see [StaticResource Markup Extension](staticresource-markup-extension.md).</span></span>  
  
-   <span data-ttu-id="f5d92-142">O `DynamicResource` fornece um valor para uma propriedade ao adiar esse valor para ser uma referência de tempo de execução a um recurso.</span><span class="sxs-lookup"><span data-stu-id="f5d92-142">`DynamicResource` provides a value for a property by deferring that value to be a run-time reference to a resource.</span></span> <span data-ttu-id="f5d92-143">Uma referência de recurso dinâmico força uma nova pesquisa sempre que tal recurso é acessado e tem acesso ao grafo de objeto no tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="f5d92-143">A dynamic resource reference forces a new lookup each time that such a resource is accessed and has access to the object graph at run time.</span></span> <span data-ttu-id="f5d92-144">Para obter esse acesso, o conceito do `DynamicResource` tem suporte por propriedades de dependência no sistema de propriedade do WPF, bem como por expressões avaliadas.</span><span class="sxs-lookup"><span data-stu-id="f5d92-144">In order to get this access, `DynamicResource` concept is supported by dependency properties in the WPF property system, and evaluated expressions.</span></span> <span data-ttu-id="f5d92-145">Portanto, o `DynamicResource` pode ser usado somente para um destino de propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="f5d92-145">Therefore you can only use `DynamicResource` for a dependency property target.</span></span> <span data-ttu-id="f5d92-146">Para ver os detalhes, consulte [Extensão de marcação DynamicResource](dynamicresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-146">For details, see [DynamicResource Markup Extension](dynamicresource-markup-extension.md).</span></span>  
  
-   <span data-ttu-id="f5d92-147">O `Binding` fornece um valor associado a dados para uma propriedade, usando o contexto de dados que se aplica ao objeto pai no tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="f5d92-147">`Binding` provides a data bound value for a property, using the data context that applies to the parent object at run time.</span></span> <span data-ttu-id="f5d92-148">Essa extensão de marcação é relativamente complexa, porque possibilita uma sintaxe substancial embutida para especificar uma vinculação de dados.</span><span class="sxs-lookup"><span data-stu-id="f5d92-148">This markup extension is relatively complex, because it enables a substantial inline syntax for specifying a data binding.</span></span> <span data-ttu-id="f5d92-149">Para ver os detalhes, consulte [Extensão de marcação Binding](binding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-149">For details, see [Binding Markup Extension](binding-markup-extension.md).</span></span>  
  
-   <span data-ttu-id="f5d92-150">`RelativeSource` Fornece informações de origem para um <xref:System.Windows.Data.Binding> que pode navegar várias relações possíveis na árvore de objetos de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="f5d92-150">`RelativeSource` provides source information for a <xref:System.Windows.Data.Binding> that can navigate several possible relationships in the run-time object tree.</span></span> <span data-ttu-id="f5d92-151">São oferecidas fontes especializadas para associações criadas em modelos multiuso ou criadas em código sem conhecimento completo da árvore de objetos adjacente.</span><span class="sxs-lookup"><span data-stu-id="f5d92-151">This provides specialized sourcing for bindings that are created in multi-use templates or created in code without full knowledge of the surrounding object tree.</span></span> <span data-ttu-id="f5d92-152">Para ver os detalhes, consulte [RelativeSource MarkupExtension](relativesource-markupextension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-152">For details, see [RelativeSource MarkupExtension](relativesource-markupextension.md).</span></span>  
  
-   <span data-ttu-id="f5d92-153">O `TemplateBinding` permite que um modelo de controle use valores para propriedades modeladas que vêm de propriedades definidas pelo modelo de objeto da classe que usará o modelo.</span><span class="sxs-lookup"><span data-stu-id="f5d92-153">`TemplateBinding` enables a control template to use values for templated properties that come from object-model-defined properties of the class that will use the template.</span></span> <span data-ttu-id="f5d92-154">Em outras palavras, a propriedade dentro da definição de modelo pode acessar um contexto que existe somente depois que o modelo é aplicado.</span><span class="sxs-lookup"><span data-stu-id="f5d92-154">In other words, the property within the template definition can access a context that only exists once the template is applied.</span></span> <span data-ttu-id="f5d92-155">Para ver os detalhes, consulte [Extensão de marcação TemplateBinding](templatebinding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-155">For details, see [TemplateBinding Markup Extension](templatebinding-markup-extension.md).</span></span> <span data-ttu-id="f5d92-156">Para obter mais informações sobre o uso prático de `TemplateBinding`, consulte [Estilos com a amostra ControlTemplates](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating).</span><span class="sxs-lookup"><span data-stu-id="f5d92-156">For more information on the practical use of `TemplateBinding`, see [Styling with ControlTemplates Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating).</span></span>  
  
-   <span data-ttu-id="f5d92-157">O `ColorConvertedBitmap` dá suporte a um cenário relativamente avançado de geração de imagens.</span><span class="sxs-lookup"><span data-stu-id="f5d92-157">`ColorConvertedBitmap` supports a relatively advanced imaging scenario.</span></span> <span data-ttu-id="f5d92-158">Para ver os detalhes, consulte [Extensão de marcação ColorConvertedBitmap](colorconvertedbitmap-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-158">For details, see [ColorConvertedBitmap Markup Extension](colorconvertedbitmap-markup-extension.md).</span></span>  
  
-   <span data-ttu-id="f5d92-159">O `ComponentResourceKey` e o `ThemeDictionary` dão suporte a aspectos da pesquisa de recursos, especialmente para recursos e temas empacotados com controles personalizados.</span><span class="sxs-lookup"><span data-stu-id="f5d92-159">`ComponentResourceKey` and `ThemeDictionary` support aspects of resource lookup, particularly for resources and themes that are packaged with custom controls.</span></span> <span data-ttu-id="f5d92-160">Para obter mais informações, consulte [Extensão de marcação ComponentResourceKey](componentresourcekey-markup-extension.md), [Extensão de marcação ThemeDictionary](themedictionary-markup-extension.md) ou [Visão geral de criação do controle](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-160">For more information, see [ComponentResourceKey Markup Extension](componentresourcekey-markup-extension.md), [ThemeDictionary Markup Extension](themedictionary-markup-extension.md), or [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>  
  
<a name="StarExtension"></a>   
## <a name="extension-classes"></a><span data-ttu-id="f5d92-161">\*Classes de extensão</span><span class="sxs-lookup"><span data-stu-id="f5d92-161">\*Extension Classes</span></span>  
 <span data-ttu-id="f5d92-162">Para a linguagem XAML e extensões de marcação específicas do WPF, o comportamento de cada extensão de marcação é identificado para um processador XAML por meio de um `*Extension` classe que deriva <xref:System.Windows.Markup.MarkupExtension>e fornece uma implementação do <xref:System.Windows.Markup.StaticExtension.ProvideValue%2A> método.</span><span class="sxs-lookup"><span data-stu-id="f5d92-162">For both the general XAML language and WPF-specific markup extensions, the behavior of each markup extension is identified to a XAML processor through a `*Extension` class that derives from <xref:System.Windows.Markup.MarkupExtension>, and provides an implementation of the <xref:System.Windows.Markup.StaticExtension.ProvideValue%2A> method.</span></span> <span data-ttu-id="f5d92-163">Esse método em cada extensão fornece o objeto que é retornado após a avaliação da extensão de marcação.</span><span class="sxs-lookup"><span data-stu-id="f5d92-163">This method on each extension provides the object that is returned when the markup extension is evaluated.</span></span> <span data-ttu-id="f5d92-164">Normalmente, o objeto retornado é avaliado com base em vários tokens de cadeia de caracteres que são passados para a extensão de marcação.</span><span class="sxs-lookup"><span data-stu-id="f5d92-164">The returned object is typically evaluated based on the various string tokens that are passed to the markup extension.</span></span>  
  
 <span data-ttu-id="f5d92-165">Por exemplo, o <xref:System.Windows.StaticResourceExtension> classe fornece a implementação de superfície da pesquisa de recursos real para que seu <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> implementação retorna o objeto que é solicitado, com a entrada dessa implementação específica sendo uma cadeia de caracteres que é usada para Pesquisar o recurso pelo seu `x:Key`.</span><span class="sxs-lookup"><span data-stu-id="f5d92-165">For example, the <xref:System.Windows.StaticResourceExtension> class provides the surface implementation of actual resource lookup so that its <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> implementation returns the object that is requested, with the input of that particular implementation being a string that is used to look up the resource by its `x:Key`.</span></span> <span data-ttu-id="f5d92-166">A maior parte dos detalhes da implementação não será importante se você estiver usando uma extensão de marcação existente.</span><span class="sxs-lookup"><span data-stu-id="f5d92-166">Much of this implementation detail is unimportant if you are using an existing markup extension.</span></span>  
  
 <span data-ttu-id="f5d92-167">Algumas extensões de marcação não usam argumentos de token de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="f5d92-167">Some markup extensions do not use string token arguments.</span></span> <span data-ttu-id="f5d92-168">Isso ocorre porque retornam um valor estático ou consistente ou porque o contexto para o valor que deve ser retornado está disponível por meio de um dos serviços passados através do parâmetro `serviceProvider`.</span><span class="sxs-lookup"><span data-stu-id="f5d92-168">This is either because they return a static or consistent value, or because context for what value should be returned is available through one of the services passed through the `serviceProvider` parameter.</span></span>  
  
 <span data-ttu-id="f5d92-169">O padrão de nomenclatura do `*Extension` é para conveniência e consistência.</span><span class="sxs-lookup"><span data-stu-id="f5d92-169">The `*Extension` naming pattern is for convenience and consistency.</span></span> <span data-ttu-id="f5d92-170">Não é necessário para que um processador XAML possa identificar essa classe como suporte para uma extensão de marcação.</span><span class="sxs-lookup"><span data-stu-id="f5d92-170">It is not necessary in order for a XAML processor to identify that class as support for a markup extension.</span></span> <span data-ttu-id="f5d92-171">Desde que sua base de código inclua System. XAML e usa as implementações de serviços de XAML do .NET Framework, tudo o que é necessário para ser reconhecida como uma extensão de marcação XAML é derivar de <xref:System.Windows.Markup.MarkupExtension> e para dar suporte a uma sintaxe de construção.</span><span class="sxs-lookup"><span data-stu-id="f5d92-171">So long as your codebase includes System.Xaml and uses .NET Framework XAML Services implementations, all that is necessary to be recognized as a XAML markup extension is to derive from <xref:System.Windows.Markup.MarkupExtension> and to support a construction syntax.</span></span> <span data-ttu-id="f5d92-172">WPF define classes habilitando a extensão de marcação que não seguem a `*Extension` nomeação padrão, por exemplo <xref:System.Windows.Data.Binding>.</span><span class="sxs-lookup"><span data-stu-id="f5d92-172">WPF defines markup extension-enabling classes that do not follow the `*Extension` naming pattern, for example <xref:System.Windows.Data.Binding>.</span></span> <span data-ttu-id="f5d92-173">Normalmente, o motivo disso é que a classe dá suporte a cenários além do suporte à extensão de marcação puro.</span><span class="sxs-lookup"><span data-stu-id="f5d92-173">Typically the reason for this is that the class supports scenarios beyond pure markup extension support.</span></span> <span data-ttu-id="f5d92-174">No caso de <xref:System.Windows.Data.Binding>, classe oferece suporte a acesso de tempo de execução a métodos e propriedades do objeto para cenários que não têm nada a ver com XAML.</span><span class="sxs-lookup"><span data-stu-id="f5d92-174">In the case of <xref:System.Windows.Data.Binding>, that class supports run-time access to methods and properties of the object for scenarios that have nothing to do with XAML.</span></span>  
  
### <a name="extension-class-interpretation-of-initialization-text"></a><span data-ttu-id="f5d92-175">Interpretação de classe de extensão do texto de inicialização</span><span class="sxs-lookup"><span data-stu-id="f5d92-175">Extension Class Interpretation of Initialization Text</span></span>  
 <span data-ttu-id="f5d92-176">Os tokens de cadeia de caracteres após o nome da extensão de marcação e ainda dentro de chaves são interpretados pelo processador XAML em uma das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="f5d92-176">The string tokens following the markup extension name and still within the braces are interpreted by a XAML processor in one of the following ways:</span></span>  
  
-   <span data-ttu-id="f5d92-177">Uma vírgula sempre representa o separador ou delimitador de tokens individuais.</span><span class="sxs-lookup"><span data-stu-id="f5d92-177">A comma always represents the separator or delimiter of individual tokens.</span></span>  
  
-   <span data-ttu-id="f5d92-178">Se os tokens individuais separados não contiverem nenhum sinal de igual, cada token será tratado como um argumento do construtor.</span><span class="sxs-lookup"><span data-stu-id="f5d92-178">If the individual separated tokens do not contain any equals signs, each token is treated as a constructor argument.</span></span> <span data-ttu-id="f5d92-179">Cada parâmetro de construtor deve ser fornecido como o tipo esperado por essa assinatura e na ordem correta esperada por ela.</span><span class="sxs-lookup"><span data-stu-id="f5d92-179">Each constructor parameter must be given as the type expected by that signature, and in the proper order expected by that signature.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="f5d92-180">Um processador XAML deve chamar o construtor que corresponde à contagem de argumento do número de pares.</span><span class="sxs-lookup"><span data-stu-id="f5d92-180">A XAML processor must call the constructor that matches the argument count of the number of pairs.</span></span> <span data-ttu-id="f5d92-181">Por esse motivo, se você estiver implementando uma extensão de marcação personalizada, não forneça vários construtores com a mesma contagem de argumento.</span><span class="sxs-lookup"><span data-stu-id="f5d92-181">For this reason, if you are implementing a custom markup extension, do not provide multiple constructors with the same argument count.</span></span> <span data-ttu-id="f5d92-182">O comportamento de um processador XAML se existir mais de um caminho do construtor de extensão de marcação com a mesma contagem de parâmetros não é definido, mas você deverá prever que um processador XAML está autorizado a lançar uma exceção em uso caso tal situação exista nas definições do tipo de extensão de marcação.</span><span class="sxs-lookup"><span data-stu-id="f5d92-182">The behavior for how a XAML processor behaves if more than one markup extension constructor path with the same parameter count exists is not defined, but you should anticipate that a XAML processor is permitted to throw an exception on usage if this situation exists in the markup extension type definitions.</span></span>  
  
-   <span data-ttu-id="f5d92-183">Se os tokens individuais separados contiverem sinais de igual, um processador XAML chamará primeiramente o construtor padrão para a extensão de marcação.</span><span class="sxs-lookup"><span data-stu-id="f5d92-183">If the individual separated tokens contain equals signs, then a XAML processor first calls the default constructor for the markup extension.</span></span> <span data-ttu-id="f5d92-184">A seguir, cada par name=value será interpretado como um nome de propriedade que existe na extensão de marcação e um valor para designar à propriedade.</span><span class="sxs-lookup"><span data-stu-id="f5d92-184">Then, each name=value pair is interpreted as a property name that exists on the markup extension, and a value to assign to that property.</span></span>  
  
-   <span data-ttu-id="f5d92-185">Se houver um resultado paralelo entre o comportamento do construtor e o comportamento de configuração da propriedade em uma extensão de marcação, não importará qual comportamento será utilizado.</span><span class="sxs-lookup"><span data-stu-id="f5d92-185">If there is a parallel result between the constructor behavior and the property setting behavior in a markup extension, it does not matter which behavior you use.</span></span> <span data-ttu-id="f5d92-186">O mais comum é usar os pares *property*`=`*value* para extensões de marcação que têm mais de uma propriedade configurável, pelo menos porque torna a marcação mais intencional e diminui a probabilidade de transpor acidentalmente os parâmetros do construtor.</span><span class="sxs-lookup"><span data-stu-id="f5d92-186">It is more common usage to use the *property*`=`*value* pairs for markup extensions that have more than one settable property, if only because it makes your markup more intentional and you are less likely to accidentally transpose constructor parameters.</span></span> <span data-ttu-id="f5d92-187">(Quando pares property=value são especificados, as propriedades poderão ficar em qualquer ordem.) Além disso, não há nenhuma garantia de que uma extensão de marcação fornecerá um parâmetro do construtor que defina cada uma das propriedades configuráveis.</span><span class="sxs-lookup"><span data-stu-id="f5d92-187">(When you specify property=value pairs, those properties may be in any order.) Also, there is no guarantee that a markup extension supplies a constructor parameter that sets every one of its settable properties.</span></span> <span data-ttu-id="f5d92-188">Por exemplo, <xref:System.Windows.Data.Binding> é uma extensão de marcação, com muitas propriedades que são configuráveis por meio da extensão no *propriedade*`=`*valor* formulário, mas <xref:System.Windows.Data.Binding> só dá suporte a dois construtores: um construtor padrão e um que define um caminho inicial.</span><span class="sxs-lookup"><span data-stu-id="f5d92-188">For example, <xref:System.Windows.Data.Binding> is a markup extension, with many properties that are settable through the extension in *property*`=`*value* form, but <xref:System.Windows.Data.Binding> only supports two constructors: a default constructor, and one that sets an initial path.</span></span>  
  
-   <span data-ttu-id="f5d92-189">Uma vírgula literal não pode ser passada para uma extensão de marcação sem escape.</span><span class="sxs-lookup"><span data-stu-id="f5d92-189">A literal comma cannot be passed to a markup extension without escapement.</span></span>  
  
<a name="EscapeSequences"></a>   
## <a name="escape-sequences-and-markup-extensions"></a><span data-ttu-id="f5d92-190">Sequências de escape e extensões de marcação</span><span class="sxs-lookup"><span data-stu-id="f5d92-190">Escape Sequences and Markup Extensions</span></span>  
 <span data-ttu-id="f5d92-191">A manipulação de atributos em um processador XAML utiliza as chaves como indicadores de uma sequência de extensão de marcação.</span><span class="sxs-lookup"><span data-stu-id="f5d92-191">Attribute handling in a XAML processor uses the curly braces as indicators of a markup extension sequence.</span></span> <span data-ttu-id="f5d92-192">Também é possível produzir um valor de atributo de caracteres de chave literais, se necessário, digitando uma sequência de escape usando um par de chaves vazias seguido da chave literal.</span><span class="sxs-lookup"><span data-stu-id="f5d92-192">It is also possible to produce a literal curly brace character attribute value if necessary, by entering an escape sequence using an empty curly brace pair followed by the literal curly brace.</span></span> <span data-ttu-id="f5d92-193">Ver [ {} sequência - extensão de marcação de Escape](../../xaml-services/escape-sequence-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="f5d92-193">See [{} Escape Sequence - Markup Extension](../../xaml-services/escape-sequence-markup-extension.md).</span></span>  
  
<a name="Nesting"></a>   
## <a name="nesting-markup-extensions-in-xaml-usage"></a><span data-ttu-id="f5d92-194">Aninhamento de extensões de marcação no uso do XAML</span><span class="sxs-lookup"><span data-stu-id="f5d92-194">Nesting Markup Extensions in XAML Usage</span></span>  
 <span data-ttu-id="f5d92-195">Há suporte para o aninhamento de várias extensões de marcação; cada extensão de marcação será avaliada detalhadamente em primeiro lugar.</span><span class="sxs-lookup"><span data-stu-id="f5d92-195">Nesting of multiple markup extensions is supported, and each markup extension will be evaluated deepest first.</span></span> <span data-ttu-id="f5d92-196">Considere, por exemplo, o uso a seguir:</span><span class="sxs-lookup"><span data-stu-id="f5d92-196">For example, consider the following usage:</span></span>  
  
```  
<Setter Property="Background"  
  Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />  
```  
  
 <span data-ttu-id="f5d92-197">Nesse uso, o demonstrativo `x:Static` é avaliado em primeiro lugar e retorna uma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="f5d92-197">In this usage, the `x:Static` statement is evaluated first and returns a string.</span></span> <span data-ttu-id="f5d92-198">Em seguida, essa cadeia de caracteres é utilizada como argumento para `DynamicResource`.</span><span class="sxs-lookup"><span data-stu-id="f5d92-198">That string is then used as the argument for `DynamicResource`.</span></span>  
  
## <a name="markup-extensions-and-property-element-syntax"></a><span data-ttu-id="f5d92-199">Extensões de marcação e sintaxe de elemento de propriedade</span><span class="sxs-lookup"><span data-stu-id="f5d92-199">Markup Extensions and Property Element Syntax</span></span>  
 <span data-ttu-id="f5d92-200">Quando usada como um elemento de objeto que preenche um valor de elemento de propriedade, uma classe de extensão de marcação é visualmente indistinguível de um elemento de objeto do tipo típico que pode ser usado em XAML.</span><span class="sxs-lookup"><span data-stu-id="f5d92-200">When used as an object element that fills a property element value, a markup extension class is visually indistinguishable from a typical type-backed object element that can be used in XAML.</span></span> <span data-ttu-id="f5d92-201">A diferença prática entre um elemento de objeto típico e uma extensão de marcação é que a extensão de marcação é avaliada como um valor tipado ou diferida como uma expressão.</span><span class="sxs-lookup"><span data-stu-id="f5d92-201">The practical difference between a typical object element and a markup extension is that the markup extension is either evaluated to a typed value or deferred as an expression.</span></span> <span data-ttu-id="f5d92-202">Portanto, os mecanismos para todos os possíveis erros de tipo de valores da propriedade para a extensão de marcação serão diferentes, de modo semelhante a como uma propriedade de associação tardia é tratada em outros modelos de programação.</span><span class="sxs-lookup"><span data-stu-id="f5d92-202">Therefore the mechanisms for any possible type errors of property values for the markup extension will be different, similar to how a late-bound property is treated in other programming models.</span></span> <span data-ttu-id="f5d92-203">Um elemento de objeto comum será avaliado para correspondência de tipo com relação à propriedade de destino definida quando o XAML é analisado.</span><span class="sxs-lookup"><span data-stu-id="f5d92-203">An ordinary object element will be evaluated for type match against the target property it is setting when the XAML is parsed.</span></span>  
  
 <span data-ttu-id="f5d92-204">Quando usadas na sintaxe do elemento de objeto para preencher um elemento de propriedade, a maioria das extensões de marcação não teria conteúdo ou nenhuma sintaxe de elemento de propriedade adicional em seu interior.</span><span class="sxs-lookup"><span data-stu-id="f5d92-204">Most markup extensions, when used in object element syntax to fill a property element, would not have content or any further property element syntax within.</span></span> <span data-ttu-id="f5d92-205">Portanto, a marca do elemento de objeto seria fechada e não forneceria nenhum elemento filho.</span><span class="sxs-lookup"><span data-stu-id="f5d92-205">Thus you would close the object element tag, and provide no child elements.</span></span> <span data-ttu-id="f5d92-206">Sempre que algum elemento de objeto é encontrado por um processador XAML, o construtor dessa classe é chamado, o que instancia o objeto criado do elemento analisado.</span><span class="sxs-lookup"><span data-stu-id="f5d92-206">Whenever any object element is encountered by a XAML processor, the constructor for that class is called, which instantiates the object created from the parsed element.</span></span> <span data-ttu-id="f5d92-207">Uma classe de extensão de marcação não é diferente: se você quiser que a extensão de marcação possa ser usada na sintaxe do elemento de objeto, um construtor padrão deverá ser fornecido.</span><span class="sxs-lookup"><span data-stu-id="f5d92-207">A markup extension class is no different: if you want your markup extension to be usable in object element syntax, you must provide a default constructor.</span></span> <span data-ttu-id="f5d92-208">Algumas extensões de marcação existentes têm pelo menos um valor da propriedade necessário que deve ser especificado para uma inicialização eficaz.</span><span class="sxs-lookup"><span data-stu-id="f5d92-208">Some existing markup extensions have at least one required property value that must be specified for effective initialization.</span></span> <span data-ttu-id="f5d92-209">Nesse caso, o valor da propriedade normalmente é fornecido como um atributo de propriedade no elemento de objeto.</span><span class="sxs-lookup"><span data-stu-id="f5d92-209">If so, that property value is typically given as a property attribute on the object element.</span></span> <span data-ttu-id="f5d92-210">No [Namespace de XAML (x) Recursos de linguagem](../../xaml-services/xaml-namespace-x-language-features.md) e [WPF XAML extensões](wpf-xaml-extensions.md) páginas, extensões de marcação que têm propriedades necessárias (e os nomes das propriedades necessárias) serão ser observadas de referência.</span><span class="sxs-lookup"><span data-stu-id="f5d92-210">In the [XAML Namespace (x:) Language Features](../../xaml-services/xaml-namespace-x-language-features.md) and [WPF XAML Extensions](wpf-xaml-extensions.md) reference pages, markup extensions that have required properties (and the names of required properties) will be noted.</span></span> <span data-ttu-id="f5d92-211">As páginas de referência também indicarão se alguma sintaxe de elemento de objeto ou alguma sintaxe de atributo não está autorizada para extensões de marcação específicas.</span><span class="sxs-lookup"><span data-stu-id="f5d92-211">Reference pages will also note if either object element syntax or attribute syntax is disallowed for particular markup extensions.</span></span> <span data-ttu-id="f5d92-212">Um caso notável é a [Extensão de marcação x:Array](../../xaml-services/x-array-markup-extension.md), que não pode dar suporte à sintaxe do atributo, porque o conteúdo dessa matriz deve ser especificado dentro da marcação como conteúdo.</span><span class="sxs-lookup"><span data-stu-id="f5d92-212">A notable case is [x:Array Markup Extension](../../xaml-services/x-array-markup-extension.md), which cannot support attribute syntax because the contents of that array must be specified within the tagging as content.</span></span> <span data-ttu-id="f5d92-213">Como o conteúdo da matriz é manipulado como objetos gerais, nenhum conversor de tipo padrão para o atributo é viável.</span><span class="sxs-lookup"><span data-stu-id="f5d92-213">The array contents are handled as general objects, therefore no default type converter for the attribute is feasible.</span></span> <span data-ttu-id="f5d92-214">Além disso, a [Extensão de marcação x:Array](../../xaml-services/x-array-markup-extension.md) exige um parâmetro `type`.</span><span class="sxs-lookup"><span data-stu-id="f5d92-214">Also, [x:Array Markup Extension](../../xaml-services/x-array-markup-extension.md) requires a `type` parameter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f5d92-215">Consulte também</span><span class="sxs-lookup"><span data-stu-id="f5d92-215">See also</span></span>

- [<span data-ttu-id="f5d92-216">Visão geral de XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="f5d92-216">XAML Overview (WPF)</span></span>](xaml-overview-wpf.md)
- [<span data-ttu-id="f5d92-217">Namespace de XAML (x) Recursos de linguagem</span><span class="sxs-lookup"><span data-stu-id="f5d92-217">XAML Namespace (x:) Language Features</span></span>](../../xaml-services/xaml-namespace-x-language-features.md)
- [<span data-ttu-id="f5d92-218">Extensões XAML WPF</span><span class="sxs-lookup"><span data-stu-id="f5d92-218">WPF XAML Extensions</span></span>](wpf-xaml-extensions.md)
- [<span data-ttu-id="f5d92-219">Extensão de marcação StaticResource</span><span class="sxs-lookup"><span data-stu-id="f5d92-219">StaticResource Markup Extension</span></span>](staticresource-markup-extension.md)
- [<span data-ttu-id="f5d92-220">Extensão de marcação de associação</span><span class="sxs-lookup"><span data-stu-id="f5d92-220">Binding Markup Extension</span></span>](binding-markup-extension.md)
- [<span data-ttu-id="f5d92-221">Extensão de marcação DynamicResource</span><span class="sxs-lookup"><span data-stu-id="f5d92-221">DynamicResource Markup Extension</span></span>](dynamicresource-markup-extension.md)
- [<span data-ttu-id="f5d92-222">Extensão de marcação x:Type</span><span class="sxs-lookup"><span data-stu-id="f5d92-222">x:Type Markup Extension</span></span>](../../xaml-services/x-type-markup-extension.md)
