---
title: Visão geral de objetos congeláveis
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Freezable objects [WPF], description
- unfreezing Freezable objects [WPF]
- classes [WPF], Freezable
ms.assetid: 89c71692-4f43-4057-b611-67c6a8a863a2
ms.openlocfilehash: a1006816168e405d0d79786b8430b802f1ec0928
ms.sourcegitcommit: 8c2ece71e54f46aef9a2153540d0bda7e74b19a9
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/11/2018
ms.locfileid: "44354159"
---
# <a name="freezable-objects-overview"></a><span data-ttu-id="ac223-102">Visão geral de objetos congeláveis</span><span class="sxs-lookup"><span data-stu-id="ac223-102">Freezable Objects Overview</span></span>
<span data-ttu-id="ac223-103">Este tópico descreve como usar com eficiência e criar <xref:System.Windows.Freezable> objetos, que oferecem recursos especiais que podem ajudar a melhorar o desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ac223-103">This topic describes how to effectively use and create <xref:System.Windows.Freezable> objects, which provide special features that can help improve application performance.</span></span> <span data-ttu-id="ac223-104">Exemplos de objetos congeláveis incluem pincéis, canetas, transformações, geometrias e animações.</span><span class="sxs-lookup"><span data-stu-id="ac223-104">Examples of freezable objects include brushes, pens, transformations, geometries, and animations.</span></span>  
  
<a name="whatisafreezable"></a>   
## <a name="what-is-a-freezable"></a><span data-ttu-id="ac223-105">O que é um Congelável?</span><span class="sxs-lookup"><span data-stu-id="ac223-105">What Is a Freezable?</span></span>  
 <span data-ttu-id="ac223-106">Um <xref:System.Windows.Freezable> é um tipo especial de objeto que tem dois estados: descongelado e congelado.</span><span class="sxs-lookup"><span data-stu-id="ac223-106">A <xref:System.Windows.Freezable> is a special type of object that has two states: unfrozen and frozen.</span></span> <span data-ttu-id="ac223-107">Quando descongelado, um <xref:System.Windows.Freezable> parece se comportar como qualquer outro objeto.</span><span class="sxs-lookup"><span data-stu-id="ac223-107">When unfrozen, a <xref:System.Windows.Freezable> appears to behave like any other object.</span></span> <span data-ttu-id="ac223-108">Quando congelado, um <xref:System.Windows.Freezable> não pode mais ser modificado.</span><span class="sxs-lookup"><span data-stu-id="ac223-108">When frozen, a <xref:System.Windows.Freezable> can no longer be modified.</span></span>  
  
 <span data-ttu-id="ac223-109">Um <xref:System.Windows.Freezable> fornece um <xref:System.Windows.Freezable.Changed> eventos para notificar observadores de quaisquer modificações ao objeto.</span><span class="sxs-lookup"><span data-stu-id="ac223-109">A <xref:System.Windows.Freezable> provides a <xref:System.Windows.Freezable.Changed> event to notify observers of any modifications to the object.</span></span> <span data-ttu-id="ac223-110">Congelando uma <xref:System.Windows.Freezable> pode melhorar seu desempenho, porque ele não precisa mais gastar recursos em notificações de alteração.</span><span class="sxs-lookup"><span data-stu-id="ac223-110">Freezing a <xref:System.Windows.Freezable> can improve its performance, because it no longer needs to spend resources on change notifications.</span></span> <span data-ttu-id="ac223-111">Um congelado <xref:System.Windows.Freezable> também pode ser compartilhado entre threads, enquanto um descongelado <xref:System.Windows.Freezable> não é possível.</span><span class="sxs-lookup"><span data-stu-id="ac223-111">A frozen <xref:System.Windows.Freezable> can also be shared across threads, while an unfrozen <xref:System.Windows.Freezable> cannot.</span></span>  
  
 <span data-ttu-id="ac223-112">Embora o <xref:System.Windows.Freezable> classe tem muitos aplicativos, mais <xref:System.Windows.Freezable> objetos em [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] relacionados ao subsistema de elementos gráficos.</span><span class="sxs-lookup"><span data-stu-id="ac223-112">Although the <xref:System.Windows.Freezable> class has many applications, most <xref:System.Windows.Freezable> objects in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] are related to the graphics sub-system.</span></span>  
  
 <span data-ttu-id="ac223-113">O <xref:System.Windows.Freezable> classe torna mais fácil de usar determinados objetos do sistema de elementos gráficos e pode ajudar a melhorar o desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ac223-113">The <xref:System.Windows.Freezable> class makes it easier to use certain graphics system objects and can help improve application performance.</span></span> <span data-ttu-id="ac223-114">Exemplos de tipos que herdam <xref:System.Windows.Freezable> incluem o <xref:System.Windows.Media.Brush>, <xref:System.Windows.Media.Transform>, e <xref:System.Windows.Media.Geometry> classes.</span><span class="sxs-lookup"><span data-stu-id="ac223-114">Examples of types that inherit from <xref:System.Windows.Freezable> include the <xref:System.Windows.Media.Brush>, <xref:System.Windows.Media.Transform>, and <xref:System.Windows.Media.Geometry> classes.</span></span> <span data-ttu-id="ac223-115">Como eles contêm recursos não gerenciados, o sistema deve monitorar as modificações a esses objetos e, em seguida, atualizar seus recursos não gerenciados correspondentes, quando houver uma alteração no objeto original.</span><span class="sxs-lookup"><span data-stu-id="ac223-115">Because they contain unmanaged resources, the system must monitor these objects for modifications, and then update their corresponding unmanaged resources when there is a change to the original object.</span></span> <span data-ttu-id="ac223-116">Mesmo se você não realmente modificar um objeto do sistema de elementos gráficos, o sistema ainda deverá gastar um pouco de seus recursos monitorando o objeto, para o caso de você alterá-lo.</span><span class="sxs-lookup"><span data-stu-id="ac223-116">Even if you don't actually modify a graphics system object, the system must still spend some of its resources monitoring the object, in case you do change it.</span></span>  
  
 <span data-ttu-id="ac223-117">Por exemplo, suponha que você crie um <xref:System.Windows.Media.SolidColorBrush> de pincel e usá-lo para pintar a tela de fundo de um botão.</span><span class="sxs-lookup"><span data-stu-id="ac223-117">For example, suppose you create a <xref:System.Windows.Media.SolidColorBrush> brush and use it to paint the background of a button.</span></span>  
  
 [!code-csharp[freezablesample_procedural#FrozenExamplePart1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#frozenexamplepart1)]
 [!code-vb[freezablesample_procedural#FrozenExamplePart1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#frozenexamplepart1)]  
  
 <span data-ttu-id="ac223-118">Quando o botão é renderizado, o subsistema de elementos gráficos do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] usa as informações fornecidas para pintar um grupo de pixels para criar a aparência de um botão.</span><span class="sxs-lookup"><span data-stu-id="ac223-118">When the button is rendered, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] graphics sub-system uses the information you provided to paint a group of pixels to create the appearance of a button.</span></span> <span data-ttu-id="ac223-119">Embora você tenha usado um pincel de cor sólida para descrever como o botão deveria ser pintado, seu pincel de cor sólida, na verdade, não faz a pintura.</span><span class="sxs-lookup"><span data-stu-id="ac223-119">Although you used a solid color brush to describe how the button should be painted, your solid color brush doesn't actually do the painting.</span></span> <span data-ttu-id="ac223-120">O sistema de elementos gráficos gera objetos rápidos e de baixo nível para o botão e o pincel e são esses objetos que realmente aparecem na tela.</span><span class="sxs-lookup"><span data-stu-id="ac223-120">The graphics system generates fast, low-level objects for the button and the brush, and it is those objects that actually appear on the screen.</span></span>  
  
 <span data-ttu-id="ac223-121">Se você fosse modificar o pincel, esses objetos de baixo nível precisariam ser regenerados.</span><span class="sxs-lookup"><span data-stu-id="ac223-121">If you were to modify the brush, those low-level objects would have to be regenerated.</span></span> <span data-ttu-id="ac223-122">A classe congelável é o que proporciona a um pincel a capacidade de localizar seus objetos gerados e de nível inferior correspondentes e atualizá-los quando forem alterados.</span><span class="sxs-lookup"><span data-stu-id="ac223-122">The freezable class is what gives a brush the ability to find its corresponding generated, low-level objects and to update them when it changes.</span></span> <span data-ttu-id="ac223-123">Quando essa capacidade é habilitada, significa que o pincel está "descongelado."</span><span class="sxs-lookup"><span data-stu-id="ac223-123">When this ability is enabled, the brush is said to be "unfrozen."</span></span>  
  
 <span data-ttu-id="ac223-124">Um congelável <xref:System.Windows.Freezable.Freeze%2A> método permite que você desative essa capacidade de AutoAtualização.</span><span class="sxs-lookup"><span data-stu-id="ac223-124">A freezable's <xref:System.Windows.Freezable.Freeze%2A> method enables you to disable this self-updating ability.</span></span> <span data-ttu-id="ac223-125">Você pode usar esse método para fazer com que o pincel se torne "congelado" ou não modificável.</span><span class="sxs-lookup"><span data-stu-id="ac223-125">You can use this method to make the brush become "frozen," or unmodifiable.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ac223-126">Nem todo objeto Congelável pode ser congelado.</span><span class="sxs-lookup"><span data-stu-id="ac223-126">Not every Freezable object can be frozen.</span></span> <span data-ttu-id="ac223-127">Para evitar lançar uma <xref:System.InvalidOperationException>, verifique o valor do objeto Freezable <xref:System.Windows.Freezable.CanFreeze%2A> propriedade para determinar se ele pode ser congelado antes de tentar congelá-lo.</span><span class="sxs-lookup"><span data-stu-id="ac223-127">To avoid throwing an <xref:System.InvalidOperationException>, check the value of the Freezable object's <xref:System.Windows.Freezable.CanFreeze%2A> property to determine whether it can be frozen before attempting to freeze it.</span></span>  
  
 [!code-csharp[freezablesample_procedural#FrozenExamplePart2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#frozenexamplepart2)]
 [!code-vb[freezablesample_procedural#FrozenExamplePart2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#frozenexamplepart2)]  
  
 <span data-ttu-id="ac223-128">Quando você não precisa mais modificar um congelável, congelá-lo fornece benefícios de desempenho.</span><span class="sxs-lookup"><span data-stu-id="ac223-128">When you no longer need to modify a freezable, freezing it provides performance benefits.</span></span> <span data-ttu-id="ac223-129">Se você congelasse o pincel nesse exemplo, o sistema de elementos gráficos não precisaria mais monitorar as alterações feitas nele.</span><span class="sxs-lookup"><span data-stu-id="ac223-129">If you were to freeze the brush in this example, the graphics system would no longer need to monitor it for changes.</span></span> <span data-ttu-id="ac223-130">O sistema de elementos gráficos também pode fazer outras otimizações, porque sabe que o pincel não será alterado.</span><span class="sxs-lookup"><span data-stu-id="ac223-130">The graphics system can also make other optimizations, because it knows the brush won't change.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ac223-131">Por conveniência, objetos congeláveis permanecem descongelados, a menos que você explicitamente os congele.</span><span class="sxs-lookup"><span data-stu-id="ac223-131">For convenience, freezable objects remain unfrozen unless you explicitly freeze them.</span></span>  
  
<a name="frozenfreezables"></a>   
## <a name="using-freezables"></a><span data-ttu-id="ac223-132">Usando Congeláveis</span><span class="sxs-lookup"><span data-stu-id="ac223-132">Using Freezables</span></span>  
 <span data-ttu-id="ac223-133">O uso de um congelável descongelado é como o uso de qualquer outro tipo de objeto.</span><span class="sxs-lookup"><span data-stu-id="ac223-133">Using an unfrozen freezable is like using any other type of object.</span></span> <span data-ttu-id="ac223-134">No exemplo a seguir, a cor de um <xref:System.Windows.Media.SolidColorBrush> é alterada de amarelo para vermelho depois que ele é usado para pintar a tela de fundo de um botão.</span><span class="sxs-lookup"><span data-stu-id="ac223-134">In the following example, the color of a <xref:System.Windows.Media.SolidColorBrush> is changed from yellow to red after it's used to paint the background of a button.</span></span> <span data-ttu-id="ac223-135">O sistema de elementos gráficos funciona nos bastidores para alterar automaticamente o botão de amarelo para vermelho na próxima vez que a tela for atualizada.</span><span class="sxs-lookup"><span data-stu-id="ac223-135">The graphics system works behind the scenes to automatically change the button from yellow to red the next time the screen is refreshed.</span></span>  
  
 [!code-csharp[freezablesample_procedural#UnFrozenExampleShort](../../../../samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#unfrozenexampleshort)]
 [!code-vb[freezablesample_procedural#UnFrozenExampleShort](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#unfrozenexampleshort)]  
  
### <a name="freezing-a-freezable"></a><span data-ttu-id="ac223-136">Congelando uma congelável</span><span class="sxs-lookup"><span data-stu-id="ac223-136">Freezing a Freezable</span></span>  
 <span data-ttu-id="ac223-137">Para fazer uma <xref:System.Windows.Freezable> não modificável, chame seu <xref:System.Windows.Freezable.Freeze%2A> método.</span><span class="sxs-lookup"><span data-stu-id="ac223-137">To make a <xref:System.Windows.Freezable> unmodifiable, you call its <xref:System.Windows.Freezable.Freeze%2A> method.</span></span> <span data-ttu-id="ac223-138">Quando você congela um objeto que contém objetos congeláveis, esses objetos também são congelados.</span><span class="sxs-lookup"><span data-stu-id="ac223-138">When you freeze an object that contains freezable objects, those objects are frozen as well.</span></span> <span data-ttu-id="ac223-139">Por exemplo, se você congela um <xref:System.Windows.Media.PathGeometry>, as figuras e segmentos que ele contém seriam congelados também.</span><span class="sxs-lookup"><span data-stu-id="ac223-139">For example, if you freeze a <xref:System.Windows.Media.PathGeometry>, the figures and segments it contains would be frozen too.</span></span>  
  
 <span data-ttu-id="ac223-140">Um congelável **não** poderá ser congelado se alguma das seguintes condições for verdadeira:</span><span class="sxs-lookup"><span data-stu-id="ac223-140">A Freezable **can't** be frozen if any of the following are true:</span></span>  
  
-   <span data-ttu-id="ac223-141">Ele tem propriedades animadas ou associadas a dados.</span><span class="sxs-lookup"><span data-stu-id="ac223-141">It has animated or data bound properties.</span></span>  
  
-   <span data-ttu-id="ac223-142">Ele tem propriedades definidas por um recurso dinâmico.</span><span class="sxs-lookup"><span data-stu-id="ac223-142">It has properties set by a dynamic resource.</span></span> <span data-ttu-id="ac223-143">(Consulte os [recursos XAML](../../../../docs/framework/wpf/advanced/xaml-resources.md) para obter mais informações sobre recursos dinâmicos).</span><span class="sxs-lookup"><span data-stu-id="ac223-143">(See the [XAML Resources](../../../../docs/framework/wpf/advanced/xaml-resources.md) for more information about dynamic resources.)</span></span>  
  
-   <span data-ttu-id="ac223-144">Ele contém <xref:System.Windows.Freezable> subobjetos não podem ser congelados.</span><span class="sxs-lookup"><span data-stu-id="ac223-144">It contains <xref:System.Windows.Freezable> sub-objects that can't be frozen.</span></span>  
  
 <span data-ttu-id="ac223-145">Se essas condições forem falsas, e você não pretende modificar o <xref:System.Windows.Freezable>, em seguida, você deverá congelá-lo para obter os benefícios de desempenho descritos anteriormente.</span><span class="sxs-lookup"><span data-stu-id="ac223-145">If these conditions are false, and you don't intend to modify the <xref:System.Windows.Freezable>, then you should freeze it to gain the performance benefits described earlier.</span></span>  
  
 <span data-ttu-id="ac223-146">Depois de chamar um congelável <xref:System.Windows.Freezable.Freeze%2A> método, ele não pode mais ser modificado.</span><span class="sxs-lookup"><span data-stu-id="ac223-146">Once you call a freezable's <xref:System.Windows.Freezable.Freeze%2A> method, it can no longer be modified.</span></span> <span data-ttu-id="ac223-147">A tentativa de modificar um congelado objeto faz com que um <xref:System.InvalidOperationException> seja lançada.</span><span class="sxs-lookup"><span data-stu-id="ac223-147">Attempting to modify a frozen object causes an <xref:System.InvalidOperationException> to be thrown.</span></span> <span data-ttu-id="ac223-148">O código a seguir gera uma exceção, pois tenta modificar o pincel depois de ele ter sido congelado.</span><span class="sxs-lookup"><span data-stu-id="ac223-148">The following code throws an exception, because we attempt to modify the brush after it's been frozen.</span></span>  
  
 [!code-csharp[freezablesample_procedural#ExceptionExample](../../../../samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#exceptionexample)]
 [!code-vb[freezablesample_procedural#ExceptionExample](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#exceptionexample)]  
  
 <span data-ttu-id="ac223-149">Para evitar lançar essa exceção, você pode usar o <xref:System.Windows.Freezable.IsFrozen%2A> método para determinar se um <xref:System.Windows.Freezable> está congelado.</span><span class="sxs-lookup"><span data-stu-id="ac223-149">To avoid throwing this exception, you can use the <xref:System.Windows.Freezable.IsFrozen%2A> method to determine whether a <xref:System.Windows.Freezable> is frozen.</span></span>  
  
 [!code-csharp[freezablesample_procedural#CheckIsFrozenExample](../../../../samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#checkisfrozenexample)]
 [!code-vb[freezablesample_procedural#CheckIsFrozenExample](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#checkisfrozenexample)]  
  
 <span data-ttu-id="ac223-150">No exemplo de código anterior, uma cópia modificável foi feita de um objeto congelado usando o <xref:System.Windows.Freezable.Clone%2A> método.</span><span class="sxs-lookup"><span data-stu-id="ac223-150">In the preceding code example, a modifiable copy was made of a frozen object using the <xref:System.Windows.Freezable.Clone%2A> method.</span></span> <span data-ttu-id="ac223-151">A próxima seção aborda a clonagem em mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="ac223-151">The next section discusses cloning in more detail.</span></span>  
  
 <span data-ttu-id="ac223-152">**Observação** porque um congelado freezable não pode ser animado, o sistema de animação criará automaticamente clones modificáveis de congelado <xref:System.Windows.Freezable> objetos quando você tenta animá-los com um <xref:System.Windows.Media.Animation.Storyboard>.</span><span class="sxs-lookup"><span data-stu-id="ac223-152">**Note** Because a frozen freezable cannot be animated, the animation system will automatically create modifiable clones of frozen <xref:System.Windows.Freezable> objects when you try to animate them with a <xref:System.Windows.Media.Animation.Storyboard>.</span></span> <span data-ttu-id="ac223-153">Para eliminar a sobrecarga de desempenho causada pela clonagem, deixe um objeto descongelado se você pretende animá-lo.</span><span class="sxs-lookup"><span data-stu-id="ac223-153">To eliminate the performance overhead caused by cloning, leave an object unfrozen if you intend to animate it.</span></span> <span data-ttu-id="ac223-154">Para obter mais informações sobre animação com storyboards, consulte a [Visão geral de storyboards](../../../../docs/framework/wpf/graphics-multimedia/storyboards-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ac223-154">For more information about animating with storyboards, see the [Storyboards Overview](../../../../docs/framework/wpf/graphics-multimedia/storyboards-overview.md).</span></span>  
  
### <a name="freezing-from-markup"></a><span data-ttu-id="ac223-155">Congelamento na marcação</span><span class="sxs-lookup"><span data-stu-id="ac223-155">Freezing from Markup</span></span>  
 <span data-ttu-id="ac223-156">Para congelar um <xref:System.Windows.Freezable> objeto declarado na marcação, você usa o `PresentationOptions:Freeze` atributo.</span><span class="sxs-lookup"><span data-stu-id="ac223-156">To freeze a <xref:System.Windows.Freezable> object declared in markup, you use the `PresentationOptions:Freeze` attribute.</span></span> <span data-ttu-id="ac223-157">No exemplo a seguir, um <xref:System.Windows.Media.SolidColorBrush> é declarado como um recurso de página e congelado.</span><span class="sxs-lookup"><span data-stu-id="ac223-157">In the following example, a <xref:System.Windows.Media.SolidColorBrush> is declared as a page resource and frozen.</span></span> <span data-ttu-id="ac223-158">Em seguida, ele é usado para definir a tela de fundo de um botão.</span><span class="sxs-lookup"><span data-stu-id="ac223-158">It is then used to set the background of a button.</span></span>  
  
 [!code-xaml[FreezableSample#FreezeFromMarkupWholePage](../../../../samples/snippets/csharp/VS_Snippets_Wpf/FreezableSample/CS/FreezeFromMarkupExample.xaml#freezefrommarkupwholepage)]  
  
 <span data-ttu-id="ac223-159">Para usar o atributo `Freeze`, você deve mapear para o namespace de opções de apresentação: `http://schemas.microsoft.com/winfx/2006/xaml/presentation/options`.</span><span class="sxs-lookup"><span data-stu-id="ac223-159">To use the `Freeze` attribute, you must map to the presentation options namespace: `http://schemas.microsoft.com/winfx/2006/xaml/presentation/options`.</span></span> <span data-ttu-id="ac223-160">O `PresentationOptions` é o prefixo recomendado para mapear este namespace:</span><span class="sxs-lookup"><span data-stu-id="ac223-160">`PresentationOptions` is the recommended prefix for mapping this namespace:</span></span>  
  
```  
xmlns:PresentationOptions="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"   
```  
  
 <span data-ttu-id="ac223-161">Como nem todos os leitores de XAML reconhecem esse atributo, é recomendável que você use o [mc:Ignorable Attribute](../../../../docs/framework/wpf/advanced/mc-ignorable-attribute.md) para marcar o atributo `Presentation:Freeze` como ignorável:</span><span class="sxs-lookup"><span data-stu-id="ac223-161">Because not all XAML readers recognize this attribute, it's recommended that you use the [mc:Ignorable Attribute](../../../../docs/framework/wpf/advanced/mc-ignorable-attribute.md) to mark the `Presentation:Freeze` attribute as ignorable:</span></span>  
  
```  
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"  
mc:Ignorable="PresentationOptions"  
```  
  
 <span data-ttu-id="ac223-162">Para obter mais informações, consulte a página [Atributo mc:Ignorable](../../../../docs/framework/wpf/advanced/mc-ignorable-attribute.md).</span><span class="sxs-lookup"><span data-stu-id="ac223-162">For more information, see the [mc:Ignorable Attribute](../../../../docs/framework/wpf/advanced/mc-ignorable-attribute.md) page.</span></span>  
  
### <a name="unfreezing-a-freezable"></a><span data-ttu-id="ac223-163">"Descongelando" um Congelável</span><span class="sxs-lookup"><span data-stu-id="ac223-163">"Unfreezing" a Freezable</span></span>  
 <span data-ttu-id="ac223-164">Após congelado, um <xref:System.Windows.Freezable> nunca pode ser modificado ou descongelado; no entanto, você pode criar um clone descongelado usando o <xref:System.Windows.Freezable.Clone%2A> ou <xref:System.Windows.Freezable.CloneCurrentValue%2A> método.</span><span class="sxs-lookup"><span data-stu-id="ac223-164">Once frozen, a <xref:System.Windows.Freezable> can never be modified or unfrozen; however, you can create an unfrozen clone using the <xref:System.Windows.Freezable.Clone%2A> or <xref:System.Windows.Freezable.CloneCurrentValue%2A> method.</span></span>  
  
 <span data-ttu-id="ac223-165">No exemplo a seguir, a tela de fundo do botão é definida com um pincel e, então, esse pincel é congelado.</span><span class="sxs-lookup"><span data-stu-id="ac223-165">In the following example, the button's background is set with a brush and that brush is then frozen.</span></span> <span data-ttu-id="ac223-166">Uma cópia descongelada é feita do pincel usando o <xref:System.Windows.Freezable.Clone%2A> método.</span><span class="sxs-lookup"><span data-stu-id="ac223-166">An unfrozen copy is made of the brush using the <xref:System.Windows.Freezable.Clone%2A> method.</span></span> <span data-ttu-id="ac223-167">O clone é modificado e usado para alterar a tela de fundo do botão de amarela para vermelha.</span><span class="sxs-lookup"><span data-stu-id="ac223-167">The clone is modified and used to change the button's background from yellow to red.</span></span>  
  
 [!code-csharp[freezablesample_procedural#CloneExample](../../../../samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#cloneexample)]
 [!code-vb[freezablesample_procedural#CloneExample](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#cloneexample)]  
  
> [!NOTE]
>  <span data-ttu-id="ac223-168">Independentemente de qual método de clonagem usar, animações nunca são copiadas para o novo <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="ac223-168">Regardless of which clone method you use, animations are never copied to the new <xref:System.Windows.Freezable>.</span></span>  
  
 <span data-ttu-id="ac223-169">O <xref:System.Windows.Freezable.Clone%2A> e <xref:System.Windows.Freezable.CloneCurrentValue%2A> métodos produzem cópias profundas do congelável.</span><span class="sxs-lookup"><span data-stu-id="ac223-169">The <xref:System.Windows.Freezable.Clone%2A> and <xref:System.Windows.Freezable.CloneCurrentValue%2A> methods produce deep copies of the freezable.</span></span> <span data-ttu-id="ac223-170">Se o congelável contém outros objetos congeláveis congelados, eles também são clonados e tornados modificáveis.</span><span class="sxs-lookup"><span data-stu-id="ac223-170">If the freezable contains other frozen freezable objects, they are also cloned and made modifiable.</span></span> <span data-ttu-id="ac223-171">Por exemplo, se você clonar um congelado <xref:System.Windows.Media.PathGeometry> para torná-lo modificável, as figuras e segmentos que ele contém são também copiados e tornados modificáveis.</span><span class="sxs-lookup"><span data-stu-id="ac223-171">For example, if you clone a frozen <xref:System.Windows.Media.PathGeometry> to make it modifiable, the figures and segments it contains are also copied and made modifiable.</span></span>  
  
<a name="createyourownfreezableclass"></a>   
## <a name="creating-your-own-freezable-class"></a><span data-ttu-id="ac223-172">Criando sua própria classe Congelável</span><span class="sxs-lookup"><span data-stu-id="ac223-172">Creating Your Own Freezable Class</span></span>  
 <span data-ttu-id="ac223-173">Uma classe que deriva de <xref:System.Windows.Freezable> obtém os recursos a seguir.</span><span class="sxs-lookup"><span data-stu-id="ac223-173">A class that derives from <xref:System.Windows.Freezable> gains the following features.</span></span>  
  
-   <span data-ttu-id="ac223-174">Estados especiais: um estado somente leitura (congelada) e gravável.</span><span class="sxs-lookup"><span data-stu-id="ac223-174">Special states: a read-only (frozen) and a writable state.</span></span>  
  
-   <span data-ttu-id="ac223-175">Acesso thread-safe: um congelado <xref:System.Windows.Freezable> pode ser compartilhado entre threads.</span><span class="sxs-lookup"><span data-stu-id="ac223-175">Thread safety: a frozen <xref:System.Windows.Freezable> can be shared across threads.</span></span>  
  
-   <span data-ttu-id="ac223-176">Notificação de alteração detalhada: ao contrário de outras <xref:System.Windows.DependencyObject>s, objetos congeláveis fornecem notificações de alteração quando valores da subpropriedade são alteram.</span><span class="sxs-lookup"><span data-stu-id="ac223-176">Detailed change notification: Unlike other <xref:System.Windows.DependencyObject>s, Freezable objects provide change notifications when sub-property values change.</span></span>  
  
-   <span data-ttu-id="ac223-177">Fácil clonagem: a classe Congelável tem vários métodos já implementados que produzem clones profundos.</span><span class="sxs-lookup"><span data-stu-id="ac223-177">Easy cloning: the Freezable class has already implemented several methods that produce deep clones.</span></span>  
  
 <span data-ttu-id="ac223-178">Um <xref:System.Windows.Freezable> é um tipo de <xref:System.Windows.DependencyObject>e, portanto, usa o sistema de propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="ac223-178">A <xref:System.Windows.Freezable> is a type of <xref:System.Windows.DependencyObject>, and therefore uses the dependency property system.</span></span> <span data-ttu-id="ac223-179">As propriedades de classe não precisam ser propriedades de dependência, mas usar as propriedades de dependência reduzirá a quantidade de código que você precisa escrever, porque o <xref:System.Windows.Freezable> classe foi projetada com propriedades de dependência em mente.</span><span class="sxs-lookup"><span data-stu-id="ac223-179">Your class properties don't have to be dependency properties, but using dependency properties will reduce the amount of code you have to write, because the <xref:System.Windows.Freezable> class was designed with dependency properties in mind.</span></span> <span data-ttu-id="ac223-180">Para obter mais informações sobre o sistema de propriedade de dependência, consulte o [Visão geral de propriedades de dependência](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ac223-180">For more information about the dependency property system, see the [Dependency Properties Overview](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md).</span></span>  
  
 <span data-ttu-id="ac223-181">Cada <xref:System.Windows.Freezable> subclasse deve substituir o <xref:System.Windows.Freezable.CreateInstanceCore%2A> método.</span><span class="sxs-lookup"><span data-stu-id="ac223-181">Every <xref:System.Windows.Freezable> subclass must override the <xref:System.Windows.Freezable.CreateInstanceCore%2A> method.</span></span> <span data-ttu-id="ac223-182">Se sua classe usa as propriedades de dependência para todos os seus dados, você terminou.</span><span class="sxs-lookup"><span data-stu-id="ac223-182">If your class uses dependency properties for all its data, you're finished.</span></span>  
  
 <span data-ttu-id="ac223-183">Se sua classe contém membros de dados de propriedade que não são de dependência, você também deve substituir os métodos a seguir:</span><span class="sxs-lookup"><span data-stu-id="ac223-183">If your class contains non-dependency property data members, you must also override the following methods:</span></span>  
  
-   <xref:System.Windows.Freezable.CloneCore%2A>  
  
-   <xref:System.Windows.Freezable.CloneCurrentValueCore%2A>  
  
-   <xref:System.Windows.Freezable.GetAsFrozenCore%2A>  
  
-   <xref:System.Windows.Freezable.GetCurrentValueAsFrozenCore%2A>  
  
-   <xref:System.Windows.Freezable.FreezeCore%2A>  
  
 <span data-ttu-id="ac223-184">Você também deve observar as seguintes regras para o acesso e gravação em membros de dados que não são propriedades de dependência:</span><span class="sxs-lookup"><span data-stu-id="ac223-184">You must also observe the following rules for accessing and writing to data members that are not dependency properties:</span></span>  
  
-   <span data-ttu-id="ac223-185">No início de qualquer [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)] que lê membros de dados de propriedade não são de dependência, chame o <xref:System.Windows.Freezable.ReadPreamble%2A> método.</span><span class="sxs-lookup"><span data-stu-id="ac223-185">At the beginning of any [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)] that reads non-dependency property data members, call the <xref:System.Windows.Freezable.ReadPreamble%2A> method.</span></span>  
  
-   <span data-ttu-id="ac223-186">No início de qualquer API que grava os membros de dados de propriedade não são de dependência, chame o <xref:System.Windows.Freezable.WritePreamble%2A> método.</span><span class="sxs-lookup"><span data-stu-id="ac223-186">At the beginning of any API that writes non-dependency property data members, call the <xref:System.Windows.Freezable.WritePreamble%2A> method.</span></span> <span data-ttu-id="ac223-187">(Depois de ter chamado <xref:System.Windows.Freezable.WritePreamble%2A> em um [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)], você não precisa fazer uma chamada adicional para <xref:System.Windows.Freezable.ReadPreamble%2A> se você também pode ler membros de dados de propriedade não são de dependência.)</span><span class="sxs-lookup"><span data-stu-id="ac223-187">(Once you've called <xref:System.Windows.Freezable.WritePreamble%2A> in an [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)], you don't need to make an additional call to <xref:System.Windows.Freezable.ReadPreamble%2A> if you also read non-dependency property data members.)</span></span>  
  
-   <span data-ttu-id="ac223-188">Chamar o <xref:System.Windows.Freezable.WritePostscript%2A> método antes de sair de métodos que gravam em membros de dados de propriedade não são de dependência.</span><span class="sxs-lookup"><span data-stu-id="ac223-188">Call the <xref:System.Windows.Freezable.WritePostscript%2A> method before exiting methods that write to non-dependency property data members.</span></span>  
  
 <span data-ttu-id="ac223-189">Se sua classe contém os membros de dados de propriedade de dependência não são <xref:System.Windows.DependencyObject> objetos, você também deve chamar o <xref:System.Windows.Freezable.OnFreezablePropertyChanged%2A> método cada vez que fizer alterações em seus valores, mesmo se você estiver configurando o membro `null`.</span><span class="sxs-lookup"><span data-stu-id="ac223-189">If your class contains non-dependency-property data members that are <xref:System.Windows.DependencyObject> objects, you must also call the <xref:System.Windows.Freezable.OnFreezablePropertyChanged%2A> method each time you change on of their values, even if you're setting the member to `null`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ac223-190">É muito importante que você comece cada <xref:System.Windows.Freezable> método substituir com uma chamada para a implementação base.</span><span class="sxs-lookup"><span data-stu-id="ac223-190">It's very important that you begin each <xref:System.Windows.Freezable> method you override with a call to the base implementation.</span></span>  
  
 <span data-ttu-id="ac223-191">Para obter um exemplo de um personalizado <xref:System.Windows.Freezable> classe, consulte a [amostra de animação personalizada](https://go.microsoft.com/fwlink/?LinkID=159981).</span><span class="sxs-lookup"><span data-stu-id="ac223-191">For an example of a custom <xref:System.Windows.Freezable> class, see the [Custom Animation Sample](https://go.microsoft.com/fwlink/?LinkID=159981).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ac223-192">Consulte também</span><span class="sxs-lookup"><span data-stu-id="ac223-192">See Also</span></span>  
 <xref:System.Windows.Freezable>  
 [<span data-ttu-id="ac223-193">Exemplo de animação personalizada</span><span class="sxs-lookup"><span data-stu-id="ac223-193">Custom Animation Sample</span></span>](https://go.microsoft.com/fwlink/?LinkID=159981)  
 [<span data-ttu-id="ac223-194">Visão geral das propriedades da dependência</span><span class="sxs-lookup"><span data-stu-id="ac223-194">Dependency Properties Overview</span></span>](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)  
 [<span data-ttu-id="ac223-195">Propriedades de dependência personalizada</span><span class="sxs-lookup"><span data-stu-id="ac223-195">Custom Dependency Properties</span></span>](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md)
