---
title: Visão geral das regiões de tecnologia
ms.date: 03/30/2017
helpviewer_keywords:
- window regions [WPF]
- Win32 code [WPF], WPF interoperation
- Win32 code [WPF], airspace
- airspace [WPF]
- interoperability [WPF], airspace
- Win32 code [WPF], window regions
ms.assetid: b7cc350f-b9e2-48b1-be14-60f3d853222e
ms.openlocfilehash: a169064052a567694b1cbd1e2f8ac2f00b047a68
ms.sourcegitcommit: 3eeea78f52ca771087a6736c23f74600cc662658
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/31/2019
ms.locfileid: "68671827"
---
# <a name="technology-regions-overview"></a><span data-ttu-id="eb20e-102">Visão geral das regiões de tecnologia</span><span class="sxs-lookup"><span data-stu-id="eb20e-102">Technology Regions Overview</span></span>
<span data-ttu-id="eb20e-103">Se várias tecnologias de apresentação forem usadas em um aplicativo, como WPF, Win32 ou DirectX, elas deverão compartilhar as áreas de renderização em uma janela de nível superior comum.</span><span class="sxs-lookup"><span data-stu-id="eb20e-103">If multiple presentation technologies are used in an application, such as WPF, Win32, or DirectX, they must share the rendering areas within a common top-level window.</span></span> <span data-ttu-id="eb20e-104">Este tópico descreve problemas que podem influenciar a apresentação e a entrada para seu aplicativo de interoperação do WPF.</span><span class="sxs-lookup"><span data-stu-id="eb20e-104">This topic describes issues that might influence the presentation and input for your WPF interoperation application.</span></span>  
  
## <a name="regions"></a><span data-ttu-id="eb20e-105">Regiões</span><span class="sxs-lookup"><span data-stu-id="eb20e-105">Regions</span></span>  
 <span data-ttu-id="eb20e-106">Em uma janela de nível superior, você pode conceitualizar que cada HWND que abrange uma das tecnologias de um aplicativo de interoperação tem sua própria região (também chamada de "espaço aéreo").</span><span class="sxs-lookup"><span data-stu-id="eb20e-106">Within a top-level window, you can conceptualize that each HWND that comprises one of the technologies of an interoperation application has its own region (also called "airspace").</span></span> <span data-ttu-id="eb20e-107">Cada pixel na janela pertence a exatamente um HWND, que constitui a região daquele HWND.</span><span class="sxs-lookup"><span data-stu-id="eb20e-107">Each pixel within the window belongs to exactly one HWND, which constitutes the region of that HWND.</span></span> <span data-ttu-id="eb20e-108">(Estritamente falando, haverá mais de uma região [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] se houver mais de um HWND [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], mas para os fins desta discussão, suponha que haja apenas um).</span><span class="sxs-lookup"><span data-stu-id="eb20e-108">(Strictly speaking, there is more than one [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] region if there is more than one [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] HWND, but for purposes of this discussion, you can assume there is only one).</span></span> <span data-ttu-id="eb20e-109">A região implica que todas as camadas ou outras janelas que tentarem renderizar acima daquele pixel durante o tempo de vida do aplicativo devem ser parte da mesma tecnologia de nível de renderização.</span><span class="sxs-lookup"><span data-stu-id="eb20e-109">The region implies that all layers or other windows that attempt to render above that pixel during application lifetime must be part of the same render-level technology.</span></span> <span data-ttu-id="eb20e-110">A tentativa de renderizar [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] pixels em [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] clientes potenciais para resultados indesejáveis e não é permitida tanto quanto possível por meio das APIs de interoperação.</span><span class="sxs-lookup"><span data-stu-id="eb20e-110">Attempting to render [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] pixels over [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] leads to undesirable results, and is disallowed as much as possible through the interoperation APIs.</span></span>  
  
### <a name="region-examples"></a><span data-ttu-id="eb20e-111">Exemplos de região</span><span class="sxs-lookup"><span data-stu-id="eb20e-111">Region Examples</span></span>  
 <span data-ttu-id="eb20e-112">A ilustração a seguir mostra um aplicativo que [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]combina, DirectX e [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="eb20e-112">The following illustration shows an application that mixes [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)], DirectX, and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="eb20e-113">Cada tecnologia usa seu próprio conjunto de pixels separado, sem sobreposição e não tem problemas de região.</span><span class="sxs-lookup"><span data-stu-id="eb20e-113">Each technology uses its own separate, non-overlapping set of pixels, and there are no region issues.</span></span>  
  
 ![Um exemplo de um aplicativo que combina Win32, DirectX e WPF.](./media/technology-regions-overview/win32-directx-windows-presentation-foundation-application.png)  
  
 <span data-ttu-id="eb20e-115">Suponha que esse aplicativo usa a posição do ponteiro do mouse para criar uma animação que tenta renderizar sobre qualquer uma dessas três regiões.</span><span class="sxs-lookup"><span data-stu-id="eb20e-115">Suppose that this application uses the mouse pointer position to create an animation that attempts to render over any of these three regions.</span></span> <span data-ttu-id="eb20e-116">Não importa qual tecnologia era responsável pela animação em si, essa tecnologia violaria a região das outras duas.</span><span class="sxs-lookup"><span data-stu-id="eb20e-116">No matter which technology was responsible for the animation itself, that technology would violate the region of the other two.</span></span> <span data-ttu-id="eb20e-117">A ilustração a seguir mostra uma tentativa de renderizar um círculo do WPF em uma região do Win32.</span><span class="sxs-lookup"><span data-stu-id="eb20e-117">The following illustration shows an attempt to render a WPF circle over a Win32 region.</span></span>  
  
 ![Uma tentativa de renderizar um círculo do WPF em uma região Win32.](./media/technology-regions-overview/render-windows-presentation-foundation-circle-over-win32-region.png)  
  
 <span data-ttu-id="eb20e-119">Outra violação ocorrerá se você tenta usar a transparência/combinação alfa entre tecnologias diferentes.</span><span class="sxs-lookup"><span data-stu-id="eb20e-119">Another violation is if you try to use transparency/alpha blending between different technologies.</span></span>  <span data-ttu-id="eb20e-120">Na ilustração a seguir, a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] caixa viola as regiões [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] do e do DirectX.</span><span class="sxs-lookup"><span data-stu-id="eb20e-120">In the following illustration, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] box violates the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] and DirectX regions.</span></span> <span data-ttu-id="eb20e-121">Como os pixels nessa [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] caixa são semitransparentes, eles teriam que ser de propriedade de acordo com o DirectX [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]e, o que não é possível.</span><span class="sxs-lookup"><span data-stu-id="eb20e-121">Because pixels in that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] box are semi-transparent, they would have to be owned jointly by both DirectX and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], which is not possible.</span></span>  <span data-ttu-id="eb20e-122">Portanto, essa é outra violação e não pode ser compilada.</span><span class="sxs-lookup"><span data-stu-id="eb20e-122">So this is another violation and cannot be built.</span></span>  
  
 ![Diagrama mostrando uma caixa do WPF violando as regiões Win32 e DirectX.](./media/technology-regions-overview/windows-foundation-presentation-box-violate-win32-directx-region.png)  
  
 <span data-ttu-id="eb20e-124">Os três exemplos anteriores usaram regiões retangulares. No entanto, formas diferentes podem ser usadas.</span><span class="sxs-lookup"><span data-stu-id="eb20e-124">The previous three examples used rectangular regions, but different shapes are possible.</span></span>  <span data-ttu-id="eb20e-125">Por exemplo, uma região pode ter um espaço.</span><span class="sxs-lookup"><span data-stu-id="eb20e-125">For example, a region can have a hole.</span></span> <span data-ttu-id="eb20e-126">A ilustração a seguir mostra [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] uma região com um buraco retangular. esse é o tamanho [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] das regiões e do DirectX combinados.</span><span class="sxs-lookup"><span data-stu-id="eb20e-126">The following illustration shows a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] region with a rectangular hole this is the size of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and DirectX regions combined.</span></span>  
  
 ![Diagrama que mostra uma região Win32 com um buraco retangular.](./media/technology-regions-overview/win32-region-rectangular-hole.png)  
  
 <span data-ttu-id="eb20e-128">As regiões também podem ser totalmente não retangulares ou ter qualquer forma descrita por um HRGN [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] (região).</span><span class="sxs-lookup"><span data-stu-id="eb20e-128">Regions can also be completely nonrectangular, or any shape describable by a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] HRGN (region).</span></span>  
  
 ![Diagrama que mostra uma região não retangular.](./media/technology-regions-overview/nonrectangular-win32-region.png)  
  
## <a name="transparency-and-top-level-windows"></a><span data-ttu-id="eb20e-130">Transparência e janelas de nível superior</span><span class="sxs-lookup"><span data-stu-id="eb20e-130">Transparency and Top-Level Windows</span></span>  
 <span data-ttu-id="eb20e-131">O gerenciador de janelas no Windows, de fato, processa apenas HWNDs [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span><span class="sxs-lookup"><span data-stu-id="eb20e-131">The window manager in Windows only really processes [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] HWNDs.</span></span> <span data-ttu-id="eb20e-132">Portanto, cada [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window> um é um HWND.</span><span class="sxs-lookup"><span data-stu-id="eb20e-132">Therefore, every [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window> is an HWND.</span></span> <span data-ttu-id="eb20e-133">O <xref:System.Windows.Window> HWND deve obedecer às regras gerais para qualquer HWND.</span><span class="sxs-lookup"><span data-stu-id="eb20e-133">The <xref:System.Windows.Window> HWND must abide by the general rules for any HWND.</span></span> <span data-ttu-id="eb20e-134">Dentro desse HWND, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] o código pode fazer tudo o [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] que as APIs gerais dão suporte.</span><span class="sxs-lookup"><span data-stu-id="eb20e-134">Within that HWND, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] code can do whatever the overall [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] APIs support.</span></span> <span data-ttu-id="eb20e-135">Mas, para que haja interações com outros HWNDs na área de trabalho, o [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] deve obedecer às regras de processamento e renderização do [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span><span class="sxs-lookup"><span data-stu-id="eb20e-135">But for interactions with other HWNDs on the desktop, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] must abide by [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] processing and rendering rules.</span></span>  [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="eb20e-136">dá suporte a janelas não retangulares usando [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] APIs — HRGNs para janelas não retangulares e janelas em camadas para um alfa por pixel.</span><span class="sxs-lookup"><span data-stu-id="eb20e-136">supports non-rectangular windows by using [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] APIs—HRGNs for non-rectangular windows, and layered windows for a per-pixel alpha.</span></span>  
  
 <span data-ttu-id="eb20e-137">Não há suporte para alfa constante e chaves de cores.</span><span class="sxs-lookup"><span data-stu-id="eb20e-137">Constant alpha and color keys are not supported.</span></span>  <span data-ttu-id="eb20e-138">Os recursos de janela em camadas do [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] variam por plataforma.</span><span class="sxs-lookup"><span data-stu-id="eb20e-138">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] layered window capabilities vary by platform.</span></span>  
  
 <span data-ttu-id="eb20e-139">As janelas em camadas podem tornar a janela inteira translúcida (semitransparente) ao especificarem um valor alfa para aplicar a cada pixel na janela.</span><span class="sxs-lookup"><span data-stu-id="eb20e-139">Layered windows can make the entire window translucent (semi-transparent) by specifying an alpha value to apply to every pixel in the window.</span></span>  <span data-ttu-id="eb20e-140">(na verdade, [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] dá suporte para a versão alfa por pixel, mas é muito difícil de usá-la em programas práticos porque, neste modo, você precisaria desenhar qualquer HWND filho, inclusive as caixas de diálogo e os menus suspensos).</span><span class="sxs-lookup"><span data-stu-id="eb20e-140">([!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] in fact supports per-pixel alpha, but this is very difficult to use in practical programs because in this mode you would need to draw any child HWND yourself, including dialogs and dropdowns).</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="eb20e-141">dá suporte a HRGNs; no entanto, não há APIs gerenciadas para essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="eb20e-141">supports HRGNs; however, there are no managed APIs for this functionality.</span></span> <span data-ttu-id="eb20e-142">Você pode usar a invocação <xref:System.Windows.Interop.HwndSource> de plataforma e chamar [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] as APIs relevantes.</span><span class="sxs-lookup"><span data-stu-id="eb20e-142">You can use platform invoke and <xref:System.Windows.Interop.HwndSource> to call the relevant [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] APIs.</span></span> <span data-ttu-id="eb20e-143">Para obter mais informações, consulte [Chamando funções nativas do código gerenciado](/cpp/dotnet/calling-native-functions-from-managed-code).</span><span class="sxs-lookup"><span data-stu-id="eb20e-143">For more information, see [Calling Native Functions from Managed Code](/cpp/dotnet/calling-native-functions-from-managed-code).</span></span>  
  
 <span data-ttu-id="eb20e-144">As janelas em camadas [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] têm recursos diferentes em sistemas operacionais distintos.</span><span class="sxs-lookup"><span data-stu-id="eb20e-144">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layered windows have different capabilities on different operating systems.</span></span> <span data-ttu-id="eb20e-145">Isso ocorre porque [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] o usa o DirectX para renderizar, e as janelas em camadas foram projetadas principalmente para a renderização GDI, não para a renderização do DirectX.</span><span class="sxs-lookup"><span data-stu-id="eb20e-145">This is because [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] uses DirectX to render, and layered windows were primarily designed for GDI rendering, not DirectX rendering.</span></span>  
  
- [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="eb20e-146">dá suporte para janelas em camadas aceleradas por hardware no [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] e em versões posteriores.</span><span class="sxs-lookup"><span data-stu-id="eb20e-146">supports hardware accelerated layered windows on [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] and later.</span></span> <span data-ttu-id="eb20e-147">Hardware acelerado janelas em camadas ao [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)] exigir suporte do Microsoft DirectX, portanto, os recursos dependerão da versão do Microsoft DirectX nesse computador.</span><span class="sxs-lookup"><span data-stu-id="eb20e-147">Hardware accelerated layered windows on [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)] require support from Microsoft DirectX, so the capabilities will depend on the version of Microsoft DirectX on that machine.</span></span>  
  
- [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="eb20e-148">não dá suporte para as chaves de cores de transparência porque [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] não pode assegurar a renderização da cor exata solicitada, especialmente quando a renderização é acelerada por hardware.</span><span class="sxs-lookup"><span data-stu-id="eb20e-148">does not support transparency color keys, because [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] cannot guarantee to render the exact color you requested, particularly when rendering is hardware-accelerated.</span></span>  
  
- <span data-ttu-id="eb20e-149">Se seu aplicativo estiver em execução [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)]no, janelas em camadas sobre a cintilação de superfícies do DirectX quando o aplicativo do DirectX for renderizado.</span><span class="sxs-lookup"><span data-stu-id="eb20e-149">If your application is running on [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)], layered windows on top of DirectX surfaces flicker when the DirectX application renders.</span></span>  <span data-ttu-id="eb20e-150">(A sequência de renderização real é que o Microsoft Windows Graphics Device Interface (GDI) oculta a janela em camadas, em seguida, o DirectX desenha e, em seguida, o Microsoft Windows Graphics Device Interface (GDI) coloca a janela em camadas de volta).</span><span class="sxs-lookup"><span data-stu-id="eb20e-150">(The actual rendering sequence is that Microsoft Windows Graphics Device Interface (GDI) hides the layered window, then DirectX draws, and then Microsoft Windows Graphics Device Interface (GDI) puts the layered window back).</span></span>  <span data-ttu-id="eb20e-151">As janelas em camadas não [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] também têm essa limitação.</span><span class="sxs-lookup"><span data-stu-id="eb20e-151">Non-[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layered windows also have this limitation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="eb20e-152">Consulte também</span><span class="sxs-lookup"><span data-stu-id="eb20e-152">See also</span></span>

- [<span data-ttu-id="eb20e-153">Interoperação do WPF e do Win32</span><span class="sxs-lookup"><span data-stu-id="eb20e-153">WPF and Win32 Interoperation</span></span>](wpf-and-win32-interoperation.md)
- [<span data-ttu-id="eb20e-154">Passo a passo: Hospedando um relógio do WPF no Win32</span><span class="sxs-lookup"><span data-stu-id="eb20e-154">Walkthrough: Hosting a WPF Clock in Win32</span></span>](walkthrough-hosting-a-wpf-clock-in-win32.md)
- [<span data-ttu-id="eb20e-155">Hospedando conteúdo Win32 no WPF</span><span class="sxs-lookup"><span data-stu-id="eb20e-155">Hosting Win32 Content in WPF</span></span>](hosting-win32-content-in-wpf.md)
