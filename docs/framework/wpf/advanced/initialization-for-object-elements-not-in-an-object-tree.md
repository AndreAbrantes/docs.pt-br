---
title: Inicialização de elementos de objeto que não estejam em uma árvore de objetos
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- logical tree [WPF]
- visual tree [WPF]
- elements [WPF], initializing
- initializing elements [WPF]
ms.assetid: 7b8dfc9b-46ac-4ce8-b7bb-035734d688b7
ms.openlocfilehash: f1d31a5916f0c2a1763d8f24076ae7c1000a8296
ms.sourcegitcommit: 0c48191d6d641ce88d7510e319cf38c0e35697d0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/05/2019
ms.locfileid: "57376359"
---
# <a name="initialization-for-object-elements-not-in-an-object-tree"></a><span data-ttu-id="23b62-102">Inicialização de elementos de objeto que não estejam em uma árvore de objetos</span><span class="sxs-lookup"><span data-stu-id="23b62-102">Initialization for Object Elements Not in an Object Tree</span></span>
<span data-ttu-id="23b62-103">Alguns aspectos da inicialização de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] são deixados para processos que normalmente dependem de aquele elemento estar conectado à árvore lógica ou à árvore visual.</span><span class="sxs-lookup"><span data-stu-id="23b62-103">Some aspects of [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] initialization are deferred to processes that typically rely on that element being connected to either the logical tree or visual tree.</span></span> <span data-ttu-id="23b62-104">Este tópico descreve as etapas que podem ser necessárias para inicializar um elemento que não está conectado a nenhuma árvore.</span><span class="sxs-lookup"><span data-stu-id="23b62-104">This topic describes the steps that may be necessary in order to initialize an element that is not connected to either tree.</span></span>  
  
 
  
## <a name="elements-and-the-logical-tree"></a><span data-ttu-id="23b62-105">Elementos e a árvore lógica</span><span class="sxs-lookup"><span data-stu-id="23b62-105">Elements and the Logical Tree</span></span>  
 <span data-ttu-id="23b62-106">Quando você cria uma instância de uma classe [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] no código, deve estar ciente de que diversos aspectos da inicialização do objeto para uma classe [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] deliberadamente não fazem parte do código executado ao chamar o construtor da classe.</span><span class="sxs-lookup"><span data-stu-id="23b62-106">When you create an instance of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class in code, you should be aware that several aspects of object initialization for a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class are deliberately not a part of the code that is executed when calling the class constructor.</span></span> <span data-ttu-id="23b62-107">Especialmente para uma classe de controle, a maior parte da representação visual do controle não é definida pelo construtor.</span><span class="sxs-lookup"><span data-stu-id="23b62-107">Particularly for a control class, most of the visual representation of that control is not defined by the constructor.</span></span> <span data-ttu-id="23b62-108">Em vez disso, a representação visual é definida pelo modelo do controle.</span><span class="sxs-lookup"><span data-stu-id="23b62-108">Instead, the visual representation is defined by the control's template.</span></span> <span data-ttu-id="23b62-109">O modelo pode vir de uma variedade de fontes, mas geralmente é obtido de estilos de tema.</span><span class="sxs-lookup"><span data-stu-id="23b62-109">The template potentially comes from a variety of sources, but most often the template is obtained from theme styles.</span></span> <span data-ttu-id="23b62-110">Os modelos são efetivamente de associação tardia; o modelo necessário não é anexado ao controle em questão até que o controle esteja pronto para o layout.</span><span class="sxs-lookup"><span data-stu-id="23b62-110">Templates are effectively late-binding; the necessary template is not attached to the control in question until the control is ready for layout.</span></span> <span data-ttu-id="23b62-111">E o controle não está pronto para o layout até seja anexado a uma árvore lógica que se conecte a uma superfície de renderização na raiz.</span><span class="sxs-lookup"><span data-stu-id="23b62-111">And the control is not ready for layout until it is attached to a logical tree that connects to a rendering surface at the root.</span></span> <span data-ttu-id="23b62-112">É esse elemento de nível raiz que inicia a renderização de todos os seus elementos filho, conforme definido na árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="23b62-112">It is that root-level element that initiates the rendering of all of its child elements as defined in the logical tree.</span></span>  
  
 <span data-ttu-id="23b62-113">A árvore visual também participa deste processo.</span><span class="sxs-lookup"><span data-stu-id="23b62-113">The visual tree also participates in this process.</span></span> <span data-ttu-id="23b62-114">Elementos que fazem parte da árvore visual por meio de modelos também não são totalmente instanciados até que sejam conectados.</span><span class="sxs-lookup"><span data-stu-id="23b62-114">Elements that are part of the visual tree through the templates are also not fully instantiated until connected.</span></span>  
  
 <span data-ttu-id="23b62-115">As consequências deste comportamento são que certas operações que dependem das características visuais concluídas de um elemento exigem etapas adicionais.</span><span class="sxs-lookup"><span data-stu-id="23b62-115">The consequences of this behavior are that certain operations that rely on the completed visual characteristics of an element require additional steps.</span></span> <span data-ttu-id="23b62-116">Um exemplo é se você está tentando obter as características visuais de uma classe construída, mas ainda não anexada a uma árvore.</span><span class="sxs-lookup"><span data-stu-id="23b62-116">An example is if you are attempting to get the visual characteristics of a class that was constructed but not yet attached to a tree.</span></span> <span data-ttu-id="23b62-117">Por exemplo, se você deseja chamar <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> em um <xref:System.Windows.Media.Imaging.RenderTargetBitmap> e o visual que você está passando é um elemento não conectado a uma árvore, esse elemento não estará visualmente completo até que passos de inicialização adicionais sejam concluídos.</span><span class="sxs-lookup"><span data-stu-id="23b62-117">For instance, if you want to call <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> on a <xref:System.Windows.Media.Imaging.RenderTargetBitmap> and the visual you are passing is an element not connected to a tree, that element is not visually complete until additional initialization steps are completed.</span></span>  
  
### <a name="using-begininit-and-endinit-to-initialize-the-element"></a><span data-ttu-id="23b62-118">Utilizando BeginInit e EndInit para inicializar o elemento</span><span class="sxs-lookup"><span data-stu-id="23b62-118">Using BeginInit and EndInit to Initialize the Element</span></span>  
 <span data-ttu-id="23b62-119">Diversas classes no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementar o <xref:System.ComponentModel.ISupportInitialize> interface.</span><span class="sxs-lookup"><span data-stu-id="23b62-119">Various classes in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implement the <xref:System.ComponentModel.ISupportInitialize> interface.</span></span> <span data-ttu-id="23b62-120">Você usa o <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> e <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> métodos da interface para denotar uma região no seu código que contém as etapas de inicialização (como configurar valores de propriedade que afetam a renderização).</span><span class="sxs-lookup"><span data-stu-id="23b62-120">You use the <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> and <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> methods of the interface to denote a region in your code that contains initialization steps (such as setting property values that affect rendering).</span></span> <span data-ttu-id="23b62-121">Depois de <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> é chamado na sequência, o sistema de layout pode processar o elemento e começar a procurar um estilo implícito.</span><span class="sxs-lookup"><span data-stu-id="23b62-121">After <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> is called in the sequence, the layout system can process the element and start looking for an implicit style.</span></span>  
  
 <span data-ttu-id="23b62-122">Se o elemento estiver configurando propriedades de um <xref:System.Windows.FrameworkElement> ou <xref:System.Windows.FrameworkContentElement> derivado de classe, você poderá chamar as versões de classes <xref:System.Windows.FrameworkElement.BeginInit%2A> e <xref:System.Windows.FrameworkElement.EndInit%2A> em vez de realizar a conversão em <xref:System.ComponentModel.ISupportInitialize>.</span><span class="sxs-lookup"><span data-stu-id="23b62-122">If the element you are setting properties on is a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> derived class, then you can call the class versions of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> rather than casting to <xref:System.ComponentModel.ISupportInitialize>.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="23b62-123">Código de exemplo</span><span class="sxs-lookup"><span data-stu-id="23b62-123">Sample Code</span></span>  
 <span data-ttu-id="23b62-124">O exemplo a seguir é o código de exemplo para um aplicativo de console que usa renderização [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] e <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> de um flexível [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] arquivo para ilustrar o posicionamento adequado dos <xref:System.Windows.FrameworkElement.BeginInit%2A> e <xref:System.Windows.FrameworkElement.EndInit%2A> em torno de outras [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] chamadas que ajustar as propriedades que afetam a renderização.</span><span class="sxs-lookup"><span data-stu-id="23b62-124">The following example is sample code for a console application that uses rendering [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] and <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> of a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file to illustrate the proper placement of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> around other [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] calls that adjust properties that affect rendering.</span></span>  
  
 <span data-ttu-id="23b62-125">O exemplo ilustra apenas a função principal.</span><span class="sxs-lookup"><span data-stu-id="23b62-125">The example illustrates the main function only.</span></span> <span data-ttu-id="23b62-126">As funções `Rasterize` e `Save` (não mostradas) são funções utilitárias que cuidam do processamento de imagens e E/S.</span><span class="sxs-lookup"><span data-stu-id="23b62-126">The functions `Rasterize` and `Save` (not shown) are utility functions that take care of image processing and IO.</span></span>  
  
 [!code-csharp[InitializeElements#Main](~/samples/snippets/csharp/VS_Snippets_Wpf/InitializeElements/CSharp/initializeelements.cs#main)]
 [!code-vb[InitializeElements#Main](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InitializeElements/VisualBasic/initializeelements.vb#main)]  
  
## <a name="see-also"></a><span data-ttu-id="23b62-127">Consulte também</span><span class="sxs-lookup"><span data-stu-id="23b62-127">See also</span></span>
- [<span data-ttu-id="23b62-128">Árvores no WPF</span><span class="sxs-lookup"><span data-stu-id="23b62-128">Trees in WPF</span></span>](trees-in-wpf.md)
- [<span data-ttu-id="23b62-129">Visão geral de renderização de gráficos do WPF</span><span class="sxs-lookup"><span data-stu-id="23b62-129">WPF Graphics Rendering Overview</span></span>](../graphics-multimedia/wpf-graphics-rendering-overview.md)
- [<span data-ttu-id="23b62-130">Visão geral de XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="23b62-130">XAML Overview (WPF)</span></span>](xaml-overview-wpf.md)
