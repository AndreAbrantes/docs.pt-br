---
title: Propriedades de dependência personalizada
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- implementing [WPF], wrappers
- registering properties [WPF]
- properties [WPF], metadata
- metadata [WPF], for properties
- custom dependency properties [WPF]
- properties [WPF], registering
- wrappers [WPF], implementing
- dependency properties [WPF], custom
ms.assetid: e6bfcfac-b10d-4f58-9f77-a864c2a2938f
ms.openlocfilehash: 8e3ac7207a5ef05b94e97f005ecd17d5078669a4
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/07/2019
ms.locfileid: "73740891"
---
# <a name="custom-dependency-properties"></a><span data-ttu-id="8bf8a-102">Propriedades de dependência personalizada</span><span class="sxs-lookup"><span data-stu-id="8bf8a-102">Custom Dependency Properties</span></span>

<span data-ttu-id="8bf8a-103">Este tópico descreve os motivos pelos quais os desenvolvedores de aplicativos e autores de componentes do [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] podem desejar criar uma propriedade de dependência personalizada. Além disso, descreve as etapas de implementação, bem como algumas opções de implementação que podem melhorar o desempenho, a usabilidade ou a versatilidade da propriedade.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-103">This topic describes the reasons that [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] application developers and component authors might want to create custom dependency property, and describes the implementation steps as well as some implementation options that can improve performance, usability, or versatility of the property.</span></span>

<a name="prerequisites"></a>

## <a name="prerequisites"></a><span data-ttu-id="8bf8a-104">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="8bf8a-104">Prerequisites</span></span>

<span data-ttu-id="8bf8a-105">Este tópico pressupõe que você entenda as propriedades de dependência da perspectiva de um consumidor das propriedades de dependência existentes em classes do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] e que leu o tópico [Visão geral das propriedades de dependência](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-105">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md) topic.</span></span> <span data-ttu-id="8bf8a-106">Para seguir os exemplos deste tópico, você também deve ter noções básicas de [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] e saber como escrever aplicativos do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8bf8a-106">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>

<a name="whatis"></a>

## <a name="what-is-a-dependency-property"></a><span data-ttu-id="8bf8a-107">O que é uma propriedade de dependência?</span><span class="sxs-lookup"><span data-stu-id="8bf8a-107">What Is a Dependency Property?</span></span>

<span data-ttu-id="8bf8a-108">Você pode habilitar o que seria uma propriedade Common Language Runtime (CLR) para dar suporte a estilos, associação de dados, herança, animações e valores padrão implementando-o como uma propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-108">You can enable what would otherwise be a common language runtime (CLR) property to support styling, data binding, inheritance, animations, and default values by implementing it as a dependency property.</span></span> <span data-ttu-id="8bf8a-109">As propriedades de dependência são propriedades registradas com o sistema de propriedades [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] chamando o método <xref:System.Windows.DependencyProperty.Register%2A> (ou <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A>) e que são apoiadas por um campo identificador de <xref:System.Windows.DependencyProperty>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-109">Dependency properties are properties that are registered with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system by calling the <xref:System.Windows.DependencyProperty.Register%2A> method (or <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A>), and that are backed by a <xref:System.Windows.DependencyProperty> identifier field.</span></span> <span data-ttu-id="8bf8a-110">As propriedades de dependência podem ser usadas somente por <xref:System.Windows.DependencyObject> tipos, mas <xref:System.Windows.DependencyObject> é muito alta na hierarquia de classes de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], portanto, a maioria das classes disponíveis no [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] pode dar suporte a propriedades de dependência.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-110">Dependency properties can be used only by <xref:System.Windows.DependencyObject> types, but <xref:System.Windows.DependencyObject> is quite high in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] class hierarchy, so the majority of classes available in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] can support dependency properties.</span></span> <span data-ttu-id="8bf8a-111">Para obter mais informações sobre as propriedades de dependência e algumas das terminologias e das convenções usadas para a descrição delas neste SDK, consulte [visão geral das propriedades de dependência](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-111">For more information about dependency properties and some of the terminology and conventions used for describing them in this SDK, see [Dependency Properties Overview](dependency-properties-overview.md).</span></span>

<a name="example_dp"></a>

## <a name="examples-of-dependency-properties"></a><span data-ttu-id="8bf8a-112">Exemplos de propriedades de dependência</span><span class="sxs-lookup"><span data-stu-id="8bf8a-112">Examples of Dependency Properties</span></span>

<span data-ttu-id="8bf8a-113">Exemplos de propriedades de dependência que são implementadas em [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes incluem a propriedade <xref:System.Windows.Controls.Control.Background%2A>, a propriedade <xref:System.Windows.FrameworkElement.Width%2A> e a propriedade <xref:System.Windows.Controls.TextBox.Text%2A>, entre muitas outras.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-113">Examples of dependency properties that are implemented on [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes include the <xref:System.Windows.Controls.Control.Background%2A> property, the <xref:System.Windows.FrameworkElement.Width%2A> property, and the <xref:System.Windows.Controls.TextBox.Text%2A> property, among many others.</span></span> <span data-ttu-id="8bf8a-114">Cada propriedade de dependência exposta por uma classe tem um campo estático público correspondente do tipo <xref:System.Windows.DependencyProperty> exposto na mesma classe.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-114">Each dependency property exposed by a class has a corresponding public static field of type <xref:System.Windows.DependencyProperty> exposed on that same class.</span></span> <span data-ttu-id="8bf8a-115">Esse é o identificador da propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-115">This is the identifier for the dependency property.</span></span> <span data-ttu-id="8bf8a-116">O identificador é nomeado com uma convenção: o nome da propriedade de dependência com a cadeia de caracteres `Property` acrescentada a ela.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-116">The identifier is named using a convention: the name of the dependency property with the string `Property` appended to it.</span></span> <span data-ttu-id="8bf8a-117">Por exemplo, o campo identificador de <xref:System.Windows.DependencyProperty> correspondente para a propriedade <xref:System.Windows.Controls.Control.Background%2A> é <xref:System.Windows.Controls.Control.BackgroundProperty>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-117">For example, the corresponding <xref:System.Windows.DependencyProperty> identifier field for the <xref:System.Windows.Controls.Control.Background%2A> property is <xref:System.Windows.Controls.Control.BackgroundProperty>.</span></span> <span data-ttu-id="8bf8a-118">O identificador armazena as informações sobre a propriedade de dependência conforme ela foi registrada, e o identificador é usado posteriormente para outras operações que envolvem a propriedade de dependência, como chamar <xref:System.Windows.DependencyObject.SetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-118">The identifier stores the information about the dependency property as it was registered, and the identifier is then used later for other operations involving the dependency property, such as calling <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span>

<span data-ttu-id="8bf8a-119">Conforme mencionado na [visão geral das propriedades de dependência](dependency-properties-overview.md), todas as propriedades de dependência em [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] (exceto a maioria das propriedades anexadas) também são propriedades CLR devido à implementação de "wrapper".</span><span class="sxs-lookup"><span data-stu-id="8bf8a-119">As mentioned in the [Dependency Properties Overview](dependency-properties-overview.md), all dependency properties in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] (except most attached properties) are also CLR properties because of the "wrapper" implementation.</span></span> <span data-ttu-id="8bf8a-120">Portanto, no código, você pode obter ou definir propriedades de dependência chamando acessadores CLR que definem os wrappers da mesma maneira que você usaria outras propriedades CLR.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-120">Therefore, from code, you can get or set dependency properties by calling CLR accessors that define the wrappers in the same manner that you would use other CLR properties.</span></span> <span data-ttu-id="8bf8a-121">Como um consumidor de propriedades de dependência estabelecidas, você normalmente não usa os métodos de <xref:System.Windows.DependencyObject> <xref:System.Windows.DependencyObject.GetValue%2A> e <xref:System.Windows.DependencyObject.SetValue%2A>, que são o ponto de conexão para o sistema de propriedades subjacente.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-121">As a consumer of established dependency properties, you do not typically use the <xref:System.Windows.DependencyObject> methods <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A>, which are the connection point to the underlying property system.</span></span> <span data-ttu-id="8bf8a-122">Em vez disso, a implementação existente das propriedades do CLR já terá chamado <xref:System.Windows.DependencyObject.GetValue%2A> e <xref:System.Windows.DependencyObject.SetValue%2A> dentro das implementações de wrapper `get` e `set` da propriedade, usando o campo identificador adequadamente.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-122">Rather, the existing implementation of the CLR properties will have already called <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> within the `get` and `set` wrapper implementations of the property, using the identifier field appropriately.</span></span> <span data-ttu-id="8bf8a-123">Se estiver implementando uma propriedade de dependência personalizada, você definirá um wrapper de maneira semelhante.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-123">If you are implementing a custom dependency property yourself, then you will be defining the wrapper in a similar way.</span></span>

<a name="backing_with_dp"></a>

## <a name="when-should-you-implement-a-dependency-property"></a><span data-ttu-id="8bf8a-124">Quando é necessário implementar uma propriedade de dependência?</span><span class="sxs-lookup"><span data-stu-id="8bf8a-124">When Should You Implement a Dependency Property?</span></span>

<span data-ttu-id="8bf8a-125">Quando você implementa uma propriedade em uma classe, desde que sua classe derive de <xref:System.Windows.DependencyObject>, você tem a opção de voltar à propriedade com um identificador de <xref:System.Windows.DependencyProperty> e, portanto, torná-la uma propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-125">When you implement a property on a class, so long as your class derives from <xref:System.Windows.DependencyObject>, you have the option to back your property with a <xref:System.Windows.DependencyProperty> identifier and thus to make it a dependency property.</span></span> <span data-ttu-id="8bf8a-126">Transformar a propriedade em uma propriedade de dependência nem sempre é necessário ou apropriado e dependerá das necessidades do cenário.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-126">Having your property be a dependency property is not always necessary or appropriate, and will depend on your scenario needs.</span></span> <span data-ttu-id="8bf8a-127">Às vezes, a técnica típica de dar suporte à propriedade com um campo privado é adequada.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-127">Sometimes, the typical technique of backing your property with a private field is adequate.</span></span> <span data-ttu-id="8bf8a-128">No entanto, você deverá implementar a propriedade como uma propriedade de dependência sempre que desejar que a propriedade dê suporte a uma ou mais das seguintes funcionalidades do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="8bf8a-128">However, you should implement your property as a dependency property whenever you want your property to support one or more of the following [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] capabilities:</span></span>

- <span data-ttu-id="8bf8a-129">Você deseja que a propriedade seja configurável em um estilo.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-129">You want your property to be settable in a style.</span></span> <span data-ttu-id="8bf8a-130">Para obter mais informações, consulte [Estilo e modelagem](../controls/styling-and-templating.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-130">For more information, see [Styling and Templating](../controls/styling-and-templating.md).</span></span>

- <span data-ttu-id="8bf8a-131">Você deseja que a propriedade dê suporte à vinculação de dados.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-131">You want your property to support data binding.</span></span> <span data-ttu-id="8bf8a-132">Para obter mais informações sobre propriedades de dependência com a vinculação de dados, consulte [Associar as propriedades de dois controles](../data/how-to-bind-the-properties-of-two-controls.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-132">For more information about data binding dependency properties, see [Bind the Properties of Two Controls](../data/how-to-bind-the-properties-of-two-controls.md).</span></span>

- <span data-ttu-id="8bf8a-133">Você deseja que a propriedade seja configurável com uma referência de recurso dinâmico.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-133">You want your property to be settable with a dynamic resource reference.</span></span> <span data-ttu-id="8bf8a-134">Para obter mais informações, consulte [Recursos XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-134">For more information, see [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>

- <span data-ttu-id="8bf8a-135">Você deseja herdar um valor da propriedade automaticamente de um elemento pai na árvore de elementos.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-135">You want to inherit a property value automatically from a parent element in the element tree.</span></span> <span data-ttu-id="8bf8a-136">Nesse caso, registre-se com o método <xref:System.Windows.DependencyProperty.RegisterAttached%2A>, mesmo se você também criar um wrapper de propriedade para acesso CLR.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-136">In this case, register with the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method, even if you also create a property wrapper for CLR access.</span></span> <span data-ttu-id="8bf8a-137">Para obter mais informações, consulte [Herança do valor da propriedade](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-137">For more information, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

- <span data-ttu-id="8bf8a-138">Você deseja que a propriedade possa ser animada.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-138">You want your property to be animatable.</span></span> <span data-ttu-id="8bf8a-139">Para obter mais informações, consulte [Visão geral de animação](../graphics-multimedia/animation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-139">For more information, see [Animation Overview](../graphics-multimedia/animation-overview.md).</span></span>

- <span data-ttu-id="8bf8a-140">Você deseja que o sistema de propriedades relate quando o valor anterior da propriedade for alterado por ações executadas pelo sistema de propriedades, ambiente ou usuário ou pela leitura e pelo uso de estilos.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-140">You want the property system to report when the previous value of the property has been changed by actions taken by the property system, the environment, or the user, or by reading and using styles.</span></span> <span data-ttu-id="8bf8a-141">Ao usar metadados de propriedade, a propriedade pode especificar um método de retorno de chamada que será invocado sempre que o sistema de propriedades determinar que o valor da propriedade foi definitivamente alterado.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-141">By using property metadata, your property can specify a callback method that will be invoked each time the property system determines that your property value was definitively changed.</span></span> <span data-ttu-id="8bf8a-142">Um conceito relacionado é a coerção do valor da propriedade.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-142">A related concept is property value coercion.</span></span> <span data-ttu-id="8bf8a-143">Para obter mais informações, consulte [Retornos de chamada da propriedade de dependência e validação](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-143">For more information, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span>

- <span data-ttu-id="8bf8a-144">Você deseja usar convenções de metadados estabelecidas que também são usadas por processos do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], como relatar se a alteração de um valor da propriedade deve exigir que o sistema de layout recomponha os visuais de um elemento.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-144">You want to use established metadata conventions that are also used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] processes, such as reporting whether changing a property value should require the layout system to recompose the visuals for an element.</span></span> <span data-ttu-id="8bf8a-145">Ou você deseja conseguir usar substituições de metadados para que as classes derivadas possam alterar características baseadas em metadados, como o valor padrão.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-145">Or you want to be able to use metadata overrides so that derived classes can change metadata-based characteristics such as the default value.</span></span>

- <span data-ttu-id="8bf8a-146">Você deseja que as propriedades de um controle personalizado recebam suporte ao designer do WPF do Visual Studio, como a edição da janela **Propriedades** .</span><span class="sxs-lookup"><span data-stu-id="8bf8a-146">You want properties of a custom control to receive Visual Studio WPF Designer support, such as **Properties** window editing.</span></span> <span data-ttu-id="8bf8a-147">Para obter mais informações, consulte [Visão geral da criação de controle](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-147">For more information, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>

<span data-ttu-id="8bf8a-148">Ao examinar esses cenários, você também deve considerar se pode obter o cenário substituindo os metadados de uma propriedade de dependência existente, em vez de implementar uma propriedade completamente nova.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-148">When you examine these scenarios, you should also consider whether you can achieve your scenario by overriding the metadata of an existing dependency property, rather than implementing a completely new property.</span></span> <span data-ttu-id="8bf8a-149">Saber se uma substituição de metadados é prática depende do cenário e da semelhança desse cenário com a implementação nas classes e propriedades de dependência existentes do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8bf8a-149">Whether a metadata override is practical depends on your scenario and how closely that scenario resembles the implementation in existing [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] dependency properties and classes.</span></span> <span data-ttu-id="8bf8a-150">Para obter mais informações sobre a substituição de metadados em propriedades existentes, consulte [Metadados de propriedades de dependência](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-150">For more information about overriding metadata on existing properties, see [Dependency Property Metadata](dependency-property-metadata.md).</span></span>

<a name="checklist"></a>

## <a name="checklist-for-defining-a-dependency-property"></a><span data-ttu-id="8bf8a-151">Lista de verificação para definição de uma propriedade de dependência</span><span class="sxs-lookup"><span data-stu-id="8bf8a-151">Checklist for Defining a Dependency Property</span></span>

<span data-ttu-id="8bf8a-152">A definição de uma propriedade de dependência consiste em quatro conceitos distintos.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-152">Defining a dependency property consists of four distinct concepts.</span></span> <span data-ttu-id="8bf8a-153">Esses conceitos não são necessariamente etapas de procedimentos estritas, porque alguns deles acabam sendo combinados como linhas de código individuais na implementação:</span><span class="sxs-lookup"><span data-stu-id="8bf8a-153">These concepts are not necessarily strict procedural steps, because some of these end up being combined as single lines of code in the implementation:</span></span>

- <span data-ttu-id="8bf8a-154">(Opcional) Crie metadados de propriedade para a propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-154">(Optional) Create property metadata for the dependency property.</span></span>

- <span data-ttu-id="8bf8a-155">Registre o nome da propriedade no sistema de propriedades, especificando um tipo de proprietário e o tipo do valor da propriedade.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-155">Register the property name with the property system, specifying an owner type and the type of the property value.</span></span> <span data-ttu-id="8bf8a-156">Especifique também os metadados de propriedade, se forem usados.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-156">Also specify the property metadata, if used.</span></span>

- <span data-ttu-id="8bf8a-157">Defina um identificador de <xref:System.Windows.DependencyProperty> como um `public` `static` campo de `readonly` no tipo de proprietário.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-157">Define a <xref:System.Windows.DependencyProperty> identifier as a `public` `static` `readonly` field on the owner type.</span></span>

- <span data-ttu-id="8bf8a-158">Defina uma propriedade "wrapper" do CLR cujo nome corresponde ao nome da propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-158">Define a CLR "wrapper" property whose name matches the name of the dependency property.</span></span> <span data-ttu-id="8bf8a-159">Implemente os acessadores `get` e `set` da propriedade "wrapper" do CLR para se conectarem à propriedade de dependência que o faz.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-159">Implement the CLR "wrapper" property's `get` and `set` accessors to connect with the dependency property that backs it.</span></span>

<a name="registering"></a>

### <a name="registering-the-property-with-the-property-system"></a><span data-ttu-id="8bf8a-160">Registrando a propriedade no sistema de propriedades</span><span class="sxs-lookup"><span data-stu-id="8bf8a-160">Registering the Property with the Property System</span></span>

<span data-ttu-id="8bf8a-161">Para que a propriedade seja uma propriedade de dependência, é necessário registrá-la em uma tabela mantida pelo sistema de propriedades e fornecer a ela um identificador exclusivo, que é usado como o qualificador para operações posteriores do sistema de propriedades.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-161">In order for your property to be a dependency property, you must register that property into a table maintained by the property system, and give it a unique identifier that is used as the qualifier for later property system operations.</span></span> <span data-ttu-id="8bf8a-162">Essas operações podem ser operações internas ou seu próprio código que chama as APIs do sistema de propriedades.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-162">These operations might be internal operations, or your own code calling property system APIs.</span></span> <span data-ttu-id="8bf8a-163">Para registrar a propriedade, você chama o método <xref:System.Windows.DependencyProperty.Register%2A> dentro do corpo da sua classe (dentro da classe, mas fora de qualquer definição de membro).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-163">To register the property, you call the <xref:System.Windows.DependencyProperty.Register%2A> method within the body of your class (inside the class, but outside of any member definitions).</span></span> <span data-ttu-id="8bf8a-164">O campo identificador também é fornecido pela chamada do método <xref:System.Windows.DependencyProperty.Register%2A>, como o valor de retorno.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-164">The identifier field is also provided by the <xref:System.Windows.DependencyProperty.Register%2A> method call, as the return value.</span></span> <span data-ttu-id="8bf8a-165">O motivo pelo qual a chamada <xref:System.Windows.DependencyProperty.Register%2A> é feita fora de outras definições de membro é porque você usa esse valor de retorno para atribuir e criar um `public` `static` `readonly` campo do tipo <xref:System.Windows.DependencyProperty> como parte de sua classe.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-165">The reason that the <xref:System.Windows.DependencyProperty.Register%2A> call is done outside of other member definitions is because you use this return value to assign and create a `public` `static` `readonly` field of type <xref:System.Windows.DependencyProperty> as part of your class.</span></span> <span data-ttu-id="8bf8a-166">Esse campo se torna o identificador da propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-166">This field becomes the identifier for your dependency property.</span></span>

[!code-csharp[WPFAquariumSln#RegisterAG](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#registerag)]
[!code-vb[WPFAquariumSln#RegisterAG](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#registerag)]

<a name="nameconventions"></a>

### <a name="dependency-property-name-conventions"></a><span data-ttu-id="8bf8a-167">Convenções de nomenclatura para propriedades de dependência</span><span class="sxs-lookup"><span data-stu-id="8bf8a-167">Dependency Property Name Conventions</span></span>

<span data-ttu-id="8bf8a-168">Existem convenções de nomenclatura estabelecidas referentes a propriedades de dependência que sempre devem ser seguidas, exceto em circunstâncias excepcionais.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-168">There are established naming conventions regarding dependency properties that you must follow in all but exceptional circumstances.</span></span>

<span data-ttu-id="8bf8a-169">A propriedade de dependência em si terá um nome básico, "AquariumGraphic", como neste exemplo, que é fornecido como o primeiro parâmetro de <xref:System.Windows.DependencyProperty.Register%2A>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-169">The dependency property itself will have a basic name, "AquariumGraphic" as in this example, which is given as the first parameter of <xref:System.Windows.DependencyProperty.Register%2A>.</span></span> <span data-ttu-id="8bf8a-170">Esse nome deve ser exclusivo dentro de cada tipo de registro.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-170">That name must be unique within each registering type.</span></span> <span data-ttu-id="8bf8a-171">As propriedades de dependência herdadas por meio dos tipos base já são consideradas uma parte do tipo de registro; os nomes das propriedades herdadas não podem ser registrados novamente.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-171">Dependency properties inherited through base types are considered to be already part of the registering type; names of inherited properties cannot be registered again.</span></span> <span data-ttu-id="8bf8a-172">No entanto, há uma técnica para adicionar uma classe como o proprietário de uma propriedade de dependência mesmo quando a propriedade de dependência não é herdada; para obter detalhes, consulte [Metadados de propriedades de dependência](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-172">However, there is a technique for adding a class as owner of a dependency property even when that dependency property is not inherited; for details, see [Dependency Property Metadata](dependency-property-metadata.md).</span></span>

<span data-ttu-id="8bf8a-173">Ao criar o campo de identificador, nomeie-o com o nome da propriedade registrado, mais o sufixo `Property`.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-173">When you create the identifier field, name this field by the name of the property as you registered it, plus the suffix `Property`.</span></span> <span data-ttu-id="8bf8a-174">Esse campo é o identificador para a propriedade de dependência e será usado posteriormente como uma entrada para as chamadas <xref:System.Windows.DependencyObject.SetValue%2A> e <xref:System.Windows.DependencyObject.GetValue%2A> que você fará nos wrappers, por qualquer outro código de acesso à propriedade pelo seu próprio código , por qualquer acesso de código externo que você permitir, pelo sistema de propriedades e potencialmente por [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processadores.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-174">This field is your identifier for the dependency property, and it will be used later as an input for the <xref:System.Windows.DependencyObject.SetValue%2A> and <xref:System.Windows.DependencyObject.GetValue%2A> calls you will make in the wrappers, by any other code access to the property by your own code, by any external code access you allow, by the property system, and potentially by [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processors.</span></span>

> [!NOTE]
> <span data-ttu-id="8bf8a-175">A definição da propriedade de dependência no corpo da classe é uma implementação típica, mas também é possível definir uma propriedade de dependência no construtor estático da classe.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-175">Defining the dependency property in the class body is the typical implementation, but it is also possible to define a dependency property in the class static constructor.</span></span> <span data-ttu-id="8bf8a-176">Essa abordagem poderá fazer sentido se você precisar de mais de uma linha de código para inicializar a propriedade de dependência.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-176">This approach might make sense if you need more than one line of code to initialize the dependency property.</span></span>

<a name="wrapper1"></a>

### <a name="implementing-the-wrapper"></a><span data-ttu-id="8bf8a-177">Implementando o “wrapper”</span><span class="sxs-lookup"><span data-stu-id="8bf8a-177">Implementing the "Wrapper"</span></span>

<span data-ttu-id="8bf8a-178">Sua implementação de wrapper deve chamar <xref:System.Windows.DependencyObject.GetValue%2A> na implementação de `get` e <xref:System.Windows.DependencyObject.SetValue%2A> na implementação de `set` (a chamada de registro original e o campo são mostrados aqui também para fins de clareza).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-178">Your wrapper implementation should call <xref:System.Windows.DependencyObject.GetValue%2A> in the `get` implementation, and <xref:System.Windows.DependencyObject.SetValue%2A> in the `set` implementation (the original registration call and field are shown here too for clarity).</span></span>

<span data-ttu-id="8bf8a-179">Em circunstâncias apenas excepcionais, as implementações de wrapper devem executar apenas as ações <xref:System.Windows.DependencyObject.GetValue%2A> e <xref:System.Windows.DependencyObject.SetValue%2A>, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-179">In all but exceptional circumstances, your wrapper implementations should perform only the <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> actions, respectively.</span></span> <span data-ttu-id="8bf8a-180">A razão para isso é abordada no tópico [Carregamento de XAML e propriedades de dependência](xaml-loading-and-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-180">The reason for this is discussed in the topic [XAML Loading and Dependency Properties](xaml-loading-and-dependency-properties.md).</span></span>

<span data-ttu-id="8bf8a-181">Todas as propriedades de dependência públicas existentes fornecidas nas classes do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] usam esse modelo simples de implementação wrapper; a maior parte da complexidade do funcionamento das propriedades de dependência é inerentemente um comportamento do sistema de propriedades ou é implementada por meio de outros conceitos como coerção ou retornos de chamada de alteração de propriedade por meio de metadados de propriedade.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-181">All existing public dependency properties that are provided on the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes use this simple wrapper implementation model; most of the complexity of how dependency properties work is either inherently a behavior of the property system, or is implemented through other concepts such as coercion or property change callbacks through property metadata.</span></span>

[!code-csharp[WPFAquariumSln#AGWithWrapper](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#agwithwrapper)]
[!code-vb[WPFAquariumSln#AGWithWrapper](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#agwithwrapper)]

<span data-ttu-id="8bf8a-182">Novamente, por convenção, o nome da propriedade wrapper deve ser igual ao nome escolhido e fornecido como o primeiro parâmetro da chamada de <xref:System.Windows.DependencyProperty.Register%2A> que registrou a propriedade.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-182">Again, by convention, the name of the wrapper property must be the same as the name chosen and given as first parameter of the <xref:System.Windows.DependencyProperty.Register%2A> call that registered the property.</span></span> <span data-ttu-id="8bf8a-183">Se a propriedade não seguir a convenção, isso não necessariamente desabilitará todos os usos possíveis, mas você encontrará vários problemas notáveis:</span><span class="sxs-lookup"><span data-stu-id="8bf8a-183">If your property does not follow the convention, this does not necessarily disable all possible uses, but you will encounter several notable issues:</span></span>

- <span data-ttu-id="8bf8a-184">Alguns aspectos de estilos e modelos não funcionarão.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-184">Certain aspects of styles and templates will not work.</span></span>

- <span data-ttu-id="8bf8a-185">A maioria das ferramentas e dos desenvolvedores deve se basear nas convenções de nomenclatura para a serialização correta de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ou para o fornecimento de assistência de ambiente ao designer em um nível por propriedade.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-185">Most tools and designers must rely on the naming conventions to properly serialize [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], or to provide designer environment assistance at a per-property level.</span></span>

- <span data-ttu-id="8bf8a-186">A implementação atual do carregador de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] ignora os wrappers por completo e se baseia na convenção de nomenclatura durante o processamento de valores de atributo.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-186">The current implementation of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader bypasses the wrappers entirely, and relies on the naming convention when processing attribute values.</span></span> <span data-ttu-id="8bf8a-187">Para obter mais informações, consulte [Carregamento de XAML e propriedades de dependência](xaml-loading-and-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-187">For more information, see [XAML Loading and Dependency Properties](xaml-loading-and-dependency-properties.md).</span></span>

<a name="metadata"></a>

### <a name="property-metadata-for-a-new-dependency-property"></a><span data-ttu-id="8bf8a-188">Metadados de propriedade de uma nova propriedade de dependência</span><span class="sxs-lookup"><span data-stu-id="8bf8a-188">Property Metadata for a New Dependency Property</span></span>

<span data-ttu-id="8bf8a-189">Quando uma propriedade de dependência é registrada, o registro cria um objeto de metadados por meio do sistema de propriedades que armazena as características da propriedade.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-189">When you register a dependency property, the registration through the property system creates a metadata object that stores property characteristics.</span></span> <span data-ttu-id="8bf8a-190">Muitas dessas características têm padrões que são definidos se a propriedade estiver registrada com as assinaturas simples de <xref:System.Windows.DependencyProperty.Register%2A>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-190">Many of these characteristics have defaults that are set if the property is registered with the simple signatures of <xref:System.Windows.DependencyProperty.Register%2A>.</span></span> <span data-ttu-id="8bf8a-191">Outras assinaturas do <xref:System.Windows.DependencyProperty.Register%2A> permitem que você especifique os metadados que deseja ao registrar a propriedade.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-191">Other signatures of <xref:System.Windows.DependencyProperty.Register%2A> allow you to specify the metadata that you want as you register the property.</span></span> <span data-ttu-id="8bf8a-192">Os metadados mais comuns fornecidos para propriedades de dependência são fornecer a elas um valor padrão que é aplicado a novas instâncias que usam a propriedade.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-192">The most common metadata given for dependency properties is to give them a default value that is applied on new instances that use the property.</span></span>

<span data-ttu-id="8bf8a-193">Se você estiver criando uma propriedade de dependência que exista em uma classe derivada de <xref:System.Windows.FrameworkElement>, você poderá usar a classe de metadados mais especializada <xref:System.Windows.FrameworkPropertyMetadata> em vez da classe base <xref:System.Windows.PropertyMetadata>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-193">If you are creating a dependency property that exists on a derived class of <xref:System.Windows.FrameworkElement>, you can use the more specialized metadata class <xref:System.Windows.FrameworkPropertyMetadata> rather than the base <xref:System.Windows.PropertyMetadata> class.</span></span> <span data-ttu-id="8bf8a-194">O construtor para a classe <xref:System.Windows.FrameworkPropertyMetadata> tem várias assinaturas em que você pode especificar várias características de metadados em combinação.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-194">The constructor for the <xref:System.Windows.FrameworkPropertyMetadata> class has several signatures where you can specify various metadata characteristics in combination.</span></span> <span data-ttu-id="8bf8a-195">Se você quiser especificar apenas o valor padrão, use a assinatura que usa um único parâmetro do tipo <xref:System.Object>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-195">If you want to specify the default value only, use the signature that takes a single parameter of type <xref:System.Object>.</span></span> <span data-ttu-id="8bf8a-196">Passe esse parâmetro de objeto como um valor padrão específico de tipo para sua propriedade (o valor padrão fornecido deve ser o tipo fornecido como o parâmetro `propertyType` na chamada <xref:System.Windows.DependencyProperty.Register%2A>).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-196">Pass that object parameter as a type-specific default value for your property (the default value provided must be the type you provided as the `propertyType` parameter in the <xref:System.Windows.DependencyProperty.Register%2A> call).</span></span>

<span data-ttu-id="8bf8a-197">Por <xref:System.Windows.FrameworkPropertyMetadata>, você também pode especificar sinalizadores de opção de metadados para sua propriedade.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-197">For <xref:System.Windows.FrameworkPropertyMetadata>, you can also specify metadata option flags for your property.</span></span> <span data-ttu-id="8bf8a-198">Esses sinalizadores são convertidos em propriedades discretas nos metadados de propriedade após o registro e são usados para comunicar alguns condicionais para outros processos como o mecanismo de layout.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-198">These flags are converted into discrete properties on the property metadata after registration and are used to communicate certain conditionals to other processes such as the layout engine.</span></span>

#### <a name="setting-appropriate-metadata-flags"></a><span data-ttu-id="8bf8a-199">configurando sinalizadores de metadados apropriados</span><span class="sxs-lookup"><span data-stu-id="8bf8a-199">Setting Appropriate Metadata Flags</span></span>

- <span data-ttu-id="8bf8a-200">Se sua propriedade (ou alterações em seu valor) afetar o [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)]e, em particular, afetar como o sistema de layout deve dimensionar ou renderizar seu elemento em uma página, defina um ou mais dos seguintes sinalizadores: <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure>, <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-200">If your property (or changes in its value) affects the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], and in particular affects how the layout system should size or render your element in a page, set one or more of the following flags: <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure>, <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange>, <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender>.</span></span>

  - <span data-ttu-id="8bf8a-201"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure> indica que uma alteração nessa propriedade requer uma alteração na [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] renderização, onde o objeto recipiente pode exigir mais ou menos espaço dentro do pai.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-201"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure> indicates that a change to this property requires a change to [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] rendering where the containing object might require more or less space within the parent.</span></span> <span data-ttu-id="8bf8a-202">Por exemplo, uma propriedade “Largura” deve ter esse sinalizador definido.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-202">For example, a "Width" property should have this flag set.</span></span>

  - <span data-ttu-id="8bf8a-203"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange> indica que uma alteração nessa propriedade requer uma alteração na [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] renderização que normalmente não exige uma alteração no espaço dedicado, mas indica que o posicionamento dentro do espaço foi alterado.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-203"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange> indicates that a change to this property requires a change to [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] rendering that typically does not require a change in the dedicated space, but does indicate that the positioning within the space has changed.</span></span> <span data-ttu-id="8bf8a-204">Por exemplo, uma propriedade “Alinhamento” deve ter esse sinalizador definido.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-204">For example, an "Alignment" property should have this flag set.</span></span>

  - <span data-ttu-id="8bf8a-205"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender> indica que alguma outra alteração ocorreu e não afetará o layout e a medida, mas requer outra renderização.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-205"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender> indicates that some other change has occurred that will not affect layout and measure, but does require another render.</span></span> <span data-ttu-id="8bf8a-206">Um exemplo seria uma propriedade que altera a cor de um elemento existente, como “Tela de Fundo”.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-206">An example would be a property that changes a color of an existing element, such as "Background".</span></span>

  - <span data-ttu-id="8bf8a-207">Em geral, esses sinalizadores são usados como um protocolo em metadados de suas próprias implementações de substituição do sistema de propriedades ou de retornos de chamada do layout.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-207">These flags are often used as a protocol in metadata for your own override implementations of property system or layout callbacks.</span></span> <span data-ttu-id="8bf8a-208">Por exemplo, você pode ter um retorno de chamada <xref:System.Windows.DependencyObject.OnPropertyChanged%2A> que chamará <xref:System.Windows.UIElement.InvalidateArrange%2A> se qualquer propriedade da instância relatar uma alteração de valor e tiver <xref:System.Windows.FrameworkPropertyMetadata.AffectsArrange%2A> como `true` em seus metadados.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-208">For instance, you might have an <xref:System.Windows.DependencyObject.OnPropertyChanged%2A> callback that will call <xref:System.Windows.UIElement.InvalidateArrange%2A> if any property of the instance reports a value change and has <xref:System.Windows.FrameworkPropertyMetadata.AffectsArrange%2A> as `true` in its metadata.</span></span>

- <span data-ttu-id="8bf8a-209">Algumas propriedades podem afetar as características de renderização do elemento pai recipiente, de maneiras que estão além das alterações no espaço necessário mencionado acima.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-209">Some properties may affect the rendering characteristics of the containing parent element, in ways above and beyond the changes in required size mentioned above.</span></span> <span data-ttu-id="8bf8a-210">Um exemplo é a propriedade <xref:System.Windows.Documents.Paragraph.MinOrphanLines%2A> usada no modelo de documento de fluxo, em que as alterações feitas nessa propriedade podem alterar a renderização geral do documento de fluxo que contém o parágrafo.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-210">An example is the <xref:System.Windows.Documents.Paragraph.MinOrphanLines%2A> property used in the flow document model, where changes to that property can change the overall rendering of the flow document that contains the paragraph.</span></span> <span data-ttu-id="8bf8a-211">Use <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentArrange> ou <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentMeasure> para identificar casos semelhantes em suas próprias propriedades.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-211">Use <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentArrange> or <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentMeasure> to identify similar cases in your own properties.</span></span>

- <span data-ttu-id="8bf8a-212">Por padrão, as propriedades de dependência dão suporte à vinculação de dados.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-212">By default, dependency properties support data binding.</span></span> <span data-ttu-id="8bf8a-213">Você pode deliberadamente desabilitar a vinculação de dados, em casos nos quais não haja nenhum cenário realista para a vinculação de dados ou nos quais o desempenho na vinculação de dados de um objeto grande seja reconhecido como um problema.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-213">You can deliberately disable data binding, for cases where there is no realistic scenario for data binding, or where performance in data binding for a large object is recognized as a problem.</span></span>

- <span data-ttu-id="8bf8a-214">Por padrão, a vinculação de dados <xref:System.Windows.Data.Binding.Mode%2A> para propriedades de dependência usa como padrão <xref:System.Windows.Data.BindingMode.OneWay>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-214">By default, data binding <xref:System.Windows.Data.Binding.Mode%2A> for dependency properties defaults to <xref:System.Windows.Data.BindingMode.OneWay>.</span></span> <span data-ttu-id="8bf8a-215">Você sempre pode alterar a associação para ser <xref:System.Windows.Data.BindingMode.TwoWay> por instância de associação; para obter detalhes, consulte [especificar a direção da Associação](../data/how-to-specify-the-direction-of-the-binding.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-215">You can always change the binding to be <xref:System.Windows.Data.BindingMode.TwoWay> per binding instance; for details, see [Specify the Direction of the Binding](../data/how-to-specify-the-direction-of-the-binding.md).</span></span> <span data-ttu-id="8bf8a-216">Mas como autor da propriedade de dependência, você pode optar por fazer com que a propriedade use <xref:System.Windows.Data.BindingMode.TwoWay> modo de associação por padrão.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-216">But as the dependency property author, you can choose to make the property use <xref:System.Windows.Data.BindingMode.TwoWay> binding mode by default.</span></span> <span data-ttu-id="8bf8a-217">Um exemplo de uma propriedade de dependência existente é <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A?displayProperty=nameWithType>; o cenário para essa propriedade é que a <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> de configuração de lógica e a composição de <xref:System.Windows.Controls.MenuItem> interagir com o estilo de tema padrão.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-217">An example of an existing dependency property is <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A?displayProperty=nameWithType>; the scenario for this property is that the <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> setting logic and the compositing of <xref:System.Windows.Controls.MenuItem> interact with the default theme style.</span></span> <span data-ttu-id="8bf8a-218">A lógica de propriedade <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> usa a associação de dados nativamente para manter o estado da propriedade de acordo com outras propriedades de estado e chamadas de método.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-218">The <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> property logic uses data binding natively to maintain the state of the property in accordance to other state properties and method calls.</span></span> <span data-ttu-id="8bf8a-219">Outra propriedade de exemplo que associa <xref:System.Windows.Data.BindingMode.TwoWay> por padrão é <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-219">Another example property that binds <xref:System.Windows.Data.BindingMode.TwoWay> by default is <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=nameWithType>.</span></span>

- <span data-ttu-id="8bf8a-220">Você também pode habilitar a herança de propriedade em uma propriedade de dependência personalizada definindo o sinalizador <xref:System.Windows.FrameworkPropertyMetadataOptions.Inherits>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-220">You can also enable property inheritance in a custom dependency property by setting the <xref:System.Windows.FrameworkPropertyMetadataOptions.Inherits> flag.</span></span> <span data-ttu-id="8bf8a-221">A herança de propriedade é útil para um cenário em que os elementos pai e filho têm uma propriedade em comum e faz sentido que os elementos filho tenham esse valor da propriedade específico definido com o mesmo valor definido pelo pai.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-221">Property inheritance is useful for a scenario where parent elements and child elements have a property in common, and it makes sense for the child elements to have that particular property value set to the same value as the parent set it.</span></span> <span data-ttu-id="8bf8a-222">Um exemplo de propriedade herdável é <xref:System.Windows.FrameworkElement.DataContext%2A>, que é usado para operações de associação para habilitar o cenário de detalhes mestre importante para a apresentação de dados.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-222">An example inheritable property is <xref:System.Windows.FrameworkElement.DataContext%2A>, which is used for binding operations to enable the important master-detail scenario for data presentation.</span></span> <span data-ttu-id="8bf8a-223">Ao tornar <xref:System.Windows.FrameworkElement.DataContext%2A> herdáveis, todos os elementos filho herdam também esse contexto de dados.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-223">By making <xref:System.Windows.FrameworkElement.DataContext%2A> inheritable, any child elements inherit that data context also.</span></span> <span data-ttu-id="8bf8a-224">Devido à herança do valor da propriedade, é possível especificar um contexto de dados na página ou na raiz do aplicativo e não é necessário especificá-lo novamente para associações em todos os elementos filho possíveis.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-224">Because of property value inheritance, you can specify a data context at the page or application root, and do not need to respecify it for bindings in all possible child elements.</span></span> <span data-ttu-id="8bf8a-225"><xref:System.Windows.FrameworkElement.DataContext%2A> também é um bom exemplo para ilustrar que a herança substitui o valor padrão, mas ela sempre pode ser definida localmente em qualquer elemento filho específico; para obter detalhes, consulte [usar o padrão mestre-Detail com dados hierárquicos](../data/how-to-use-the-master-detail-pattern-with-hierarchical-data.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-225"><xref:System.Windows.FrameworkElement.DataContext%2A> is also a good example to illustrate that inheritance overrides the default value, but it can always be set locally on any particular child element; for details, see [Use the Master-Detail Pattern with Hierarchical Data](../data/how-to-use-the-master-detail-pattern-with-hierarchical-data.md).</span></span> <span data-ttu-id="8bf8a-226">A herança do valor da propriedade tem um possível custo de desempenho e, portanto, deve ser usada com moderação; para obter detalhes, consulte [Herança do valor da propriedade](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-226">Property value inheritance does have a possible performance cost, and thus should be used sparingly; for details, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

- <span data-ttu-id="8bf8a-227">Defina o sinalizador <xref:System.Windows.FrameworkPropertyMetadataOptions.Journal> para indicar se a propriedade de dependência deve ser detectada ou usada pelos serviços de diário de navegação.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-227">Set the <xref:System.Windows.FrameworkPropertyMetadataOptions.Journal> flag to indicate if your dependency property should be detected or used by navigation journaling services.</span></span> <span data-ttu-id="8bf8a-228">Um exemplo é a propriedade <xref:System.Windows.Controls.Primitives.Selector.SelectedIndex%2A>; qualquer item selecionado em um controle de seleção deve ser persistido quando o histórico do registro no diário é navegado.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-228">An example is the <xref:System.Windows.Controls.Primitives.Selector.SelectedIndex%2A> property; any item selected in a selection control should be persisted when the journaling history is navigated.</span></span>

<a name="RODP"></a>

## <a name="read-only-dependency-properties"></a><span data-ttu-id="8bf8a-229">Propriedades de dependência somente leitura</span><span class="sxs-lookup"><span data-stu-id="8bf8a-229">Read-Only Dependency Properties</span></span>

<span data-ttu-id="8bf8a-230">É possível definir uma propriedade de dependência somente leitura.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-230">You can define a dependency property that is read-only.</span></span> <span data-ttu-id="8bf8a-231">No entanto, os cenários para os motivos pelos quais é possível definir a propriedade como somente leitura são um pouco diferentes, assim como o procedimento para registrá-la no sistema de propriedades e expôr o identificador.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-231">However, the scenarios for why you might define your property as read-only are somewhat different, as is the procedure for registering them with the property system and exposing the identifier.</span></span> <span data-ttu-id="8bf8a-232">Para obter mais informações, consulte [Propriedades de dependência somente leitura](read-only-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-232">For more information, see [Read-Only Dependency Properties](read-only-dependency-properties.md).</span></span>

<a name="CTDP"></a>

## <a name="collection-type-dependency-properties"></a><span data-ttu-id="8bf8a-233">Propriedades de dependência do tipo de coleção</span><span class="sxs-lookup"><span data-stu-id="8bf8a-233">Collection-Type Dependency Properties</span></span>

<span data-ttu-id="8bf8a-234">As propriedades de dependência do tipo de coleção apresentam algumas outras questões de implementação a serem consideradas.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-234">Collection-type dependency properties have some additional implementation issues to consider.</span></span> <span data-ttu-id="8bf8a-235">Para obter detalhes, consulte [Propriedades de dependência do tipo de coleção](collection-type-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-235">For details, see [Collection-Type Dependency Properties](collection-type-dependency-properties.md).</span></span>

<a name="SecurityC"></a>

## <a name="dependency-property-security-considerations"></a><span data-ttu-id="8bf8a-236">Considerações sobre segurança das propriedades de dependência</span><span class="sxs-lookup"><span data-stu-id="8bf8a-236">Dependency Property Security Considerations</span></span>

<span data-ttu-id="8bf8a-237">As propriedades de dependência devem ser declaradas como propriedades públicas.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-237">Dependency properties should be declared as public properties.</span></span> <span data-ttu-id="8bf8a-238">Os campos do identificador das propriedades de dependência devem ser declarados como campos estáticos públicos.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-238">Dependency property identifier fields should be declared as public static fields.</span></span> <span data-ttu-id="8bf8a-239">Mesmo se você tentar declarar outros níveis de acesso (como protegido), uma propriedade de dependência sempre poderá ser acessada por meio do identificador em combinação com as APIs do sistema de propriedades.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-239">Even if you attempt to declare other access levels (such as protected), a dependency property can always be accessed through the identifier in combination with the property system APIs.</span></span> <span data-ttu-id="8bf8a-240">Até mesmo um campo de identificador protegido é potencialmente acessível devido a APIs de relatório de metadados ou de determinação de valor que fazem parte do sistema de propriedades, como <xref:System.Windows.LocalValueEnumerator>.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-240">Even a protected identifier field is potentially accessible because of metadata reporting or value determination APIs that are part of the property system, such as <xref:System.Windows.LocalValueEnumerator>.</span></span> <span data-ttu-id="8bf8a-241">Para obter mais informações, consulte [Segurança das propriedades de dependência](dependency-property-security.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-241">For more information, see [Dependency Property Security](dependency-property-security.md).</span></span>

<a name="DPCtor"></a>

## <a name="dependency-properties-and-class-constructors"></a><span data-ttu-id="8bf8a-242">Propriedades de dependência e construtores de classe</span><span class="sxs-lookup"><span data-stu-id="8bf8a-242">Dependency Properties and Class Constructors</span></span>

<span data-ttu-id="8bf8a-243">Há um princípio geral na programação de código gerenciado (frequentemente imposto pelas ferramentas de análise de código como o FxCop) que estabelece que os construtores de classe não devem chamar métodos virtuais.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-243">There is a general principle in managed code programming (often enforced by code analysis tools such as FxCop) that class constructors should not call virtual methods.</span></span> <span data-ttu-id="8bf8a-244">Isso ocorre porque os construtores podem ser chamados como a inicialização base de um construtor de classe derivada e a entrada no método virtual por meio do construtor pode ocorrer em um estado de inicialização incompleto da instância do objeto que está sendo construída.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-244">This is because constructors can be called as base initialization of a derived class constructor, and entering the virtual method through the constructor might occur at an incomplete initialization state of the object instance being constructed.</span></span> <span data-ttu-id="8bf8a-245">Quando você deriva de qualquer classe que já deriva de <xref:System.Windows.DependencyObject>, deve estar ciente de que o próprio sistema de propriedades chama e expõe métodos virtuais internamente.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-245">When you derive from any class that already derives from <xref:System.Windows.DependencyObject>, you should be aware that the property system itself calls and exposes virtual methods internally.</span></span> <span data-ttu-id="8bf8a-246">Esses métodos virtuais fazem parte dos serviços do sistema de propriedades do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8bf8a-246">These virtual methods are part of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system services.</span></span> <span data-ttu-id="8bf8a-247">A substituição dos métodos permite que as classes derivadas participem da determinação do valor.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-247">Overriding the methods enables derived classes to participate in value determination.</span></span> <span data-ttu-id="8bf8a-248">Para evitar possíveis problemas com a inicialização em runtime, você não deverá definir valores da propriedade de dependência dentro de construtores de classes, a menos que um padrão de construtor muito específico seja seguido.</span><span class="sxs-lookup"><span data-stu-id="8bf8a-248">To avoid potential issues with runtime initialization, you should not set dependency property values within constructors of classes, unless you follow a very specific constructor pattern.</span></span> <span data-ttu-id="8bf8a-249">Para obter detalhes, consulte [Padrões de construtor seguros para DependencyObjects](safe-constructor-patterns-for-dependencyobjects.md).</span><span class="sxs-lookup"><span data-stu-id="8bf8a-249">For details, see [Safe Constructor Patterns for DependencyObjects](safe-constructor-patterns-for-dependencyobjects.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="8bf8a-250">Consulte também</span><span class="sxs-lookup"><span data-stu-id="8bf8a-250">See also</span></span>

- [<span data-ttu-id="8bf8a-251">Visão geral das propriedades da dependência</span><span class="sxs-lookup"><span data-stu-id="8bf8a-251">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="8bf8a-252">Metadados de propriedade da dependência</span><span class="sxs-lookup"><span data-stu-id="8bf8a-252">Dependency Property Metadata</span></span>](dependency-property-metadata.md)
- [<span data-ttu-id="8bf8a-253">Visão geral da criação de controle</span><span class="sxs-lookup"><span data-stu-id="8bf8a-253">Control Authoring Overview</span></span>](../controls/control-authoring-overview.md)
- [<span data-ttu-id="8bf8a-254">Propriedades de dependência do tipo de coleção</span><span class="sxs-lookup"><span data-stu-id="8bf8a-254">Collection-Type Dependency Properties</span></span>](collection-type-dependency-properties.md)
- [<span data-ttu-id="8bf8a-255">Segurança de propriedade da dependência</span><span class="sxs-lookup"><span data-stu-id="8bf8a-255">Dependency Property Security</span></span>](dependency-property-security.md)
- [<span data-ttu-id="8bf8a-256">Carregamento de XAML e propriedades da dependência</span><span class="sxs-lookup"><span data-stu-id="8bf8a-256">XAML Loading and Dependency Properties</span></span>](xaml-loading-and-dependency-properties.md)
- [<span data-ttu-id="8bf8a-257">Padrões de construtor seguro para DependencyObjects</span><span class="sxs-lookup"><span data-stu-id="8bf8a-257">Safe Constructor Patterns for DependencyObjects</span></span>](safe-constructor-patterns-for-dependencyobjects.md)
