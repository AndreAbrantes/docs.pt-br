---
title: Herança do valor de propriedade
ms.date: 03/30/2017
helpviewer_keywords:
- inheritance [WPF], property values
- value inheritance [WPF]
- properties [WPF], value inheritance
ms.assetid: d7c338f9-f2bf-48ed-832c-7be58ac390e4
ms.openlocfilehash: 48543d2cfc11fc33dff6239cdfd7bfcd946e986a
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59186810"
---
# <a name="property-value-inheritance"></a><span data-ttu-id="55e57-102">Herança do valor de propriedade</span><span class="sxs-lookup"><span data-stu-id="55e57-102">Property Value Inheritance</span></span>
<span data-ttu-id="55e57-103">A herança do valor da propriedade é um recurso do sistema de propriedade [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="55e57-103">Property value inheritance is a feature of the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system.</span></span> <span data-ttu-id="55e57-104">A herança do valor da propriedade permite que elementos filho em uma árvore de elementos obtenham o valor de uma propriedade específica dos elementos pai, herdando esse valor como ele foi definido em qualquer lugar do elemento pai mais próximo.</span><span class="sxs-lookup"><span data-stu-id="55e57-104">Property value inheritance enables child elements in a tree of elements to obtain the value of a particular property from parent elements, inheriting that value as it was set anywhere in the nearest parent element.</span></span> <span data-ttu-id="55e57-105">O elemento pai também pode ter obtido seu valor por meio da herança do valor da propriedade, de modo que o sistema potencialmente é recursivo até a raiz da página.</span><span class="sxs-lookup"><span data-stu-id="55e57-105">The parent element might also have obtained its value through property value inheritance, so the system potentially recurses all the way to the page root.</span></span> <span data-ttu-id="55e57-106">A herança do valor da propriedade não é o comportamento padrão do sistema de propriedade; uma propriedade deve ser estabelecida com uma configuração específica de metadados para fazer com que essa propriedade inicie a herança do valor da propriedade nos elementos filho.</span><span class="sxs-lookup"><span data-stu-id="55e57-106">Property value inheritance is not the default property system behavior; a property must be established with a particular metadata setting in order to cause that property to initiate property value inheritance on child elements.</span></span>  

<a name="Property_Value_Inheritance_is_Containment_Inheritance"></a>   
## <a name="property-value-inheritance-is-containment-inheritance"></a><span data-ttu-id="55e57-107">A herança do valor da propriedade é uma herança de confinamento</span><span class="sxs-lookup"><span data-stu-id="55e57-107">Property Value Inheritance Is Containment Inheritance</span></span>  
 <span data-ttu-id="55e57-108">O termo "herança" aqui não tem exatamente o mesmo conceito de herança no contexto de tipos e da programação voltada a objetos de modo geral, em que as classes derivadas herdam definições de membro de suas classes base.</span><span class="sxs-lookup"><span data-stu-id="55e57-108">"Inheritance" as a term here is not quite the same concept as inheritance in the context of types and general object-oriented programming, where derived classes inherit member definitions from their base classes.</span></span> <span data-ttu-id="55e57-109">O significado de herança também é ativo em [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: propriedades definidas em várias classes base são expostas como atributos para classes [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] derivadas quando usadas como elementos, e são expostas como membros ao código.</span><span class="sxs-lookup"><span data-stu-id="55e57-109">That meaning of inheritance is also active in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: properties defined in various base classes are exposed as attributes for derived [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] classes when used as elements, and exposed as members for code.</span></span> <span data-ttu-id="55e57-110">A herança do valor da propriedade está relacionada, especificamente, a como valores da propriedade podem ser herdados de um elemento para outro com base nas relações pai e filho dentro de uma árvore de elementos.</span><span class="sxs-lookup"><span data-stu-id="55e57-110">Property value inheritance is particularly about how property values can inherit from one element to another on the basis of the parent-child relationships within a tree of elements.</span></span> <span data-ttu-id="55e57-111">A árvore de elementos fica visível mais diretamente quando aninha elementos dentro de outros elementos conforme você define aplicativos na marcação de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="55e57-111">That tree of elements is most directly visible when nesting elements inside other elements as you define applications in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] markup.</span></span> <span data-ttu-id="55e57-112">Árvores de objetos também podem ser criadas programaticamente adicionando objetos a coleções designadas de outros objetos, e a herança do valor da propriedade funciona da mesma maneira na árvore terminada em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="55e57-112">Trees of objects can also be created programmatically by adding objects to designated collections of other objects, and property value inheritance works the same way in the finished tree at run time.</span></span>  
  
<a name="Practical_Applications_of_Property_Value_Inheritance"></a>   
## <a name="practical-applications-of-property-value-inheritance"></a><span data-ttu-id="55e57-113">Aplicativos práticos de herança do valor da propriedade</span><span class="sxs-lookup"><span data-stu-id="55e57-113">Practical Applications of Property Value Inheritance</span></span>  
 <span data-ttu-id="55e57-114">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] incluem várias propriedades que têm a herança de propriedades habilitada.</span><span class="sxs-lookup"><span data-stu-id="55e57-114">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] include several properties that have property inheritance enabled.</span></span> <span data-ttu-id="55e57-115">Normalmente, o cenário é que eles envolvem uma propriedade em que é adequado que a propriedade seja definida apenas uma vez por página, mas em que essa propriedade também é membro de uma das classes de elementos base e, portanto, também existiria na maioria dos elementos filho.</span><span class="sxs-lookup"><span data-stu-id="55e57-115">Typically, the scenario for these is that they involve a property where it is appropriate that the property be set only once per page, but where that property is also a member of one of the base element classes and thus would also exist on most of the child elements.</span></span> <span data-ttu-id="55e57-116">Por exemplo, o <xref:System.Windows.FrameworkElement.FlowDirection%2A> propriedade controla a direção na qual o conteúdo passado deve ser apresentada e organizada na página.</span><span class="sxs-lookup"><span data-stu-id="55e57-116">For example, the <xref:System.Windows.FrameworkElement.FlowDirection%2A> property controls which direction flowed content should be presented and arranged on the page.</span></span> <span data-ttu-id="55e57-117">Geralmente, você deseja que o conceito de fluxo de texto seja manipulado consistentemente em todos os elementos filho.</span><span class="sxs-lookup"><span data-stu-id="55e57-117">Typically, you want the text flow concept to be handled consistently throughout all child elements.</span></span> <span data-ttu-id="55e57-118">Se a direção do fluxo fosse, por algum motivo, redefinida em algum nível da árvore de elementos por uma ação do usuário ou do ambiente, ela normalmente seria redefinida em todos os casos.</span><span class="sxs-lookup"><span data-stu-id="55e57-118">If flow direction were for some reason reset in some level of the element tree by user or environment action, it should typically be reset throughout.</span></span> <span data-ttu-id="55e57-119">Quando o <xref:System.Windows.FrameworkElement.FlowDirection%2A> propriedade é feita para herdar, o valor só precisa ser definido ou redefinido uma vez no nível na árvore de elementos que abrange as necessidades de apresentação de cada página no aplicativo.</span><span class="sxs-lookup"><span data-stu-id="55e57-119">When the <xref:System.Windows.FrameworkElement.FlowDirection%2A> property is made to inherit, the value need only be set or reset once at the level in the element tree that encompasses the presentation needs of each page in the application.</span></span> <span data-ttu-id="55e57-120">Até mesmo o valor padrão inicial herdará dessa forma.</span><span class="sxs-lookup"><span data-stu-id="55e57-120">Even the initial default value will inherit in this way.</span></span> <span data-ttu-id="55e57-121">O modelo de herança do valor da propriedade ainda permite que elementos individuais redefinam o valor para os raros casos em que ter uma combinação de direções de fluxo é intencional.</span><span class="sxs-lookup"><span data-stu-id="55e57-121">The property value inheritance model still enables individual elements to reset the value for the rare cases where having a mix of flow directions is intentional.</span></span>  
  
<a name="Making_a_Custom_Property_Inheritable"></a>   
## <a name="making-a-custom-property-inheritable"></a><span data-ttu-id="55e57-122">Tornando uma propriedade personalizada herdável</span><span class="sxs-lookup"><span data-stu-id="55e57-122">Making a Custom Property Inheritable</span></span>  
 <span data-ttu-id="55e57-123">Alterando os metadados de uma propriedade personalizada, você também pode tornar suas próprias propriedades personalizadas herdáveis.</span><span class="sxs-lookup"><span data-stu-id="55e57-123">By changing a custom property's metadata, you can also make your own custom properties inheritable.</span></span> <span data-ttu-id="55e57-124">Observe, entretanto, que designar uma propriedade como herdável leva a algumas considerações de desempenho.</span><span class="sxs-lookup"><span data-stu-id="55e57-124">Note, however, that designating a property as inheritable does have some performance considerations.</span></span> <span data-ttu-id="55e57-125">Em casos em que a propriedade não tem um valor local estabelecido, ou um valor obtido através de estilos, modelos ou associação de dados, uma propriedade herdável fornece seus valores de propriedade atribuídos a todos os elementos filho na árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="55e57-125">In cases where that property does not have an established local value, or a value obtained through styles, templates, or data binding, an inheritable property provides its assigned property values to all child elements in the logical tree.</span></span>  
  
 <span data-ttu-id="55e57-126">Para fazer uma propriedade participar da herança de valor, crie uma propriedade anexada personalizada, conforme descrito em [Registrar uma propriedade anexada](how-to-register-an-attached-property.md).</span><span class="sxs-lookup"><span data-stu-id="55e57-126">To make a property participate in value inheritance, create a custom attached property, as described in [Register an Attached Property](how-to-register-an-attached-property.md).</span></span> <span data-ttu-id="55e57-127">Registre a propriedade com metadados (<xref:System.Windows.FrameworkPropertyMetadata>) e especifique a opção "Herda" nas configurações de opções nos metadados.</span><span class="sxs-lookup"><span data-stu-id="55e57-127">Register the property with metadata (<xref:System.Windows.FrameworkPropertyMetadata>) and specify the "Inherits" option in the options settings within that metadata.</span></span> <span data-ttu-id="55e57-128">Verifique também se a propriedade tem um valor padrão estabelecido, porque esse valor será herdado.</span><span class="sxs-lookup"><span data-stu-id="55e57-128">Also make sure that the property has an established default value, because that value will now inherit.</span></span> <span data-ttu-id="55e57-129">Embora você tenha registrado a propriedade como anexada, também convém criar um "wrapper" da propriedade para o acesso de obter/definir no tipo do proprietário, exatamente como você faria para uma propriedade de dependência "não anexada".</span><span class="sxs-lookup"><span data-stu-id="55e57-129">Although you registered the property as attached, you might also want to create a property "wrapper" for get/set access on the owner type, just as you would for an "nonattached" dependency property.</span></span> <span data-ttu-id="55e57-130">Depois de fazer isso, a propriedade herdável ou pode ser definida usando o wrapper de propriedade direto no tipo de proprietário ou tipos derivados, ou ele pode ser definido usando a sintaxe da propriedade anexada em qualquer <xref:System.Windows.DependencyObject>.</span><span class="sxs-lookup"><span data-stu-id="55e57-130">After doing so, the inheritable property can either be set by using the direct property wrapper on the owner type or derived types, or it can be set by using the attached property syntax on any <xref:System.Windows.DependencyObject>.</span></span>  
  
 <span data-ttu-id="55e57-131">Propriedades anexadas são conceitualmente semelhantes a propriedades globais; Você pode verificar o valor em qualquer <xref:System.Windows.DependencyObject> e obter um resultado válido.</span><span class="sxs-lookup"><span data-stu-id="55e57-131">Attached properties are conceptually similar to global properties; you can check for the value on any <xref:System.Windows.DependencyObject> and get a valid result.</span></span> <span data-ttu-id="55e57-132">O cenário típico para propriedades anexadas é definir valores de propriedade nos elementos filho, e esse cenário é mais eficaz se a propriedade em questão for uma propriedade anexada que sempre está implicitamente presente como uma propriedade anexada em cada elemento (<xref:System.Windows.DependencyObject>) na árvore.</span><span class="sxs-lookup"><span data-stu-id="55e57-132">The typical scenario for attached properties is to set property values on child elements, and that scenario is more effective if the property in question is an attached property that is always implicitly present as an attached property on each element (<xref:System.Windows.DependencyObject>) in the tree.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="55e57-133">Embora a herança do valor da propriedade possa parecer funcionar para propriedades de dependência não anexadas, o comportamento da herança de uma propriedade não anexada em certos limites de elemento na árvore de tempo de execução é indefinido.</span><span class="sxs-lookup"><span data-stu-id="55e57-133">Although property value inheritance might appear to work for nonattached dependency properties, the inheritance behavior for a nonattached property through certain element boundaries in the run-time tree is undefined.</span></span> <span data-ttu-id="55e57-134">Sempre use <xref:System.Windows.DependencyProperty.RegisterAttached%2A> para registrar as propriedades em que você especificar <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> nos metadados.</span><span class="sxs-lookup"><span data-stu-id="55e57-134">Always use <xref:System.Windows.DependencyProperty.RegisterAttached%2A> to register properties where you specify <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> in the metadata.</span></span>  
  
<a name="InheritanceContext"></a>   
## <a name="inheriting-property-values-across-tree-boundaries"></a><span data-ttu-id="55e57-135">Herdando valores de propriedade entre limites de árvores</span><span class="sxs-lookup"><span data-stu-id="55e57-135">Inheriting Property Values Across Tree Boundaries</span></span>  
 <span data-ttu-id="55e57-136">A herança de propriedade funciona percorrendo uma árvore de elementos.</span><span class="sxs-lookup"><span data-stu-id="55e57-136">Property inheritance works by traversing a tree of elements.</span></span> <span data-ttu-id="55e57-137">Esta árvore geralmente é paralela à árvore lógica.</span><span class="sxs-lookup"><span data-stu-id="55e57-137">This tree is often parallel to the logical tree.</span></span> <span data-ttu-id="55e57-138">No entanto, sempre que você incluir um objeto de nível de núcleo do WPF na marcação que define uma árvore de elementos, como um <xref:System.Windows.Media.Brush>, você criou uma árvore lógica descontínua.</span><span class="sxs-lookup"><span data-stu-id="55e57-138">However, whenever you include a WPF core-level object in the markup that defines an element tree, such as a <xref:System.Windows.Media.Brush>, you have created a discontinuous logical tree.</span></span> <span data-ttu-id="55e57-139">Uma árvore lógica verdadeira não é estendida conceitualmente por meio de <xref:System.Windows.Media.Brush>, porque a árvore lógica é um conceito de nível de framework WPF.</span><span class="sxs-lookup"><span data-stu-id="55e57-139">A true logical tree does not conceptually extend through the <xref:System.Windows.Media.Brush>, because the logical tree is a WPF framework-level concept.</span></span> <span data-ttu-id="55e57-140">Você pode ver isso refletido nos resultados ao usar os métodos de <xref:System.Windows.LogicalTreeHelper>.</span><span class="sxs-lookup"><span data-stu-id="55e57-140">You can see this reflected in the results when using the methods of <xref:System.Windows.LogicalTreeHelper>.</span></span> <span data-ttu-id="55e57-141">No entanto, a herança do valor da propriedade pode preencher essa lacuna na árvore lógica e ainda pode passar valores herdados, desde que a propriedade herdável foi registrada como uma propriedade anexada e nenhum limite de bloqueio de herança deliberado (como uma <xref:System.Windows.Controls.Frame>) é encontrado.</span><span class="sxs-lookup"><span data-stu-id="55e57-141">However, property value inheritance can bridge this gap in the logical tree and can still pass inherited values through, so long as the inheritable property was registered as an attached property and no deliberate inheritance-blocking boundary (such as a <xref:System.Windows.Controls.Frame>) is encountered.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="55e57-142">Consulte também</span><span class="sxs-lookup"><span data-stu-id="55e57-142">See also</span></span>

- [<span data-ttu-id="55e57-143">Metadados de propriedade da dependência</span><span class="sxs-lookup"><span data-stu-id="55e57-143">Dependency Property Metadata</span></span>](dependency-property-metadata.md)
- [<span data-ttu-id="55e57-144">Visão geral das propriedades anexadas</span><span class="sxs-lookup"><span data-stu-id="55e57-144">Attached Properties Overview</span></span>](attached-properties-overview.md)
- [<span data-ttu-id="55e57-145">Precedência do valor da propriedade da dependência</span><span class="sxs-lookup"><span data-stu-id="55e57-145">Dependency Property Value Precedence</span></span>](dependency-property-value-precedence.md)
