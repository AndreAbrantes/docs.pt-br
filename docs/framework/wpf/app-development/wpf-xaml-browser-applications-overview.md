---
title: Visão geral dos aplicativos de navegador XAML
description: Saiba como os aplicativos de navegador XAML combinam recursos de aplicativos Web e aplicativos cliente avançados no Windows Presentation Foundation (WPF).
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- XBAP [WPF], XAML browser application
- WPF XAML browser applications (XBAP)
- XAML browser applications (XBAP)
- browser-hosted applications [WPF]
ms.assetid: 3a7a86a8-75d5-4898-96b9-73da151e5e16
ms.openlocfilehash: 3395445dd5639e25f62aeef09d070e326704ed40
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/01/2020
ms.locfileid: "85617906"
---
# <a name="wpf-xaml-browser-applications-overview"></a><span data-ttu-id="215ae-103">Visão geral dos aplicativos de navegador XAML do WPF</span><span class="sxs-lookup"><span data-stu-id="215ae-103">WPF XAML Browser Applications Overview</span></span>
<a name="introduction"></a><span data-ttu-id="215ae-104">Os aplicativos de navegador XAML (XBAPs) combinam recursos de aplicativos Web e aplicativos cliente avançados.</span><span class="sxs-lookup"><span data-stu-id="215ae-104">XAML browser applications (XBAPs) combines features of both Web applications and rich-client applications.</span></span> <span data-ttu-id="215ae-105">Assim como aplicativos Web, os XBAPs podem ser implantados em um servidor Web e iniciados no Internet Explorer ou no Firefox.</span><span class="sxs-lookup"><span data-stu-id="215ae-105">Like Web applications, XBAPs can be deployed to a Web server and started from Internet Explorer or Firefox.</span></span> <span data-ttu-id="215ae-106">Como aplicativos de cliente avançado, os XBAPs podem aproveitar os recursos do WPF.</span><span class="sxs-lookup"><span data-stu-id="215ae-106">Like rich-client applications, XBAPs can take advantage of the capabilities of WPF.</span></span> <span data-ttu-id="215ae-107">O desenvolvimento de XBAPs também é semelhante ao desenvolvimento de cliente avançado.</span><span class="sxs-lookup"><span data-stu-id="215ae-107">Developing XBAPs is also similar to rich-client development.</span></span> <span data-ttu-id="215ae-108">Este tópico fornece uma introdução simples e de alto nível ao desenvolvimento de XBAP e descreve em que o desenvolvimento XBAP difere do desenvolvimento padrão de cliente avançado.</span><span class="sxs-lookup"><span data-stu-id="215ae-108">This topic provides a simple, high-level introduction to XBAP development and describes where XBAP development differs from standard rich-client development.</span></span>

 <span data-ttu-id="215ae-109">Este tópico contém as seguintes seções:</span><span class="sxs-lookup"><span data-stu-id="215ae-109">This topic contains the following sections:</span></span>

- [<span data-ttu-id="215ae-110">Criando um novo aplicativo de navegador XAML (XBAP)</span><span class="sxs-lookup"><span data-stu-id="215ae-110">Creating a New XAML Browser Application (XBAP)</span></span>](#creating_a_new_xaml_browser_application_xbap)

- [<span data-ttu-id="215ae-111">Implantando um XBAP</span><span class="sxs-lookup"><span data-stu-id="215ae-111">Deploying an XBAP</span></span>](#deploying_a_xbap)

- [<span data-ttu-id="215ae-112">Comunicando-se com a página da Web de host</span><span class="sxs-lookup"><span data-stu-id="215ae-112">Communicating with the Host Web Page</span></span>](#communicating_with_the_host_web_page)

- [<span data-ttu-id="215ae-113">Considerações sobre segurança de XBAP</span><span class="sxs-lookup"><span data-stu-id="215ae-113">XBAP Security Considerations</span></span>](#xbap_security_considerations)

- [<span data-ttu-id="215ae-114">Considerações sobre desempenho de tempo de início de XBAP</span><span class="sxs-lookup"><span data-stu-id="215ae-114">XBAP Start Time Performance Considerations</span></span>](#xbap_start_time_performance_considerations)

<a name="creating_a_new_xaml_browser_application_xbap"></a>
## <a name="creating-a-new-xaml-browser-application-xbap"></a><span data-ttu-id="215ae-115">Criando um novo aplicativo de navegador XAML (XBAP)</span><span class="sxs-lookup"><span data-stu-id="215ae-115">Creating a New XAML Browser Application (XBAP)</span></span>
 <span data-ttu-id="215ae-116">A maneira mais simples de criar um novo projeto XBAP é com o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="215ae-116">The simplest way to create a new XBAP project is with Visual Studio.</span></span> <span data-ttu-id="215ae-117">Ao criar um novo projeto, selecione **Aplicativo de Navegador do WPF** na lista de modelos.</span><span class="sxs-lookup"><span data-stu-id="215ae-117">When creating a new project, select **WPF Browser Application** from the list of templates.</span></span> <span data-ttu-id="215ae-118">Para obter mais informações, consulte [Como criar um novo projeto de aplicativo de navegador do WPF](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/bb628663(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="215ae-118">For more information, see [How to: Create a New WPF Browser Application Project](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/bb628663(v=vs.100)).</span></span>

 <span data-ttu-id="215ae-119">Quando você executa o projeto XBAP, ele é aberto em uma janela do navegador, em vez de uma janela autônoma.</span><span class="sxs-lookup"><span data-stu-id="215ae-119">When you run the XBAP project, it opens in a browser window instead of a stand-alone window.</span></span> <span data-ttu-id="215ae-120">Quando você depura o XBAP do Visual Studio, o aplicativo é executado com a permissão de zona da Internet e, portanto, gerará exceções de segurança se essas permissões forem excedidas.</span><span class="sxs-lookup"><span data-stu-id="215ae-120">When you debug the XBAP from Visual Studio, the application runs with Internet zone permission and will therefore throw security exceptions if those permissions are exceeded.</span></span> <span data-ttu-id="215ae-121">Para obter mais informações, consulte [Segurança](../security-wpf.md) e [Segurança de confiança parcial do WPF](../wpf-partial-trust-security.md).</span><span class="sxs-lookup"><span data-stu-id="215ae-121">For more information, see [Security](../security-wpf.md) and [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>

> [!NOTE]
> <span data-ttu-id="215ae-122">Se você não estiver desenvolvendo com o Visual Studio ou quiser saber mais sobre os arquivos de projeto, consulte [criando um aplicativo WPF](building-a-wpf-application-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="215ae-122">If you are not developing with Visual Studio or want to learn more about the project files, see [Building a WPF Application](building-a-wpf-application-wpf.md).</span></span>

<a name="deploying_a_xbap"></a>
## <a name="deploying-an-xbap"></a><span data-ttu-id="215ae-123">Implantando um XBAP</span><span class="sxs-lookup"><span data-stu-id="215ae-123">Deploying an XBAP</span></span>
 <span data-ttu-id="215ae-124">Quando você compila um XBAP, a saída inclui os três arquivos a seguir:</span><span class="sxs-lookup"><span data-stu-id="215ae-124">When you build an XBAP, the output includes the following three files:</span></span>

|<span data-ttu-id="215ae-125">Arquivo</span><span class="sxs-lookup"><span data-stu-id="215ae-125">File</span></span>|<span data-ttu-id="215ae-126">Descrição</span><span class="sxs-lookup"><span data-stu-id="215ae-126">Description</span></span>|
|----------|-----------------|
|<span data-ttu-id="215ae-127">Executável (.exe)</span><span class="sxs-lookup"><span data-stu-id="215ae-127">Executable (.exe)</span></span>|<span data-ttu-id="215ae-128">Este arquivo contém o código compilado e tem uma extensão .exe.</span><span class="sxs-lookup"><span data-stu-id="215ae-128">This contains the compiled code and has an .exe extension.</span></span>|
|<span data-ttu-id="215ae-129">Manifesto do aplicativo (.manifest)</span><span class="sxs-lookup"><span data-stu-id="215ae-129">Application manifest (.manifest)</span></span>|<span data-ttu-id="215ae-130">Este arquivo contém os metadados associados ao aplicativo e tem uma extensão .manifest.</span><span class="sxs-lookup"><span data-stu-id="215ae-130">This contains metadata associated with the application and has a .manifest extension.</span></span>|
|<span data-ttu-id="215ae-131">Manifesto de implantação (.xbap)</span><span class="sxs-lookup"><span data-stu-id="215ae-131">Deployment manifest (.xbap)</span></span>|<span data-ttu-id="215ae-132">Esse arquivo contém as informações que o ClickOnce usa para implantar o aplicativo e tem a extensão. XBAP.</span><span class="sxs-lookup"><span data-stu-id="215ae-132">This file contains the information that ClickOnce uses to deploy the application and has the .xbap extension.</span></span>|

 <span data-ttu-id="215ae-133">Você implanta XBAPs em um servidor Web, por exemplo, Microsoft Serviços de Informações da Internet (IIS) 5,0 ou versões posteriores.</span><span class="sxs-lookup"><span data-stu-id="215ae-133">You deploy XBAPs to a Web server, for example Microsoft Internet Information Services (IIS) 5.0 or later versions.</span></span> <span data-ttu-id="215ae-134">Não é necessário instalar o .NET Framework no servidor Web, mas você precisa registrar os tipos MIME (Multipurpose Internet Mail Extensions) do WPF e extensões de nome de arquivo.</span><span class="sxs-lookup"><span data-stu-id="215ae-134">You do not have to install the .NET Framework on the Web server, but you do have to register the WPF Multipurpose Internet Mail Extensions (MIME) types and file name extensions.</span></span> <span data-ttu-id="215ae-135">Para obter mais informações, consulte [Configurar o IIS 5.0 e o IIS 6.0 para implantar aplicativos WPF](how-to-configure-iis-5-0-and-iis-6-0-to-deploy-wpf-applications.md).</span><span class="sxs-lookup"><span data-stu-id="215ae-135">For more information, see [Configure IIS 5.0 and IIS 6.0 to Deploy WPF Applications](how-to-configure-iis-5-0-and-iis-6-0-to-deploy-wpf-applications.md).</span></span>

 <span data-ttu-id="215ae-136">Para preparar seu XBAP para implantação, copie o .exe e os manifestos associados para o servidor Web.</span><span class="sxs-lookup"><span data-stu-id="215ae-136">To prepare your XBAP for deployment, copy the .exe and the associated manifests to the Web server.</span></span> <span data-ttu-id="215ae-137">Crie uma página HTML que contenha um hiperlink para abrir o manifesto de implantação, que é o arquivo que tem a extensão .xbap.</span><span class="sxs-lookup"><span data-stu-id="215ae-137">Create an HTML page that contains a hyperlink to open the deployment manifest, which is the file that has the .xbap extension.</span></span> <span data-ttu-id="215ae-138">Quando o usuário clica no link para o arquivo. XBAP, o ClickOnce manipula automaticamente a mecânica de download e inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="215ae-138">When the user clicks the link to the .xbap file, ClickOnce automatically handles the mechanics of downloading and starting the application.</span></span> <span data-ttu-id="215ae-139">O exemplo de código a seguir mostra uma página HTML que contém um hiperlink que aponta para um XBAP.</span><span class="sxs-lookup"><span data-stu-id="215ae-139">The following example code shows an HTML page that contains a hyperlink that points to an XBAP.</span></span>

```html
<html>
    <head></head>
    <body>
        <a href="XbapEx.xbap">Click this link to launch the application</a>
    </body>
</html>
```

 <span data-ttu-id="215ae-140">Você também pode hospedar um XBAP no quadro de uma página da Web.</span><span class="sxs-lookup"><span data-stu-id="215ae-140">You can also host an XBAP in the frame of a Web page.</span></span> <span data-ttu-id="215ae-141">Crie uma página da Web com um ou mais quadros.</span><span class="sxs-lookup"><span data-stu-id="215ae-141">Create a Web page with one or more frames.</span></span> <span data-ttu-id="215ae-142">Defina a propriedade de origem de um quadro como o arquivo de manifesto de implantação.</span><span class="sxs-lookup"><span data-stu-id="215ae-142">Set the source property of a frame to the deployment manifest file.</span></span> <span data-ttu-id="215ae-143">Se você quiser usar o mecanismo interno para se comunicar entre a página da Web de hospedagem e o XBAP, deverá hospedar o aplicativo em um quadro.</span><span class="sxs-lookup"><span data-stu-id="215ae-143">If you want to use the built-in mechanism to communicate between the hosting Web page and the XBAP, you must host the application in a frame.</span></span> <span data-ttu-id="215ae-144">O exemplo de código a seguir mostra uma página HTML com dois quadros; a fonte para o segundo quadro está definida como um XBAP.</span><span class="sxs-lookup"><span data-stu-id="215ae-144">The following example code shows an HTML page with two frames, the source for the second frame is set to an XBAP.</span></span>

```html
<html>
    <head>
        <title>A page with frames</title>
    </head>
    <frameset cols="50%,50%">
        <frame src="introduction.htm">
        <frame src="XbapEx.xbap">
    </frameset>
</html>
```

### <a name="clearing-cached-xbaps"></a><span data-ttu-id="215ae-145">Limpando XBAPs em cache</span><span class="sxs-lookup"><span data-stu-id="215ae-145">Clearing Cached XBAPs</span></span>
 <span data-ttu-id="215ae-146">Em algumas situações, depois de recompilar e iniciar o XBAP, você pode achar que uma versão anterior do XBAP está aberta.</span><span class="sxs-lookup"><span data-stu-id="215ae-146">In some situations after rebuilding and starting your XBAP, you may find that an earlier version of the XBAP is opened.</span></span> <span data-ttu-id="215ae-147">Por exemplo, esse comportamento pode ocorrer quando o número de versão do assembly do XBAP é estático e você inicia o XBAP através da linha de comando.</span><span class="sxs-lookup"><span data-stu-id="215ae-147">For example, this behavior may occur when your XBAP assembly version number is static and you start the XBAP from the command line.</span></span> <span data-ttu-id="215ae-148">Nesse caso, como o número de versão entre a versão em cache (a versão que foi anteriormente iniciada) e a nova versão permanece o mesmo, a nova versão do XBAP não é baixada.</span><span class="sxs-lookup"><span data-stu-id="215ae-148">In this case, because the version number between the cached version (the version that was previously started) and the new version remains the same, the new version of the XBAP is not downloaded.</span></span> <span data-ttu-id="215ae-149">Em vez disso, é carregada a versão em cache.</span><span class="sxs-lookup"><span data-stu-id="215ae-149">Instead, the cached version is loaded.</span></span>

 <span data-ttu-id="215ae-150">Nessas situações, você pode remover a versão armazenada em cache usando o comando **Mage** (instalado com o Visual Studio ou o SDK do Windows) no prompt de comando.</span><span class="sxs-lookup"><span data-stu-id="215ae-150">In these situations, you can remove the cached version by using the **Mage** command (installed with Visual Studio or the Windows SDK) at the command prompt.</span></span> <span data-ttu-id="215ae-151">O comando a seguir limpa o cache do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="215ae-151">The following command clears the application cache.</span></span>

 ```console
 Mage.exe -cc
 ```

 <span data-ttu-id="215ae-152">Esse comando garante que a versão mais recente do seu XBAP será iniciada.</span><span class="sxs-lookup"><span data-stu-id="215ae-152">This command guarantees that the latest version of your XBAP is started.</span></span> <span data-ttu-id="215ae-153">Quando você depura seu aplicativo no Visual Studio, a versão mais recente do XBAP deve ser iniciada.</span><span class="sxs-lookup"><span data-stu-id="215ae-153">When you debug your application in Visual Studio, the latest version of your XBAP should be started.</span></span> <span data-ttu-id="215ae-154">Em geral, você deve atualizar o número de versão de implantação a cada build.</span><span class="sxs-lookup"><span data-stu-id="215ae-154">In general, you should update your deployment version number with each build.</span></span> <span data-ttu-id="215ae-155">Para obter mais informações sobre a Mage, consulte [Mage.exe (Manifest Generation and Editing Tool)](../../tools/mage-exe-manifest-generation-and-editing-tool.md).</span><span class="sxs-lookup"><span data-stu-id="215ae-155">For more information about Mage, see [Mage.exe (Manifest Generation and Editing Tool)](../../tools/mage-exe-manifest-generation-and-editing-tool.md).</span></span>

<a name="communicating_with_the_host_web_page"></a>
## <a name="communicating-with-the-host-web-page"></a><span data-ttu-id="215ae-156">Comunicando-se com a página da Web de host</span><span class="sxs-lookup"><span data-stu-id="215ae-156">Communicating with the Host Web Page</span></span>
 <span data-ttu-id="215ae-157">Quando o aplicativo é hospedado em um quadro HTML, você pode se comunicar com a página da Web que contém o XBAP.</span><span class="sxs-lookup"><span data-stu-id="215ae-157">When the application is hosted in an HTML frame, you can communicate with the Web page that contains the XBAP.</span></span> <span data-ttu-id="215ae-158">Você faz isso recuperando a <xref:System.Windows.Interop.BrowserInteropHelper.HostScript%2A> propriedade de <xref:System.Windows.Interop.BrowserInteropHelper> .</span><span class="sxs-lookup"><span data-stu-id="215ae-158">You do this by retrieving the <xref:System.Windows.Interop.BrowserInteropHelper.HostScript%2A> property of <xref:System.Windows.Interop.BrowserInteropHelper>.</span></span> <span data-ttu-id="215ae-159">Essa propriedade retorna um objeto de script que representa a janela do HTML.</span><span class="sxs-lookup"><span data-stu-id="215ae-159">This property returns a script object that represents the HTML window.</span></span> <span data-ttu-id="215ae-160">Assim, você poderá acessar as propriedades, os métodos e os eventos no [objeto de janela](https://developer.mozilla.org/en-US/docs/Web/API/Window), usando a sintaxe de ponto regular.</span><span class="sxs-lookup"><span data-stu-id="215ae-160">You can then access the properties, methods, and events on the [window object](https://developer.mozilla.org/en-US/docs/Web/API/Window) by using regular dot syntax.</span></span> <span data-ttu-id="215ae-161">Você também pode acessar os métodos de script e as variáveis globais.</span><span class="sxs-lookup"><span data-stu-id="215ae-161">You can also access script methods and global variables.</span></span> <span data-ttu-id="215ae-162">O exemplo a seguir mostra como recuperar o objeto de script e fechar o navegador.</span><span class="sxs-lookup"><span data-stu-id="215ae-162">The following example shows how to retrieve the script object and close the browser.</span></span>

 [!code-csharp[XbapBrowserInterop#10](~/samples/snippets/csharp/VS_Snippets_Wpf/xbapbrowserinterop/cs/page1.xaml.cs#10)]
 [!code-vb[XbapBrowserInterop#10](~/samples/snippets/visualbasic/VS_Snippets_Wpf/xbapbrowserinterop/vb/page1.xaml.vb#10)]

### <a name="debugging-xbaps-that-use-hostscript"></a><span data-ttu-id="215ae-163">Depurando XBAPs que usam HostScript</span><span class="sxs-lookup"><span data-stu-id="215ae-163">Debugging XBAPs that Use HostScript</span></span>
 <span data-ttu-id="215ae-164">Se o XBAP usar o <xref:System.Windows.Interop.BrowserInteropHelper.HostScript%2A> objeto para se comunicar com a janela HTML, haverá duas configurações que você deve especificar para executar e depurar o aplicativo no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="215ae-164">If your XBAP uses the <xref:System.Windows.Interop.BrowserInteropHelper.HostScript%2A> object to communicate with the HTML window, there are two settings that you must specify to run and debug the application in Visual Studio.</span></span> <span data-ttu-id="215ae-165">O aplicativo deve ter acesso ao seu site de origem e você deve iniciar o aplicativo com a página HTML que contém o XBAP.</span><span class="sxs-lookup"><span data-stu-id="215ae-165">The application must have access to its site of origin and you must start the application with the HTML page that contains the XBAP.</span></span> <span data-ttu-id="215ae-166">As etapas a seguir descrevem como verificar essas duas configurações:</span><span class="sxs-lookup"><span data-stu-id="215ae-166">The following steps describe how to check these two settings:</span></span>

1. <span data-ttu-id="215ae-167">No Visual Studio, abra as propriedades do projeto.</span><span class="sxs-lookup"><span data-stu-id="215ae-167">In Visual Studio, open the project properties.</span></span>

2. <span data-ttu-id="215ae-168">Na guia **Segurança**, clique em **Avançado**.</span><span class="sxs-lookup"><span data-stu-id="215ae-168">On the **Security** tab, click **Advanced**.</span></span>

     <span data-ttu-id="215ae-169">A caixa de diálogo Configurações de Segurança Avançada é exibida.</span><span class="sxs-lookup"><span data-stu-id="215ae-169">The Advanced Security Settings dialog box appears.</span></span>

3. <span data-ttu-id="215ae-170">Verifique se a caixa de seleção **Conceder ao aplicativo acesso ao site de origem** está marcada e, em seguida, clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="215ae-170">Make sure that the **Grant the application access to its site of origin** check box is checked and then click **OK**.</span></span>

4. <span data-ttu-id="215ae-171">Na guia **Depurar**, selecione a opção **Iniciar Navegador com URL** e especifique a URL da página HTML que contém o XBAP.</span><span class="sxs-lookup"><span data-stu-id="215ae-171">On the **Debug** tab, select the **Start browser with URL** option and specify the URL for the HTML page that contains the XBAP.</span></span>

5. <span data-ttu-id="215ae-172">No Internet Explorer, clique no botão **Ferramentas** e, em seguida, selecione **Opções da Internet**.</span><span class="sxs-lookup"><span data-stu-id="215ae-172">In Internet Explorer, click the **Tools** button and then select **Internet Options**.</span></span>

     <span data-ttu-id="215ae-173">É exibida a caixa de diálogo Opções da Internet.</span><span class="sxs-lookup"><span data-stu-id="215ae-173">The Internet Options dialog box appears.</span></span>

6. <span data-ttu-id="215ae-174">Clique na guia **Avançado**.</span><span class="sxs-lookup"><span data-stu-id="215ae-174">Click the **Advanced** tab.</span></span>

7. <span data-ttu-id="215ae-175">Na lista **Configurações** em **Segurança**, marque a caixa de seleção **Permitir que o conteúdo ativo seja executado em arquivos no Meu Computador**.</span><span class="sxs-lookup"><span data-stu-id="215ae-175">In the **Settings** list under **Security**, check the **Allow active content to run in files on My Computer** check box.</span></span>

8. <span data-ttu-id="215ae-176">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="215ae-176">Click **OK**.</span></span>

     <span data-ttu-id="215ae-177">As alterações entrarão em vigor depois que você reiniciar o Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="215ae-177">The changes will take effect after you restart Internet Explorer.</span></span>

> [!CAUTION]
> <span data-ttu-id="215ae-178">Habilitar conteúdo ativo no Internet Explorer pode colocar seu computador em risco.</span><span class="sxs-lookup"><span data-stu-id="215ae-178">Enabling active content in Internet Explorer may put your computer at risk.</span></span> <span data-ttu-id="215ae-179">Se você não quiser alterar as configurações de segurança do Internet Explorer, poderá iniciar a página HTML a partir de um servidor e anexar o depurador do Visual Studio ao processo.</span><span class="sxs-lookup"><span data-stu-id="215ae-179">If you do not want to change your Internet Explorer security settings, you can launch the HTML page from a server and attach the Visual Studio debugger to the process.</span></span>

<a name="xbap_security_considerations"></a>
## <a name="xbap-security-considerations"></a><span data-ttu-id="215ae-180">Considerações sobre segurança de XBAP</span><span class="sxs-lookup"><span data-stu-id="215ae-180">XBAP Security Considerations</span></span>
 <span data-ttu-id="215ae-181">Os XBAPs normalmente são executados em uma área restrita de segurança de confiança parcial, que é restrita ao conjunto de permissões da zona da Internet.</span><span class="sxs-lookup"><span data-stu-id="215ae-181">XBAPs typically execute in a partial-trust security sandbox that is restricted to the Internet zone permission set.</span></span> <span data-ttu-id="215ae-182">Consequentemente, sua implementação deve dar suporte ao subconjunto de elementos do WPF que têm suporte na zona da Internet ou você deve elevar as permissões do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="215ae-182">Consequently, your implementation must support the subset of WPF elements that are supported in the Internet zone or you must elevate the permissions of your application.</span></span> <span data-ttu-id="215ae-183">Para saber mais, consulte [Segurança](../security-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="215ae-183">For more information, see [Security](../security-wpf.md).</span></span>

 <span data-ttu-id="215ae-184">Quando você usa um <xref:System.Windows.Controls.WebBrowser> controle em seu aplicativo, o WPF internamente instancia o controle ActiveX do WebBrowser nativo.</span><span class="sxs-lookup"><span data-stu-id="215ae-184">When you use a <xref:System.Windows.Controls.WebBrowser> control in your application, WPF internally instantiates the native WebBrowser ActiveX control.</span></span> <span data-ttu-id="215ae-185">Quando seu aplicativo é um XBAP de confiança parcial em execução no Internet Explorer, o controle ActiveX é executado em um thread dedicado do processo do Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="215ae-185">When your application is a partial-trust XBAP running in Internet Explorer, the ActiveX control runs in a dedicated thread of the Internet Explorer process.</span></span> <span data-ttu-id="215ae-186">Portanto, as seguintes limitações se aplicam:</span><span class="sxs-lookup"><span data-stu-id="215ae-186">Therefore, the following limitations apply:</span></span>

- <span data-ttu-id="215ae-187">O <xref:System.Windows.Controls.WebBrowser> controle deve fornecer um comportamento semelhante ao navegador de host, incluindo restrições de segurança.</span><span class="sxs-lookup"><span data-stu-id="215ae-187">The <xref:System.Windows.Controls.WebBrowser> control should provide behavior similar to the host browser, including security restrictions.</span></span> <span data-ttu-id="215ae-188">Algumas dessas restrições de segurança podem ser controladas por meio das configurações de segurança do Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="215ae-188">Some of these security restrictions can be controlled through the Internet Explorer security settings.</span></span> <span data-ttu-id="215ae-189">Para saber mais, consulte [Segurança](../security-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="215ae-189">For more information, see [Security](../security-wpf.md).</span></span>

- <span data-ttu-id="215ae-190">Uma exceção é lançada quando um XBAP é carregado entre domínios em uma página HTML.</span><span class="sxs-lookup"><span data-stu-id="215ae-190">An exception is thrown when an XBAP is loaded cross-domain in an HTML page.</span></span>

- <span data-ttu-id="215ae-191">A entrada está em um thread separado do WPF <xref:System.Windows.Controls.WebBrowser> , portanto, a entrada do teclado não pode ser interceptada e o estado do IME não é compartilhado.</span><span class="sxs-lookup"><span data-stu-id="215ae-191">Input is on a separate thread from the WPF <xref:System.Windows.Controls.WebBrowser>, so keyboard input cannot be intercepted and the IME state is not shared.</span></span>

- <span data-ttu-id="215ae-192">O tempo ou a ordem de navegação pode ser diferente devido ao controle ActiveX em execução em outro thread.</span><span class="sxs-lookup"><span data-stu-id="215ae-192">The timing or order of navigation may be different due to the ActiveX control running on another thread.</span></span> <span data-ttu-id="215ae-193">Por exemplo, a navegação até uma página nem sempre é cancelada ao iniciar outra solicitação de navegação.</span><span class="sxs-lookup"><span data-stu-id="215ae-193">For example, navigating to a page is not always cancelled by starting another navigation request.</span></span>

- <span data-ttu-id="215ae-194">Um controle ActiveX personalizado pode ter problemas com a comunicação, pois o aplicativo do WPF está em execução em um thread separado.</span><span class="sxs-lookup"><span data-stu-id="215ae-194">A custom ActiveX control may have trouble with communication since the WPF application is running in a separate thread.</span></span>

- <span data-ttu-id="215ae-195"><xref:System.Windows.Interop.HwndHost.MessageHook>Não é gerado porque <xref:System.Windows.Interop.HwndHost> não pode fazer uma subclasse de uma janela em execução em outro thread ou processo.</span><span class="sxs-lookup"><span data-stu-id="215ae-195"><xref:System.Windows.Interop.HwndHost.MessageHook> does not get raised because <xref:System.Windows.Interop.HwndHost> cannot subclass a window running in another thread or process.</span></span>

### <a name="creating-a-full-trust-xbap"></a><span data-ttu-id="215ae-196">Criando um XBAP de confiança total</span><span class="sxs-lookup"><span data-stu-id="215ae-196">Creating a Full-Trust XBAP</span></span>
 <span data-ttu-id="215ae-197">Se seu XBAP requer confiança total, você pode alterar seu projeto para habilitar essa permissão.</span><span class="sxs-lookup"><span data-stu-id="215ae-197">If your XBAP requires full trust, you can change your project to enable this permission.</span></span> <span data-ttu-id="215ae-198">As etapas a seguir descrevem como habilitar a confiança total:</span><span class="sxs-lookup"><span data-stu-id="215ae-198">The following steps describe how to enable full trust:</span></span>

1. <span data-ttu-id="215ae-199">No Visual Studio, abra as propriedades do projeto.</span><span class="sxs-lookup"><span data-stu-id="215ae-199">In Visual Studio, open the project properties.</span></span>

2. <span data-ttu-id="215ae-200">Na guia **Segurança**, selecione a opção **Este é um aplicativo de confiança total**.</span><span class="sxs-lookup"><span data-stu-id="215ae-200">On the **Security** tab, select the **This is a full trust application** option.</span></span>

 <span data-ttu-id="215ae-201">Essa configuração faz as seguintes alterações:</span><span class="sxs-lookup"><span data-stu-id="215ae-201">This setting makes the following changes:</span></span>

- <span data-ttu-id="215ae-202">No arquivo de projeto, o valor do elemento `<TargetZone>` é alterado para `Custom`.</span><span class="sxs-lookup"><span data-stu-id="215ae-202">In the project file, the `<TargetZone>` element value is changed to `Custom`.</span></span>

- <span data-ttu-id="215ae-203">No manifesto do aplicativo (App. manifest), um `Unrestricted="true"` atributo é adicionado ao elemento ' <xref:System.Security.PermissionSet> .</span><span class="sxs-lookup"><span data-stu-id="215ae-203">In the application manifest (app.manifest), an `Unrestricted="true"` attribute is added to the \`<xref:System.Security.PermissionSet> element.</span></span>

    ```xml
    <PermissionSet class="System.Security.PermissionSet"
                   version="1"
                   ID="Custom"
                   SameSite="site"
                   Unrestricted="true" />
    ```

### <a name="deploying-a-full-trust-xbap"></a><span data-ttu-id="215ae-204">Implantando um XBAP de confiança total</span><span class="sxs-lookup"><span data-stu-id="215ae-204">Deploying a Full-Trust XBAP</span></span>
 <span data-ttu-id="215ae-205">Quando você implanta um XBAP de confiança total que não segue o modelo de implantação confiável do ClickOnce, o comportamento quando o usuário executar o aplicativo dependerá da zona de segurança.</span><span class="sxs-lookup"><span data-stu-id="215ae-205">When you deploy a full-trust XBAP that does not follow the ClickOnce Trusted Deployment model, the behavior when the user runs the application will depend on the security zone.</span></span> <span data-ttu-id="215ae-206">Em alguns casos, o usuário receberá um aviso ao tentar instalá-lo.</span><span class="sxs-lookup"><span data-stu-id="215ae-206">In some cases, the user will receive a warning when they attempt to install it.</span></span> <span data-ttu-id="215ae-207">O usuário pode optar por continuar ou cancelar a instalação.</span><span class="sxs-lookup"><span data-stu-id="215ae-207">The user can choose to continue or cancel the installation.</span></span> <span data-ttu-id="215ae-208">A tabela a seguir descreve o comportamento do aplicativo para cada zona de segurança e o que você precisa fazer para que o aplicativo receba confiança total.</span><span class="sxs-lookup"><span data-stu-id="215ae-208">The following table describes the behavior of the application for each security zone and what you have to do for the application to receive full trust.</span></span>

|<span data-ttu-id="215ae-209">Zona de segurança</span><span class="sxs-lookup"><span data-stu-id="215ae-209">Security Zone</span></span>|<span data-ttu-id="215ae-210">Comportamento</span><span class="sxs-lookup"><span data-stu-id="215ae-210">Behavior</span></span>|<span data-ttu-id="215ae-211">Obtendo confiança total</span><span class="sxs-lookup"><span data-stu-id="215ae-211">Getting Full Trust</span></span>|
|-------------------|--------------|------------------------|
|<span data-ttu-id="215ae-212">Computador local</span><span class="sxs-lookup"><span data-stu-id="215ae-212">Local computer</span></span>|<span data-ttu-id="215ae-213">Confiança total automática</span><span class="sxs-lookup"><span data-stu-id="215ae-213">Automatic full trust</span></span>|<span data-ttu-id="215ae-214">Nenhuma ação é necessária.</span><span class="sxs-lookup"><span data-stu-id="215ae-214">No action is needed.</span></span>|
|<span data-ttu-id="215ae-215">Intranet e sites confiáveis</span><span class="sxs-lookup"><span data-stu-id="215ae-215">Intranet and trusted sites</span></span>|<span data-ttu-id="215ae-216">Aviso para confiança total</span><span class="sxs-lookup"><span data-stu-id="215ae-216">Prompt for full trust</span></span>|<span data-ttu-id="215ae-217">Assinar o XBAP com um certificado para que o usuário veja o código-fonte no aviso.</span><span class="sxs-lookup"><span data-stu-id="215ae-217">Sign the XBAP with a certificate so that the user sees the source in the prompt.</span></span>|
|<span data-ttu-id="215ae-218">Internet</span><span class="sxs-lookup"><span data-stu-id="215ae-218">Internet</span></span>|<span data-ttu-id="215ae-219">Falha com "Confiança não concedida"</span><span class="sxs-lookup"><span data-stu-id="215ae-219">Fails with "Trust Not Granted"</span></span>|<span data-ttu-id="215ae-220">Assinar o XBAP com um certificado.</span><span class="sxs-lookup"><span data-stu-id="215ae-220">Sign the XBAP with a certificate.</span></span>|

> [!NOTE]
> <span data-ttu-id="215ae-221">O comportamento descrito na tabela anterior é para XBAPs de confiança total que não seguem o modelo de implantação confiável do ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="215ae-221">The behavior described in the previous table is for full-trust XBAPs that do not follow the ClickOnce Trusted Deployment model.</span></span>

 <span data-ttu-id="215ae-222">É recomendável que você use o modelo de implantação confiável do ClickOnce para implantar um XBAP de confiança total.</span><span class="sxs-lookup"><span data-stu-id="215ae-222">It is recommended that you use the ClickOnce Trusted Deployment model for deploying a full-trust XBAP.</span></span> <span data-ttu-id="215ae-223">Esse modelo permite que seu XBAP receba a confiança total automaticamente, independentemente da zona de segurança, de forma que o usuário não receba um aviso.</span><span class="sxs-lookup"><span data-stu-id="215ae-223">This model allows your XBAP to be granted full trust automatically, regardless of the security zone, so that the user is not prompted.</span></span> <span data-ttu-id="215ae-224">Como parte desse modelo, você deve assinar o aplicativo com um certificado de um fornecedor confiável.</span><span class="sxs-lookup"><span data-stu-id="215ae-224">As part of this model, you must sign your application with a certificate from a trusted publisher.</span></span> <span data-ttu-id="215ae-225">Para obter mais informações, consulte [Visão geral da implantação de aplicativos confiáveis](/visualstudio/deployment/trusted-application-deployment-overview) e [Introdução à assinatura de código](https://docs.microsoft.com/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537361(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="215ae-225">For more information, see [Trusted Application Deployment Overview](/visualstudio/deployment/trusted-application-deployment-overview) and [Introduction to Code Signing](https://docs.microsoft.com/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537361(v=vs.85)).</span></span>

<a name="xbap_start_time_performance_considerations"></a>
## <a name="xbap-start-time-performance-considerations"></a><span data-ttu-id="215ae-226">Considerações sobre desempenho de tempo de início de XBAP</span><span class="sxs-lookup"><span data-stu-id="215ae-226">XBAP Start Time Performance Considerations</span></span>
 <span data-ttu-id="215ae-227">Um aspecto importante do desempenho do XBAP é seu tempo de início.</span><span class="sxs-lookup"><span data-stu-id="215ae-227">An important aspect of XBAP performance is its start time.</span></span> <span data-ttu-id="215ae-228">Se um XBAP for o primeiro aplicativo do WPF a ser carregado, o tempo de *inicialização a frio* poderá ser de dez segundos ou mais.</span><span class="sxs-lookup"><span data-stu-id="215ae-228">If an XBAP is the first WPF application to load, the *cold start* time can be ten seconds or more.</span></span> <span data-ttu-id="215ae-229">Isso ocorre porque a página de progresso é renderizada pelo WPF e tanto o CLR quanto o WPF devem ser iniciados a frio para exibir o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="215ae-229">This is because the progress page is rendered by WPF, and both the CLR and WPF must be cold-started to display the application.</span></span>

 <span data-ttu-id="215ae-230">A partir do .NET Framework 3,5 SP1, a hora de início frio do XBAP é atenuada exibindo uma página de progresso não gerenciada no início do ciclo de implantação.</span><span class="sxs-lookup"><span data-stu-id="215ae-230">Starting in .NET Framework 3.5 SP1, XBAP cold-start time is mitigated by displaying an unmanaged progress page early in the deployment cycle.</span></span> <span data-ttu-id="215ae-231">A página de progresso é exibida quase que imediatamente após o aplicativo ser iniciado, porque ela é exibida pelo código de hospedagem nativo e é renderizada em HTML.</span><span class="sxs-lookup"><span data-stu-id="215ae-231">The progress page appears almost immediately after the application is started, because it is displayed by native hosting code and rendered in HTML.</span></span>

 <span data-ttu-id="215ae-232">Além disso, a simultaneidade aprimorada da sequência de download do ClickOnce melhora a hora de início em até dez por cento.</span><span class="sxs-lookup"><span data-stu-id="215ae-232">In addition, improved concurrency of the ClickOnce download sequence improves start time by up to ten percent.</span></span> <span data-ttu-id="215ae-233">Depois que o ClickOnce baixa e valida os manifestos, o download do aplicativo é iniciado e a barra de progresso começa a ser atualizada.</span><span class="sxs-lookup"><span data-stu-id="215ae-233">After ClickOnce downloads and validates manifests, the application download starts, and the progress bar starts to update.</span></span>

## <a name="see-also"></a><span data-ttu-id="215ae-234">Consulte também</span><span class="sxs-lookup"><span data-stu-id="215ae-234">See also</span></span>

- [<span data-ttu-id="215ae-235">Configurar o Visual Studio para depurar um aplicativo de navegador XAML para chamar um serviço Web</span><span class="sxs-lookup"><span data-stu-id="215ae-235">Configure Visual Studio to Debug a XAML Browser Application to Call a Web Service</span></span>](configure-vs-to-debug-a-xaml-browser-to-call-a-web-service.md)
- [<span data-ttu-id="215ae-236">Implantando um aplicativo WPF</span><span class="sxs-lookup"><span data-stu-id="215ae-236">Deploying a WPF Application</span></span>](deploying-a-wpf-application-wpf.md)
