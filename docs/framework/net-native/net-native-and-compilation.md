---
title: Compilação e .NET nativo
ms.date: 03/30/2017
ms.assetid: e38ae4f3-3e3d-42c3-a4b8-db1aa9d84f85
ms.openlocfilehash: cf5c9f05b2f2cb4ca15e4add5b53bc9bdca757a3
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/30/2019
ms.locfileid: "73128253"
---
# <a name="net-native-and-compilation"></a><span data-ttu-id="92331-102">Compilação e .NET nativo</span><span class="sxs-lookup"><span data-stu-id="92331-102">.NET Native and Compilation</span></span>

<span data-ttu-id="92331-103">Aplicativos do Windows 8.1 e aplicativos de Área de Trabalho do Windows direcionados ao .NET Framework são escritos em uma linguagem de programação específica e compilados em IL (linguagem intermediária).</span><span class="sxs-lookup"><span data-stu-id="92331-103">Windows 8.1 applications and Windows Desktop applications that target the.NET Framework are written in a particular programming language and compiled into intermediate language (IL).</span></span> <span data-ttu-id="92331-104">Em runtime, um compilador JIT (Just-in-Time) é responsável pela compilação de IL em código nativo para o computador local antes de um método ser executado pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="92331-104">At runtime, a just-in-time (JIT) compiler is responsible for compiling the IL into native code for the local machine just before a method is executed for the first time.</span></span> <span data-ttu-id="92331-105">Por outro lado, a cadeia de ferramentas do .NET Native converte código-fonte em código nativo em tempo de compilação.</span><span class="sxs-lookup"><span data-stu-id="92331-105">In contrast, the .NET Native tool chain converts source code to native code at compile time.</span></span> <span data-ttu-id="92331-106">Este tópico compara .NET Native com outras tecnologias de compilação disponíveis para aplicativos do .NET Framework e também fornece uma visão prática de como o .NET Native produz código nativo que pode lhe ajudar a entender por que as exceções que ocorrem no código compilado com o .NET Native não ocorrem no código com compilação JIT.</span><span class="sxs-lookup"><span data-stu-id="92331-106">This topic compares .NET Native with other compilation technologies available for .NET Framework apps, and also provides a practical overview of how .NET Native produces native code that can help you understand why exceptions that occur in code compiled with .NET Native do not occur in JIT-compiled code.</span></span>

## <a name="net-native-generating-native-binaries"></a><span data-ttu-id="92331-107">.NET Native: gerando binários nativos</span><span class="sxs-lookup"><span data-stu-id="92331-107">.NET Native: Generating native binaries</span></span>

<span data-ttu-id="92331-108">Um aplicativo que tem como destino o .NET Framework e que não é compilado usando a cadeia de ferramentas do .NET Native consiste em seu assembly de aplicativo, que inclui o seguinte:</span><span class="sxs-lookup"><span data-stu-id="92331-108">An application that targets the .NET Framework and that is not compiled by using the .NET Native tool chain consists of your application assembly, which includes the following:</span></span>

- <span data-ttu-id="92331-109">[Metadados](../../standard/metadata-and-self-describing-components.md) que descrevem o assembly, as dependências desses metadados, os tipos que eles contêm e os respectivos membros.</span><span class="sxs-lookup"><span data-stu-id="92331-109">[Metadata](../../standard/metadata-and-self-describing-components.md) that describes the assembly, its dependencies, the types it contains, and their members.</span></span> <span data-ttu-id="92331-110">Os metadados são usados para reflexão e acesso de associação tardia e, em alguns casos, pelas ferramentas de compilador e de build também.</span><span class="sxs-lookup"><span data-stu-id="92331-110">The metadata is used for reflection and late-bound access, and in some cases by compiler and build tools as well.</span></span>

- <span data-ttu-id="92331-111">Código de implementação.</span><span class="sxs-lookup"><span data-stu-id="92331-111">Implementation code.</span></span> <span data-ttu-id="92331-112">Isso consiste de opcodes de IL (linguagem intermediária).</span><span class="sxs-lookup"><span data-stu-id="92331-112">This consists of intermediate language (IL) opcodes.</span></span> <span data-ttu-id="92331-113">Em runtime, o compilador JIT (Just-In-Time) o converte em código nativo para a plataforma de destino.</span><span class="sxs-lookup"><span data-stu-id="92331-113">At runtime, the just-in-time (JIT) compiler translates it into native code for the target platform.</span></span>

 <span data-ttu-id="92331-114">Além de seu assembly principal do aplicativo, um aplicativo requer que os seguintes elementos estejam presentes:</span><span class="sxs-lookup"><span data-stu-id="92331-114">In addition to your main application assembly, an app requires that the following be present:</span></span>

- <span data-ttu-id="92331-115">Quaisquer bibliotecas de classes adicionais ou assemblies de terceiros que sejam exigidos pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="92331-115">Any additional class libraries or third-party assemblies that are required by your app.</span></span> <span data-ttu-id="92331-116">Da mesma forma, esses assemblies incluem metadados que descrevem o assembly, os tipos e membros dele, bem como a IL que implementa todos os membros de tipo.</span><span class="sxs-lookup"><span data-stu-id="92331-116">These assemblies similarly include metadata that describes the assembly, its types, and their members, as well as the IL that implements all type members.</span></span>

- <span data-ttu-id="92331-117">A biblioteca de classes .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="92331-117">The .NET Framework Class Library.</span></span> <span data-ttu-id="92331-118">Esta é uma coleção de assemblies que está instalada no sistema local com a instalação do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="92331-118">This is a collection of assemblies that is installed on the local system with the .NET Framework installation.</span></span> <span data-ttu-id="92331-119">Os assemblies incluídos na biblioteca de classes .NET Framework incluem um conjunto completo de metadados e código de implementação.</span><span class="sxs-lookup"><span data-stu-id="92331-119">The assemblies included in the .NET Framework Class Library include a complete set of metadata and implementation code.</span></span>

- <span data-ttu-id="92331-120">O Common Language Runtime.</span><span class="sxs-lookup"><span data-stu-id="92331-120">The common language runtime.</span></span> <span data-ttu-id="92331-121">Isso é uma coleção de bibliotecas de vínculo dinâmico que executam serviços como o carregamento do assembly, coleta de lixo e gerenciamento de memória, tratamento de exceções, compilação Just-In-Time, comunicação remota e interoperabilidade.</span><span class="sxs-lookup"><span data-stu-id="92331-121">This is a collection of dynamic link libraries that perform such services as assembly loading, memory management and garbage collection, exception handling, just-in-time compilation, remoting, and interop.</span></span> <span data-ttu-id="92331-122">Assim como a biblioteca de classes, o runtime está instalado no sistema local como parte da instalação do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="92331-122">Like the class library, the runtime is installed on the local system as part of the .NET Framework installation.</span></span>

<span data-ttu-id="92331-123">Observe que todo o Common Language Runtime, bem como os metadados e IL para todos os tipos em assemblies específicos de aplicativo, os assemblies de terceiros e os assemblies do sistema devem estar presentes para o aplicativo ser executado com êxito.</span><span class="sxs-lookup"><span data-stu-id="92331-123">Note that the entire common language runtime, as well as metadata and IL for all types in application-specific assemblies, third-party assemblies, and system assemblies must be present for the app to execute successfully.</span></span>

## <a name="net-native-and-just-in-time-compilation"></a><span data-ttu-id="92331-124">Compilação Just-In-Time e por .NET Native</span><span class="sxs-lookup"><span data-stu-id="92331-124">.NET Native and just-in-time compilation</span></span>

<span data-ttu-id="92331-125">A entrada para a cadeia de ferramentas do .NET Native é o aplicativo da Windows Store criado pelo C# ou pelo compilador do Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="92331-125">The input for the .NET Native tool chain is the Windows store app built by the C# or Visual Basic compiler.</span></span> <span data-ttu-id="92331-126">Em outras palavras, a cadeia de ferramentas do .NET Native começa a ser executada quando o compilador de linguagem conclui a compilação de um aplicativo da Windows Store.</span><span class="sxs-lookup"><span data-stu-id="92331-126">In other words, the .NET Native tool chain begins execution when the language compiler has finished compilation of a Windows Store app.</span></span>

> [!TIP]
> <span data-ttu-id="92331-127">Já que a entrada para o .NET Native é a IL e os metadados gravados para assemblies gerenciados, você ainda pode executar a geração de código personalizado ou outras operações personalizadas usando os eventos pré-build ou pós-build ou modificando o arquivo de projeto do MSBuild.</span><span class="sxs-lookup"><span data-stu-id="92331-127">Because the input to .NET Native is the IL and metadata written to managed assemblies, you can still perform custom code generation or other custom operations by using pre-build or post-build events or by modifying the MSBuild project file.</span></span>
>
> <span data-ttu-id="92331-128">No entanto, não há suporte para categorias de ferramentas que modificam a IL e, portanto, impedem que a cadeia de ferramentas .NET analise a IL de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="92331-128">However, categories of tools that modify IL and thereby prevent the .NET tool chain from analyzing an app's IL are not supported.</span></span> <span data-ttu-id="92331-129">Os ofuscadores são as ferramentas mais notáveis desse tipo.</span><span class="sxs-lookup"><span data-stu-id="92331-129">Obfuscators are the most notable tools of this type.</span></span>

<span data-ttu-id="92331-130">Durante a conversão de um aplicativo de IL para código nativo, a cadeia de ferramentas do .NET Native executa operações como as seguintes:</span><span class="sxs-lookup"><span data-stu-id="92331-130">In the course of converting an app from IL to native code, the .NET Native tool chain performs operations like the following:</span></span>

- <span data-ttu-id="92331-131">Para determinados caminhos de código, ele substitui o código que depende de reflexão e metadados pelo código nativo estático.</span><span class="sxs-lookup"><span data-stu-id="92331-131">For certain code paths, it replaces code that relies on reflection and metadata with static native code.</span></span> <span data-ttu-id="92331-132">Por exemplo, se um tipo de valor não substitui o método <xref:System.ValueType.Equals%2A?displayProperty=nameWithType>, o teste padrão de igualdade usa reflexão para recuperar objetos <xref:System.Reflection.FieldInfo> que representam os campos de tipo de valor e, em seguida, compara os valores de campo de duas instâncias.</span><span class="sxs-lookup"><span data-stu-id="92331-132">For example, if a value type does not override the <xref:System.ValueType.Equals%2A?displayProperty=nameWithType> method, the default test for equality uses reflection to retrieve <xref:System.Reflection.FieldInfo> objects that represent the value type's fields, then compares the field values of two instances.</span></span> <span data-ttu-id="92331-133">Ao compilar para código nativo, a cadeia de ferramentas do .NET Native substitui o código de reflexão e metadados por uma comparação estática dos valores de campo.</span><span class="sxs-lookup"><span data-stu-id="92331-133">When compiling to native code, the .NET Native tool chain replaces the reflection code and metadata with a static comparison of the field values.</span></span>

- <span data-ttu-id="92331-134">Sempre que possível, ele tenta eliminar todos os metadados.</span><span class="sxs-lookup"><span data-stu-id="92331-134">Where possible, it attempts to eliminate all metadata.</span></span>

- <span data-ttu-id="92331-135">Ele inclui nos assemblies do aplicativo final apenas o código de implementação que é realmente invocado pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="92331-135">It includes in the final app assemblies only the implementation code that is actually invoked by the app.</span></span> <span data-ttu-id="92331-136">Isso afeta especialmente o código nas bibliotecas de terceiros e na biblioteca de classes .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="92331-136">This particularly affects code in third-party libraries and in the .NET Framework Class Library.</span></span> <span data-ttu-id="92331-137">Como resultado, um aplicativo já não depende de bibliotecas de terceiros ou da biblioteca de classes .NET Framework completa; em vez disso, o código em bibliotecas de classes .NET Framework e de terceiros agora é local para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="92331-137">As a result, an application no longer depends on either third-party libraries or the full .NET Framework Class Library; instead, code in third-party and .NET Framework class libraries is now local to the app.</span></span>

- <span data-ttu-id="92331-138">Ele substitui o CLR completo com um runtime refatorado que contém principalmente o coletor de lixo.</span><span class="sxs-lookup"><span data-stu-id="92331-138">It replaces the full CLR with a refactored runtime that primarily contains the garbage collector.</span></span> <span data-ttu-id="92331-139">O runtime refatorado encontra-se em uma biblioteca de chamada mrt100_app.dll que é local para o aplicativo e tem apenas algumas centenas de kilobytes de tamanho.</span><span class="sxs-lookup"><span data-stu-id="92331-139">The refactored runtime is found in a library named mrt100_app.dll that is local to the app and is only a few hundred kilobytes in size.</span></span> <span data-ttu-id="92331-140">Isso é possível porque a vinculação estática elimina a necessidade de muitos dos serviços executados pelo Common Language Runtime.</span><span class="sxs-lookup"><span data-stu-id="92331-140">This is possible because static linking eliminates the need for many of the services performed by the common language runtime.</span></span>

  > [!NOTE]
  > <span data-ttu-id="92331-141">O .NET Native usa o mesmo coletor de lixo que o Common Language Runtime padrão.</span><span class="sxs-lookup"><span data-stu-id="92331-141">.NET Native uses the same garbage collector as the standard common language runtime.</span></span> <span data-ttu-id="92331-142">No coletor de lixo do .NET Native, a coleta de lixo em segundo plano é habilitada por padrão.</span><span class="sxs-lookup"><span data-stu-id="92331-142">In the .NET Native garbage collector, background garbage collection is enabled by default.</span></span> <span data-ttu-id="92331-143">Para obter mais informações sobre a coleta de lixo, consulte [Conceitos básicos da coleta de lixo](../../standard/garbage-collection/fundamentals.md).</span><span class="sxs-lookup"><span data-stu-id="92331-143">For more information about garbage collection, see [Fundamentals of Garbage Collection](../../standard/garbage-collection/fundamentals.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="92331-144">O .NET Native compila um aplicativo inteiro para um aplicativo nativo.</span><span class="sxs-lookup"><span data-stu-id="92331-144">.NET Native compiles an entire application to a native application.</span></span> <span data-ttu-id="92331-145">Ele não permite que você compile um único assembly que contém uma biblioteca de classes para código nativo para que ele possa ser chamado independentemente por meio do código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="92331-145">It does not allow you to compile a single assembly that contains a class library to native code so that it can be called independently from managed code.</span></span>

<span data-ttu-id="92331-146">O aplicativo resultante que é produzido pela cadeia de ferramentas do .NET Native é gravado em um diretório chamado ilc.out no diretório Debug ou Release do diretório do projeto.</span><span class="sxs-lookup"><span data-stu-id="92331-146">The resulting app that is produced by the .NET Native tool chain is written to a directory named ilc.out in the Debug or Release directory of your project directory.</span></span> <span data-ttu-id="92331-147">Ele consiste dos seguintes arquivos:</span><span class="sxs-lookup"><span data-stu-id="92331-147">It consists of the following files:</span></span>

- <span data-ttu-id="92331-148">*\<appName>* .exe, um executável de stub que simplesmente transfere o controle para uma exportação de `Main` especial em *\<appName>* .dll.</span><span class="sxs-lookup"><span data-stu-id="92331-148">*\<appName>*.exe, a stub executable that simply transfers control to a special `Main` export in *\<appName>*.dll.</span></span>

- <span data-ttu-id="92331-149">*\<appName>* .dll, uma biblioteca de vínculo dinâmico do Windows que contém todo o código do aplicativo, bem como código de biblioteca de classes .NET Framework e todas as bibliotecas de terceiros em que você tem uma dependência.</span><span class="sxs-lookup"><span data-stu-id="92331-149">*\<appName>*.dll, a Windows dynamic link library that contains all your application code, as well as code from the .NET Framework Class Library and any third-party libraries that you have a dependency on.</span></span>  <span data-ttu-id="92331-150">Ele também contém código de suporte, tal como o código necessário para interoperação com o Windows e para serializar objetos em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="92331-150">It also contains support code, such as the code necessary to interoperate with Windows and to serialize objects in your app.</span></span>

- <span data-ttu-id="92331-151">mrt100_app.dll, um runtime refatorado que fornece serviços de runtime como coleta de lixo.</span><span class="sxs-lookup"><span data-stu-id="92331-151">mrt100_app.dll, a refactored runtime that provides runtime services such as garbage collection.</span></span>

 <span data-ttu-id="92331-152">Todas as dependências são capturadas pelo manifesto APPX do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="92331-152">All dependencies are captured by the app's APPX manifest.</span></span>  <span data-ttu-id="92331-153">Além do exe, dll e mrt100_app.dll do aplicativo, que são empacotados diretamente no pacote appx, isso inclui mais dois arquivos:</span><span class="sxs-lookup"><span data-stu-id="92331-153">In addition to the application exe, dll, and mrt100_app.dll, which are bundled directly in the appx package, this includes two more files:</span></span>

- <span data-ttu-id="92331-154">msvcr140_app.dll, a biblioteca de tempo de execução (CRT) de C usada pelo mrt100_app.dll.</span><span class="sxs-lookup"><span data-stu-id="92331-154">msvcr140_app.dll, the C run-time (CRT) library used by mrt100_app.dll.</span></span> <span data-ttu-id="92331-155">Ela é incluída por uma referência de estrutura no pacote.</span><span class="sxs-lookup"><span data-stu-id="92331-155">It is included by a framework reference in the package.</span></span>

- <span data-ttu-id="92331-156">mrt100.dll.</span><span class="sxs-lookup"><span data-stu-id="92331-156">mrt100.dll.</span></span> <span data-ttu-id="92331-157">Essa biblioteca inclui funções que podem melhorar o desempenho de mrt100_app.dll, embora sua ausência não impeça que mrt100_app.dll funcione.</span><span class="sxs-lookup"><span data-stu-id="92331-157">This library includes functions that can improve the performance of mrt100_app.dll, although its absence does not prevent mrt100_app.dll from functioning.</span></span> <span data-ttu-id="92331-158">Ele será carregado do diretório system32 no computador local, se tal diretório estiver presente.</span><span class="sxs-lookup"><span data-stu-id="92331-158">It is loaded from the system32 directory on the local machine, if it is present.</span></span>

<span data-ttu-id="92331-159">Já que a cadeia de ferramentas do .NET Native vinculará o código de implementação em seu aplicativo somente se souber que seu aplicativo realmente invoca esse código, os metadados ou o código de implementação necessários nos cenários a seguir poderão não ser incluídos com seu aplicativo:</span><span class="sxs-lookup"><span data-stu-id="92331-159">Because the .NET Native tool chain links implementation code into your app only if it knows that your app actually invokes that code, either the metadata or the implementation code required in the following scenarios may not be included with your app:</span></span>

- <span data-ttu-id="92331-160">Reflexão.</span><span class="sxs-lookup"><span data-stu-id="92331-160">Reflection.</span></span>

- <span data-ttu-id="92331-161">Invocação dinâmica ou de associação tardia.</span><span class="sxs-lookup"><span data-stu-id="92331-161">Dynamic or late-bound invocation.</span></span>

- <span data-ttu-id="92331-162">Serialização e desserialização.</span><span class="sxs-lookup"><span data-stu-id="92331-162">Serialization and deserialization.</span></span>

- <span data-ttu-id="92331-163">Interoperabilidade COM.</span><span class="sxs-lookup"><span data-stu-id="92331-163">COM interop.</span></span>

<span data-ttu-id="92331-164">Se o código de implementação ou de metadados necessário está ausente em runtime, o runtime do .NET Native gera uma exceção.</span><span class="sxs-lookup"><span data-stu-id="92331-164">If the necessary metadata or implementation code is absent at runtime, the .NET Native runtime throws an exception.</span></span> <span data-ttu-id="92331-165">Você pode evitar essas exceções e verificar se a cadeia de ferramentas do .NET Native inclui o código de implementação e os metadados necessários, usando um [arquivo de diretivas de tempo de execução](runtime-directives-rd-xml-configuration-file-reference.md), um arquivo XML que designa os elementos do programa cujos metadados ou código de implementação devem estar disponíveis em tempo de execução e atribui uma política de tempo de execução a elas.</span><span class="sxs-lookup"><span data-stu-id="92331-165">You can prevent these exceptions, and ensure that the .NET Native tool chain includes the required metadata and implementation code, by using a [runtime directives file](runtime-directives-rd-xml-configuration-file-reference.md), an XML file that designates the program elements whose metadata or implementation code must be available at runtime and assigns a runtime policy to them.</span></span> <span data-ttu-id="92331-166">Este é o arquivo de diretivas de runtime padrão que é adicionado a um projeto da Windows Store que é compilado pela cadeia de ferramentas do .NET Native:</span><span class="sxs-lookup"><span data-stu-id="92331-166">The following is the default runtime directives file that is added to a Windows Store project that is compiled by the .NET Native tool chain:</span></span>

```xml
<Directives xmlns="http://schemas.microsoft.com/netfx/2013/01/metadata">
  <Application>
    <Assembly Name="*Application*" Dynamic="Required All" />
  </Application>
</Directives>
```

<span data-ttu-id="92331-167">Isso habilita todos os tipos, bem como todos os respectivos membros em todos os assemblies em seu pacote do aplicativo, para reflexão e invocação dinâmica.</span><span class="sxs-lookup"><span data-stu-id="92331-167">This enables all the types, as well as all their members, in all the assemblies in your app package for reflection and dynamic invocation.</span></span> <span data-ttu-id="92331-168">No entanto, isso não habilita reflexão ou ativação dinâmica de tipos em assemblies de biblioteca de classes .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="92331-168">However, it does not enable reflection or dynamic activation of types in .NET Framework Class Library assemblies.</span></span> <span data-ttu-id="92331-169">Em muitos casos, isso é adequado.</span><span class="sxs-lookup"><span data-stu-id="92331-169">In many cases, this is adequate.</span></span>

## <a name="net-native-and-ngen"></a><span data-ttu-id="92331-170">.NET Native e NGEN</span><span class="sxs-lookup"><span data-stu-id="92331-170">.NET Native and NGEN</span></span>

<span data-ttu-id="92331-171">O NGEN [(gerador de imagem nativa)](../tools/ngen-exe-native-image-generator.md) compila os assemblies para código nativo e os instala no cache de imagem nativa no computador local.</span><span class="sxs-lookup"><span data-stu-id="92331-171">The [(Native Image Generator](../tools/ngen-exe-native-image-generator.md) (NGEN) compiles assemblies to native code and installs them in the native image cache on the local computer.</span></span> <span data-ttu-id="92331-172">No entanto, embora NGEN, assim como o .NET Native, produza código nativo, ele é diferente do .NET Native de algumas maneiras significativas:</span><span class="sxs-lookup"><span data-stu-id="92331-172">However, although NGEN, like .NET Native, produces native code, it differs from .NET Native in some significant ways:</span></span>

- <span data-ttu-id="92331-173">Se nenhuma imagem nativa estiver disponível para um método específico, o NGEN reverterá para compilação de código via JIT.</span><span class="sxs-lookup"><span data-stu-id="92331-173">If no native image is available for a particular method, NGEN falls back to JITing code.</span></span> <span data-ttu-id="92331-174">Isso significa que imagens nativas devem continuar a incluir IL e metadados caso o NGEN precise reverter para a compilação JIT.</span><span class="sxs-lookup"><span data-stu-id="92331-174">This means that native images must continue to include metadata and IL in the event that NGEN needs to fall back to JIT compilation.</span></span> <span data-ttu-id="92331-175">Por outro lado, o .NET Native produz apenas imagens nativas e não será revertido para a compilação JIT.</span><span class="sxs-lookup"><span data-stu-id="92331-175">In contrast, .NET Native produces only native images and does not fall back to JIT compilation.</span></span> <span data-ttu-id="92331-176">Como resultado, apenas os metadados necessários para alguns cenários de interoperabilidade, serialização e reflexão devem ser preservados.</span><span class="sxs-lookup"><span data-stu-id="92331-176">As a result, only metadata required for some reflection, serialization, and interop scenarios must be preserved.</span></span>

- <span data-ttu-id="92331-177">O NGEN continua a depender do Common Language Runtime completo para serviços como o carregamento de assembly, comunicação remota, interoperabilidade, gerenciamento de memória, coleta de lixo e, se necessário, compilação JIT.</span><span class="sxs-lookup"><span data-stu-id="92331-177">NGEN continues to rely on the full common language runtime for services such as assembly loading, remoting, interop, memory management, garbage collection, and, if necessary, JIT compilation.</span></span> <span data-ttu-id="92331-178">No .NET Native, muitos desses serviços são desnecessários (compilação JIT) ou são resolvidos em tempo de build e incorporados no assembly do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="92331-178">In .NET Native, many of these services are either unnecessary (JIT compilation) or are resolved at build-time and incorporated in the app assembly.</span></span> <span data-ttu-id="92331-179">Os serviços restantes, entre os quais o mais importante é a coleta de lixo, são incluídos em um runtime muito menor, refatorado, denominado mrt100_app.dll.</span><span class="sxs-lookup"><span data-stu-id="92331-179">The remaining services, the most important of which is garbage collection, are included in a much smaller, refactored runtime named mrt100_app.dll.</span></span>

- <span data-ttu-id="92331-180">As imagens NGEN tendem a ser frágeis.</span><span class="sxs-lookup"><span data-stu-id="92331-180">NGEN images tend to be fragile.</span></span> <span data-ttu-id="92331-181">Por exemplo, um patch ou alteração para uma dependência normalmente requer que os assemblies que a usam também tenham imagem gerada novamente por NGEN.</span><span class="sxs-lookup"><span data-stu-id="92331-181">For example, a patch or change to a dependency typically requires that the assemblies that use it also be re-NGENed.</span></span> <span data-ttu-id="92331-182">Isso é particularmente verdadeiro em assemblies do sistema na biblioteca de classes .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="92331-182">This is particularly true of system assemblies in the .NET Framework Class Library.</span></span> <span data-ttu-id="92331-183">Por outro lado, o .NET Native permite que aplicativos sejam atendidos independentemente uns dos outros.</span><span class="sxs-lookup"><span data-stu-id="92331-183">In contrast, .NET Native allows applications to be served independently of one another.</span></span>

## <a name="see-also"></a><span data-ttu-id="92331-184">Consulte também</span><span class="sxs-lookup"><span data-stu-id="92331-184">See also</span></span>

- [<span data-ttu-id="92331-185">Metadados e componentes autodescritivos</span><span class="sxs-lookup"><span data-stu-id="92331-185">Metadata and Self-Describing Components</span></span>](../../standard/metadata-and-self-describing-components.md)
- [<span data-ttu-id="92331-186">Dentro de .NET Native (vídeo do Channel 9)</span><span class="sxs-lookup"><span data-stu-id="92331-186">Inside .NET Native (Channel 9 Video)</span></span>](https://channel9.msdn.com/Shows/Going+Deep/Inside-NET-Native)
- [<span data-ttu-id="92331-187">Reflexão e .NET Native</span><span class="sxs-lookup"><span data-stu-id="92331-187">Reflection and .NET Native</span></span>](reflection-and-net-native.md)
- [<span data-ttu-id="92331-188">Solução de problemas gerais do .NET Native</span><span class="sxs-lookup"><span data-stu-id="92331-188">.NET Native General Troubleshooting</span></span>](net-native-general-troubleshooting.md)
