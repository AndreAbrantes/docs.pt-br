---
title: Como o runtime localiza assemblies
description: Saiba como o Common Language Runtime (CLR) localiza e se associa aos assemblies que compõem seu aplicativo no .NET.
ms.date: 03/30/2017
helpviewer_keywords:
- app.config files, assembly locations
- deploying applications [.NET Framework], assembly locations
- application configuration files, locating assemblies
- .NET Framework application deployment, locating assemblies
- locating assemblies
- assemblies [.NET Framework], location
ms.assetid: 772ac6f4-64d2-4cfb-92fd-58096dcd6c34
ms.openlocfilehash: 1b2ee58ccbd4bdfceb6300c20d5255718982f2e5
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96272521"
---
# <a name="how-the-runtime-locates-assemblies"></a><span data-ttu-id="a7485-103">Como o runtime localiza assemblies</span><span class="sxs-lookup"><span data-stu-id="a7485-103">How the Runtime Locates Assemblies</span></span>

<span data-ttu-id="a7485-104">Para implantar seu aplicativo .NET Framework com êxito, você deve entender como o Common Language Runtime localiza e associa aos assemblies que compõem seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-104">To successfully deploy your .NET Framework application, you must understand how the common language runtime locates and binds to the assemblies that make up your application.</span></span> <span data-ttu-id="a7485-105">Por padrão, o runtime tenta associar com a versão exata de um assembly com o qual o aplicativo foi criado.</span><span class="sxs-lookup"><span data-stu-id="a7485-105">By default, the runtime attempts to bind with the exact version of an assembly that the application was built with.</span></span> <span data-ttu-id="a7485-106">Esse comportamento padrão pode ser substituído pelas configurações do arquivo de configuração.</span><span class="sxs-lookup"><span data-stu-id="a7485-106">This default behavior can be overridden by configuration file settings.</span></span>

<span data-ttu-id="a7485-107">O Common Language Runtime executa uma série de etapas ao tentar localizar um assembly e resolver uma referência de assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-107">The common language runtime performs a number of steps when attempting to locate an assembly and resolve an assembly reference.</span></span> <span data-ttu-id="a7485-108">Cada etapa é explicada nas seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="a7485-108">Each step is explained in the following sections.</span></span> <span data-ttu-id="a7485-109">A investigação de termo normalmente é usada para descrever como o runtime localiza os assemblies, ela referencia o conjunto de heurística usado para localizar o assembly com base em seu nome e cultura.</span><span class="sxs-lookup"><span data-stu-id="a7485-109">The term probing is often used when describing how the runtime locates assemblies; it refers to the set of heuristics used to locate the assembly based on its name and culture.</span></span>

> [!NOTE]
> <span data-ttu-id="a7485-110">Você pode exibir informações de associação no arquivo de log usando o [Visualizador de Log de Associação de Assembly (Fuslogvw.exe)](../tools/fuslogvw-exe-assembly-binding-log-viewer.md), incluído no SDK do Windows.</span><span class="sxs-lookup"><span data-stu-id="a7485-110">You can view binding information in the log file using the [Assembly Binding Log Viewer (Fuslogvw.exe)](../tools/fuslogvw-exe-assembly-binding-log-viewer.md), which is included in the Windows SDK.</span></span>

## <a name="initiating-the-bind"></a><span data-ttu-id="a7485-111">Iniciando a associação</span><span class="sxs-lookup"><span data-stu-id="a7485-111">Initiating the Bind</span></span>

<span data-ttu-id="a7485-112">O processo de localização e associação a um assembly começa quando o runtime tenta resolver uma referência a outro assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-112">The process of locating and binding to an assembly begins when the runtime attempts to resolve a reference to another assembly.</span></span> <span data-ttu-id="a7485-113">Essa referência pode ser estática ou dinâmica.</span><span class="sxs-lookup"><span data-stu-id="a7485-113">This reference can be either static or dynamic.</span></span> <span data-ttu-id="a7485-114">O compilador registra as referências estáticas nos metadados do manifesto do assembly no tempo de build.</span><span class="sxs-lookup"><span data-stu-id="a7485-114">The compiler records static references in the assembly manifest's metadata at build time.</span></span> <span data-ttu-id="a7485-115">Referências dinâmicas são construídas em tempo real como resultado de chamar vários métodos, como <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a7485-115">Dynamic references are constructed on the fly as a result of calling various methods, such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="a7485-116">A melhor maneira de referenciar um assembly é usar uma referência completa, incluindo o nome do assembly, a versão, a cultura e o token de chave pública (se houver).</span><span class="sxs-lookup"><span data-stu-id="a7485-116">The preferred way to reference an assembly is to use a full reference, including the assembly name, version, culture, and public key token (if one exists).</span></span> <span data-ttu-id="a7485-117">O runtime usa essas informações para localizar o assembly, seguindo as etapas descritas posteriormente nesta seção.</span><span class="sxs-lookup"><span data-stu-id="a7485-117">The runtime uses this information to locate the assembly, following the steps described later in this section.</span></span> <span data-ttu-id="a7485-118">O runtime usa o mesmo processo de resolução, independentemente de se a referência é para um assembly estático ou dinâmico.</span><span class="sxs-lookup"><span data-stu-id="a7485-118">The runtime uses the same resolution process regardless of whether the reference is for a static or dynamic assembly.</span></span>

<span data-ttu-id="a7485-119">Você também pode fazer uma referência dinâmica a um assembly fornecendo o método de chamada apenas com informações parciais sobre o assembly, como especificando apenas o nome do assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-119">You can also make a dynamic reference to an assembly by providing the calling method with only partial information about the assembly, such as specifying only the assembly name.</span></span> <span data-ttu-id="a7485-120">Nesse caso, somente o diretório do aplicativo é pesquisado par ao assembly e não ocorre nenhuma outra verificação.</span><span class="sxs-lookup"><span data-stu-id="a7485-120">In this case, only the application directory is searched for the assembly, and no other checking occurs.</span></span> <span data-ttu-id="a7485-121">Você faz uma referência parcial usando qualquer um dos vários métodos para carregar assemblies como <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> ou <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a7485-121">You make a partial reference using any of the various methods for loading assemblies such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> or <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="a7485-122">Por fim, você pode fazer uma referência dinâmica usando um método como <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> e fornecer apenas informações parciais; em seguida, você qualifica a referência usando o [\<qualifyAssembly>](../configure-apps/file-schema/runtime/qualifyassembly-element.md) elemento no arquivo de configuração do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-122">Finally, you can make a dynamic reference using a method such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> and provide only partial information; you then qualify the reference using the [\<qualifyAssembly>](../configure-apps/file-schema/runtime/qualifyassembly-element.md) element in the application configuration file.</span></span> <span data-ttu-id="a7485-123">Esse elemento permite que você forneça as informações de referência completa (nome, versão, cultura e, se aplicável, o token de chave pública) em seu arquivo de configuração de aplicativo em vez de no seu código.</span><span class="sxs-lookup"><span data-stu-id="a7485-123">This element allows you to provide the full reference information (name, version, culture and, if applicable, the public key token) in your application configuration file instead of in your code.</span></span> <span data-ttu-id="a7485-124">Você usaria essa técnica se desejasse qualificar completamente uma referência a um assembly fora do diretório do aplicativo ou se desejasse referenciar um assembly no cache de assembly global, mas quisesse a conveniência de especificar a referência completa no arquivo de configuração em vez de no código.</span><span class="sxs-lookup"><span data-stu-id="a7485-124">You would use this technique if you wanted to fully qualify a reference to an assembly outside the application directory, or if you wanted to reference an assembly in the global assembly cache but you wanted the convenience of specifying the full reference in the configuration file instead of in your code.</span></span>

> [!NOTE]
> <span data-ttu-id="a7485-125">Esse tipo de referência parcial não deve ser usado com assemblies que são compartilhados entre vários aplicativos.</span><span class="sxs-lookup"><span data-stu-id="a7485-125">This type of partial reference should not be used with assemblies that are shared among several applications.</span></span> <span data-ttu-id="a7485-126">Como as definições de configuração são aplicadas por aplicativo e não por assembly, um assembly compartilhado usando esse tipo de referência parcial exigiria que cada aplicativo usando o assembly compartilhado tivesse as informações de qualificação no seu arquivo de configuração.</span><span class="sxs-lookup"><span data-stu-id="a7485-126">Because configuration settings are applied per application and not per assembly, a shared assembly using this type of partial reference would require each application using the shared assembly to have the qualifying information in its configuration file.</span></span>

<span data-ttu-id="a7485-127">O runtime usa as seguintes etapas para resolver uma referência de assembly:</span><span class="sxs-lookup"><span data-stu-id="a7485-127">The runtime uses the following steps to resolve an assembly reference:</span></span>

1. <span data-ttu-id="a7485-128">[Determina a versão do assembly correta](#step1) examinando arquivos de configuração aplicáveis, inclusive o arquivo de configuração de aplicativo, o arquivo de política de publicador e o arquivo de configuração de computador.</span><span class="sxs-lookup"><span data-stu-id="a7485-128">[Determines the correct assembly version](#step1) by examining applicable configuration files, including the application configuration file, publisher policy file, and machine configuration file.</span></span> <span data-ttu-id="a7485-129">Se o arquivo de configuração estiver localizado em um computador remoto, o runtime deverá localizar e baixar o arquivo de configuração de aplicativo primeiro.</span><span class="sxs-lookup"><span data-stu-id="a7485-129">If the configuration file is located on a remote machine, the runtime must locate and download the application configuration file first.</span></span>

2. <span data-ttu-id="a7485-130">[Verifica se o nome do assembly foi associado antes](#step2) e, em caso afirmativo, usa o assembly carregado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="a7485-130">[Checks whether the assembly name has been bound to before](#step2) and, if so, uses the previously loaded assembly.</span></span> <span data-ttu-id="a7485-131">Se uma solicitação anterior para carregar o assembly falhou, a solicitação falhará imediatamente sem tentar carregar o assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-131">If a previous request to load the assembly failed, the request is failed immediately without attempting to load the assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a7485-132">O cache de falhas de associação de assembly é uma novidade no .NET Framework versão 2.0.</span><span class="sxs-lookup"><span data-stu-id="a7485-132">The caching of assembly binding failures is new in the .NET Framework version 2.0.</span></span>

3. <span data-ttu-id="a7485-133">[Verifica o cache de assembly global](#step3).</span><span class="sxs-lookup"><span data-stu-id="a7485-133">[Checks the global assembly cache](#step3).</span></span> <span data-ttu-id="a7485-134">Se o assembly for encontrado lá, o runtime usará esse assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-134">If the assembly is found there, the runtime uses this assembly.</span></span>

4. <span data-ttu-id="a7485-135">[Investiga o assembly](#step4) usando as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="a7485-135">[Probes for the assembly](#step4) using the following steps:</span></span>

    1. <span data-ttu-id="a7485-136">Se a política do publicador e a configuração não afetam a referência original e se a solicitação de associação foi criada usando o método <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>, o runtime procura dicas de localização.</span><span class="sxs-lookup"><span data-stu-id="a7485-136">If configuration and publisher policy do not affect the original reference and if the bind request was created using the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method, the runtime checks for location hints.</span></span>

    2. <span data-ttu-id="a7485-137">Se uma base de código for encontrada nos arquivos de configuração, o runtime verificará apenas esse local.</span><span class="sxs-lookup"><span data-stu-id="a7485-137">If a codebase is found in the configuration files, the runtime checks only this location.</span></span> <span data-ttu-id="a7485-138">Se essa investigação falhar, o runtime determinará que a solicitação de associação falhou e não ocorrem outras investigações.</span><span class="sxs-lookup"><span data-stu-id="a7485-138">If this probe fails, the runtime determines that the binding request failed and no other probing occurs.</span></span>

    3. <span data-ttu-id="a7485-139">Investiga o assembly usando a heurística descrita na [seção de investigação](#step4).</span><span class="sxs-lookup"><span data-stu-id="a7485-139">Probes for the assembly using the heuristics described in the [probing section](#step4).</span></span> <span data-ttu-id="a7485-140">Se o assembly não for encontrado após a investigação, o runtime solicitará que o Windows Installer forneça o assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-140">If the assembly is not found after probing, the runtime requests the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="a7485-141">Isso funciona como um recurso de instalação sob demanda.</span><span class="sxs-lookup"><span data-stu-id="a7485-141">This acts as an install-on-demand feature.</span></span>

        > [!NOTE]
        > <span data-ttu-id="a7485-142">Não há nenhuma verificação de versão para os assemblies sem nomes fortes e o runtime não faz o check-in do cache de assembly global se há assemblies sem nomes fortes.</span><span class="sxs-lookup"><span data-stu-id="a7485-142">There is no version checking for assemblies without strong names, nor does the runtime check in the global assembly cache for assemblies without strong names.</span></span>

<a name="step1"></a>

## <a name="step-1-examining-the-configuration-files"></a><span data-ttu-id="a7485-143">Etapa 1: Examinando os arquivos de configuração</span><span class="sxs-lookup"><span data-stu-id="a7485-143">Step 1: Examining the Configuration Files</span></span>

<span data-ttu-id="a7485-144">O comportamento de associação do assembly pode ser configurado em diferentes níveis com base em três arquivos XML:</span><span class="sxs-lookup"><span data-stu-id="a7485-144">Assembly binding behavior can be configured at different levels based on three XML files:</span></span>

- <span data-ttu-id="a7485-145">Arquivo de configuração de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-145">Application configuration file.</span></span>

- <span data-ttu-id="a7485-146">Arquivo de política do publicador.</span><span class="sxs-lookup"><span data-stu-id="a7485-146">Publisher policy file.</span></span>

- <span data-ttu-id="a7485-147">Arquivo de configuração do computador.</span><span class="sxs-lookup"><span data-stu-id="a7485-147">Machine configuration file.</span></span>

<span data-ttu-id="a7485-148">Esses arquivos seguem a mesma sintaxe e fornecem informações como redirecionamentos de associação, o local do código e modos de associação para assemblies específicos.</span><span class="sxs-lookup"><span data-stu-id="a7485-148">These files follow the same syntax and provide information such as binding redirects, the location of code, and binding modes for particular assemblies.</span></span> <span data-ttu-id="a7485-149">Cada arquivo de configuração pode conter um [ \<assemblyBinding> elemento](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) que redireciona o processo de associação.</span><span class="sxs-lookup"><span data-stu-id="a7485-149">Each configuration file can contain an [\<assemblyBinding> element](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) that redirects the binding process.</span></span> <span data-ttu-id="a7485-150">Os elementos filho do [ \<assemblyBinding> elemento](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) incluem o [ \<dependentAssembly> elemento](../configure-apps/file-schema/runtime/dependentassembly-element.md).</span><span class="sxs-lookup"><span data-stu-id="a7485-150">The child elements of the [\<assemblyBinding> element](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) include the [\<dependentAssembly> element](../configure-apps/file-schema/runtime/dependentassembly-element.md).</span></span> <span data-ttu-id="a7485-151">Os filhos do [ \<dependentAssembly> elemento](../configure-apps/file-schema/runtime/dependentassembly-element.md) incluem o [ \<assemblyIdentity> elemento](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), o [ \<bindingRedirect> elemento](../configure-apps/file-schema/runtime/bindingredirect-element.md)e o [ \<codeBase> elemento](../configure-apps/file-schema/runtime/codebase-element.md).</span><span class="sxs-lookup"><span data-stu-id="a7485-151">The children of [\<dependentAssembly> element](../configure-apps/file-schema/runtime/dependentassembly-element.md) include the [\<assemblyIdentity> element](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), the [\<bindingRedirect> element](../configure-apps/file-schema/runtime/bindingredirect-element.md), and the [\<codeBase> element](../configure-apps/file-schema/runtime/codebase-element.md).</span></span>

> [!NOTE]
> <span data-ttu-id="a7485-152">As informações de configuração podem ser encontradas nos três arquivos de configuração, nem todos os elementos são válidos em todos os arquivos de configuração.</span><span class="sxs-lookup"><span data-stu-id="a7485-152">Configuration information can be found in the three configuration files; not all elements are valid in all configuration files.</span></span> <span data-ttu-id="a7485-153">Por exemplo, as informações de caminho particular e modo de associação podem estar somente no arquivo de configuração de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-153">For example, binding mode and private path information can only be in the application configuration file.</span></span> <span data-ttu-id="a7485-154">Para obter uma lista completa das informações que estão contidas em cada arquivo, consulte [Configuring Apps by Using Configuration Files](../configure-apps/index.md) (Configurando aplicativos usando arquivos de configuração).</span><span class="sxs-lookup"><span data-stu-id="a7485-154">For a complete list of the information that is contained in each file, see [Configuring Apps by Using Configuration Files](../configure-apps/index.md).</span></span>

### <a name="application-configuration-file"></a><span data-ttu-id="a7485-155">Arquivo de Configuração do Aplicativo</span><span class="sxs-lookup"><span data-stu-id="a7485-155">Application Configuration File</span></span>

<span data-ttu-id="a7485-156">Primeiro, o Common Language Runtime verifica o arquivo de configuração de aplicativo quanto a informações que substituem as informações de versão armazenadas no manifesto do assembly de chamada.</span><span class="sxs-lookup"><span data-stu-id="a7485-156">First, the common language runtime checks the application configuration file for information that overrides the version information stored in the calling assembly's manifest.</span></span> <span data-ttu-id="a7485-157">O arquivo de configuração de aplicativo pode ser implantado com um aplicativo, mas não é necessário para a execução do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-157">The application configuration file can be deployed with an application, but is not required for application execution.</span></span> <span data-ttu-id="a7485-158">Geralmente, a recuperação desse arquivo é quase instantânea, mas em situações em que a base de aplicativo está em um computador remoto, como em um cenário baseado na Web do Internet Explorer, o arquivo de configuração deve ser baixado.</span><span class="sxs-lookup"><span data-stu-id="a7485-158">Usually the retrieval of this file is almost instantaneous, but in situations where the application base is on a remote computer, such as in an Internet Explorer Web-based scenario, the configuration file must be downloaded.</span></span>

<span data-ttu-id="a7485-159">Para executáveis de cliente, o arquivo de configuração de aplicativo reside no mesmo diretório do executável do aplicativo e tem o mesmo nome base do executável com uma extensão .config.</span><span class="sxs-lookup"><span data-stu-id="a7485-159">For client executables, the application configuration file resides in the same directory as the application's executable and has the same base name as the executable with a .config extension.</span></span> <span data-ttu-id="a7485-160">Por exemplo, o arquivo de configuração para C:\Program Files\Myapp\Myapp.exe é C:\Program Files\Myapp\Myapp.exe.config. Em um cenário baseado em navegador, o arquivo HTML deve usar o **\<link>** elemento para apontar explicitamente para o arquivo de configuração.</span><span class="sxs-lookup"><span data-stu-id="a7485-160">For example, the configuration file for C:\Program Files\Myapp\Myapp.exe is C:\Program Files\Myapp\Myapp.exe.config. In a browser-based scenario, the HTML file must use the **\<link>** element to explicitly point to the configuration file.</span></span>

<span data-ttu-id="a7485-161">O código a seguir fornece um exemplo simples de um arquivo de configuração de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-161">The following code provides a simple example of an application configuration file.</span></span> <span data-ttu-id="a7485-162">Este exemplo adiciona um <xref:System.Diagnostics.TextWriterTraceListener> à coleção <xref:System.Diagnostics.Debug.Listeners%2A> para habilitar a gravação de informações de depuração em um arquivo.</span><span class="sxs-lookup"><span data-stu-id="a7485-162">This example adds a <xref:System.Diagnostics.TextWriterTraceListener> to the <xref:System.Diagnostics.Debug.Listeners%2A> collection to enable recording debug information to a file.</span></span>

```xml
<configuration>
   <system.diagnostics>
      <trace useGlobalLock="false" autoflush="true" indentsize="0">
         <listeners>
            <add name="myListener" type="System.Diagnostics.TextWriterTraceListener, system version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" initializeData="c:\myListener.log" />
         </listeners>
      </trace>
   </system.diagnostics>
</configuration>
```

### <a name="publisher-policy-file"></a><span data-ttu-id="a7485-163">Arquivo de política de publicador</span><span class="sxs-lookup"><span data-stu-id="a7485-163">Publisher Policy File</span></span>

<span data-ttu-id="a7485-164">Em segundo lugar, o runtime examina o arquivo de política de publicador, se houver.</span><span class="sxs-lookup"><span data-stu-id="a7485-164">Second, the runtime examines the publisher policy file, if one exists.</span></span> <span data-ttu-id="a7485-165">Os arquivos de política de publicador são distribuídos por um publicador de componente como uma correção ou atualização para um componente compartilhado.</span><span class="sxs-lookup"><span data-stu-id="a7485-165">Publisher policy files are distributed by a component publisher as a fix or update to a shared component.</span></span> <span data-ttu-id="a7485-166">Esses arquivos contêm informações de compatibilidade emitidas pelo publicador do componente compartilhado que direciona uma referência de assembly para uma nova versão.</span><span class="sxs-lookup"><span data-stu-id="a7485-166">These files contain compatibility information issued by the publisher of the shared component that directs an assembly reference to a new version.</span></span> <span data-ttu-id="a7485-167">Ao contrário de arquivos de configuração de computador e de aplicativo, os arquivos de política de publicador estão contidos em seu próprio assembly que deve ser instalado no cache de assembly global.</span><span class="sxs-lookup"><span data-stu-id="a7485-167">Unlike application and machine configuration files, publisher policy files are contained in their own assembly that must be installed in the global assembly cache.</span></span>

<span data-ttu-id="a7485-168">A seguir está um exemplo de um arquivo de configuração de política de publicador:</span><span class="sxs-lookup"><span data-stu-id="a7485-168">The following is an example of a Publisher Policy configuration file:</span></span>

```xml
<configuration>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">

            <dependentAssembly>
                <assemblyIdentity name="asm6" publicKeyToken="c0305c36380ba429" />
                <bindingRedirect oldVersion="3.0.0.0" newVersion="2.0.0.0"/>
            </dependentAssembly>

        </assemblyBinding>
    </runtime>
</configuration>
```

<span data-ttu-id="a7485-169">Para criar um assembly, você pode usar a ferramenta [Al.exe (Assembly Linker)](../tools/al-exe-assembly-linker.md) com um comando como o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a7485-169">To create an assembly, you can use the [Al.exe (Assembly Linker)](../tools/al-exe-assembly-linker.md) tool with a command such as the following:</span></span>

```console
Al.exe /link:asm6.exe.config /out:policy.3.0.asm6.dll /keyfile: compatkey.dat /v:3.0.0.0
```

<span data-ttu-id="a7485-170">`compatkey.dat` é um arquivo de chave de nome forte.</span><span class="sxs-lookup"><span data-stu-id="a7485-170">`compatkey.dat` is a strong-name key file.</span></span> <span data-ttu-id="a7485-171">Este comando cria um assembly com nome forte, que você pode colocar no cache de assembly global.</span><span class="sxs-lookup"><span data-stu-id="a7485-171">This command creates a strong-named assembly you can place in the global assembly cache.</span></span>

> [!NOTE]
> <span data-ttu-id="a7485-172">A política de publicador afeta todos os aplicativos que usam um componente compartilhado.</span><span class="sxs-lookup"><span data-stu-id="a7485-172">Publisher policy affects all applications that use a shared component.</span></span>

<span data-ttu-id="a7485-173">O arquivo de configuração de política de publicador substitui as informações de versão vem do aplicativo (ou seja, do manifesto do assembly ou do arquivo de configuração de aplicativo).</span><span class="sxs-lookup"><span data-stu-id="a7485-173">The publisher policy configuration file overrides version information that comes from the application (that is, from the assembly manifest or from the application configuration file).</span></span> <span data-ttu-id="a7485-174">Se não houver nenhuma instrução no arquivo de configuração de aplicativo para redirecionar a versão especificada no manifesto do assembly, o arquivo de política de publicador substituirá a versão especificada no manifesto do assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-174">If there is no statement in the application configuration file to redirect the version specified in the assembly manifest, the publisher policy file overrides the version specified in the assembly manifest.</span></span> <span data-ttu-id="a7485-175">No entanto, se houver uma instrução de redirecionamento no arquivo de configuração de aplicativo, a política de publicador substituirá essa versão, em vez da especificada no manifesto.</span><span class="sxs-lookup"><span data-stu-id="a7485-175">However, if there is a redirecting statement in the application configuration file, publisher policy overrides that version rather than the one specified in the manifest.</span></span>

<span data-ttu-id="a7485-176">Um arquivo de política de publicador é usado quando um componente compartilhado é atualizado e a nova versão do componente compartilhado deve ser selecionada por todos os aplicativos que usam esse componente.</span><span class="sxs-lookup"><span data-stu-id="a7485-176">A publisher policy file is used when a shared component is updated and the new version of the shared component should be picked up by all applications using that component.</span></span> <span data-ttu-id="a7485-177">As configurações no arquivo de política de publicador substituem as configurações no arquivo de configuração de aplicativo, a menos que o arquivo de configuração de aplicativo imponha o modo de segurança.</span><span class="sxs-lookup"><span data-stu-id="a7485-177">The settings in the publisher policy file override settings in the application configuration file, unless the application configuration file enforces safe mode.</span></span>

#### <a name="safe-mode"></a><span data-ttu-id="a7485-178">Modo de segurança</span><span class="sxs-lookup"><span data-stu-id="a7485-178">Safe Mode</span></span>

<span data-ttu-id="a7485-179">Os arquivos de política de publicador normalmente são explicitamente instalados como parte de uma atualização do programa ou service pack.</span><span class="sxs-lookup"><span data-stu-id="a7485-179">Publisher policy files are usually explicitly installed as part of a service pack or program update.</span></span> <span data-ttu-id="a7485-180">Se houver algum problema com o componente compartilhado atualizado, você poderá ignorar as substituições no arquivo de política de publicador usando o modo de segurança.</span><span class="sxs-lookup"><span data-stu-id="a7485-180">If there is any problem with the upgraded shared component, you can ignore the overrides in the publisher policy file using safe mode.</span></span> <span data-ttu-id="a7485-181">O modo de segurança é determinado pelo **\<publisherPolicy apply="yes**&#124;**no"/>** elemento, localizado somente no arquivo de configuração do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-181">Safe mode is determined by the **\<publisherPolicy apply="yes**&#124;**no"/>** element, located only in the application configuration file.</span></span> <span data-ttu-id="a7485-182">Ele especifica se as informações de configuração de política do publicador devem ser removidas do processo de associação.</span><span class="sxs-lookup"><span data-stu-id="a7485-182">It specifies whether the publisher policy configuration information should be removed from the binding process.</span></span>

<span data-ttu-id="a7485-183">O modo de segurança pode ser definido para todo o aplicativo ou para os assemblies selecionados.</span><span class="sxs-lookup"><span data-stu-id="a7485-183">Safe mode can be set for the entire application or for selected assemblies.</span></span> <span data-ttu-id="a7485-184">Ou seja, você pode desligar a política para todos os assemblies que compõem o aplicativo ou ativá-lo para alguns assemblies, mas não para outros.</span><span class="sxs-lookup"><span data-stu-id="a7485-184">That is, you can turn off the policy for all assemblies that make up the application, or turn it on for some assemblies but not others.</span></span> <span data-ttu-id="a7485-185">Para aplicar seletivamente a política do Publicador a assemblies que compõem um aplicativo, defina **\<publisherPolicy apply\=no/>** e especifique quais assemblies você deseja que sejam afetados usando o \<**dependentAssembly**> elemento.</span><span class="sxs-lookup"><span data-stu-id="a7485-185">To selectively apply publisher policy to assemblies that make up an application, set **\<publisherPolicy apply\=no/>** and specify which assemblies you want to be affected using the \<**dependentAssembly**> element.</span></span> <span data-ttu-id="a7485-186">Para aplicar a política do Publicador a todos os assemblies que compõem o aplicativo, defina sem **\<publisherPolicy apply\=no/>** elementos de assembly dependentes.</span><span class="sxs-lookup"><span data-stu-id="a7485-186">To apply publisher policy to all assemblies that make up the application, set **\<publisherPolicy apply\=no/>** with no dependent assembly elements.</span></span> <span data-ttu-id="a7485-187">Para obter mais informações sobre a configuração, consulte [Configuring Apps by Using Configuration Files](../configure-apps/index.md) (Configurando aplicativos usando arquivos de configuração).</span><span class="sxs-lookup"><span data-stu-id="a7485-187">For more about configuration, see [Configuring Apps by using Configuration Files](../configure-apps/index.md).</span></span>

### <a name="machine-configuration-file"></a><span data-ttu-id="a7485-188">Arquivo de configuração do computador</span><span class="sxs-lookup"><span data-stu-id="a7485-188">Machine Configuration File</span></span>

<span data-ttu-id="a7485-189">Em terceiro lugar, o runtime examina o arquivo de configuração do computador.</span><span class="sxs-lookup"><span data-stu-id="a7485-189">Third, the runtime examines the machine configuration file.</span></span> <span data-ttu-id="a7485-190">Esse arquivo, chamado Machine.config, reside no computador local no subdiretório Config do diretório raiz em que o runtime está instalado.</span><span class="sxs-lookup"><span data-stu-id="a7485-190">This file, called Machine.config, resides on the local computer in the Config subdirectory of the root directory where the runtime is installed.</span></span> <span data-ttu-id="a7485-191">Esse arquivo pode ser usado por administradores para especificar restrições de associação de assembly que são locais no computador.</span><span class="sxs-lookup"><span data-stu-id="a7485-191">This file can be used by administrators to specify assembly binding restrictions that are local to that computer.</span></span> <span data-ttu-id="a7485-192">As configurações no arquivo de configuração do computador têm precedência sobre todas as outras definições de configuração. No entanto, isso não significa que todas as definições de configuração devem ser colocadas nesse arquivo.</span><span class="sxs-lookup"><span data-stu-id="a7485-192">The settings in the machine configuration file take precedence over all other configuration settings; however, this does not mean that all configuration settings should be put in this file.</span></span> <span data-ttu-id="a7485-193">A versão de determinada pelo arquivo de política de administrador é final e não pode ser substituída.</span><span class="sxs-lookup"><span data-stu-id="a7485-193">The version determined by the administrator policy file is final, and cannot be overridden.</span></span> <span data-ttu-id="a7485-194">As substituições especificadas no arquivo Machine.config afetam todos os aplicativos.</span><span class="sxs-lookup"><span data-stu-id="a7485-194">Overrides specified in the Machine.config file affect all applications.</span></span> <span data-ttu-id="a7485-195">Para obter mais informações sobre os arquivos de configuração, consulte [Configuring Apps by Using Configuration Files](../configure-apps/index.md) (Configurando aplicativos usando arquivos de configuração).</span><span class="sxs-lookup"><span data-stu-id="a7485-195">For more information about configuration files, see [Configuring Apps by using Configuration Files](../configure-apps/index.md).</span></span>

<a name="step2"></a>

## <a name="step-2-checking-for-previously-referenced-assemblies"></a><span data-ttu-id="a7485-196">Etapa 2: Verificando se há assemblies referenciados anteriormente</span><span class="sxs-lookup"><span data-stu-id="a7485-196">Step 2: Checking for Previously Referenced Assemblies</span></span>

<span data-ttu-id="a7485-197">Se o assembly solicitado também foi solicitado em chamadas anteriores, o Common Language Runtime usa o assembly que já está carregado.</span><span class="sxs-lookup"><span data-stu-id="a7485-197">If the requested assembly has also been requested in previous calls, the common language runtime uses the assembly that is already loaded.</span></span> <span data-ttu-id="a7485-198">Isso pode ter ramificações ao nomear os assemblies que compõem um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-198">This can have ramifications when naming assemblies that make up an application.</span></span> <span data-ttu-id="a7485-199">Para obter mais informações sobre a nomeação de assemblies, consulte [Assembly Names](../../standard/assembly/names.md) (Nomes de assembly).</span><span class="sxs-lookup"><span data-stu-id="a7485-199">For more information about naming assemblies, see [Assembly Names](../../standard/assembly/names.md).</span></span>

<span data-ttu-id="a7485-200">Se uma solicitação anterior para o assembly falhou, as solicitações subsequentes para o assembly falharão imediatamente sem tentar carregar o assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-200">If a previous request for the assembly failed, subsequent requests for the assembly are failed immediately without attempting to load the assembly.</span></span> <span data-ttu-id="a7485-201">Desde o .NET Framework versão 2.0, as falhas de associação de assembly são armazenadas em cache e as informações em cache são usadas para determinar se deve-se tentar carregar o assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-201">Starting with the .NET Framework version 2.0, assembly binding failures are cached, and the cached information is used to determine whether to attempt to load the assembly.</span></span>

> [!NOTE]
> <span data-ttu-id="a7485-202">Para reverter para o comportamento do .NET Framework versões 1,0 e 1,1, que não armazenavam em cache falhas de associação, inclua o [ \<disableCachingBindingFailures> elemento](../configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) no arquivo de configuração.</span><span class="sxs-lookup"><span data-stu-id="a7485-202">To revert to the behavior of the .NET Framework versions 1.0 and 1.1, which did not cache binding failures, include the [\<disableCachingBindingFailures> Element](../configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) in your configuration file.</span></span>

<a name="step3"></a>

## <a name="step-3-checking-the-global-assembly-cache"></a><span data-ttu-id="a7485-203">Etapa 3: Verificando o cache de assemblies global</span><span class="sxs-lookup"><span data-stu-id="a7485-203">Step 3: Checking the Global Assembly Cache</span></span>

<span data-ttu-id="a7485-204">Para assemblies de nome forte, o processo de associação continua procurando no cache de assembly global.</span><span class="sxs-lookup"><span data-stu-id="a7485-204">For strong-named assemblies, the binding process continues by looking in the global assembly cache.</span></span> <span data-ttu-id="a7485-205">O cache de assembly global armazena os assemblies que podem ser usados por vários aplicativos em um computador.</span><span class="sxs-lookup"><span data-stu-id="a7485-205">The global assembly cache stores assemblies that can be used by several applications on a computer.</span></span> <span data-ttu-id="a7485-206">Todos os assemblies no cache de assembly global devem ter nomes fortes.</span><span class="sxs-lookup"><span data-stu-id="a7485-206">All assemblies in the global assembly cache must have strong names.</span></span>

<a name="step4"></a>

## <a name="step-4-locating-the-assembly-through-codebases-or-probing"></a><span data-ttu-id="a7485-207">Etapa 4: Localizando o assembly por meio de codebases ou sondagem</span><span class="sxs-lookup"><span data-stu-id="a7485-207">Step 4: Locating the Assembly through Codebases or Probing</span></span>

<span data-ttu-id="a7485-208">Depois de determinar a versão do assembly correta usando as informações na referência do assembly realizando a chamada e nos arquivos de configuração e após ela ter feito check-in do cache de assembly global (somente para assemblies de nome forte), o Common Language Runtime tenta localizar o assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-208">After the correct assembly version has been determined by using the information in the calling assembly's reference and in the configuration files, and after it has checked in the global assembly cache (only for strong-named assemblies), the common language runtime attempts to find the assembly.</span></span> <span data-ttu-id="a7485-209">O processo de localização de um assembly envolve as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="a7485-209">The process of locating an assembly involves the following steps:</span></span>

1. <span data-ttu-id="a7485-210">Se um [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento for encontrado no arquivo de configuração do aplicativo, o tempo de execução verificará o local especificado.</span><span class="sxs-lookup"><span data-stu-id="a7485-210">If a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element is found in the application configuration file, the runtime checks the specified location.</span></span> <span data-ttu-id="a7485-211">Se uma correspondência for encontrada, esse assembly será usado e nenhuma investigação ocorrerá.</span><span class="sxs-lookup"><span data-stu-id="a7485-211">If a match is found, that assembly is used and no probing occurs.</span></span> <span data-ttu-id="a7485-212">Se o assembly não for encontrado lá, a solicitação de associação falhará.</span><span class="sxs-lookup"><span data-stu-id="a7485-212">If the assembly is not found there, the binding request fails.</span></span>

2. <span data-ttu-id="a7485-213">O runtime investiga em busca do assembly referenciado usando as regras especificadas posteriormente nesta seção.</span><span class="sxs-lookup"><span data-stu-id="a7485-213">The runtime then probes for the referenced assembly using the rules specified later in this section.</span></span>

> [!NOTE]
> <span data-ttu-id="a7485-214">Se você tiver várias versões de um assembly em um diretório e desejar fazer referência a uma versão específica desse assembly, deverá usar o [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento em vez do `privatePath` atributo do [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) elemento.</span><span class="sxs-lookup"><span data-stu-id="a7485-214">If you have multiple versions of an assembly in a directory and you want to reference a particular version of that assembly, you must use the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element instead of the `privatePath` attribute of the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="a7485-215">Se você usar o [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) elemento, o tempo de execução interromperá a investigação pela primeira vez que encontrar um assembly que corresponda ao nome de assembly simples referenciado, seja uma correspondência correta ou não.</span><span class="sxs-lookup"><span data-stu-id="a7485-215">If you use the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element, the runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="a7485-216">Se for uma correspondência correta, esse assembly será usado.</span><span class="sxs-lookup"><span data-stu-id="a7485-216">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="a7485-217">Se não for uma correspondência correta, a investigação parará e a associação falhará.</span><span class="sxs-lookup"><span data-stu-id="a7485-217">If it is not a correct match, probing stops and binding fails.</span></span>

### <a name="locating-the-assembly-through-codebases"></a><span data-ttu-id="a7485-218">Localizando o assembly por meio de bases de código</span><span class="sxs-lookup"><span data-stu-id="a7485-218">Locating the Assembly through Codebases</span></span>

<span data-ttu-id="a7485-219">Informações de CodeBase podem ser fornecidas usando um [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento em um arquivo de configuração.</span><span class="sxs-lookup"><span data-stu-id="a7485-219">Codebase information can be provided by using a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element in a configuration file.</span></span> <span data-ttu-id="a7485-220">Essa base de código sempre é verificada antes de o runtime tentar investigar o assembly referenciado.</span><span class="sxs-lookup"><span data-stu-id="a7485-220">This codebase is always checked before the runtime attempts to probe for the referenced assembly.</span></span> <span data-ttu-id="a7485-221">Se um arquivo de política do Publicador que contém o redirecionamento da versão final também contiver um [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento, esse [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento será aquele usado.</span><span class="sxs-lookup"><span data-stu-id="a7485-221">If a publisher policy file containing the final version redirect also contains a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, that [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element is the one that is used.</span></span> <span data-ttu-id="a7485-222">Por exemplo, se o arquivo de configuração do aplicativo especificar um [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento e um arquivo de política do Publicador que está substituindo as informações do aplicativo também especificar um [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento, o [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento no arquivo de política do Publicador será usado.</span><span class="sxs-lookup"><span data-stu-id="a7485-222">For example, if your application configuration file specifies a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, and a publisher policy file that is overriding the application information also specifies a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element in the publisher policy file is used.</span></span>

<span data-ttu-id="a7485-223">Se nenhuma correspondência for encontrada no local especificado pelo [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento, a solicitação de ligação falhará e nenhuma outra etapa será executada.</span><span class="sxs-lookup"><span data-stu-id="a7485-223">If no match is found at the location specified by the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, the bind request fails and no further steps are taken.</span></span> <span data-ttu-id="a7485-224">Se o runtime determina que um assembly corresponde aos critérios do assembly de chamada, ele usa esse assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-224">If the runtime determines that an assembly matches the calling assembly's criteria, it uses that assembly.</span></span> <span data-ttu-id="a7485-225">Quando o arquivo especificado pelo elemento fornecido [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) é carregado, o tempo de execução verifica se o nome, a versão, a cultura e a chave pública correspondem à referência do assembly de chamada.</span><span class="sxs-lookup"><span data-stu-id="a7485-225">When the file specified by the given [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element is loaded, the runtime checks to make sure that the name, version, culture, and public key match the calling assembly's reference.</span></span>

> [!NOTE]
> <span data-ttu-id="a7485-226">Os assemblies referenciados fora do diretório raiz do aplicativo devem ter nomes fortes e devem ser instalados no cache de assembly global ou especificados com o uso do [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento.</span><span class="sxs-lookup"><span data-stu-id="a7485-226">Referenced assemblies outside the application's root directory must have strong names and must either be installed in the global assembly cache or specified using the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element.</span></span>

### <a name="locating-the-assembly-through-probing"></a><span data-ttu-id="a7485-227">Localizando o assembly por meio de investigação</span><span class="sxs-lookup"><span data-stu-id="a7485-227">Locating the Assembly through Probing</span></span>

<span data-ttu-id="a7485-228">Se não houver nenhum [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) elemento no arquivo de configuração do aplicativo, as investigações de tempo de execução para o assembly usando quatro critérios:</span><span class="sxs-lookup"><span data-stu-id="a7485-228">If there is no [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element in the application configuration file, the runtime probes for the assembly using four criteria:</span></span>

- <span data-ttu-id="a7485-229">Base de aplicativo, que é o local da raiz em que o aplicativo está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="a7485-229">Application base, which is the root location where the application is being executed.</span></span>

- <span data-ttu-id="a7485-230">Cultura, que é o atributo de cultura do assembly que está sendo referenciado.</span><span class="sxs-lookup"><span data-stu-id="a7485-230">Culture, which is the culture attribute of the assembly being referenced.</span></span>

- <span data-ttu-id="a7485-231">Nome, que é o nome do assembly referenciado.</span><span class="sxs-lookup"><span data-stu-id="a7485-231">Name, which is the name of the referenced assembly.</span></span>

- <span data-ttu-id="a7485-232">O `privatePath` atributo do [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) elemento, que é a lista definida pelo usuário de subdiretórios no local raiz.</span><span class="sxs-lookup"><span data-stu-id="a7485-232">The `privatePath` attribute of the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element, which is the user-defined list of subdirectories under the root location.</span></span> <span data-ttu-id="a7485-233">Esse local pode ser especificado no arquivo de configuração de aplicativo e no código gerenciado usando a propriedade <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> para um domínio do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-233">This location can be specified in the application configuration file and in managed code using the <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> property for an application domain.</span></span> <span data-ttu-id="a7485-234">Quando especificado no código gerenciado, o código gerenciado `privatePath` é analisado primeiro, seguido pelo caminho especificado no arquivo de configuração de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-234">When specified in managed code, the managed code `privatePath` is probed first, followed by the path specified in the application configuration file.</span></span>

#### <a name="probing-the-application-base-and-culture-directories"></a><span data-ttu-id="a7485-235">Investigando a base de aplicativo e os diretórios de cultura</span><span class="sxs-lookup"><span data-stu-id="a7485-235">Probing the Application Base and Culture Directories</span></span>

<span data-ttu-id="a7485-236">O runtime sempre começa investigando a base do aplicativo, que pode ser uma URL ou diretório da raiz do aplicativo em um computador.</span><span class="sxs-lookup"><span data-stu-id="a7485-236">The runtime always begins probing in the application's base, which can be either a URL or the application's root directory on a computer.</span></span> <span data-ttu-id="a7485-237">Se o assembly referenciado não for encontrado na base de aplicativo e nenhuma informação de cultura for fornecida, o runtime pesquisará todos os subdiretórios com o nome do assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-237">If the referenced assembly is not found in the application base and no culture information is provided, the runtime searches any subdirectories with the assembly name.</span></span> <span data-ttu-id="a7485-238">Os diretórios investigados incluem:</span><span class="sxs-lookup"><span data-stu-id="a7485-238">The directories probed include:</span></span>

- <span data-ttu-id="a7485-239">[base de aplicativo] / [nome do assembly].dll</span><span class="sxs-lookup"><span data-stu-id="a7485-239">[application base] / [assembly name].dll</span></span>

- <span data-ttu-id="a7485-240">[base de aplicativo] / [nome do assembly] / [nome do assembly].dll</span><span class="sxs-lookup"><span data-stu-id="a7485-240">[application base] / [assembly name] / [assembly name].dll</span></span>

<span data-ttu-id="a7485-241">Se informações de cultura forem especificadas para o assembly referenciado, apenas os diretórios a seguir serão investigados:</span><span class="sxs-lookup"><span data-stu-id="a7485-241">If culture information is specified for the referenced assembly, only the following directories are probed:</span></span>

- <span data-ttu-id="a7485-242">[base de aplicativo] / [cultura] / [nome do assembly].dll</span><span class="sxs-lookup"><span data-stu-id="a7485-242">[application base] / [culture] / [assembly name].dll</span></span>

- <span data-ttu-id="a7485-243">[base de aplicativo] / [cultura] / [nome do assembly] / [nome do assembly].dll</span><span class="sxs-lookup"><span data-stu-id="a7485-243">[application base] / [culture] / [assembly name] / [assembly name].dll</span></span>

#### <a name="probing-with-the-privatepath-attribute"></a><span data-ttu-id="a7485-244">Investigando com o atributo privatePath</span><span class="sxs-lookup"><span data-stu-id="a7485-244">Probing with the privatePath Attribute</span></span>

<span data-ttu-id="a7485-245">Além dos subdiretórios de cultura e dos subdiretórios nomeados para o assembly referenciado, o tempo de execução também investiga os diretórios especificados usando o `privatePath` atributo do [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) elemento.</span><span class="sxs-lookup"><span data-stu-id="a7485-245">In addition to the culture subdirectories and the subdirectories named for the referenced assembly, the runtime also probes directories specified using the `privatePath` attribute of the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="a7485-246">Os diretórios especificados usando o atributo `privatePath` devem ser subdiretórios do diretório raiz do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7485-246">The directories specified using the `privatePath` attribute must be subdirectories of the application's root directory.</span></span> <span data-ttu-id="a7485-247">Os diretórios investigados variam dependendo de se as informações de cultura estão incluídas na solicitação do assembly referenciado.</span><span class="sxs-lookup"><span data-stu-id="a7485-247">The directories probed vary depending on whether culture information is included in the referenced assembly request.</span></span>

<span data-ttu-id="a7485-248">O runtime interromperá a investigação na primeira vez que encontrar um assembly que corresponde ao nome de assembly simples referenciado, independentemente de ser uma correspondência correta ou não.</span><span class="sxs-lookup"><span data-stu-id="a7485-248">The runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="a7485-249">Se for uma correspondência correta, esse assembly será usado.</span><span class="sxs-lookup"><span data-stu-id="a7485-249">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="a7485-250">Se não for uma correspondência correta, a investigação parará e a associação falhará.</span><span class="sxs-lookup"><span data-stu-id="a7485-250">If it is not a correct match, probing stops and binding fails.</span></span>

<span data-ttu-id="a7485-251">Se a cultura for incluída, os diretórios a seguir serão investigados:</span><span class="sxs-lookup"><span data-stu-id="a7485-251">If culture is included, the following directories are probed:</span></span>

- <span data-ttu-id="a7485-252">[base de aplicativo] / [binpath] / [cultura] / [nome do assembly].dll</span><span class="sxs-lookup"><span data-stu-id="a7485-252">[application base] / [binpath] / [culture] / [assembly name].dll</span></span>

- <span data-ttu-id="a7485-253">[base de aplicativo] / [binpath] / [cultura] / [nome do assembly] / [nome do assembly].dll</span><span class="sxs-lookup"><span data-stu-id="a7485-253">[application base] / [binpath] / [culture] / [assembly name] / [assembly name].dll</span></span>

<span data-ttu-id="a7485-254">Se as informações de cultura não forem incluídas, os diretórios a seguir serão investigados:</span><span class="sxs-lookup"><span data-stu-id="a7485-254">If culture information is not included, the following directories are probed:</span></span>

- <span data-ttu-id="a7485-255">[base de aplicativo] / [binpath] / [nome do assembly].dll</span><span class="sxs-lookup"><span data-stu-id="a7485-255">[application base] / [binpath] / [assembly name].dll</span></span>

- <span data-ttu-id="a7485-256">[base de aplicativo] / [binpath] / [nome do assembly] / [nome do assembly].dll</span><span class="sxs-lookup"><span data-stu-id="a7485-256">[application base] / [binpath] / [assembly name] / [assembly name].dll</span></span>

#### <a name="probing-examples"></a><span data-ttu-id="a7485-257">Exemplos de investigação</span><span class="sxs-lookup"><span data-stu-id="a7485-257">Probing Examples</span></span>

<span data-ttu-id="a7485-258">Considerando as seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="a7485-258">Given the following information:</span></span>

- <span data-ttu-id="a7485-259">Nome do assembly referenciado: myAssembly</span><span class="sxs-lookup"><span data-stu-id="a7485-259">Referenced assembly name: myAssembly</span></span>

- <span data-ttu-id="a7485-260">Diretório raiz do aplicativo: `http://www.code.microsoft.com`</span><span class="sxs-lookup"><span data-stu-id="a7485-260">Application root directory: `http://www.code.microsoft.com`</span></span>

- <span data-ttu-id="a7485-261">[\<probing>](../configure-apps/file-schema/runtime/probing-element.md) o elemento no arquivo de configuração especifica: bin</span><span class="sxs-lookup"><span data-stu-id="a7485-261">[\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element in configuration file specifies: bin</span></span>

- <span data-ttu-id="a7485-262">Cultura: de</span><span class="sxs-lookup"><span data-stu-id="a7485-262">Culture: de</span></span>

<span data-ttu-id="a7485-263">O runtime investiga as seguintes URLs:</span><span class="sxs-lookup"><span data-stu-id="a7485-263">The runtime probes the following URLs:</span></span>

- `http://www.code.microsoft.com/de/myAssembly.dll`

- `http://www.code.microsoft.com/de/myAssembly/myAssembly.dll`

- `http://www.code.microsoft.com/bin/de/myAssembly.dll`

- `http://www.code.microsoft.com/bin/de/myAssembly/myAssembly.dll`

##### <a name="multiple-assemblies-with-the-same-name"></a><span data-ttu-id="a7485-264">Vários assemblies com o mesmo nome</span><span class="sxs-lookup"><span data-stu-id="a7485-264">Multiple Assemblies with the Same Name</span></span>

<span data-ttu-id="a7485-265">O exemplo a seguir mostra como configurar vários assemblies com o mesmo nome.</span><span class="sxs-lookup"><span data-stu-id="a7485-265">The following example shows how to configure multiple assemblies with the same name.</span></span>

```xml
<dependentAssembly>
   <assemblyIdentity name="Server" publicKeyToken="c0305c36380ba429" />
   <codeBase version="1.0.0.0" href="v1/Server.dll" />
   <codeBase version="2.0.0.0" href="v2/Server.dll" />
</dependentAssembly>
```

#### <a name="other-locations-probed"></a><span data-ttu-id="a7485-266">Outros locais investigados</span><span class="sxs-lookup"><span data-stu-id="a7485-266">Other Locations Probed</span></span>

<span data-ttu-id="a7485-267">O local do assembly também pode ser determinado usando o contexto de associação atual.</span><span class="sxs-lookup"><span data-stu-id="a7485-267">Assembly location can also be determined using the current binding context.</span></span> <span data-ttu-id="a7485-268">Isso normalmente ocorre quando o método <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> é usado e em cenários de interoperabilidade COM.</span><span class="sxs-lookup"><span data-stu-id="a7485-268">This most often occurs when the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method is used and in COM interop scenarios.</span></span> <span data-ttu-id="a7485-269">Se um assembly usa o método <xref:System.Reflection.Assembly.LoadFrom%2A> para referenciar outro assembly, o local do assembly de chamada é considerado uma dica de onde encontrar o assembly referenciado.</span><span class="sxs-lookup"><span data-stu-id="a7485-269">If an assembly uses the <xref:System.Reflection.Assembly.LoadFrom%2A> method to reference another assembly, the calling assembly's location is considered to be a hint about where to find the referenced assembly.</span></span> <span data-ttu-id="a7485-270">Se uma correspondência for encontrada, esse assembly será carregado.</span><span class="sxs-lookup"><span data-stu-id="a7485-270">If a match is found, that assembly is loaded.</span></span> <span data-ttu-id="a7485-271">Se nenhuma correspondência for encontrada, o runtime continuará com sua semântica de pesquisa e, em seguida, consultará o Windows Installer para fornecer o assembly.</span><span class="sxs-lookup"><span data-stu-id="a7485-271">If no match is found, the runtime continues with its search semantics and then queries the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="a7485-272">Se não for fornecido nenhum assembly correspondente à solicitação de associação, uma exceção será gerada.</span><span class="sxs-lookup"><span data-stu-id="a7485-272">If no assembly is provided that matches the binding request, an exception is thrown.</span></span> <span data-ttu-id="a7485-273">Essa exceção será uma <xref:System.TypeLoadException> no código gerenciado se um tipo tiver sido referenciado ou uma <xref:System.IO.FileNotFoundException> se um assembly sendo carregado não tiver sido encontrado.</span><span class="sxs-lookup"><span data-stu-id="a7485-273">This exception is a <xref:System.TypeLoadException> in managed code if a type was referenced, or a <xref:System.IO.FileNotFoundException> if an assembly being loaded was not found.</span></span>

<span data-ttu-id="a7485-274">Por exemplo, se o Assembly1 fizer referência ao Assembly2 e o Assembly1 tiver sido baixado de `http://www.code.microsoft.com/utils`, esse local será considerado uma dica sobre onde encontrar o Assembly2.dll.</span><span class="sxs-lookup"><span data-stu-id="a7485-274">For example, if Assembly1 references Assembly2 and Assembly1 was downloaded from `http://www.code.microsoft.com/utils`, that location is considered to be a hint about where to find Assembly2.dll.</span></span> <span data-ttu-id="a7485-275">Em seguida, o runtime procura pelo assembly em `http://www.code.microsoft.com/utils/Assembly2.dll` e `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span><span class="sxs-lookup"><span data-stu-id="a7485-275">The runtime then probes for the assembly in `http://www.code.microsoft.com/utils/Assembly2.dll` and `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span></span> <span data-ttu-id="a7485-276">Se Assembly2 não for encontrado em um desses locais, o runtime de consultará o Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="a7485-276">If Assembly2 is not found at either of those locations, the runtime queries the Windows Installer.</span></span>

## <a name="see-also"></a><span data-ttu-id="a7485-277">Veja também</span><span class="sxs-lookup"><span data-stu-id="a7485-277">See also</span></span>

- [<span data-ttu-id="a7485-278">Práticas recomendadas para carregamento de assemblies</span><span class="sxs-lookup"><span data-stu-id="a7485-278">Best Practices for Assembly Loading</span></span>](best-practices-for-assembly-loading.md)
- [<span data-ttu-id="a7485-279">Implantação</span><span class="sxs-lookup"><span data-stu-id="a7485-279">Deployment</span></span>](index.md)
