---
title: Empacotar e implantar recursos em aplicativos .NET
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- deploying applications [.NET Framework], resources
- resource files, deploying
- hub-and-spoke resource deployment model
- resource files, packaging
- application resources, packaging
- single resource assembly
- satellite assemblies
- default culture for applications
- names [.NET Framework], resources
- fallback process for resources
- grouping cultures
- application resources, deploying
- application resources, naming conventions
- culture, packaging and deploying resources
- resource files, naming conventions
- packaging application resources
- application resources, fallback processes
- resource files, fallback processes
- localizing resources
- neutral cultures
ms.assetid: b224d7c0-35f8-4e82-a705-dd76795e8d16
ms.openlocfilehash: d64e3b5201e34541fdafa5724b0c7e8c3f6c0c0d
ms.sourcegitcommit: 7980a91f90ae5eca859db7e6bfa03e23e76a1a50
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/13/2020
ms.locfileid: "81243044"
---
# <a name="packaging-and-deploying-resources-in-net-apps"></a><span data-ttu-id="4849b-102">Empacotar e implantar recursos em aplicativos .NET</span><span class="sxs-lookup"><span data-stu-id="4849b-102">Packaging and Deploying Resources in .NET Apps</span></span>

<span data-ttu-id="4849b-103">Aplicativos se baseiam no Gerenciador de Recursos do .NET Framework, representado pela classe <xref:System.Resources.ResourceManager>, para recuperar os recursos localizados.</span><span class="sxs-lookup"><span data-stu-id="4849b-103">Applications rely on the .NET Framework Resource Manager, represented by the <xref:System.Resources.ResourceManager> class, to retrieve localized resources.</span></span> <span data-ttu-id="4849b-104">O Gerenciador de Recursos pressupõe que um modelo de hub e spoke é usado para empacotar e implantar recursos.</span><span class="sxs-lookup"><span data-stu-id="4849b-104">The Resource Manager assumes that a hub and spoke model is used to package and deploy resources.</span></span> <span data-ttu-id="4849b-105">O hub é o principal assembly que contém o código executável não localizável e os recursos para uma única cultura, chamada de cultura neutra ou padrão.</span><span class="sxs-lookup"><span data-stu-id="4849b-105">The hub is the main assembly that contains the nonlocalizable executable code and the resources for a single culture, called the neutral or default culture.</span></span> <span data-ttu-id="4849b-106">O padrão é a cultura de fallback para o aplicativo; é a cultura que tem os recursos utilizados quando não há recursos localizados disponíveis.</span><span class="sxs-lookup"><span data-stu-id="4849b-106">The default culture is the fallback culture for the application; it is the culture whose resources are used if localized resources cannot be found.</span></span> <span data-ttu-id="4849b-107">Cada spoke conecta-se a um assembly satélite que contém os recursos para uma única cultura, mas não contém nenhum código.</span><span class="sxs-lookup"><span data-stu-id="4849b-107">Each spoke connects to a satellite assembly that contains the resources for a single culture, but does not contain any code.</span></span>

<span data-ttu-id="4849b-108">Há várias vantagens para este modelo:</span><span class="sxs-lookup"><span data-stu-id="4849b-108">There are several advantages to this model:</span></span>

- <span data-ttu-id="4849b-109">Você pode adicionar recursos de culturas novas incrementalmente depois de ter implantado um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4849b-109">You can incrementally add resources for new cultures after you have deployed an application.</span></span> <span data-ttu-id="4849b-110">Como o desenvolvimento posterior de recursos específicos da cultura pode exigir uma quantidade significativa de tempo, isso permite que você libere seu aplicativo principal primeiro e forneça recursos específicos de cultura em uma data posterior.</span><span class="sxs-lookup"><span data-stu-id="4849b-110">Because subsequent development of culture-specific resources can require a significant amount of time, this allows you to release your main application first, and deliver culture-specific resources at a later date.</span></span>
- <span data-ttu-id="4849b-111">Você pode atualizar e alterar assemblies de satélite do aplicativo sem recompilar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4849b-111">You can update and change an application's satellite assemblies without recompiling the application.</span></span>
- <span data-ttu-id="4849b-112">Um aplicativo precisa carregar apenas os assemblies de satélite que contêm os recursos necessários para uma determinada cultura.</span><span class="sxs-lookup"><span data-stu-id="4849b-112">An application needs to load only those satellite assemblies that contain the resources needed for a particular culture.</span></span> <span data-ttu-id="4849b-113">Isso pode reduzir significativamente o uso de recursos do sistema.</span><span class="sxs-lookup"><span data-stu-id="4849b-113">This can significantly reduce the use of system resources.</span></span>

 <span data-ttu-id="4849b-114">No entanto, também há desvantagens para este modelo:</span><span class="sxs-lookup"><span data-stu-id="4849b-114">However, there are also disadvantages to this model:</span></span>

- <span data-ttu-id="4849b-115">Você deve gerenciar vários conjuntos de recursos.</span><span class="sxs-lookup"><span data-stu-id="4849b-115">You must manage multiple sets of resources.</span></span>
- <span data-ttu-id="4849b-116">Aumenta o custo inicial de um aplicativo de teste, porque você deve testar várias configurações.</span><span class="sxs-lookup"><span data-stu-id="4849b-116">The initial cost of testing an application increases, because you must test several configurations.</span></span> <span data-ttu-id="4849b-117">Observe que a longo prazo será mais fácil e menos dispendioso para testar um aplicativo básico com vários satélites que testar e manter várias versões internacionais paralelas.</span><span class="sxs-lookup"><span data-stu-id="4849b-117">Note that in the long term it will be easier and less expensive to test one core application with several satellites, than to test and maintain several parallel international versions.</span></span>

## <a name="resource-naming-conventions"></a><span data-ttu-id="4849b-118">Convenções de nomeação de recursos</span><span class="sxs-lookup"><span data-stu-id="4849b-118">Resource naming conventions</span></span>

<span data-ttu-id="4849b-119">Ao empacotar os recursos de seu aplicativo, você deve nomeá-los usando as convenções de nomenclatura esperadas pelo Common Language Runtime.</span><span class="sxs-lookup"><span data-stu-id="4849b-119">When you package your application's resources, you must name them using the resource naming conventions that the common language runtime expects.</span></span> <span data-ttu-id="4849b-120">O runtime identifica um recurso pelo seu nome de cultura.</span><span class="sxs-lookup"><span data-stu-id="4849b-120">The runtime identifies a resource by its culture name.</span></span> <span data-ttu-id="4849b-121">Cada cultura tem um nome exclusivo, que normalmente é uma combinação de um nome de cultura de duas letras minúsculas associado a um idioma e, se necessário, um nome de subcultura de duas letras maiúsculas associado a um país ou região.</span><span class="sxs-lookup"><span data-stu-id="4849b-121">Each culture is given a unique name, which is usually a combination of a two-letter, lowercase culture name associated with a language and, if required, a two-letter, uppercase subculture name associated with a country or region.</span></span> <span data-ttu-id="4849b-122">O nome de subcultura vem depois do nome da cultura, separado por um traço (-).</span><span class="sxs-lookup"><span data-stu-id="4849b-122">The subculture name follows the culture name, separated by a dash (-).</span></span> <span data-ttu-id="4849b-123">Exemplos incluem ja-JP para japonês falado no Japão, en-US para inglês falado nos Estados Unidos, de-DE para alemão falado na Alemanha, ou de-AT para alemão falado na Áustria.</span><span class="sxs-lookup"><span data-stu-id="4849b-123">Examples include ja-JP for Japanese as spoken in Japan, en-US for English as spoken in the United States, de-DE for German as spoken in Germany, or de-AT for German as spoken in Austria.</span></span> <span data-ttu-id="4849b-124">Confira a coluna **Marca de idioma** na [lista de nomes de idioma/região com suporte do Windows](https://docs.microsoft.com/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).</span><span class="sxs-lookup"><span data-stu-id="4849b-124">See the **Language tag** column in the [list of language/region names supported by Windows](https://docs.microsoft.com/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).</span></span> <span data-ttu-id="4849b-125">Os nomes de cultura seguem o padrão definido pelo [BCP 47](https://tools.ietf.org/html/bcp47).</span><span class="sxs-lookup"><span data-stu-id="4849b-125">Culture names follow the standard defined by [BCP 47](https://tools.ietf.org/html/bcp47).</span></span>

> [!NOTE]
> <span data-ttu-id="4849b-126">Existem algumas exceções para os nomes de `zh-Hans` cultura de duas letras, como para chinês (simplificado).</span><span class="sxs-lookup"><span data-stu-id="4849b-126">There are some exceptions for the two-letter culture names, such as `zh-Hans` for Chinese (Simplified).</span></span>

> [!NOTE]
> <span data-ttu-id="4849b-127">Para obter informações sobre como criar arquivos de recursos, consulte [Criando arquivos de recursos](creating-resource-files-for-desktop-apps.md) e [Criando assemblies satélite](creating-satellite-assemblies-for-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="4849b-127">For information about creating resource files, see [Creating Resource Files](creating-resource-files-for-desktop-apps.md) and [Creating Satellite Assemblies](creating-satellite-assemblies-for-desktop-apps.md).</span></span>

<a name="cpconpackagingdeployingresourcesanchor1"></a>

## <a name="the-resource-fallback-process"></a><span data-ttu-id="4849b-128">O Processo de Fallback do Recurso</span><span class="sxs-lookup"><span data-stu-id="4849b-128">The Resource Fallback Process</span></span>

<span data-ttu-id="4849b-129">O modelo de hub e spoke para empacotamento e implantação de recursos usa um processo de fallback para localizar recursos apropriados.</span><span class="sxs-lookup"><span data-stu-id="4849b-129">The hub and spoke model for packaging and deploying resources uses a fallback process to locate appropriate resources.</span></span> <span data-ttu-id="4849b-130">Se o usuário de um aplicativo solicitar um recurso localizado que não esteja disponível, o Common Language Runtime pesquisará a hierarquia das culturas em busca de um recurso de fallback apropriado que mais se aproxime da solicitação do aplicativo do usuário e gerará uma exceção apenas como último recurso.</span><span class="sxs-lookup"><span data-stu-id="4849b-130">If an application requests a localized resource  that is unavailable, the common language runtime searches the hierarchy of cultures for an appropriate fallback resource that most closely matches the user's application's request, and throws an exception only as a last resort.</span></span> <span data-ttu-id="4849b-131">Em cada nível da hierarquia, se um recurso apropriado for encontrado, ele será usado pelo runtime.</span><span class="sxs-lookup"><span data-stu-id="4849b-131">At each level of the hierarchy, if an appropriate resource is found, the runtime uses it.</span></span> <span data-ttu-id="4849b-132">Se o recurso não for encontrado, a pesquisa continuará até o próximo nível.</span><span class="sxs-lookup"><span data-stu-id="4849b-132">If the resource is not found, the search continues at the next level.</span></span>

<span data-ttu-id="4849b-133">Para melhorar o desempenho da pesquisa, aplique o atributo <xref:System.Resources.NeutralResourcesLanguageAttribute> para seu assembly principal e passe o nome da linguagem neutra que funcione com o assembly principal.</span><span class="sxs-lookup"><span data-stu-id="4849b-133">To improve lookup performance, apply the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to your main assembly, and pass it the name of the neutral language that will work with your main assembly.</span></span>

### <a name="net-framework-resource-fallback-process"></a><span data-ttu-id="4849b-134">Processo de fallback do recurso do .NET Framework</span><span class="sxs-lookup"><span data-stu-id="4849b-134">.NET Framework resource fallback process</span></span>

<span data-ttu-id="4849b-135">O processo de fallback de recurso do .NET Framework envolve as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="4849b-135">The .NET Framework resource fallback process involves the following steps:</span></span>

> [!TIP]
> <span data-ttu-id="4849b-136">Você pode ser capaz [ \<](../configure-apps/file-schema/runtime/relativebindforresources-element.md) de usar o elemento de configuração>bindforresources relativo para otimizar o processo de recuo de recursos e o processo pelo qual o tempo de execução testa para conjuntos de recursos.</span><span class="sxs-lookup"><span data-stu-id="4849b-136">You may be able to use the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) configuration element to optimize the resource fallback process and the process by which the runtime probes for resource assemblies.</span></span> <span data-ttu-id="4849b-137">Para obter mais informações, consulte a seção [Otimizar o processo de fallback do recurso](packaging-and-deploying-resources-in-desktop-apps.md#Optimizing).</span><span class="sxs-lookup"><span data-stu-id="4849b-137">For more information, see the [Optimizing the Resource Fallback Process](packaging-and-deploying-resources-in-desktop-apps.md#Optimizing) section.</span></span>

1. <span data-ttu-id="4849b-138">O runtime primeiro verifica o [cache de assembly global](../app-domains/gac.md) para um assembly que coincide com a cultura solicitada para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4849b-138">The runtime first checks the [global assembly cache](../app-domains/gac.md) for an assembly that matches the requested culture for your application.</span></span>

     <span data-ttu-id="4849b-139">O cache de assembly global pode armazenar assemblies de recursos que são compartilhados por vários aplicativos.</span><span class="sxs-lookup"><span data-stu-id="4849b-139">The global assembly cache can store resource assemblies that are shared by many applications.</span></span> <span data-ttu-id="4849b-140">Isso faz com que você não precise incluir conjuntos de recursos específicos na estrutura de diretórios de cada aplicativo que você criar.</span><span class="sxs-lookup"><span data-stu-id="4849b-140">This frees you from having to include specific sets of resources in the directory structure of every application you create.</span></span> <span data-ttu-id="4849b-141">Se o runtime encontra uma referência ao assembly, ele pesquisa o assembly para o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-141">If the runtime finds a reference to the assembly, it searches the assembly for the requested resource.</span></span> <span data-ttu-id="4849b-142">Se ele encontrar a entrada no assembly, ele usa o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-142">If it finds the entry in the assembly, it uses the requested resource.</span></span> <span data-ttu-id="4849b-143">Se não encontrar a entrada, ele continua a pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4849b-143">If it doesn't find the entry, it continues the search.</span></span>

2. <span data-ttu-id="4849b-144">Em seguida, o runtime verifica no diretório do assembly em execução se há um subdiretório que corresponda à cultura solicitada.</span><span class="sxs-lookup"><span data-stu-id="4849b-144">The runtime next checks the directory of the currently executing assembly for a subdirectory that matches the requested culture.</span></span> <span data-ttu-id="4849b-145">Se ele encontrar o subdiretório, procurará nesse subdiretório um assembly satélite válido para a cultura solicitada.</span><span class="sxs-lookup"><span data-stu-id="4849b-145">If it finds the subdirectory, it searches that subdirectory for a valid satellite assembly for the requested culture.</span></span> <span data-ttu-id="4849b-146">O runtime, em seguida, procura o assembly satélite para o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-146">The runtime then searches the satellite assembly for the requested resource.</span></span> <span data-ttu-id="4849b-147">Se encontrar o recurso no assembly, ele o utiliza.</span><span class="sxs-lookup"><span data-stu-id="4849b-147">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="4849b-148">Se não encontrar o recurso, ele continua a pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4849b-148">If it doesn't find the resource, it continues the search.</span></span>

3. <span data-ttu-id="4849b-149">Em seguida, o runtime consulta o Windows Installer para determinar se o assembly satélite deve ser instalado sob demanda.</span><span class="sxs-lookup"><span data-stu-id="4849b-149">The runtime next queries the Windows Installer to determine whether the satellite assembly is to be installed on demand.</span></span> <span data-ttu-id="4849b-150">Se sim, ele faz a instalação, carrega o assembly e as pesquisa o assembly satélite ou o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-150">If so, it handles the installation, loads the assembly, and searches it or the requested resource.</span></span> <span data-ttu-id="4849b-151">Se encontrar o recurso no assembly, ele o utiliza.</span><span class="sxs-lookup"><span data-stu-id="4849b-151">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="4849b-152">Se não encontrar o recurso, ele continua a pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4849b-152">If it doesn't find the resource, it continues the search.</span></span>

4. <span data-ttu-id="4849b-153">O runtime gera o evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> para indicar que não é possível localizar o assembly satélite.</span><span class="sxs-lookup"><span data-stu-id="4849b-153">The runtime raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="4849b-154">Se você optar por tratar do evento, o manipulador de eventos pode retornar uma referência ao assembly satélite cujos recursos serão usados para a pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4849b-154">If you choose to handle the event, your event handler can return a reference to the satellite assembly whose resources will be used for the lookup.</span></span> <span data-ttu-id="4849b-155">Caso contrário, o manipulador de eventos retornará `null` e continuará a pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4849b-155">Otherwise, the event handler returns `null` and the search continues.</span></span>

5. <span data-ttu-id="4849b-156">Em seguida, o runtime pesquisa o cache de assembly global novamente, desta vez para o assembly pai da cultura solicitada.</span><span class="sxs-lookup"><span data-stu-id="4849b-156">The runtime next searches the global assembly cache again, this time for the parent assembly of the requested culture.</span></span> <span data-ttu-id="4849b-157">Se o assembly pai existe no cache de assembly global, o runtime procura o assembly para o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-157">If the parent assembly exists in the global assembly cache, the runtime searches the assembly for the requested resource.</span></span>

     <span data-ttu-id="4849b-158">A cultura pai é definida como a cultura de fallback apropriada.</span><span class="sxs-lookup"><span data-stu-id="4849b-158">The parent culture is defined as the appropriate fallback culture.</span></span> <span data-ttu-id="4849b-159">Considere a cultura pai como candidata de fallback, pois fornecer qualquer recurso é preferível para lançar uma exceção.</span><span class="sxs-lookup"><span data-stu-id="4849b-159">Consider parents as fallback candidates, because providing any resource is preferable to throwing an exception.</span></span> <span data-ttu-id="4849b-160">Esse processo também permite a reutilização de recursos.</span><span class="sxs-lookup"><span data-stu-id="4849b-160">This process also allows you to reuse resources.</span></span> <span data-ttu-id="4849b-161">Você deve incluir um recurso específico no nível pai somente se a cultura filho não precisa localizar o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-161">You should include a particular resource at the parent level only if the child culture doesn't need to localize the requested resource.</span></span> <span data-ttu-id="4849b-162">Por exemplo, se você fornecer assemblies de satélite para `en` (inglês neutro), `en-GB` (inglês falado no Reino Unido) e `en-US` (inglês falado nos Estados Unidos), o satélite `en` conteria a terminologia comum, e os satélites `en-GB` e `en-US` poderiam fornecer substitutos somente para os termos que são diferentes.</span><span class="sxs-lookup"><span data-stu-id="4849b-162">For example, if you supply satellite assemblies for `en` (neutral English), `en-GB` (English as spoken in the United Kingdom), and `en-US` (English as spoken in the United States), the `en` satellite would contain the common terminology, and the `en-GB` and `en-US` satellites could provide overrides for only those terms that differ.</span></span>

6. <span data-ttu-id="4849b-163">Em seguida, o runtime verifica no diretório do assembly em execução se este contém um diretório pai.</span><span class="sxs-lookup"><span data-stu-id="4849b-163">The runtime next checks the directory of the currently executing assembly to see if it contains a parent directory.</span></span> <span data-ttu-id="4849b-164">Se houver um diretório pai, o runtime procura no diretório um assembly satélite válido para a cultura pai.</span><span class="sxs-lookup"><span data-stu-id="4849b-164">If a parent directory exists, the runtime searches the directory for a valid satellite assembly for the parent culture.</span></span> <span data-ttu-id="4849b-165">Se encontrar o assembly, o runtime pesquisa o assembly para o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-165">If it finds the assembly, the runtime searches the assembly for the requested resource.</span></span> <span data-ttu-id="4849b-166">Se encontrar o recurso, ele o utiliza.</span><span class="sxs-lookup"><span data-stu-id="4849b-166">If it finds the resource, it uses it.</span></span> <span data-ttu-id="4849b-167">Se não encontrar o recurso, ele continua a pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4849b-167">If it doesn't find the resource, it continues the search.</span></span>

7. <span data-ttu-id="4849b-168">Em seguida, o runtime consulta o Windows Installer para determinar se o assembly satélite pai deve ser instalado sob demanda.</span><span class="sxs-lookup"><span data-stu-id="4849b-168">The runtime next queries the Windows Installer to determine whether the parent satellite assembly is to be installed on demand.</span></span> <span data-ttu-id="4849b-169">Se sim, ele faz a instalação, carrega o assembly e as pesquisa o assembly satélite ou o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-169">If so, it handles the installation, loads the assembly, and searches it or the requested resource.</span></span> <span data-ttu-id="4849b-170">Se encontrar o recurso no assembly, ele o utiliza.</span><span class="sxs-lookup"><span data-stu-id="4849b-170">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="4849b-171">Se não encontrar o recurso, ele continua a pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4849b-171">If it doesn't find the resource, it continues the search.</span></span>

8. <span data-ttu-id="4849b-172">O runtime gera o evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> para indicar que não é possível localizar o recurso de fallback apropriado.</span><span class="sxs-lookup"><span data-stu-id="4849b-172">The runtime raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find an appropriate fallback resource.</span></span> <span data-ttu-id="4849b-173">Se você optar por tratar do evento, o manipulador de eventos pode retornar uma referência ao assembly satélite cujos recursos serão usados para a pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4849b-173">If you choose to handle the event, your event handler can return a reference to the satellite assembly whose resources will be used for the lookup.</span></span> <span data-ttu-id="4849b-174">Caso contrário, o manipulador de eventos retornará `null` e continuará a pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4849b-174">Otherwise, the event handler returns `null` and the search continues.</span></span>

9. <span data-ttu-id="4849b-175">Em seguida, o runtime pesquisa assemblies pai, como nas três etapas anteriores, por meio de vários níveis possíveis.</span><span class="sxs-lookup"><span data-stu-id="4849b-175">The runtime next searches parent assemblies, as in the previous three steps, through many potential levels.</span></span> <span data-ttu-id="4849b-176">Cada cultura tem apenas um pai, que é definido pela propriedade <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType>, mas um pai pode ter seu próprio pai.</span><span class="sxs-lookup"><span data-stu-id="4849b-176">Each culture has only one parent, which is defined by the <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> property, but a parent might have its own parent.</span></span> <span data-ttu-id="4849b-177">A pesquisa de culturas pai para quando a propriedade <xref:System.Globalization.CultureInfo.Parent%2A> de uma cultura retorna <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>. Para o fallback do recurso, a cultura invariável não é considerada uma cultura pai ou uma cultura que pode ter recursos.</span><span class="sxs-lookup"><span data-stu-id="4849b-177">The search for parent cultures stops when a culture's <xref:System.Globalization.CultureInfo.Parent%2A> property returns <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>; for resource fallback, the invariant culture is not considered a parent culture or a culture that can have resources.</span></span>

10. <span data-ttu-id="4849b-178">Se a cultura originalmente especificada e todos os pais foram pesquisados e o recurso ainda não foi encontrado, o recurso para a cultura (fallback) padrão será usado.</span><span class="sxs-lookup"><span data-stu-id="4849b-178">If the culture that was originally specified and all parents have been searched and the resource is still not found, the resource for the default (fallback) culture is used.</span></span> <span data-ttu-id="4849b-179">Normalmente, os recursos para a cultura padrão são incluídos no assembly do aplicativo principal.</span><span class="sxs-lookup"><span data-stu-id="4849b-179">Typically, the resources for the default culture are included in the main application assembly.</span></span> <span data-ttu-id="4849b-180">No entanto, você pode especificar um valor de <xref:System.Resources.UltimateResourceFallbackLocation.Satellite> para a propriedade <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> do atributo <xref:System.Resources.NeutralResourcesLanguageAttribute> para indicar que o local de fallback final de recursos é um assembly satélite, em vez de um assembly principal.</span><span class="sxs-lookup"><span data-stu-id="4849b-180">However, you can specify a value of <xref:System.Resources.UltimateResourceFallbackLocation.Satellite> for the <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> property of the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to indicate that the ultimate fallback location for resources is a satellite assembly, rather than the main assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="4849b-181">O recurso padrão é o único recurso que pode ser compilado com o assembly principal.</span><span class="sxs-lookup"><span data-stu-id="4849b-181">The default resource is the only resource that can be compiled with the main assembly.</span></span> <span data-ttu-id="4849b-182">A menos que você especifique um assembly satélite usando o atributo <xref:System.Resources.NeutralResourcesLanguageAttribute>, ele é o fallback final (pai final).</span><span class="sxs-lookup"><span data-stu-id="4849b-182">Unless you specify a satellite assembly by using the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute, it is the ultimate fallback (final parent).</span></span> <span data-ttu-id="4849b-183">Portanto, é recomendável que você sempre inclua um conjunto padrão de recursos no seu assembly principal.</span><span class="sxs-lookup"><span data-stu-id="4849b-183">Therefore, we recommend that you always include a default set of resources in your main assembly.</span></span> <span data-ttu-id="4849b-184">Isso ajuda a evitar que exceções sejam lançadas.</span><span class="sxs-lookup"><span data-stu-id="4849b-184">This helps prevent exceptions from being thrown.</span></span> <span data-ttu-id="4849b-185">Com a inclusão de um arquivo de recurso padrão você fornece um fallback para todos os recursos e garante que pelo menos um recurso está sempre presente para o usuário, mesmo se este não for específico de nenhuma cultura.</span><span class="sxs-lookup"><span data-stu-id="4849b-185">By including a default resource, file you provide a fallback for all resources and ensure that at least one resource is always present for the user, even if it is not culturally specific.</span></span>

11. <span data-ttu-id="4849b-186">Por fim, se o runtime não encontrar um recurso para uma cultura (fallback) padrão, uma exceção <xref:System.Resources.MissingManifestResourceException> ou <xref:System.Resources.MissingSatelliteAssemblyException> será gerada para indicar que o recurso não pôde ser encontrado.</span><span class="sxs-lookup"><span data-stu-id="4849b-186">Finally, if the runtime doesn't find a resource for a default (fallback) culture, a <xref:System.Resources.MissingManifestResourceException> or <xref:System.Resources.MissingSatelliteAssemblyException> exception is thrown to indicate that the resource could not be found.</span></span>

<span data-ttu-id="4849b-187">Por exemplo, suponha que o aplicativo solicite um recurso localizado para espanhol (México) (a cultura `es-MX`).</span><span class="sxs-lookup"><span data-stu-id="4849b-187">For example, suppose the application requests a resource localized for Spanish (Mexico) (the `es-MX` culture).</span></span> <span data-ttu-id="4849b-188">O runtime primeiro procura o cache de assembly global para o assembly correspondente a `es-MX`, mas não encontra-o.</span><span class="sxs-lookup"><span data-stu-id="4849b-188">The runtime first searches the global assembly cache for the assembly that matches `es-MX`, but doesn't find it.</span></span> <span data-ttu-id="4849b-189">O runtime, em seguida, procura no diretório do assembly em execução por um diretório de `es-MX`.</span><span class="sxs-lookup"><span data-stu-id="4849b-189">The runtime then searches the directory of the currently executing assembly for an `es-MX` directory.</span></span> <span data-ttu-id="4849b-190">Em caso de falha, o runtime procura o cache de assembly global novamente por um assembly pai que reflita a cultura de fallback apropriada — neste caso, `es`(espanhol).</span><span class="sxs-lookup"><span data-stu-id="4849b-190">Failing that, the runtime searches the global assembly cache again for a parent assembly that reflects the appropriate fallback culture — in this case, `es` (Spanish).</span></span> <span data-ttu-id="4849b-191">Se o assembly pai não for encontrado, o runtime procura todos os níveis possíveis de assemblies pai para a cultura `es-MX` até encontrar um recurso correspondente.</span><span class="sxs-lookup"><span data-stu-id="4849b-191">If the parent assembly is not found, the runtime searches all potential levels of parent assemblies for the `es-MX` culture until it finds a corresponding resource.</span></span> <span data-ttu-id="4849b-192">Se um recurso não for encontrado, o runtime usa o recurso para a cultura padrão.</span><span class="sxs-lookup"><span data-stu-id="4849b-192">If a resource isn't found, the runtime uses the resource for the default culture.</span></span>

<a name="Optimizing"></a>

#### <a name="optimizing-the-net-framework-resource-fallback-process"></a><span data-ttu-id="4849b-193">Otimizar o processo de fallback do recurso do .NET Framework</span><span class="sxs-lookup"><span data-stu-id="4849b-193">Optimizing the .NET Framework Resource Fallback Process</span></span>

<span data-ttu-id="4849b-194">Sob as seguintes condições, você pode otimizar o processo pelo qual o runtime procura recursos em assemblies satélites</span><span class="sxs-lookup"><span data-stu-id="4849b-194">Under the following conditions, you can optimize the process by which the runtime searches for resources in satellite assemblies</span></span>

- <span data-ttu-id="4849b-195">Assemblies satélite são implantados no mesmo local que o assembly de código.</span><span class="sxs-lookup"><span data-stu-id="4849b-195">Satellite assemblies are deployed in the same location as the code assembly.</span></span> <span data-ttu-id="4849b-196">Se o assembly de código estiver instalado no [Cache de Assembly Global](../app-domains/gac.md), os assemblies satélites também são instalados no cache de assembly global.</span><span class="sxs-lookup"><span data-stu-id="4849b-196">If the code assembly is installed in the [Global Assembly Cache](../app-domains/gac.md), satellite assemblies are also installed in the global assembly cache.</span></span> <span data-ttu-id="4849b-197">Se o assembly de código é instalado em um diretório, os assemblies satélite são instalados em pastas específicas de cultura do diretório.</span><span class="sxs-lookup"><span data-stu-id="4849b-197">If the code assembly is installed in a directory, satellite assemblies are installed in culture-specific folders of that directory.</span></span>

- <span data-ttu-id="4849b-198">Assemblies satélite não são instalados sob demanda.</span><span class="sxs-lookup"><span data-stu-id="4849b-198">Satellite assemblies are not installed on demand.</span></span>

- <span data-ttu-id="4849b-199">O código do aplicativo não processa o evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4849b-199">Application code does not handle the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

<span data-ttu-id="4849b-200">Você otimiza o teste para conjuntos de satélites, incluindo `enabled` o `true` [ \<elemento de>bindforresources relativo](../configure-apps/file-schema/runtime/relativebindforresources-element.md) e definindo seu atributo no arquivo de configuração do aplicativo, como mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="4849b-200">You optimize the probe for satellite assemblies by including the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) element and setting its `enabled` attribute to `true` in the application configuration file, as shown in the following example.</span></span>

```xml
<configuration>
   <runtime>
      <relativeBindForResources enabled="true" />
   </runtime>
</configuration>
```

<span data-ttu-id="4849b-201">A investigação otimizada por assemblies satélite é um recurso opcional.</span><span class="sxs-lookup"><span data-stu-id="4849b-201">The optimized probe for satellite assemblies is an opt-in feature.</span></span> <span data-ttu-id="4849b-202">Ou seja, o runtime segue as etapas documentadas em [O Processo de fallback do recurso](packaging-and-deploying-resources-in-desktop-apps.md#cpconpackagingdeployingresourcesanchor1), a menos que o elemento [\<relativeBindForResources &gt;](../configure-apps/file-schema/runtime/relativebindforresources-element.md) esteja presente no arquivo de configuração do aplicativo e seu atributo `enabled` esteja definido como `true`.</span><span class="sxs-lookup"><span data-stu-id="4849b-202">That is, the runtime follows the steps documented in [The Resource Fallback Process](packaging-and-deploying-resources-in-desktop-apps.md#cpconpackagingdeployingresourcesanchor1) unless the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) element is present in the application's configuration file and its `enabled` attribute is set to `true`.</span></span> <span data-ttu-id="4849b-203">Neste caso, o processo de investigação de um assembly satélite é modificado conforme a seguir:</span><span class="sxs-lookup"><span data-stu-id="4849b-203">If this is the case, the process of probing for a satellite assembly is modified as follows:</span></span>

- <span data-ttu-id="4849b-204">O runtime usa o local do assembly de código pai para investigar o assembly satélite.</span><span class="sxs-lookup"><span data-stu-id="4849b-204">The runtime uses the location of the parent code assembly to probe for the satellite assembly.</span></span> <span data-ttu-id="4849b-205">Se o assembly pai estiver instalado no cache de assembly global, o runtime investiga o cache, mas não o diretório do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4849b-205">If the parent assembly is installed in the global assembly cache, the runtime probes in the cache but not in the application's directory.</span></span> <span data-ttu-id="4849b-206">Se o assembly pai estiver instalado em um diretório de aplicativo, o runtime investiga o diretório do aplicativo, mas não no cache de assembly global.</span><span class="sxs-lookup"><span data-stu-id="4849b-206">If the parent assembly is installed in an application directory, the runtime probes in the application directory but not in the global assembly cache.</span></span>

- <span data-ttu-id="4849b-207">O runtime não consulta o Windows Installer para instalação sob demanda dos assemblies satélites.</span><span class="sxs-lookup"><span data-stu-id="4849b-207">The runtime doesn't query the Windows Installer for on-demand installation of satellite assemblies.</span></span>

- <span data-ttu-id="4849b-208">Se a investigação de um assembly de recurso específico falhar, o runtime não gerará o evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4849b-208">If the probe for a particular resource assembly fails, the runtime does not raise the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

### <a name="net-core-resource-fallback-process"></a><span data-ttu-id="4849b-209">O Processo de fallback do recurso do .NET Core</span><span class="sxs-lookup"><span data-stu-id="4849b-209">.NET Core resource fallback process</span></span>

<span data-ttu-id="4849b-210">O processo de fallback de recurso do .NET CORE envolve as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="4849b-210">The .NET Core resource fallback process involves the following steps:</span></span>

1. <span data-ttu-id="4849b-211">O runtime tenta carregar um assembly satélite para a cultura solicitada.</span><span class="sxs-lookup"><span data-stu-id="4849b-211">The runtime attempts to load a satellite assembly for the requested culture.</span></span>
     - <span data-ttu-id="4849b-212">Verifica no diretório do assembly em execução se há um diretório que corresponda à cultura solicitada.</span><span class="sxs-lookup"><span data-stu-id="4849b-212">Checks the directory of the currently executing assembly for a subdirectory that matches the requested culture.</span></span> <span data-ttu-id="4849b-213">Se ele encontrar o subdiretório, procurará nesse subdiretório um assembly satélite válido para a cultura solicitada e o carregará.</span><span class="sxs-lookup"><span data-stu-id="4849b-213">If it finds the subdirectory, it searches that subdirectory for a valid satellite assembly for the requested culture and loads it.</span></span>

       > [!NOTE]
       > <span data-ttu-id="4849b-214">Em sistemas operacionais com sistemas de arquivos que diferenciam maiúscula de minúscula (ou seja, Linux e macOS), a pesquisa de subdiretório de nome de cultura diferenciará maiúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="4849b-214">On operating systems with case-sensitive file systems (that is, Linux and macOS), the culture name subdirectory search is case-sensitive.</span></span> <span data-ttu-id="4849b-215">O nome do subdiretório deve corresponder exatamente à capitalização do <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> (por exemplo, `es` ou `es-MX`).</span><span class="sxs-lookup"><span data-stu-id="4849b-215">The subdirectory name must exactly match the case of the <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> (for example, `es` or `es-MX`).</span></span>

       > [!NOTE]
       > <span data-ttu-id="4849b-216">Se o programador tiver derivado um contexto de carregamento de assembly personalizado do <xref:System.Runtime.Loader.AssemblyLoadContext>, a situação será complicada.</span><span class="sxs-lookup"><span data-stu-id="4849b-216">If the programmer has derived a custom assembly load context from <xref:System.Runtime.Loader.AssemblyLoadContext>, the situation is complicated.</span></span> <span data-ttu-id="4849b-217">Se o assembly em execução tiver sido carregado no contexto personalizado, o runtime carregará o assembly satélite no contexto personalizado.</span><span class="sxs-lookup"><span data-stu-id="4849b-217">If the executing assembly was loaded into the custom context, the runtime loads the satellite assembly into the custom context.</span></span> <span data-ttu-id="4849b-218">Os detalhes estão fora do escopo deste documento.</span><span class="sxs-lookup"><span data-stu-id="4849b-218">The details are out of scope for this document.</span></span> <span data-ttu-id="4849b-219">Consulte <xref:System.Runtime.Loader.AssemblyLoadContext>.</span><span class="sxs-lookup"><span data-stu-id="4849b-219">See  <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span>

     - <span data-ttu-id="4849b-220">Se um assembly satélite não for encontrado, o <xref:System.Runtime.Loader.AssemblyLoadContext> gerará o evento <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> para indicar que não é possível localizar o assembly satélite.</span><span class="sxs-lookup"><span data-stu-id="4849b-220">If a satellite assemble has not been found, the <xref:System.Runtime.Loader.AssemblyLoadContext> raises the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="4849b-221">Se você optar por tratar do evento, o manipulador de eventos poderá carregar e retornar uma referência ao assembly satélite.</span><span class="sxs-lookup"><span data-stu-id="4849b-221">If you choose to handle the event, your event handler can load and return a reference to the satellite assembly.</span></span>
     - <span data-ttu-id="4849b-222">Se um assembly satélite ainda não tiver sido encontrado, o AssemblyLoadContext fará com que o AppDomain dispare um evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> para indicar que não é capaz de localizar o assembly satélite.</span><span class="sxs-lookup"><span data-stu-id="4849b-222">If a satellite assembly still has not been found, the AssemblyLoadContext causes the AppDomain to trigger an <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="4849b-223">Se você optar por tratar do evento, o manipulador de eventos poderá carregar e retornar uma referência ao assembly satélite.</span><span class="sxs-lookup"><span data-stu-id="4849b-223">If you choose to handle the event, your event handler can load and return a reference to the satellite assembly.</span></span>

2. <span data-ttu-id="4849b-224">Se o assembly satélite for encontrado, o runtime pesquisará o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-224">If a satellite assembly is found, the runtime searches it for the requested resource.</span></span> <span data-ttu-id="4849b-225">Se encontrar o recurso no assembly, ele o utiliza.</span><span class="sxs-lookup"><span data-stu-id="4849b-225">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="4849b-226">Se não encontrar o recurso, ele continua a pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4849b-226">If it doesn't find the resource, it continues the search.</span></span>

     > [!NOTE]
     > <span data-ttu-id="4849b-227">Para localizar um recurso dentro do assembly satélite, o runtime procura o arquivo de recurso solicitado pelo <xref:System.Resources.ResourceManager> para o <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> atual.</span><span class="sxs-lookup"><span data-stu-id="4849b-227">To find a resource within the satellite assembly, the runtime searches for the resource file requested by the <xref:System.Resources.ResourceManager> for the current <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType>.</span></span> <span data-ttu-id="4849b-228">No arquivo de recurso, ele pesquisa o nome do recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-228">Within the resource file it searches for the requested resource name.</span></span> <span data-ttu-id="4849b-229">Se nenhum for encontrado, o recurso será tratado como não encontrado.</span><span class="sxs-lookup"><span data-stu-id="4849b-229">If either is not found, the resource is treated as not found.</span></span>

3. <span data-ttu-id="4849b-230">Em seguida, o runtime procura os assemblies de cultura pai em vários níveis possíveis, cada vez repetindo as etapas 1 e 2.</span><span class="sxs-lookup"><span data-stu-id="4849b-230">The runtime next searches the parent culture assemblies through many potential levels, each time repeating steps 1 & 2.</span></span>

     <span data-ttu-id="4849b-231">A cultura pai é definida como a cultura de fallback apropriada.</span><span class="sxs-lookup"><span data-stu-id="4849b-231">The parent culture is defined as an appropriate fallback culture.</span></span> <span data-ttu-id="4849b-232">Considere a cultura pai como candidata de fallback, pois fornecer qualquer recurso é preferível para lançar uma exceção.</span><span class="sxs-lookup"><span data-stu-id="4849b-232">Consider parents as fallback candidates, because providing any resource is preferable to throwing an exception.</span></span> <span data-ttu-id="4849b-233">Esse processo também permite a reutilização de recursos.</span><span class="sxs-lookup"><span data-stu-id="4849b-233">This process also allows you to reuse resources.</span></span> <span data-ttu-id="4849b-234">Você deve incluir um recurso específico no nível pai somente se a cultura filho não precisa localizar o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="4849b-234">You should include a particular resource at the parent level only if the child culture doesn't need to localize the requested resource.</span></span> <span data-ttu-id="4849b-235">Por exemplo, se você fornecer assemblies de satélite para `en` (inglês neutro), `en-GB` (inglês falado no Reino Unido) e `en-US` (inglês falado nos Estados Unidos), o satélite `en` conteria a terminologia comum e os satélites `en-GB` e `en-US` forneceriam substitutos somente para os termos diferentes.</span><span class="sxs-lookup"><span data-stu-id="4849b-235">For example, if you supply satellite assemblies for `en` (neutral English), `en-GB` (English as spoken in the United Kingdom), and `en-US` (English as spoken in the United States), the `en` satellite contains the common terminology, and the `en-GB` and `en-US` satellites provides overrides for only those terms that differ.</span></span>

     <span data-ttu-id="4849b-236">Cada cultura tem apenas um pai, que é definido pela propriedade <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType>, mas um pai pode ter seu próprio pai.</span><span class="sxs-lookup"><span data-stu-id="4849b-236">Each culture has only one parent, which is defined by the <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> property, but a parent might have its own parent.</span></span> <span data-ttu-id="4849b-237">A pesquisa de culturas pai para quando a propriedade <xref:System.Globalization.CultureInfo.Parent%2A> de uma cultura retornar <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4849b-237">The search for parent cultures stops when a culture's <xref:System.Globalization.CultureInfo.Parent%2A> property returns <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="4849b-238">Para o fallback do recurso, a cultura invariável não é considerada uma cultura pai ou uma cultura que pode ter recursos.</span><span class="sxs-lookup"><span data-stu-id="4849b-238">For resource fallback, the invariant culture is not considered a parent culture or a culture that can have resources.</span></span>

4. <span data-ttu-id="4849b-239">Se a cultura originalmente especificada e todos os pais foram pesquisados e o recurso ainda não foi encontrado, o recurso para a cultura (fallback) padrão será usado.</span><span class="sxs-lookup"><span data-stu-id="4849b-239">If the culture that was originally specified and all parents have been searched and the resource is still not found, the resource for the default (fallback) culture is used.</span></span> <span data-ttu-id="4849b-240">Normalmente, os recursos para a cultura padrão são incluídos no assembly do aplicativo principal.</span><span class="sxs-lookup"><span data-stu-id="4849b-240">Typically, the resources for the default culture are included in the main application assembly.</span></span> <span data-ttu-id="4849b-241">No entanto, você pode especificar um valor de <xref:System.Resources.UltimateResourceFallbackLocation.Satellite?displayProperty.nameWithType> para a propriedade <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> para indicar que o local de fallback final de recursos é um assembly satélite, em vez de um assembly principal.</span><span class="sxs-lookup"><span data-stu-id="4849b-241">However, you can specify a value of <xref:System.Resources.UltimateResourceFallbackLocation.Satellite?displayProperty.nameWithType> for the <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> property to indicate that the ultimate fallback location for resources is a satellite assembly rather than the main assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="4849b-242">O recurso padrão é o único recurso que pode ser compilado com o assembly principal.</span><span class="sxs-lookup"><span data-stu-id="4849b-242">The default resource is the only resource that can be compiled with the main assembly.</span></span> <span data-ttu-id="4849b-243">A menos que você especifique um assembly satélite usando o atributo <xref:System.Resources.NeutralResourcesLanguageAttribute>, ele é o fallback final (pai final).</span><span class="sxs-lookup"><span data-stu-id="4849b-243">Unless you specify a satellite assembly by using the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute, it is the ultimate fallback (final parent).</span></span> <span data-ttu-id="4849b-244">Portanto, é recomendável que você sempre inclua um conjunto padrão de recursos no seu assembly principal.</span><span class="sxs-lookup"><span data-stu-id="4849b-244">Therefore, we recommend that you always include a default set of resources in your main assembly.</span></span> <span data-ttu-id="4849b-245">Isso ajuda a evitar que exceções sejam lançadas.</span><span class="sxs-lookup"><span data-stu-id="4849b-245">This helps prevent exceptions from being thrown.</span></span> <span data-ttu-id="4849b-246">Com a inclusão de um arquivo de recurso padrão você fornece um fallback para todos os recursos e garante que pelo menos um recurso está sempre presente para o usuário, mesmo se este não for específico de nenhuma cultura.</span><span class="sxs-lookup"><span data-stu-id="4849b-246">By including a default resource file, you provide a fallback for all resources and ensure that at least one resource is always present for the user, even if it is not culturally specific.</span></span>

5. <span data-ttu-id="4849b-247">Por fim, se o runtime não encontrar um arquivo de recurso para uma cultura (fallback) padrão, uma exceção <xref:System.Resources.MissingManifestResourceException> ou <xref:System.Resources.MissingSatelliteAssemblyException> será gerada para indicar que o recurso não pôde ser encontrado.</span><span class="sxs-lookup"><span data-stu-id="4849b-247">Finally, if the runtime doesn't find a resource file for a default (fallback) culture, a <xref:System.Resources.MissingManifestResourceException> or <xref:System.Resources.MissingSatelliteAssemblyException> exception is thrown to indicate that the resource could not be found.</span></span> <span data-ttu-id="4849b-248">Se o arquivo de recurso for encontrado, mas o recurso solicitado não estiver presente, a solicitação retornará `null`.</span><span class="sxs-lookup"><span data-stu-id="4849b-248">If the resource file is found but the requested resource is not present the request returns `null`.</span></span>

### <a name="ultimate-fallback-to-satellite-assembly"></a><span data-ttu-id="4849b-249">Fallback Final para Assembly Satélite</span><span class="sxs-lookup"><span data-stu-id="4849b-249">Ultimate Fallback to Satellite Assembly</span></span>

<span data-ttu-id="4849b-250">Você pode, opcionalmente, remover recursos do assembly principal e especificar que o runtime deve carregar os recursos de fallback finais a partir de um assembly satélite que corresponda a uma cultura específica.</span><span class="sxs-lookup"><span data-stu-id="4849b-250">You can optionally remove resources from the main assembly and specify that the runtime should load the ultimate fallback resources from a satellite assembly that corresponds to a specific culture.</span></span> <span data-ttu-id="4849b-251">Para controlar o processo de fallback, você deve usar o construtor <xref:System.Resources.NeutralResourcesLanguageAttribute.%23ctor%28System.String%2CSystem.Resources.UltimateResourceFallbackLocation%29> e fornecer um valor para o parâmetro <xref:System.Resources.UltimateResourceFallbackLocation> que especifica se o Gerenciador de Recursos deve extrair os recursos de fallback do assembly principal ou de um assembly satélite.</span><span class="sxs-lookup"><span data-stu-id="4849b-251">To control the fallback process, you use the <xref:System.Resources.NeutralResourcesLanguageAttribute.%23ctor%28System.String%2CSystem.Resources.UltimateResourceFallbackLocation%29> constructor and supply a value for the <xref:System.Resources.UltimateResourceFallbackLocation> parameter that specifies whether Resource Manager should extract the fallback resources from the main assembly or from a satellite assembly.</span></span>

<span data-ttu-id="4849b-252">O exemplo de .NET Framework a seguir usa o atributo <xref:System.Resources.NeutralResourcesLanguageAttribute> para armazenar recursos de fallback do aplicativo em um assembly satélite para o idioma francês (`fr`).</span><span class="sxs-lookup"><span data-stu-id="4849b-252">The following .NET Framework example uses the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to store an application's fallback resources in a satellite assembly for the French (`fr`) language.</span></span> <span data-ttu-id="4849b-253">O exemplo possui dois arquivos de recurso com base em texto que definem um recurso de cadeia de caracteres único chamado `Greeting`.</span><span class="sxs-lookup"><span data-stu-id="4849b-253">The example has two text-based resource files that define a single string resource named `Greeting`.</span></span> <span data-ttu-id="4849b-254">O primeiro, resources.fr.txt, contém um recurso de idioma francês.</span><span class="sxs-lookup"><span data-stu-id="4849b-254">The first, resources.fr.txt, contains a French language resource.</span></span>

```text
Greeting=Bon jour!
```

<span data-ttu-id="4849b-255">O segundo, resources.ru.fr.txt, contém um recurso de idioma russo.</span><span class="sxs-lookup"><span data-stu-id="4849b-255">The second, resources,ru.txt, contains a Russian language resource.</span></span>

```text
Greeting=Добрый день
```

<span data-ttu-id="4849b-256">Esses dois arquivos são compilados em arquivos .resources através da execução do [gerador de arquivo de recurso (Resgen.exe)](../tools/resgen-exe-resource-file-generator.md) a partir da linha de comando.</span><span class="sxs-lookup"><span data-stu-id="4849b-256">These two files are compiled to .resources files by running the [resource file generator (Resgen.exe)](../tools/resgen-exe-resource-file-generator.md) from the command line.</span></span> <span data-ttu-id="4849b-257">Para o recurso de idioma francês, o comando é:</span><span class="sxs-lookup"><span data-stu-id="4849b-257">For the French language resource, the command is:</span></span>

<span data-ttu-id="4849b-258">**resgen.exe resources.fr.txt**</span><span class="sxs-lookup"><span data-stu-id="4849b-258">**resgen.exe resources.fr.txt**</span></span>

<span data-ttu-id="4849b-259">Para o recurso de idioma russo, o comando é:</span><span class="sxs-lookup"><span data-stu-id="4849b-259">For the Russian language resource, the command is:</span></span>

<span data-ttu-id="4849b-260">**resgen.exe resources.ru.txt**</span><span class="sxs-lookup"><span data-stu-id="4849b-260">**resgen.exe resources.ru.txt**</span></span>

<span data-ttu-id="4849b-261">Os arquivos .resources são incorporados em bibliotecas de vínculo dinâmico através da execução do [vinculador de assembly (Al.exe)](../tools/al-exe-assembly-linker.md) a partir do comando de linha para o recurso de idioma francês da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="4849b-261">The .resources files are embedded into dynamic link libraries by running [assembly linker (Al.exe)](../tools/al-exe-assembly-linker.md) from the command line for the French language resource as follows:</span></span>

<span data-ttu-id="4849b-262">**al /t:lib /embed:resources.fr.resources /culture:fr /out:fr\Example1.resources.dll**</span><span class="sxs-lookup"><span data-stu-id="4849b-262">**al /t:lib /embed:resources.fr.resources /culture:fr /out:fr\Example1.resources.dll**</span></span>

<span data-ttu-id="4849b-263">e para o recurso de idioma russo da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="4849b-263">and for the Russian language resource as follows:</span></span>

<span data-ttu-id="4849b-264">**al /t:lib /embed:resources.ru.resources /culture:ru /out:ru\Example1.resources.dll**</span><span class="sxs-lookup"><span data-stu-id="4849b-264">**al /t:lib /embed:resources.ru.resources /culture:ru /out:ru\Example1.resources.dll**</span></span>

<span data-ttu-id="4849b-265">O código-fonte do aplicativo reside em um arquivo chamado Example1.cs ou Example1.vb.</span><span class="sxs-lookup"><span data-stu-id="4849b-265">The application source code resides in a file named Example1.cs or Example1.vb.</span></span> <span data-ttu-id="4849b-266">Ele inclui o atributo <xref:System.Resources.NeutralResourcesLanguageAttribute> para indicar que o recurso de aplicativo padrão está no subdiretório fr.</span><span class="sxs-lookup"><span data-stu-id="4849b-266">It includes the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to indicate that the default application resource is in the fr subdirectory.</span></span> <span data-ttu-id="4849b-267">Ele cria uma instância do Gerenciador de Recursos, recupera o valor do recurso `Greeting` e o exibe para o console.</span><span class="sxs-lookup"><span data-stu-id="4849b-267">It instantiates the Resource Manager, retrieves the value of the `Greeting` resource, and displays it to the console.</span></span>

[!code-csharp[Conceptual.Resources.Packaging#1](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.resources.packaging/cs/example1.cs#1)]
[!code-vb[Conceptual.Resources.Packaging#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.resources.packaging/vb/example1.vb#1)]

<span data-ttu-id="4849b-268">Em seguida, você pode compilar o código-fonte C# na linha de comando da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="4849b-268">You can then compile C# source code from the command line as follows:</span></span>

```console
csc Example1.cs
```

<span data-ttu-id="4849b-269">A linha de comando para o compilador do Visual Basic é bastante semelhante:</span><span class="sxs-lookup"><span data-stu-id="4849b-269">The command for the Visual Basic compiler is very similar:</span></span>

```console
vbc Example1.vb
```

<span data-ttu-id="4849b-270">Como não há recursos incorporados no assembly principal, você não precisa compilar usando o comutador `/resource`.</span><span class="sxs-lookup"><span data-stu-id="4849b-270">Because there are no resources embedded in the main assembly, you do not have to compile by using the `/resource` switch.</span></span>

<span data-ttu-id="4849b-271">Quando você executar o exemplo a partir de um sistema cujo idioma for diferente de russo, ele exibe a seguinte saída:</span><span class="sxs-lookup"><span data-stu-id="4849b-271">When you run the example from a system whose language is anything other than Russian, it displays the following output:</span></span>

```output
Bon jour!
```

## <a name="suggested-packaging-alternative"></a><span data-ttu-id="4849b-272">Alternativa de Empacotamento Sugerida</span><span class="sxs-lookup"><span data-stu-id="4849b-272">Suggested Packaging Alternative</span></span>

<span data-ttu-id="4849b-273">Restrições de tempo ou orçamento podem impedir a criação de um conjunto de recursos para cada subcultura suportada pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4849b-273">Time or budget constraints might prevent you from creating a set of resources for every subculture that your application supports.</span></span> <span data-ttu-id="4849b-274">Em vez disso, você pode criar um assembly satélite único para uma cultura pai que todos as subculturas relacionadas podem usar.</span><span class="sxs-lookup"><span data-stu-id="4849b-274">Instead, you can create a single satellite assembly for a parent culture that all related subcultures can use.</span></span> <span data-ttu-id="4849b-275">Por exemplo, você pode fornecer um único assembly satélite em inglês (en) que é recuperado por usuários que solicitam recursos em inglês específicos de região e um único assembly satélite alemão (de) para os usuários que solicitam recursos em alemão específica da região.</span><span class="sxs-lookup"><span data-stu-id="4849b-275">For example, you can provide a single English satellite assembly (en) that is retrieved by users who request region-specific English resources, and a single German satellite assembly (de) for users who request region-specific German resources.</span></span> <span data-ttu-id="4849b-276">Por exemplo, as solicitações para alemão falado na Alemanha (de-DE), Áustria (de-AT) e da Suíça (de-CH) fariam fallback para o assembly satélite alemão (de).</span><span class="sxs-lookup"><span data-stu-id="4849b-276">For example, requests for German as spoken in Germany (de-DE), Austria (de-AT), and Switzerland (de-CH) would fall back to the German satellite assembly (de).</span></span> <span data-ttu-id="4849b-277">Os recursos padrão são o fallback final e, portanto, devem ser os recursos que serão solicitados pela maioria dos usuários do seu aplicativo, então escolha cuidadosamente esses recursos.</span><span class="sxs-lookup"><span data-stu-id="4849b-277">The default resources are the final fallback and therefore should be the resources that will be requested by the majority of your application's users, so choose these resources carefully.</span></span> <span data-ttu-id="4849b-278">Essa abordagem implanta recursos que são menos culturalmente específicos, mas podem reduzir significativamente os custos de localização do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4849b-278">This approach deploys resources that are less culturally specific, but can significantly reduce your application's localization costs.</span></span>

## <a name="see-also"></a><span data-ttu-id="4849b-279">Confira também</span><span class="sxs-lookup"><span data-stu-id="4849b-279">See also</span></span>

- [<span data-ttu-id="4849b-280">Recursos em Aplicativos de Desktop</span><span class="sxs-lookup"><span data-stu-id="4849b-280">Resources in Desktop Apps</span></span>](index.md)
- [<span data-ttu-id="4849b-281">Cache de montagem global</span><span class="sxs-lookup"><span data-stu-id="4849b-281">Global Assembly Cache</span></span>](../app-domains/gac.md)
- [<span data-ttu-id="4849b-282">Criação de arquivos de recurso</span><span class="sxs-lookup"><span data-stu-id="4849b-282">Creating Resource Files</span></span>](creating-resource-files-for-desktop-apps.md)
- [<span data-ttu-id="4849b-283">Criação de assemblies satélite</span><span class="sxs-lookup"><span data-stu-id="4849b-283">Creating Satellite Assemblies</span></span>](creating-satellite-assemblies-for-desktop-apps.md)
