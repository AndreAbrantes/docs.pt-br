---
title: Visão geral de conversores de tipo para XAML
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [XAML Services], type converters
- XAML [XAML Services], TypeConverter
- type conversion for XAML [XAML Services]
ms.assetid: 51a65860-efcb-4fe0-95a0-1c679cde66b7
ms.openlocfilehash: 62e92a0bf537bd5a15b71751b3d62755c6b12dfa
ms.sourcegitcommit: 5c1abeec15fbddcc7dbaa729fabc1f1f29f12045
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/15/2019
ms.locfileid: "58049494"
---
# <a name="type-converters-for-xaml-overview"></a><span data-ttu-id="1643e-102">Visão geral de conversores de tipo para XAML</span><span class="sxs-lookup"><span data-stu-id="1643e-102">Type Converters for XAML Overview</span></span>
<span data-ttu-id="1643e-103">Lógica de fornecimento de conversores de tipo para um gravador de objeto que converte uma cadeia de caracteres na marcação XAML em objetos específicos em um grafo de objeto.</span><span class="sxs-lookup"><span data-stu-id="1643e-103">Type converters supply logic for an object writer that converts from a string in XAML markup into particular objects in an object graph.</span></span> <span data-ttu-id="1643e-104">Nos serviços de XAML do .NET Framework, o conversor de tipo deve ser uma classe que deriva de <xref:System.ComponentModel.TypeConverter>.</span><span class="sxs-lookup"><span data-stu-id="1643e-104">In .NET Framework XAML Services, the type converter must be a class that derives from <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="1643e-105">Além disso, alguns conversores dão suporte a XAML caminho de salvamento e podem ser usados para serializar um objeto em um formulário de cadeia de caracteres na marcação de serialização.</span><span class="sxs-lookup"><span data-stu-id="1643e-105">Some converters also support the XAML save path and can be used to serialize an object into a string form in serialization markup.</span></span> <span data-ttu-id="1643e-106">Este tópico descreve como e quando são invocados conversores de tipo em XAML e fornece conselhos de implementação para o método substituições de <xref:System.ComponentModel.TypeConverter>.</span><span class="sxs-lookup"><span data-stu-id="1643e-106">This topic describes how and when type converters in XAML are invoked, and provides implementation advice for the method overrides of <xref:System.ComponentModel.TypeConverter>.</span></span>  
  
<a name="type_conversion_concepts"></a>   
## <a name="type-conversion-concepts"></a><span data-ttu-id="1643e-107">Conceitos de conversão de tipos</span><span class="sxs-lookup"><span data-stu-id="1643e-107">Type Conversion Concepts</span></span>  
 <span data-ttu-id="1643e-108">As seções a seguir explicam os conceitos básicos sobre como o XAML usa cadeias de caracteres e, como gravadores de objeto em serviços de XAML do .NET Framework usam conversores de tipo para processar alguns dos valores de cadeia de caracteres que são encontrados em uma fonte XAML.</span><span class="sxs-lookup"><span data-stu-id="1643e-108">The following sections explain basic concepts about how XAML uses strings, and how object writers in .NET Framework XAML Services use type converters to process some of the string values that are encountered in a XAML source.</span></span>  
  
### <a name="xaml-and-string-values"></a><span data-ttu-id="1643e-109">XAML e valores de cadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="1643e-109">XAML and String Values</span></span>  
 <span data-ttu-id="1643e-110">Quando você define um valor de atributo em um arquivo XAML, o tipo inicial desse valor é uma cadeia de caracteres em um sentido geral e um valor de atributo de cadeia de caracteres em um sentido XML.</span><span class="sxs-lookup"><span data-stu-id="1643e-110">When you set an attribute value in a XAML file, the initial type of that value is a string in a general sense, and a string attribute value in an XML sense.</span></span> <span data-ttu-id="1643e-111">Até mesmo outros primitivos, como <xref:System.Double> inicialmente são cadeias de caracteres para um processador XAML.</span><span class="sxs-lookup"><span data-stu-id="1643e-111">Even other primitives such as <xref:System.Double> are initially strings to a XAML processor.</span></span>  
  
 <span data-ttu-id="1643e-112">Na maioria dos casos, um processador XAML precisa de duas informações para processar um valor de atributo.</span><span class="sxs-lookup"><span data-stu-id="1643e-112">In most cases, a XAML processor needs two pieces of information to process an attribute value.</span></span> <span data-ttu-id="1643e-113">A primeira informação é o tipo de valor da propriedade que está sendo definido.</span><span class="sxs-lookup"><span data-stu-id="1643e-113">The first piece of information is the value type of the property that is being set.</span></span> <span data-ttu-id="1643e-114">Qualquer cadeia de caracteres que define um valor de atributo e que é processada em XAML deve, por fim, ser convertida ou resolvida para um valor desse tipo.</span><span class="sxs-lookup"><span data-stu-id="1643e-114">Any string that defines an attribute value and that is processed in XAML must ultimately be converted or resolved to a value of that type.</span></span> <span data-ttu-id="1643e-115">Caso o valor seja um primitivo compreendido pelo analisador XAML (como um valor numérico), será tentada uma conversão direta da cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="1643e-115">If the value is a primitive that is understood by the XAML parser (such as a numeric value), a direct conversion of the string is attempted.</span></span> <span data-ttu-id="1643e-116">Se o valor para o atributo faz referência a uma enumeração, a cadeia de caracteres fornecida é verificada para uma correspondência de nome para uma constante nomeada na enumeração.</span><span class="sxs-lookup"><span data-stu-id="1643e-116">If the value for the attribute references an enumeration, the supplied string is checked for a name match to a named constant in that enumeration.</span></span> <span data-ttu-id="1643e-117">Se o valor não é um primitivo compreendido pelo analisador nem um nome de constante de uma enumeração, o tipo aplicável deve ser capaz de fornecer um valor ou referência se baseia em uma cadeia de caracteres convertida.</span><span class="sxs-lookup"><span data-stu-id="1643e-117">If the value is neither a parser-understood primitive nor a constant name from an enumeration, the applicable type must be able to provide a value or reference that is based on a converted string.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1643e-118">Diretivas de linguagem XAML não usa conversores de tipo.</span><span class="sxs-lookup"><span data-stu-id="1643e-118">XAML language directives do not use type converters.</span></span>  
  
### <a name="type-converters-and-markup-extensions"></a><span data-ttu-id="1643e-119">Conversores de tipo e extensões de marcação</span><span class="sxs-lookup"><span data-stu-id="1643e-119">Type Converters and Markup Extensions</span></span>  
 <span data-ttu-id="1643e-120">Usos de extensão de marcação devem ser tratados por um processador XAML antes de verificar o tipo de propriedade e outras considerações.</span><span class="sxs-lookup"><span data-stu-id="1643e-120">Markup extension usages must be handled by a XAML processor before it checks for property type and other considerations.</span></span> <span data-ttu-id="1643e-121">Por exemplo, se uma propriedade que está sendo definida como um atributo normalmente tem uma conversão de tipo, mas um caso específico é definida por um uso de extensão de marcação, em seguida, o comportamento de extensão de marcação processa pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="1643e-121">For example, if a property being set as an attribute normally has a type conversion, but in a particular case is set by a markup extension usage, then the markup extension behavior processes first.</span></span> <span data-ttu-id="1643e-122">É uma situação comum em que uma extensão de marcação é necessária fazer uma referência a um objeto que já existe.</span><span class="sxs-lookup"><span data-stu-id="1643e-122">One common situation where a markup extension is necessary is to make a reference to an object that already exists.</span></span> <span data-ttu-id="1643e-123">Para este cenário, um conversor de tipo sem monitoração de estado só pode gerar uma nova instância, que pode não ser desejável.</span><span class="sxs-lookup"><span data-stu-id="1643e-123">For this scenario, a stateless type converter can only generate a new instance, which might not be desirable.</span></span> <span data-ttu-id="1643e-124">Para obter mais informações sobre extensões de marcação, consulte [extensões de marcação para visão geral de XAML](markup-extensions-for-xaml-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1643e-124">For more information about markup extensions, see [Markup Extensions for XAML Overview](markup-extensions-for-xaml-overview.md).</span></span>  
  
### <a name="native-type-converters"></a><span data-ttu-id="1643e-125">Conversores de tipos nativos</span><span class="sxs-lookup"><span data-stu-id="1643e-125">Native Type Converters</span></span>  
 <span data-ttu-id="1643e-126">As implementações de serviços do WPF e XAML do .NET, há determinados tipos CLR que têm manipulação de conversão de tipo nativo, no entanto, esses tipos CLR não são convencionalmente pensados como primitivos.</span><span class="sxs-lookup"><span data-stu-id="1643e-126">In the WPF and .NET XAML services implementations, there are certain CLR types that have native type conversion handling, however, those CLR types are not conventionally thought of as primitives.</span></span> <span data-ttu-id="1643e-127">Um exemplo desse tipo é <xref:System.DateTime>.</span><span class="sxs-lookup"><span data-stu-id="1643e-127">An example of such a type is <xref:System.DateTime>.</span></span> <span data-ttu-id="1643e-128">Um motivo para isso é como a arquitetura do .NET Framework funciona: o tipo <xref:System.DateTime> é definido em mscorlib, a biblioteca mais básica no .NET.</span><span class="sxs-lookup"><span data-stu-id="1643e-128">One reason for this is how the .NET Framework architecture works: the type <xref:System.DateTime> is defined in mscorlib, the most basic library in .NET.</span></span> <span data-ttu-id="1643e-129"><xref:System.DateTime> não é permitida para ser atribuído com um atributo que vem de outro assembly que introduz uma dependência (<xref:System.ComponentModel.TypeConverterAttribute> é do sistema); portanto, o mecanismo de descoberta de conversor de tipos usual por atribuição não têm suporte.</span><span class="sxs-lookup"><span data-stu-id="1643e-129"><xref:System.DateTime> is not permitted to be attributed with an attribute that comes from another assembly that introduces a dependency (<xref:System.ComponentModel.TypeConverterAttribute> is from System); therefore, the usual type converter discovery mechanism by attributing cannot be supported.</span></span> <span data-ttu-id="1643e-130">Em vez disso, o analisador XAML tem uma lista de tipos que precisam de processamento nativo e processa esses tipos semelhantes a como os primitivos verdadeiros são processados.</span><span class="sxs-lookup"><span data-stu-id="1643e-130">Instead, the XAML parser has a list of types that need native processing, and it processes these types similar to how the true primitives are processed.</span></span> <span data-ttu-id="1643e-131">No caso de <xref:System.DateTime>, esse processamento envolve uma chamada para <xref:System.DateTime.Parse%2A>.</span><span class="sxs-lookup"><span data-stu-id="1643e-131">In the case of <xref:System.DateTime>, this processing involves a call to <xref:System.DateTime.Parse%2A>.</span></span>  
  
<a name="Implementing_a_Type_Converter"></a>   
## <a name="implementing-a-type-converter"></a><span data-ttu-id="1643e-132">Implementando um conversor de tipos</span><span class="sxs-lookup"><span data-stu-id="1643e-132">Implementing a Type Converter</span></span>  
 <span data-ttu-id="1643e-133">As seções a seguir discutem a API da <xref:System.ComponentModel.TypeConverter> classe.</span><span class="sxs-lookup"><span data-stu-id="1643e-133">The following sections discuss the API of the <xref:System.ComponentModel.TypeConverter> class.</span></span>  
  
### <a name="typeconverter"></a><span data-ttu-id="1643e-134">TypeConverter</span><span class="sxs-lookup"><span data-stu-id="1643e-134">TypeConverter</span></span>  
 <span data-ttu-id="1643e-135">Em serviços de XAML do .NET Framework, todos os conversores de tipo que são usados para fins XAML são classes que derivam da classe base <xref:System.ComponentModel.TypeConverter>.</span><span class="sxs-lookup"><span data-stu-id="1643e-135">Under .NET Framework XAML Services, all type converters that are used for XAML purposes are classes that derive from the base class <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="1643e-136">O <xref:System.ComponentModel.TypeConverter> classe existia em versões do .NET Framework antes de que existiu XAML; um dos original <xref:System.ComponentModel.TypeConverter> cenários era fornecer conversão de cadeia de caracteres para os editores de propriedade em designers visuais.</span><span class="sxs-lookup"><span data-stu-id="1643e-136">The <xref:System.ComponentModel.TypeConverter> class existed in versions of the .NET Framework before XAML existed; one of the original <xref:System.ComponentModel.TypeConverter> scenarios was to provide string conversion for property editors in visual designers.</span></span>  
  
 <span data-ttu-id="1643e-137">Para XAML, a função de <xref:System.ComponentModel.TypeConverter> é expandido.</span><span class="sxs-lookup"><span data-stu-id="1643e-137">For XAML, the role of <xref:System.ComponentModel.TypeConverter> is expanded.</span></span> <span data-ttu-id="1643e-138">Para fins XAML, <xref:System.ComponentModel.TypeConverter> é a classe base para fornecer suporte para a cadeia de caracteres e de cadeia de caracteres conversões certas.</span><span class="sxs-lookup"><span data-stu-id="1643e-138">For XAML purposes, <xref:System.ComponentModel.TypeConverter> is the base class for providing support for certain to-string and from-string conversions.</span></span> <span data-ttu-id="1643e-139">De cadeia de caracteres permite a análise de um valor de atributo de cadeia de caracteres de XAML.</span><span class="sxs-lookup"><span data-stu-id="1643e-139">From-string enables parsing a string attribute value from XAML.</span></span> <span data-ttu-id="1643e-140">A cadeia de caracteres pode permitir que um valor de tempo de execução de uma propriedade de objeto específico de processamento volta para um atributo em XAML para serialização.</span><span class="sxs-lookup"><span data-stu-id="1643e-140">To-string might enable processing a run-time value of a particular object property back into an attribute in XAML for serialization.</span></span>  
  
 <span data-ttu-id="1643e-141"><xref:System.ComponentModel.TypeConverter> define quatro membros que são relevantes para converter a cadeia de caracteres e de cadeia de caracteres para fins de processamento de XAML:</span><span class="sxs-lookup"><span data-stu-id="1643e-141"><xref:System.ComponentModel.TypeConverter> defines four members that are relevant for converting to-string and from-string for XAML processing purposes:</span></span>  
  
-   <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>  
  
-   <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>  
  
-   <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>  
  
-   <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>  
  
 <span data-ttu-id="1643e-142">Esses membros, o método mais importante é <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>, que converte a cadeia de caracteres de entrada para o tipo de objeto necessário.</span><span class="sxs-lookup"><span data-stu-id="1643e-142">Of these members, the most important method is <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>, which converts the input string to the required object type.</span></span> <span data-ttu-id="1643e-143">O <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> método pode ser implementado para converter uma maior variedade de tipos para o tipo de destino pretendido do conversor.</span><span class="sxs-lookup"><span data-stu-id="1643e-143">The <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method can be implemented to convert a wider range of types into the intended destination type of the converter.</span></span> <span data-ttu-id="1643e-144">Portanto, ele pode servir finalidades que vão além do XAML, como oferecer suporte a conversões de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="1643e-144">Therefore, it can serve purposes that extend beyond XAML, such as supporting run-time conversions.</span></span> <span data-ttu-id="1643e-145">No entanto, para uso em XAML, apenas o caminho do código que pode processar um <xref:System.String> entrada é importante.</span><span class="sxs-lookup"><span data-stu-id="1643e-145">However, for XAML use, only the code path that can process a <xref:System.String> input is important.</span></span>  
  
 <span data-ttu-id="1643e-146">O método segundo o mais importante é <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span><span class="sxs-lookup"><span data-stu-id="1643e-146">The second most important method is <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span> <span data-ttu-id="1643e-147">Se um aplicativo é convertido em uma representação de marcação (por exemplo, se ele é salvo em XAML como um arquivo), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> está envolvido no cenário maior de uma produção de gravadores de texto uma representação de marcação XAML.</span><span class="sxs-lookup"><span data-stu-id="1643e-147">If an application is converted to a markup representation (for example, if it is saved to XAML as a file), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is involved in the larger scenario of a XAML text writers produce a markup representation.</span></span> <span data-ttu-id="1643e-148">Nesse caso, o caminho de código importantes para o XAML é quando o chamador passa uma `destinationType` de <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="1643e-148">In this case, the important code path for XAML is when the caller passes a `destinationType` of <xref:System.String>.</span></span>  
  
 <span data-ttu-id="1643e-149"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> e <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> são os métodos de suporte que são usados quando um serviço consulta as capacidades do <xref:System.ComponentModel.TypeConverter> implementação.</span><span class="sxs-lookup"><span data-stu-id="1643e-149"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> and <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> are support methods that are used when a service queries the capabilities of the <xref:System.ComponentModel.TypeConverter> implementation.</span></span> <span data-ttu-id="1643e-150">Esses métodos devem ser implementados para retornar o `true` para casos específicos de tipo aos quais os métodos de conversão equivalentes do seu conversor dão suporte.</span><span class="sxs-lookup"><span data-stu-id="1643e-150">You must implement these methods to return `true` for type-specific cases that the equivalent conversion methods of your converter support.</span></span> <span data-ttu-id="1643e-151">Para fins XAML, isso geralmente significa o <xref:System.String> tipo.</span><span class="sxs-lookup"><span data-stu-id="1643e-151">For XAML purposes, this generally means the <xref:System.String> type.</span></span>  
  
### <a name="culture-information-and-type-converters-for-xaml"></a><span data-ttu-id="1643e-152">Informações de cultura e conversores de tipos para XAML</span><span class="sxs-lookup"><span data-stu-id="1643e-152">Culture Information and Type Converters for XAML</span></span>  
 <span data-ttu-id="1643e-153">Cada <xref:System.ComponentModel.TypeConverter> implementação exclusivamente pode interpretar o que é uma cadeia de caracteres válida para uma conversão e também pode usar ou ignorar a descrição do tipo que é passada como parâmetros.</span><span class="sxs-lookup"><span data-stu-id="1643e-153">Each <xref:System.ComponentModel.TypeConverter> implementation can uniquely interpret what is a valid string for a conversion, and it can also use or ignore the type description that is passed as parameters.</span></span> <span data-ttu-id="1643e-154">Uma consideração importante para a conversão de tipo de cultura e o XAML é o seguinte: Embora usar cadeias de caracteres localizáveis como valores de atributo for compatível com XAML, é possível usar essas cadeias de caracteres localizáveis como entrada do conversor de tipo com exigências específicas de cultura.</span><span class="sxs-lookup"><span data-stu-id="1643e-154">An important consideration for culture and XAML type conversion is the following: although using localizable strings as attribute values is supported by XAML, you cannot use these localizable strings as type converter input with specific culture requirements.</span></span> <span data-ttu-id="1643e-155">Essa limitação existe porque os conversores de tipo para valores de atributo XAML envolvem um comportamento de processamento de XAML de linguagem necessariamente fixo usa `en-US` cultura.</span><span class="sxs-lookup"><span data-stu-id="1643e-155">This limitation is because type converters for XAML attribute values involve a necessarily fixed-language XAML-processing behavior that uses `en-US` culture.</span></span> <span data-ttu-id="1643e-156">Para obter mais informações sobre os motivos de design para essa restrição, consulte a especificação da linguagem XAML ([\[MS-XAML\]](https://go.microsoft.com/fwlink/?LinkId=114525)) ou [VisãogeraldelocalizaçãoeglobalizaçãodoWPF](../wpf/advanced/wpf-globalization-and-localization-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1643e-156">For more information about the design reasons for this restriction, see the XAML language specification ([\[MS-XAML\]](https://go.microsoft.com/fwlink/?LinkId=114525)) or [WPF Globalization and Localization Overview](../wpf/advanced/wpf-globalization-and-localization-overview.md).</span></span>  
  
 <span data-ttu-id="1643e-157">Como um exemplo em que a cultura pode ser um problema, algumas culturas usam vírgula em vez de um período como o delimitador de vírgula decimal para números em formato de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="1643e-157">As an example where culture can be an issue, some cultures use a comma instead of a period as the decimal point delimiter for numbers in string form.</span></span> <span data-ttu-id="1643e-158">Esse uso entra em conflito com o comportamento que têm muitos conversores de tipo existente, que é usar uma vírgula como delimitador.</span><span class="sxs-lookup"><span data-stu-id="1643e-158">This use collides with the behavior that many existing type converters have, which is to use a comma as a delimiter.</span></span> <span data-ttu-id="1643e-159">Passando uma cultura por meio de `xml:lang` no XAML ao redor não resolver o problema.</span><span class="sxs-lookup"><span data-stu-id="1643e-159">Passing a culture through `xml:lang` in the surrounding XAML does not solve the issue.</span></span>  
  
### <a name="implementing-convertfrom"></a><span data-ttu-id="1643e-160">Implementando ConvertFrom</span><span class="sxs-lookup"><span data-stu-id="1643e-160">Implementing ConvertFrom</span></span>  
 <span data-ttu-id="1643e-161">Para ser usado como um <xref:System.ComponentModel.TypeConverter> implementação que dá suporte a XAML, o <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> método para tal conversor deve aceitar uma cadeia de caracteres como o `value` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="1643e-161">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method for that converter must accept a string as the `value` parameter.</span></span> <span data-ttu-id="1643e-162">Se a cadeia de caracteres está em um formato válido e pode ser convertida pelo <xref:System.ComponentModel.TypeConverter> implementação, o objeto retornado deve dar suporte a uma conversão para o tipo esperado pela propriedade.</span><span class="sxs-lookup"><span data-stu-id="1643e-162">If the string is in a valid format and can be converted by the <xref:System.ComponentModel.TypeConverter> implementation, the returned object must support a cast to the type that is expected by the property.</span></span> <span data-ttu-id="1643e-163">Caso contrário, o <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementação deve retornar `null`.</span><span class="sxs-lookup"><span data-stu-id="1643e-163">Otherwise, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation must return `null`.</span></span>  
  
 <span data-ttu-id="1643e-164">Cada <xref:System.ComponentModel.TypeConverter> implementação exclusivamente pode interpretar o que constitui uma cadeia de caracteres válida para uma conversão e também pode usar ou ignorar os contextos de cultura ou a descrição de tipo que são passados como parâmetros.</span><span class="sxs-lookup"><span data-stu-id="1643e-164">Each <xref:System.ComponentModel.TypeConverter> implementation can uniquely interpret what constitutes a valid string for a conversion, and it can also use or ignore the type description or culture contexts that are passed as parameters.</span></span> <span data-ttu-id="1643e-165">No entanto, o XAML WPF de processamento não pode passar valores para o contexto de descrição de tipo em todos os casos e também pode passar a cultura com base em `xml:lang`.</span><span class="sxs-lookup"><span data-stu-id="1643e-165">However, the WPF XAML processing might not pass values to the type description context in all cases and also might not pass culture based on `xml:lang`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1643e-166">Não use as chaves ({}), especificamente a chave de abertura ({), como um elemento de seu formato de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="1643e-166">Do not use the braces ({}), specifically the opening brace ({), as an element of your string format.</span></span> <span data-ttu-id="1643e-167">Esses caracteres são reservados como entrada e saída para uma sequência de extensão de marcação.</span><span class="sxs-lookup"><span data-stu-id="1643e-167">These characters are reserved as the entry and exit for a markup extension sequence.</span></span>  
  
 <span data-ttu-id="1643e-168">Ele é apropriado lançar uma exceção quando seu conversor de tipo deve ter acesso a um serviço XAML do gravador de objeto de serviços de XAML do .NET Framework, mas o <xref:System.IServiceProvider.GetService%2A> chamada é feita no contexto desse serviço não retorna.</span><span class="sxs-lookup"><span data-stu-id="1643e-168">It is appropriate to throw an exception when your type converter must have access to a XAML service from the .NET Framework XAML Services object writer, but the <xref:System.IServiceProvider.GetService%2A> call that is made against the context does not return that service.</span></span>  
  
### <a name="implementing-convertto"></a><span data-ttu-id="1643e-169">Implementando ConvertTo</span><span class="sxs-lookup"><span data-stu-id="1643e-169">Implementing ConvertTo</span></span>  
 <span data-ttu-id="1643e-170"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> potencialmente é usado para suporte à serialização.</span><span class="sxs-lookup"><span data-stu-id="1643e-170"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is potentially used for serialization support.</span></span> <span data-ttu-id="1643e-171">Suporte de serialização por meio de <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> para seu tipo personalizado e seu tipo de conversor não é um requisito absoluto.</span><span class="sxs-lookup"><span data-stu-id="1643e-171">Serialization support through <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> for your custom type and its type converter is not an absolute requirement.</span></span> <span data-ttu-id="1643e-172">No entanto, se você estiver implementando um controle ou usando a serialização como parte dos recursos ou o design da sua classe, você deve implementar <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span><span class="sxs-lookup"><span data-stu-id="1643e-172">However, if you are implementing a control, or using serialization of as part of the features or design of your class, you should implement <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span>  
  
 <span data-ttu-id="1643e-173">Para ser usado como um <xref:System.ComponentModel.TypeConverter> implementação que dá suporte a XAML, o <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> método para tal conversor deve aceitar uma instância do tipo (ou um valor) que tem suporte como o `value` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="1643e-173">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> method for that converter must accept an instance of the type (or a value) that is supported as the `value` parameter.</span></span> <span data-ttu-id="1643e-174">Quando o `destinationType` parâmetro é do tipo <xref:System.String>, o objeto retornado deve ser capaz de ser convertido como <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="1643e-174">When the `destinationType` parameter is of type <xref:System.String>, the returned object must be able to be cast as <xref:System.String>.</span></span> <span data-ttu-id="1643e-175">A cadeia de caracteres retornada deve representar um valor serializado de `value`.</span><span class="sxs-lookup"><span data-stu-id="1643e-175">The returned string must represent a serialized value of `value`.</span></span> <span data-ttu-id="1643e-176">O ideal é que o formato de serialização que você escolher deve ser capaz de gerar o mesmo valor como se essa cadeia de caracteres foi passada para o <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementação do mesmo conversor, sem perda significativa de informações.</span><span class="sxs-lookup"><span data-stu-id="1643e-176">Ideally, the serialization format that you choose should be able to generate the same value as if that string were passed to the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation of the same converter, without significant loss of information.</span></span>  
  
 <span data-ttu-id="1643e-177">Se o valor não pode ser serializado ou se o conversor não oferece suporte a serialização, o <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> implementação deve retornar `null` e pode lançar uma exceção.</span><span class="sxs-lookup"><span data-stu-id="1643e-177">If the value cannot be serialized or the converter does not support serialization, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> implementation must return `null` and can throw an exception.</span></span> <span data-ttu-id="1643e-178">No entanto, se você lançar exceções, reporte a incapacidade de usar a conversão como parte de sua <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementação, de modo que a prática recomendada de verificar com o <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> primeiro evitar exceções é suportado.</span><span class="sxs-lookup"><span data-stu-id="1643e-178">However, if you do throw exceptions, you should report the inability to use that conversion as part of your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation so that the best practice of checking with <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> first to avoid exceptions is supported.</span></span>  
  
 <span data-ttu-id="1643e-179">Se o `destinationType` parâmetro não é do tipo <xref:System.String>, você pode escolher sua própria manipulação de conversor.</span><span class="sxs-lookup"><span data-stu-id="1643e-179">If the `destinationType` parameter is not of type <xref:System.String>, you can choose your own converter handling.</span></span> <span data-ttu-id="1643e-180">Normalmente, você reverter para implementação de base de tratamento, que, na base de <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> gera uma exceção específica.</span><span class="sxs-lookup"><span data-stu-id="1643e-180">Typically, you revert to base implementation handling, which in the base <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> raises a specific exception.</span></span>  
  
 <span data-ttu-id="1643e-181">Ele é apropriado lançar uma exceção quando seu conversor de tipo deve ter acesso a um serviço XAML do gravador de objeto de serviços de XAML do .NET Framework, mas o <xref:System.IServiceProvider.GetService%2A> chamada é feita no contexto desse serviço não retorna.</span><span class="sxs-lookup"><span data-stu-id="1643e-181">It is appropriate to throw an exception when your type converter must have access to a XAML service from the .NET Framework XAML Services object writer, but the <xref:System.IServiceProvider.GetService%2A> call that is made against the context does not return that service.</span></span>  
  
### <a name="implementing-canconvertfrom"></a><span data-ttu-id="1643e-182">Implementando CanConvertFrom</span><span class="sxs-lookup"><span data-stu-id="1643e-182">Implementing CanConvertFrom</span></span>  
 <span data-ttu-id="1643e-183">Sua <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> implementação deve retornar `true` para `sourceType` do tipo <xref:System.String> caso contrário, adie até a implementação base.</span><span class="sxs-lookup"><span data-stu-id="1643e-183">Your <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> implementation should return `true` for `sourceType` of type <xref:System.String> and otherwise, defer to the base implementation.</span></span> <span data-ttu-id="1643e-184">Não lance exceções de <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>.</span><span class="sxs-lookup"><span data-stu-id="1643e-184">Do not throw exceptions from <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>.</span></span>  
  
### <a name="implementing-canconvertto"></a><span data-ttu-id="1643e-185">Implementando CanConvertTo</span><span class="sxs-lookup"><span data-stu-id="1643e-185">Implementing CanConvertTo</span></span>  
 <span data-ttu-id="1643e-186">Sua <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementação deve retornar `true` para `destinationType` do tipo <xref:System.String>, caso contrário, adie até a implementação base.</span><span class="sxs-lookup"><span data-stu-id="1643e-186">Your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation should return `true` for `destinationType` of type <xref:System.String>, and otherwise defer to the base implementation.</span></span> <span data-ttu-id="1643e-187">Não lance exceções de <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>.</span><span class="sxs-lookup"><span data-stu-id="1643e-187">Do not throw exceptions from <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>.</span></span>  
  
<a name="Applying_the_TypeConverterAttribute"></a>   
## <a name="applying-the-typeconverterattribute"></a><span data-ttu-id="1643e-188">Aplicando o TypeConverterAttribute</span><span class="sxs-lookup"><span data-stu-id="1643e-188">Applying the TypeConverterAttribute</span></span>  
 <span data-ttu-id="1643e-189">Para o conversor de tipo personalizado a ser usado como atuando conversor de tipo para uma classe personalizada por serviços XAML do .NET Framework, você deve aplicar a [!INCLUDE[TLA#tla_netframewkattr](../../../includes/tlasharptla-netframewkattr-md.md)] <xref:System.ComponentModel.TypeConverterAttribute> à sua definição de classe.</span><span class="sxs-lookup"><span data-stu-id="1643e-189">For your custom type converter to be used as the acting type converter for a custom class by .NET Framework XAML Services, you must apply the [!INCLUDE[TLA#tla_netframewkattr](../../../includes/tlasharptla-netframewkattr-md.md)] <xref:System.ComponentModel.TypeConverterAttribute> to your class definition.</span></span> <span data-ttu-id="1643e-190">O <xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A> que você especifique por meio do atributo deve ser o nome do tipo de conversor de tipos personalizado.</span><span class="sxs-lookup"><span data-stu-id="1643e-190">The <xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A> that you specify through the attribute must be the type name of your custom type converter.</span></span> <span data-ttu-id="1643e-191">Se você aplicar esse atributo, quando um processador XAML manipula valores em que o tipo de propriedade usa o tipo de classe personalizada, ele pode cadeias de caracteres de entrada e retornar as instâncias de objeto.</span><span class="sxs-lookup"><span data-stu-id="1643e-191">If you apply this attribute, when a XAML processor handles values where the property type uses your custom class type, it can input strings and return object instances.</span></span>  
  
 <span data-ttu-id="1643e-192">Também é possível fornecer um conversor de tipos por propriedade.</span><span class="sxs-lookup"><span data-stu-id="1643e-192">You can also provide a type converter on a per-property basis.</span></span> <span data-ttu-id="1643e-193">Em vez de aplicar uma [!INCLUDE[TLA#tla_netframewkattr](../../../includes/tlasharptla-netframewkattr-md.md)] <xref:System.ComponentModel.TypeConverterAttribute> à definição de classe, aplicá-la a uma definição de propriedade (a definição principal, não a `get` / `set` implementações dentro dele).</span><span class="sxs-lookup"><span data-stu-id="1643e-193">Instead of applying a [!INCLUDE[TLA#tla_netframewkattr](../../../includes/tlasharptla-netframewkattr-md.md)] <xref:System.ComponentModel.TypeConverterAttribute> to the class definition, apply it to a property definition (the main definition, not the `get`/`set` implementations within it).</span></span> <span data-ttu-id="1643e-194">O tipo da propriedade deve corresponder ao tipo que é processado pelo conversor de tipos personalizado.</span><span class="sxs-lookup"><span data-stu-id="1643e-194">The type of the property must match the type that is processed by your custom type converter.</span></span> <span data-ttu-id="1643e-195">Com esse atributo aplicado, quando um processador XAML manipula valores dessa propriedade, ele pode processar cadeias de caracteres de entrada e retornar as instâncias de objeto.</span><span class="sxs-lookup"><span data-stu-id="1643e-195">With this attribute applied, when a XAML processor handles values of that property, it can process input strings and return object instances.</span></span> <span data-ttu-id="1643e-196">A técnica de conversor de tipo por propriedade é particularmente útil se você optar por usar um tipo de propriedade do Microsoft .NET Framework ou de alguma outra biblioteca em que você não pode controlar a definição de classe e não é possível aplicar um <xref:System.ComponentModel.TypeConverterAttribute> lá.</span><span class="sxs-lookup"><span data-stu-id="1643e-196">The per-property type converter technique is particularly useful if you choose to use a property type from Microsoft .NET Framework or from some other library where you cannot control the class definition and cannot apply a <xref:System.ComponentModel.TypeConverterAttribute> there.</span></span>  
  
 <span data-ttu-id="1643e-197">Para fornecer um comportamento de conversão de tipo de membro anexado personalizado, aplique <xref:System.ComponentModel.TypeConverterAttribute> para o `Get` método do acessador do padrão de implementação para o membro anexado.</span><span class="sxs-lookup"><span data-stu-id="1643e-197">To supply a type conversion behavior for a custom attached member, apply <xref:System.ComponentModel.TypeConverterAttribute> to the `Get` accessor method of the implementation pattern for the attached member.</span></span>  
  
<a name="accessing_service_provider_context_from_a_markup_extension_implementation"></a>   
## <a name="accessing-service-provider-context-from-a-markup-extension-implementation"></a><span data-ttu-id="1643e-198">Acessando o contexto de provedor de serviço de uma implementação de extensão de marcação</span><span class="sxs-lookup"><span data-stu-id="1643e-198">Accessing Service Provider Context from a Markup Extension Implementation</span></span>  
 <span data-ttu-id="1643e-199">Os serviços disponíveis são as mesmas para qualquer conversor de valor.</span><span class="sxs-lookup"><span data-stu-id="1643e-199">The available services are the same for any value converter.</span></span> <span data-ttu-id="1643e-200">A diferença está em como cada conversor de valor recebe o contexto de serviço.</span><span class="sxs-lookup"><span data-stu-id="1643e-200">The difference is in how each value converter receives the service context.</span></span> <span data-ttu-id="1643e-201">Acesso a serviços e os serviços disponíveis estão documentados no tópico [conversores de tipo e extensões de marcação para XAML](type-converters-and-markup-extensions-for-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="1643e-201">Accessing services and the services available are documented in the topic [Type Converters and Markup Extensions for XAML](type-converters-and-markup-extensions-for-xaml.md).</span></span>  
  
<a name="type_converters_in_the_xaml_node_stream"></a>   
## <a name="type-converters-in-the-xaml-node-stream"></a><span data-ttu-id="1643e-202">Conversores de tipo em que o Stream de nó XAML</span><span class="sxs-lookup"><span data-stu-id="1643e-202">Type Converters in the XAML Node Stream</span></span>  
 <span data-ttu-id="1643e-203">Se você estiver trabalhando com um fluxo do nó XAML, o resultado final de um conversor de tipo ou a ação não será executado ainda.</span><span class="sxs-lookup"><span data-stu-id="1643e-203">If you are working with a XAML node stream, the action or end result of a type converter is not yet executed.</span></span> <span data-ttu-id="1643e-204">Em um caminho de carga, a cadeia de caracteres de atributo que, eventualmente, precisa ser convertido para a carga permanece como um valor de texto dentro de um membro inicial e final.</span><span class="sxs-lookup"><span data-stu-id="1643e-204">In a load path, the attribute string that eventually needs to be type-converted in order to load remains as a text value within a start member and end member.</span></span> <span data-ttu-id="1643e-205">O conversor de tipo que, eventualmente, é necessário para esta operação pode ser determinada usando o <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> propriedade.</span><span class="sxs-lookup"><span data-stu-id="1643e-205">The type converter that is eventually needed for this operation can be determined by using the <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="1643e-206">No entanto, como obter um valor válido de <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> se baseia em ter um contexto de esquema XAML, que pode acessar essas informações por meio de membro subjacente ou o tipo do valor do objeto que usa o membro.</span><span class="sxs-lookup"><span data-stu-id="1643e-206">However, obtaining a valid value from <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> relies on having a XAML schema context, which can access such information through the underlying member, or the type of the object value that the member uses.</span></span> <span data-ttu-id="1643e-207">Invocar o comportamento de conversão de tipo também requer o contexto do esquema XAML porque que requer o mapeamento de tipo e criar uma instância do conversor.</span><span class="sxs-lookup"><span data-stu-id="1643e-207">Invoking the type conversion behavior also requires the XAML schema context because that requires type-mapping and creating a converter instance.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1643e-208">Consulte também</span><span class="sxs-lookup"><span data-stu-id="1643e-208">See also</span></span>
- <xref:System.ComponentModel.TypeConverterAttribute>
- [<span data-ttu-id="1643e-209">Conversores de tipo e extensões de marcação para XAML</span><span class="sxs-lookup"><span data-stu-id="1643e-209">Type Converters and Markup Extensions for XAML</span></span>](type-converters-and-markup-extensions-for-xaml.md)
- [<span data-ttu-id="1643e-210">Visão geral de XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="1643e-210">XAML Overview (WPF)</span></span>](../wpf/advanced/xaml-overview-wpf.md)
