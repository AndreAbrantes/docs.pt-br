---
title: 'Como: Definir um tipo genérico com a emissão de reflexão'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- generics [.NET Framework], reflection emit
- generics [.NET Framework], dynamic types
- reflection emit, generic types
ms.assetid: 07d5f01a-7b5b-40ea-9b15-f21561098fe4
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 30036df99559c67a3b11a5c651053dc644267bbb
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64592452"
---
# <a name="how-to-define-a-generic-type-with-reflection-emit"></a><span data-ttu-id="fc61e-102">Como: Definir um tipo genérico com a emissão de reflexão</span><span class="sxs-lookup"><span data-stu-id="fc61e-102">How to: Define a Generic Type with Reflection Emit</span></span>
<span data-ttu-id="fc61e-103">Este tópico mostra como criar um tipo genérico simples com dois parâmetros de tipo, como aplicar restrições de classe, restrições de interface e restrições especiais aos parâmetros de tipo e como criar membros que usam os parâmetros de tipo da classe como tipos de parâmetro e tipos de retorno.</span><span class="sxs-lookup"><span data-stu-id="fc61e-103">This topic shows how to create a simple generic type with two type parameters, how to apply class constraints, interface constraints, and special constraints to the type parameters, and how to create members that use the type parameters of the class as parameter types and return types.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="fc61e-104">Um método não é genérico apenas porque pertence a um tipo genérico e usa os parâmetros de tipo desse tipo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-104">A method is not generic just because it belongs to a generic type and uses the type parameters of that type.</span></span> <span data-ttu-id="fc61e-105">Um método será genérico somente se ele tiver sua própria lista de parâmetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-105">A method is generic only if it has its own type parameter list.</span></span> <span data-ttu-id="fc61e-106">A maioria dos métodos em tipos genéricos não é genérica, como neste exemplo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-106">Most methods on generic types are not generic, as in this example.</span></span> <span data-ttu-id="fc61e-107">Para obter um exemplo de emissão de um método genérico, confira [Como: Definir um método genérico com a emissão de reflexão](../../../docs/framework/reflection-and-codedom/how-to-define-a-generic-method-with-reflection-emit.md).</span><span class="sxs-lookup"><span data-stu-id="fc61e-107">For an example of emitting a generic method, see [How to: Define a Generic Method with Reflection Emit](../../../docs/framework/reflection-and-codedom/how-to-define-a-generic-method-with-reflection-emit.md).</span></span>  
  
### <a name="to-define-a-generic-type"></a><span data-ttu-id="fc61e-108">Para definir um tipo genérico</span><span class="sxs-lookup"><span data-stu-id="fc61e-108">To define a generic type</span></span>  
  
1. <span data-ttu-id="fc61e-109">Defina um assembly dinâmico chamado `GenericEmitExample1`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-109">Define a dynamic assembly named `GenericEmitExample1`.</span></span> <span data-ttu-id="fc61e-110">Neste exemplo, o assembly é executado e salvo no disco, portanto, <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType> é especificado.</span><span class="sxs-lookup"><span data-stu-id="fc61e-110">In this example, the assembly is executed and saved to disk, so <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType> is specified.</span></span>  
  
     [!code-cpp[EmitGenericType#2](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#2)]
     [!code-csharp[EmitGenericType#2](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#2)]
     [!code-vb[EmitGenericType#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#2)]  
  
2. <span data-ttu-id="fc61e-111">Defina um módulo dinâmico.</span><span class="sxs-lookup"><span data-stu-id="fc61e-111">Define a dynamic module.</span></span> <span data-ttu-id="fc61e-112">Um assembly é composto por módulos executáveis.</span><span class="sxs-lookup"><span data-stu-id="fc61e-112">An assembly is made up of executable modules.</span></span> <span data-ttu-id="fc61e-113">Para um assembly de modo único, o nome do módulo é igual ao nome do assembly e o nome do arquivo é o nome do módulo com a adição de uma extensão.</span><span class="sxs-lookup"><span data-stu-id="fc61e-113">For a single-module assembly, the module name is the same as the assembly name, and the file name is the module name plus an extension.</span></span>  
  
     [!code-cpp[EmitGenericType#3](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#3)]
     [!code-csharp[EmitGenericType#3](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#3)]
     [!code-vb[EmitGenericType#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#3)]  
  
3. <span data-ttu-id="fc61e-114">Defina uma classe.</span><span class="sxs-lookup"><span data-stu-id="fc61e-114">Define a class.</span></span> <span data-ttu-id="fc61e-115">Nesse exemplo, a classe é chamada `Sample`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-115">In this example, the class is named `Sample`.</span></span>  
  
     [!code-cpp[EmitGenericType#4](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#4)]
     [!code-csharp[EmitGenericType#4](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#4)]
     [!code-vb[EmitGenericType#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#4)]  
  
4. <span data-ttu-id="fc61e-116">Defina os parâmetros de tipo genérico de `Sample` passando uma matriz de cadeias de caracteres que contém os nomes dos parâmetros para o método <xref:System.Reflection.Emit.TypeBuilder.DefineGenericParameters%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fc61e-116">Define the generic type parameters of `Sample` by passing an array of strings containing the names of the parameters to the <xref:System.Reflection.Emit.TypeBuilder.DefineGenericParameters%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="fc61e-117">Isso torna a classe um tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="fc61e-117">This makes the class a generic type.</span></span> <span data-ttu-id="fc61e-118">O valor retornado é uma matriz de objetos <xref:System.Reflection.Emit.GenericTypeParameterBuilder> que representam os parâmetros de tipo, que podem ser usados em seu código emitido.</span><span class="sxs-lookup"><span data-stu-id="fc61e-118">The return value is an array of <xref:System.Reflection.Emit.GenericTypeParameterBuilder> objects representing the type parameters, which can be used in your emitted code.</span></span>  
  
     <span data-ttu-id="fc61e-119">No código a seguir, `Sample` se torna um tipo genérico om os parâmetros de tipo `TFirst` e `TSecond`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-119">In the following code, `Sample` becomes a generic type with type parameters `TFirst` and `TSecond`.</span></span> <span data-ttu-id="fc61e-120">Para tornar o código mais fácil de ler, cada um <xref:System.Reflection.Emit.GenericTypeParameterBuilder> é colocado em uma variável com o mesmo nome que o parâmetro de tipo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-120">To make the code easier to read, each <xref:System.Reflection.Emit.GenericTypeParameterBuilder> is placed in a variable with the same name as the type parameter.</span></span>  
  
     [!code-cpp[EmitGenericType#5](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#5)]
     [!code-csharp[EmitGenericType#5](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#5)]
     [!code-vb[EmitGenericType#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#5)]  
  
5. <span data-ttu-id="fc61e-121">Adicione restrições especiais aos parâmetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-121">Add special constraints to the type parameters.</span></span> <span data-ttu-id="fc61e-122">Neste exemplo, o parâmetro de tipo `TFirst` é restrito para tipos que têm construtores sem parâmetros e para tipos de referência.</span><span class="sxs-lookup"><span data-stu-id="fc61e-122">In this example, type parameter `TFirst` is constrained to types that have parameterless constructors, and to reference types.</span></span>  
  
     [!code-cpp[EmitGenericType#6](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#6)]
     [!code-csharp[EmitGenericType#6](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#6)]
     [!code-vb[EmitGenericType#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#6)]  
  
6. <span data-ttu-id="fc61e-123">Opcionalmente, adicione restrições de classe e interface aos parâmetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-123">Optionally add class and interface constraints to the type parameters.</span></span> <span data-ttu-id="fc61e-124">Neste exemplo, o parâmetro de tipo `TFirst` é restrito a tipos que derivam da classe base representada pelo objeto <xref:System.Type> contido na variável `baseType` e que implementam as interfaces cujos tipos estão contidos nas variáveis `interfaceA` e `interfaceB`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-124">In this example, type parameter `TFirst` is constrained to types that derive from the base class represented by the <xref:System.Type> object contained in the variable `baseType`, and that implement the interfaces whose types are contained in the variables `interfaceA` and `interfaceB`.</span></span> <span data-ttu-id="fc61e-125">Consulte o exemplo de código para a declaração e atribuição dessas variáveis.</span><span class="sxs-lookup"><span data-stu-id="fc61e-125">See the code example for the declaration and assignment of these variables.</span></span>  
  
     [!code-cpp[EmitGenericType#7](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#7)]
     [!code-csharp[EmitGenericType#7](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#7)]
     [!code-vb[EmitGenericType#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#7)]  
  
7. <span data-ttu-id="fc61e-126">Defina um campo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-126">Define a field.</span></span> <span data-ttu-id="fc61e-127">Neste exemplo, o tipo do campo é especificado pelo parâmetro de tipo `TFirst`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-127">In this example, the type of the field is specified by type parameter `TFirst`.</span></span> <span data-ttu-id="fc61e-128"><xref:System.Reflection.Emit.GenericTypeParameterBuilder> deriva de <xref:System.Type>, portanto, você pode usar parâmetros de tipo genérico em qualquer lugar que um tipo pode ser usado.</span><span class="sxs-lookup"><span data-stu-id="fc61e-128"><xref:System.Reflection.Emit.GenericTypeParameterBuilder> derives from <xref:System.Type>, so you can use generic type parameters anywhere a type can be used.</span></span>  
  
     [!code-cpp[EmitGenericType#21](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#21)]
     [!code-csharp[EmitGenericType#21](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#21)]
     [!code-vb[EmitGenericType#21](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#21)]  
  
8. <span data-ttu-id="fc61e-129">Defina um método que usa os parâmetros de tipo do tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="fc61e-129">Define a method that uses the type parameters of the generic type.</span></span> <span data-ttu-id="fc61e-130">Observe que esses métodos não são genéricos, a menos que tenham suas próprias listas de parâmetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-130">Note that such methods are not generic unless they have their own type parameter lists.</span></span> <span data-ttu-id="fc61e-131">O código a seguir define um método `static` (`Shared` no Visual Basic) que usa uma matriz de `TFirst` e retorna um `List<TFirst>` (`List(Of TFirst)` no Visual Basic) que contém todos os elementos da matriz.</span><span class="sxs-lookup"><span data-stu-id="fc61e-131">The following code defines a `static` method (`Shared` in Visual Basic) that takes an array of `TFirst` and returns a `List<TFirst>` (`List(Of TFirst)` in Visual Basic) containing all the elements of the array.</span></span> <span data-ttu-id="fc61e-132">Para definir esse método, é necessário criar o tipo `List<TFirst>` chamando <xref:System.Type.MakeGenericType%2A> na definição de tipo genérico, `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-132">To define this method, it is necessary to create the type `List<TFirst>` by calling <xref:System.Type.MakeGenericType%2A> on the generic type definition, `List<T>`.</span></span> <span data-ttu-id="fc61e-133">(O `T` é omitido quando você usa o operador `typeof` (`GetType` no Visual Basic) para obter a definição de tipo genérico.) O tipo de parâmetro é criado usando o método <xref:System.Type.MakeArrayType%2A>.</span><span class="sxs-lookup"><span data-stu-id="fc61e-133">(The `T` is omitted when you use the `typeof` operator (`GetType` in Visual Basic) to get the generic type definition.) The parameter type is created by using the <xref:System.Type.MakeArrayType%2A> method.</span></span>  
  
     [!code-cpp[EmitGenericType#22](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#22)]
     [!code-csharp[EmitGenericType#22](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#22)]
     [!code-vb[EmitGenericType#22](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#22)]  
  
9. <span data-ttu-id="fc61e-134">Emita o corpo do método.</span><span class="sxs-lookup"><span data-stu-id="fc61e-134">Emit the method body.</span></span> <span data-ttu-id="fc61e-135">O corpo do método consiste em três opcodes que carregam a matriz de entrada para a pilha, chamem o construtor `List<TFirst>` que recebe `IEnumerable<TFirst>` (que realiza todo o trabalho de colocar os elementos de entrada na lista) e retorna (deixando o novo objeto <xref:System.Collections.Generic.List%601> na pilha).</span><span class="sxs-lookup"><span data-stu-id="fc61e-135">The method body consists of three opcodes that load the input array onto the stack, call the `List<TFirst>` constructor that takes `IEnumerable<TFirst>` (which does all the work of putting the input elements into the list), and return (leaving the new <xref:System.Collections.Generic.List%601> object on the stack).</span></span> <span data-ttu-id="fc61e-136">A parte difícil de emitir esse código é obter o construtor.</span><span class="sxs-lookup"><span data-stu-id="fc61e-136">The difficult part of emitting this code is getting the constructor.</span></span>  
  
     <span data-ttu-id="fc61e-137">O método <xref:System.Type.GetConstructor%2A> não tem suporte em um <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, portanto, não é possível obter o construtor de `List<TFirst>` diretamente.</span><span class="sxs-lookup"><span data-stu-id="fc61e-137">The <xref:System.Type.GetConstructor%2A> method is not supported on a <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, so it is not possible to get the constructor of `List<TFirst>` directly.</span></span> <span data-ttu-id="fc61e-138">Primeiro, é necessário obter o construtor da definição de tipo genérico `List<T>` e, em seguida, chamar um método que o converte para o construtor correspondente do `List<TFirst>`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-138">First, it is necessary to get the constructor of the generic type definition `List<T>` and then to call a method that converts it to the corresponding constructor of `List<TFirst>`.</span></span>  
  
     <span data-ttu-id="fc61e-139">O construtor usado para este exemplo de código utiliza um `IEnumerable<T>`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-139">The constructor used for this code example takes an `IEnumerable<T>`.</span></span> <span data-ttu-id="fc61e-140">No entanto, observe que essa não é a definição de tipo genérico da interface genérica <xref:System.Collections.Generic.IEnumerable%601>, em vez disso, o parâmetro de tipo `T` de `List<T>` deve ser substituído pelo parâmetro de tipo `T` de `IEnumerable<T>`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-140">Note, however, that this is not the generic type definition of the <xref:System.Collections.Generic.IEnumerable%601> generic interface; instead, the type parameter `T` from `List<T>` must be substituted for the type parameter `T` of `IEnumerable<T>`.</span></span> <span data-ttu-id="fc61e-141">(Isso parece confuso apenas porque ambos os tipos têm parâmetros de tipo chamados `T`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-141">(This seems confusing only because both types have type parameters named `T`.</span></span> <span data-ttu-id="fc61e-142">Isto é porque este exemplo de código usa os nomes `TFirst` e `TSecond`.) Para obter o tipo do argumento do construtor, inicie com a definição de tipo genérico `IEnumerable<T>` e chame <xref:System.Type.MakeGenericType%2A> com o primeiro parâmetro de tipo genérico de `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-142">That is why this code example uses the names `TFirst` and `TSecond`.) To get the type of the constructor argument, start with the generic type definition `IEnumerable<T>` and call <xref:System.Type.MakeGenericType%2A> with the first generic type parameter of `List<T>`.</span></span> <span data-ttu-id="fc61e-143">A lista de argumentos do construtor deve ser passada como uma matriz, com apenas um argumento nesse caso.</span><span class="sxs-lookup"><span data-stu-id="fc61e-143">The constructor argument list must be passed as an array, with just one argument in this case.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="fc61e-144">A definição de tipo genérico é expressa como `IEnumerable<>` quando você usa o operador `typeof` em C# ou `IEnumerable(Of )` quando usa o operador `GetType` no Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="fc61e-144">The generic type definition is expressed as `IEnumerable<>` when you use the `typeof` operator in C#, or `IEnumerable(Of )` when you use the `GetType` operator in Visual Basic.</span></span>  
  
     <span data-ttu-id="fc61e-145">Agora é possível obter o construtor de `List<T>` chamando <xref:System.Type.GetConstructor%2A> na definição de tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="fc61e-145">Now it is possible to get the constructor of `List<T>` by calling <xref:System.Type.GetConstructor%2A> on the generic type definition.</span></span> <span data-ttu-id="fc61e-146">Para converter esse construtor para o construtor correspondente do `List<TFirst>`, passe `List<TFirst>` e o construtor de `List<T>` para o método <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29?displayProperty=nameWithType> estático.</span><span class="sxs-lookup"><span data-stu-id="fc61e-146">To convert this constructor to the corresponding constructor of `List<TFirst>`, pass `List<TFirst>` and the constructor from `List<T>` to the static <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29?displayProperty=nameWithType> method.</span></span>  
  
     [!code-cpp[EmitGenericType#23](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#23)]
     [!code-csharp[EmitGenericType#23](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#23)]
     [!code-vb[EmitGenericType#23](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#23)]  
  
10. <span data-ttu-id="fc61e-147">Crie o tipo e salve o arquivo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-147">Create the type and save the file.</span></span>  
  
     [!code-cpp[EmitGenericType#8](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#8)]
     [!code-csharp[EmitGenericType#8](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#8)]
     [!code-vb[EmitGenericType#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#8)]  
  
11. <span data-ttu-id="fc61e-148">Invoque o método.</span><span class="sxs-lookup"><span data-stu-id="fc61e-148">Invoke the method.</span></span> <span data-ttu-id="fc61e-149">`ExampleMethod` não é genérico, mas o tipo ao qual ele pertence é genérico, portanto, para obter um <xref:System.Reflection.MethodInfo> que pode ser invocado é necessário criar um tipo construído da definição de tipo para `Sample`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-149">`ExampleMethod` is not generic, but the type it belongs to is generic, so in order to get a <xref:System.Reflection.MethodInfo> that can be invoked it is necessary to create a constructed type from the type definition for `Sample`.</span></span> <span data-ttu-id="fc61e-150">O tipo construído usa a classe `Example`, que atende às restrições em `TFirst` porque é um tipo de referência e tem um construtor sem parâmetros padrão e a classe `ExampleDerived` que atende às restrições em `TSecond`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-150">The constructed type uses the `Example` class, which satisfies the constraints on `TFirst` because it is a reference type and has a default parameterless constructor, and the `ExampleDerived` class which satisfies the constraints on `TSecond`.</span></span> <span data-ttu-id="fc61e-151">(O código de `ExampleDerived` pode ser encontrado na seção de código de exemplo.) Esses dois tipos são passados para <xref:System.Type.MakeGenericType%2A> para criar o tipo construído.</span><span class="sxs-lookup"><span data-stu-id="fc61e-151">(The code for `ExampleDerived` can be found in the example code section.) These two types are passed to <xref:System.Type.MakeGenericType%2A> to create the constructed type.</span></span> <span data-ttu-id="fc61e-152">O <xref:System.Reflection.MethodInfo> é então obtido usando o método <xref:System.Type.GetMethod%2A>.</span><span class="sxs-lookup"><span data-stu-id="fc61e-152">The <xref:System.Reflection.MethodInfo> is then obtained using the <xref:System.Type.GetMethod%2A> method.</span></span>  
  
     [!code-cpp[EmitGenericType#9](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#9)]
     [!code-csharp[EmitGenericType#9](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#9)]
     [!code-vb[EmitGenericType#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#9)]  
  
12. <span data-ttu-id="fc61e-153">O código a seguir cria uma matriz de objetos `Example`, coloca essa matriz em uma matriz do tipo <xref:System.Object> que representa os argumentos do método a ser invocado e os passa para o método <xref:System.Reflection.MethodBase.Invoke%28System.Object%2CSystem.Object%5B%5D%29>.</span><span class="sxs-lookup"><span data-stu-id="fc61e-153">The following code creates an array of `Example` objects, places that array in an array of type <xref:System.Object> representing the arguments of the method to be invoked, and passes them to the <xref:System.Reflection.MethodBase.Invoke%28System.Object%2CSystem.Object%5B%5D%29> method.</span></span> <span data-ttu-id="fc61e-154">O primeiro argumento do método <xref:System.Reflection.MethodBase.Invoke%2A> é uma referência nula porque o método é `static`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-154">The first argument of the <xref:System.Reflection.MethodBase.Invoke%2A> method is a null reference because the method is `static`.</span></span>  
  
     [!code-cpp[EmitGenericType#10](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#10)]
     [!code-csharp[EmitGenericType#10](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#10)]
     [!code-vb[EmitGenericType#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#10)]  
  
## <a name="example"></a><span data-ttu-id="fc61e-155">Exemplo</span><span class="sxs-lookup"><span data-stu-id="fc61e-155">Example</span></span>  
 <span data-ttu-id="fc61e-156">O exemplo de código a seguir define uma classe chamada `Sample`, junto com uma classe base e duas interfaces.</span><span class="sxs-lookup"><span data-stu-id="fc61e-156">The following code example defines a class named `Sample`, along with a base class and two interfaces.</span></span> <span data-ttu-id="fc61e-157">O programa define dois parâmetros de tipo genérico para `Sample`, transformando-o em um tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="fc61e-157">The program defines two generic type parameters for `Sample`, turning it into a generic type.</span></span> <span data-ttu-id="fc61e-158">Os parâmetros de tipo são a única coisa que torna um tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="fc61e-158">Type parameters are the only thing that makes a type generic.</span></span> <span data-ttu-id="fc61e-159">O programa mostra isso exibindo uma mensagem de teste antes e após a definição dos parâmetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-159">The program shows this by displaying a test message before and after the definition of the type parameters.</span></span>  
  
 <span data-ttu-id="fc61e-160">O parâmetro de tipo `TSecond` é usado para demonstrar as restrições de interface e de classe, usando a classe base e interfaces e o parâmetro de tipo `TFirst` é usado para demonstrar restrições especiais.</span><span class="sxs-lookup"><span data-stu-id="fc61e-160">The type parameter `TSecond` is used to demonstrate class and interface constraints, using the base class and interfaces, and the type parameter `TFirst` is used to demonstrate special constraints.</span></span>  
  
 <span data-ttu-id="fc61e-161">O exemplo de código define um campo e um método usando os parâmetros de tipo da classe para o tipo de campo e para o parâmetro e tipo de retorno do método.</span><span class="sxs-lookup"><span data-stu-id="fc61e-161">The code example defines a field and a method using the class's type parameters for the field type and for the parameter and return type of the method.</span></span>  
  
 <span data-ttu-id="fc61e-162">Após a classe `Sample` ter sido criada, o método é invocado.</span><span class="sxs-lookup"><span data-stu-id="fc61e-162">After the `Sample` class has been created, the method is invoked.</span></span>  
  
 <span data-ttu-id="fc61e-163">O programa inclui um método que lista informações sobre um tipo genérico e um método que lista as restrições especiais em um parâmetro de tipo.</span><span class="sxs-lookup"><span data-stu-id="fc61e-163">The program includes a method that lists information about a generic type, and a method that lists the special constraints on a type parameter.</span></span> <span data-ttu-id="fc61e-164">Esses métodos são usados para exibir informações sobre a classe `Sample` finalizada.</span><span class="sxs-lookup"><span data-stu-id="fc61e-164">These methods are used to display information about the finished `Sample` class.</span></span>  
  
 <span data-ttu-id="fc61e-165">O programa salva o módulo finalizado no disco como `GenericEmitExample1.dll`, portanto, você pode abri-lo com o [Ildasm.exe (IL Disassembler)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md) e examinar o MSIL para a classe `Sample`.</span><span class="sxs-lookup"><span data-stu-id="fc61e-165">The program saves the finished module to disk as `GenericEmitExample1.dll`, so you can open it with the [Ildasm.exe (IL Disassembler)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md) and examine the MSIL for the `Sample` class.</span></span>  
  
 [!code-cpp[EmitGenericType#1](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#1)]
 [!code-csharp[EmitGenericType#1](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#1)]
 [!code-vb[EmitGenericType#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#1)]  
  
## <a name="compiling-the-code"></a><span data-ttu-id="fc61e-166">Compilando o código</span><span class="sxs-lookup"><span data-stu-id="fc61e-166">Compiling the Code</span></span>  
  
- <span data-ttu-id="fc61e-167">O código contém as instruções `using` C# (`Imports` no Visual Basic) necessárias para a compilação.</span><span class="sxs-lookup"><span data-stu-id="fc61e-167">The code contains the C# `using` statements (`Imports` in Visual Basic) necessary for compilation.</span></span>  
  
- <span data-ttu-id="fc61e-168">Nenhuma referência de assembly adicional é necessária.</span><span class="sxs-lookup"><span data-stu-id="fc61e-168">No additional assembly references are required.</span></span>  
  
- <span data-ttu-id="fc61e-169">Compile o código na linha de comando usando csc.exe, vbc.exe ou cl.exe.</span><span class="sxs-lookup"><span data-stu-id="fc61e-169">Compile the code at the command line using csc.exe, vbc.exe, or cl.exe.</span></span> <span data-ttu-id="fc61e-170">Para compilar o código no Visual Studio, coloque-o em um modelo de projeto de aplicativo do console.</span><span class="sxs-lookup"><span data-stu-id="fc61e-170">To compile the code in Visual Studio, place it in a console application project template.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fc61e-171">Consulte também</span><span class="sxs-lookup"><span data-stu-id="fc61e-171">See also</span></span>

- <xref:System.Reflection.Emit.GenericTypeParameterBuilder>
- <span data-ttu-id="fc61e-172">[Usando a emissão de reflexão](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/3y322t50(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="fc61e-172">[Using Reflection Emit](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/3y322t50(v=vs.100))</span></span>
- <span data-ttu-id="fc61e-173">[Cenários de assemblies dinâmicos para a emissão de reflexão](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/tt9483fk(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="fc61e-173">[Reflection Emit Dynamic Assembly Scenarios](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/tt9483fk(v=vs.100))</span></span>
