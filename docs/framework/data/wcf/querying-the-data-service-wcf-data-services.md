---
title: "Consultando o serviço de dados (WCF Data Services)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
- WCF Data Services, accessing data
ms.assetid: 823e9444-27aa-4f1f-be8e-0486d67f54c0
caps.latest.revision: "7"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 0b6223cd35edc4798a85d7cd89ea47292f4b320c
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/21/2017
---
# <a name="querying-the-data-service-wcf-data-services"></a><span data-ttu-id="5c004-102">Consultando o serviço de dados (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="5c004-102">Querying the Data Service (WCF Data Services)</span></span>
<span data-ttu-id="5c004-103">A biblioteca de cliente [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] permite executar consultas em um serviço de dados usando os padrões familiares de programação [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)], incluindo LINK (consulta integrada à linguagem).</span><span class="sxs-lookup"><span data-stu-id="5c004-103">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to execute queries against a data service by using familiar [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] programming patterns, including using language integrated query (LINQ).</span></span> <span data-ttu-id="5c004-104">A biblioteca de cliente converte uma consulta, que é definida no cliente como uma instância da classe <xref:System.Data.Services.Client.DataServiceQuery%601>, em uma mensagem de solicitação HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="5c004-104">The client library translates a query, which is defined on the client as an instance of the <xref:System.Data.Services.Client.DataServiceQuery%601> class, into an HTTP GET request message.</span></span> <span data-ttu-id="5c004-105">A biblioteca recebe a mensagem de resposta e as converte em instâncias de classes de serviço de dados do cliente.</span><span class="sxs-lookup"><span data-stu-id="5c004-105">The library receives the response message and translates it into instances of client data service classes.</span></span> <span data-ttu-id="5c004-106">Essas classes são rastreadas pelo <xref:System.Data.Services.Client.DataServiceContext> ao qual o <xref:System.Data.Services.Client.DataServiceQuery%601> pertence.</span><span class="sxs-lookup"><span data-stu-id="5c004-106">These classes are tracked by the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span>  
  
## <a name="data-service-queries"></a><span data-ttu-id="5c004-107">Consultas de serviço de dados</span><span class="sxs-lookup"><span data-stu-id="5c004-107">Data Service Queries</span></span>  
 <span data-ttu-id="5c004-108">A classe genérica <xref:System.Data.Services.Client.DataServiceQuery%601> representa uma consulta que retorna uma coleção de zero ou mais instâncias de tipos de entidades.</span><span class="sxs-lookup"><span data-stu-id="5c004-108">The <xref:System.Data.Services.Client.DataServiceQuery%601> generic class represents a query that returns a collection of zero or more entity type instances.</span></span> <span data-ttu-id="5c004-109">Uma consulta do serviço de dados sempre pertence a um contexto de serviço de dados existente.</span><span class="sxs-lookup"><span data-stu-id="5c004-109">A data service query always belongs to an existing data service context.</span></span> <span data-ttu-id="5c004-110">Esse contexto mantém as informações do URI de serviço e de metadados necessárias para compor e executar a consulta.</span><span class="sxs-lookup"><span data-stu-id="5c004-110">This context maintains the service URI and metadata information that is required to compose and execute the query.</span></span>  
  
 <span data-ttu-id="5c004-111">Quando você usa o **adicionar referência de serviço** caixa de diálogo para adicionar um serviço de dados para um [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]-clientes baseados no aplicativo, uma classe de contêiner de entidade é criado que herda o <xref:System.Data.Services.Client.DataServiceContext> classe.</span><span class="sxs-lookup"><span data-stu-id="5c004-111">When you use the **Add Service Reference** dialog to add a data service to a [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]-based client application, an entity container class is created that inherits from the <xref:System.Data.Services.Client.DataServiceContext> class.</span></span> <span data-ttu-id="5c004-112">Essa classe inclui as propriedades que retornam instâncias <xref:System.Data.Services.Client.DataServiceQuery%601> tipadas.</span><span class="sxs-lookup"><span data-stu-id="5c004-112">This class includes properties that return typed <xref:System.Data.Services.Client.DataServiceQuery%601> instances.</span></span> <span data-ttu-id="5c004-113">Existe uma propriedade para cada conjunto de entidades que o serviço de dados expõe.</span><span class="sxs-lookup"><span data-stu-id="5c004-113">There is one property for each entity set that the data service exposes.</span></span> <span data-ttu-id="5c004-114">Essas propriedades facilitam a criação de uma instância <xref:System.Data.Services.Client.DataServiceQuery%601>tipada.</span><span class="sxs-lookup"><span data-stu-id="5c004-114">These properties make it easier to create an instance of a typed <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>  
  
 <span data-ttu-id="5c004-115">Uma consulta é executada nos seguintes cenários:</span><span class="sxs-lookup"><span data-stu-id="5c004-115">A query is executed in the following scenarios:</span></span>  
  
-   <span data-ttu-id="5c004-116">Quando os resultados são enumerados implicitamente, como:</span><span class="sxs-lookup"><span data-stu-id="5c004-116">When results are enumerated implicitly, such as:</span></span>  
  
    -   <span data-ttu-id="5c004-117">Quando uma propriedade da classe <xref:System.Data.Services.Client.DataServiceContext> que representa o conjunto de entidades é enumerada, como durante um loop de `foreach` (C#) ou de `For Each` ([!INCLUDE[vbprvb](../../../../includes/vbprvb-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="5c004-117">When a property on the <xref:System.Data.Services.Client.DataServiceContext> that represents and entity set is enumerated, such as during a `foreach` (C#) or `For Each` ([!INCLUDE[vbprvb](../../../../includes/vbprvb-md.md)]) loop.</span></span>  
  
    -   <span data-ttu-id="5c004-118">Quando a consulta é atribuída a uma coleção `List`.</span><span class="sxs-lookup"><span data-stu-id="5c004-118">When the query is assigned to a `List` collection.</span></span>  
  
-   <span data-ttu-id="5c004-119">Quando o método <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> ou <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> é chamado explicitamente.</span><span class="sxs-lookup"><span data-stu-id="5c004-119">When the <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> or <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> method is explicitly called.</span></span>  
  
-   <span data-ttu-id="5c004-120">Quando um operador de execução de consulta LINQ, como <xref:System.Linq.Enumerable.First%2A> ou <xref:System.Linq.Enumerable.Single%2A>, é chamado.</span><span class="sxs-lookup"><span data-stu-id="5c004-120">When a LINQ query execution operator, such as <xref:System.Linq.Enumerable.First%2A> or <xref:System.Linq.Enumerable.Single%2A> is called.</span></span>  
  
 <span data-ttu-id="5c004-121">A consulta a seguir, quando executada, retorna todas as entidades `Customers` do serviço de dados Northwind:</span><span class="sxs-lookup"><span data-stu-id="5c004-121">The following query, when it is executed, returns all `Customers` entities in the Northwind data service:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#getallcustomersspecific)]  
 [!code-vb[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#getallcustomersspecific)]  
  
 <span data-ttu-id="5c004-122">Para obter mais informações, consulte [como: executar consultas de serviço de dados](../../../../docs/framework/data/wcf/how-to-execute-data-service-queries-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5c004-122">For more information, see [How to: Execute Data Service Queries](../../../../docs/framework/data/wcf/how-to-execute-data-service-queries-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="5c004-123">O [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] cliente dá suporte a consultas para objetos de associação tardia, como quando você usa o *dinâmico* tipo em c#.</span><span class="sxs-lookup"><span data-stu-id="5c004-123">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client supports queries for late-bound objects, such as when you use the *dynamic* type in C#.</span></span> <span data-ttu-id="5c004-124">No entanto, por questões de desempenho, você sempre deve compor consultas fortemente tipadas no serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="5c004-124">However, for performance reasons you should always compose strongly-typed queries against the data service.</span></span> <span data-ttu-id="5c004-125">O cliente não dá suporte ao tipo <xref:System.Tuple> e a objetos dinâmicos.</span><span class="sxs-lookup"><span data-stu-id="5c004-125">The <xref:System.Tuple> type and dynamic objects are not supported by the client.</span></span>  
  
## <a name="linq-queries"></a><span data-ttu-id="5c004-126">Consultas LINQ</span><span class="sxs-lookup"><span data-stu-id="5c004-126">LINQ Queries</span></span>  
 <span data-ttu-id="5c004-127">Porque o <xref:System.Data.Services.Client.DataServiceQuery%601> classe implementa o <xref:System.Linq.IQueryable%601> interface definida pelo LINQ, o [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] biblioteca de cliente é capaz de transformar consultas LINQ em dados do conjunto de entidades em um URI que representa uma expressão de consulta avaliada em relação um serviço de dados recurso.</span><span class="sxs-lookup"><span data-stu-id="5c004-127">Because the <xref:System.Data.Services.Client.DataServiceQuery%601> class implements the <xref:System.Linq.IQueryable%601> interface defined by LINQ, the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library is able to transform LINQ queries against entity set data into a URI that represents a query expression evaluated against a data service resource.</span></span> <span data-ttu-id="5c004-128">O exemplo a seguir é uma consulta LINQ que equivale à classe <xref:System.Data.Services.Client.DataServiceQuery%601> anterior que retorna `Orders` com um custo de frete superior a US$ 30 e ordena os resultados por custo de frete:</span><span class="sxs-lookup"><span data-stu-id="5c004-128">The following example is a LINQ query that is equivalent to the previous <xref:System.Data.Services.Client.DataServiceQuery%601> that returns `Orders` that have a freight cost of more than $30 and orders the results by the freight cost:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addqueryoptionslinqspecific)]  
 [!code-vb[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addqueryoptionslinqspecific)]  
  
 <span data-ttu-id="5c004-129">Esta consulta LINQ é convertida na seguinte consulta de URI que é executado em relação a Northwind com base em [quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md) serviço de dados:</span><span class="sxs-lookup"><span data-stu-id="5c004-129">This LINQ query is translated into the following query URI that is executed against the Northwind-based [quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md) data service:</span></span>  
  
```  
http://localhost:12345/Northwind.svc/Orders?Orderby=ShippedDate&?filter=Freight gt 30  
```  
  
> [!NOTE]
>  <span data-ttu-id="5c004-130">O conjunto de consultas que podem ser expressas na sintaxe LINQ é mais amplo do que as consultas permitidas na sintaxe URI baseada em REST (Representational State Transfer).</span><span class="sxs-lookup"><span data-stu-id="5c004-130">The set of queries expressible in the LINQ syntax is broader than those enabled in the representational state transfer (REST)-based URI syntax that is used by data services.</span></span> <span data-ttu-id="5c004-131">Uma classe <xref:System.NotSupportedException> é gerada quando a consulta não pode ser mapeada para um URI no serviço de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="5c004-131">A <xref:System.NotSupportedException> is raised when the query cannot be mapped to a URI in the target data service.</span></span>  
  
 <span data-ttu-id="5c004-132">Para obter mais informações, consulte [considerações sobre o LINQ](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5c004-132">For more information, see [LINQ Considerations](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span></span>  
  
## <a name="adding-query-options"></a><span data-ttu-id="5c004-133">Adicionando opções de consulta</span><span class="sxs-lookup"><span data-stu-id="5c004-133">Adding Query Options</span></span>  
 <span data-ttu-id="5c004-134">As consultas de serviço de dados dão suporte a todas as opções de consulta que o componente [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]s fornece.</span><span class="sxs-lookup"><span data-stu-id="5c004-134">Data service queries support all the query options that [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]s provides.</span></span> <span data-ttu-id="5c004-135">Chame o método <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> para acrescentar opções de consulta a uma instância <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="5c004-135">You call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method to append query options to a <xref:System.Data.Services.Client.DataServiceQuery%601> instance.</span></span> <span data-ttu-id="5c004-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> retorna uma nova instância <xref:System.Data.Services.Client.DataServiceQuery%601>, que equivale à consulta original, mas com o novo conjunto de opções de consulta.</span><span class="sxs-lookup"><span data-stu-id="5c004-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> returns a new <xref:System.Data.Services.Client.DataServiceQuery%601> instance that is equivalent to the original query but with the new query option set.</span></span> <span data-ttu-id="5c004-137">A consulta a seguir, quando executada, retorna `Orders`, que são filtrados pelo valor `Freight` e ordenados por `OrderID`, em ordem decrescente:</span><span class="sxs-lookup"><span data-stu-id="5c004-137">The following query, when executed, returns `Orders` that are filtered by the `Freight` value and ordered by the `OrderID`, descending:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addqueryoptionsspecific)]  
 [!code-vb[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addqueryoptionsspecific)]  
  
 <span data-ttu-id="5c004-138">Você pode usar a opção de consulta `$orderby` para ordenar e filtrar uma consulta com base em uma única propriedade, como no exemplo a seguir, que filtra e ordena os `Orders` retornados com base no valor da propriedade `Freight`:</span><span class="sxs-lookup"><span data-stu-id="5c004-138">You can use the `$orderby` query option to both order and filter a query based on a single property, as in the following example that filters and orders the returned `Orders` objects based on the value of the `Freight` property:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#orderwithfilter)]
 [!code-vb[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#orderwithfilter)]  
  
 <span data-ttu-id="5c004-139">Você pode chamar o método <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> consecutivamente para construir expressões de consulta complexas.</span><span class="sxs-lookup"><span data-stu-id="5c004-139">You can call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method consecutively to construct complex query expressions.</span></span> <span data-ttu-id="5c004-140">Para obter mais informações, consulte [como: adicionar opções de consulta para uma consulta de serviço de dados](../../../../docs/framework/data/wcf/how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5c004-140">For more information, see [How to: Add Query Options to a Data Service Query](../../../../docs/framework/data/wcf/how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="5c004-141">As opções de consulta oferecem uma outra maneira de expressar os componentes sintáticos de uma consulta LINQ.</span><span class="sxs-lookup"><span data-stu-id="5c004-141">Query options give you another way to express the syntactic components of a LINQ query.</span></span> <span data-ttu-id="5c004-142">Para obter mais informações, consulte [considerações sobre o LINQ](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5c004-142">For more information, see [LINQ Considerations](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5c004-143">A opção de consulta `$select` não pode ser adicionada a um URI de consulta usando o método <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>.</span><span class="sxs-lookup"><span data-stu-id="5c004-143">The `$select` query option cannot be added to a query URI by using the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method.</span></span> <span data-ttu-id="5c004-144">Recomendamos usar o método LINQ <xref:System.Linq.Enumerable.Select%2A> para que o cliente gere a opção de consulta `$select` no URI de solicitação.</span><span class="sxs-lookup"><span data-stu-id="5c004-144">We recommend that you use the LINQ <xref:System.Linq.Enumerable.Select%2A> method to have the client generate the `$select` query option in the request URI.</span></span>  
  
<a name="executingQueries"></a>   
## <a name="client-versus-server-execution"></a><span data-ttu-id="5c004-145">Execução do cliente e execução do servidor</span><span class="sxs-lookup"><span data-stu-id="5c004-145">Client versus Server Execution</span></span>  
 <span data-ttu-id="5c004-146">O cliente executa uma consulta em duas partes.</span><span class="sxs-lookup"><span data-stu-id="5c004-146">The client executes a query in two parts.</span></span> <span data-ttu-id="5c004-147">Sempre que possível, as expressões em uma consulta são avaliadas primeiro no cliente; em seguida, uma consulta baseada em URI é gerada e enviada ao serviço de dados para avaliação em relação aos dados no serviço.</span><span class="sxs-lookup"><span data-stu-id="5c004-147">Whenever possible, expressions in a query are first evaluated on the client, and then a URI-based query is generated and sent to the data service for evaluation against data in the service.</span></span> <span data-ttu-id="5c004-148">Considere a seguinte consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="5c004-148">Consider the following LINQ query:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#linqqueryclientevalspecific)]  
 [!code-vb[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#linqqueryclientevalspecific)]  
  
 <span data-ttu-id="5c004-149">Neste exemplo, a expressão `(basePrice – (basePrice * discount))` é avaliada no cliente.</span><span class="sxs-lookup"><span data-stu-id="5c004-149">In this example, the expression `(basePrice – (basePrice * discount))` is evaluated on the client.</span></span> <span data-ttu-id="5c004-150">Por essa razão, o URI de consulta real `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)`, que é enviado para o serviço de dados, contém o valor decimal já calculado de `90` na cláusula de filtro.</span><span class="sxs-lookup"><span data-stu-id="5c004-150">Because of this, the actual query URI `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` that is sent to the data service contains the already calculated decimal value of `90` in the filter clause.</span></span> <span data-ttu-id="5c004-151">Outras partes da expressão de filtragem, incluindo a expressão da subcadeia de caracteres, são avaliadas pelo serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="5c004-151">The other parts of the filtering expression, including the substring expression, are evaluated by the data service.</span></span> <span data-ttu-id="5c004-152">As expressões que são avaliadas no cliente seguem a semântica CLR (Common Language Runtime), enquanto as expressões enviadas para o serviço de dados dependem da implementação do serviço de dados do protocolo [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5c004-152">Expressions that are evaluated on the client follow common language runtime (CLR) semantics, while expressions sent to the data service rely on the data service implementation of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Protocol.</span></span> <span data-ttu-id="5c004-153">Você também deve estar ciente dos cenários onde essa avaliação separada pode causar resultados inesperados, por exemplo, quando o cliente e o serviço executam avaliações com base na hora em fusos horários diferentes.</span><span class="sxs-lookup"><span data-stu-id="5c004-153">You should also be aware of scenarios where this separate evaluation may cause unexpected results, such as when both the client and service perform time-based evaluations in different time zones.</span></span>  
  
## <a name="query-responses"></a><span data-ttu-id="5c004-154">Respostas de consulta</span><span class="sxs-lookup"><span data-stu-id="5c004-154">Query Responses</span></span>  
 <span data-ttu-id="5c004-155">Quando executada, a classe <xref:System.Data.Services.Client.DataServiceQuery%601> retorna <xref:System.Collections.Generic.IEnumerable%601> do tipo de entidade solicitado.</span><span class="sxs-lookup"><span data-stu-id="5c004-155">When executed, the <xref:System.Data.Services.Client.DataServiceQuery%601> returns an <xref:System.Collections.Generic.IEnumerable%601> of the requested entity type.</span></span> <span data-ttu-id="5c004-156">Esse resultado da consulta pode ser convertido em um objeto <xref:System.Data.Services.Client.QueryOperationResponse%601>, como no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="5c004-156">This query result can be cast to a <xref:System.Data.Services.Client.QueryOperationResponse%601> object, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#getresponsespecific)]
 [!code-vb[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#getresponsespecific)]  
  
 <span data-ttu-id="5c004-157">As instâncias de tipos de entidade que representam entidades no serviço de dados são criadas no cliente por um processo chamado materialização de objeto.</span><span class="sxs-lookup"><span data-stu-id="5c004-157">The entity type instances that represent entities in the data service are created on the client by a process called object materialization.</span></span> <span data-ttu-id="5c004-158">Para obter mais informações, consulte [materialização de objetos](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5c004-158">For more information, see [Object Materialization](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md).</span></span> <span data-ttu-id="5c004-159">O objeto <xref:System.Data.Services.Client.QueryOperationResponse%601> implementa <xref:System.Collections.Generic.IEnumerable%601> para fornecer acesso aos resultados da consulta.</span><span class="sxs-lookup"><span data-stu-id="5c004-159">The <xref:System.Data.Services.Client.QueryOperationResponse%601> object implements <xref:System.Collections.Generic.IEnumerable%601> to provide access to the results of the query.</span></span>  
  
 <span data-ttu-id="5c004-160">A classe <xref:System.Data.Services.Client.QueryOperationResponse%601> também possui membros a seguir que permitem acessar informações adicionais sobre um resultado da consulta:</span><span class="sxs-lookup"><span data-stu-id="5c004-160">The <xref:System.Data.Services.Client.QueryOperationResponse%601> also has the following members that enable you to access additional information about a query result:</span></span>  
  
-   <span data-ttu-id="5c004-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A> - obtém um erro gerado pela operação, caso algum tenha ocorrido.</span><span class="sxs-lookup"><span data-stu-id="5c004-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A> - gets an error thrown by the operation, if any has occurred.</span></span>  
  
-   <span data-ttu-id="5c004-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A> - contém a coleção de cabeçalhos de resposta HTTP associados à resposta da consulta.</span><span class="sxs-lookup"><span data-stu-id="5c004-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A> - contains the collection of HTTP response headers associated with the query response.</span></span>  
  
-   <span data-ttu-id="5c004-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A> - obtém a classe <xref:System.Data.Services.Client.DataServiceQuery%601> original que gerou <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span><span class="sxs-lookup"><span data-stu-id="5c004-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A> - gets the original <xref:System.Data.Services.Client.DataServiceQuery%601> that generated the <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span></span>  
  
-   <span data-ttu-id="5c004-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A> - obtém o código de resposta HTTP para a resposta da consulta.</span><span class="sxs-lookup"><span data-stu-id="5c004-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A> - gets the HTTP response code for the query response.</span></span>  
  
-   <span data-ttu-id="5c004-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> - obtém o número total de entidades no conjunto de entidades quando o método <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> foi chamado na classe <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="5c004-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> - gets the total number of entities in the entity set when the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method was called on the <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>  
  
-   <span data-ttu-id="5c004-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A> - retorna um objeto <xref:System.Data.Services.Client.DataServiceQueryContinuation> que contém o URI da próxima página de resultados.</span><span class="sxs-lookup"><span data-stu-id="5c004-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A> - returns a <xref:System.Data.Services.Client.DataServiceQueryContinuation> object that contains the URI of the next page of results.</span></span>  
  
 <span data-ttu-id="5c004-167">Por padrão, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] retorna somente os dados que seja explicitamente selecionados pela consulta URI.</span><span class="sxs-lookup"><span data-stu-id="5c004-167">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] only returns data that is explicitly selected by the query URI.</span></span> <span data-ttu-id="5c004-168">Isso oferece a opção de carregar explicitamente dados adicionais do serviço de dados quando necessário.</span><span class="sxs-lookup"><span data-stu-id="5c004-168">This gives you the option to explicitly load additional data from the data service when it is needed.</span></span> <span data-ttu-id="5c004-169">Uma solicitação será enviada para o serviço de dados toda vez que você carregar explicitamente dados do serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="5c004-169">A request is sent to the data service each time you explicitly load data from the data service.</span></span> <span data-ttu-id="5c004-170">Os dados que podem ser explicitamente carregados incluem entidades relacionadas, dados de respostas paginadas e fluxos de dados binários.</span><span class="sxs-lookup"><span data-stu-id="5c004-170">Data that can be explicitly loaded includes related entities, paged response data, and binary data streams.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5c004-171">Como um serviço de dados pode retornar uma resposta paginada, recomendamos que seu aplicativo use o padrão de programação para manipular uma resposta do serviço de dados paginados.</span><span class="sxs-lookup"><span data-stu-id="5c004-171">Because a data service may return a paged response, we recommend that your application use the programming pattern to handle a paged data service response.</span></span> <span data-ttu-id="5c004-172">Para obter mais informações, consulte [carregar conteúdo adiada](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5c004-172">For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="5c004-173">Para reduzir a quantidade de dados retornada por uma consulta, é possível especificar que apenas determinadas propriedades de uma entidade sejam retornadas na resposta.</span><span class="sxs-lookup"><span data-stu-id="5c004-173">The amount of data returned by a query can also be reduced by specifying that only certain properties of an entity are returned in the response.</span></span> <span data-ttu-id="5c004-174">Para obter mais informações, consulte [projeções de consulta](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5c004-174">For more information, see [Query Projections](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span></span>  
  
## <a name="getting-a-count-of-the-total-number-of-entities-in-the-set"></a><span data-ttu-id="5c004-175">Obtendo uma contagem do número total de entidades no conjunto</span><span class="sxs-lookup"><span data-stu-id="5c004-175">Getting a Count of the Total Number of Entities in the Set</span></span>  
 <span data-ttu-id="5c004-176">Em alguns cenários, é útil saber o número total de entidades em um conjunto de entidades e não simplesmente o número retornado pela consulta.</span><span class="sxs-lookup"><span data-stu-id="5c004-176">In some scenarios, it is helpful to know the total number of entities in an entity set and not merely the number returned by the query.</span></span> <span data-ttu-id="5c004-177">Chame o método <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> em <xref:System.Data.Services.Client.DataServiceQuery%601> para solicitar que essa contagem total de entidades no conjunto seja incluída no resultado da consulta.</span><span class="sxs-lookup"><span data-stu-id="5c004-177">Call the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to request that this total count of entities in the set be included with the query result.</span></span> <span data-ttu-id="5c004-178">Nesse caso, a propriedade <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> da classe <xref:System.Data.Services.Client.QueryOperationResponse%601> retornada retorna o número total de entidades no conjunto.</span><span class="sxs-lookup"><span data-stu-id="5c004-178">In this case, the <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> property of the returned <xref:System.Data.Services.Client.QueryOperationResponse%601> returns the total number of entities in the set.</span></span>  
  
 <span data-ttu-id="5c004-179">Você também pode obter apenas a contagem total de entidades no conjunto como um valor <xref:System.Int32> ou <xref:System.Int64> chamando os métodos <xref:System.Linq.Enumerable.Count%2A> ou <xref:System.Linq.Enumerable.LongCount%2A>, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="5c004-179">You can also get only the total count of entities in the set either as an <xref:System.Int32> or as a <xref:System.Int64> value by calling the <xref:System.Linq.Enumerable.Count%2A> or <xref:System.Linq.Enumerable.LongCount%2A> methods respectively.</span></span> <span data-ttu-id="5c004-180">Quando esses métodos são chamados, uma classe <xref:System.Data.Services.Client.QueryOperationResponse%601> não é retornada; somente o valor da contagem é retornado.</span><span class="sxs-lookup"><span data-stu-id="5c004-180">When these methods are called, a <xref:System.Data.Services.Client.QueryOperationResponse%601> is not returned; only the count value is returned.</span></span> <span data-ttu-id="5c004-181">Para obter mais informações, consulte [como: determinar o número de entidades retornadas por uma consulta](../../../../docs/framework/data/wcf/number-of-entities-returned-by-a-query-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="5c004-181">For more information, see [How to: Determine the Number of Entities Returned by a Query](../../../../docs/framework/data/wcf/number-of-entities-returned-by-a-query-wcf.md).</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="5c004-182">Nesta seção</span><span class="sxs-lookup"><span data-stu-id="5c004-182">In This Section</span></span>  
 [<span data-ttu-id="5c004-183">Projeções de consulta</span><span class="sxs-lookup"><span data-stu-id="5c004-183">Query Projections</span></span>](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)  
  
 [<span data-ttu-id="5c004-184">Materialização de objetos</span><span class="sxs-lookup"><span data-stu-id="5c004-184">Object Materialization</span></span>](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md)  
  
 <span data-ttu-id="5c004-185">[LINQ Considerations](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md) (Considerações sobre LINQ)</span><span class="sxs-lookup"><span data-stu-id="5c004-185">[LINQ Considerations](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md)</span></span>  
  
 <span data-ttu-id="5c004-186">[How to: Execute Data Service Queries](../../../../docs/framework/data/wcf/how-to-execute-data-service-queries-wcf-data-services.md) (Como executar consultas de serviço de dados)</span><span class="sxs-lookup"><span data-stu-id="5c004-186">[How to: Execute Data Service Queries](../../../../docs/framework/data/wcf/how-to-execute-data-service-queries-wcf-data-services.md)</span></span>  
  
 [<span data-ttu-id="5c004-187">Como: adicionar opções de consulta para uma consulta de serviço de dados</span><span class="sxs-lookup"><span data-stu-id="5c004-187">How to: Add Query Options to a Data Service Query</span></span>](../../../../docs/framework/data/wcf/how-to-add-query-options-to-a-data-service-query-wcf-data-services.md)  
  
 [<span data-ttu-id="5c004-188">Como: determinar o número de entidades retornadas por uma consulta</span><span class="sxs-lookup"><span data-stu-id="5c004-188">How to: Determine the Number of Entities Returned by a Query</span></span>](../../../../docs/framework/data/wcf/number-of-entities-returned-by-a-query-wcf.md)  
  
 [<span data-ttu-id="5c004-189">Como: especificar as credenciais do cliente para uma solicitação de serviço de dados</span><span class="sxs-lookup"><span data-stu-id="5c004-189">How to: Specify Client Credentials for a Data Service Request</span></span>](../../../../docs/framework/data/wcf/specify-client-creds-for-a-data-service-request-wcf.md)  
  
 [<span data-ttu-id="5c004-190">Como: definir os cabeçalhos da solicitação do cliente</span><span class="sxs-lookup"><span data-stu-id="5c004-190">How to: Set Headers in the Client Request</span></span>](../../../../docs/framework/data/wcf/how-to-set-headers-in-the-client-request-wcf-data-services.md)  
  
 [<span data-ttu-id="5c004-191">Como: projeto resultados da consulta</span><span class="sxs-lookup"><span data-stu-id="5c004-191">How to: Project Query Results</span></span>](../../../../docs/framework/data/wcf/how-to-project-query-results-wcf-data-services.md)  
  
## <a name="see-also"></a><span data-ttu-id="5c004-192">Consulte também</span><span class="sxs-lookup"><span data-stu-id="5c004-192">See Also</span></span>  
 <span data-ttu-id="5c004-193">[WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md) (Biblioteca de clientes do WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="5c004-193">[WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)</span></span>
