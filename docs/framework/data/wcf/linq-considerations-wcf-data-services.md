---
title: Considerações sobre o LINQ (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, LINQ
- querying the data service [WCF Data Services]
- WCF Data Services, querying
ms.assetid: cc4ec9e9-348f-42a6-a78e-1cd40e370656
ms.openlocfilehash: 6c0cd7dcebb46b5408079848862ef4da1bb7f0a6
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79174661"
---
# <a name="linq-considerations-wcf-data-services"></a><span data-ttu-id="31646-102">Considerações sobre o LINQ (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="31646-102">LINQ Considerations (WCF Data Services)</span></span>
<span data-ttu-id="31646-103">Este tópico fornece informações sobre a forma como as consultas LINQ são compostas e executadas quando você está usando o cliente WCF Data Services e limitações de usar linq para consultar um serviço de dados que implementa o OData (Open Data Protocol).</span><span class="sxs-lookup"><span data-stu-id="31646-103">This topic provides information about the way in which LINQ queries are composed and executed when you are using the WCF Data Services client and limitations of using LINQ to query a data service that implements the Open Data Protocol (OData).</span></span> <span data-ttu-id="31646-104">Para obter mais informações sobre a composição e execução de consultas contra um serviço de dados baseado em OData, consulte [Consultando o Serviço de Dados](querying-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="31646-104">For more information about composing and executing queries against an OData-based data service, see [Querying the Data Service](querying-the-data-service-wcf-data-services.md).</span></span>  
  
## <a name="composing-linq-queries"></a><span data-ttu-id="31646-105">Compondo consultas LINQ</span><span class="sxs-lookup"><span data-stu-id="31646-105">Composing LINQ Queries</span></span>  
 <span data-ttu-id="31646-106">O LINQ permite compor consultas em uma coleção de objetos que implementam o <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="31646-106">LINQ enables you to compose queries against a collection of objects that implements <xref:System.Collections.Generic.IEnumerable%601>.</span></span> <span data-ttu-id="31646-107">Tanto a caixa de diálogo **Adicionar referência de serviço** no Visual Studio quanto a ferramenta DataSvcUtil.exe são <xref:System.Data.Services.Client.DataServiceContext>usadas para gerar uma representação de um serviço OData como uma classe de contêiner de entidade que herda, bem como objetos que representam as entidades devolvidas nos feeds.</span><span class="sxs-lookup"><span data-stu-id="31646-107">Both the **Add Service Reference** dialog box in Visual Studio and the DataSvcUtil.exe tool are used to generate a representation of an OData service as an entity container class that inherits from <xref:System.Data.Services.Client.DataServiceContext>, as well as objects that represent the entities returned in feeds.</span></span> <span data-ttu-id="31646-108">Essas ferramentas também geram propriedades na classe do contêiner de entidade para as coleções expostas como feeds pelo serviço.</span><span class="sxs-lookup"><span data-stu-id="31646-108">These tools also generate properties on the entity container class for the collections that are exposed as feeds by the service.</span></span> <span data-ttu-id="31646-109">Cada uma dessas propriedades da classe que encapsula o retorno do serviço de dados retorna um <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="31646-109">Each of these properties of the class that encapsulates the data service return a <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span> <span data-ttu-id="31646-110">Como a classe <xref:System.Data.Services.Client.DataServiceQuery%601> implementa a interface do <xref:System.Linq.IQueryable%601> definida pelo LINQ, você pode compor uma consulta LINQ com os feeds expostos pelo serviço de dados, que são traduzidos pela biblioteca de cliente em um URI de solicitação de consulta que é enviado para o serviço de dados em execução.</span><span class="sxs-lookup"><span data-stu-id="31646-110">Because the <xref:System.Data.Services.Client.DataServiceQuery%601> class implements the <xref:System.Linq.IQueryable%601> interface defined by LINQ, you can compose a LINQ query against feeds exposed by the data service, which are translated by the client library into a query request URI that is sent to the data service on execution.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="31646-111">O conjunto de consultas expressas na sintaxe LINQ é mais amplo do que os habilitados na sintaxe URI que é usada pelos serviços de dados OData.</span><span class="sxs-lookup"><span data-stu-id="31646-111">The set of queries expressible in the LINQ syntax is broader than those enabled in the URI syntax that is used by OData data services.</span></span> <span data-ttu-id="31646-112">Uma classe <xref:System.NotSupportedException> é gerada quando a consulta não pode ser mapeada para um URI no serviço de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="31646-112">A <xref:System.NotSupportedException> is raised when the query cannot be mapped to a URI in the target data service.</span></span> <span data-ttu-id="31646-113">Para obter mais informações, consulte os [Métodos LINQ não suportados](linq-considerations-wcf-data-services.md#unsupportedMethods) neste tópico.</span><span class="sxs-lookup"><span data-stu-id="31646-113">For more information, see the [Unsupported LINQ Methods](linq-considerations-wcf-data-services.md#unsupportedMethods) in this topic.</span></span>  
  
 <span data-ttu-id="31646-114">O exemplo a seguir é uma consulta LINQ que retorna `Orders` que têm um custo de frete mais que US$ 30 e classifica os resultados por data de envio, começando com a data de envio mais recente:</span><span class="sxs-lookup"><span data-stu-id="31646-114">The following example is a LINQ query that returns `Orders` that have a freight cost of more than $30 and sorts the results by the shipping date, starting with the latest ship date:</span></span>  
  
[!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionslinqspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionslinqspecific)]
  
 <span data-ttu-id="31646-115">Esta consulta LINQ é traduzida para o URI de consulta a seguir que é executado no serviço de dados [Quickstart](quickstart-wcf-data-services.md) baseado no Northwind:</span><span class="sxs-lookup"><span data-stu-id="31646-115">This LINQ query is translated into the following query URI that is executed against the Northwind-based [quickstart](quickstart-wcf-data-services.md) data service:</span></span>  
  
```http
http://localhost:12345/Northwind.svc/Orders?Orderby=ShippedDate&?filter=Freight gt 30  
```  
  
 <span data-ttu-id="31646-116">Para obter informações mais gerais sobre linq, consulte [A Consulta Integrada ao Idioma (LINQ) - C#](../../../csharp/programming-guide/concepts/linq/index.md) ou Consulta Integrada à Linguagem [(LINQ) - Visual Basic](../../../visual-basic/programming-guide/concepts/linq/index.md).</span><span class="sxs-lookup"><span data-stu-id="31646-116">For more general information about LINQ, see [Language-Integrated Query (LINQ) - C#](../../../csharp/programming-guide/concepts/linq/index.md) or [Language-Integrated Query (LINQ) - Visual Basic](../../../visual-basic/programming-guide/concepts/linq/index.md).</span></span>  
  
 <span data-ttu-id="31646-117">O LINQ permite compor consultas usando tanto a sintaxe de consulta declarativa específica à linguagem, mostrada no exemplo anterior, bem como um conjunto de métodos de consulta conhecidos como operadores de consulta padrão.</span><span class="sxs-lookup"><span data-stu-id="31646-117">LINQ enables you to compose queries by using both the language-specific declarative query syntax, shown in the previous example, as well as a set of query methods known as standard query operators.</span></span> <span data-ttu-id="31646-118">Uma consulta equivalente ao exemplo anterior pode ser composta usando somente a sintaxe baseada em método, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="31646-118">An equivalent query to the previous example can be composed by using only the method-based syntax, as shown the following example:</span></span>  
  
[!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqExpressionSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionslinqexpressionspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsLinqExpressionSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionslinqexpressionspecific)]
  
 <span data-ttu-id="31646-119">O cliente WCF Data Services é capaz de traduzir ambos os tipos de consultas compostas em um URI de consulta, e você pode estender uma consulta LINQ anexando métodos de consulta a uma expressão de consulta.</span><span class="sxs-lookup"><span data-stu-id="31646-119">The WCF Data Services client is able to translate both kinds of composed queries into a query URI, and you can extend a LINQ query by appending query methods to a query expression.</span></span> <span data-ttu-id="31646-120">Quando você compõe consultas LINQ acrescentando a sintaxe de método a uma expressão de consulta ou a um <xref:System.Data.Services.Client.DataServiceQuery%601>, as operações são adicionadas ao URI de consulta na ordem em que os métodos são chamados.</span><span class="sxs-lookup"><span data-stu-id="31646-120">When you compose LINQ queries by appending method syntax to a query expression or a <xref:System.Data.Services.Client.DataServiceQuery%601>, the operations are added to the query URI in the order in which methods are called.</span></span> <span data-ttu-id="31646-121">Isso é equivalente a chamar o método <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> para adicionar cada opção de consulta ao URI de consulta.</span><span class="sxs-lookup"><span data-stu-id="31646-121">This is equivalent to calling the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method to add each query option to the query URI.</span></span>  
  
## <a name="executing-linq-queries"></a><span data-ttu-id="31646-122">Executando consultas LINQ</span><span class="sxs-lookup"><span data-stu-id="31646-122">Executing LINQ Queries</span></span>  
 <span data-ttu-id="31646-123">Determinados métodos de consulta LINQ, como <xref:System.Linq.Enumerable.First%60%601%28System.Collections.Generic.IEnumerable%7B%60%600%7D%29> ou <xref:System.Linq.Enumerable.Single%60%601%28System.Collections.Generic.IEnumerable%7B%60%600%7D%29>, quando acrescentados à consulta, fazem com que a consulta seja executada.</span><span class="sxs-lookup"><span data-stu-id="31646-123">Certain LINQ query methods, such as <xref:System.Linq.Enumerable.First%60%601%28System.Collections.Generic.IEnumerable%7B%60%600%7D%29> or <xref:System.Linq.Enumerable.Single%60%601%28System.Collections.Generic.IEnumerable%7B%60%600%7D%29>, when appended to the query, cause the query to be executed.</span></span> <span data-ttu-id="31646-124">Uma consulta também é executada quando os resultados são enumerados implicitamente, como em um loop `foreach` ou quando a consulta é atribuída a uma coleção `List`.</span><span class="sxs-lookup"><span data-stu-id="31646-124">A query is also executed when results are enumerated implicitly, such as during a `foreach` loop or when the query is assigned to a `List` collection.</span></span> <span data-ttu-id="31646-125">Para obter mais informações, consulte [Consultando o Serviço de Dados](querying-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="31646-125">For more information, see [Querying the Data Service](querying-the-data-service-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="31646-126">O cliente executa uma consulta LINQ em duas partes.</span><span class="sxs-lookup"><span data-stu-id="31646-126">The client executes a LINQ query in two parts.</span></span> <span data-ttu-id="31646-127">Sempre que possível, as expressões LINQ em uma consulta são avaliadas primeiro no cliente e, em seguida, uma consulta baseada em URI é gerada e enviada ao serviço de dados para avaliação em relação aos dados no serviço.</span><span class="sxs-lookup"><span data-stu-id="31646-127">Whenever possible, LINQ expressions in a query are first evaluated on the client, and then a URI-based query is generated and sent to the data service for evaluation against data in the service.</span></span> <span data-ttu-id="31646-128">Para obter mais informações, consulte a seção [Client versus Server Execution](querying-the-data-service-wcf-data-services.md#executingQueries) in [Consultando o Serviço de Dados](querying-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="31646-128">For more information, see the section [Client versus Server Execution](querying-the-data-service-wcf-data-services.md#executingQueries) in [Querying the Data Service](querying-the-data-service-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="31646-129">Quando uma consulta LINQ não pode ser traduzida em um URI de consulta compatível com OData, uma exceção é levantada quando a execução é tentada.</span><span class="sxs-lookup"><span data-stu-id="31646-129">When a LINQ query cannot be translated in an OData-compliant query URI, an exception is raised when execution is attempted.</span></span> <span data-ttu-id="31646-130">Para obter mais informações, consulte [Consultando o Serviço de Dados](querying-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="31646-130">For more information, see [Querying the Data Service](querying-the-data-service-wcf-data-services.md).</span></span>  
  
## <a name="linq-query-examples"></a><span data-ttu-id="31646-131">Exemplos de consulta LINQ</span><span class="sxs-lookup"><span data-stu-id="31646-131">LINQ Query Examples</span></span>  
 <span data-ttu-id="31646-132">Os exemplos nas seções a seguir demonstram os tipos de consultas LINQ que podem ser executadas contra um serviço OData.</span><span class="sxs-lookup"><span data-stu-id="31646-132">The examples in the following sections demonstrate the kinds of LINQ queries that can be executed against an OData service.</span></span>  
  
<a name="filtering"></a>
### <a name="filtering"></a><span data-ttu-id="31646-133">Filtragem</span><span class="sxs-lookup"><span data-stu-id="31646-133">Filtering</span></span>  
 <span data-ttu-id="31646-134">Os exemplos de consulta LINQ desta seção filtram os dados no feed retornado pelo serviço.</span><span class="sxs-lookup"><span data-stu-id="31646-134">The LINQ query examples in this section filter data in the feed returned by the service.</span></span>  
  
 <span data-ttu-id="31646-135">Os exemplos a seguir são consultas equivalentes que filtram as entidades `Orders` retornadas, de forma que somente pedidos com um frete maior que US$ 30 sejam retornados:</span><span class="sxs-lookup"><span data-stu-id="31646-135">The following examples are equivalent queries that filter the returned `Orders` entities so that only orders with a freight cost greater than $30 are returned:</span></span>  
  
- <span data-ttu-id="31646-136">Usando a sintaxe de consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="31646-136">Using LINQ query syntax:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqWhereClauseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqwhereclausespecific)]
[!code-vb[Astoria Northwind Client#LinqWhereClauseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqwhereclausespecific)]
  
- <span data-ttu-id="31646-137">Usando métodos de consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="31646-137">Using LINQ query methods:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqWhereMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqwheremethodspecific)]
[!code-vb[Astoria Northwind Client#LinqWhereMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqwheremethodspecific)]
  
- <span data-ttu-id="31646-138">A opção `$filter` de cadeia de caracteres de consulta URI:</span><span class="sxs-lookup"><span data-stu-id="31646-138">The URI query string `$filter` option:</span></span>  
  
[!code-csharp[Astoria Northwind Client#ExplicitQueryWhereMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#explicitquerywheremethodspecific)]
[!code-vb[Astoria Northwind Client#ExplicitQueryWhereMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#explicitquerywheremethodspecific)]
  
 <span data-ttu-id="31646-139">Todos os exemplos anteriores são convertidos no URI de consulta: `http://localhost:12345/northwind.svc/Orders()?$filter=Freight gt 30M`.</span><span class="sxs-lookup"><span data-stu-id="31646-139">All of the previous examples are translated to the query URI: `http://localhost:12345/northwind.svc/Orders()?$filter=Freight gt 30M`.</span></span>  
  
<a name="sorting"></a>
### <a name="sorting"></a><span data-ttu-id="31646-140">Classificação</span><span class="sxs-lookup"><span data-stu-id="31646-140">Sorting</span></span>  
 <span data-ttu-id="31646-141">Os exemplos a seguir mostram consultas equivalentes que classificam os dados retornados pelo nome da empresa e o código postal, em ordem decrescente:</span><span class="sxs-lookup"><span data-stu-id="31646-141">The following examples show equivalent queries that sort returned data both by the company name and by postal code, descending:</span></span>  
  
- <span data-ttu-id="31646-142">Usando a sintaxe de consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="31646-142">Using LINQ query syntax:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqOrderByClauseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqorderbyclausespecific)]
[!code-vb[Astoria Northwind Client#LinqOrderByClauseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqorderbyclausespecific)]
  
- <span data-ttu-id="31646-143">Usando métodos de consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="31646-143">Using LINQ query methods:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqOrderByMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqorderbymethodspecific)]
[!code-vb[Astoria Northwind Client#LinqOrderByMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqorderbymethodspecific)]
  
- <span data-ttu-id="31646-144">Opção `$orderby` de cadeia de caracteres de consulta URI:</span><span class="sxs-lookup"><span data-stu-id="31646-144">URI query string `$orderby` option):</span></span>  
  
[!code-csharp[Astoria Northwind Client#ExplicitQueryOrderByMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#explicitqueryorderbymethodspecific)]
[!code-vb[Astoria Northwind Client#ExplicitQueryOrderByMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#explicitqueryorderbymethodspecific)]
  
 <span data-ttu-id="31646-145">Todos os exemplos anteriores são convertidos no URI de consulta: `http://localhost:12345/northwind.svc/Customers()?$orderby=CompanyName,PostalCode desc`.</span><span class="sxs-lookup"><span data-stu-id="31646-145">All of the previous examples are translated to the query URI: `http://localhost:12345/northwind.svc/Customers()?$orderby=CompanyName,PostalCode desc`.</span></span>  
  
<a name="projection"></a>
### <a name="projection"></a><span data-ttu-id="31646-146">Projeção</span><span class="sxs-lookup"><span data-stu-id="31646-146">Projection</span></span>  
 <span data-ttu-id="31646-147">Os exemplos a seguir mostram consultas equivalentes que projetam os dados no tipo `CustomerAddress` mais restrito:</span><span class="sxs-lookup"><span data-stu-id="31646-147">The following examples show equivalent queries that project returned data into the narrower `CustomerAddress` type:</span></span>  
  
- <span data-ttu-id="31646-148">Usando a sintaxe de consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="31646-148">Using LINQ query syntax:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqSelectClauseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqselectclausespecific)]
[!code-vb[Astoria Northwind Client#LinqSelectClauseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqselectclausespecific)]
  
- <span data-ttu-id="31646-149">Usando métodos de consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="31646-149">Using LINQ query methods:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqSelectMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqselectmethodspecific)]
[!code-vb[Astoria Northwind Client#LinqSelectMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqselectmethodspecific)]

> [!NOTE]
> <span data-ttu-id="31646-150">A opção de consulta `$select` não pode ser adicionada a um URI de consulta usando o método <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>.</span><span class="sxs-lookup"><span data-stu-id="31646-150">The `$select` query option cannot be added to a query URI by using the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method.</span></span> <span data-ttu-id="31646-151">Recomendamos usar o método LINQ <xref:System.Linq.Enumerable.Select%2A> para que o cliente gere a opção de consulta `$select` no URI de solicitação.</span><span class="sxs-lookup"><span data-stu-id="31646-151">We recommend that you use the LINQ <xref:System.Linq.Enumerable.Select%2A> method to have the client generate the `$select` query option in the request URI.</span></span>  
  
 <span data-ttu-id="31646-152">Os dois exemplos anteriores são convertidos no URI de consulta: `"http://localhost:12345/northwind.svc/Customers()?$filter=Country eq 'GerGerm'&$select=CustomerID,Address,City,Region,PostalCode,Country"`.</span><span class="sxs-lookup"><span data-stu-id="31646-152">Both of the previous examples are translated to the query URI: `"http://localhost:12345/northwind.svc/Customers()?$filter=Country eq 'GerGerm'&$select=CustomerID,Address,City,Region,PostalCode,Country"`.</span></span>  
  
<a name="paging"></a>
### <a name="client-paging"></a><span data-ttu-id="31646-153">Paginação do cliente</span><span class="sxs-lookup"><span data-stu-id="31646-153">Client Paging</span></span>  
 <span data-ttu-id="31646-154">Os exemplos a seguir mostram consultas equivalentes que solicitam uma página de entidades de pedidos classificados, que inclua 25 pedidos, ignorando os primeiros 50 pedidos:</span><span class="sxs-lookup"><span data-stu-id="31646-154">The following examples show equivalent queries that request a page of sorted order entities that includes 25 orders, skipping the first 50 orders:</span></span>  
  
- <span data-ttu-id="31646-155">Aplicando métodos de consulta a uma consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="31646-155">Applying query methods to a LINQ query:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqSkipTakeMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqskiptakemethodspecific)]
[!code-vb[Astoria Northwind Client#LinqSkipTakeMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqskiptakemethodspecific)]
  
- <span data-ttu-id="31646-156">Opções `$skip` e `$top` da cadeia de caracteres da consulta URI:</span><span class="sxs-lookup"><span data-stu-id="31646-156">URI query string `$skip` and `$top` options):</span></span>  
  
[!code-csharp[Astoria Northwind Client#ExplicitQuerySkipTakeMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#explicitqueryskiptakemethodspecific)]
[!code-vb[Astoria Northwind Client#ExplicitQuerySkipTakeMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#explicitqueryskiptakemethodspecific)]
  
 <span data-ttu-id="31646-157">Os dois exemplos anteriores são convertidos no URI de consulta: `http://localhost:12345/northwind.svc/Orders()?$orderby=OrderDate desc&$skip=50&$top=25`.</span><span class="sxs-lookup"><span data-stu-id="31646-157">Both of the previous examples are translated to the query URI: `http://localhost:12345/northwind.svc/Orders()?$orderby=OrderDate desc&$skip=50&$top=25`.</span></span>  
  
<a name="expand"></a>
### <a name="expand"></a><span data-ttu-id="31646-158">Expanda</span><span class="sxs-lookup"><span data-stu-id="31646-158">Expand</span></span>  
 <span data-ttu-id="31646-159">Ao consultar um serviço de dados OData, você pode solicitar que as entidades relacionadas à entidade alvo da consulta sejam incluídas no feed retornado.</span><span class="sxs-lookup"><span data-stu-id="31646-159">When you query an OData data service, you can request that entities related to the entity targeted by the query be included the returned feed.</span></span> <span data-ttu-id="31646-160">O método <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> é chamado no <xref:System.Data.Services.Client.DataServiceQuery%601> do conjunto de entidades definido pela consulta LINQ, com o nome do conjunto de entidades relacionadas fornecido como o parâmetro `path`.</span><span class="sxs-lookup"><span data-stu-id="31646-160">The <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method is called on the <xref:System.Data.Services.Client.DataServiceQuery%601> for the entity set targeted by the LINQ query, with the related entity set name supplied as the `path` parameter.</span></span> <span data-ttu-id="31646-161">Para obter mais informações, consulte [Carregando conteúdo diferido](loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="31646-161">For more information, see [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="31646-162">Os exemplos a seguir mostram maneiras equivalentes de usar o método <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> em uma consulta:</span><span class="sxs-lookup"><span data-stu-id="31646-162">The following examples show equivalent ways to use the <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method in a query:</span></span>  
  
- <span data-ttu-id="31646-163">Na sintaxe de consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="31646-163">In LINQ query syntax:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqQueryExpandSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqqueryexpandspecific)]
[!code-vb[Astoria Northwind Client#LinqQueryExpandSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqqueryexpandspecific)]  
  
- <span data-ttu-id="31646-164">Com métodos de consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="31646-164">With LINQ query methods:</span></span>  

[!code-csharp[Astoria Northwind Client#LinqQueryExpandMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqqueryexpandmethodspecific)]
[!code-vb[Astoria Northwind Client#LinqQueryExpandMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqqueryexpandmethodspecific)]

 <span data-ttu-id="31646-165">Os dois exemplos anteriores são convertidos no URI de consulta: `http://localhost:12345/northwind.svc/Orders()?$filter=CustomerID eq 'ALFKI'&$expand=Order_Details`.</span><span class="sxs-lookup"><span data-stu-id="31646-165">Both of the previous examples are translated to the query URI: `http://localhost:12345/northwind.svc/Orders()?$filter=CustomerID eq 'ALFKI'&$expand=Order_Details`.</span></span>  
  
<a name="unsupportedMethods"></a>
## <a name="unsupported-linq-methods"></a><span data-ttu-id="31646-166">Métodos LINQ sem suporte</span><span class="sxs-lookup"><span data-stu-id="31646-166">Unsupported LINQ Methods</span></span>  
 <span data-ttu-id="31646-167">A tabela a seguir contém as classes de métodos LINQ não suportadas e não podem ser incluídas em uma consulta executada contra um serviço OData:</span><span class="sxs-lookup"><span data-stu-id="31646-167">The following table contains the classes of LINQ methods are not supported and cannot be included in a query executed against an OData service:</span></span>  
  
|<span data-ttu-id="31646-168">Tipo de operação</span><span class="sxs-lookup"><span data-stu-id="31646-168">Operation Type</span></span>|<span data-ttu-id="31646-169">Método sem suporte</span><span class="sxs-lookup"><span data-stu-id="31646-169">Unsupported Method</span></span>|  
|--------------------|------------------------|  
|<span data-ttu-id="31646-170">Operador de conjunto</span><span class="sxs-lookup"><span data-stu-id="31646-170">Set operators</span></span>|<span data-ttu-id="31646-171">Todos os operadores de conjunto não são suportados em um <xref:System.Data.Services.Client.DataServiceQuery%601>, que incluem os seguintes:</span><span class="sxs-lookup"><span data-stu-id="31646-171">All set operators are unsupported against a <xref:System.Data.Services.Client.DataServiceQuery%601>, which included the following:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.All%2A><br />-   <xref:System.Linq.Enumerable.Any%2A><br />-   <xref:System.Linq.Enumerable.Concat%2A><br />-   <xref:System.Linq.Enumerable.DefaultIfEmpty%2A><br />-   <xref:System.Linq.Enumerable.Distinct%2A><br />-   <xref:System.Linq.Enumerable.Except%2A><br />-   <xref:System.Linq.Enumerable.Intersect%2A><br />-   <xref:System.Linq.Enumerable.Union%2A><br />-   <xref:System.Linq.Enumerable.Zip%2A>|  
|<span data-ttu-id="31646-172">Operadores de ordenação</span><span class="sxs-lookup"><span data-stu-id="31646-172">Ordering operators</span></span>|<span data-ttu-id="31646-173">Os seguintes operadores de ordenação que exigem o <xref:System.Collections.Generic.IComparer%601> não são suportados no <xref:System.Data.Services.Client.DataServiceQuery%601>:</span><span class="sxs-lookup"><span data-stu-id="31646-173">The following ordering operators that require <xref:System.Collections.Generic.IComparer%601> are unsupported against a <xref:System.Data.Services.Client.DataServiceQuery%601>:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.OrderBy%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2C%60%601%7D%2CSystem.Collections.Generic.IComparer%7B%60%601%7D%29><br />-   <xref:System.Linq.Enumerable.OrderByDescending%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2C%60%601%7D%2CSystem.Collections.Generic.IComparer%7B%60%601%7D%29><br />-   <xref:System.Linq.Enumerable.ThenBy%60%602%28System.Linq.IOrderedEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2C%60%601%7D%2CSystem.Collections.Generic.IComparer%7B%60%601%7D%29><br />-   <xref:System.Linq.Enumerable.ThenByDescending%60%602%28System.Linq.IOrderedEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2C%60%601%7D%2CSystem.Collections.Generic.IComparer%7B%60%601%7D%29>|  
|<span data-ttu-id="31646-174">Operadores de operação e de filtragem</span><span class="sxs-lookup"><span data-stu-id="31646-174">Projection and filtering operators</span></span>|<span data-ttu-id="31646-175">Os seguintes operadores de projeção e de filtragem que aceitam um argumento posicional não são suportados em um <xref:System.Data.Services.Client.DataServiceQuery%601>:</span><span class="sxs-lookup"><span data-stu-id="31646-175">The following projection and filtering operators that accept a positional argument are unsupported against a <xref:System.Data.Services.Client.DataServiceQuery%601>:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.Join%60%604%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Collections.Generic.IEnumerable%7B%60%601%7D%2CSystem.Func%7B%60%600%2C%60%602%7D%2CSystem.Func%7B%60%601%2C%60%602%7D%2CSystem.Func%7B%60%600%2C%60%601%2C%60%603%7D%2CSystem.Collections.Generic.IEqualityComparer%7B%60%602%7D%29><br />-   <xref:System.Linq.Enumerable.Select%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Int32%2C%60%601%7D%29><br />-   <xref:System.Linq.Enumerable.SelectMany%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Collections.Generic.IEnumerable%7B%60%601%7D%7D%29><br />-   <xref:System.Linq.Enumerable.SelectMany%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Int32%2CSystem.Collections.Generic.IEnumerable%7B%60%601%7D%7D%29><br />-   <xref:System.Linq.Enumerable.SelectMany%60%603%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Collections.Generic.IEnumerable%7B%60%601%7D%7D%2CSystem.Func%7B%60%600%2C%60%601%2C%60%602%7D%29><br />-   <xref:System.Linq.Enumerable.SelectMany%60%603%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Int32%2CSystem.Collections.Generic.IEnumerable%7B%60%601%7D%7D%2CSystem.Func%7B%60%600%2C%60%601%2C%60%602%7D%29><br />-   <xref:System.Linq.Enumerable.Where%60%601%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Int32%2CSystem.Boolean%7D%29>|  
|<span data-ttu-id="31646-176">Operadores de agrupamento</span><span class="sxs-lookup"><span data-stu-id="31646-176">Grouping operators</span></span>|<span data-ttu-id="31646-177">Todos os operadores de agrupamento não são suportados em um <xref:System.Data.Services.Client.DataServiceQuery%601>, incluindo os seguintes:</span><span class="sxs-lookup"><span data-stu-id="31646-177">All grouping operators are unsupported against a <xref:System.Data.Services.Client.DataServiceQuery%601>, including the following:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.GroupBy%2A><br />-   <xref:System.Linq.Enumerable.GroupJoin%2A><br /><br /> <span data-ttu-id="31646-178">As operações de agrupamento devem ser executadas no cliente.</span><span class="sxs-lookup"><span data-stu-id="31646-178">Grouping operations must be performed on the client.</span></span>|  
|<span data-ttu-id="31646-179">Operadores de agregação</span><span class="sxs-lookup"><span data-stu-id="31646-179">Aggregate operators</span></span>|<span data-ttu-id="31646-180">Todos os operadores de agregação não são suportados em um <xref:System.Data.Services.Client.DataServiceQuery%601>, incluindo os seguintes:</span><span class="sxs-lookup"><span data-stu-id="31646-180">All aggregate operations are unsupported against a <xref:System.Data.Services.Client.DataServiceQuery%601>, including the following:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.Aggregate%2A><br />-   <xref:System.Linq.Enumerable.Average%2A><br />-   <xref:System.Linq.Enumerable.Count%2A><br />-   <xref:System.Linq.Enumerable.LongCount%2A><br />-   <xref:System.Linq.Enumerable.Max%2A><br />-   <xref:System.Linq.Enumerable.Min%2A><br />-   <xref:System.Linq.Enumerable.Sum%2A><br /><br /> <span data-ttu-id="31646-181">As operações de agregação devem ser executadas no cliente ou ser encapsuladas por uma operação de serviço.</span><span class="sxs-lookup"><span data-stu-id="31646-181">Aggregate operations must either be performed on the client or be encapsulated by a service operation.</span></span>|  
|<span data-ttu-id="31646-182">Operadores de paginação</span><span class="sxs-lookup"><span data-stu-id="31646-182">Paging operators</span></span>|<span data-ttu-id="31646-183">Os seguintes operadores de paginação não são suportados em um <xref:System.Data.Services.Client.DataServiceQuery%601>:</span><span class="sxs-lookup"><span data-stu-id="31646-183">The following paging operators are not supported against a <xref:System.Data.Services.Client.DataServiceQuery%601>:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.ElementAt%2A><br />-   <xref:System.Linq.Enumerable.Last%2A><br />-   <xref:System.Linq.Enumerable.LastOrDefault%2A><br />-   <xref:System.Linq.Enumerable.SkipWhile%2A><br />-   <xref:System.Linq.Enumerable.TakeWhile%2A><br/><br/><span data-ttu-id="31646-184">**Nota:**  Os operadores de paginação que são executados em uma seqüência vazia retornam nulos.</span><span class="sxs-lookup"><span data-stu-id="31646-184">**Note:**  Paging operators that are executed on an empty sequence return null.</span></span>|  
|<span data-ttu-id="31646-185">Outros operadores</span><span class="sxs-lookup"><span data-stu-id="31646-185">Other operators</span></span>|<span data-ttu-id="31646-186">Os seguintes operadores também não <xref:System.Data.Services.Client.DataServiceQuery%601>são suportados contra:</span><span class="sxs-lookup"><span data-stu-id="31646-186">The following operators are also not supported against a <xref:System.Data.Services.Client.DataServiceQuery%601>:</span></span><br /><br /> - <xref:System.Linq.Enumerable.Empty%2A><br />- <xref:System.Linq.Enumerable.Range%2A><br />- <xref:System.Linq.Enumerable.Repeat%2A><br />- <xref:System.Linq.Enumerable.ToDictionary%2A><br />- <xref:System.Linq.Enumerable.ToLookup%2A>|  
  
<a name="supportedExpressions"></a>
## <a name="supported-expression-functions"></a><span data-ttu-id="31646-187">Funções de expressão suportadas</span><span class="sxs-lookup"><span data-stu-id="31646-187">Supported Expression Functions</span></span>  
 <span data-ttu-id="31646-188">Os seguintes métodos e propriedades de tempo de execução em linguagem comum (CLR) são suportados porque podem ser traduzidos em uma expressão de consulta para inclusão no URI de solicitação para um serviço OData:</span><span class="sxs-lookup"><span data-stu-id="31646-188">The following common-language runtime (CLR) methods and properties are supported because they can be translated in a query expression for inclusion in the request URI to an OData service:</span></span>  
  
|<span data-ttu-id="31646-189">Membro <xref:System.String></span><span class="sxs-lookup"><span data-stu-id="31646-189"><xref:System.String> Member</span></span>|<span data-ttu-id="31646-190">Função OData suportada</span><span class="sxs-lookup"><span data-stu-id="31646-190">Supported OData Function</span></span>|  
|-----------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|  
|<xref:System.String.Concat%28System.String%2CSystem.String%29>|`string concat(string p0, string p1)`|  
|<xref:System.String.Contains%28System.String%29>|`bool substringof(string p0, string p1)`|  
|<xref:System.String.EndsWith%28System.String%29>|`bool endswith(string p0, string p1)`|  
|<xref:System.String.IndexOf%28System.String%2CSystem.Int32%29>|`int indexof(string p0, string p1)`|  
|<xref:System.String.Length>|`int length(string p0)`|  
|<xref:System.String.Replace%28System.String%2CSystem.String%29>|`string replace(string p0, string find, string replace)`|  
|<xref:System.String.Substring%28System.Int32%29>|`string substring(string p0, int pos)`|  
|<xref:System.String.Substring%28System.Int32%2CSystem.Int32%29>|`string substring(string p0, int pos, int length)`|  
|<xref:System.String.ToLower>|`string tolower(string p0)`|  
|<xref:System.String.ToUpper>|`string toupper(string p0)`|  
|<xref:System.String.Trim>|`string trim(string p0)`|  
  
|<span data-ttu-id="31646-191"><xref:System.DateTime>Membro<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="31646-191"><xref:System.DateTime> Member<sup>1</sup></span></span>|<span data-ttu-id="31646-192">Função OData suportada</span><span class="sxs-lookup"><span data-stu-id="31646-192">Supported OData Function</span></span>|  
|-------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|  
|<xref:System.DateTime.Day>|`int day(DateTime p0)`|  
|<xref:System.DateTime.Hour>|`int hour(DateTime p0)`|  
|<xref:System.DateTime.Minute>|`int minute(DateTime p0)`|  
|<xref:System.DateTime.Month>|`int month(DateTime p0)`|  
|<xref:System.DateTime.Second>|`int second(DateTime p0)`|  
|<xref:System.DateTime.Year>|`int year(DateTime p0)`|  
  
 <span data-ttu-id="31646-193"><sup>1</sup> As propriedades equivalentes <xref:Microsoft.VisualBasic.DateAndTime?displayProperty=nameWithType> de <xref:Microsoft.VisualBasic.DateAndTime.DatePart%2A> data e hora e do método no Visual Basic também são suportadas.</span><span class="sxs-lookup"><span data-stu-id="31646-193"><sup>1</sup>The equivalent date and time properties of <xref:Microsoft.VisualBasic.DateAndTime?displayProperty=nameWithType> and the <xref:Microsoft.VisualBasic.DateAndTime.DatePart%2A> method in Visual Basic are also supported.</span></span>  
  
|<span data-ttu-id="31646-194">Membro <xref:System.Math></span><span class="sxs-lookup"><span data-stu-id="31646-194"><xref:System.Math> Member</span></span>|<span data-ttu-id="31646-195">Função OData suportada</span><span class="sxs-lookup"><span data-stu-id="31646-195">Supported OData Function</span></span>|  
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|  
|<xref:System.Math.Ceiling%28System.Decimal%29>|`decimal ceiling(decimal p0)`|  
|<xref:System.Math.Ceiling%28System.Double%29>|`double ceiling(double p0)`|  
|<xref:System.Math.Floor%28System.Decimal%29>|`decimal floor(decimal p0)`|  
|<xref:System.Math.Floor%28System.Double%29>|`double floor(double p0)`|  
|<xref:System.Math.Round%28System.Decimal%29>|`decimal round(decimal p0)`|  
|<xref:System.Math.Round%28System.Double%29>|`double round(double p0)`|  
  
|<span data-ttu-id="31646-196">Membro <xref:System.Linq.Expressions.Expression></span><span class="sxs-lookup"><span data-stu-id="31646-196"><xref:System.Linq.Expressions.Expression> Member</span></span>|<span data-ttu-id="31646-197">Função OData suportada</span><span class="sxs-lookup"><span data-stu-id="31646-197">Supported OData Function</span></span>|  
|---------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|  
|<xref:System.Linq.Expressions.Expression.TypeIs%28System.Linq.Expressions.Expression%2CSystem.Type%29>|`bool isof(type p0)`|  
  
 <span data-ttu-id="31646-198">O cliente também pode avaliar funções de CLR adicionais no cliente.</span><span class="sxs-lookup"><span data-stu-id="31646-198">The client may also be able to evaluate additional CLR functions on the client.</span></span> <span data-ttu-id="31646-199">Um <xref:System.NotSupportedException> é gerado para qualquer expressão que não possa ser avaliada no cliente e não possa ser convertida em um URI de solicitação válido para avaliação no servidor.</span><span class="sxs-lookup"><span data-stu-id="31646-199">A <xref:System.NotSupportedException> is raised for any expression that cannot be evaluated on the client and cannot be translated into a valid request URI for evaluation on the server.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="31646-200">Confira também</span><span class="sxs-lookup"><span data-stu-id="31646-200">See also</span></span>

- [<span data-ttu-id="31646-201">Consultar o serviço de dados</span><span class="sxs-lookup"><span data-stu-id="31646-201">Querying the Data Service</span></span>](querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="31646-202">Projeções de consulta</span><span class="sxs-lookup"><span data-stu-id="31646-202">Query Projections</span></span>](query-projections-wcf-data-services.md)
- [<span data-ttu-id="31646-203">Materialização de objetos</span><span class="sxs-lookup"><span data-stu-id="31646-203">Object Materialization</span></span>](object-materialization-wcf-data-services.md)
- [<span data-ttu-id="31646-204">OData: convenções de URI</span><span class="sxs-lookup"><span data-stu-id="31646-204">OData: URI Conventions</span></span>](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/)
