---
title: Materialização de objeto (WCF Data Services)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
ms.assetid: f0dbf7b0-0292-4e31-9ae4-b98288336dc1
ms.openlocfilehash: f4789b3bfd5f9810a9abc870518add9b4a0a045b
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64645532"
---
# <a name="object-materialization-wcf-data-services"></a><span data-ttu-id="637ce-102">Materialização de objeto (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="637ce-102">Object Materialization (WCF Data Services)</span></span>
<span data-ttu-id="637ce-103">Quando você usa o **adicionar referência de serviço** caixa de diálogo para consumir um [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed em um aplicativo cliente com base no .NET Framework, classes de dados equivalentes são geradas para cada tipo de entidade no modelo de dados exposto pelo feed.</span><span class="sxs-lookup"><span data-stu-id="637ce-103">When you use the **Add Service Reference** dialog to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed.</span></span> <span data-ttu-id="637ce-104">Para obter mais informações, consulte [gerando a biblioteca de cliente do serviço de dados](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="637ce-104">For more information, see [Generating the Data Service Client Library](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span></span> <span data-ttu-id="637ce-105">Dados de entidade que são retornados por uma consulta são materializados em uma instância de uma dessas classes de serviço de dados do cliente gerado.</span><span class="sxs-lookup"><span data-stu-id="637ce-105">Entity data that is returned by a query is materialized into an instance of one of these generated client data service classes.</span></span> <span data-ttu-id="637ce-106">Para obter informações sobre opções de mesclagem e a resolução de identidade para objetos acompanhados, consulte [Gerenciando o contexto do serviço de dados](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="637ce-106">For information about merge options and identity resolution for tracked objects, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span>  
  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="637ce-107">também permite que você defina suas próprias classes de serviço de dados do cliente em vez de usar as classes de dados gerados por ferramenta.</span><span class="sxs-lookup"><span data-stu-id="637ce-107">also enables you to define your own client data service classes rather than using the tool-generated data classes.</span></span> <span data-ttu-id="637ce-108">Isso permite que você use suas próprias classes de dados, também conhecido como "objeto CLR BOM e velho" classes de dados (POCO).</span><span class="sxs-lookup"><span data-stu-id="637ce-108">This enables you to use your own data classes, also known as "plain-old CLR object" (POCO) data classes.</span></span> <span data-ttu-id="637ce-109">Ao usar esses tipos de classes de dados personalizados, você deve atributo a classe de dados com um <xref:System.Data.Services.Common.DataServiceKeyAttribute> ou <xref:System.Data.Services.Common.DataServiceEntityAttribute> e certifique-se de que nomes de tipo nos nomes de tipo de correspondência de cliente no modelo de dados do serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="637ce-109">When using these types of custom data classes, you should attribute the data class with either <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> and ensure that type names on the client match type names in the data model of the data service.</span></span>  
  
 <span data-ttu-id="637ce-110">Depois que a biblioteca recebe a mensagem de resposta de consulta, ele materializa os dados retornados do [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] classes de serviço que são do tipo da consulta de feed em instâncias de dados do cliente.</span><span class="sxs-lookup"><span data-stu-id="637ce-110">After the library receives the query response message, it materializes the returned data from the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed into instances of client data service classes that are of the type of the query.</span></span> <span data-ttu-id="637ce-111">O processo geral para materializar desses objetos é da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="637ce-111">The general process for materializing these objects is as follows:</span></span>  
  
1. <span data-ttu-id="637ce-112">A biblioteca de cliente lê o tipo serializado do `entry` elemento na mensagem de resposta de feed e tenta criar uma nova instância do tipo correto, em uma das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="637ce-112">The client library reads the serialized type from the `entry` element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:</span></span>  
  
    - <span data-ttu-id="637ce-113">Quando o tipo declarado no feed tem o mesmo nome como o tipo do <xref:System.Data.Services.Client.DataServiceQuery%601>, uma nova instância desse tipo é criada usando o construtor vazio.</span><span class="sxs-lookup"><span data-stu-id="637ce-113">When the type declared in the feed has the same name as the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this type is created by using the empty constructor.</span></span>  
  
    - <span data-ttu-id="637ce-114">Quando o tipo declarado no feed tem o mesmo nome como um tipo que é derivado do tipo do <xref:System.Data.Services.Client.DataServiceQuery%601>, uma nova instância desse tipo derivada é criada usando o construtor vazio.</span><span class="sxs-lookup"><span data-stu-id="637ce-114">When the type declared in the feed has the same name as a type that is derived from the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this derived type is created by using the empty constructor.</span></span>  
  
    - <span data-ttu-id="637ce-115">Quando o tipo declarado no feed não é possível corresponder ao tipo do <xref:System.Data.Services.Client.DataServiceQuery%601> ou quaisquer tipos derivados, uma nova instância do tipo consultado é criada usando o construtor vazio.</span><span class="sxs-lookup"><span data-stu-id="637ce-115">When the type declared in the feed cannot be matched to the type of the <xref:System.Data.Services.Client.DataServiceQuery%601> or any derived types, a new instance of the queried type is created by using the empty constructor.</span></span>  
  
    - <span data-ttu-id="637ce-116">Quando o <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> estiver definida, o delegado fornecido é chamado para substituir o mapeamento de tipo com base no nome padrão e uma nova instância do tipo retornado pelo <xref:System.Func%602> é criado em seu lugar.</span><span class="sxs-lookup"><span data-stu-id="637ce-116">When the <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <xref:System.Func%602> is created instead.</span></span> <span data-ttu-id="637ce-117">Se esse delegado retorna um valor nulo, uma nova instância do tipo consultado é criada em vez disso.</span><span class="sxs-lookup"><span data-stu-id="637ce-117">If this delegate returns a null value, a new instance of the queried type is created instead.</span></span> <span data-ttu-id="637ce-118">Pode ser necessário substituir o mapeamento de nome de tipo com base no nome padrão para dar suporte a cenários de herança.</span><span class="sxs-lookup"><span data-stu-id="637ce-118">It may be required to override the default name-based type name mapping to support inheritance scenarios.</span></span>  
  
2. <span data-ttu-id="637ce-119">A biblioteca de cliente lê o valor do URI do `id` elemento o `entry`, que é o valor de identidade da entidade.</span><span class="sxs-lookup"><span data-stu-id="637ce-119">The client library reads the URI value from the `id` element of the `entry`, which is the identity value of the entity.</span></span> <span data-ttu-id="637ce-120">A menos que um <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> valor de <xref:System.Data.Services.Client.MergeOption.NoTracking> é usado, o valor de identidade é usado para acompanhar o objeto no <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="637ce-120">Unless a <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> value of <xref:System.Data.Services.Client.MergeOption.NoTracking> is used, the identity value is used to track the object in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="637ce-121">O valor de identidade também é usado para garantir que apenas uma instância de entidade única é criada, mesmo quando uma entidade for retornada várias vezes na resposta da consulta.</span><span class="sxs-lookup"><span data-stu-id="637ce-121">The identity value is also used to guarantee that only a single entity instance is created, even when an entity is returned multiple times in the query response.</span></span>  
  
3. <span data-ttu-id="637ce-122">A biblioteca de cliente lê as propriedades na entrada do feed e definir as propriedades correspondentes no objeto recém-criado.</span><span class="sxs-lookup"><span data-stu-id="637ce-122">The client library reads properties from the feed entry and set the corresponding properties on the newly created object.</span></span> <span data-ttu-id="637ce-123">Quando um objeto que tem o mesmo valor de identidade já ocorre na <xref:System.Data.Services.Client.DataServiceContext>, as propriedades são definidas com base no <xref:System.Data.Services.Client.MergeOption> configuração do <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="637ce-123">When an object that has the same identity value already occurs in the <xref:System.Data.Services.Client.DataServiceContext>, the properties are set based on the <xref:System.Data.Services.Client.MergeOption> setting of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="637ce-124">A resposta pode conter valores de propriedade para o qual uma propriedade correspondente não ocorre no tipo de cliente.</span><span class="sxs-lookup"><span data-stu-id="637ce-124">The response might contain property values for which a corresponding property does not occur in the client type.</span></span> <span data-ttu-id="637ce-125">Quando isso ocorrer, a ação depende do valor da <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> propriedade do <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="637ce-125">When this occurs, the action depends on the value of the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="637ce-126">Quando essa propriedade é definida como `true`, a propriedade ausente será ignorada.</span><span class="sxs-lookup"><span data-stu-id="637ce-126">When this property is set to `true`, the missing property is ignored.</span></span> <span data-ttu-id="637ce-127">Caso contrário, ocorrerá um erro.</span><span class="sxs-lookup"><span data-stu-id="637ce-127">Otherwise, an error is raised.</span></span> <span data-ttu-id="637ce-128">Propriedades são definidas da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="637ce-128">Properties are set as follows:</span></span>  
  
    - <span data-ttu-id="637ce-129">Propriedades escalares são definidas como o valor correspondente na entrada na mensagem de resposta.</span><span class="sxs-lookup"><span data-stu-id="637ce-129">Scalar properties are set to the corresponding value in the entry in the response message.</span></span>  
  
    - <span data-ttu-id="637ce-130">Propriedades complexas são definidas para uma nova instância de tipo complexo, que são definidas com as propriedades do tipo complexo da resposta.</span><span class="sxs-lookup"><span data-stu-id="637ce-130">Complex properties are set to a new complex type instance, which are set with the properties of the complex type from the response.</span></span>  
  
    - <span data-ttu-id="637ce-131">Propriedades de navegação que retornam uma coleção de entidades relacionadas são definidas para uma instância nova ou existente do <xref:System.Collections.Generic.ICollection%601>, onde `T` é o tipo da entidade relacionada.</span><span class="sxs-lookup"><span data-stu-id="637ce-131">Navigation properties that return a collection of related entities are set to a new or existing instance of <xref:System.Collections.Generic.ICollection%601>, where `T` is the type of the related entity.</span></span> <span data-ttu-id="637ce-132">Esta coleção está vazia, a menos que os objetos relacionados foram carregados no <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="637ce-132">This collection is empty unless the related objects have been loaded into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="637ce-133">Para obter mais informações, consulte [Carregando conteúdo adiado](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="637ce-133">For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="637ce-134">Quando as classes de dados do cliente gerado dá suporte a vinculação de dados, as propriedades de navegação retornam instâncias da <xref:System.Data.Services.Client.DataServiceCollection%601> classe em vez disso.</span><span class="sxs-lookup"><span data-stu-id="637ce-134">When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead.</span></span> <span data-ttu-id="637ce-135">Para obter mais informações, consulte [associando dados a controles](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="637ce-135">For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span></span>  
  
4. <span data-ttu-id="637ce-136">O <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> é gerado.</span><span class="sxs-lookup"><span data-stu-id="637ce-136">The <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> event is raised.</span></span>  
  
5. <span data-ttu-id="637ce-137">A biblioteca de cliente anexa o objeto a ser o <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="637ce-137">The client library attaches the object to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="637ce-138">O objeto não está anexado quando o <xref:System.Data.Services.Client.MergeOption> é <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span><span class="sxs-lookup"><span data-stu-id="637ce-138">The object is not attached when the <xref:System.Data.Services.Client.MergeOption> is <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="637ce-139">Consulte também</span><span class="sxs-lookup"><span data-stu-id="637ce-139">See also</span></span>

- <span data-ttu-id="637ce-140">[Querying the Data Service](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md) (Consultando o serviço de dados)</span><span class="sxs-lookup"><span data-stu-id="637ce-140">[Querying the Data Service](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)</span></span>
- [<span data-ttu-id="637ce-141">Projeções de consulta</span><span class="sxs-lookup"><span data-stu-id="637ce-141">Query Projections</span></span>](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)
