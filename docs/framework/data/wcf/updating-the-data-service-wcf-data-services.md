---
title: Atualizando o serviço de dados (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, changing data
- WCF Data Services, client library
ms.assetid: 00d993be-ffed-4dea-baf7-6eea982cdb54
ms.openlocfilehash: 060cdab4f486782e6ad60511fadad95a41255dec
ms.sourcegitcommit: 79a2d6a07ba4ed08979819666a0ee6927bbf1b01
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74568816"
---
# <a name="updating-the-data-service-wcf-data-services"></a><span data-ttu-id="2900b-102">Atualizando o serviço de dados (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="2900b-102">Updating the Data Service (WCF Data Services)</span></span>
<span data-ttu-id="2900b-103">Quando você usa a biblioteca de cliente WCF Data Services para consumir um feed de Protocolo Open Data (OData), a biblioteca converte as entradas no feed em instâncias de classes de serviço de dados do cliente.</span><span class="sxs-lookup"><span data-stu-id="2900b-103">When you use the WCF Data Services client library to consume an Open Data Protocol (OData) feed, the library translates the entries in the feed into instances of client data service classes.</span></span> <span data-ttu-id="2900b-104">Essas classes de serviço de dados são controladas usando o <xref:System.Data.Services.Client.DataServiceContext> ao qual o <xref:System.Data.Services.Client.DataServiceQuery%601> pertence.</span><span class="sxs-lookup"><span data-stu-id="2900b-104">These data service classes are tracked by using the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span> <span data-ttu-id="2900b-105">O cliente controla as alterações nas entidades que você relata usando métodos em <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="2900b-105">The client tracks changes to entities that you report by using methods on <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="2900b-106">Esses métodos permitem que o cliente rastreie entidades adicionadas e excluídas e também alterações feitas em valores de propriedade ou em relações entre instâncias de entidade.</span><span class="sxs-lookup"><span data-stu-id="2900b-106">These methods enable the client to track added and deleted entities and also changes that you make to property values or to relationships between entity instances.</span></span> <span data-ttu-id="2900b-107">Essas alterações controladas são enviadas de volta ao serviço de dados como operações baseadas em REST quando você chama o método <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="2900b-107">Those tracked changes are sent back to the data service as REST-based operations when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="2900b-108">Quando você usa uma instância do <xref:System.Data.Services.Client.DataServiceCollection%601> para associar dados a controles, as alterações feitas nos dados no controle associado são automaticamente relatadas para o <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="2900b-108">When you use an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> to bind data to controls, changes made to data in the bound control are automatically reported to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="2900b-109">Para obter mais informações, consulte [associando dados a controles](binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="2900b-109">For more information, see [Binding Data to Controls](binding-data-to-controls-wcf-data-services.md).</span></span>  
  
## <a name="adding-modifying-and-changing-entities"></a><span data-ttu-id="2900b-110">Adicionando, modificando e alterando entidades</span><span class="sxs-lookup"><span data-stu-id="2900b-110">Adding, Modifying, and Changing Entities</span></span>  
 <span data-ttu-id="2900b-111">Quando você usa a caixa de diálogo **Adicionar referência de serviço** no Visual Studio para adicionar uma referência a um feed OData, as classes resultantes do serviço de dados do cliente têm um método *Create* estático que usa um parâmetro para cada propriedade de entidade não anulável.</span><span class="sxs-lookup"><span data-stu-id="2900b-111">When you use the **Add Service Reference** dialog in Visual Studio to add a reference to an OData feed, the resulting client data service classes each have a static *Create* method that takes one parameter for each non-nullable entity property.</span></span> <span data-ttu-id="2900b-112">Você pode usar esse método para criar instâncias de classes de tipo de entidade, como no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="2900b-112">You can use this method to create instances of entity type classes, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#createnewproduct)]
 [!code-vb[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#createnewproduct)]  
  
 <span data-ttu-id="2900b-113">Para adicionar uma instância de entidade, chame o método *AddTo* apropriado na classe <xref:System.Data.Services.Client.DataServiceContext> gerada pela caixa de diálogo **Adicionar referência de serviço** , como no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="2900b-113">To add an entity instance, call the appropriate *AddTo* method on the <xref:System.Data.Services.Client.DataServiceContext> class generated by the **Add Service Reference** dialog box, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addproductspecific)]
 [!code-vb[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addproductspecific)]  
  
 <span data-ttu-id="2900b-114">Isso adiciona o objeto ao contexto e ao conjunto correto de entidades.</span><span class="sxs-lookup"><span data-stu-id="2900b-114">This adds the object to the context and into the correct entity set.</span></span> <span data-ttu-id="2900b-115">Você também pode chamar <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, mas, em vez disso, deve fornecer o nome do conjunto de entidades.</span><span class="sxs-lookup"><span data-stu-id="2900b-115">You can also call <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, but you must instead supply the entity set name.</span></span> <span data-ttu-id="2900b-116">Se a entidade adicionada tiver uma ou mais relações com outras entidades, você poderá usar o método <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> ou usar um dos métodos anteriores e também definir explicitamente esses links.</span><span class="sxs-lookup"><span data-stu-id="2900b-116">If the added entity has one or more relationships to other entities, you can either use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method or use one of the previous methods and also explicitly define those links.</span></span> <span data-ttu-id="2900b-117">Essas operações são discutidas posteriormente neste tópico.</span><span class="sxs-lookup"><span data-stu-id="2900b-117">These operations are discussed later in this topic.</span></span>  
  
 <span data-ttu-id="2900b-118">Para modificar uma instância de entidade existente, primeiro consulte essa entidade, faça as alterações desejadas em suas propriedades e, em seguida, chame o método <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> no <xref:System.Data.Services.Client.DataServiceContext> para indicar à biblioteca de cliente que ele precisa para enviar uma atualização para esse objeto, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="2900b-118">To modify an existing entity instance, first query for that entity, make the desired changes to its properties, and then call the <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> to indicate to the client library that it needs to send an update for that object, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#modifycustomerspecific)]
 [!code-vb[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#modifycustomerspecific)]  
  
 <span data-ttu-id="2900b-119">Para excluir uma instância de entidade, chame o método <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> na <xref:System.Data.Services.Client.DataServiceContext>, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="2900b-119">To delete an entity instance, call the <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext>, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#deleteproductspecific)]
 [!code-vb[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#deleteproductspecific)]  
  
 <span data-ttu-id="2900b-120">Para obter mais informações, consulte [como adicionar, modificar e excluir entidades](how-to-add-modify-and-delete-entities-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="2900b-120">For more information, see [How to: Add, Modify, and Delete Entities](how-to-add-modify-and-delete-entities-wcf-data-services.md).</span></span>  
  
## <a name="attaching-entities"></a><span data-ttu-id="2900b-121">Anexando entidades</span><span class="sxs-lookup"><span data-stu-id="2900b-121">Attaching Entities</span></span>  
 <span data-ttu-id="2900b-122">A biblioteca de cliente permite que você salve as atualizações feitas em uma entidade sem primeiro executar uma consulta para carregar a entidade no <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="2900b-122">The client library enables you to save updates that you made to an entity without first executing a query to load the entity into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="2900b-123">Use o método <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> para anexar um objeto existente a uma entidade específica definida no <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="2900b-123">Use the <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> method to attach an existing object to a specific entity set in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="2900b-124">Em seguida, você pode modificar o objeto e salvar as alterações no serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="2900b-124">You can then modify the object and save the changes to the data service.</span></span> <span data-ttu-id="2900b-125">No exemplo a seguir, um objeto Customer que foi alterado está anexado ao contexto e, em seguida, <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> é chamado para marcar o objeto anexado como <xref:System.Data.Services.Client.EntityStates.Modified> antes de <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> ser chamado:</span><span class="sxs-lookup"><span data-stu-id="2900b-125">In the following example, a customer object that has been changed is attached to the context and then <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> is called to mark the attached object as <xref:System.Data.Services.Client.EntityStates.Modified> before <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#attachobjectspecific)]
 [!code-vb[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#attachobjectspecific)]  
  
 <span data-ttu-id="2900b-126">As seguintes considerações se aplicam ao anexar objetos:</span><span class="sxs-lookup"><span data-stu-id="2900b-126">The following considerations apply when attaching objects:</span></span>  
  
- <span data-ttu-id="2900b-127">Um objeto é anexado no estado de <xref:System.Data.Services.Client.EntityStates.Unchanged>.</span><span class="sxs-lookup"><span data-stu-id="2900b-127">An object is attached in the <xref:System.Data.Services.Client.EntityStates.Unchanged> state.</span></span>  
  
- <span data-ttu-id="2900b-128">Quando um objeto é anexado, os objetos que estão relacionados ao objeto anexado também não são anexados.</span><span class="sxs-lookup"><span data-stu-id="2900b-128">When an object is attached, objects that are related to the attached object are not also attached.</span></span>  
  
- <span data-ttu-id="2900b-129">Um objeto não poderá ser anexado se a entidade já estiver sendo rastreada pelo contexto.</span><span class="sxs-lookup"><span data-stu-id="2900b-129">An object cannot be attached if the entity is already being tracked by the context.</span></span>  
  
- <span data-ttu-id="2900b-130">A sobrecarga do método de <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> que usa um parâmetro `etag` é usada quando você anexa um objeto de entidade que foi recebido junto com um valor de eTag.</span><span class="sxs-lookup"><span data-stu-id="2900b-130">The <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> method overload that takes an `etag` parameter is used when you attach an entity object that was received along with an eTag value.</span></span> <span data-ttu-id="2900b-131">Esse valor de eTag é usado para verificar a simultaneidade quando as alterações no objeto anexado são salvas.</span><span class="sxs-lookup"><span data-stu-id="2900b-131">This eTag value is then used to check for concurrency when changes to the attached object are saved.</span></span>  
  
 <span data-ttu-id="2900b-132">Para obter mais informações, consulte [como: anexar uma entidade existente ao DataServiceContext](attach-an-existing-entity-to-dc-wcf-data.md).</span><span class="sxs-lookup"><span data-stu-id="2900b-132">For more information, see [How to: Attach an Existing Entity to the DataServiceContext](attach-an-existing-entity-to-dc-wcf-data.md).</span></span>  
  
## <a name="creating-and-modifying-relationship-links"></a><span data-ttu-id="2900b-133">Criando e modificando links de relações</span><span class="sxs-lookup"><span data-stu-id="2900b-133">Creating and Modifying Relationship Links</span></span>  
 <span data-ttu-id="2900b-134">Quando você adiciona uma nova entidade usando o método <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> ou o método *AddTo* apropriado da classe <xref:System.Data.Services.Client.DataServiceContext> que a caixa de diálogo **Adicionar referência de serviço** gera, quaisquer relações entre a nova entidade e as entidades relacionadas não são definidas automaticamente.</span><span class="sxs-lookup"><span data-stu-id="2900b-134">When you add a new entity by using either the <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> method or the appropriate *AddTo* method of the <xref:System.Data.Services.Client.DataServiceContext> class that the **Add Service Reference** dialog generates, any relationships between the new entity and related entities are not automatically defined.</span></span>  
  
 <span data-ttu-id="2900b-135">Você pode criar e alterar relações entre instâncias de entidade e fazer com que a biblioteca de cliente reflita essas alterações no serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="2900b-135">You can create and change relationships between entity instances and have the client library reflect those changes in the data service.</span></span> <span data-ttu-id="2900b-136">As relações entre as entidades são definidas como associações no modelo, e o <xref:System.Data.Services.Client.DataServiceContext> controla cada relação como um objeto de link no contexto.</span><span class="sxs-lookup"><span data-stu-id="2900b-136">Relationships between entities are defined as associations in the model, and the <xref:System.Data.Services.Client.DataServiceContext> tracks each relationship as a link object in the context.</span></span> <span data-ttu-id="2900b-137">WCF Data Services fornece os seguintes métodos na classe <xref:System.Data.Services.Client.DataServiceContext> para criar, modificar e excluir esses links:</span><span class="sxs-lookup"><span data-stu-id="2900b-137">WCF Data Services provides the following methods on the <xref:System.Data.Services.Client.DataServiceContext> class to create, modify, and delete these links:</span></span>  
  
|<span data-ttu-id="2900b-138">Método</span><span class="sxs-lookup"><span data-stu-id="2900b-138">Method</span></span>|<span data-ttu-id="2900b-139">Descrição</span><span class="sxs-lookup"><span data-stu-id="2900b-139">Description</span></span>|  
|------------|-----------------|  
|<xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A>|<span data-ttu-id="2900b-140">Cria um novo link entre dois objetos de entidade relacionados.</span><span class="sxs-lookup"><span data-stu-id="2900b-140">Creates a new link between two related entity objects.</span></span> <span data-ttu-id="2900b-141">Chamar esse método é equivalente a chamar <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> e <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> criar o novo objeto e definir a relação com um objeto existente.</span><span class="sxs-lookup"><span data-stu-id="2900b-141">Calling this method is equivalent to calling <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> and <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> to both create the new object and define the relationship to an existing object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>|<span data-ttu-id="2900b-142">Cria um novo link entre dois objetos de entidade relacionados.</span><span class="sxs-lookup"><span data-stu-id="2900b-142">Creates a new link between two related entity objects.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>|<span data-ttu-id="2900b-143">Atualiza um link existente entre dois objetos de entidade relacionados.</span><span class="sxs-lookup"><span data-stu-id="2900b-143">Updates an existing link between two related entity objects.</span></span> <span data-ttu-id="2900b-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> também é usado para excluir links com uma cardinalidade de zero-ou-um para um (`0..1:1`) e um para um (`1:1`).</span><span class="sxs-lookup"><span data-stu-id="2900b-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> is also used to delete links with a cardinality of zero-or-one-to-one (`0..1:1`) and one-to-one (`1:1`).</span></span> <span data-ttu-id="2900b-145">Você pode fazer isso definindo o objeto relacionado como `null`.</span><span class="sxs-lookup"><span data-stu-id="2900b-145">You can do this by setting the related object to `null`.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DeleteLink%2A>|<span data-ttu-id="2900b-146">Marca um link que o contexto está rastreando para exclusão quando o método de <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> é chamado.</span><span class="sxs-lookup"><span data-stu-id="2900b-146">Marks a link that the context is tracking for deletion when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called.</span></span> <span data-ttu-id="2900b-147">Use esse método quando você excluir um objeto relacionado ou alterar uma relação excluindo primeiro o link para um objeto existente e, em seguida, adicionando um link para o novo objeto relacionado.</span><span class="sxs-lookup"><span data-stu-id="2900b-147">Use this method when you delete a related object or change a relationship by first deleting the link to an existing object and then adding a link to the new related object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AttachLink%2A>|<span data-ttu-id="2900b-148">Notifica o contexto de um link existente entre dois objetos de entidade.</span><span class="sxs-lookup"><span data-stu-id="2900b-148">Notifies the context of an existing link between two entity objects.</span></span> <span data-ttu-id="2900b-149">O contexto supõe que essa relação já existe no serviço de dados e não tenta criar o link quando você chama o método <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="2900b-149">The context assumes that this relationship already exists in the data service and does not try to create the link when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span> <span data-ttu-id="2900b-150">Use este método quando você anexa objetos a um contexto e também precisa anexar o link entre os dois.</span><span class="sxs-lookup"><span data-stu-id="2900b-150">Use this method when you attach objects to a context and need to also attach the link between the two.</span></span> <span data-ttu-id="2900b-151">Se você estiver definindo uma nova relação, use <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span><span class="sxs-lookup"><span data-stu-id="2900b-151">If you are defining a new relationship, you should instead use <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DetachLink%2A>|<span data-ttu-id="2900b-152">Interrompe o rastreamento do link especificado no contexto.</span><span class="sxs-lookup"><span data-stu-id="2900b-152">Stops tracking the specified link in the context.</span></span> <span data-ttu-id="2900b-153">Esse método é usado para excluir relações um-para-muitos (`*:*`).</span><span class="sxs-lookup"><span data-stu-id="2900b-153">This method is used to delete one-to-many (`*:*`) relationships.</span></span> <span data-ttu-id="2900b-154">Para links de relação com uma cardinalidade de um, você deve usar <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span><span class="sxs-lookup"><span data-stu-id="2900b-154">For relationship links with a cardinality of one, you must instead use <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span></span>|  
  
 <span data-ttu-id="2900b-155">O exemplo a seguir mostra como usar o método <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> para adicionar um novo `Order_Detail` relacionado a uma entidade `Orders` existente.</span><span class="sxs-lookup"><span data-stu-id="2900b-155">The following example shows how to use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method to add a new `Order_Detail` that is related to an existing `Orders` entity.</span></span> <span data-ttu-id="2900b-156">Como o novo objeto `Order_Details` agora é acompanhado pelo <xref:System.Data.Services.Client.DataServiceContext>, a relação do objeto `Order_Details` adicionado à entidade `Products` existente é definida chamando o método <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>:</span><span class="sxs-lookup"><span data-stu-id="2900b-156">Because the new `Order_Details` object is now tracked by the <xref:System.Data.Services.Client.DataServiceContext>, the relationship of the added `Order_Details` object to the existing `Products` entity is defined by calling the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addorderdetailtoorderspecific)]
 [!code-vb[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addorderdetailtoorderspecific)]  
  
 <span data-ttu-id="2900b-157">Embora o método <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> defina links que devem ser criados no serviço de dados, para que esses links sejam refletidos nos objetos que estão no contexto, você também deve definir as propriedades de navegação nos próprios objetos.</span><span class="sxs-lookup"><span data-stu-id="2900b-157">While the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method defines links that must be created in the data service, to have these links reflected in the objects that are in the context, you must also set the navigation properties on the objects themselves.</span></span> <span data-ttu-id="2900b-158">No exemplo anterior, você deve definir as propriedades de navegação da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="2900b-158">In the previous example, you should set the navigation properties as follows:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#setnavprops)]
 [!code-vb[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#setnavprops)]  
  
 <span data-ttu-id="2900b-159">Para obter mais informações, consulte [como: definir relações entre entidades](how-to-define-entity-relationships-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="2900b-159">For more information, see [How to: Define Entity Relationships](how-to-define-entity-relationships-wcf-data-services.md).</span></span>  
  
## <a name="saving-changes"></a><span data-ttu-id="2900b-160">Salvando alterações</span><span class="sxs-lookup"><span data-stu-id="2900b-160">Saving Changes</span></span>  
 <span data-ttu-id="2900b-161">As alterações são controladas na instância <xref:System.Data.Services.Client.DataServiceContext>, mas não são enviadas ao servidor imediatamente.</span><span class="sxs-lookup"><span data-stu-id="2900b-161">Changes are tracked in the <xref:System.Data.Services.Client.DataServiceContext> instance but not sent to the server immediately.</span></span> <span data-ttu-id="2900b-162">Depois de concluir as alterações necessárias para uma atividade especificada, chame <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> para enviar todas as alterações para o serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="2900b-162">After you are finished with the required changes for a specified activity, call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> to submit all the changes to the data service.</span></span> <span data-ttu-id="2900b-163">Para obter mais informações, consulte [Gerenciando o contexto do serviço de dados](managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="2900b-163">For more information, see [Managing the Data Service Context](managing-the-data-service-context-wcf-data-services.md).</span></span> <span data-ttu-id="2900b-164">Você também pode salvar as alterações de forma assíncrona usando os métodos <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> e <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="2900b-164">You can also save changes asynchronously by using the <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> and <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A> methods.</span></span> <span data-ttu-id="2900b-165">Para obter mais informações, consulte [operações assíncronas](asynchronous-operations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="2900b-165">For more information, see [Asynchronous Operations](asynchronous-operations-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2900b-166">Consulte também</span><span class="sxs-lookup"><span data-stu-id="2900b-166">See also</span></span>

- <span data-ttu-id="2900b-167">[WCF Data Services Client Library](wcf-data-services-client-library.md) (Biblioteca de clientes do WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="2900b-167">[WCF Data Services Client Library](wcf-data-services-client-library.md)</span></span>
- <span data-ttu-id="2900b-168">[Querying the Data Service](querying-the-data-service-wcf-data-services.md) (Consultando o serviço de dados)</span><span class="sxs-lookup"><span data-stu-id="2900b-168">[Querying the Data Service](querying-the-data-service-wcf-data-services.md)</span></span>
- [<span data-ttu-id="2900b-169">Operações assíncronas</span><span class="sxs-lookup"><span data-stu-id="2900b-169">Asynchronous Operations</span></span>](asynchronous-operations-wcf-data-services.md)
- [<span data-ttu-id="2900b-170">Operações de envio em lote</span><span class="sxs-lookup"><span data-stu-id="2900b-170">Batching Operations</span></span>](batching-operations-wcf-data-services.md)
- [<span data-ttu-id="2900b-171">Materialização de objetos</span><span class="sxs-lookup"><span data-stu-id="2900b-171">Object Materialization</span></span>](object-materialization-wcf-data-services.md)
- [<span data-ttu-id="2900b-172">Gerenciando o contexto do serviço de dados</span><span class="sxs-lookup"><span data-stu-id="2900b-172">Managing the Data Service Context</span></span>](managing-the-data-service-context-wcf-data-services.md)
