---
title: "Atualizando o serviço de dados (WCF Data Services)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, changing data
- WCF Data Services, client library
ms.assetid: 00d993be-ffed-4dea-baf7-6eea982cdb54
caps.latest.revision: "6"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: d51508abf27038e27b4a9d356c726bc8e15cb321
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/02/2017
---
# <a name="updating-the-data-service-wcf-data-services"></a><span data-ttu-id="d8a2a-102">Atualizando o serviço de dados (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="d8a2a-102">Updating the Data Service (WCF Data Services)</span></span>
<span data-ttu-id="d8a2a-103">Quando você usa o [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] biblioteca de cliente para consumir um [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed, a biblioteca converte as entradas no feed em instâncias de classes de serviço de dados do cliente.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-103">When you use the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed, the library translates the entries in the feed into instances of client data service classes.</span></span> <span data-ttu-id="d8a2a-104">Essas classes de serviço de dados são controladas por meio de <xref:System.Data.Services.Client.DataServiceContext> ao qual o <xref:System.Data.Services.Client.DataServiceQuery%601> pertence.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-104">These data service classes are tracked by using the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span> <span data-ttu-id="d8a2a-105">O cliente controla alterações para entidades que relatam usando métodos em <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-105">The client tracks changes to entities that you report by using methods on <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="d8a2a-106">Esses métodos permitem que o cliente rastrear entidades adicionadas e excluídas e também as alterações feitas nos valores de propriedade ou relações entre instâncias de entidade.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-106">These methods enable the client to track added and deleted entities and also changes that you make to property values or to relationships between entity instances.</span></span> <span data-ttu-id="d8a2a-107">As alterações controladas são enviadas para o serviço de dados como operações baseadas em REST ao chamar o <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> método.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-107">Those tracked changes are sent back to the data service as REST-based operations when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d8a2a-108">Quando você usa uma instância de <xref:System.Data.Services.Client.DataServiceCollection%601> para associar dados a controles, as alterações feitas aos dados no controle associado são automaticamente relatadas para o <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-108">When you use an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> to bind data to controls, changes made to data in the bound control are automatically reported to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="d8a2a-109">Para obter mais informações, consulte [vinculação de dados a controles](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="d8a2a-109">For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span></span>  
  
## <a name="adding-modifying-and-changing-entities"></a><span data-ttu-id="d8a2a-110">Adicionando, modificando e alteração de entidades</span><span class="sxs-lookup"><span data-stu-id="d8a2a-110">Adding, Modifying, and Changing Entities</span></span>  
 <span data-ttu-id="d8a2a-111">Quando você usa o **adicionar referência de serviço** caixa de diálogo no Visual Studio para adicionar uma referência a um [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed, as resultante cliente dados serviço classes cada têm um estático *criar* método que utiliza um parâmetro para cada propriedade de entidade não anuláveis.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-111">When you use the **Add Service Reference** dialog in Visual Studio to add a reference to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed, the resulting client data service classes each have a static *Create* method that takes one parameter for each non-nullable entity property.</span></span> <span data-ttu-id="d8a2a-112">Você pode usar esse método para criar instâncias da entidade de classes de tipo, como no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="d8a2a-112">You can use this method to create instances of entity type classes, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#createnewproduct)]
 [!code-vb[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#createnewproduct)]  
  
 <span data-ttu-id="d8a2a-113">Para adicionar uma instância de entidade, chame o *AdicionarPara* método o <xref:System.Data.Services.Client.DataServiceContext> classe gerada pelo **adicionar referência de serviço** caixa de diálogo, como no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="d8a2a-113">To add an entity instance, call the appropriate *AddTo* method on the <xref:System.Data.Services.Client.DataServiceContext> class generated by the **Add Service Reference** dialog box, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addproductspecific)]
 [!code-vb[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addproductspecific)]  
  
 <span data-ttu-id="d8a2a-114">Isso adiciona o objeto para o contexto e para o conjunto correto de entidade.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-114">This adds the object to the context and into the correct entity set.</span></span> <span data-ttu-id="d8a2a-115">Você também pode chamar <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, mas em vez disso, você deve fornecer o nome do conjunto de entidade.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-115">You can also call <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, but you must instead supply the entity set name.</span></span> <span data-ttu-id="d8a2a-116">Se a entidade adicionada tem uma ou mais relações com outras entidades, você pode usar o <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> método ou use um dos métodos anteriores e definir explicitamente esses links.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-116">If the added entity has one or more relationships to other entities, you can either use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method or use one of the previous methods and also explicitly define those links.</span></span> <span data-ttu-id="d8a2a-117">Essas operações são discutidas neste tópico.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-117">These operations are discussed later in this topic.</span></span>  
  
 <span data-ttu-id="d8a2a-118">Para modificar uma instância de entidade existente, a primeira consulta para essa entidade, faça as alterações desejadas para suas propriedades e, em seguida, chame o <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> método o <xref:System.Data.Services.Client.DataServiceContext> para indicar a biblioteca de cliente que ele precisa enviar uma atualização para o objeto, como mostrado na o exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="d8a2a-118">To modify an existing entity instance, first query for that entity, make the desired changes to its properties, and then call the <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> to indicate to the client library that it needs to send an update for that object, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#modifycustomerspecific)]
 [!code-vb[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#modifycustomerspecific)]  
  
 <span data-ttu-id="d8a2a-119">Para excluir uma instância de entidade, chame o <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> método sobre o <xref:System.Data.Services.Client.DataServiceContext>, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="d8a2a-119">To delete an entity instance, call the <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext>, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#deleteproductspecific)]
 [!code-vb[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#deleteproductspecific)]  
  
 <span data-ttu-id="d8a2a-120">Para obter mais informações, consulte [como: adicionar, modificar e excluir entidades](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="d8a2a-120">For more information, see [How to: Add, Modify, and Delete Entities](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md).</span></span>  
  
## <a name="attaching-entities"></a><span data-ttu-id="d8a2a-121">Anexar entidades</span><span class="sxs-lookup"><span data-stu-id="d8a2a-121">Attaching Entities</span></span>  
 <span data-ttu-id="d8a2a-122">A biblioteca de cliente permite que você salve as atualizações feitas a uma entidade sem primeiro executar uma consulta ao carregar a entidade para a <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-122">The client library enables you to save updates that you made to an entity without first executing a query to load the entity into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="d8a2a-123">Use o <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> método para anexar um objeto existente a uma entidade específica definida <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-123">Use the <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> method to attach an existing object to a specific entity set in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="d8a2a-124">Você pode modificar o objeto e salvar as alterações para o serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-124">You can then modify the object and save the changes to the data service.</span></span> <span data-ttu-id="d8a2a-125">No exemplo a seguir, um objeto de cliente que foi alterado é anexado ao contexto e, em seguida, <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> é chamado para marcar o objeto anexado como <xref:System.Data.Services.Client.EntityStates.Modified> antes de <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> é chamado:</span><span class="sxs-lookup"><span data-stu-id="d8a2a-125">In the following example, a customer object that has been changed is attached to the context and then <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> is called to mark the attached object as <xref:System.Data.Services.Client.EntityStates.Modified> before <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#attachobjectspecific)]
 [!code-vb[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#attachobjectspecific)]  
  
 <span data-ttu-id="d8a2a-126">As seguintes considerações se aplicam ao anexar objetos:</span><span class="sxs-lookup"><span data-stu-id="d8a2a-126">The following considerations apply when attaching objects:</span></span>  
  
-   <span data-ttu-id="d8a2a-127">Um objeto está anexado no <xref:System.Data.Services.Client.EntityStates.Unchanged> estado.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-127">An object is attached in the <xref:System.Data.Services.Client.EntityStates.Unchanged> state.</span></span>  
  
-   <span data-ttu-id="d8a2a-128">Quando um objeto é anexado, objetos que estão relacionados ao objeto anexado não estão conectados também.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-128">When an object is attached, objects that are related to the attached object are not also attached.</span></span>  
  
-   <span data-ttu-id="d8a2a-129">Não pode ser anexado a um objeto se a entidade já está sendo controlada pelo contexto.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-129">An object cannot be attached if the entity is already being tracked by the context.</span></span>  
  
-   <span data-ttu-id="d8a2a-130">O <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> sobrecarga do método que utiliza um `etag` parâmetro é usado quando você anexar um objeto de entidade que foi recebido juntamente com um valor de eTag.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-130">The <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> method overload that takes an `etag` parameter is used when you attach an entity object that was received along with an eTag value.</span></span> <span data-ttu-id="d8a2a-131">Esse valor de eTag, em seguida, é usado para verificar se há simultaneidade quando as alterações para o objeto anexado são salvas.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-131">This eTag value is then used to check for concurrency when changes to the attached object are saved.</span></span>  
  
 <span data-ttu-id="d8a2a-132">Para obter mais informações, consulte [como: anexar uma entidade existente para o DataServiceContext](../../../../docs/framework/data/wcf/attach-an-existing-entity-to-dc-wcf-data.md).</span><span class="sxs-lookup"><span data-stu-id="d8a2a-132">For more information, see [How to: Attach an Existing Entity to the DataServiceContext](../../../../docs/framework/data/wcf/attach-an-existing-entity-to-dc-wcf-data.md).</span></span>  
  
## <a name="creating-and-modifying-relationship-links"></a><span data-ttu-id="d8a2a-133">Criando e modificando Links de relação</span><span class="sxs-lookup"><span data-stu-id="d8a2a-133">Creating and Modifying Relationship Links</span></span>  
 <span data-ttu-id="d8a2a-134">Quando você adiciona uma nova entidade usando o <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> apropriado ou método *AdicionarPara* método do <xref:System.Data.Services.Client.DataServiceContext> classe que o **adicionar referência de serviço** diálogo gera, todas as relações entre a nova entidade e entidades relacionadas não são automaticamente definidas.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-134">When you add a new entity by using either the <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> method or the appropriate *AddTo* method of the <xref:System.Data.Services.Client.DataServiceContext> class that the **Add Service Reference** dialog generates, any relationships between the new entity and related entities are not automatically defined.</span></span>  
  
 <span data-ttu-id="d8a2a-135">Você pode criar e alterar relações entre instâncias de entidade e que a biblioteca cliente refletir essas alterações no serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-135">You can create and change relationships between entity instances and have the client library reflect those changes in the data service.</span></span> <span data-ttu-id="d8a2a-136">Relações entre entidades são definidas como associações no modelo e o <xref:System.Data.Services.Client.DataServiceContext> controla cada relação como um objeto de link no contexto.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-136">Relationships between entities are defined as associations in the model, and the <xref:System.Data.Services.Client.DataServiceContext> tracks each relationship as a link object in the context.</span></span> [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="d8a2a-137">fornece os métodos a seguir sobre o <xref:System.Data.Services.Client.DataServiceContext> classe para criar, modificar e excluir esses links:</span><span class="sxs-lookup"><span data-stu-id="d8a2a-137"> provides the following methods on the <xref:System.Data.Services.Client.DataServiceContext> class to create, modify, and delete these links:</span></span>  
  
|<span data-ttu-id="d8a2a-138">Método</span><span class="sxs-lookup"><span data-stu-id="d8a2a-138">Method</span></span>|<span data-ttu-id="d8a2a-139">Descrição</span><span class="sxs-lookup"><span data-stu-id="d8a2a-139">Description</span></span>|  
|------------|-----------------|  
|<xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A>|<span data-ttu-id="d8a2a-140">Cria um novo link entre dois objetos de entidade relacionada.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-140">Creates a new link between two related entity objects.</span></span> <span data-ttu-id="d8a2a-141">Chamar esse método é equivalente a chamar <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> e <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> para criar o novo objeto e definir a relação a um objeto existente.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-141">Calling this method is equivalent to calling <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> and <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> to both create the new object and define the relationship to an existing object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>|<span data-ttu-id="d8a2a-142">Cria um novo link entre dois objetos de entidade relacionada.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-142">Creates a new link between two related entity objects.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>|<span data-ttu-id="d8a2a-143">Atualiza um link existente entre dois objetos de entidade relacionada.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-143">Updates an existing link between two related entity objects.</span></span> <span data-ttu-id="d8a2a-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>também é usado para excluir links com uma cardinalidade de zero-ou-um-para-um (`0..1:1`) e um para um (`1:1`).</span><span class="sxs-lookup"><span data-stu-id="d8a2a-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> is also used to delete links with a cardinality of zero-or-one-to-one (`0..1:1`) and one-to-one (`1:1`).</span></span> <span data-ttu-id="d8a2a-145">Você pode fazer isso definindo o objeto relacionado `null`.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-145">You can do this by setting the related object to `null`.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DeleteLink%2A>|<span data-ttu-id="d8a2a-146">Marca um link que o contexto está controlando para exclusão quando o <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> método é chamado.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-146">Marks a link that the context is tracking for deletion when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called.</span></span> <span data-ttu-id="d8a2a-147">Use esse método quando você exclui um objeto relacionado ou alterar uma relação, primeiro excluir o link para um objeto existente e, em seguida, adicionar um link para o novo objeto relacionado.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-147">Use this method when you delete a related object or change a relationship by first deleting the link to an existing object and then adding a link to the new related object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AttachLink%2A>|<span data-ttu-id="d8a2a-148">Notifica o contexto de um link existente entre dois objetos de entidade.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-148">Notifies the context of an existing link between two entity objects.</span></span> <span data-ttu-id="d8a2a-149">O contexto supõe que esse relação já existe no serviço de dados e não tentará criar o link quando você chamar o <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> método.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-149">The context assumes that this relationship already exists in the data service and does not try to create the link when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span> <span data-ttu-id="d8a2a-150">Use este método quando você anexar objetos em um contexto e precisa anexar também o link entre os dois.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-150">Use this method when you attach objects to a context and need to also attach the link between the two.</span></span> <span data-ttu-id="d8a2a-151">Se você estiver definindo uma nova relação, você deve usar <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-151">If you are defining a new relationship, you should instead use <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DetachLink%2A>|<span data-ttu-id="d8a2a-152">Interrompe o link especificado no contexto de controle.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-152">Stops tracking the specified link in the context.</span></span> <span data-ttu-id="d8a2a-153">Esse método é usado para excluir um-para-muitos (`*:*`) relações.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-153">This method is used to delete one-to-many (`*:*`) relationships.</span></span> <span data-ttu-id="d8a2a-154">Para obter links de relacionamento com uma cardinalidade de um, você deve usar <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-154">For relationship links with a cardinality of one, you must instead use <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span></span>|  
  
 <span data-ttu-id="d8a2a-155">O exemplo a seguir mostra como usar o <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> método para adicionar um novo `Order_Detail` que está relacionado a um existente `Orders` entidade.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-155">The following example shows how to use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method to add a new `Order_Detail` that is related to an existing `Orders` entity.</span></span> <span data-ttu-id="d8a2a-156">Porque o novo `Order_Details` objeto agora é controlado pelo <xref:System.Data.Services.Client.DataServiceContext>, a relação de adicionado `Order_Details` objeto existente `Products` entidade é definida por chamar o <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> método:</span><span class="sxs-lookup"><span data-stu-id="d8a2a-156">Because the new `Order_Details` object is now tracked by the <xref:System.Data.Services.Client.DataServiceContext>, the relationship of the added `Order_Details` object to the existing `Products` entity is defined by calling the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addorderdetailtoorderspecific)]
 [!code-vb[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addorderdetailtoorderspecific)]  
  
 <span data-ttu-id="d8a2a-157">Enquanto o <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> método define links que deve ser criado no serviço de dados, para que esses links refletidas nos objetos que estão no contexto, você também deve definir as propriedades de navegação nos próprios objetos.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-157">While the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method defines links that must be created in the data service, to have these links reflected in the objects that are in the context, you must also set the navigation properties on the objects themselves.</span></span> <span data-ttu-id="d8a2a-158">No exemplo anterior, você deve definir as propriedades de navegação da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="d8a2a-158">In the previous example, you should set the navigation properties as follows:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#setnavprops)]
 [!code-vb[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#setnavprops)]  
  
 <span data-ttu-id="d8a2a-159">Para obter mais informações, consulte [como: definir relações de entidade](../../../../docs/framework/data/wcf/how-to-define-entity-relationships-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="d8a2a-159">For more information, see [How to: Define Entity Relationships](../../../../docs/framework/data/wcf/how-to-define-entity-relationships-wcf-data-services.md).</span></span>  
  
## <a name="saving-changes"></a><span data-ttu-id="d8a2a-160">Salvando alterações</span><span class="sxs-lookup"><span data-stu-id="d8a2a-160">Saving Changes</span></span>  
 <span data-ttu-id="d8a2a-161">As alterações são rastreadas na <xref:System.Data.Services.Client.DataServiceContext> instância, mas não são enviadas para o servidor imediatamente.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-161">Changes are tracked in the <xref:System.Data.Services.Client.DataServiceContext> instance but not sent to the server immediately.</span></span> <span data-ttu-id="d8a2a-162">Depois que você tiver terminado com as alterações necessárias para uma atividade especificada, chame <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> para enviar todas as alterações para o serviço de dados.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-162">After you are finished with the required changes for a specified activity, call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> to submit all the changes to the data service.</span></span> <span data-ttu-id="d8a2a-163">Para obter mais informações, consulte [Gerenciando o contexto do serviço de dados](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="d8a2a-163">For more information, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span> <span data-ttu-id="d8a2a-164">Você também pode salvar alterações de forma assíncrona usando o <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> e <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A> métodos.</span><span class="sxs-lookup"><span data-stu-id="d8a2a-164">You can also save changes asynchronously by using the <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> and <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A> methods.</span></span> <span data-ttu-id="d8a2a-165">Para obter mais informações, consulte [operações assíncronas](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="d8a2a-165">For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d8a2a-166">Consulte também</span><span class="sxs-lookup"><span data-stu-id="d8a2a-166">See Also</span></span>  
 <span data-ttu-id="d8a2a-167">[WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md) (Biblioteca de clientes do WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="d8a2a-167">[WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)</span></span>  
 <span data-ttu-id="d8a2a-168">[Querying the Data Service](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md) (Consultando o serviço de dados)</span><span class="sxs-lookup"><span data-stu-id="d8a2a-168">[Querying the Data Service](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)</span></span>  
 [<span data-ttu-id="d8a2a-169">Operações assíncronas</span><span class="sxs-lookup"><span data-stu-id="d8a2a-169">Asynchronous Operations</span></span>](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)  
 [<span data-ttu-id="d8a2a-170">Operações de envio em lote</span><span class="sxs-lookup"><span data-stu-id="d8a2a-170">Batching Operations</span></span>](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md)  
 [<span data-ttu-id="d8a2a-171">Materialização de objetos</span><span class="sxs-lookup"><span data-stu-id="d8a2a-171">Object Materialization</span></span>](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md)  
 [<span data-ttu-id="d8a2a-172">Gerenciando o contexto do serviço de dados</span><span class="sxs-lookup"><span data-stu-id="d8a2a-172">Managing the Data Service Context</span></span>](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md)
