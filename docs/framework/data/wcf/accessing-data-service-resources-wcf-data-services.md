---
title: Acessando recursos do serviço de dados (WCF Data Services)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, querying
- getting started, WCF Data Services
- querying the data service [WCF Data Service]
- WCF Data Services, getting started
- WCF Data Services, accessing data
ms.assetid: 9665ff5b-3e3a-495d-bf83-d531d5d060ed
ms.openlocfilehash: cf6877dd67ad9e17a43be5eafb84a2ecf21d7190
ms.sourcegitcommit: f348c84443380a1959294cdf12babcb804cfa987
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/12/2019
ms.locfileid: "73975442"
---
# <a name="accessing-data-service-resources-wcf-data-services"></a><span data-ttu-id="bff84-102">Acessando recursos do serviço de dados (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="bff84-102">Accessing Data Service Resources (WCF Data Services)</span></span>
[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="bff84-103">dá suporte ao Protocolo Open Data (OData) para expor seus dados como um feed com recursos que podem ser endereçáveis por URIs.</span><span class="sxs-lookup"><span data-stu-id="bff84-103">supports the Open Data Protocol (OData) to expose your data as a feed with resources that are addressable by URIs.</span></span> <span data-ttu-id="bff84-104">Esses recursos são representados de acordo com as convenções de relacionamento de entidade do [modelo de dados de entidade](../adonet/entity-data-model.md).</span><span class="sxs-lookup"><span data-stu-id="bff84-104">These resources are represented according to the entity-relationship conventions of the [Entity Data Model](../adonet/entity-data-model.md).</span></span> <span data-ttu-id="bff84-105">Nesse modelo, as entidades representam unidades operacionais de dados que são tipos de dados em um domínio de aplicativo, como clientes, pedidos, itens e classes.</span><span class="sxs-lookup"><span data-stu-id="bff84-105">In this model, entities represent operational units of data that are data types in an application domain, such as customers, orders, items, and products.</span></span> <span data-ttu-id="bff84-106">Os dados de entidades são acessados e alterados usando-se a semântica REST (transferência de estado representativo), especificamente os verbos HTTP padrão GET, PUT, POST e DELETE.</span><span class="sxs-lookup"><span data-stu-id="bff84-106">Entity data is accessed and changed by using the semantics of representational state transfer (REST), specifically the standard HTTP verbs of GET, PUT, POST, and DELETE.</span></span>  
  
## <a name="addressing-resources"></a><span data-ttu-id="bff84-107">Direcionando recursos</span><span class="sxs-lookup"><span data-stu-id="bff84-107">Addressing Resources</span></span>  
 <span data-ttu-id="bff84-108">No OData, você aborda todos os dados expostos pelo modelo de dados usando um URI.</span><span class="sxs-lookup"><span data-stu-id="bff84-108">In OData, you address any data exposed by the data model by using a URI.</span></span> <span data-ttu-id="bff84-109">Por exemplo, o URI a seguir retorna um feed que é o conjunto de entidades Customers, que contém entradas para todas as instâncias do tipo de entidade Customer:</span><span class="sxs-lookup"><span data-stu-id="bff84-109">For example, the following URI returns a feed that is the Customers entity set, which contains entries for all instances of the Customer entity type:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Customers>
  
 <span data-ttu-id="bff84-110">As entidades têm propriedades especiais chamadas chaves de entidade.</span><span class="sxs-lookup"><span data-stu-id="bff84-110">Entities have special properties called entity keys.</span></span> <span data-ttu-id="bff84-111">Uma chave de entidade é usada para identificar exclusivamente uma única entidade em um conjunto de entidades.</span><span class="sxs-lookup"><span data-stu-id="bff84-111">An entity key is used to uniquely identify a single entity in an entity set.</span></span> <span data-ttu-id="bff84-112">Isso permite que você direcione uma instância específica de um tipo de entidade no conjunto de entidades.</span><span class="sxs-lookup"><span data-stu-id="bff84-112">This enables you to address a specific instance of an entity type in the entity set.</span></span> <span data-ttu-id="bff84-113">Por exemplo, o URI a seguir retorna uma entrada para uma instância específica de tipo de entidade Customer que tem um valor de chave `ALFKI`:</span><span class="sxs-lookup"><span data-stu-id="bff84-113">For example, the following URI returns an entry for a specific instance of the Customer entity type that has a key value of `ALFKI`:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')>
  
 <span data-ttu-id="bff84-114">As propriedades primitivas e complexas de uma instância de entidade também podem ser direcionadas individualmente.</span><span class="sxs-lookup"><span data-stu-id="bff84-114">Primitive and complex properties of an entity instance can also be individually addressed.</span></span> <span data-ttu-id="bff84-115">Por exemplo, o seguinte URI retorna um elemento XML que contém o valor da propriedade `ContactName` para um cliente específico:</span><span class="sxs-lookup"><span data-stu-id="bff84-115">For example, the following URI returns an XML element that contains the `ContactName` property value for a specific Customer:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/ContactName>
  
 <span data-ttu-id="bff84-116">Quando você inclui o ponto de extremidade `$value` no URI anterior, somente o valor da propriedade primitiva é retornado na mensagem de resposta.</span><span class="sxs-lookup"><span data-stu-id="bff84-116">When you include the `$value` endpoint in the previous URI, only the value of the primitive property is returned in the response message.</span></span> <span data-ttu-id="bff84-117">O exemplo a seguir retorna apenas a cadeia de caracteres “Maria Anders” sem o elemento XML:</span><span class="sxs-lookup"><span data-stu-id="bff84-117">The following example returns only the string "Maria Anders" without the XML element:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/ContactName/$value>
  
 <span data-ttu-id="bff84-118">As relações entre as entidades são definidas no modelo de dados por associações.</span><span class="sxs-lookup"><span data-stu-id="bff84-118">Relationships between entities are defined in the data model by associations.</span></span> <span data-ttu-id="bff84-119">Essas associações permitem que você direcione entidades relacionadas usando propriedades de navegação de uma instância de entidade.</span><span class="sxs-lookup"><span data-stu-id="bff84-119">These associations enable you to address related entities by using navigation properties of an entity instance.</span></span> <span data-ttu-id="bff84-120">Uma propriedade de navegação pode retornar uma única entidade relacionada, no caso de uma relação muitos-para-um, ou um conjunto de entidades relacionadas, no caso de uma relação um-para-muitos.</span><span class="sxs-lookup"><span data-stu-id="bff84-120">A navigation property can return either a single related entity, in the case of a many-to-one relationship, or a set of related entities, in the case of a one-to-many relationship.</span></span> <span data-ttu-id="bff84-121">Por exemplo, o seguinte URI retorna um feed que é o conjunto de todos os pedidos relacionados a um cliente específico:</span><span class="sxs-lookup"><span data-stu-id="bff84-121">For example, the following URI returns a feed that is the set of all the Orders that are related to a specific Customer:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/Orders>
  
 <span data-ttu-id="bff84-122">As relações, que são geralmente bidirecionais, são representadas por um par de propriedades de navegação.</span><span class="sxs-lookup"><span data-stu-id="bff84-122">Relationships, which are usually bi-directional, are represented by a pair of navigation properties.</span></span> <span data-ttu-id="bff84-123">Como o inverso da relação mostrada no exemplo anterior, o seguinte URI retorna uma referência à entidade Customer à qual uma entidade Order específica pertence:</span><span class="sxs-lookup"><span data-stu-id="bff84-123">As the reverse of the relationship shown in the previous example, the following URI returns a reference to the Customer entity to which a specific Order entity belongs:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Orders(10643)/Customer>
  
 <span data-ttu-id="bff84-124">O OData também permite que você resolva recursos com base nos resultados de expressões de consulta.</span><span class="sxs-lookup"><span data-stu-id="bff84-124">OData also enables you to address resources based on the results of query expressions.</span></span> <span data-ttu-id="bff84-125">Isso possibilita filtrar conjuntos de recursos com base em uma expressão avaliada.</span><span class="sxs-lookup"><span data-stu-id="bff84-125">This makes it possible to filter sets of resources based on an evaluated expression.</span></span> <span data-ttu-id="bff84-126">Por exemplo, o seguinte URI filtra os recursos para retornar somente os pedidos para o cliente especificado que foram remetidos desde 22 de setembro de 1997:</span><span class="sxs-lookup"><span data-stu-id="bff84-126">For example, the following URI filters the resources to return only the Orders for the specified Customer that have shipped since September 22, 1997:</span></span>  
  
<span data-ttu-id="bff84-127"><https://services.odata.org/Northwind/Northwind.svc/Customers( ' ALFKI ')/Orders? $filter = DataDeEnvio gt DateTime ' 1997-09-22T00:00:00 ' ></span><span class="sxs-lookup"><span data-stu-id="bff84-127"><https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/Orders?$filter=ShippedDate gt datetime'1997-09-22T00:00:00'></span></span>
  
 <span data-ttu-id="bff84-128">Para obter mais informações, consulte [OData: convenções de URI](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).</span><span class="sxs-lookup"><span data-stu-id="bff84-128">For more information, see [OData: URI Conventions](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).</span></span>
  
## <a name="system-query-options"></a><span data-ttu-id="bff84-129">Opções de consulta de sistema</span><span class="sxs-lookup"><span data-stu-id="bff84-129">System Query Options</span></span>  
 <span data-ttu-id="bff84-130">O OData define um conjunto de opções de consulta do sistema que você pode usar para executar operações de consulta tradicionais em recursos, como filtragem, classificação e paginação.</span><span class="sxs-lookup"><span data-stu-id="bff84-130">OData defines a set of system query options that you can use to perform traditional query operations against resources, such as filtering, sorting, and paging.</span></span> <span data-ttu-id="bff84-131">Por exemplo, o URI a seguir retorna o conjunto de todas as entidades de `Order`, juntamente com as entidades de `Order_Detail` relacionadas, os CEPs que não terminam em `100`:</span><span class="sxs-lookup"><span data-stu-id="bff84-131">For example, the following URI returns the set of all the `Order` entities, along with related `Order_Detail` entities, the postal codes of which do not end in `100`:</span></span>  
  
<span data-ttu-id="bff84-132"><https://services.odata.org/Northwind/Northwind.svc/Orders? $filter = not EndsWith (ShipPostalCode, ' 100 ') & $expand = Order_Details & $orderby = CidadeDeDestino ></span><span class="sxs-lookup"><span data-stu-id="bff84-132"><https://services.odata.org/Northwind/Northwind.svc/Orders?$filter=not endswith(ShipPostalCode,'100')&$expand=Order_Details&$orderby=ShipCity></span></span>
  
 <span data-ttu-id="bff84-133">As entradas no feed retornado também são ordenadas pelo valor da propriedade ShipCity dos pedidos.</span><span class="sxs-lookup"><span data-stu-id="bff84-133">The entries in the returned feed are also ordered by the value of the ShipCity property of the orders.</span></span>  
  
 <span data-ttu-id="bff84-134">o [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] dá suporte às seguintes opções de consulta do sistema OData:</span><span class="sxs-lookup"><span data-stu-id="bff84-134">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] supports the following OData system query options:</span></span>  
  
|<span data-ttu-id="bff84-135">Opção de consulta</span><span class="sxs-lookup"><span data-stu-id="bff84-135">Query Option</span></span>|<span data-ttu-id="bff84-136">Descrição</span><span class="sxs-lookup"><span data-stu-id="bff84-136">Description</span></span>|  
|------------------|-----------------|  
|`$orderby`|<span data-ttu-id="bff84-137">Define uma ordem de classificação padrão para entidades no feed retornado.</span><span class="sxs-lookup"><span data-stu-id="bff84-137">Defines a default sort order for entities in the returned feed.</span></span> <span data-ttu-id="bff84-138">A consulta a seguir ordena o feed de clientes retornado por região e cidade:</span><span class="sxs-lookup"><span data-stu-id="bff84-138">The following query orders the returned customers feed by county and city:</span></span><br /><br /> <https://services.odata.org/Northwind/Northwind.svc/Customers?$orderby=Country,City>|  
|`$top`|<span data-ttu-id="bff84-139">Especifica o número de entidades a serem incluídas no feed retornado.</span><span class="sxs-lookup"><span data-stu-id="bff84-139">Specifies the number of entities to include in the returned feed.</span></span> <span data-ttu-id="bff84-140">O exemplo a seguir ignora os 10 primeiros clientes e retorna os 10 seguintes:</span><span class="sxs-lookup"><span data-stu-id="bff84-140">The following example skips the first 10 customers and then returns the next 10:</span></span><br /><br /> <https://services.odata.org/Northwind/Northwind.svc/Customers?$skip=10&$top=10>|  
|`$skip`|<span data-ttu-id="bff84-141">Especifica o número de entidades a serem ignoradas antes de começar a retornar entidades no feed.</span><span class="sxs-lookup"><span data-stu-id="bff84-141">Specifies the number of entities to skip before starting to return entities in the feed.</span></span> <span data-ttu-id="bff84-142">O exemplo a seguir ignora os 10 primeiros clientes e retorna os 10 seguintes:</span><span class="sxs-lookup"><span data-stu-id="bff84-142">The following example skips the first 10 customers and then returns the next 10:</span></span><br /><br /> <https://services.odata.org/Northwind/Northwind.svc/Customers?$skip=10&$top=10>|  
|`$filter`|<span data-ttu-id="bff84-143">Define uma expressão que filtra as entidades retornadas no feed com base em critérios específicos.</span><span class="sxs-lookup"><span data-stu-id="bff84-143">Defines an expression that filters the entities returned in the feed based on specific criteria.</span></span> <span data-ttu-id="bff84-144">Esta opção de consulta oferece suporte a um conjunto de operadores de comparação lógicos, operadores aritméticos e funções de consulta predefinidas que são usadas para avaliar a expressão de filtro.</span><span class="sxs-lookup"><span data-stu-id="bff84-144">This query option supports a set of logical comparison operators, arithmetic operators, and predefined query functions that are used to evaluate the filter expression.</span></span> <span data-ttu-id="bff84-145">O exemplo a seguir retorna todos os pedidos cujos códigos postais não terminam em 100:</span><span class="sxs-lookup"><span data-stu-id="bff84-145">The following example returns all orders the postal codes of which do not end in 100:</span></span><br /><br /> <span data-ttu-id="bff84-146"><https://services.odata.org/Northwind/Northwind.svc/Orders? $filter = não EndsWith (ShipPostalCode, ' 100 ') ></span><span class="sxs-lookup"><span data-stu-id="bff84-146"><https://services.odata.org/Northwind/Northwind.svc/Orders?$filter=not endswith(ShipPostalCode,'100')></span></span>|  
|`$expand`|<span data-ttu-id="bff84-147">Especifica quais entidades relacionadas são retornadas pela consulta.</span><span class="sxs-lookup"><span data-stu-id="bff84-147">Specifies which related entities are returned by the query.</span></span> <span data-ttu-id="bff84-148">As entidades relacionadas são incluídas como um feed ou uma entrada embutida na entidade retornada pela consulta.</span><span class="sxs-lookup"><span data-stu-id="bff84-148">Related entities are included as either a feed or an entry inline with the entity returned by the query.</span></span> <span data-ttu-id="bff84-149">O exemplo a seguir retorna o pedido do cliente 'ALFKI' junto com os detalhes dos itens de cada ordem:</span><span class="sxs-lookup"><span data-stu-id="bff84-149">The following example returns the order for the customer 'ALFKI' along with the item details for each order:</span></span><br /><br /> <https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/Orders?$expand=Order_Details>|  
|`$select`|<span data-ttu-id="bff84-150">Especifica uma projeção que define as propriedades da entidade que são retornadas na projeção.</span><span class="sxs-lookup"><span data-stu-id="bff84-150">Specifies a projection that defines the properties of the entity are returned in the projection.</span></span> <span data-ttu-id="bff84-151">Por padrão, todas as propriedades de uma entidade são retornadas em um feed.</span><span class="sxs-lookup"><span data-stu-id="bff84-151">By default, all properties of an entity are returned in a feed.</span></span> <span data-ttu-id="bff84-152">A seguinte consulta retorna apenas três propriedades da entidade `Customer`:</span><span class="sxs-lookup"><span data-stu-id="bff84-152">The following query returns only three properties of the `Customer` entity:</span></span><br /><br /> <https://services.odata.org/Northwind/Northwind.svc/Customers?$select=CustomerID,CompanyName,City>|  
|`$inlinecount`|<span data-ttu-id="bff84-153">Solicitações de que uma contagem do número de entidades retornadas no feed seja incluída no feed.</span><span class="sxs-lookup"><span data-stu-id="bff84-153">Requests that a count of the number of entities returned in the feed be included with the feed.</span></span>|  
  
## <a name="addressing-relationships"></a><span data-ttu-id="bff84-154">Direcionando relações</span><span class="sxs-lookup"><span data-stu-id="bff84-154">Addressing Relationships</span></span>  
 <span data-ttu-id="bff84-155">Além de tratar conjuntos de entidades e instâncias de entidade, o OData também permite que você resolva as associações que representam as relações entre entidades.</span><span class="sxs-lookup"><span data-stu-id="bff84-155">In addition to addressing entity sets and entity instances, OData also enables you to address the associations that represent relationships between entities.</span></span> <span data-ttu-id="bff84-156">Essa funcionalidade é necessária para que seja possível criar ou alterar uma relação entre duas instâncias de entidade, como o remetente que está relacionado a um determinado pedido no banco de dados de exemplo Northwind.</span><span class="sxs-lookup"><span data-stu-id="bff84-156">This functionality is required to be able to create or change a relationship between two entity instances, such as the shipper that is related to a given order in the Northwind sample database.</span></span> <span data-ttu-id="bff84-157">O OData dá suporte a um operador de `$link` para atender especificamente às associações entre entidades.</span><span class="sxs-lookup"><span data-stu-id="bff84-157">OData supports a `$link` operator to specifically address the associations between entities.</span></span> <span data-ttu-id="bff84-158">Por exemplo, o URI a seguir é especificado em uma mensagem de solicitação PUT HTTP para alterar o remetente do pedido especificado para um novo remetente.</span><span class="sxs-lookup"><span data-stu-id="bff84-158">For example, the following URI is specified in an HTTP PUT request message to change the shipper for the specified order to a new shipper.</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Orders(10643)/$links/Shipper>
  
 <span data-ttu-id="bff84-159">Para obter mais informações, consulte a seção `3.2. Addressing Links between Entries` em [OData: convenções de URI](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).</span><span class="sxs-lookup"><span data-stu-id="bff84-159">For more information, see section `3.2. Addressing Links between Entries` at [OData: URI Conventions](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).</span></span>
  
## <a name="consuming-the-returned-feed"></a><span data-ttu-id="bff84-160">Consumindo o feed retornado</span><span class="sxs-lookup"><span data-stu-id="bff84-160">Consuming the Returned Feed</span></span>  
 <span data-ttu-id="bff84-161">O URI de um recurso OData permite que você resolva os dados de entidade expostos pelo serviço.</span><span class="sxs-lookup"><span data-stu-id="bff84-161">The URI of an OData resource enables you to address entity data exposed by the service.</span></span> <span data-ttu-id="bff84-162">Quando você insere um URI no campo endereço de um navegador da Web, uma representação de feed OData do recurso solicitado é retornada.</span><span class="sxs-lookup"><span data-stu-id="bff84-162">When you enter a URI into the address field of a Web browser, a OData feed representation of the requested resource is returned.</span></span> <span data-ttu-id="bff84-163">Para obter mais informações, consulte o guia de [início rápido do WCF Data Services](quickstart-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bff84-163">For more information, see the [WCF Data Services Quickstart](quickstart-wcf-data-services.md).</span></span> <span data-ttu-id="bff84-164">Embora um navegador da Web possa ser útil para testar se um recurso de serviço de dados retorna os dados esperados, os serviços de dados de produção que também podem criar, atualizar e excluir dados são geralmente acessados pelo código do aplicativo ou por linguagens de script em uma página da Web.</span><span class="sxs-lookup"><span data-stu-id="bff84-164">Although a Web browser may be useful for testing that a data service resource returns the expected data, production data services that can also create, update, and delete data are generally accessed by application code or scripting languages in a Web page.</span></span> <span data-ttu-id="bff84-165">Para obter mais informações, consulte [usando um serviço de dados em um aplicativo cliente](using-a-data-service-in-a-client-application-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bff84-165">For more information, see [Using a Data Service in a Client Application](using-a-data-service-in-a-client-application-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bff84-166">Consulte também</span><span class="sxs-lookup"><span data-stu-id="bff84-166">See also</span></span>

- [<span data-ttu-id="bff84-167">Site do Protocolo Open Data</span><span class="sxs-lookup"><span data-stu-id="bff84-167">Open Data Protocol Web site</span></span>](https://www.odata.org/)
