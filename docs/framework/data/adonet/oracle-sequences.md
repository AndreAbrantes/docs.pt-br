---
title: Sequências da Oracle
ms.date: 03/30/2017
ms.assetid: 27cd371d-8252-414d-b5b2-5d31fa44b585
ms.openlocfilehash: 4ba7b750d48613b80eca0ef3c7c2da127977498d
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64632336"
---
# <a name="oracle-sequences"></a><span data-ttu-id="3af32-102">Sequências da Oracle</span><span class="sxs-lookup"><span data-stu-id="3af32-102">Oracle Sequences</span></span>
<span data-ttu-id="3af32-103">O provedor de dados .NET Framework para Oracle fornece suporte para recuperar os principais valores do Oracle Sequence gerados pelo servidor depois de executar inserções usando o <xref:System.Data.OracleClient.OracleDataAdapter>.</span><span class="sxs-lookup"><span data-stu-id="3af32-103">The .NET Framework Data Provider for Oracle provides support for retrieving the server-generated key Oracle Sequence values after performing inserts by using the <xref:System.Data.OracleClient.OracleDataAdapter>.</span></span>  
  
 <span data-ttu-id="3af32-104">O SQL Server e a Oracle dão suporte à criação de incrementar automaticamente as colunas que podem ser designadas como chaves primárias.</span><span class="sxs-lookup"><span data-stu-id="3af32-104">SQL Server and Oracle support the creation of automatically incrementing columns that can be designated as primary keys.</span></span> <span data-ttu-id="3af32-105">Esses valores gerados pelo servidor como linhas são adicionados a uma tabela.</span><span class="sxs-lookup"><span data-stu-id="3af32-105">These values are generated by the server as rows are added to a table.</span></span> <span data-ttu-id="3af32-106">No SQL Server, você define a propriedade Identity de uma coluna; no Oracle, você cria uma Sequence.</span><span class="sxs-lookup"><span data-stu-id="3af32-106">In SQL Server, you set the Identity property of a column; in Oracle you create a Sequence.</span></span> <span data-ttu-id="3af32-107">A diferença entre colunas incrementar automaticamente colunas no SQL Server e sequências no Oracle é que:</span><span class="sxs-lookup"><span data-stu-id="3af32-107">The difference between auto-increment columns in SQL Server and sequences in Oracle is that:</span></span>  
  
- <span data-ttu-id="3af32-108">No SQL Server, você marca uma coluna como uma coluna de incremento automático e o SQL Server automaticamente gera novos valores para a coluna quando você insere uma nova linha.</span><span class="sxs-lookup"><span data-stu-id="3af32-108">In SQL Server, you mark a column as an auto-increment column and SQL Server automatically generates new values for the column when you insert a new row.</span></span>  
  
- <span data-ttu-id="3af32-109">No Oracle, você cria uma sequência para gerar novos valores para uma coluna na tabela, mas não há nenhum link direto entre a sequência e a tabela ou coluna.</span><span class="sxs-lookup"><span data-stu-id="3af32-109">In Oracle, you create a sequence to generate new values for a column in your table, but there is no direct link between the sequence and the table or column.</span></span> <span data-ttu-id="3af32-110">Uma sequência do Oracle é um objeto, como uma tabela ou procedimento armazenado.</span><span class="sxs-lookup"><span data-stu-id="3af32-110">An Oracle sequence is an object, like a table or a stored procedure.</span></span>  
  
 <span data-ttu-id="3af32-111">Quando você cria uma sequência em um banco de dados Oracle, pode definir seu valor inicial e o incremento entre seus valores.</span><span class="sxs-lookup"><span data-stu-id="3af32-111">When you create a sequence in an Oracle database, you can define its initial value and the increment between its values.</span></span> <span data-ttu-id="3af32-112">Você também pode consultar a sequência para novos valores antes de enviar novas linhas.</span><span class="sxs-lookup"><span data-stu-id="3af32-112">You can also query the sequence for new values before submitting new rows.</span></span> <span data-ttu-id="3af32-113">Isso significa que seu código pode reconhecer os principais valores para novas linhas antes de inseri-los no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3af32-113">That means your code can recognize the key values for new rows before you insert them into the database.</span></span>  
  
 <span data-ttu-id="3af32-114">Para obter mais informações sobre como criar colunas de incremento automático usando o SQL Server e ADO.NET, consulte [recuperando identidade ou valores de Autonumber](../../../../docs/framework/data/adonet/retrieving-identity-or-autonumber-values.md) e [criando colunas de incremento automático](../../../../docs/framework/data/adonet/dataset-datatable-dataview/creating-autoincrement-columns.md).</span><span class="sxs-lookup"><span data-stu-id="3af32-114">For more information about creating auto-increment columns by using SQL Server and ADO.NET, see [Retrieving Identity or Autonumber Values](../../../../docs/framework/data/adonet/retrieving-identity-or-autonumber-values.md) and [Creating AutoIncrement Columns](../../../../docs/framework/data/adonet/dataset-datatable-dataview/creating-autoincrement-columns.md).</span></span>  
  
## <a name="example"></a><span data-ttu-id="3af32-115">Exemplo</span><span class="sxs-lookup"><span data-stu-id="3af32-115">Example</span></span>  
 <span data-ttu-id="3af32-116">O exemplo C# a seguir demonstra como você pode recuperar novos valores de sequência no banco de dados Oracle.</span><span class="sxs-lookup"><span data-stu-id="3af32-116">The following C# example demonstrates how you can retrieve new sequence values from Oracle database.</span></span> <span data-ttu-id="3af32-117">O exemplo faz referência à sequência na consulta INSERT INTO usada para enviar as novas linhas e, em seguida, retorna o valor da sequência gerado usando a cláusula RETURNING introduzida no Oracle10g.</span><span class="sxs-lookup"><span data-stu-id="3af32-117">The example references the sequence in the INSERT INTO query used to submit the new rows, and then returns the sequence value generated using the RETURNING clause introduced in Oracle10g.</span></span> <span data-ttu-id="3af32-118">O exemplo adiciona uma série de novas linhas pendentes em um <xref:System.Data.DataTable> usando a funcionalidade de incremento automático do ADO.NET para gerar valores de chave primária de “espaço reservado”.</span><span class="sxs-lookup"><span data-stu-id="3af32-118">The example adds a series of pending new rows in a <xref:System.Data.DataTable> by using ADO.NET’s auto-increment functionality to generate "placeholder" primary key values.</span></span> <span data-ttu-id="3af32-119">Observe que o valor de incremento gerado pelo ADO.NET para a nova linha é apenas um "espaço reservado".</span><span class="sxs-lookup"><span data-stu-id="3af32-119">Note that the increment value ADO.NET generated for the new row is just a "placeholder".</span></span> <span data-ttu-id="3af32-120">Isso significa que o banco de dados pode gerar valores diferentes dos que o ADO.NET produz.</span><span class="sxs-lookup"><span data-stu-id="3af32-120">That means the database might generate different values from the ones ADO.NET generates.</span></span>  
  
 <span data-ttu-id="3af32-121">Antes de enviar as inserções pendentes para o banco de dados, o exemplo exibe o conteúdo das linhas.</span><span class="sxs-lookup"><span data-stu-id="3af32-121">Before submitting the pending inserts to the database, the example displays the contents of the rows.</span></span> <span data-ttu-id="3af32-122">Em seguida, o código cria um novo objeto <xref:System.Data.OracleClient.OracleDataAdapter> e define seu <xref:System.Data.OracleClient.OracleDataAdapter.InsertCommand%2A> e as propriedades <xref:System.Data.OracleClient.OracleDataAdapter.UpdateBatchSize%2A>.</span><span class="sxs-lookup"><span data-stu-id="3af32-122">Then, the code creates a new <xref:System.Data.OracleClient.OracleDataAdapter> object and sets its <xref:System.Data.OracleClient.OracleDataAdapter.InsertCommand%2A> and the <xref:System.Data.OracleClient.OracleDataAdapter.UpdateBatchSize%2A> properties.</span></span> <span data-ttu-id="3af32-123">O exemplo também fornece a lógica para retornar os valores gerados pelo servidor usando os parâmetros de saída.</span><span class="sxs-lookup"><span data-stu-id="3af32-123">The example also supplies the logic to return the server-generated values by using output parameters.</span></span> <span data-ttu-id="3af32-124">Em seguida, o exemplo executa a atualização para enviar as linhas pendentes e exibe o conteúdo do <xref:System.Data.DataTable>.</span><span class="sxs-lookup"><span data-stu-id="3af32-124">Then, the example executes the update to submit the pending rows and displays the contents of the <xref:System.Data.DataTable>.</span></span>  
  
```csharp  
public void OracleSequence(String connectionString)  
{  
   String insertString =   
      "INSERT INTO SequenceTest_Table (ID, OtherColumn)" +  
      "VALUES (SequenceTest_Sequence.NEXTVAL, :OtherColumn)" +  
      "RETURNING ID INTO :ID";  
  
   using (OracleConnection conn = new OracleConnection(connectionString))  
   {  
      //Open a connection.  
      conn.Open();  
      OracleCommand cmd = conn.CreateCommand();  
  
      // Prepare the database.  
      cmd.CommandText = "DROP SEQUENCE SequenceTest_Sequence";  
      try { cmd.ExecuteNonQuery(); } catch { }  
  
      cmd.CommandText = "DROP TABLE SequenceTest_Table";  
      try { cmd.ExecuteNonQuery(); } catch { }  
  
      cmd.CommandText = "CREATE TABLE SequenceTest_Table " +  
                     "(ID int PRIMARY KEY, OtherColumn varchar(255))";  
      cmd.ExecuteNonQuery();  
  
      cmd.CommandText = "CREATE SEQUENCE SequenceTest_Sequence " +  
                        "START WITH 100 INCREMENT BY 5";  
      cmd.ExecuteNonQuery();  
  
      DataTable testTable = new DataTable();  
      DataColumn column = testTable.Columns.Add("ID", typeof(int));  
      column.AutoIncrement = true;  
      column.AutoIncrementSeed = -1;  
      column.AutoIncrementStep = -1;  
      testTable.PrimaryKey = new DataColumn[] { column };  
      testTable.Columns.Add("OtherColumn", typeof(string));  
      for (int rowCounter = 1; rowCounter <= 15; rowCounter++)  
      {  
         testTable.Rows.Add(null, "Row #" + rowCounter.ToString());  
      }  
  
      Console.WriteLine("Before Update => ");  
      foreach (DataRow row in testTable.Rows)  
      {  
         Console.WriteLine("   {0} - {1}", row["ID"], row["OtherColumn"]);  
      }  
      Console.WriteLine();  
  
      cmd.CommandText =   
        "SELECT ID, OtherColumn FROM SequenceTest_Table";  
      OracleDataAdapter da = new OracleDataAdapter(cmd);  
      da.InsertCommand = new OracleCommand(insertString, conn);  
      da.InsertCommand.Parameters.Add(":ID", OracleType.Int32, 0, "ID");  
      da.InsertCommand.Parameters[0].Direction = ParameterDirection.Output;  
      da.InsertCommand.Parameters.Add(":OtherColumn", OracleType.VarChar, 255, "OtherColumn");  
      da.InsertCommand.UpdatedRowSource = UpdateRowSource.OutputParameters;  
      da.UpdateBatchSize = 10;  
  
      da.Update(testTable);  
  
      Console.WriteLine("After Update => ");  
      foreach (DataRow row in testTable.Rows)  
      {  
         Console.WriteLine("   {0} - {1}", row["ID"], row["OtherColumn"]);  
      }  
      // Close the connection.  
      conn.Close();  
   }  
}  
```  
  
## <a name="see-also"></a><span data-ttu-id="3af32-125">Consulte também</span><span class="sxs-lookup"><span data-stu-id="3af32-125">See also</span></span>

- <span data-ttu-id="3af32-126">[Oracle and ADO.NET](../../../../docs/framework/data/adonet/oracle-and-adonet.md) (Oracle e ADO.NET)</span><span class="sxs-lookup"><span data-stu-id="3af32-126">[Oracle and ADO.NET](../../../../docs/framework/data/adonet/oracle-and-adonet.md)</span></span>
- <span data-ttu-id="3af32-127">[ADO.NET Managed Providers and DataSet Developer Center](https://go.microsoft.com/fwlink/?LinkId=217917) (Central de desenvolvedores do DataSet e de provedores gerenciados do ADO.NET)</span><span class="sxs-lookup"><span data-stu-id="3af32-127">[ADO.NET Managed Providers and DataSet Developer Center](https://go.microsoft.com/fwlink/?LinkId=217917)</span></span>
