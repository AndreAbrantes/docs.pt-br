---
title: Mapeamentos de tipo personalizados de SQL-CLR
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-ado
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d916c7fb-4b56-4214-acbe-5e23365047b2
caps.latest.revision: "2"
author: JennieHubbard
ms.author: jhubbard
manager: jhubbard
ms.workload: dotnet
ms.openlocfilehash: 0df2c3eea706bae92a9cbef9165c374e8efb368a
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/22/2017
---
# <a name="sql-clr-custom-type-mappings"></a><span data-ttu-id="1b3ae-102">Mapeamentos de tipo personalizados de SQL-CLR</span><span class="sxs-lookup"><span data-stu-id="1b3ae-102">SQL-CLR Custom Type Mappings</span></span>
<span data-ttu-id="1b3ae-103">O mapeamento de classificação entre o SQL Server e o Common Language Runtime (CLR) é especificado automaticamente quando você usa a ferramenta de linha de comando SQLMetal, Object Relational Designer (object relational Designer de Objetos).</span><span class="sxs-lookup"><span data-stu-id="1b3ae-103">Type mapping between SQL Server and the common language runtime (CLR) is automatically specified when you use the SQLMetal command-line tool, Object Relational Designer (O/R Designer).</span></span>  
  
 <span data-ttu-id="1b3ae-104">Quando nenhum mapeamento personalizado é executado, essas ferramentas atribuir padrão mapeamentos de tipo conforme descrito em [mapeamento de tipo CLR SQL](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="1b3ae-104">When no customized mapping is performed, these tools assign default type mappings as described in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md).</span></span> <span data-ttu-id="1b3ae-105">Se você desejar digitar de maneira diferente mapeamentos dessas opções, você precisa fazer algumas personalização dos mapeamentos de tipo.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-105">If you want to type mappings differently from these defaults, you need to do some customization of the type mappings.</span></span>  
  
 <span data-ttu-id="1b3ae-106">Para personalizar mapeamentos de tipo, a abordagem recomendada é fazer alterações em um arquivo DBML intermediária.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-106">When customizing type mappings, the recommended approach is to make the changes in an intermediary DBML file.</span></span> <span data-ttu-id="1b3ae-107">Em seguida, o arquivo DBML personalizado deve ser usado quando você cria o código e arquivos de mapeamento com o SQLMetal ou o object relational Designer de Objetos.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-107">Then, your customized DBML file should be used when you create you code and mapping files with SQLMetal or O/R Designer.</span></span>  
  
 <span data-ttu-id="1b3ae-108">Uma vez que você instancia o objeto de <xref:System.Data.Linq.DataContext> de código e arquivos de mapeamento, o método de <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> cria um base de dados com base nos mapeamentos de tipo que são especificados.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-108">Once you instantiate the <xref:System.Data.Linq.DataContext> object from the code and mapping files, the <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> method creates a database based on the type mappings that are specified.</span></span> <span data-ttu-id="1b3ae-109">Se não houver nenhum atributo de CLR `type` especificado nos mapeamentos, os mapeamentos de tipo padrão será usado.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-109">If there are no CLR `type` attributes specified in the mappings, the default type mappings will be used.</span></span>  
  
## <a name="customization-with-sqlmetal-or-or-designer"></a><span data-ttu-id="1b3ae-110">Personalização com SQLMetal ou object relational Designer de Objetos</span><span class="sxs-lookup"><span data-stu-id="1b3ae-110">Customization with SQLMetal or O/R Designer</span></span>  
 <span data-ttu-id="1b3ae-111">Com SQLMetal e object relational Designer de Objetos, você pode criar automaticamente um modelo de objetos que inclui informações de mapeamento de tipo dentro ou fora do arquivo de código.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-111">With SQLMetal and O/R Designer, you can automatically create an object model that includes the type mapping information inside or outside the code file.</span></span> <span data-ttu-id="1b3ae-112">Como esses arquivos são substituídos por SQLMetal ou por object relational Designer de Objetos, cada vez que você recria seus mapeamentos, a abordagem recomendada para especificar mapeamentos de tipo personalizados é personalizar um arquivo DBML.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-112">Because these files are overwritten by SQLMetal or O/R Designer, each time you recreate your mappings, the recommended approach to specifying custom type mappings is to customize a DBML file.</span></span>  
  
 <span data-ttu-id="1b3ae-113">Para personalizar mapeamentos de tipo com SQLMetal ou object relational Designer de Objetos, primeiro gerencia um arquivo DBML.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-113">To customize type mappings with SQLMetal or O/R Designer, first generate a DBML file.</span></span> <span data-ttu-id="1b3ae-114">Em seguida, antes de gerar o arquivo ou o arquivo de mapeamento de código, modifique o arquivo DBML para identificar os mapeamentos desejados de tipo.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-114">Then, before generating the code file or mapping file, modify the DBML file to identify the desired type mappings.</span></span> <span data-ttu-id="1b3ae-115">Com SQLMetal, você tem que alterar manualmente os atributos de `Type` e de `DbType` no arquivo DBML para fazer suas personalizações de mapeamento de tipo.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-115">With SQLMetal, you have to manually change the `Type` and `DbType` attributes in the DBML file to make your type mapping customizations.</span></span> <span data-ttu-id="1b3ae-116">Com object relational Designer de Objetos, você pode fazer suas alterações no designer.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-116">With O/R Designer, you can make your changes within the Designer.</span></span> <span data-ttu-id="1b3ae-117">Para obter mais informações sobre como usar o Object Relational Designer, consulte [LINQ to SQL Tools no Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span><span class="sxs-lookup"><span data-stu-id="1b3ae-117">For more information about using the O/R Designer, see [LINQ to SQL Tools in Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1b3ae-118">Alguns mapeamentos de tipo podem resultar em estouro ou exceções de perda de dados ao converter para ou do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-118">Some type mappings may result in overflow or data loss exceptions while translating to or from the database.</span></span> <span data-ttu-id="1b3ae-119">Leia com atenção à matriz de comportamento de tempo de execução para mapeamento de tipo no [mapeamento de tipo CLR SQL](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md) antes de fazer as personalizações.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-119">Carefully review the Type Mapping Run-time Behavior Matrix in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md) before making any customizations.</span></span>  
  
 <span data-ttu-id="1b3ae-120">Para que as personalizações de mapeamento de tipo são reconhecidas por SQLMetal ou por object relational Designer de Objetos, você precisará certificar-se de que essas ferramentas são fornecidas com o caminho para o arquivo DBML personalizado quando você gerencia o arquivo de código ou arquivos de mapeamento externo.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-120">In order for your type mapping customizations to be recognized by SQLMetal or O/R Designer, you need to make sure that these tools are supplied with the path to your custom DBML file when you generate your code file or external mapping file.</span></span> <span data-ttu-id="1b3ae-121">Embora não seja necessário para personalização de mapeamento de tipo, é recomendável que você sempre separa suas informações de mapeamento de tipo do arquivo de código e gerencia o mapeamento de arquivo externo adicional do tipo.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-121">Although not required for type mapping customization, it is recommended that you always separate your type mapping information from your code file and generate the additional external type mapping file.</span></span> <span data-ttu-id="1b3ae-122">Isso deixar alguma flexibilidade não exigem que o arquivo de código seja recompilado.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-122">Doing so will leave some flexibility by not requiring that the code file be recompiled.</span></span>  
  
## <a name="incorporating-database-changes"></a><span data-ttu-id="1b3ae-123">Inserindo alterações de base de dados</span><span class="sxs-lookup"><span data-stu-id="1b3ae-123">Incorporating Database Changes</span></span>  
 <span data-ttu-id="1b3ae-124">Quando seu base de dados, você precisará atualizar o arquivo DBML para refletir as alterações.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-124">When your database changes, you will need to update your DBML file to reflect those changes.</span></span> <span data-ttu-id="1b3ae-125">Uma maneira de fazer isso é automaticamente criar um novo arquivo DBML e novamente faz nas personalizações de mapeamento de tipo.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-125">One way to do this is to automatically create a new DBML file and then re-do your type mapping customizations.</span></span> <span data-ttu-id="1b3ae-126">Como alternativa, você pode comparar as diferenças entre seu novo arquivo DBML e o arquivo DBML personalizado e atualizar o arquivo DBML personalizado manualmente para refletir a alteração de base de dados.</span><span class="sxs-lookup"><span data-stu-id="1b3ae-126">Alternatively, you could compare the differences between your new DBML file and your customized DBML file and update your custom DBML file manually to reflect the database change.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1b3ae-127">Consulte também</span><span class="sxs-lookup"><span data-stu-id="1b3ae-127">See Also</span></span>  
 [<span data-ttu-id="1b3ae-128">Mapeamento de tipo CLR do SQL</span><span class="sxs-lookup"><span data-stu-id="1b3ae-128">SQL-CLR Type Mapping</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md)  
 [<span data-ttu-id="1b3ae-129">Geração de código em LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="1b3ae-129">Code Generation in LINQ to SQL</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/code-generation-in-linq-to-sql.md)
