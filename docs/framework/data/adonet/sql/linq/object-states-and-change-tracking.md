---
title: Estados e controle de alterações de objeto
ms.date: 03/30/2017
ms.assetid: 7a808b00-9c3c-479a-aa94-717280fefd71
ms.openlocfilehash: a60afab5158d0d5f66d12d6913ee890abc8ca730
ms.sourcegitcommit: 581ab03291e91983459e56e40ea8d97b5189227e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/27/2019
ms.locfileid: "70043513"
---
# <a name="object-states-and-change-tracking"></a><span data-ttu-id="5e1c5-102">Estados e controle de alterações de objeto</span><span class="sxs-lookup"><span data-stu-id="5e1c5-102">Object States and Change-Tracking</span></span>

[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="5e1c5-103">os objetos sempre participam de algum *estado*.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-103">objects always participate in some *state*.</span></span> <span data-ttu-id="5e1c5-104">Por exemplo, quando [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] cria um novo objeto, o objeto está no estado de `Unchanged` .</span><span class="sxs-lookup"><span data-stu-id="5e1c5-104">For example, when [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] creates a new object, the object is in `Unchanged` state.</span></span> <span data-ttu-id="5e1c5-105">Um novo objeto que você mesmo cria é desconhecido para o <xref:System.Data.Linq.DataContext> e está em `Untracked` estado.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-105">A new object that you yourself create is unknown to the <xref:System.Data.Linq.DataContext> and is in `Untracked` state.</span></span> <span data-ttu-id="5e1c5-106">Após a execução com êxito de <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, todos os objetos conhecidos a [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] estão no estado de `Unchanged` .</span><span class="sxs-lookup"><span data-stu-id="5e1c5-106">Following successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, all objects known to [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] are in `Unchanged` state.</span></span> <span data-ttu-id="5e1c5-107">(A única exceção é representada por aqueles que foram excluídas com êxito de base de dados, que estão no estado de `Deleted` e inutilizável que a instância de <xref:System.Data.Linq.DataContext> .)</span><span class="sxs-lookup"><span data-stu-id="5e1c5-107">(The single exception is represented by those that have been successfully deleted from the database, which are in `Deleted` state and unusable in that <xref:System.Data.Linq.DataContext> instance.)</span></span>

## <a name="object-states"></a><span data-ttu-id="5e1c5-108">Estados de objeto</span><span class="sxs-lookup"><span data-stu-id="5e1c5-108">Object States</span></span>

<span data-ttu-id="5e1c5-109">A tabela a seguir lista os estados possíveis para objetos de [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5e1c5-109">The following table lists the possible states for [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] objects.</span></span>

|<span data-ttu-id="5e1c5-110">Estado</span><span class="sxs-lookup"><span data-stu-id="5e1c5-110">State</span></span>|<span data-ttu-id="5e1c5-111">Descrição</span><span class="sxs-lookup"><span data-stu-id="5e1c5-111">Description</span></span>|
|-----------|-----------------|
|`Untracked`|<span data-ttu-id="5e1c5-112">Um objeto não controlado por [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5e1c5-112">An object not tracked by [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span></span> <span data-ttu-id="5e1c5-113">Os exemplos incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="5e1c5-113">Examples include the following:</span></span><br /><br /> <span data-ttu-id="5e1c5-114">-Um objeto não consultado por meio do <xref:System.Data.Linq.DataContext> atual (como um objeto recém-criado).</span><span class="sxs-lookup"><span data-stu-id="5e1c5-114">-   An object not queried through the current <xref:System.Data.Linq.DataContext> (such as a newly created object).</span></span><br /><span data-ttu-id="5e1c5-115">-Um objeto criado por meio de desserialização</span><span class="sxs-lookup"><span data-stu-id="5e1c5-115">-   An object created through deserialization</span></span><br /><span data-ttu-id="5e1c5-116">-Um objeto consultado por um diferente <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-116">-   An object queried through a different <xref:System.Data.Linq.DataContext>.</span></span>|
|`Unchanged`|<span data-ttu-id="5e1c5-117">Um objeto retornado usando <xref:System.Data.Linq.DataContext> atual e não conhecido para ter sido alterado desde que ele foi criado.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-117">An object retrieved by using the current <xref:System.Data.Linq.DataContext> and not known to have been modified since it was created.</span></span>|
|`PossiblyModified`|<span data-ttu-id="5e1c5-118">Um objeto que é *anexado* a um <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-118">An object which is *attached* to a <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="5e1c5-119">Para obter mais informações, consulte [operações de recuperação de dados e cud em aplicativos de N camadas (LINQ to SQL)](../../../../../../docs/framework/data/adonet/sql/linq/data-retrieval-and-cud-operations-in-n-tier-applications.md).</span><span class="sxs-lookup"><span data-stu-id="5e1c5-119">For more information, see [Data Retrieval and CUD Operations in N-Tier Applications (LINQ to SQL)](../../../../../../docs/framework/data/adonet/sql/linq/data-retrieval-and-cud-operations-in-n-tier-applications.md).</span></span>|
|`ToBeInserted`|<span data-ttu-id="5e1c5-120">Um objeto não recuperado usando <xref:System.Data.Linq.DataContext>atual.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-120">An object not retrieved by using the current <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="5e1c5-121">Isso faz com que um base de dados `INSERT` durante <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-121">This causes a database `INSERT` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|
|`ToBeUpdated`|<span data-ttu-id="5e1c5-122">Um objeto conhecido para ter sido alterado desde que ele foi recuperado.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-122">An object known to have been modified since it was retrieved.</span></span> <span data-ttu-id="5e1c5-123">Isso faz com que um base de dados `UPDATE` durante <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-123">This causes a database `UPDATE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|
|`ToBeDeleted`|<span data-ttu-id="5e1c5-124">Um objeto marcado para exclusão, causando um base de dados `DELETE` durante <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-124">An object marked for deletion, causing a database `DELETE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|
|`Deleted`|<span data-ttu-id="5e1c5-125">Um objeto que é excluído na base de dados.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-125">An object that has been deleted in the database.</span></span> <span data-ttu-id="5e1c5-126">Esse estado é final e não permite transições adicionais.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-126">This state is final and does not allow for additional transitions.</span></span>|

## <a name="inserting-objects"></a><span data-ttu-id="5e1c5-127">Inserindo objetos</span><span class="sxs-lookup"><span data-stu-id="5e1c5-127">Inserting Objects</span></span>

<span data-ttu-id="5e1c5-128">Você pode solicitar `Inserts` explicitamente usando <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-128">You can explicitly request `Inserts` by using <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>.</span></span> <span data-ttu-id="5e1c5-129">Como alternativa, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] é possível `Inserts` inferir localizando objetos conectados a um dos objetos conhecidos que devem ser atualizados.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-129">Alternatively, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] can infer `Inserts` by finding objects connected to one of the known objects that must be updated.</span></span> <span data-ttu-id="5e1c5-130">Por exemplo, se você adicionar um `Untracked` objeto a um <xref:System.Data.Linq.EntitySet%601> ou definir um <xref:System.Data.Linq.EntityRef%601> para um `Untracked` objeto, tornará o `Untracked` objeto acessível por meio de objetos rastreados no grafo.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-130">For example, if you add an `Untracked` object to an <xref:System.Data.Linq.EntitySet%601> or set an <xref:System.Data.Linq.EntityRef%601> to an `Untracked` object, you make the `Untracked` object reachable by way of tracked objects in the graph.</span></span> <span data-ttu-id="5e1c5-131">Durante o <xref:System.Data.Linq.DataContext.SubmitChanges%2A>processamento [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] , o percorre os objetos rastreados e descobre quaisquer objetos persistentes acessíveis que não são rastreados.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-131">While processing <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] traverses the tracked objects and discovers any reachable persistent objects that are not tracked.</span></span> <span data-ttu-id="5e1c5-132">Esses objetos são candidatos para inserção na base de dados.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-132">Such objects are candidates for insertion into the database.</span></span>

<span data-ttu-id="5e1c5-133">Para classes em uma hierarquia de herança <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>,`o`() também define o valor do membro designado como discriminador para corresponder ao tipo do objeto. `o`</span><span class="sxs-lookup"><span data-stu-id="5e1c5-133">For classes in an inheritance hierarchy, <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>(`o`) also sets the value of the member designated as the *discriminator* to match the type of the object `o`.</span></span> <span data-ttu-id="5e1c5-134">No caso de um tipo que corresponde ao valor padrão de discriminador, esta ação faz com que o valor de discriminador a ser substituído com o valor padrão.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-134">In the case of a type matching the default discriminator value, this action causes the discriminator value to be overwritten with the default value.</span></span> <span data-ttu-id="5e1c5-135">Para obter mais informações, consulte [suporte à herança](../../../../../../docs/framework/data/adonet/sql/linq/inheritance-support.md).</span><span class="sxs-lookup"><span data-stu-id="5e1c5-135">For more information, see [Inheritance Support](../../../../../../docs/framework/data/adonet/sql/linq/inheritance-support.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5e1c5-136">Um objeto adicionado a `Table` não estiver no cache de identidade.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-136">An object added to a `Table` is not in the identity cache.</span></span> <span data-ttu-id="5e1c5-137">O cache de identidade reflete somente o que é recuperado de base de dados.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-137">The identity cache reflects only what is retrieved from the database.</span></span> <span data-ttu-id="5e1c5-138">Após uma chamada a <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, a entidade adicionada não aparece em consultas na base de dados até que <xref:System.Data.Linq.DataContext.SubmitChanges%2A> está concluída com êxito.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-138">After a call to <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, the added entity does not appear in queries against the database until <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is successfully completed.</span></span>

## <a name="deleting-objects"></a><span data-ttu-id="5e1c5-139">Excluindo objetos</span><span class="sxs-lookup"><span data-stu-id="5e1c5-139">Deleting Objects</span></span>

<span data-ttu-id="5e1c5-140">Você marca um objeto acompanhado `o` para exclusão chamando <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>() no <xref:System.Data.Linq.Table%601>apropriado.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-140">You mark a tracked object `o` for deletion by calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>(o) on the appropriate <xref:System.Data.Linq.Table%601>.</span></span> [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="5e1c5-141">considera a remoção de um objeto de uma <xref:System.Data.Linq.EntitySet%601> operação de atualização e o valor de chave estrangeira correspondente é definido como nulo.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-141">considers the removal of an object from an <xref:System.Data.Linq.EntitySet%601> as an update operation, and the corresponding foreign key value is set to null.</span></span> <span data-ttu-id="5e1c5-142">O destino da operação (`o`) não é excluído da tabela.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-142">The target of the operation (`o`) is not deleted from its table.</span></span> <span data-ttu-id="5e1c5-143">Por exemplo, `cust.Orders.DeleteOnSubmit(ord)` indica uma atualização onde a relação entre `cust` e `ord` está separada definindo a chave estrangeira `ord.CustomerID` para nulo.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-143">For example, `cust.Orders.DeleteOnSubmit(ord)` indicates an update where the relationship between `cust` and `ord` is severed by setting the foreign key `ord.CustomerID` to null.</span></span> <span data-ttu-id="5e1c5-144">Não faz com que a exclusão da linha que corresponde a `ord`.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-144">It does not cause the deletion of the row corresponding to `ord`.</span></span>

[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="5e1c5-145">executa o seguinte processamento quando um objeto é excluído (<xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>) de sua tabela:</span><span class="sxs-lookup"><span data-stu-id="5e1c5-145">performs the following processing when an object is deleted (<xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>) from its table:</span></span>

- <span data-ttu-id="5e1c5-146">Quando <xref:System.Data.Linq.DataContext.SubmitChanges%2A> é chamado, uma operação de `DELETE` é executada para esse objeto.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-146">When <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is called, a `DELETE` operation is performed for that object.</span></span>

- <span data-ttu-id="5e1c5-147">Remoção não é propagada a objetos relacionados independentemente se eles são carregados.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-147">The removal is not propagated to related objects regardless of whether they are loaded.</span></span> <span data-ttu-id="5e1c5-148">Especificamente, os objetos relacionados não são carregados atualizar a propriedade de relacionamento.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-148">Specifically, related objects are not loaded for updating the relationship property.</span></span>

- <span data-ttu-id="5e1c5-149">Após a execução bem-sucedida de <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, os objetos são definidos no estado de `Deleted` .</span><span class="sxs-lookup"><span data-stu-id="5e1c5-149">After successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, the objects are set to the `Deleted` state.</span></span> <span data-ttu-id="5e1c5-150">Como resultado, você não pode usar o objeto ou seu `id` nesse <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-150">As a result, you cannot use the object or its `id` in that <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="5e1c5-151">O cache interno mantido por uma instância de <xref:System.Data.Linq.DataContext> não elimina os objetos que são recuperados ou adicionados como novas, mesmo após os objetos foram excluídos na base de dados.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-151">The internal cache maintained by a <xref:System.Data.Linq.DataContext> instance does not eliminate objects that are retrieved or added as new, even after the objects have been deleted in the database.</span></span>

<span data-ttu-id="5e1c5-152">Você pode chamar <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> somente em um objeto controlado por <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-152">You can call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> only on an object tracked by the <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="5e1c5-153">Para um objeto de `Untracked` , você deve chamar <xref:System.Data.Linq.Table%601.Attach%2A> antes de chamar <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-153">For an `Untracked` object, you must call <xref:System.Data.Linq.Table%601.Attach%2A> before you call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>.</span></span> <span data-ttu-id="5e1c5-154">A chamada <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> em um objeto de `Untracked` gerencie uma exceção.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-154">Calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> on an `Untracked` object throws an exception.</span></span>

> [!NOTE]
> <span data-ttu-id="5e1c5-155">A remoção de um objeto de uma [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] tabela diz para gerar um `DELETE` comando SQL correspondente no momento <xref:System.Data.Linq.DataContext.SubmitChanges%2A>do.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-155">Removing an object from a table tells [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] to generate a corresponding SQL `DELETE` command at the time of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span> <span data-ttu-id="5e1c5-156">Esta ação não remove o objeto de cache ou não propaga a exclusão a objetos relacionados.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-156">This action does not remove the object from the cache or propagate the deletion to related objects.</span></span>
>
> <span data-ttu-id="5e1c5-157">Para recuperar `id` de um objeto excluído, use uma nova instância de <xref:System.Data.Linq.DataContext> .</span><span class="sxs-lookup"><span data-stu-id="5e1c5-157">To reclaim the `id` of a deleted object, use a new <xref:System.Data.Linq.DataContext> instance.</span></span> <span data-ttu-id="5e1c5-158">Para a limpeza de objetos relacionados, você pode usar o recurso de *exclusão em cascata* do banco de dados ou excluir manualmente os objetos relacionados.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-158">For cleanup of related objects, you can use the *cascade delete* feature of the database, or else manually delete the related objects.</span></span>
>
> <span data-ttu-id="5e1c5-159">Os objetos relacionados não precisam ser excluídos em qualquer encomenda especial (em oposição na base de dados).</span><span class="sxs-lookup"><span data-stu-id="5e1c5-159">The related objects do not have to be deleted in any special order (unlike in the database).</span></span>

## <a name="updating-objects"></a><span data-ttu-id="5e1c5-160">Atualizando objetos</span><span class="sxs-lookup"><span data-stu-id="5e1c5-160">Updating Objects</span></span>

<span data-ttu-id="5e1c5-161">Você pode detectar `Updates` observando notificações de alterações.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-161">You can detect `Updates` by observing notifications of changes.</span></span> <span data-ttu-id="5e1c5-162">As notificações são fornecidas com o evento de <xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging> em definidores de propriedade.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-162">Notifications are provided through the <xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging> event in property setters.</span></span> <span data-ttu-id="5e1c5-163">Quando [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] é notificado da primeira alteração em um objeto, cria uma cópia do objeto e considera o objeto um candidato para gerar uma instrução de `Update` .</span><span class="sxs-lookup"><span data-stu-id="5e1c5-163">When [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] is notified of the first change to an object, it creates a copy of the object and considers the object a candidate for generating an `Update` statement.</span></span>

<span data-ttu-id="5e1c5-164">Para objetos que não são <xref:System.ComponentModel.INotifyPropertyChanging>implementados [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] , o mantém uma cópia dos valores que os objetos tinham quando foram materializados pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-164">For objects that do not implement <xref:System.ComponentModel.INotifyPropertyChanging>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] maintains a copy of the values that objects had when they were first materialized.</span></span> <span data-ttu-id="5e1c5-165">Quando você chama <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] o compara os valores atual e original para decidir se o objeto foi alterado.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-165">When you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] compares the current and original values to decide whether the object has been changed.</span></span>

<span data-ttu-id="5e1c5-166">Para atualizações para relações, a referência de filho ao pai (ou seja, a referência que corresponde à chave estrangeira) é considerada a autoridade.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-166">For updates to relationships, the reference from the child to the parent (that is, the reference corresponding to the foreign key) is considered the authority.</span></span> <span data-ttu-id="5e1c5-167">A referência na direção invertida (isto é, pai para o filho) é opcional.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-167">The reference in the reverse direction (that is, from parent to child) is optional.</span></span> <span data-ttu-id="5e1c5-168">As classes de relacionamento (<xref:System.Data.Linq.EntitySet%601> e <xref:System.Data.Linq.EntityRef%601>) garantem que as referências bidirecionais são consistentes para para muitos e relacionamento um-para-um.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-168">Relationship classes (<xref:System.Data.Linq.EntitySet%601> and <xref:System.Data.Linq.EntityRef%601>) guarantee that the bidirectional references are consistent for one-to-many and one-to-one relationships.</span></span> <span data-ttu-id="5e1c5-169">Se o modelo de objeto não usa <xref:System.Data.Linq.EntitySet%601> ou <xref:System.Data.Linq.EntityRef%601>, e se a referência invertido estiver presente, é de sua responsabilidade mantê-la consistente com a referência direta ao relacionamento é atualizada.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-169">If the object model does not use <xref:System.Data.Linq.EntitySet%601> or <xref:System.Data.Linq.EntityRef%601>, and if the reverse reference is present, it is your responsibility to keep it consistent with the forward reference when the relationship is updated.</span></span>

<span data-ttu-id="5e1c5-170">Se você atualizar a referência ambos necessário e a chave estrangeira correspondente, você deve certificar-se que concordam.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-170">If you update both the required reference and the corresponding foreign key, you must make sure that they agree.</span></span> <span data-ttu-id="5e1c5-171">Uma exceção de <xref:System.InvalidOperationException> é lançada se os dois não são sincronizados momento em que você chamar <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-171">An <xref:System.InvalidOperationException> exception is thrown if the two are not synchronized at the time that you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span> <span data-ttu-id="5e1c5-172">Embora as alterações de valor de chave estrangeira são suficientes para afetar uma atualização de linha base, você deve alterar a referência para manter a conectividade do grafo de objeto e consistência bidirecional relações.</span><span class="sxs-lookup"><span data-stu-id="5e1c5-172">Although foreign key value changes are sufficient for affecting an update of the underlying row, you should change the reference to maintain connectivity of the object graph and bidirectional consistency of relationships.</span></span>

## <a name="see-also"></a><span data-ttu-id="5e1c5-173">Consulte também</span><span class="sxs-lookup"><span data-stu-id="5e1c5-173">See also</span></span>

- [<span data-ttu-id="5e1c5-174">Informações gerais</span><span class="sxs-lookup"><span data-stu-id="5e1c5-174">Background Information</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)
- [<span data-ttu-id="5e1c5-175">Operações de inserção, atualização e exclusão</span><span class="sxs-lookup"><span data-stu-id="5e1c5-175">Insert, Update, and Delete Operations</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/insert-update-and-delete-operations.md)
