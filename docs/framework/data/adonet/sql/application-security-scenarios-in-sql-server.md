---
title: Cenários de segurança de aplicativo no SQL Server
ms.date: 03/30/2017
ms.assetid: 0164f3a4-406e-4693-bec3-03c8e18b46d7
ms.openlocfilehash: bf4f4adfd5f49bd210026e40bd5fa4e67da10d75
ms.sourcegitcommit: 8c2ece71e54f46aef9a2153540d0bda7e74b19a9
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/11/2018
ms.locfileid: "44368158"
---
# <a name="application-security-scenarios-in-sql-server"></a><span data-ttu-id="4a9f5-102">Cenários de segurança de aplicativo no SQL Server</span><span class="sxs-lookup"><span data-stu-id="4a9f5-102">Application Security Scenarios in SQL Server</span></span>
<span data-ttu-id="4a9f5-103">Não há nenhuma maneira correta de única para criar um aplicativo de cliente seguro do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-103">There is no single correct way to create a secure SQL Server client application.</span></span> <span data-ttu-id="4a9f5-104">Cada aplicativo é exclusivo em seus requisitos, o ambiente de implantação e a população de usuários.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-104">Every application is unique in its requirements, deployment environment, and user population.</span></span> <span data-ttu-id="4a9f5-105">Um aplicativo que é razoavelmente seguro quando ele é implantado inicialmente pode se tornar menos seguro ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-105">An application that is reasonably secure when it is initially deployed can become less secure over time.</span></span> <span data-ttu-id="4a9f5-106">É impossível prever com algum nível de precisão, o que ameaças podem surgir no futuro.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-106">It is impossible to predict with any accuracy what threats may emerge in the future.</span></span>  
  
 <span data-ttu-id="4a9f5-107">SQL Server, como um produto, evoluiu ao longo de várias versões para incorporar recursos de segurança mais recentes que permitem aos desenvolvedores criar aplicativos de banco de dados seguro.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-107">SQL Server, as a product, has evolved over many versions to incorporate the latest security features that enable developers to create secure database applications.</span></span> <span data-ttu-id="4a9f5-108">No entanto, a segurança não vem na caixa. ele requer o monitoramento contínuo e a atualização.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-108">However, security doesn't come in the box; it requires continual monitoring and updating.</span></span>  
  
## <a name="common-threats"></a><span data-ttu-id="4a9f5-109">Ameaças comuns</span><span class="sxs-lookup"><span data-stu-id="4a9f5-109">Common Threats</span></span>  
 <span data-ttu-id="4a9f5-110">Os desenvolvedores precisam compreender as ameaças de segurança, as ferramentas fornecidas para elas e como evitar falhas de segurança autoinfligidos do contador.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-110">Developers need to understand security threats, the tools provided to counter them, and how to avoid self-inflicted security holes.</span></span> <span data-ttu-id="4a9f5-111">Segurança pode melhor ser pensada como uma cadeia, onde uma quebra de qualquer um link compromete a força do todo.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-111">Security can best be thought of as a chain, where a break in any one link compromises the strength of the whole.</span></span> <span data-ttu-id="4a9f5-112">A lista a seguir inclui algumas ameaças comuns à segurança que são abordados mais detalhadamente nos tópicos nesta seção.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-112">The following list includes some common security threats that are discussed in more detail in the topics in this section.</span></span>  
  
### <a name="sql-injection"></a><span data-ttu-id="4a9f5-113">Injeção de SQL</span><span class="sxs-lookup"><span data-stu-id="4a9f5-113">SQL Injection</span></span>  
 <span data-ttu-id="4a9f5-114">A Injeção de SQL é o processo pelo qual um usuário mal-intencionado insere instruções Transact-SQL em vez de entrada válida.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-114">SQL Injection is the process by which a malicious user enters Transact-SQL statements instead of valid input.</span></span> <span data-ttu-id="4a9f5-115">Se a entrada é passada diretamente para o servidor sem que está sendo validado e o aplicativo executa inadvertidamente o código injetado, o ataque tem o potencial de danificar ou destruir dados.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-115">If the input is passed directly to the server without being validated and if the application inadvertently executes the injected code, then the attack has the potential to damage or destroy data.</span></span> <span data-ttu-id="4a9f5-116">Você pode impedir o SQL Server injeção de ataques, usando procedimentos armazenados e comandos parametrizados, evitando o SQL dinâmico e restringindo as permissões de todos os usuários.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-116">You can thwart SQL Server injection attacks by using stored procedures and parameterized commands, avoiding dynamic SQL, and restricting permissions on all users.</span></span>  
  
### <a name="elevation-of-privilege"></a><span data-ttu-id="4a9f5-117">Elevação de privilégio</span><span class="sxs-lookup"><span data-stu-id="4a9f5-117">Elevation of Privilege</span></span>  
 <span data-ttu-id="4a9f5-118">Elevação de privilégio ataques ocorrem quando um usuário é capaz de assumir os privilégios de uma conta confiável, como um proprietário ou administrador.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-118">Elevation of privilege attacks occur when a user is able to assume the privileges of a trusted account, such as an owner or administrator.</span></span> <span data-ttu-id="4a9f5-119">Sempre são executados em contas de usuário com privilégios mínimos e atribuir apenas as permissões necessárias.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-119">Always run under least-privileged user accounts and assign only needed permissions.</span></span> <span data-ttu-id="4a9f5-120">Evite usando administrativo ou proprietário de contas para executar o código.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-120">Avoid using administrative or owner accounts for executing code.</span></span> <span data-ttu-id="4a9f5-121">Isso limita a quantidade de danos que podem ocorrer se um ataque for bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-121">This limits the amount of damage that can occur if an attack succeeds.</span></span> <span data-ttu-id="4a9f5-122">Ao executar tarefas que requerem permissões adicionais, use o procedimento de assinatura ou a representação apenas para a duração da tarefa.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-122">When performing tasks that require additional permissions, use procedure signing or impersonation only for the duration of the task.</span></span> <span data-ttu-id="4a9f5-123">Você pode assinar procedimentos armazenados com certificados ou usar a representação para temporariamente atribuir permissões.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-123">You can sign stored procedures with certificates or use impersonation to temporarily assign permissions.</span></span>  
  
### <a name="probing-and-intelligent-observation"></a><span data-ttu-id="4a9f5-124">Observação de investigação e inteligente</span><span class="sxs-lookup"><span data-stu-id="4a9f5-124">Probing and Intelligent Observation</span></span>  
 <span data-ttu-id="4a9f5-125">Um ataque de sondagem pode usar mensagens de erro geradas por um aplicativo para procurar por vulnerabilidades de segurança.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-125">A probing attack can use error messages generated by an application to search for security vulnerabilities.</span></span> <span data-ttu-id="4a9f5-126">Implementar o tratamento de erros em todo o código procedural para impedir que as informações de erro do SQL Server seja retornada para o usuário final.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-126">Implement error handling in all procedural code to prevent SQL Server error information from being returned to the end user.</span></span>  
  
### <a name="authentication"></a><span data-ttu-id="4a9f5-127">Autenticação</span><span class="sxs-lookup"><span data-stu-id="4a9f5-127">Authentication</span></span>  
 <span data-ttu-id="4a9f5-128">Um ataque de injeção de cadeia de caracteres de conexão pode ocorrer ao usar logons do SQL Server, se uma cadeia de caracteres de conexão com base na entrada do usuário é construído em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-128">A connection string injection attack can occur when using SQL Server logins if a connection string based on user input is constructed at run time.</span></span> <span data-ttu-id="4a9f5-129">Se a cadeia de caracteres de conexão não está marcada para pares de palavra-chave válida, um invasor pode inserir caracteres extras, potencialmente, acessar dados confidenciais ou outros recursos no servidor.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-129">If the connection string is not checked for valid keyword pairs, an attacker can insert extra characters, potentially accessing sensitive data or other resources on the server.</span></span> <span data-ttu-id="4a9f5-130">Use a autenticação do Windows sempre que possível.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-130">Use Windows authentication wherever possible.</span></span> <span data-ttu-id="4a9f5-131">Se você deve usar logons do SQL Server, use o <xref:System.Data.SqlClient.SqlConnectionStringBuilder> para criar e validar cadeias de caracteres de conexão em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-131">If you must use SQL Server logins, use the <xref:System.Data.SqlClient.SqlConnectionStringBuilder> to create and validate connection strings at run time.</span></span>  
  
### <a name="passwords"></a><span data-ttu-id="4a9f5-132">Senhas</span><span class="sxs-lookup"><span data-stu-id="4a9f5-132">Passwords</span></span>  
 <span data-ttu-id="4a9f5-133">Muitos ataques bem-sucedida porque um invasor foi capaz de obter ou adivinhar uma senha para um usuário com privilégios.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-133">Many attacks succeed because an intruder was able to obtain or guess a password for a privileged user.</span></span> <span data-ttu-id="4a9f5-134">As senhas são a primeira linha de defesa contra intrusos, portanto, definir senhas fortes é essencial para a segurança do seu sistema.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-134">Passwords are your first line of defense against intruders, so setting strong passwords is essential to the security of your system.</span></span> <span data-ttu-id="4a9f5-135">Criar e impor políticas de senha para autenticação de modo misto.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-135">Create and enforce password policies for mixed mode authentication.</span></span>  
  
 <span data-ttu-id="4a9f5-136">Sempre atribua uma senha forte para o `sa` de conta, mesmo ao usar a autenticação do Windows.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-136">Always assign a strong password to the `sa` account, even when using Windows Authentication.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="4a9f5-137">Nesta seção</span><span class="sxs-lookup"><span data-stu-id="4a9f5-137">In This Section</span></span>  
 [<span data-ttu-id="4a9f5-138">Gerenciando permissões com procedimentos armazenados no SQL Server</span><span class="sxs-lookup"><span data-stu-id="4a9f5-138">Managing Permissions with Stored Procedures in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/managing-permissions-with-stored-procedures-in-sql-server.md)  
 <span data-ttu-id="4a9f5-139">Descreve como usar procedimentos armazenados para gerenciar permissões e controlar o acesso a dados.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-139">Describes how to use stored procedures to manage permissions and control data access.</span></span> <span data-ttu-id="4a9f5-140">Usando procedimentos armazenados é uma maneira eficiente para responder a muitas ameaças de segurança.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-140">Using stored procedures is an effective way to respond to many security threats.</span></span>  
  
 [<span data-ttu-id="4a9f5-141">Escrevendo SQL dinâmico seguro no SQL Server</span><span class="sxs-lookup"><span data-stu-id="4a9f5-141">Writing Secure Dynamic SQL in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/writing-secure-dynamic-sql-in-sql-server.md)  
 <span data-ttu-id="4a9f5-142">Descreve técnicas para escrever um SQL dinâmico seguro que usando procedimentos armazenados.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-142">Describes techniques for writing secure dynamic SQL using stored procedures.</span></span>  
  
 [<span data-ttu-id="4a9f5-143">Assinando procedimentos armazenados no SQL Server</span><span class="sxs-lookup"><span data-stu-id="4a9f5-143">Signing Stored Procedures in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/signing-stored-procedures-in-sql-server.md)  
 <span data-ttu-id="4a9f5-144">Descreve como assinar um procedimento armazenado com um certificado para permitir que os usuários trabalhar com dados não tiverem acesso direto ao.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-144">Describes how to sign a stored procedure with a certificate to enable users to work with data they do not have direct access to.</span></span> <span data-ttu-id="4a9f5-145">Isso permite que procedimentos armazenados para executar operações que o chamador não tem permissões para executar diretamente.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-145">This enables stored procedures to perform operations that the caller does not have permissions to perform directly.</span></span>  
  
 [<span data-ttu-id="4a9f5-146">Personalizando permissões com representação no SQL Server</span><span class="sxs-lookup"><span data-stu-id="4a9f5-146">Customizing Permissions with Impersonation in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server.md)  
 <span data-ttu-id="4a9f5-147">Descreve como usar EXECUTE AS cláusula para representar outro usuário.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-147">Describes how to use the EXECUTE AS clause to impersonate another user.</span></span> <span data-ttu-id="4a9f5-148">Representação alterna o contexto de execução do chamador para o usuário especificado.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-148">Impersonation switches the execution context from the caller to the specified user.</span></span>  
  
 [<span data-ttu-id="4a9f5-149">Concedendo permissões de nível de linha no SQL Server</span><span class="sxs-lookup"><span data-stu-id="4a9f5-149">Granting Row-Level Permissions in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/granting-row-level-permissions-in-sql-server.md)  
 <span data-ttu-id="4a9f5-150">Descreve como implementar as permissões de nível de linha para restringir o acesso a dados.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-150">Describes how to implement row-level permissions to restrict data access.</span></span>  
  
 [<span data-ttu-id="4a9f5-151">Criando funções de aplicativo no SQL Server</span><span class="sxs-lookup"><span data-stu-id="4a9f5-151">Creating Application Roles in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/creating-application-roles-in-sql-server.md)  
 <span data-ttu-id="4a9f5-152">Descreve os recursos e funcionalidade de funções de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-152">Describes features and functionality of application roles.</span></span>  
  
 [<span data-ttu-id="4a9f5-153">Habilitando o acesso ao banco de dados no SQL Server</span><span class="sxs-lookup"><span data-stu-id="4a9f5-153">Enabling Cross-Database Access in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/enabling-cross-database-access-in-sql-server.md)  
 <span data-ttu-id="4a9f5-154">Descreve como habilitar o acesso entre bancos de dados sem comprometer a segurança.</span><span class="sxs-lookup"><span data-stu-id="4a9f5-154">Describes how to enable cross-database access without jeopardizing security.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4a9f5-155">Consulte também</span><span class="sxs-lookup"><span data-stu-id="4a9f5-155">See Also</span></span>  
 <span data-ttu-id="4a9f5-156">[SQL Server Security](../../../../../docs/framework/data/adonet/sql/sql-server-security.md) (Segurança do SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4a9f5-156">[SQL Server Security](../../../../../docs/framework/data/adonet/sql/sql-server-security.md)</span></span>  
 [<span data-ttu-id="4a9f5-157">Visão geral de segurança do SQL Server</span><span class="sxs-lookup"><span data-stu-id="4a9f5-157">Overview of SQL Server Security</span></span>](../../../../../docs/framework/data/adonet/sql/overview-of-sql-server-security.md)  
 <span data-ttu-id="4a9f5-158">[Securing ADO.NET Applications](../../../../../docs/framework/data/adonet/securing-ado-net-applications.md) (Protegendo aplicativos ADO.NET)</span><span class="sxs-lookup"><span data-stu-id="4a9f5-158">[Securing ADO.NET Applications](../../../../../docs/framework/data/adonet/securing-ado-net-applications.md)</span></span>  
 <span data-ttu-id="4a9f5-159">[ADO.NET Managed Providers and DataSet Developer Center](https://go.microsoft.com/fwlink/?LinkId=217917) (Central de desenvolvedores do DataSet e de provedores gerenciados do ADO.NET)</span><span class="sxs-lookup"><span data-stu-id="4a9f5-159">[ADO.NET Managed Providers and DataSet Developer Center](https://go.microsoft.com/fwlink/?LinkId=217917)</span></span>
