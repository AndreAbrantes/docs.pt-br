---
title: Propriedade e separação do esquema do usuário no SQL Server
description: Saiba como a separação de esquema de usuário permite flexibilidade no gerenciamento de permissões de objeto de banco de dados SQL Server. Os esquemas agrupam objetos em namespaces separados.
ms.date: 03/30/2017
ms.assetid: 242830c1-31b5-4427-828c-cc22ff339f30
ms.openlocfilehash: 27c37816353ca47c3f96867adc6186b0162feb20
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90558830"
---
# <a name="ownership-and-user-schema-separation-in-sql-server"></a><span data-ttu-id="37cd6-104">Propriedade e separação do esquema do usuário no SQL Server</span><span class="sxs-lookup"><span data-stu-id="37cd6-104">Ownership and User-Schema Separation in SQL Server</span></span>
<span data-ttu-id="37cd6-105">Um conceito central de segurança do SQL Server é que os proprietários de objetos têm permissões irrevogáveis administrá-los.</span><span class="sxs-lookup"><span data-stu-id="37cd6-105">A core concept of SQL Server security is that owners of objects have irrevocable permissions to administer them.</span></span> <span data-ttu-id="37cd6-106">Você não pode remover os privilégios de um proprietário de objeto e não pode eliminar usuários de um banco de dados se eles possuírem objetos nele.</span><span class="sxs-lookup"><span data-stu-id="37cd6-106">You cannot remove privileges from an object owner, and you cannot drop users from a database if they own objects in it.</span></span>  
  
## <a name="user-schema-separation"></a><span data-ttu-id="37cd6-107">Separação do esquema do usuário</span><span class="sxs-lookup"><span data-stu-id="37cd6-107">User-Schema Separation</span></span>  
 <span data-ttu-id="37cd6-108">A separação do esquema do usuário permite maior flexibilidade em gerenciar permissões do objeto de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="37cd6-108">User-schema separation allows for more flexibility in managing database object permissions.</span></span> <span data-ttu-id="37cd6-109">Um *esquema* é um contêiner nomeado para objetos de banco de dados, que permite que você agrupe objetos em namespaces separados.</span><span class="sxs-lookup"><span data-stu-id="37cd6-109">A *schema* is a named container for database objects, which allows you to group objects into separate namespaces.</span></span> <span data-ttu-id="37cd6-110">Por exemplo, o banco de dados de exemplo AdventureWorks contém esquemas para Production, Sales e HumanResources.</span><span class="sxs-lookup"><span data-stu-id="37cd6-110">For example, the AdventureWorks sample database contains schemas for Production, Sales, and HumanResources.</span></span>  
  
 <span data-ttu-id="37cd6-111">A sintaxe de nomeação de quatro partes para referir-se a objetos especifica o nome do esquema.</span><span class="sxs-lookup"><span data-stu-id="37cd6-111">The four-part naming syntax for referring to objects specifies the schema name.</span></span>  
  
```text
Server.Database.DatabaseSchema.DatabaseObject  
```  
  
### <a name="schema-owners-and-permissions"></a><span data-ttu-id="37cd6-112">Proprietários e permissões do esquema</span><span class="sxs-lookup"><span data-stu-id="37cd6-112">Schema Owners and Permissions</span></span>  
 <span data-ttu-id="37cd6-113">Os esquemas podem ser de propriedade de qualquer entidade de banco de dados, e uma única entidade pode possuir vários esquemas.</span><span class="sxs-lookup"><span data-stu-id="37cd6-113">Schemas can be owned by any database principal, and a single principal can own multiple schemas.</span></span> <span data-ttu-id="37cd6-114">Você pode aplicar regras de segurança a um esquema, que são herdadas por todos os objetos no esquema.</span><span class="sxs-lookup"><span data-stu-id="37cd6-114">You can apply security rules to a schema, which are inherited by all objects in the schema.</span></span> <span data-ttu-id="37cd6-115">Depois que você configurar permissões de acesso para um esquema, essas permissões serão aplicadas automaticamente à medida que novos objetos forem adicionados ao esquema.</span><span class="sxs-lookup"><span data-stu-id="37cd6-115">Once you set up access permissions for a schema, those permissions are automatically applied as new objects are added to the schema.</span></span> <span data-ttu-id="37cd6-116">Os usuários podem ser atribuídos a um esquema padrão, e vários usuários do banco de dados podem compartilhar o mesmo esquema.</span><span class="sxs-lookup"><span data-stu-id="37cd6-116">Users can be assigned a default schema, and multiple database users can share the same schema.</span></span>  
  
 <span data-ttu-id="37cd6-117">Por padrão, quando os desenvolvedores criam objetos em um esquema, os objetos são possuídos pela entidade de segurança que possui o esquema, não pelo desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="37cd6-117">By default, when developers create objects in a schema, the objects are owned by the security principal that owns the schema, not the developer.</span></span> <span data-ttu-id="37cd6-118">A propriedade do objeto pode ser transferida com a instrução ALTER AUTHORIZATION do Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="37cd6-118">Object ownership can be transferred with ALTER AUTHORIZATION Transact-SQL statement.</span></span> <span data-ttu-id="37cd6-119">Um esquema também pode conter objetos que são possuídos por diferentes usuários e ter as permissões mais granulares que as atribuídas ao esquema, embora isso não seja recomendado porque adiciona complexidade a permissões de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="37cd6-119">A schema can also contain objects that are owned by different users and have more granular permissions than those assigned to the schema, although this is not recommended because it adds complexity to managing permissions.</span></span> <span data-ttu-id="37cd6-120">Os objetos podem ser movidos entre esquemas e a propriedade do esquema pode ser transferida entre entidades de segurança.</span><span class="sxs-lookup"><span data-stu-id="37cd6-120">Objects can be moved between schemas, and schema ownership can be transferred between principals.</span></span> <span data-ttu-id="37cd6-121">Os usuários do banco de dados podem ser removidos sem afetar esquemas.</span><span class="sxs-lookup"><span data-stu-id="37cd6-121">Database users can be dropped without affecting schemas.</span></span>  
  
### <a name="built-in-schemas"></a><span data-ttu-id="37cd6-122">Esquemas internos</span><span class="sxs-lookup"><span data-stu-id="37cd6-122">Built-In Schemas</span></span>  
 <span data-ttu-id="37cd6-123">O SQL Server vem com dez esquemas predefinidos que têm os mesmos nomes que os usuários e as funções internas do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="37cd6-123">SQL Server ships with ten pre-defined schemas that have the same names as the built-in database users and roles.</span></span> <span data-ttu-id="37cd6-124">Eles existem principalmente para compatibilidade com versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="37cd6-124">These exist mainly for backward compatibility.</span></span> <span data-ttu-id="37cd6-125">Você pode remover os esquemas que têm os mesmos nomes que as funções de banco de dados fixas se não precisar deles.</span><span class="sxs-lookup"><span data-stu-id="37cd6-125">You can drop the schemas that have the same names as the fixed database roles if you do not need them.</span></span> <span data-ttu-id="37cd6-126">Você não pode remover os esquemas a seguir:</span><span class="sxs-lookup"><span data-stu-id="37cd6-126">You cannot drop the following schemas:</span></span>  
  
- `dbo`  
  
- `guest`  
  
- `sys`  
  
- `INFORMATION_SCHEMA`  
  
 <span data-ttu-id="37cd6-127">Se você removê-los do banco de dados modelo, eles não aparecerão em novos bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="37cd6-127">If you drop them from the model database, they will not appear in new databases.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="37cd6-128">Os esquemas `sys` e `INFORMATION_SCHEMA` são reservados para objetos do sistema.</span><span class="sxs-lookup"><span data-stu-id="37cd6-128">The `sys` and `INFORMATION_SCHEMA` schemas are reserved for system objects.</span></span> <span data-ttu-id="37cd6-129">Você não pode criar objetos nesses esquemas e não pode removê-los.</span><span class="sxs-lookup"><span data-stu-id="37cd6-129">You cannot create objects in these schemas and you cannot drop them.</span></span>  
  
#### <a name="the-dbo-schema"></a><span data-ttu-id="37cd6-130">O esquema dbo</span><span class="sxs-lookup"><span data-stu-id="37cd6-130">The dbo Schema</span></span>  
 <span data-ttu-id="37cd6-131">O esquema `dbo` é o esquema padrão para um banco de dados recém-criado.</span><span class="sxs-lookup"><span data-stu-id="37cd6-131">The `dbo` schema is the default schema for a newly created database.</span></span> <span data-ttu-id="37cd6-132">O esquema `dbo` é de propriedade da conta de usuário do `dbo`.</span><span class="sxs-lookup"><span data-stu-id="37cd6-132">The `dbo` schema is owned by the `dbo` user account.</span></span> <span data-ttu-id="37cd6-133">Por padrão, os usuários criados com o comando CREATE USER do Transact-SQL têm `dbo` como o esquema padrão.</span><span class="sxs-lookup"><span data-stu-id="37cd6-133">By default, users created with the CREATE USER Transact-SQL command have `dbo` as their default schema.</span></span>  
  
 <span data-ttu-id="37cd6-134">Os usuários que são atribuídos ao esquema `dbo` não herdam as permissões da conta de usuário do `dbo`.</span><span class="sxs-lookup"><span data-stu-id="37cd6-134">Users who are assigned the `dbo` schema do not inherit the permissions of the `dbo` user account.</span></span> <span data-ttu-id="37cd6-135">Nenhuma permissão é herdada de um esquema por usuários; as permissões de esquema são herdadas pelos objetos de banco de dados contidos no esquema.</span><span class="sxs-lookup"><span data-stu-id="37cd6-135">No permissions are inherited from a schema by users; schema permissions are inherited by the database objects contained in the schema.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="37cd6-136">Quando os objetos de banco de dados são referenciados usando um nome de uma parte, o SQL Server primeiro procura no esquema padrão do usuário.</span><span class="sxs-lookup"><span data-stu-id="37cd6-136">When database objects are referenced by using a one-part name, SQL Server first looks in the user's default schema.</span></span> <span data-ttu-id="37cd6-137">Se o objeto não for encontrado lá, o SQL Server procurará em seguida no esquema `dbo`.</span><span class="sxs-lookup"><span data-stu-id="37cd6-137">If the object is not found there, SQL Server looks next in the `dbo` schema.</span></span> <span data-ttu-id="37cd6-138">Se o objeto não estiver no esquema `dbo`, um erro será retornado.</span><span class="sxs-lookup"><span data-stu-id="37cd6-138">If the object is not in the `dbo` schema, an error is returned.</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="37cd6-139">Recursos externos</span><span class="sxs-lookup"><span data-stu-id="37cd6-139">External Resources</span></span>  
 <span data-ttu-id="37cd6-140">Para obter mais informações sobre a propriedade e os esquemas do objeto, consulte os recursos a seguir.</span><span class="sxs-lookup"><span data-stu-id="37cd6-140">For more information on object ownership and schemas, see the following resources.</span></span>  
  
|<span data-ttu-id="37cd6-141">Recurso</span><span class="sxs-lookup"><span data-stu-id="37cd6-141">Resource</span></span>|<span data-ttu-id="37cd6-142">Descrição</span><span class="sxs-lookup"><span data-stu-id="37cd6-142">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="37cd6-143">[Separação do Esquema de Usuário](/previous-versions/sql/sql-server-2008-r2/ms190387(v=sql.105))</span><span class="sxs-lookup"><span data-stu-id="37cd6-143">[User-Schema Separation](/previous-versions/sql/sql-server-2008-r2/ms190387(v=sql.105))</span></span>|<span data-ttu-id="37cd6-144">Descreve as alterações introduzidas pela separação do esquema do usuário.</span><span class="sxs-lookup"><span data-stu-id="37cd6-144">Describes the changes introduced by user-schema separation.</span></span> <span data-ttu-id="37cd6-145">Inclui o novo comportamento, o seu impacto na propriedade, as exibições do catálogo e as permissões.</span><span class="sxs-lookup"><span data-stu-id="37cd6-145">Includes new behavior, its impact on ownership, catalog views, and permissions.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="37cd6-146">Confira também</span><span class="sxs-lookup"><span data-stu-id="37cd6-146">See also</span></span>

- [<span data-ttu-id="37cd6-147">Protegendo aplicativos ADO.NET</span><span class="sxs-lookup"><span data-stu-id="37cd6-147">Securing ADO.NET Applications</span></span>](../securing-ado-net-applications.md)
- [<span data-ttu-id="37cd6-148">Cenários de Segurança de Aplicativo no SQL Server</span><span class="sxs-lookup"><span data-stu-id="37cd6-148">Application Security Scenarios in SQL Server</span></span>](application-security-scenarios-in-sql-server.md)
- [<span data-ttu-id="37cd6-149">Autenticação no SQL Server</span><span class="sxs-lookup"><span data-stu-id="37cd6-149">Authentication in SQL Server</span></span>](authentication-in-sql-server.md)
- [<span data-ttu-id="37cd6-150">Funções de servidor e banco de dados no SQL Server</span><span class="sxs-lookup"><span data-stu-id="37cd6-150">Server and Database Roles in SQL Server</span></span>](server-and-database-roles-in-sql-server.md)
- [<span data-ttu-id="37cd6-151">Autorização e permissões no SQL Server</span><span class="sxs-lookup"><span data-stu-id="37cd6-151">Authorization and Permissions in SQL Server</span></span>](authorization-and-permissions-in-sql-server.md)
- [<span data-ttu-id="37cd6-152">Visão geral do ADO.NET</span><span class="sxs-lookup"><span data-stu-id="37cd6-152">ADO.NET Overview</span></span>](../ado-net-overview.md)
