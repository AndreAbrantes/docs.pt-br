---
title: Arquitetura de programação do aplicativo de serviço
description: Entenda a arquitetura de programação do aplicativo de serviço. Os aplicativos de serviço do Windows são baseados em uma classe que herda de System. ServiceProcess. ServiceBase.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- ServiceController components, programming architecture
- ServiceBase class, service states
- Windows Service applications, code model
- services, programming architecture
- ServiceController class
- services, states
- ServiceProcessInstaller class, service application code model
- Windows Service applications, states
ms.assetid: 83230026-d068-4174-97ff-e264c896eb2f
ms.openlocfilehash: 386311228abb08600acc249e80702c724c137900
ms.sourcegitcommit: 97405ed212f69b0a32faa66a5d5fae7e76628b68
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/01/2020
ms.locfileid: "91609259"
---
# <a name="service-application-programming-architecture"></a><span data-ttu-id="05b08-104">Arquitetura de programação do aplicativo de serviço</span><span class="sxs-lookup"><span data-stu-id="05b08-104">Service Application Programming Architecture</span></span>
<span data-ttu-id="05b08-105">Os aplicativos de Serviço Windows baseiam-se em uma classe que é herdada da classe <xref:System.ServiceProcess.ServiceBase?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="05b08-105">Windows Service applications are based on a class that inherits from the <xref:System.ServiceProcess.ServiceBase?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="05b08-106">Você substitui os métodos dessa classe e define funcionalidades para eles para determinar o comportamento do seu serviço.</span><span class="sxs-lookup"><span data-stu-id="05b08-106">You override methods from this class and define functionality for them to determine how your service behaves.</span></span>  
  
 <span data-ttu-id="05b08-107">As classes principais envolvidas na criação do serviço são:</span><span class="sxs-lookup"><span data-stu-id="05b08-107">The main classes involved in service creation are:</span></span>  
  
- <span data-ttu-id="05b08-108"><xref:System.ServiceProcess.ServiceBase?displayProperty=nameWithType> – você substitui os métodos da classe <xref:System.ServiceProcess.ServiceBase> ao criar um serviço e define o código para determinar como o seu serviço funciona nessa classe herdada.</span><span class="sxs-lookup"><span data-stu-id="05b08-108"><xref:System.ServiceProcess.ServiceBase?displayProperty=nameWithType> — You override methods from the <xref:System.ServiceProcess.ServiceBase> class when creating a service and define the code to determine how your service functions in this inherited class.</span></span>  
  
- <span data-ttu-id="05b08-109"><xref:System.ServiceProcess.ServiceProcessInstaller?displayProperty=nameWithType> e <xref:System.ServiceProcess.ServiceInstaller?displayProperty=nameWithType> – você usa essas classes para instalar e desinstalar o serviço.</span><span class="sxs-lookup"><span data-stu-id="05b08-109"><xref:System.ServiceProcess.ServiceProcessInstaller?displayProperty=nameWithType> and <xref:System.ServiceProcess.ServiceInstaller?displayProperty=nameWithType> —You use these classes to install and uninstall your service.</span></span>  
  
 <span data-ttu-id="05b08-110">Além disso, uma classe chamada <xref:System.ServiceProcess.ServiceController> pode ser usada para manipular o serviço sozinha.</span><span class="sxs-lookup"><span data-stu-id="05b08-110">In addition, a class named <xref:System.ServiceProcess.ServiceController> can be used to manipulate the service itself.</span></span> <span data-ttu-id="05b08-111">Essa classe não é envolvida na criação de um serviço, mas pode ser usada para iniciar e parar o serviço, passar comandos para ele e retornar uma série de enumerações.</span><span class="sxs-lookup"><span data-stu-id="05b08-111">This class is not involved in the creation of a service, but can be used to start and stop the service, pass commands to it, and return a series of enumerations.</span></span>  
  
## <a name="defining-your-services-behavior"></a><span data-ttu-id="05b08-112">Definindo o comportamento do serviço</span><span class="sxs-lookup"><span data-stu-id="05b08-112">Defining Your Service's Behavior</span></span>  
 <span data-ttu-id="05b08-113">Em sua classe de serviço, você substitui as funções de classe base que determinam o que acontece quando o estado do serviço é alterado no Gerenciador de Controle de Serviços.</span><span class="sxs-lookup"><span data-stu-id="05b08-113">In your service class, you override base class functions that determine what happens when the state of your service is changed in the Services Control Manager.</span></span> <span data-ttu-id="05b08-114">A classe <xref:System.ServiceProcess.ServiceBase> expõe os métodos a seguir, que você pode substituir para adicionar o comportamento personalizado.</span><span class="sxs-lookup"><span data-stu-id="05b08-114">The <xref:System.ServiceProcess.ServiceBase> class exposes the following methods, which you can override to add custom behavior.</span></span>  
  
|<span data-ttu-id="05b08-115">Método</span><span class="sxs-lookup"><span data-stu-id="05b08-115">Method</span></span>|<span data-ttu-id="05b08-116">Substituir para</span><span class="sxs-lookup"><span data-stu-id="05b08-116">Override to</span></span>|  
|------------|-----------------|  
|<xref:System.ServiceProcess.ServiceBase.OnStart%2A>|<span data-ttu-id="05b08-117">Indica quais ações devem ser tomadas quando o serviço é iniciado.</span><span class="sxs-lookup"><span data-stu-id="05b08-117">Indicate what actions should be taken when your service starts running.</span></span> <span data-ttu-id="05b08-118">Você precisa escrever o código neste procedimento para que o serviço realize um trabalho útil.</span><span class="sxs-lookup"><span data-stu-id="05b08-118">You must write code in this procedure for your service to perform useful work.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnPause%2A>|<span data-ttu-id="05b08-119">Indica o que deve acontecer quando o serviço está em pausa.</span><span class="sxs-lookup"><span data-stu-id="05b08-119">Indicate what should happen when your service is paused.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnStop%2A>|<span data-ttu-id="05b08-120">Indica o que deve acontecer quando a execução do serviço é interrompida.</span><span class="sxs-lookup"><span data-stu-id="05b08-120">Indicate what should happen when your service stops running.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnContinue%2A>|<span data-ttu-id="05b08-121">Indica o que deve acontecer quando o serviço continua o funcionamento normal depois de ser colocado em pausa.</span><span class="sxs-lookup"><span data-stu-id="05b08-121">Indicate what should happen when your service resumes normal functioning after being paused.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnShutdown%2A>|<span data-ttu-id="05b08-122">Indica o que deverá acontecer antes do sistema ser desligado, se o serviço estiver em execução no momento.</span><span class="sxs-lookup"><span data-stu-id="05b08-122">Indicate what should happen just prior to your system shutting down, if your service is running at that time.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnCustomCommand%2A>|<span data-ttu-id="05b08-123">Indica o que deve acontecer quando o serviço recebe um comando personalizado.</span><span class="sxs-lookup"><span data-stu-id="05b08-123">Indicate what should happen when your service receives a custom command.</span></span> <span data-ttu-id="05b08-124">Para obter mais informações sobre comandos personalizados, consulte o MSDN online.</span><span class="sxs-lookup"><span data-stu-id="05b08-124">For more information on custom commands, see MSDN online.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnPowerEvent%2A>|<span data-ttu-id="05b08-125">Indica como o serviço deve responder quando um evento de gerenciamento de energia é recebido, como bateria fraca ou operação de suspensão.</span><span class="sxs-lookup"><span data-stu-id="05b08-125">Indicate how the service should respond when a power management event is received, such as a low battery or suspended operation.</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="05b08-126">Esses métodos representam os estados pelos quais o serviço passa em seu tempo de vida. O serviço faz a transição de um estado para o próximo.</span><span class="sxs-lookup"><span data-stu-id="05b08-126">These methods represent states that the service moves through in its lifetime; the service transitions from one state to the next.</span></span> <span data-ttu-id="05b08-127">Por exemplo, você nunca fará com que o serviço responda a um comando <xref:System.ServiceProcess.ServiceBase.OnContinue%2A> antes que <xref:System.ServiceProcess.ServiceBase.OnStart%2A> seja chamado.</span><span class="sxs-lookup"><span data-stu-id="05b08-127">For example, you will never get the service to respond to an <xref:System.ServiceProcess.ServiceBase.OnContinue%2A> command before <xref:System.ServiceProcess.ServiceBase.OnStart%2A> has been called.</span></span>  
  
 <span data-ttu-id="05b08-128">Há várias outras propriedades e métodos interessantes.</span><span class="sxs-lookup"><span data-stu-id="05b08-128">There are several other properties and methods that are of interest.</span></span> <span data-ttu-id="05b08-129">Elas incluem:</span><span class="sxs-lookup"><span data-stu-id="05b08-129">These include:</span></span>  
  
- <span data-ttu-id="05b08-130">O método <xref:System.ServiceProcess.ServiceBase.Run%2A> na classe <xref:System.ServiceProcess.ServiceBase>.</span><span class="sxs-lookup"><span data-stu-id="05b08-130">The <xref:System.ServiceProcess.ServiceBase.Run%2A> method on the <xref:System.ServiceProcess.ServiceBase> class.</span></span> <span data-ttu-id="05b08-131">Este é o ponto de entrada principal para o serviço.</span><span class="sxs-lookup"><span data-stu-id="05b08-131">This is the main entry point for the service.</span></span> <span data-ttu-id="05b08-132">Quando você cria um serviço usando o modelo de Serviço Windows, o código é inserido no método `Main` do aplicativo para executar o serviço.</span><span class="sxs-lookup"><span data-stu-id="05b08-132">When you create a service using the Windows Service template, code is inserted in your application's `Main` method to run the service.</span></span> <span data-ttu-id="05b08-133">Esse código tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="05b08-133">This code looks like this:</span></span>  
  
     [!code-csharp[VbRadconService#6](../../../samples/snippets/csharp/VS_Snippets_VBCSharp/VbRadconService/CS/MyNewService.cs#6)]
     [!code-vb[VbRadconService#6](../../../samples/snippets/visualbasic/VS_Snippets_VBCSharp/VbRadconService/VB/MyNewService.vb#6)]  
  
    > [!NOTE]
    > <span data-ttu-id="05b08-134">Esses exemplos usam uma matriz do tipo <xref:System.ServiceProcess.ServiceBase>, na qual cada serviço que o aplicativo contém pode ser adicionado e, em seguida, todos os serviços podem ser executados juntos.</span><span class="sxs-lookup"><span data-stu-id="05b08-134">These examples use an array of type <xref:System.ServiceProcess.ServiceBase>, into which each service your application contains can be added, and then all of the services can be run together.</span></span> <span data-ttu-id="05b08-135">No entanto, se você estiver criando apenas um único serviço, poderá decidir não usar a matriz e simplesmente declarar um novo objeto herdado de <xref:System.ServiceProcess.ServiceBase> e, em seguida, executá-lo.</span><span class="sxs-lookup"><span data-stu-id="05b08-135">If you are only creating a single service, however, you might choose not to use the array and simply declare a new object inheriting from <xref:System.ServiceProcess.ServiceBase> and then run it.</span></span> <span data-ttu-id="05b08-136">Para obter um exemplo, confira [Como escrever serviços de forma programática](how-to-write-services-programmatically.md).</span><span class="sxs-lookup"><span data-stu-id="05b08-136">For an example, see [How to: Write Services Programmatically](how-to-write-services-programmatically.md).</span></span>  
  
- <span data-ttu-id="05b08-137">Uma série de propriedades na classe <xref:System.ServiceProcess.ServiceBase>.</span><span class="sxs-lookup"><span data-stu-id="05b08-137">A series of properties on the <xref:System.ServiceProcess.ServiceBase> class.</span></span> <span data-ttu-id="05b08-138">Elas determinam quais métodos podem ser chamados no serviço.</span><span class="sxs-lookup"><span data-stu-id="05b08-138">These determine what methods can be called on your service.</span></span> <span data-ttu-id="05b08-139">Por exemplo, quando a propriedade <xref:System.ServiceProcess.ServiceBase.CanStop%2A> está definida como `true`, o método <xref:System.ServiceProcess.ServiceBase.OnStop%2A> no serviço pode ser chamado.</span><span class="sxs-lookup"><span data-stu-id="05b08-139">For example, when the <xref:System.ServiceProcess.ServiceBase.CanStop%2A> property is set to `true`, the <xref:System.ServiceProcess.ServiceBase.OnStop%2A> method on your service can be called.</span></span> <span data-ttu-id="05b08-140">Quando a propriedade <xref:System.ServiceProcess.ServiceBase.CanPauseAndContinue%2A> está definida como `true`, os métodos <xref:System.ServiceProcess.ServiceBase.OnPause%2A> e <xref:System.ServiceProcess.ServiceBase.OnContinue%2A> podem ser chamados.</span><span class="sxs-lookup"><span data-stu-id="05b08-140">When the <xref:System.ServiceProcess.ServiceBase.CanPauseAndContinue%2A> property is set to `true`, the <xref:System.ServiceProcess.ServiceBase.OnPause%2A> and <xref:System.ServiceProcess.ServiceBase.OnContinue%2A> methods can be called.</span></span> <span data-ttu-id="05b08-141">Ao definir uma dessas propriedades para `true`, você deverá substituir e definir o processamento dos métodos associados.</span><span class="sxs-lookup"><span data-stu-id="05b08-141">When you set one of these properties to `true`, you should then override and define processing for the associated methods.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="05b08-142">O serviço precisará substituir pelo menos <xref:System.ServiceProcess.ServiceBase.OnStart%2A> e <xref:System.ServiceProcess.ServiceBase.OnStop%2A> para ser útil.</span><span class="sxs-lookup"><span data-stu-id="05b08-142">Your service must override at least <xref:System.ServiceProcess.ServiceBase.OnStart%2A> and <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to be useful.</span></span>  
  
 <span data-ttu-id="05b08-143">Você também pode usar um componente chamado <xref:System.ServiceProcess.ServiceController> para comunicar-se com um serviço existente e controlar seu comportamento.</span><span class="sxs-lookup"><span data-stu-id="05b08-143">You can also use a component called the <xref:System.ServiceProcess.ServiceController> to communicate with and control the behavior of an existing service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="05b08-144">Confira também</span><span class="sxs-lookup"><span data-stu-id="05b08-144">See also</span></span>

- [<span data-ttu-id="05b08-145">Introdução a aplicativos do Serviço Windows</span><span class="sxs-lookup"><span data-stu-id="05b08-145">Introduction to Windows Service Applications</span></span>](introduction-to-windows-service-applications.md)
- [<span data-ttu-id="05b08-146">Como: Criar serviços Windows</span><span class="sxs-lookup"><span data-stu-id="05b08-146">How to: Create Windows Services</span></span>](how-to-create-windows-services.md)
