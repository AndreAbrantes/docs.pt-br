---
title: Resolução e publicação de nome de par
ms.date: 03/30/2017
ms.assetid: f0370e08-9fa6-4ee5-ab78-9a58a20a7da2
author: mcleblanc
ms.author: markl
manager: markl
ms.openlocfilehash: 4e64f1293da18823166883a869ac6377908c9e72
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33396128"
---
# <a name="peer-name-publication-and-resolution"></a><span data-ttu-id="86637-102">Resolução e publicação de nome de par</span><span class="sxs-lookup"><span data-stu-id="86637-102">Peer Name Publication and Resolution</span></span>
## <a name="publishing-a-peer-name"></a><span data-ttu-id="86637-103">Publicando um nome de par</span><span class="sxs-lookup"><span data-stu-id="86637-103">Publishing a Peer Name</span></span>  
 <span data-ttu-id="86637-104">Para publicar uma nova ID de PNRP, um par executa o seguinte:</span><span class="sxs-lookup"><span data-stu-id="86637-104">To publish a new PNRP ID, a peer performs the following:</span></span>  
  
-   <span data-ttu-id="86637-105">Envia mensagens de publicação PNRP para seus vizinhos de cache (os pares que registraram as IDs de PNRP no nível mais baixo do cache) para propagar os caches deles.</span><span class="sxs-lookup"><span data-stu-id="86637-105">Sends PNRP publication messages to its cache neighbors (the peers that have registered PNRP IDs in the lowest level of the cache) to seed their caches.</span></span>  
  
-   <span data-ttu-id="86637-106">Escolhe nós aleatórios na nuvem que não são vizinhos dele e envia solicitações de resolução de nome PNRP para sua própria ID de P2P.</span><span class="sxs-lookup"><span data-stu-id="86637-106">Chooses random nodes in the cloud that are not its neighbors and sends them PNRP name resolution requests for its own P2P ID.</span></span> <span data-ttu-id="86637-107">O processo de determinação do ponto de extremidade resultante propaga os caches de nós aleatórios na nuvem com a ID de PNRP do par que realiza a publicação.</span><span class="sxs-lookup"><span data-stu-id="86637-107">The resulting endpoint determination process seeds the caches of random nodes in the cloud with the PNRP ID of the publishing peer.</span></span>  
  
-  
  
 <span data-ttu-id="86637-108">Nós de versão 2 do PNRP não publicam IDs de PNRP se eles estão apenas resolvendo outras IDs de P2P.</span><span class="sxs-lookup"><span data-stu-id="86637-108">PNRP version 2 nodes do not publish PNRP IDs if they are only resolving other P2P IDs.</span></span> <span data-ttu-id="86637-109">O valor de Registro HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PeerNet\PNRP\IPV6-Global\SearchOnly=1 (tipo REG_DWORD) especifica que os pares só usam PNRP para resolução de nome, nunca para publicação de nome.</span><span class="sxs-lookup"><span data-stu-id="86637-109">The HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PeerNet\PNRP\IPV6-Global\SearchOnly=1 registry value (REG_DWORD type) specifies that peers only use PNRP for name resolution, never for name publication.</span></span> <span data-ttu-id="86637-110">Esse valor de Registro também pode ser configurado por meio da Política de Grupo.</span><span class="sxs-lookup"><span data-stu-id="86637-110">This registry value can also be configured through Group Policy.</span></span>  
  
## <a name="resolving-a-peer-name"></a><span data-ttu-id="86637-111">Resolvendo um nome de par</span><span class="sxs-lookup"><span data-stu-id="86637-111">Resolving a Peer Name</span></span>  
 <span data-ttu-id="86637-112">Localizar outros pares em uma nuvem ou rede PNRP é um processo composto de duas fases:</span><span class="sxs-lookup"><span data-stu-id="86637-112">Locating other peers in a PNRP network or cloud is a process comprised of two phases:</span></span>  
  
1.  <span data-ttu-id="86637-113">Determinação do ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="86637-113">Endpoint Determination</span></span>  
  
2.  <span data-ttu-id="86637-114">Resolução da ID de PNRP</span><span class="sxs-lookup"><span data-stu-id="86637-114">PNRP ID Resolution</span></span>  
  
 <span data-ttu-id="86637-115">Na fase de determinação do ponto de extremidade, um par que está tentando resolver a ID de PNRP de um serviço em outro computador determina o endereço IPv6 desse par remoto.</span><span class="sxs-lookup"><span data-stu-id="86637-115">In the endpoint determination phase, a peer that is attempting to resolve the PNRP ID of a service on another computer determines the IPv6 address of that remote peer.</span></span>  <span data-ttu-id="86637-116">O par remoto é o que publicou ou está associado com a ID de PNRP do computador ou serviço.</span><span class="sxs-lookup"><span data-stu-id="86637-116">The remote peer is the one that published, or is associated with, the PNRP ID of the computer or service.</span></span>  
  
 <span data-ttu-id="86637-117">Depois de confirmar que o ponto de extremidade remoto foi registrado na nuvem PNRP, o par solicitante na fase de resolução de ID de PNRP envia ao ponto de extremidade de par uma solicitação da ID de PNRP do serviço desejado.</span><span class="sxs-lookup"><span data-stu-id="86637-117">After confirming that the remote endpoint has been registered into the PNRP cloud, the requesting peer in the PNRP ID resolution phase sends a request to that peer endpoint for the PNRP ID of the desired service.</span></span> <span data-ttu-id="86637-118">O ponto de extremidade envia uma resposta confirmando a ID de PNRP do serviço, um comentário e até 4 KB de informações adicionais que o par solicitante pode usar para comunicação futura.</span><span class="sxs-lookup"><span data-stu-id="86637-118">The endpoint sends a reply confirming the PNRP ID of the service, a comment, and up to 4 kilobytes of additional information that the requesting peer can use for future communication.</span></span> <span data-ttu-id="86637-119">Por exemplo, se o ponto de extremidade desejado é um servidor de jogos, os dados de registro de nome de par adicionais podem conter informações sobre o jogo, o nível de jogo e o número atual de jogadores.</span><span class="sxs-lookup"><span data-stu-id="86637-119">For example, if the desired endpoint is a gaming server, the additional peer name record data can contain information about the game, the level of play, and the current number of players.</span></span>  
  
 <span data-ttu-id="86637-120">Na fase de determinação de ponto de extremidade, o PNRP usa um processo iterativo para localizar o nó que publicou a ID de PNRP, no qual o nó executando a resolução é responsável por entrar em contato com nós que são sucessivamente mais próximos à ID de PNRP de destino.</span><span class="sxs-lookup"><span data-stu-id="86637-120">In the endpoint determination phase, PNRP uses an iterative process for locating the node that published the PNRP ID, in which the node performing the resolution is responsible for contacting nodes that are successively closer to the target PNRP ID.</span></span>  
  
 <span data-ttu-id="86637-121">Para executar a resolução de nomes PNRP, o par examina as entradas no seu próprio cache em busca de uma entrada que corresponde à ID de PNRP de destino.</span><span class="sxs-lookup"><span data-stu-id="86637-121">To perform name resolution in PNRP, the peer examines the entries in its own cache for an entry that matches the target PNRP ID.</span></span> <span data-ttu-id="86637-122">Se encontra essa entrada, o par envia uma mensagem de solicitação de PNRP para o par e aguarda uma resposta.</span><span class="sxs-lookup"><span data-stu-id="86637-122">If found, the peer sends a PNRP Request message to the peer and waits for a response.</span></span> <span data-ttu-id="86637-123">Se uma entrada para a ID de PNRP não é encontrada, o par envia uma mensagem de solicitação de PNRP para o par que corresponde à entrada que tem uma ID de PNRP que melhor corresponde à ID de PNRP de destino.</span><span class="sxs-lookup"><span data-stu-id="86637-123">If an entry for the PNRP ID is not found, the peer sends a PNRP Request message to the peer that corresponds to the entry that has a PNRP ID that most closely matches the target PNRP ID.</span></span> <span data-ttu-id="86637-124">O nó que recebe a mensagem de solicitação de PNRP examina o seu próprio cache e faz o seguinte:</span><span class="sxs-lookup"><span data-stu-id="86637-124">The node that receives the PNRP Request message examines its own cache and does the following:</span></span>  
  
-   <span data-ttu-id="86637-125">Se a ID de PNRP for encontrada, o par do ponto de extremidade solicitado responderá diretamente para o par solicitante.</span><span class="sxs-lookup"><span data-stu-id="86637-125">If the PNRP ID is found, the requested endpoint peer replies directly to the requesting peer.</span></span>  
  
-   <span data-ttu-id="86637-126">Se a ID de PNRP não for encontrada e uma ID de PNRP no cache for mais próxima à ID de PNRP de destino, o par solicitado enviará uma resposta ao par solicitante contendo o endereço IPv6 do par que representa a entrada com uma ID de PNRP que melhor corresponde à ID de PNRP de destino.</span><span class="sxs-lookup"><span data-stu-id="86637-126">If the PNRP ID is not found and a PNRP ID in the cache is closer to the target PNRP ID, the requested peer sends a response to the requesting peer containing the IPv6 address of the peer that represents the entry with a PNRP ID that more closely matches the target PNRP ID.</span></span> <span data-ttu-id="86637-127">Usando o endereço IP na resposta, o nó de consulta envia outra mensagem de solicitação de PNRP ao endereço IPv6 para responder ou examinar seu cache.</span><span class="sxs-lookup"><span data-stu-id="86637-127">Using the IP address in the response, the requesting node sends another PNRP Request message to the IPv6 address to respond or examine its cache.</span></span>  
  
-   <span data-ttu-id="86637-128">Se a ID de PNRP não é encontrada e não há nenhuma ID de PNRP em seu cache que melhor corresponde à ID de PNRP, o par solicitado envia ao par solicitante uma resposta que indica essa condição.</span><span class="sxs-lookup"><span data-stu-id="86637-128">If the PNRP ID is not found and there is no PNRP ID in its cache that is closer to the target PNRP ID, the requested peer sends the requesting peer a response that indicates this condition.</span></span> <span data-ttu-id="86637-129">O par solicitante escolhe então a próxima ID de PNRP com maior correspondência.</span><span class="sxs-lookup"><span data-stu-id="86637-129">The requesting peer then chooses the next-closest PNRP ID.</span></span>  
  
-  
  
 <span data-ttu-id="86637-130">O par solicitante continua esse processo com iterações sucessivas, eventualmente localizando o nó que registrou a ID de PNRP.</span><span class="sxs-lookup"><span data-stu-id="86637-130">The requesting peer continues this process with successive iterations, eventually locating the node that registered the PNRP ID.</span></span>  
  
 <span data-ttu-id="86637-131">Dentro do namespace <xref:System.Net.PeerToPeer>, há uma relação muitos para muitos entre os registros de <xref:System.Net.PeerToPeer.PeerName> que contêm pontos de extremidade e nuvens PNRP ou malhas nas quais eles se comunicam.</span><span class="sxs-lookup"><span data-stu-id="86637-131">Within the <xref:System.Net.PeerToPeer> namespace, there is a many-to-many relationship between the <xref:System.Net.PeerToPeer.PeerName> records that contain endpoints and PNRP clouds or meshes in which they communicate.</span></span> <span data-ttu-id="86637-132">Quando há entradas duplicadas ou obsoletas ou vários nós com o mesmo nome de par, nós PNRP podem obter informações atuais usando a classe <xref:System.Net.PeerToPeer.PeerNameResolver>.</span><span class="sxs-lookup"><span data-stu-id="86637-132">When there are duplicate or stale entries, or multiple nodes with the same peer name, PNRP nodes can obtain current information using the <xref:System.Net.PeerToPeer.PeerNameResolver> class.</span></span> <span data-ttu-id="86637-133">Os métodos <xref:System.Net.PeerToPeer.PeerNameResolver> usam um único nome de par para simplificar a perspectiva para registros de nome de um par para muitos pares e do mesmo par para muitas nuvens.</span><span class="sxs-lookup"><span data-stu-id="86637-133">The <xref:System.Net.PeerToPeer.PeerNameResolver> methods use a single peer name to simplify the perspective to one peer-to-many peer name records and the same one peer to many clouds.</span></span> <span data-ttu-id="86637-134">Isso é semelhante a uma consulta executada usando uma junção de tabela relacional.</span><span class="sxs-lookup"><span data-stu-id="86637-134">This is similar to a query performed using a relational-table join.</span></span> <span data-ttu-id="86637-135">Após a conclusão bem-sucedida, o objeto resolvedor retorna um <xref:System.Net.PeerToPeer.PeerNameRecordCollection> para o nome de par especificado.</span><span class="sxs-lookup"><span data-stu-id="86637-135">Upon successful completion, the Resolver object returns a <xref:System.Net.PeerToPeer.PeerNameRecordCollection> for the specified peer name.</span></span>  <span data-ttu-id="86637-136">Por exemplo, um nome de par ocorreria em todos os registros de nome de par na coleção, ordenados pela nuvem.</span><span class="sxs-lookup"><span data-stu-id="86637-136">For example, a peer name would occur in all the peer name records in the collection, ordered by cloud.</span></span> <span data-ttu-id="86637-137">Estas são as instâncias do nome do par cujos dados de suporte podem ser solicitados por um aplicativo baseado em PNRP.</span><span class="sxs-lookup"><span data-stu-id="86637-137">These are the instances of the peer name whose supporting data may be requested by a PNRP-based application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="86637-138">Consulte também</span><span class="sxs-lookup"><span data-stu-id="86637-138">See Also</span></span>  
 <xref:System.Net.PeerToPeer>
