---
title: Caches PNRP
ms.date: 03/30/2017
ms.assetid: 270068d9-1b6b-4eb9-9e14-e02326bb88df
ms.openlocfilehash: 53df90a9bb3da90145ebe30bb274b4ff4950c00f
ms.sourcegitcommit: c93fd5139f9efcf6db514e3474301738a6d1d649
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/27/2018
ms.locfileid: "50180959"
---
# <a name="pnrp-caches"></a><span data-ttu-id="1c83b-102">Caches PNRP</span><span class="sxs-lookup"><span data-stu-id="1c83b-102">PNRP Caches</span></span>
<span data-ttu-id="1c83b-103">Caches de protocolo PNRP são coleções locais de pontos de extremidade de par selecionados de maneira algorítmica mantidos no par.</span><span class="sxs-lookup"><span data-stu-id="1c83b-103">Peer Name Resolution Protocol (PNRP) caches are local collections of algorithmically selected peer endpoints maintained on the peer.</span></span>  
  
## <a name="pnrp-cache-initialization"></a><span data-ttu-id="1c83b-104">Inicialização do cache PNRP</span><span class="sxs-lookup"><span data-stu-id="1c83b-104">PNRP Cache Initialization</span></span>  
 <span data-ttu-id="1c83b-105">Para inicializar o cache PNRP ou a coleção de registro de nome de nó par, quando um nó par é iniciado, um nó pode usar os seguintes métodos:</span><span class="sxs-lookup"><span data-stu-id="1c83b-105">To initialize the PNRP cache, or Peer Name Record Collection, when a peer node starts up, a node can use the following methods:</span></span>  
  
-   <span data-ttu-id="1c83b-106">Entradas de cache persistente que estavam presentes quando o nó foi desligado são carregadas do armazenamento de disco rígido.</span><span class="sxs-lookup"><span data-stu-id="1c83b-106">Persistent cache entries that were present when the node was shut down are loaded from hard disk storage.</span></span>  
  
-   <span data-ttu-id="1c83b-107">Se um aplicativo usa a infraestrutura de colaboração P2P, informações de colaboração estão disponíveis no Gerenciador de Contatos desse nó.</span><span class="sxs-lookup"><span data-stu-id="1c83b-107">If an application uses the P2P collaboration infrastructure, collaboration information is available in the Contact Manager for that node.</span></span>  
  
## <a name="scaling-peer-name-resolution-with-a-multi-level-cache"></a><span data-ttu-id="1c83b-108">Colocação em escala da resolução de nomes de par com um cache multinível</span><span class="sxs-lookup"><span data-stu-id="1c83b-108">Scaling Peer Name Resolution with a Multi-Level Cache</span></span>  
 <span data-ttu-id="1c83b-109">Para manter os tamanhos dos caches PNRP pequenos, nós pares usam um cache multinível, em que cada nível contém um número máximo de entradas.</span><span class="sxs-lookup"><span data-stu-id="1c83b-109">To keep the sizes of the PNRP caches small, peer nodes use a multi-level cache, in which each level contains a maximum number of entries.</span></span> <span data-ttu-id="1c83b-110">Cada nível no cache representa uma parte menor equivalente a um décimo do espaço do número de identificação de PNRP (2<sup>256</sup>).</span><span class="sxs-lookup"><span data-stu-id="1c83b-110">Each level in the cache represents a one tenth smaller portion of the PNRP ID number space (2<sup>256</sup>).</span></span> <span data-ttu-id="1c83b-111">O nível mais baixo no cache contém uma ID de PNRP registrada localmente e outras IDs de PNRP numericamente próximas a ela.</span><span class="sxs-lookup"><span data-stu-id="1c83b-111">The lowest level in the cache contains a locally registered PNRP ID and other PNRP IDs that are numerically close to it.</span></span> <span data-ttu-id="1c83b-112">Conforme um nível de cache é preenchido com um máximo de 20 entradas, um novo nível inferior é criado.</span><span class="sxs-lookup"><span data-stu-id="1c83b-112">As a level of the cache is filled with a maximum of 20 entries, a new lower level is created.</span></span> <span data-ttu-id="1c83b-113">O número máximo de níveis no cache é na ordem de log10(número total de IDs de PNRP na nuvem).</span><span class="sxs-lookup"><span data-stu-id="1c83b-113">The maximum number of levels in the cache is on the order of log10(Total number of PNRP IDs in the cloud).</span></span> <span data-ttu-id="1c83b-114">Por exemplo, para uma nuvem global com 100 milhões de IDs de PNRP, há não mais do que 8 (=log10(100.000.000)) níveis em cache e um número semelhante de saltos para resolver uma ID de PNRP durante a resolução de nome.</span><span class="sxs-lookup"><span data-stu-id="1c83b-114">For example, for a global cloud with 100 million PNRP IDs, there are no more than 8 (=log10(100,000,000)) levels in the cache and a similar number of hops to resolve a PNRP ID during name resolution.</span></span> <span data-ttu-id="1c83b-115">Esse mecanismo permite uma tabela de hash distribuída para a qual uma ID de PNRP arbitrária pode ser resolvida pelo encaminhamento de mensagens de solicitação PNRP para o par mais próximo até o par com o CPA correspondente ser encontrado.</span><span class="sxs-lookup"><span data-stu-id="1c83b-115">This mechanism allows for a distributed hash table for which an arbitrary PNRP ID can be resolved by forwarding PNRP Request messages to the next-closest peer until the peer with the corresponding CPA is found.</span></span>  
  
 <span data-ttu-id="1c83b-116">Para garantir que a resolução possa ser concluída, cada vez que um nó adiciona uma entrada para o nível mais baixo de seu cache, ele sobrecarrega uma cópia da entrada para todos os nós contidos no último nível do cache.</span><span class="sxs-lookup"><span data-stu-id="1c83b-116">To ensure that resolution can complete, each time a node adds an entry to the lowest level of its cache, it floods a copy of the entry to all the nodes within the last level of the cache.</span></span>  
  
 <span data-ttu-id="1c83b-117">As entradas de cache são atualizadas ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="1c83b-117">The cache entries are refreshed over time.</span></span> <span data-ttu-id="1c83b-118">Entradas de cache obsoletas são removidas do cache.</span><span class="sxs-lookup"><span data-stu-id="1c83b-118">Cache entries that are stale are removed from the cache.</span></span> <span data-ttu-id="1c83b-119">O resultado é que a tabela de hash distribuída de IDs de PNRP é baseada em pontos de extremidade ativos, ao contrário do DNS em que os registros de endereços e o protocolo DNS não fornecem nenhuma garantia de que o nó associado ao endereço esteja ativamente na rede.</span><span class="sxs-lookup"><span data-stu-id="1c83b-119">The result is that the distributed hash table of PNRP IDs is based on active endpoints, unlike DNS in which address records and the DNS protocol provide no guarantee that the node associated with the address is actively on the network.</span></span>  
  
## <a name="other-pnrp-caches"></a><span data-ttu-id="1c83b-120">Outros caches PNRP</span><span class="sxs-lookup"><span data-stu-id="1c83b-120">Other PNRP Caches</span></span>  
 <span data-ttu-id="1c83b-121">Um outro armazenamento de dados persistente é o cache local.</span><span class="sxs-lookup"><span data-stu-id="1c83b-121">Another persistent data store is the local cache.</span></span>  <span data-ttu-id="1c83b-122">Além dos outros objetos necessários para a atividade de PNRP, ele pode incluir os registros associados a uma sessão de colaboração ou de nuvem PNRP que é publicada com segurança e sincronizada entre todos os membros da nuvem.</span><span class="sxs-lookup"><span data-stu-id="1c83b-122">In addition to the other objects needed for PNRP activity, it may include the records associated with a PNRP cloud or collaboration session that is securely published and synchronized between all the members of the cloud.</span></span> <span data-ttu-id="1c83b-123">Esse repositório replicado representa a exibição dos dados do grupo, que devem ser os mesmos para todos os membros do grupo.</span><span class="sxs-lookup"><span data-stu-id="1c83b-123">This replicated store represents the view of the group data, which should be the same for all group members.</span></span> <span data-ttu-id="1c83b-124">Tecnicamente, esses objetos não são registros propriamente ditos mas, em vez disso, são dados de aplicativos, de presença e de objeto destinados a um cache local.</span><span class="sxs-lookup"><span data-stu-id="1c83b-124">Technically, these objects are not records per se, but rather application, presence, and object data destined for a local cache.</span></span> <span data-ttu-id="1c83b-125">O uso da nuvem PNRP garante que os objetos sejam propagados para todos os nós na sessão de colaboração ou nuvem PNRP.</span><span class="sxs-lookup"><span data-stu-id="1c83b-125">Use of the PNRP cloud ensures that objects are propagated to all nodes in the collaboration session or PNRP cloud.</span></span>  <span data-ttu-id="1c83b-126">O registro de replicação entre os membros da nuvem usa SSL para fornecer criptografia e integridade dos dados.</span><span class="sxs-lookup"><span data-stu-id="1c83b-126">Record replication between cloud members uses SSL to provide encryption and data integrity.</span></span>  
  
 <span data-ttu-id="1c83b-127">Quando um par ingressa em uma nuvem, ele não recebe automaticamente dados de cache local do par de host ao qual ele se conecta; ele precisa assinar o par de host para receber atualizações de dados de aplicativos, de presença de objeto.</span><span class="sxs-lookup"><span data-stu-id="1c83b-127">When a peer joins a cloud, they do not automatically receive local cache data from the host peer to which they attach; they have to subscribe to the host peer to receive updates in application, presence, and object data.</span></span> <span data-ttu-id="1c83b-128">Após a sincronização inicial, pares ressincronizam periodicamente seus repositórios replicados para garantir que todos os membros do grupo tenham a mesma exibição, de maneira consistente.</span><span class="sxs-lookup"><span data-stu-id="1c83b-128">After the initial synchronization, peers periodically resynchronize their replicated stores to ensure that all group members consistently have the same view.</span></span>  <span data-ttu-id="1c83b-129">A sessão de colaboração ou aplicativos dentro da sessão de colaboração também podem executar a mesma função.</span><span class="sxs-lookup"><span data-stu-id="1c83b-129">The collaboration session or applications within the collaboration session may also perform the same function.</span></span>  
  
 <span data-ttu-id="1c83b-130">Depois de iniciada uma sessão de colaboração para uma nuvem, os aplicativos podem registrar pares e começar a publicar suas informações usando a segurança definida pelo escopo de nuvem.</span><span class="sxs-lookup"><span data-stu-id="1c83b-130">After a collaboration session has begun for a cloud, applications can register peers and begin publishing their information using the security defined by the cloud scope.</span></span> <span data-ttu-id="1c83b-131">Quando um par ingressa em uma nuvem, os mecanismos de segurança para a nuvem são aplicados ao par, dando a ele um escopo no qual participar.</span><span class="sxs-lookup"><span data-stu-id="1c83b-131">When a peer joins a cloud, the security mechanisms for the cloud are applied to the peer, giving it a scope in which to participate.</span></span>  <span data-ttu-id="1c83b-132">Os registros dele, em seguida, podem ser publicados com segurança dentro do escopo da nuvem.</span><span class="sxs-lookup"><span data-stu-id="1c83b-132">Its records can then be published securely within the scope of the cloud.</span></span> <span data-ttu-id="1c83b-133">Observe que o escopo da nuvem pode não ser o mesmo que o escopo do aplicativo de colaboração.</span><span class="sxs-lookup"><span data-stu-id="1c83b-133">Note that cloud scope may not be the same as collaboration application scope.</span></span>  
  
 <span data-ttu-id="1c83b-134">Pares podem registrar interesse em receber objetos de outros pares.</span><span class="sxs-lookup"><span data-stu-id="1c83b-134">Peers can register interest in receiving objects from other peers.</span></span> <span data-ttu-id="1c83b-135">Quando um objeto é atualizado, o aplicativo de colaboração é notificado e o novo objeto é passado para todos os assinantes do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1c83b-135">When an object is updated, the collaboration application is notified and the new object is passed to all subscribers of the application.</span></span> <span data-ttu-id="1c83b-136">Por exemplo, um par em um aplicativo de chat de grupo pode registrar interesse em receber informações do aplicativo, que ele envie todos os registros de chat como dados de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1c83b-136">For example, a peer in a group chat application can register interest in receiving application information, which will send it all chat records as application data.</span></span>  <span data-ttu-id="1c83b-137">Isso permite monitorar a atividade de chat dentro da nuvem.</span><span class="sxs-lookup"><span data-stu-id="1c83b-137">This allows it to monitor chat activity within the cloud.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1c83b-138">Consulte também</span><span class="sxs-lookup"><span data-stu-id="1c83b-138">See Also</span></span>  
 <xref:System.Net.PeerToPeer>
