---
title: "Melhorias do desempenho de soquete na versão 3.5"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- VB
- CSharp
- C++
- jsharp
ms.assetid: 225aa5f9-c54b-4620-ab64-5cd100cfd54c
caps.latest.revision: 9
author: mcleblanc
ms.author: markl
manager: markl
ms.translationtype: HT
ms.sourcegitcommit: 306c608dc7f97594ef6f72ae0f5aaba596c936e1
ms.openlocfilehash: 3e0e648fb14e07b62f70c614af84a98a256f6095
ms.contentlocale: pt-br
ms.lasthandoff: 08/21/2017

---
# <a name="socket-performance-enhancements-in-version-35"></a><span data-ttu-id="72723-102">Melhorias do desempenho de soquete na versão 3.5</span><span class="sxs-lookup"><span data-stu-id="72723-102">Socket Performance Enhancements in Version 3.5</span></span>
<span data-ttu-id="72723-103">A classe <xref:System.Net.Sockets.Socket?displayProperty=fullName> foi aprimorada na Versão 3.5 para uso por aplicativos que usam a E/S de rede assíncrona para obter o melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="72723-103">The <xref:System.Net.Sockets.Socket?displayProperty=fullName> class has been enhanced in Version 3.5 for use by applications that use asynchronous network I/O to achieve the highest performance.</span></span> <span data-ttu-id="72723-104">Uma série de novas classes foi adicionada como parte de um conjunto de melhorias da classe <xref:System.Net.Sockets.Socket>, que fornece um padrão assíncrono alternativo que pode ser usado por aplicativos de soquete especializados de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="72723-104">A series of new classes have been added as part of a set of enhancements to the <xref:System.Net.Sockets.Socket> class that provide an alternative asynchronous pattern that can be used by specialized high-performance socket applications.</span></span> <span data-ttu-id="72723-105">Essas melhorias foram projetadas especificamente para aplicativos de servidor de rede que exigem alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="72723-105">These enhancements were specifically designed for network server applications that require high performance.</span></span> <span data-ttu-id="72723-106">Um aplicativo pode usar o padrão assíncrono aprimorado exclusivamente ou somente nas áreas de acesso direcionadas de seu aplicativo (ao receber grandes quantidades de dados, por exemplo).</span><span class="sxs-lookup"><span data-stu-id="72723-106">An application can use the enhanced asynchronous pattern exclusively, or only in targeted hot areas of their application (when receiving large amounts of data, for example).</span></span>  
  
## <a name="class-enhancements"></a><span data-ttu-id="72723-107">Melhorias da classe</span><span class="sxs-lookup"><span data-stu-id="72723-107">Class Enhancements</span></span>  
 <span data-ttu-id="72723-108">O principal recurso dessas melhorias é evitar a alocação e a sincronização repetidas de objetos durante a E/S de soquete assíncrono de alto volume.</span><span class="sxs-lookup"><span data-stu-id="72723-108">The main feature of these enhancements is the avoidance of the repeated allocation and synchronization of objects during high-volume asynchronous socket I/O.</span></span> <span data-ttu-id="72723-109">O padrão de design Início/Fim atualmente implementado pela classe <xref:System.Net.Sockets.Socket> para a E/S de soquete assíncrono exige que um objeto <xref:System.IAsyncResult?displayProperty=fullName> seja alocado para cada operação de soquete assíncrono.</span><span class="sxs-lookup"><span data-stu-id="72723-109">The Begin/End design pattern currently implemented by the <xref:System.Net.Sockets.Socket> class for asynchronous socket I/O requires a <xref:System.IAsyncResult?displayProperty=fullName> object be allocated for each asynchronous socket operation.</span></span>  
  
 <span data-ttu-id="72723-110">Nas novas melhorias da classe <xref:System.Net.Sockets.Socket>, as operações de soquete assíncrono são descritas por objetos da classe <xref:System.Net.Sockets.SocketAsyncEventArgs?displayProperty=fullName> reutilizáveis alocados e mantidos pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="72723-110">In the new <xref:System.Net.Sockets.Socket> class enhancements, asynchronous socket operations are described by reusable <xref:System.Net.Sockets.SocketAsyncEventArgs?displayProperty=fullName> class objects allocated and maintained by the application.</span></span> <span data-ttu-id="72723-111">Os aplicativos de soquete de alto desempenho sabem muito bem a quantidade de operações de soquete sobreposto que devem ser sustentadas.</span><span class="sxs-lookup"><span data-stu-id="72723-111">High-performance socket applications know best the amount of overlapped socket operations that must be sustained.</span></span> <span data-ttu-id="72723-112">O aplicativo pode criar a quantidade de objetos <xref:System.Net.Sockets.SocketAsyncEventArgs> de que precisar.</span><span class="sxs-lookup"><span data-stu-id="72723-112">The application can create as many of the <xref:System.Net.Sockets.SocketAsyncEventArgs> objects that it needs.</span></span> <span data-ttu-id="72723-113">Por exemplo, se um aplicativo para servidores precisar ter 15 operações de aceitação de soquete pendentes em todos os momentos para dar suporte às taxas de conexão de cliente de entrada, ele poderá alocar 15 objetos <xref:System.Net.Sockets.SocketAsyncEventArgs> reutilizáveis com antecedência para essa finalidade.</span><span class="sxs-lookup"><span data-stu-id="72723-113">For example, if a server application needs to have 15 socket accept operations outstanding at all times to support incoming client connection rates, it can allocate 15 reusable <xref:System.Net.Sockets.SocketAsyncEventArgs> objects in advance for that purpose.</span></span>  
  
 <span data-ttu-id="72723-114">O padrão para executar uma operação de soquete assíncrono com essa classe consiste nas seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="72723-114">The pattern for performing an asynchronous socket operation with this class consists of the following steps:</span></span>  
  
1.  <span data-ttu-id="72723-115">Alocar um novo objeto de contexto <xref:System.Net.Sockets.SocketAsyncEventArgs> ou obter um gratuito em um pool de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="72723-115">Allocate a new <xref:System.Net.Sockets.SocketAsyncEventArgs> context object, or get a free one from an application pool.</span></span>  
  
2.  <span data-ttu-id="72723-116">Definir as propriedades no objeto de contexto para a operação prestes a ser executada (o método de representante do retorno de chamada e o buffer de dados, por exemplo).</span><span class="sxs-lookup"><span data-stu-id="72723-116">Set properties on the context object to the operation about to be performed (the callback delegate method and data buffer, for example).</span></span>  
  
3.  <span data-ttu-id="72723-117">Chamar o método de soquete apropriado (xxxAsync) para iniciar a operação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="72723-117">Call the appropriate socket method (xxxAsync) to initiate the asynchronous operation.</span></span>  
  
4.  <span data-ttu-id="72723-118">Se o método de soquete assíncrono (xxxAsync) retornar verdadeiro no retorno de chamada, consulte as propriedades do contexto para obter o status de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72723-118">If the asynchronous socket method (xxxAsync) returns true in the callback, query the context properties for completion status.</span></span>  
  
5.  <span data-ttu-id="72723-119">Se o método de soquete assíncrono (xxxAsync) retornar falso no retorno de chamada, isso indicará que a operação foi concluída de forma síncrona.</span><span class="sxs-lookup"><span data-stu-id="72723-119">If the asynchronous socket method (xxxAsync) returns false in the callback, the operation completed synchronously.</span></span> <span data-ttu-id="72723-120">As propriedades do contexto podem ser consultadas para obter o resultado da operação.</span><span class="sxs-lookup"><span data-stu-id="72723-120">The context properties may be queried for the operation result.</span></span>  
  
6.  <span data-ttu-id="72723-121">Reutilizar o contexto para outra operação, colocá-lo novamente no pool ou descartá-lo.</span><span class="sxs-lookup"><span data-stu-id="72723-121">Reuse the context for another operation, put it back in the pool, or discard it.</span></span>  
  
 <span data-ttu-id="72723-122">O tempo de vida do novo objeto de contexto da operação de soquete assíncrono é determinado por referências no código do aplicativo e por referências de E/S assíncrona.</span><span class="sxs-lookup"><span data-stu-id="72723-122">The lifetime of the new asynchronous socket operation context object is determined by references in the application code and asynchronous I/O references.</span></span> <span data-ttu-id="72723-123">Não é necessário que o aplicativo retenha uma referência a um objeto de contexto da operação de soquete assíncrono depois que ele é enviado como um parâmetro para um dos métodos da operação de soquete assíncrono.</span><span class="sxs-lookup"><span data-stu-id="72723-123">It is not necessary for the application to retain a reference to an asynchronous socket operation context object after it is submitted as a parameter to one of the asynchronous socket operation methods.</span></span> <span data-ttu-id="72723-124">Ele permanecerá referenciado até o retorno do retorno de chamada de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72723-124">It will remain referenced until the completion callback returns.</span></span> <span data-ttu-id="72723-125">No entanto, é vantajoso para o aplicativo reter a referência ao objeto de contexto, de modo que ele possa ser reutilizado para uma operação futura de soquete assíncrono.</span><span class="sxs-lookup"><span data-stu-id="72723-125">However it is advantageous for the application to retain the reference to the context object so that it can be reused for a future asynchronous socket operation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="72723-126">Consulte também</span><span class="sxs-lookup"><span data-stu-id="72723-126">See Also</span></span>  
 <span data-ttu-id="72723-127"><xref:System.Net.Sockets.Socket?displayProperty=fullName></span><span class="sxs-lookup"><span data-stu-id="72723-127"><xref:System.Net.Sockets.Socket?displayProperty=fullName></span></span>   
 <span data-ttu-id="72723-128"><xref:System.Net.Sockets.SendPacketsElement?displayProperty=fullName></span><span class="sxs-lookup"><span data-stu-id="72723-128"><xref:System.Net.Sockets.SendPacketsElement?displayProperty=fullName></span></span>   
 <span data-ttu-id="72723-129"><xref:System.Net.Sockets.SocketAsyncEventArgs?displayProperty=fullName></span><span class="sxs-lookup"><span data-stu-id="72723-129"><xref:System.Net.Sockets.SocketAsyncEventArgs?displayProperty=fullName></span></span>   
 <span data-ttu-id="72723-130"><xref:System.Net.Sockets.SocketAsyncOperation?displayProperty=fullName></span><span class="sxs-lookup"><span data-stu-id="72723-130"><xref:System.Net.Sockets.SocketAsyncOperation?displayProperty=fullName></span></span>   
 <span data-ttu-id="72723-131">[Amostras de programação de rede](../../../docs/framework/network-programming/network-programming-samples.md) </span><span class="sxs-lookup"><span data-stu-id="72723-131">[Network Programming Samples](../../../docs/framework/network-programming/network-programming-samples.md) </span></span>  
 [<span data-ttu-id="72723-132">Amostra de tecnologia de desempenho de soquete</span><span class="sxs-lookup"><span data-stu-id="72723-132">Socket Performance Technology Sample</span></span>](http://go.microsoft.com/fwlink/?LinkID=179570)

