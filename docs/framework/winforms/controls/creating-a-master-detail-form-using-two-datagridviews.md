---
title: 'Walkthrough: criar um formulário de detalhes mestre usando dois controles DataGridView'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- DataGridView control [Windows Forms], master/detail form
- parent-child tables [Windows Forms], displaying on Windows Forms
- master-details lists [Windows Forms], displaying on Windows Forms
- walkthroughs [Windows Forms], DataGridView control
ms.assetid: c5fa29e8-47f7-4691-829b-0e697a691f36
ms.openlocfilehash: bb3da36430c7493b941f3711cb584b4517d5bd54
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/24/2020
ms.locfileid: "76740575"
---
# <a name="walkthrough-creating-a-masterdetail-form-using-two-windows-forms-datagridview-controls"></a><span data-ttu-id="ad3d0-102">Instruções passo a passo: criando um formulário mestre/detalhes usando dois controles DataGridView dos Windows Forms</span><span class="sxs-lookup"><span data-stu-id="ad3d0-102">Walkthrough: Creating a Master/Detail Form Using Two Windows Forms DataGridView Controls</span></span>

<span data-ttu-id="ad3d0-103">Um dos cenários mais comuns para usar o controle de <xref:System.Windows.Forms.DataGridView> é o formulário *mestre/detalhado* , no qual uma relação pai/filho entre duas tabelas de banco de dados é exibida.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-103">One of the most common scenarios for using the <xref:System.Windows.Forms.DataGridView> control is the *master/detail* form, in which a parent/child relationship between two database tables is displayed.</span></span> <span data-ttu-id="ad3d0-104">Seleção de linhas na tabela mestra faz com que a tabela de detalhes sejam atualizadas com os dados filho correspondentes.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-104">Selecting rows in the master table causes the detail table to update with the corresponding child data.</span></span>

<span data-ttu-id="ad3d0-105">A implementação de um formulário mestre/detalhado é fácil usando a interação entre o controle de <xref:System.Windows.Forms.DataGridView> e o componente <xref:System.Windows.Forms.BindingSource>.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-105">Implementing a master/detail form is easy using the interaction between the <xref:System.Windows.Forms.DataGridView> control and the <xref:System.Windows.Forms.BindingSource> component.</span></span> <span data-ttu-id="ad3d0-106">Neste tutorial, você criará o formulário usando dois controles de <xref:System.Windows.Forms.DataGridView> e dois componentes de <xref:System.Windows.Forms.BindingSource>.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-106">In this walkthrough, you will build the form using two <xref:System.Windows.Forms.DataGridView> controls and two <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="ad3d0-107">O formulário mostrará duas tabelas relacionadas no banco de dados de exemplo SQL Server Northwind: `Customers` e `Orders`.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-107">The form will show two related tables in the Northwind SQL Server sample database: `Customers` and `Orders`.</span></span> <span data-ttu-id="ad3d0-108">Quando terminar, você terá um formulário que mostra todos os clientes no banco de dados no <xref:System.Windows.Forms.DataGridView> mestre e todos os pedidos do cliente selecionado no <xref:System.Windows.Forms.DataGridView>de detalhes.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-108">When you are finished, you will have a form that shows all the customers in the database in the master <xref:System.Windows.Forms.DataGridView> and all the orders for the selected customer in the detail <xref:System.Windows.Forms.DataGridView>.</span></span>

<span data-ttu-id="ad3d0-109">Para copiar o código neste tópico como uma única listagem, consulte [Como criar um formulário mestre/detalhes usando dois controles DataGridView dos Windows Forms](create-a-master-detail-form-using-two-datagridviews.md).</span><span class="sxs-lookup"><span data-stu-id="ad3d0-109">To copy the code in this topic as a single listing, see [How to: Create a Master/Detail Form Using Two Windows Forms DataGridView Controls](create-a-master-detail-form-using-two-datagridviews.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ad3d0-110">{1&gt;{2&gt;Pré-requisitos&lt;2}&lt;1}</span><span class="sxs-lookup"><span data-stu-id="ad3d0-110">Prerequisites</span></span>

<span data-ttu-id="ad3d0-111">Para concluir este passo a passo, você precisará de:</span><span class="sxs-lookup"><span data-stu-id="ad3d0-111">In order to complete this walkthrough, you will need:</span></span>

- <span data-ttu-id="ad3d0-112">Acesso a um servidor que tem o banco de dados de exemplo SQL Server Northwind.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-112">Access to a server that has the Northwind SQL Server sample database.</span></span>

## <a name="creating-the-form"></a><span data-ttu-id="ad3d0-113">Criando o formulário</span><span class="sxs-lookup"><span data-stu-id="ad3d0-113">Creating the form</span></span>

#### <a name="to-create-a-masterdetail-form"></a><span data-ttu-id="ad3d0-114">Para criar um formulário mestre/detalhes</span><span class="sxs-lookup"><span data-stu-id="ad3d0-114">To create a master/detail form</span></span>

1. <span data-ttu-id="ad3d0-115">Crie uma classe que derive de <xref:System.Windows.Forms.Form> e contenha dois controles <xref:System.Windows.Forms.DataGridView> e dois componentes <xref:System.Windows.Forms.BindingSource>.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-115">Create a class that derives from <xref:System.Windows.Forms.Form> and contains two <xref:System.Windows.Forms.DataGridView> controls and two <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="ad3d0-116">O código a seguir fornece inicialização de formulário básica e inclui um método `Main`.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-116">The following code provides basic form initialization and includes a `Main` method.</span></span> <span data-ttu-id="ad3d0-117">Se você usar o designer do Visual Studio para criar seu formulário, poderá usar o código gerado pelo designer em vez desse código, mas certifique-se de usar os nomes mostrados nas declarações de variável aqui.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-117">If you use the Visual Studio designer to create your form, you can use the designer generated code instead of this code, but be sure to use the names shown in the variable declarations here.</span></span>

    [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#01](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#01)]
    [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#01](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#01)]
    [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#02](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#02)]
    [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#02](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#02)]

2. <span data-ttu-id="ad3d0-118">Implemente um método na sua definição de classe do formulário para manipular os detalhes da conexão ao banco de dados.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-118">Implement a method in your form's class definition for handling the detail of connecting to the database.</span></span> <span data-ttu-id="ad3d0-119">Este exemplo usa um método `GetData` que popula um objeto <xref:System.Data.DataSet>, adiciona um objeto <xref:System.Data.DataRelation> ao conjunto de dados e associa os componentes <xref:System.Windows.Forms.BindingSource>.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-119">This example uses a `GetData` method that populates a <xref:System.Data.DataSet> object, adds a <xref:System.Data.DataRelation> object to the data set, and binds the <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="ad3d0-120">Certifique-se de definir a variável de `connectionString` como um valor que seja apropriada para o base de dados.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-120">Be sure to set the `connectionString` variable to a value that is appropriate for your database.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="ad3d0-121">O armazenamento das informações confidenciais, como uma senha, dentro da cadeia de conexão pode afetar a segurança do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-121">Storing sensitive information, such as a password, within the connection string can affect the security of your application.</span></span> <span data-ttu-id="ad3d0-122">O uso da Autenticação do Windows (também conhecida como segurança integrada) é uma maneira mais segura de controlar o acesso a um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-122">Using Windows Authentication (also known as integrated security) is a more secure way to control access to a database.</span></span> <span data-ttu-id="ad3d0-123">Para obter mais informações, consulte [Protegendo informações de conexão](../../data/adonet/protecting-connection-information.md).</span><span class="sxs-lookup"><span data-stu-id="ad3d0-123">For more information, see [Protecting Connection Information](../../data/adonet/protecting-connection-information.md).</span></span>

    [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#20](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#20)]
    [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#20](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#20)]

3. <span data-ttu-id="ad3d0-124">Implemente um manipulador para o evento <xref:System.Windows.Forms.Form.Load> do seu formulário que associa os controles de <xref:System.Windows.Forms.DataGridView> aos componentes <xref:System.Windows.Forms.BindingSource> e chama o método `GetData`.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-124">Implement a handler for your form's <xref:System.Windows.Forms.Form.Load> event that binds the <xref:System.Windows.Forms.DataGridView> controls to the <xref:System.Windows.Forms.BindingSource> components and calls the `GetData` method.</span></span> <span data-ttu-id="ad3d0-125">O exemplo a seguir inclui um código que redimensiona <xref:System.Windows.Forms.DataGridView> colunas para ajustar os dados exibidos.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-125">The following example includes code that resizes <xref:System.Windows.Forms.DataGridView> columns to fit the displayed data.</span></span>

    [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#10](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#10)]
    [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#10](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#10)]

## <a name="testing-the-application"></a><span data-ttu-id="ad3d0-126">Testando o aplicativo</span><span class="sxs-lookup"><span data-stu-id="ad3d0-126">Testing the Application</span></span>

<span data-ttu-id="ad3d0-127">Agora, é possível testar o formulário para garantir que ele se comporta da forma esperada.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-127">You can now test the form to make sure it behaves as expected.</span></span>

#### <a name="to-test-the-form"></a><span data-ttu-id="ad3d0-128">Para testar o formulário</span><span class="sxs-lookup"><span data-stu-id="ad3d0-128">To test the form</span></span>

- <span data-ttu-id="ad3d0-129">Compile e execute o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-129">Compile and run the application.</span></span>

  <span data-ttu-id="ad3d0-130">Você verá dois controles de <xref:System.Windows.Forms.DataGridView>, um acima do outro.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-130">You will see two <xref:System.Windows.Forms.DataGridView> controls, one above the other.</span></span> <span data-ttu-id="ad3d0-131">Na parte superior estão os clientes da tabela `Customers` Northwind e na parte inferior estão os `Orders` correspondentes ao cliente selecionado.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-131">On top are the customers from the Northwind `Customers` table, and at the bottom are the `Orders` corresponding to the selected customer.</span></span> <span data-ttu-id="ad3d0-132">À medida que você seleciona linhas diferentes no <xref:System.Windows.Forms.DataGridView>superior, o conteúdo do <xref:System.Windows.Forms.DataGridView> menor é alterado de acordo.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-132">As you select different rows in the upper <xref:System.Windows.Forms.DataGridView>, the contents of the lower <xref:System.Windows.Forms.DataGridView> change accordingly.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ad3d0-133">{1&gt;{2&gt;Próximas etapas&lt;2}&lt;1}</span><span class="sxs-lookup"><span data-stu-id="ad3d0-133">Next Steps</span></span>

<span data-ttu-id="ad3d0-134">Esse aplicativo oferece uma compreensão básica dos recursos do controle de <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-134">This application gives you a basic understanding of the <xref:System.Windows.Forms.DataGridView> control's capabilities.</span></span> <span data-ttu-id="ad3d0-135">Você pode personalizar a aparência e o comportamento do controle de <xref:System.Windows.Forms.DataGridView> de várias maneiras:</span><span class="sxs-lookup"><span data-stu-id="ad3d0-135">You can customize the appearance and behavior of the <xref:System.Windows.Forms.DataGridView> control in several ways:</span></span>

- <span data-ttu-id="ad3d0-136">Alterar estilos de borda e cabeçalho.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-136">Change border and header styles.</span></span> <span data-ttu-id="ad3d0-137">Para obter mais informações, consulte [Como alterar os estilos de borda e linha de grade no controle DataGridView dos Windows Forms](change-the-border-and-gridline-styles-in-the-datagrid.md).</span><span class="sxs-lookup"><span data-stu-id="ad3d0-137">For more information, see [How to: Change the Border and Gridline Styles in the Windows Forms DataGridView Control](change-the-border-and-gridline-styles-in-the-datagrid.md).</span></span>

- <span data-ttu-id="ad3d0-138">Habilitar ou restringir a entrada do usuário para o controle de <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-138">Enable or restrict user input to the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="ad3d0-139">Para obter mais informações, consulte [Como evitar a adição e a exclusão de linhas no controle DataGridView do Windows Forms](prevent-row-addition-and-deletion-datagridview.md) e [Como tornar colunas somente leitura no controle DataGridView do Windows Forms](how-to-make-columns-read-only-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="ad3d0-139">For more information, see [How to: Prevent Row Addition and Deletion in the Windows Forms DataGridView Control](prevent-row-addition-and-deletion-datagridview.md), and [How to: Make Columns Read-Only in the Windows Forms DataGridView Control](how-to-make-columns-read-only-in-the-windows-forms-datagridview-control.md).</span></span>

- <span data-ttu-id="ad3d0-140">Valide a entrada do usuário para o controle de <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-140">Validate user input to the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="ad3d0-141">Para obter mais informações, consulte [Passo a passo: validando dados no controle DataGridView dos Windows Forms](walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="ad3d0-141">For more information, see [Walkthrough: Validating Data in the Windows Forms DataGridView Control](walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span></span>

- <span data-ttu-id="ad3d0-142">Manipule conjuntos de dados muito grandes usando o modo virtual.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-142">Handle very large data sets using virtual mode.</span></span> <span data-ttu-id="ad3d0-143">Para obter mais informações, consulte [Passo a passo: implementando o modo virtual no controle DataGridView dos Windows Forms](implementing-virtual-mode-wf-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="ad3d0-143">For more information, see [Walkthrough: Implementing Virtual Mode in the Windows Forms DataGridView Control](implementing-virtual-mode-wf-datagridview-control.md).</span></span>

- <span data-ttu-id="ad3d0-144">Personalize a aparência das células.</span><span class="sxs-lookup"><span data-stu-id="ad3d0-144">Customize the appearance of cells.</span></span> <span data-ttu-id="ad3d0-145">Para obter mais informações, consulte [Como personalizar a aparência de células no controle DataGridView dos Windows Forms](customize-the-appearance-of-cells-in-the-datagrid.md) e [Como definir estilos de célula padrão no controle DataGridView dos Windows Forms](how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="ad3d0-145">For more information, see [How to: Customize the Appearance of Cells in the Windows Forms DataGridView Control](customize-the-appearance-of-cells-in-the-datagrid.md) and [How to: Set Default Cell Styles for the Windows Forms DataGridView Control](how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="ad3d0-146">Consulte também</span><span class="sxs-lookup"><span data-stu-id="ad3d0-146">See also</span></span>

- <xref:System.Windows.Forms.DataGridView>
- <xref:System.Windows.Forms.BindingSource>
- [<span data-ttu-id="ad3d0-147">Exibindo dados no controle DataGridView do Windows Forms</span><span class="sxs-lookup"><span data-stu-id="ad3d0-147">Displaying Data in the Windows Forms DataGridView Control</span></span>](displaying-data-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="ad3d0-148">Como criar um formulário mestre/detalhado usando dois controles DataGridView dos Windows Forms</span><span class="sxs-lookup"><span data-stu-id="ad3d0-148">How to: Create a Master/Detail Form Using Two Windows Forms DataGridView Controls</span></span>](create-a-master-detail-form-using-two-datagridviews.md)
- [<span data-ttu-id="ad3d0-149">Protegendo informações de conexão</span><span class="sxs-lookup"><span data-stu-id="ad3d0-149">Protecting Connection Information</span></span>](../../data/adonet/protecting-connection-information.md)
