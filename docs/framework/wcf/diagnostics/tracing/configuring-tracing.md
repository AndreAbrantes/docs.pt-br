---
title: Configurando o rastreamento
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: tracing [WCF]
ms.assetid: 82922010-e8b3-40eb-98c4-10fc05c6d65d
caps.latest.revision: "53"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: d516d20144b40aa52a5b11177c6794a6935ba989
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/21/2017
---
# <a name="configuring-tracing"></a><span data-ttu-id="6be1a-102">Configurando o rastreamento</span><span class="sxs-lookup"><span data-stu-id="6be1a-102">Configuring Tracing</span></span>
<span data-ttu-id="6be1a-103">Este tópico descreve como você pode habilitar o rastreamento, configurar fontes de rastreamento para emitir rastreamentos e definir níveis de rastreamento, conjunto de rastreamento de atividades e propagação para oferecer suporte a correlação de rastreamento ponta a ponta e definir ouvintes de rastreamento para acessar rastreamentos.</span><span class="sxs-lookup"><span data-stu-id="6be1a-103">This topic describes how you can enable tracing, configure trace sources to emit traces and set trace levels, set activity tracing and propagation to support end-to-end trace correlation, and set trace listeners to access traces.</span></span>  
  
 <span data-ttu-id="6be1a-104">Para obter recomendações de configurações de rastreamento no ambiente de produção ou depuração, consulte [configurações recomendadas para rastreamento e registro em log de mensagem](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span><span class="sxs-lookup"><span data-stu-id="6be1a-104">For tracing settings recommendations in production or debugging environment, refer to [Recommended Settings for Tracing and Message Logging](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="6be1a-105">No Windows 8, você deve executar o aplicativo com privilégios elevados (Executar como administrador) para seu aplicativo gerar logs de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="6be1a-105">On Windows 8 you must run your application elevated (Run as Administrator) in order for your application to generate trace logs.</span></span>  
  
## <a name="enabling-tracing"></a><span data-ttu-id="6be1a-106">A habilitação do rastreamento</span><span class="sxs-lookup"><span data-stu-id="6be1a-106">Enabling Tracing</span></span>  
 [!INCLUDE[indigo1](../../../../../includes/indigo1-md.md)]<span data-ttu-id="6be1a-107">gera os seguintes dados para o rastreamento de diagnóstico:</span><span class="sxs-lookup"><span data-stu-id="6be1a-107"> outputs the following data for diagnostic tracing:</span></span>  
  
-   <span data-ttu-id="6be1a-108">Código de rastreamentos para as etapas do processo em todos os componentes de aplicativos, como chamadas de operação, exceções, avisos e outros eventos de processamento significativo.</span><span class="sxs-lookup"><span data-stu-id="6be1a-108">Traces for process milestones across all components of the applications, such as operation calls, code exceptions, warnings and other significant processing events.</span></span>  
  
-   <span data-ttu-id="6be1a-109">Eventos de erro do Windows quando o recurso de rastreamento de falhas.</span><span class="sxs-lookup"><span data-stu-id="6be1a-109">Windows error events when the tracing feature malfunctions.</span></span> <span data-ttu-id="6be1a-110">Consulte [o log de eventos](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span><span class="sxs-lookup"><span data-stu-id="6be1a-110">See [Event Logging](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span></span>  
  
 [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="6be1a-111">o rastreamento é criado na parte superior do <xref:System.Diagnostics>.</span><span class="sxs-lookup"><span data-stu-id="6be1a-111"> tracing is built on top of <xref:System.Diagnostics>.</span></span> <span data-ttu-id="6be1a-112">Para usar o rastreamento, você deve definir fontes de rastreamento no arquivo de configuração ou em código.</span><span class="sxs-lookup"><span data-stu-id="6be1a-112">To use tracing, you should define trace sources in the configuration file or in code.</span></span> [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="6be1a-113">define uma origem de rastreamento para cada [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] assembly.</span><span class="sxs-lookup"><span data-stu-id="6be1a-113"> defines a trace source for each [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] assembly.</span></span> <span data-ttu-id="6be1a-114">O `System.ServiceModel` origem de rastreamento é o mais geral [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] origem de rastreamento e registros de processamento de etapas entre o [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] pilha de comunicação de transporte deixando/inserir inserindo/deixar o código do usuário.</span><span class="sxs-lookup"><span data-stu-id="6be1a-114">The `System.ServiceModel` trace source is the most general [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] trace source, and records processing milestones across the [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] communication stack, from entering/leaving transport to entering/leaving user code.</span></span> <span data-ttu-id="6be1a-115">O `System.ServiceModel.MessageLogging` origem de rastreamento registra todas as mensagens que fluem através do sistema.</span><span class="sxs-lookup"><span data-stu-id="6be1a-115">The `System.ServiceModel.MessageLogging` trace source records all messages that flow through the system.</span></span>  
  
 <span data-ttu-id="6be1a-116">O rastreamento não está habilitado por padrão.</span><span class="sxs-lookup"><span data-stu-id="6be1a-116">Tracing is not enabled by default.</span></span> <span data-ttu-id="6be1a-117">Para ativar o rastreamento, você deve criar um ouvinte de rastreamento e definir um nível de rastreamento que não seja "Desativado" para a origem de rastreamento selecionado na configuração; Caso contrário, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] não gera qualquer rastreamentos.</span><span class="sxs-lookup"><span data-stu-id="6be1a-117">To activate tracing, you must create a trace listener and set a trace level other than "Off" for the selected trace source in configuration; otherwise, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] does not generate any traces.</span></span> <span data-ttu-id="6be1a-118">Se você não especificar um ouvinte, o rastreamento é desabilitado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6be1a-118">If you do not specify a listener, tracing is automatically disabled.</span></span> <span data-ttu-id="6be1a-119">Se um ouvinte é definido, mas nenhum nível for especificado, o nível é definido como "Off" por padrão, o que significa que nenhum rastreamento é emitido.</span><span class="sxs-lookup"><span data-stu-id="6be1a-119">If a listener is defined, but no level is specified, the level is set to "Off" by default, which means that no trace is emitted.</span></span>  
  
 <span data-ttu-id="6be1a-120">Se você usar [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] pontos de extensibilidade, como chamadores de operação personalizado, você deve emitir seus próprios rastreamentos.</span><span class="sxs-lookup"><span data-stu-id="6be1a-120">If you use [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] extensibility points such as custom operation invokers, you should emit your own traces.</span></span> <span data-ttu-id="6be1a-121">Isso ocorre porque se você implementar um ponto de extensibilidade, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] não pode emitir os rastreamentos padrão no caminho padrão.</span><span class="sxs-lookup"><span data-stu-id="6be1a-121">This is because if you implement an extensibility point, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] can no longer emit the standard traces in the default path.</span></span> <span data-ttu-id="6be1a-122">Se você não implementa o suporte a rastreamento manual por emissão rastreamentos, você não verá os rastreamentos que você espera.</span><span class="sxs-lookup"><span data-stu-id="6be1a-122">If you do not implement manual tracing support by emitting traces, you may not see the traces you expect.</span></span>  
  
 <span data-ttu-id="6be1a-123">Você pode configurar o rastreamento, editando o arquivo de configuração do aplicativo — ou Web. config para aplicativos Web hospedados ou Appname.exe.config para aplicativos hospedados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6be1a-123">You can configure tracing by editing the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted applications.</span></span> <span data-ttu-id="6be1a-124">Este é um exemplo de tal editar.</span><span class="sxs-lookup"><span data-stu-id="6be1a-124">The following is an example of such edit.</span></span> <span data-ttu-id="6be1a-125">Para obter mais informações sobre essas configurações, consulte a seção "Configurando ouvintes de rastreamento para rastreamentos consumir".</span><span class="sxs-lookup"><span data-stu-id="6be1a-125">For more information on these settings, see the "Configuring Trace Listeners to Consume Traces" section.</span></span>  
  
```xml  
<configuration>  
   <system.diagnostics>  
      <sources>  
            <source name="System.ServiceModel"   
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
            <listeners>  
               <add name="traceListener"   
                   type="System.Diagnostics.XmlWriterTraceListener"   
                   initializeData= "c:\log\Traces.svclog" />  
            </listeners>  
         </source>  
      </sources>  
   </system.diagnostics>  
</configuration>  
```  
  
> [!NOTE]
>  <span data-ttu-id="6be1a-126">Para editar o arquivo de configuração de um [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] projeto de serviço no [!INCLUDE[vs_current_short](../../../../../includes/vs-current-short-md.md)], clique direito no arquivo de configuração do aplicativo — ou Web. config para aplicativos Web hospedados ou Appname.exe.config para o aplicativo auto-hospedado no  **Gerenciador de soluções**.</span><span class="sxs-lookup"><span data-stu-id="6be1a-126">To edit the configuration file of a [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] service project in [!INCLUDE[vs_current_short](../../../../../includes/vs-current-short-md.md)], right click the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted application in **Solution Explorer**.</span></span> <span data-ttu-id="6be1a-127">Em seguida, escolha o **Editar configuração WCF** item de menu de contexto.</span><span class="sxs-lookup"><span data-stu-id="6be1a-127">Then choose the **Edit WCF Configuration** context menu item.</span></span> <span data-ttu-id="6be1a-128">Isso inicia o [ferramenta Configuration Editor (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md), que permite que você modifique as definições de configuração para [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] serviços usando a interface gráfica do usuário.</span><span class="sxs-lookup"><span data-stu-id="6be1a-128">This launches the [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md), which enables you to modify configuration settings for [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] services using a graphical user interface.</span></span>  
  
## <a name="configuring-trace-sources-to-emit-traces"></a><span data-ttu-id="6be1a-129">Configurando fontes de rastreamento para emitir rastreamentos</span><span class="sxs-lookup"><span data-stu-id="6be1a-129">Configuring Trace Sources to Emit Traces</span></span>  
 [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="6be1a-130">define uma origem de rastreamento para cada assembly.</span><span class="sxs-lookup"><span data-stu-id="6be1a-130"> defines a trace source for each assembly.</span></span> <span data-ttu-id="6be1a-131">Gerado em um assembly de rastreamentos são acessados pelos ouvintes definidos para essa fonte.</span><span class="sxs-lookup"><span data-stu-id="6be1a-131">Traces generated within an assembly are accessed by the listeners defined for that source.</span></span> <span data-ttu-id="6be1a-132">As seguintes fontes de rastreamento são definidas:</span><span class="sxs-lookup"><span data-stu-id="6be1a-132">The following trace sources are defined:</span></span>  
  
-   <span data-ttu-id="6be1a-133">System. ServiceModel: Registra todos os estágios [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] processamento, sempre que a configuração é lida, uma mensagem é processada no transporte, segurança de processamento, uma mensagem é enviada no código do usuário e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="6be1a-133">System.ServiceModel: Logs all stages of [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] processing, whenever configuration is read, a message is processed in transport, security processing, a message is dispatched in user code, and so on.</span></span>  
  
-   <span data-ttu-id="6be1a-134">MessageLogging: Registra todas as mensagens que fluem através do sistema.</span><span class="sxs-lookup"><span data-stu-id="6be1a-134">System.ServiceModel.MessageLogging: Logs all messages that flow through the system.</span></span>  
  
-   <span data-ttu-id="6be1a-135">System. IdentityModel.</span><span class="sxs-lookup"><span data-stu-id="6be1a-135">System.IdentityModel.</span></span>  
  
-   <span data-ttu-id="6be1a-136">System.ServiceModel.Activation.</span><span class="sxs-lookup"><span data-stu-id="6be1a-136">System.ServiceModel.Activation.</span></span>  
  
-   <span data-ttu-id="6be1a-137">System.IO.Log: Registro em log para a interface do .NET Framework para o Common Log arquivo CLFS (sistema).</span><span class="sxs-lookup"><span data-stu-id="6be1a-137">System.IO.Log: Logging for the .NET Framework interface to the Common Log File System (CLFS).</span></span>  
  
-   <span data-ttu-id="6be1a-138">Serialization: Logs quando objetos são lidos ou gravados.</span><span class="sxs-lookup"><span data-stu-id="6be1a-138">System.Runtime.Serialization: Logs when objects are read or written.</span></span>  
  
-   <span data-ttu-id="6be1a-139">CardSpace.</span><span class="sxs-lookup"><span data-stu-id="6be1a-139">CardSpace.</span></span>  
  
 <span data-ttu-id="6be1a-140">Você pode configurar cada origem de rastreamento para usar o mesmo ouvinte (compartilhado), conforme indicado no exemplo de configuração a seguir.</span><span class="sxs-lookup"><span data-stu-id="6be1a-140">You can configure each trace source to use the same (shared) listener, as indicated in the following configuration example.</span></span>  
  
```xml  
<configuration>  
    <system.diagnostics>  
        <sources>  
            <source name="System.ServiceModel"   
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="CardSpace">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IO.Log">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.Runtime.Serialization">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IdentityModel">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
        </sources>  
  
        <sharedListeners>  
            <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="c:\log\Traces.svclog" />  
        </sharedListeners>  
    </system.diagnostics>  
</configuration>  
```  
  
 <span data-ttu-id="6be1a-141">Além disso, você pode adicionar fontes de rastreamento definidos pelo usuário, como demonstrado pelo exemplo a seguir, para emitir rastreamentos de código do usuário.</span><span class="sxs-lookup"><span data-stu-id="6be1a-141">In addition, you can add user-defined trace sources, as demonstrated by the following example, to emit user code traces.</span></span>  
  
```xml  
<system.diagnostics>  
   <sources>  
       <source name="UserTraceSource" switchValue="Warning, ActivityTracing" >  
          <listeners>  
              <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="C:\logs\UserTraces.svclog" />  
          </listeners>  
       </source>  
   </sources>  
   <trace autoflush="true" />   
</system.diagnostics>  
```  
  
 [!INCLUDE[crabout](../../../../../includes/crabout-md.md)]<span data-ttu-id="6be1a-142">definido pelo usuário de criar fontes de rastreamento, consulte [estendendo rastreamento](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="6be1a-142"> creating user-defined trace sources, see [Extending Tracing](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span></span>  
  
## <a name="configuring-trace-listeners-to-consume-traces"></a><span data-ttu-id="6be1a-143">Configurando os ouvintes de rastreamento para consumir rastreamentos</span><span class="sxs-lookup"><span data-stu-id="6be1a-143">Configuring Trace Listeners to Consume Traces</span></span>  
 <span data-ttu-id="6be1a-144">Em tempo de execução, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] feeds de dados para os ouvintes que processam os dados de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="6be1a-144">At runtime, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] feeds trace data to the listeners which process the data.</span></span> [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="6be1a-145">fornece vários ouvintes predefinidos para <xref:System.Diagnostics>, que são diferentes no formato usado para saída.</span><span class="sxs-lookup"><span data-stu-id="6be1a-145"> provides several predefined listeners for <xref:System.Diagnostics>, which differ in the format they use for output.</span></span> <span data-ttu-id="6be1a-146">Você também pode adicionar tipos de ouvinte personalizado.</span><span class="sxs-lookup"><span data-stu-id="6be1a-146">You can also add custom listener types.</span></span>  
  
 <span data-ttu-id="6be1a-147">Você pode usar `add` para especificar o nome e o tipo do ouvinte de rastreamento que deseja usar.</span><span class="sxs-lookup"><span data-stu-id="6be1a-147">You can use `add` to specify the name and type of the trace listener you want to use.</span></span> <span data-ttu-id="6be1a-148">Em nosso exemplo de configuração, é chamado o ouvinte `traceListener` e a adição do ouvinte de rastreamento padrão do .NET Framework (`System.Diagnostics.XmlWriterTraceListener`) como o tipo que você deseja usar.</span><span class="sxs-lookup"><span data-stu-id="6be1a-148">In our example configuration, we named the Listener `traceListener` and added the standard .NET Framework trace listener (`System.Diagnostics.XmlWriterTraceListener`) as the type we want to use.</span></span> <span data-ttu-id="6be1a-149">Você pode adicionar qualquer número de ouvintes de rastreamento para cada fonte.</span><span class="sxs-lookup"><span data-stu-id="6be1a-149">You can add any number of trace listeners for each source.</span></span> <span data-ttu-id="6be1a-150">Se o ouvinte de rastreamento emite o rastreamento em um arquivo, você deve especificar o local do arquivo de saída e o nome no arquivo de configuração.</span><span class="sxs-lookup"><span data-stu-id="6be1a-150">If the trace listener emits the trace to a file, you must specify the output file location and name in the configuration file.</span></span> <span data-ttu-id="6be1a-151">Isso é feito definindo `initializeData` com o nome do arquivo para esse ouvinte.</span><span class="sxs-lookup"><span data-stu-id="6be1a-151">This is done by setting `initializeData` to the name of the file for that listener.</span></span> <span data-ttu-id="6be1a-152">Se você não especificar um nome de arquivo, um nome de arquivo aleatório é gerado com base no tipo de ouvinte usado.</span><span class="sxs-lookup"><span data-stu-id="6be1a-152">If you do not specify a file name, a random file name is generated based on the listener type used.</span></span> <span data-ttu-id="6be1a-153">Se <xref:System.Diagnostics.XmlWriterTraceListener> for usado, será gerado um nome de arquivo sem extensão.</span><span class="sxs-lookup"><span data-stu-id="6be1a-153">If <xref:System.Diagnostics.XmlWriterTraceListener> is used, a file name with no extension is generated.</span></span> <span data-ttu-id="6be1a-154">Se você implementar um ouvinte personalizado, você também pode usar esse atributo para receber dados de inicialização que não seja um nome de arquivo.</span><span class="sxs-lookup"><span data-stu-id="6be1a-154">If you implement a custom listener, you can also use this attribute to receive initialization data other than a filename.</span></span> <span data-ttu-id="6be1a-155">Por exemplo, você pode especificar um identificador de banco de dados para este atributo.</span><span class="sxs-lookup"><span data-stu-id="6be1a-155">For example, you can specify a database identifier for this attribute.</span></span>  
  
 <span data-ttu-id="6be1a-156">Você pode configurar um ouvinte de rastreamento personalizado para enviar rastreamentos na conexão, por exemplo, para um banco de dados remoto.</span><span class="sxs-lookup"><span data-stu-id="6be1a-156">You can configure a custom trace listener to send traces on the wire, for example, to a remote database.</span></span> <span data-ttu-id="6be1a-157">Como um implantador do aplicativo, você deve aplicar o controle de acesso apropriadas nos logs de rastreamento no computador remoto.</span><span class="sxs-lookup"><span data-stu-id="6be1a-157">As an application deployer, you should enforce proper access control on the trace logs in the remote machine.</span></span>  
  
 <span data-ttu-id="6be1a-158">Você também pode configurar um ouvinte de rastreamento programaticamente.</span><span class="sxs-lookup"><span data-stu-id="6be1a-158">You can also configure a trace listener programmatically.</span></span> [!INCLUDE[crdefault](../../../../../includes/crdefault-md.md)]<span data-ttu-id="6be1a-159">[Como: criar e inicializar ouvintes de rastreamento](http://go.microsoft.com/fwlink/?LinkId=94648) e [criando um TraceListener](http://go.microsoft.com/fwlink/?LinkId=96239).</span><span class="sxs-lookup"><span data-stu-id="6be1a-159"> [How to: Create and Initialize Trace Listeners](http://go.microsoft.com/fwlink/?LinkId=94648) and [Creating a Custom TraceListener](http://go.microsoft.com/fwlink/?LinkId=96239).</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="6be1a-160">Porque `System.Diagnostics.XmlWriterTraceListener` é não segura para thread, a origem de rastreamento pode bloquear recursos exclusivamente ao exibir rastreamentos.</span><span class="sxs-lookup"><span data-stu-id="6be1a-160">Because `System.Diagnostics.XmlWriterTraceListener` is not thread-safe, the trace source may lock resources exclusively when outputting traces.</span></span> <span data-ttu-id="6be1a-161">Quando vários threads de saída de rastreamentos em uma origem de rastreamento configurado para usar este ouvinte, pode ocorrer a contenção de recursos, que resulta em um problema de desempenho significativa.</span><span class="sxs-lookup"><span data-stu-id="6be1a-161">When many threads output traces to a trace source configured to use this listener, resource contention may occur, which results in a significant performance issue.</span></span> <span data-ttu-id="6be1a-162">Para resolver esse problema, você deve implementar um ouvinte personalizado que é thread-safe.</span><span class="sxs-lookup"><span data-stu-id="6be1a-162">To resolve this problem, you should implement a custom listener that is thread-safe.</span></span>  
  
## <a name="trace-level"></a><span data-ttu-id="6be1a-163">Nível de rastreamento:</span><span class="sxs-lookup"><span data-stu-id="6be1a-163">Trace Level</span></span>  
 <span data-ttu-id="6be1a-164">O nível de rastreamento é controlado pelo `switchValue` configuração da origem do rastreamento.</span><span class="sxs-lookup"><span data-stu-id="6be1a-164">The tracing level is controlled by the `switchValue` setting of the trace source.</span></span> <span data-ttu-id="6be1a-165">Os níveis de rastreamento disponíveis são descritos na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="6be1a-165">The available tracing levels are described in the following table.</span></span>  
  
|<span data-ttu-id="6be1a-166">Nível de rastreamento:</span><span class="sxs-lookup"><span data-stu-id="6be1a-166">Trace Level</span></span>|<span data-ttu-id="6be1a-167">Natureza dos eventos rastreados</span><span class="sxs-lookup"><span data-stu-id="6be1a-167">Nature of the Tracked Events</span></span>|<span data-ttu-id="6be1a-168">Conteúdo dos eventos rastreados</span><span class="sxs-lookup"><span data-stu-id="6be1a-168">Content of the Tracked Events</span></span>|<span data-ttu-id="6be1a-169">Eventos rastreados</span><span class="sxs-lookup"><span data-stu-id="6be1a-169">Tracked Events</span></span>|<span data-ttu-id="6be1a-170">Destino do usuário</span><span class="sxs-lookup"><span data-stu-id="6be1a-170">User Target</span></span>|  
|-----------------|----------------------------------|-----------------------------------|--------------------|-----------------|  
|<span data-ttu-id="6be1a-171">Off</span><span class="sxs-lookup"><span data-stu-id="6be1a-171">Off</span></span>|<span data-ttu-id="6be1a-172">N/D</span><span class="sxs-lookup"><span data-stu-id="6be1a-172">N/A</span></span>|<span data-ttu-id="6be1a-173">N/D</span><span class="sxs-lookup"><span data-stu-id="6be1a-173">N/A</span></span>|<span data-ttu-id="6be1a-174">Nenhum rastreamento é emitido.</span><span class="sxs-lookup"><span data-stu-id="6be1a-174">No traces are emitted.</span></span>|<span data-ttu-id="6be1a-175">N/D</span><span class="sxs-lookup"><span data-stu-id="6be1a-175">N/A</span></span>|  
|<span data-ttu-id="6be1a-176">Crítico</span><span class="sxs-lookup"><span data-stu-id="6be1a-176">Critical</span></span>|<span data-ttu-id="6be1a-177">"Negativo" eventos: eventos que indicam um processamento inesperado ou uma condição de erro.</span><span class="sxs-lookup"><span data-stu-id="6be1a-177">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>||<span data-ttu-id="6be1a-178">Exceções sem tratamento, incluindo as seguintes são registradas:</span><span class="sxs-lookup"><span data-stu-id="6be1a-178">Unhandled exceptions including the following are logged:</span></span><br /><br /> <span data-ttu-id="6be1a-179">-OutOfMemoryException</span><span class="sxs-lookup"><span data-stu-id="6be1a-179">-   OutOfMemoryException</span></span><br /><span data-ttu-id="6be1a-180">-ThreadAbortException (o CLR chama qualquer ThreadAbortExceptionHandler)</span><span class="sxs-lookup"><span data-stu-id="6be1a-180">-   ThreadAbortException (the CLR invokes any ThreadAbortExceptionHandler)</span></span><br /><span data-ttu-id="6be1a-181">-StackOverflowException (não pode ser detectada)</span><span class="sxs-lookup"><span data-stu-id="6be1a-181">-   StackOverflowException (cannot be caught)</span></span><br /><span data-ttu-id="6be1a-182">-ConfigurationErrorsException</span><span class="sxs-lookup"><span data-stu-id="6be1a-182">-   ConfigurationErrorsException</span></span><br /><span data-ttu-id="6be1a-183">-SEHException</span><span class="sxs-lookup"><span data-stu-id="6be1a-183">-   SEHException</span></span><br /><span data-ttu-id="6be1a-184">-Erros de aplicativo Iniciar</span><span class="sxs-lookup"><span data-stu-id="6be1a-184">-   Application start errors</span></span><br /><span data-ttu-id="6be1a-185">-Failfast eventos</span><span class="sxs-lookup"><span data-stu-id="6be1a-185">-   Failfast events</span></span><br /><span data-ttu-id="6be1a-186">-Sistema trava</span><span class="sxs-lookup"><span data-stu-id="6be1a-186">-   System hangs</span></span><br /><span data-ttu-id="6be1a-187">-Mensagens suspeitas: mensagem rastreamentos que causam o falha do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6be1a-187">-   Poison messages: message traces that cause the application to fail.</span></span>|<span data-ttu-id="6be1a-188">Administradores</span><span class="sxs-lookup"><span data-stu-id="6be1a-188">Administrators</span></span><br /><br /> <span data-ttu-id="6be1a-189">Desenvolvedores de aplicativos</span><span class="sxs-lookup"><span data-stu-id="6be1a-189">Application developers</span></span>|  
|<span data-ttu-id="6be1a-190">Erro</span><span class="sxs-lookup"><span data-stu-id="6be1a-190">Error</span></span>|<span data-ttu-id="6be1a-191">"Negativo" eventos: eventos que indicam um processamento inesperado ou uma condição de erro.</span><span class="sxs-lookup"><span data-stu-id="6be1a-191">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="6be1a-192">Processamento inesperado aconteceu.</span><span class="sxs-lookup"><span data-stu-id="6be1a-192">Unexpected processing has happened.</span></span> <span data-ttu-id="6be1a-193">O aplicativo não pôde executar uma tarefa conforme o esperado.</span><span class="sxs-lookup"><span data-stu-id="6be1a-193">The application was not able to perform a task as expected.</span></span> <span data-ttu-id="6be1a-194">No entanto, o aplicativo é ainda em execução.</span><span class="sxs-lookup"><span data-stu-id="6be1a-194">However, the application is still up and running.</span></span>|<span data-ttu-id="6be1a-195">Todas as exceções são registradas.</span><span class="sxs-lookup"><span data-stu-id="6be1a-195">All exceptions are logged.</span></span>|<span data-ttu-id="6be1a-196">Administradores</span><span class="sxs-lookup"><span data-stu-id="6be1a-196">Administrators</span></span><br /><br /> <span data-ttu-id="6be1a-197">Desenvolvedores de aplicativos</span><span class="sxs-lookup"><span data-stu-id="6be1a-197">Application developers</span></span>|  
|<span data-ttu-id="6be1a-198">Aviso</span><span class="sxs-lookup"><span data-stu-id="6be1a-198">Warning</span></span>|<span data-ttu-id="6be1a-199">"Negativo" eventos: eventos que indicam um processamento inesperado ou uma condição de erro.</span><span class="sxs-lookup"><span data-stu-id="6be1a-199">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="6be1a-200">Um possível problema pode ocorrer, mas o aplicativo ainda funcionará corretamente ou tenha ocorrido.</span><span class="sxs-lookup"><span data-stu-id="6be1a-200">A possible problem has occurred or may occur, but the application still functions correctly.</span></span> <span data-ttu-id="6be1a-201">No entanto, ele não pode continuar a funcionar corretamente.</span><span class="sxs-lookup"><span data-stu-id="6be1a-201">However, it may not continue to work properly.</span></span>|<span data-ttu-id="6be1a-202">-O aplicativo está recebendo mais solicitações de permitir que suas configurações de limitação.</span><span class="sxs-lookup"><span data-stu-id="6be1a-202">-   The application is receiving more requests than its throttling settings allow.</span></span><br /><span data-ttu-id="6be1a-203">-A fila de recebimento está próximo da capacidade máxima configurada.</span><span class="sxs-lookup"><span data-stu-id="6be1a-203">-   The receiving queue is near its maximum configured capacity.</span></span><br /><span data-ttu-id="6be1a-204">-Tempo limite foi excedido.</span><span class="sxs-lookup"><span data-stu-id="6be1a-204">-   Timeout has exceeded.</span></span><br /><span data-ttu-id="6be1a-205">-Credenciais são rejeitadas.</span><span class="sxs-lookup"><span data-stu-id="6be1a-205">-   Credentials are rejected.</span></span>|<span data-ttu-id="6be1a-206">Administradores</span><span class="sxs-lookup"><span data-stu-id="6be1a-206">Administrators</span></span><br /><br /> <span data-ttu-id="6be1a-207">Desenvolvedores de aplicativos</span><span class="sxs-lookup"><span data-stu-id="6be1a-207">Application developers</span></span>|  
|<span data-ttu-id="6be1a-208">Informações</span><span class="sxs-lookup"><span data-stu-id="6be1a-208">Information</span></span>|<span data-ttu-id="6be1a-209">"Positivos" eventos: eventos que marcar marcos bem-sucedida</span><span class="sxs-lookup"><span data-stu-id="6be1a-209">"Positive" events: events that mark successful milestones</span></span>|<span data-ttu-id="6be1a-210">Marcos importantes e bem-sucedida de execução do aplicativo, independentemente se o aplicativo está funcionando corretamente ou não.</span><span class="sxs-lookup"><span data-stu-id="6be1a-210">Important and successful milestones of application execution, regardless of whether the application is working properly or not.</span></span>|<span data-ttu-id="6be1a-211">Em geral, são geradas mensagens úteis para monitorar e diagnosticar o status do sistema, medir o desempenho ou criação de perfil.</span><span class="sxs-lookup"><span data-stu-id="6be1a-211">In general, messages helpful for monitoring and diagnosing system status, measuring performance or profiling are generated.</span></span> <span data-ttu-id="6be1a-212">Você pode usar essas informações para gerenciamento de desempenho e planejamento de capacidade:</span><span class="sxs-lookup"><span data-stu-id="6be1a-212">You can use such information for capacity planning and performance management:</span></span><br /><br /> <span data-ttu-id="6be1a-213">-Canais são criados.</span><span class="sxs-lookup"><span data-stu-id="6be1a-213">-   Channels are created.</span></span><br /><span data-ttu-id="6be1a-214">-Ouvintes de o ponto de extremidade são criados.</span><span class="sxs-lookup"><span data-stu-id="6be1a-214">-   Endpoint listeners are created.</span></span><br /><span data-ttu-id="6be1a-215">-Mensagem entra/folhas de transporte.</span><span class="sxs-lookup"><span data-stu-id="6be1a-215">-   Message enters/leaves transport.</span></span><br /><span data-ttu-id="6be1a-216">-O token de segurança é recuperado.</span><span class="sxs-lookup"><span data-stu-id="6be1a-216">-   Security token is retrieved.</span></span><br /><span data-ttu-id="6be1a-217">-Configuração é lida.</span><span class="sxs-lookup"><span data-stu-id="6be1a-217">-   Configuration setting is read.</span></span>|<span data-ttu-id="6be1a-218">Administradores</span><span class="sxs-lookup"><span data-stu-id="6be1a-218">Administrators</span></span><br /><br /> <span data-ttu-id="6be1a-219">Desenvolvedores de aplicativos</span><span class="sxs-lookup"><span data-stu-id="6be1a-219">Application developers</span></span><br /><br /> <span data-ttu-id="6be1a-220">Desenvolvedores de produtos.</span><span class="sxs-lookup"><span data-stu-id="6be1a-220">Product developers.</span></span>|  
|<span data-ttu-id="6be1a-221">Detalhado</span><span class="sxs-lookup"><span data-stu-id="6be1a-221">Verbose</span></span>|<span data-ttu-id="6be1a-222">"Positivos" eventos: eventos que marcar marcos bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="6be1a-222">"Positive" events: events that mark successful milestones.</span></span>|<span data-ttu-id="6be1a-223">Eventos de Nível baixos para o código do usuário e a manutenção são emitidos.</span><span class="sxs-lookup"><span data-stu-id="6be1a-223">Low level events for both user code and servicing are emitted.</span></span>|<span data-ttu-id="6be1a-224">Em geral, você pode usar esse nível de otimização de depuração ou de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6be1a-224">In general, you can use this level for debugging or application optimization.</span></span><br /><br /> <span data-ttu-id="6be1a-225">-Cabeçalho da mensagem compreendidos.</span><span class="sxs-lookup"><span data-stu-id="6be1a-225">-   Understood message header.</span></span>|<span data-ttu-id="6be1a-226">Administradores</span><span class="sxs-lookup"><span data-stu-id="6be1a-226">Administrators</span></span><br /><br /> <span data-ttu-id="6be1a-227">Desenvolvedores de aplicativos</span><span class="sxs-lookup"><span data-stu-id="6be1a-227">Application developers</span></span><br /><br /> <span data-ttu-id="6be1a-228">Desenvolvedores de produtos.</span><span class="sxs-lookup"><span data-stu-id="6be1a-228">Product developers.</span></span>|  
|<span data-ttu-id="6be1a-229">ActivityTracing</span><span class="sxs-lookup"><span data-stu-id="6be1a-229">ActivityTracing</span></span>||<span data-ttu-id="6be1a-230">Eventos de fluxo entre atividades de processamento e componentes.</span><span class="sxs-lookup"><span data-stu-id="6be1a-230">Flow events between processing activities and components.</span></span>|<span data-ttu-id="6be1a-231">Esse nível permite que os administradores e desenvolvedores correlacionar aplicativos no mesmo domínio do aplicativo:</span><span class="sxs-lookup"><span data-stu-id="6be1a-231">This level allows administrators and developers to correlate applications in the same application domain:</span></span><br /><br /> <span data-ttu-id="6be1a-232">-Rastreamentos para limites de atividade, como iniciar/parar.</span><span class="sxs-lookup"><span data-stu-id="6be1a-232">-   Traces for activity boundaries, such as start/stop.</span></span><br /><span data-ttu-id="6be1a-233">-Transferências de rastreamentos.</span><span class="sxs-lookup"><span data-stu-id="6be1a-233">-   Traces for transfers.</span></span>|<span data-ttu-id="6be1a-234">Todos</span><span class="sxs-lookup"><span data-stu-id="6be1a-234">All</span></span>|  
|<span data-ttu-id="6be1a-235">Todos</span><span class="sxs-lookup"><span data-stu-id="6be1a-235">All</span></span>||<span data-ttu-id="6be1a-236">Aplicativo pode funcionar corretamente.</span><span class="sxs-lookup"><span data-stu-id="6be1a-236">Application may function properly.</span></span> <span data-ttu-id="6be1a-237">Todos os eventos são emitidos.</span><span class="sxs-lookup"><span data-stu-id="6be1a-237">All events are emitted.</span></span>|<span data-ttu-id="6be1a-238">Todos os eventos anteriores.</span><span class="sxs-lookup"><span data-stu-id="6be1a-238">All previous events.</span></span>|<span data-ttu-id="6be1a-239">Todos</span><span class="sxs-lookup"><span data-stu-id="6be1a-239">All</span></span>|  
  
 <span data-ttu-id="6be1a-240">Os níveis de log detalhado para crítico são empilhados uns sobre os outros, ou seja, cada nível de rastreamento inclui todos os níveis acima dele, exceto o nível de Off.</span><span class="sxs-lookup"><span data-stu-id="6be1a-240">The levels from Verbose to Critical are stacked on top of each other, that is, each trace level includes all levels above it except the Off level.</span></span> <span data-ttu-id="6be1a-241">Por exemplo, um ouvinte está escutando em nível de aviso recebe rastreamentos crítico, erro e aviso.</span><span class="sxs-lookup"><span data-stu-id="6be1a-241">For example, a listener listening at the Warning level receives Critical, Error, and Warning traces.</span></span> <span data-ttu-id="6be1a-242">O nível All inclui eventos do log detalhado para crítico e atividade de eventos de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="6be1a-242">The All level includes events from Verbose to Critical and Activity tracing events.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="6be1a-243">Os níveis de informações e Verbose ActivityTracing geram uma série de rastreamentos, que pode afetar negativamente a taxa de transferência de mensagem se você tiver usado a todos os recursos disponíveis no computador.</span><span class="sxs-lookup"><span data-stu-id="6be1a-243">The Information, Verbose, and ActivityTracing levels generate a lot of traces, which may negatively impact message throughput if you have used up all available resources on the machine.</span></span>  
  
## <a name="configuring-activity-tracing-and-propagation-for-correlation"></a><span data-ttu-id="6be1a-244">Configuração de rastreamento de atividades e propagação de correlação</span><span class="sxs-lookup"><span data-stu-id="6be1a-244">Configuring Activity Tracing and Propagation for Correlation</span></span>  
 <span data-ttu-id="6be1a-245">O `activityTracing` valor especificado para o `switchValue` atributo é usado para habilitar o rastreamento de atividade, que emite rastreamentos limites de atividade e transferências de dentro de pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6be1a-245">The `activityTracing` value specified for the `switchValue` attribute is used to enable activity tracing, which emits traces for activity boundaries and transfers within endpoints.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="6be1a-246">Ao usar determinados recursos de extensibilidade do [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], você pode obter um <xref:System.NullReferenceException> quando o rastreamento de atividades está habilitado.</span><span class="sxs-lookup"><span data-stu-id="6be1a-246">When you use certain extensibility features in [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], you might get a <xref:System.NullReferenceException> when activity tracing is enabled.</span></span> <span data-ttu-id="6be1a-247">Para corrigir esse problema, verifique o arquivo de configuração do aplicativo e certifique-se de que o `switchValue` atributo para a origem de rastreamento não está definida como `activityTracing`.</span><span class="sxs-lookup"><span data-stu-id="6be1a-247">To fix this problem, check your application's configuration file and ensure that the `switchValue` attribute for your trace source is not set to `activityTracing`.</span></span>  
  
 <span data-ttu-id="6be1a-248">O `propagateActivity` atributo indica se a atividade deve ser propagada para outros pontos de extremidade que participam da troca de mensagens.</span><span class="sxs-lookup"><span data-stu-id="6be1a-248">The `propagateActivity` attribute indicates whether the activity should be propagated to other endpoints that participate in the message exchange.</span></span> <span data-ttu-id="6be1a-249">Ao definir esse valor como `true`, você pode colocar arquivos de rastreamento gerados por dois pontos de extremidade e observar como um conjunto de rastreamentos em um ponto de extremidade de fluxo para um conjunto de rastreamentos em outro ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6be1a-249">By setting this value to `true`, you can take trace files generated by any two endpoints and observe how a set of traces on one endpoint flowed to a set of traces on another endpoint.</span></span>  
  
 [!INCLUDE[crabout](../../../../../includes/crabout-md.md)]<span data-ttu-id="6be1a-250">rastreamento de atividades e propagação, consulte [propagação](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span><span class="sxs-lookup"><span data-stu-id="6be1a-250"> activity tracing and propagation, see [Propagation](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span></span>  
  
 <span data-ttu-id="6be1a-251">Ambos `propagateActivity` e `ActivityTracing` valores booleanos se aplicam a TraceSource a System. ServiceModel.</span><span class="sxs-lookup"><span data-stu-id="6be1a-251">Both `propagateActivity` and `ActivityTracing` Boolean values apply to the System.ServiceModel TraceSource.</span></span> <span data-ttu-id="6be1a-252">O `ActivityTracing` valor também se aplica a qualquer origem de rastreamento, incluindo [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] ou aquelas definidas pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="6be1a-252">The `ActivityTracing` value also applies to any trace source, including [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] or user-defined ones.</span></span>  
  
 <span data-ttu-id="6be1a-253">Não é possível usar o `propagateActivity` atributo com fontes de rastreamento definidos pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="6be1a-253">You cannot use the `propagateActivity` attribute with user-defined trace sources.</span></span> <span data-ttu-id="6be1a-254">Para propagação de ID de atividade de código de usuário, verifique se você não definir ServiceModel `ActivityTracing`, ao mesmo tempo, ServiceModel `propagateActivity` atributo definido como `true`.</span><span class="sxs-lookup"><span data-stu-id="6be1a-254">For user code activity ID propagation, make sure you do not set ServiceModel `ActivityTracing`, while still having ServiceModel `propagateActivity` attribute set to `true`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6be1a-255">Consulte também</span><span class="sxs-lookup"><span data-stu-id="6be1a-255">See Also</span></span>  
 [<span data-ttu-id="6be1a-256">Rastreamento</span><span class="sxs-lookup"><span data-stu-id="6be1a-256">Tracing</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/index.md)  
 <span data-ttu-id="6be1a-257">[Administration and Diagnostics](../../../../../docs/framework/wcf/diagnostics/index.md) (Administração e diagnósticos)</span><span class="sxs-lookup"><span data-stu-id="6be1a-257">[Administration and Diagnostics](../../../../../docs/framework/wcf/diagnostics/index.md)</span></span>  
 [<span data-ttu-id="6be1a-258">Como: criar e inicializar ouvintes de rastreamento</span><span class="sxs-lookup"><span data-stu-id="6be1a-258">How to: Create and Initialize Trace Listeners</span></span>](http://go.microsoft.com/fwlink/?LinkId=94648)  
 [<span data-ttu-id="6be1a-259">Criando um TraceListener</span><span class="sxs-lookup"><span data-stu-id="6be1a-259">Creating a Custom TraceListener</span></span>](http://go.microsoft.com/fwlink/?LinkId=96239)
