---
title: Visão geral de rastreamento analítico
ms.date: 03/30/2017
helpviewer_keywords:
- analytic tracing [WCF], overview
ms.assetid: ae55e9cc-0809-442f-921f-d644290ebf15
ms.openlocfilehash: b519156faba68c769f4c1380a11706aebaab7e7c
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90559051"
---
# <a name="analytic-tracing-overview"></a><span data-ttu-id="7eff3-102">Visão geral do rastreamento analítico</span><span class="sxs-lookup"><span data-stu-id="7eff3-102">Analytic tracing overview</span></span>

<span data-ttu-id="7eff3-103">O rastreamento analítico no [!INCLUDE[netfx_current_long](../../../../../includes/netfx-current-long-md.md)] é um conjunto de recursos de rastreamento de alto desempenho e baixo nível de detalhes sobre o ETW (rastreamento de eventos para Windows).</span><span class="sxs-lookup"><span data-stu-id="7eff3-103">Analytic tracing in [!INCLUDE[netfx_current_long](../../../../../includes/netfx-current-long-md.md)] is a high performance and low verbosity tracing feature set on top of Event Tracing for Windows (ETW).</span></span> <span data-ttu-id="7eff3-104">O ETW é executado no nível de kernel para reduzir muito a sobrecarga das operações de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="7eff3-104">ETW runs at the kernel-level to greatly reduce the overhead of tracing operations.</span></span> <span data-ttu-id="7eff3-105">Ele armazena com eficiência os eventos de modo kernel e de usuário e permite a habilitação dinâmica de log sem a necessidade de reinicializações do serviço.</span><span class="sxs-lookup"><span data-stu-id="7eff3-105">It efficiently buffers user- and kernel-mode events, and allows dynamic enabling of logging without requiring service restarts.</span></span> <span data-ttu-id="7eff3-106">Os dados de rastreamento estão disponíveis nos logs de eventos após serem emitidos e recebidos.</span><span class="sxs-lookup"><span data-stu-id="7eff3-106">The tracing data is available in the event logs after it has been emitted and received.</span></span>

<span data-ttu-id="7eff3-107">Para obter mais informações sobre o ETW, consulte [melhorar a depuração e ajuste de desempenho com o ETW](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw).</span><span class="sxs-lookup"><span data-stu-id="7eff3-107">For more information about ETW, see [Improve Debugging and Performance Tuning with ETW](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw).</span></span>

 <span data-ttu-id="7eff3-108">Além de usar o sistema Windows, a segurança e os logs de eventos do aplicativo para analisar o aplicativo, o Windows Vista e o Windows Server 2008 introduziram logs adicionais no nó de nível superior de logs de aplicativos e serviços.</span><span class="sxs-lookup"><span data-stu-id="7eff3-108">In addition to using the Windows System, Security, and Application event logs to analyze application, Windows Vista and Windows Server 2008 introduced additional logs under the Applications and Services Logs top-level node.</span></span> <span data-ttu-id="7eff3-109">A finalidade desses novos logs é armazenar eventos para um determinado aplicativo ou componente específico em vez de eventos globais que têm um impacto em todo o sistema (como o tipo de eventos que o log de eventos de segurança pode registrar).</span><span class="sxs-lookup"><span data-stu-id="7eff3-109">The purpose of these new logs is to store events for a particular application or specific component instead of global events that have a system-wide impact (such as the type of events that the Security event log might record).</span></span> [!INCLUDE[netfx_current_short](../../../../../includes/netfx-current-short-md.md)] <span data-ttu-id="7eff3-110">unifica e correlaciona o registro em log de eventos de rastreamento do WCF, logs de mensagens do WCF e [!INCLUDE[wf1](../../../../../includes/wf1-md.md)] registros de rastreamento para os logs de aplicativos e serviços.</span><span class="sxs-lookup"><span data-stu-id="7eff3-110">unifies and correlates the logging of WCF Trace Events, WCF Message Logs, and [!INCLUDE[wf1](../../../../../includes/wf1-md.md)] Tracking records to the Applications and Services Logs.</span></span>

<span data-ttu-id="7eff3-111">As seções a seguir abrangem conceitos e funcionalidades que se aplicam ao rastreamento analítico do WCF.</span><span class="sxs-lookup"><span data-stu-id="7eff3-111">The following sections cover concepts and capabilities that apply to WCF analytic tracing.</span></span>

## <a name="enable-wcf-diagnostics-settings"></a><span data-ttu-id="7eff3-112">Habilitar configurações de diagnóstico do WCF</span><span class="sxs-lookup"><span data-stu-id="7eff3-112">Enable WCF Diagnostics Settings</span></span>

<span data-ttu-id="7eff3-113">O diagnóstico do WCF está habilitado na `<system.serviceModel><diagnostics>` seção de configuração.</span><span class="sxs-lookup"><span data-stu-id="7eff3-113">WCF diagnostics are enabled within the `<system.serviceModel><diagnostics>` configuration section.</span></span>

```xml
<system.serviceModel>
  <diagnostics>
```

<span data-ttu-id="7eff3-114">As configurações de diagnóstico do WCF para um aplicativo virtual do IIS hospedado na Web são habilitadas em seu arquivo de *Web.config* .</span><span class="sxs-lookup"><span data-stu-id="7eff3-114">WCF diagnostic settings for a Web-hosted IIS virtual application are enabled in its *Web.config* file.</span></span> <span data-ttu-id="7eff3-115">Outra opção é criar um arquivo de *Web.config* em um subdiretório dentro do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7eff3-115">Another option is to create a *Web.config* file in a subdirectory within the application.</span></span> <span data-ttu-id="7eff3-116">Essa opção aplica as configurações a todos os serviços em um subdiretório.</span><span class="sxs-lookup"><span data-stu-id="7eff3-116">This choice applies the settings to all of the services within a subdirectory.</span></span> <span data-ttu-id="7eff3-117">Para garantir que as configurações de diagnóstico sejam inicializadas consistentemente para todos os serviços no aplicativo, as configurações devem estar dentro do arquivo de *Web.config* no diretório do aplicativo e não em um dos subdiretórios individuais dentro do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7eff3-117">To ensure that the diagnostics settings are initialized consistently for all services within the application, the settings should be within the *Web.config* file in the application directory and not in one of the individual subdirectories within the application.</span></span>

## <a name="channels"></a><span data-ttu-id="7eff3-118">Canais</span><span class="sxs-lookup"><span data-stu-id="7eff3-118">Channels</span></span>

<span data-ttu-id="7eff3-119">O ETW permite que os componentes de software direcionem eventos de rastreamento para um público específico por meio do uso de canais.</span><span class="sxs-lookup"><span data-stu-id="7eff3-119">ETW allows software components to direct tracing events to a particular audience by use of channels.</span></span> <span data-ttu-id="7eff3-120">Por exemplo, você pode enviar eventos para administradores do sistema para um canal e eventos que os desenvolvedores de aplicativos se preocupam com outro canal.</span><span class="sxs-lookup"><span data-stu-id="7eff3-120">For example, you can send events for system administrators to one channel and events that application developers care about to another channel.</span></span> <span data-ttu-id="7eff3-121">Os canais são nomeados e registrados com o Windows para que os consumidores possam exibir os eventos de um canal usando Visualizador de Eventos.</span><span class="sxs-lookup"><span data-stu-id="7eff3-121">Channels are named and registered with Windows so that consumers can view a channel's events using Event Viewer.</span></span>

 <span data-ttu-id="7eff3-122">O recurso de rastreamento analítico para WCF em [!INCLUDE[netfx_current_short](../../../../../includes/netfx-current-short-md.md)] grava no canal Microsoft-Windows-Application-Server-Applications.</span><span class="sxs-lookup"><span data-stu-id="7eff3-122">The analytic tracing feature for WCF in [!INCLUDE[netfx_current_short](../../../../../includes/netfx-current-short-md.md)] writes to the Microsoft-Windows-Application-Server-Applications channel.</span></span> <span data-ttu-id="7eff3-123">Esse canal é projetado para usuários que desejam monitorar a integridade dos serviços WCF em produção.</span><span class="sxs-lookup"><span data-stu-id="7eff3-123">This channel is designed for users who want to monitor the health of WCF services in production.</span></span> <span data-ttu-id="7eff3-124">Ele define um pequeno conjunto de eventos que podem ser usados em muitos cenários de monitoramento e solução de problemas de integridade.</span><span class="sxs-lookup"><span data-stu-id="7eff3-124">It defines a small set of events that can be used in many health monitoring and troubleshooting scenarios.</span></span>

 <span data-ttu-id="7eff3-125">Para habilitar o manifesto de rastreamento de eventos do Windows para que as mensagens sejam decodificadas corretamente no log de eventos, use a ferramenta ServiceModelReg na linha de comando da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="7eff3-125">To enable the Event Tracing for Windows manifest so that messages are decoded properly in the event log, use the ServiceModelReg tool on the command line as follows:</span></span>

 `ServiceModelReg.exe -i -c:etw`

## <a name="dynamic-configuration"></a><span data-ttu-id="7eff3-126">Configuração dinâmica</span><span class="sxs-lookup"><span data-stu-id="7eff3-126">Dynamic Configuration</span></span>

<span data-ttu-id="7eff3-127">A infraestrutura de ETW permite que o rastreamento seja habilitado e configurado dinamicamente usando ferramentas padrão do Windows.</span><span class="sxs-lookup"><span data-stu-id="7eff3-127">The ETW infrastructure allows tracing to be enabled and configured dynamically using standard Windows tools.</span></span> <span data-ttu-id="7eff3-128">Para obter mais informações, consulte [habilitando dinamicamente o rastreamento analítico](dynamically-enabling-analytic-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="7eff3-128">For more information, see [Dynamically Enabling Analytic Tracing](dynamically-enabling-analytic-tracing.md).</span></span>

## <a name="message-flow-tracing"></a><span data-ttu-id="7eff3-129">Rastreamento de fluxo de mensagens</span><span class="sxs-lookup"><span data-stu-id="7eff3-129">Message Flow Tracing</span></span>

<span data-ttu-id="7eff3-130">Para obter mais informações sobre como habilitar o rastreamento de fluxo de mensagens, consulte [Configurando o rastreamento de fluxo de mensagens](configuring-message-flow-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="7eff3-130">For more information about how to enable message flow tracing, see [Configuring Message Flow Tracing](configuring-message-flow-tracing.md).</span></span>

## <a name="keywords"></a><span data-ttu-id="7eff3-131">Palavras-chave</span><span class="sxs-lookup"><span data-stu-id="7eff3-131">Keywords</span></span>

<span data-ttu-id="7eff3-132">As palavras-chave são usadas para filtrar mensagens de rastreamento e definir qual componente do .NET Framework emitiu o evento.</span><span class="sxs-lookup"><span data-stu-id="7eff3-132">Keywords are used to filter trace messages and define which component of the .NET Framework emitted the event.</span></span> <span data-ttu-id="7eff3-133">Para obter mais informações, consulte [habilitando dinamicamente o rastreamento analítico](dynamically-enabling-analytic-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="7eff3-133">For more information, see [Dynamically Enabling Analytic Tracing](dynamically-enabling-analytic-tracing.md).</span></span>
