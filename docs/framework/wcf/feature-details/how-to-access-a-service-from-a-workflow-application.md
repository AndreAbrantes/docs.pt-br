---
title: Como acessar um serviço de um aplicativo de fluxo de trabalho
ms.date: 03/30/2017
ms.assetid: 925ef8ea-5550-4c9d-bb7b-209e20c280ad
ms.openlocfilehash: 2ce79b726b623c2a25bf14065682e685455ca575
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84597235"
---
# <a name="how-to-access-a-service-from-a-workflow-application"></a><span data-ttu-id="b0f56-102">Como acessar um serviço de um aplicativo de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="b0f56-102">How To: Access a Service From a Workflow Application</span></span>
<span data-ttu-id="b0f56-103">Este tópico descreve como chamar um serviço de fluxo de trabalho de um aplicativo de console de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b0f56-103">This topic describes how to call a workflow service from a workflow console application.</span></span> <span data-ttu-id="b0f56-104">Depende da conclusão do tópico [como: criar um serviço de fluxo de trabalho com atividades de mensagens](how-to-create-a-workflow-service-with-messaging-activities.md) .</span><span class="sxs-lookup"><span data-stu-id="b0f56-104">It depends on completion of the [How to: Create a Workflow Service with Messaging Activities](how-to-create-a-workflow-service-with-messaging-activities.md) topic.</span></span> <span data-ttu-id="b0f56-105">Embora este tópico descreva como chamar um serviço de fluxo de trabalho de um aplicativo de fluxo de trabalho, os mesmos métodos podem ser usados para chamar qualquer serviço de Windows Communication Foundation (WCF) de um aplicativo de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b0f56-105">Although this topic describes how to call a workflow service from a workflow application, the same methods can be used to call any Windows Communication Foundation (WCF) service from a workflow application.</span></span>

### <a name="create-a-workflow-console-application-project"></a><span data-ttu-id="b0f56-106">Criar um projeto de aplicativo do console de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="b0f56-106">Create a Workflow Console Application Project</span></span>

1. <span data-ttu-id="b0f56-107">Inicie o Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="b0f56-107">Start Visual Studio 2012.</span></span>

2. <span data-ttu-id="b0f56-108">Carregue o projeto MyWFService criado no tópico [como: criar um serviço de fluxo de trabalho com atividades de mensagens](how-to-create-a-workflow-service-with-messaging-activities.md) .</span><span class="sxs-lookup"><span data-stu-id="b0f56-108">Load the MyWFService project you created in the [How to: Create a Workflow Service with Messaging Activities](how-to-create-a-workflow-service-with-messaging-activities.md) topic.</span></span>

3. <span data-ttu-id="b0f56-109">Clique com o botão direito do mouse na solução **MyWFService** na **Gerenciador de soluções** e selecione **Adicionar**, **novo projeto**.</span><span class="sxs-lookup"><span data-stu-id="b0f56-109">Right click the **MyWFService** solution in the **Solution Explorer** and select **Add**, **New Project**.</span></span> <span data-ttu-id="b0f56-110">Selecione **fluxo de trabalho** nos **modelos instalados** e no **aplicativo de console de fluxo de trabalho** na lista de tipos de projeto.</span><span class="sxs-lookup"><span data-stu-id="b0f56-110">Select **Workflow** in the **Installed Templates** and **Workflow Console Application** from the list of project types.</span></span> <span data-ttu-id="b0f56-111">Nomeie o projeto MyWFClient e use o local padrão, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="b0f56-111">Name the project MyWFClient and use the default location as shown in the following illustration.</span></span>

     ![Caixa de diálogo Adicionar Novo Projeto](./media/how-to-access-a-service-from-a-workflow-application/add-new-project-dialog.jpg)

     <span data-ttu-id="b0f56-113">Clique no botão **OK** para ignorar a **caixa de diálogo Adicionar novo projeto**.</span><span class="sxs-lookup"><span data-stu-id="b0f56-113">Click the **OK** button to dismiss the **Add New Project Dialog**.</span></span>

4. <span data-ttu-id="b0f56-114">Depois que o projeto é criado, o arquivo workflow1. XAML é aberto no designer.</span><span class="sxs-lookup"><span data-stu-id="b0f56-114">After the project is created, the Workflow1.xaml file is opened in the designer.</span></span> <span data-ttu-id="b0f56-115">Clique na guia **caixa de ferramentas** para abrir a caixa de ferramentas se ela ainda não estiver aberta e clique na anotação para manter a janela caixa de ferramentas aberta.</span><span class="sxs-lookup"><span data-stu-id="b0f56-115">Click the **Toolbox** tab to open the toolbox if it is not already open and click the pushpin to keep the toolbox window open.</span></span>

5. <span data-ttu-id="b0f56-116">Pressione **Ctrl** + **F5** para compilar e iniciar o serviço.</span><span class="sxs-lookup"><span data-stu-id="b0f56-116">Press **Ctrl**+**F5** to build and launch the service.</span></span> <span data-ttu-id="b0f56-117">Como antes, o ASP.NET Development Server é iniciado e o Internet Explorer exibe a página de ajuda do WCF.</span><span class="sxs-lookup"><span data-stu-id="b0f56-117">As before, the ASP.NET Development Server is launched and Internet Explorer displays the WCF Help Page.</span></span> <span data-ttu-id="b0f56-118">Observe o URI desta página, pois você deve usá-la na próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="b0f56-118">Notice the URI for this page as you must use it in the next step.</span></span>

     ![IE Exibindo página de ajuda do WCF e URI](./media/how-to-access-a-service-from-a-workflow-application/ie-wcf-help-page-uri.jpg)

6. <span data-ttu-id="b0f56-120">Clique com o botão direito do mouse no projeto **MyWFClient** no **Gerenciador de soluções** e selecione **Adicionar**  >  **referência de serviço**.</span><span class="sxs-lookup"><span data-stu-id="b0f56-120">Right click the **MyWFClient** project in the **Solution Explorer** and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="b0f56-121">Clique no botão **descobrir** para pesquisar a solução atual em busca de qualquer serviço.</span><span class="sxs-lookup"><span data-stu-id="b0f56-121">Click the **Discover** button to search the current solution for any services.</span></span> <span data-ttu-id="b0f56-122">Clique no triângulo ao lado de Service1. xamlx na lista de serviços.</span><span class="sxs-lookup"><span data-stu-id="b0f56-122">Click the triangle next to Service1.xamlx in the Services list.</span></span> <span data-ttu-id="b0f56-123">Clique no triângulo ao lado de Service1 para listar os contratos implementados pelo serviço Service1.</span><span class="sxs-lookup"><span data-stu-id="b0f56-123">Click the triangle next to Service1 to list the contracts implemented by the Service1 service.</span></span> <span data-ttu-id="b0f56-124">Expanda o nó **Service1** na lista de **Serviços** .</span><span class="sxs-lookup"><span data-stu-id="b0f56-124">Expand the **Service1** node in the **Services** list.</span></span> <span data-ttu-id="b0f56-125">A operação de eco é exibida na lista de **operações** , conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="b0f56-125">The Echo operation is displayed in the **Operations** list as shown in the following illustration.</span></span>

     ![Caixa de diálogo Adicionar Referência de Serviço](./media/how-to-access-a-service-from-a-workflow-application/add-service-reference.jpg)

     <span data-ttu-id="b0f56-127">Mantenha o namespace padrão e clique em **OK** para ignorar a caixa de diálogo **Adicionar referência de serviço** .</span><span class="sxs-lookup"><span data-stu-id="b0f56-127">Keep the default namespace and click **OK** to dismiss the **Add Service Reference** dialog.</span></span> <span data-ttu-id="b0f56-128">A caixa de diálogo a seguir é exibida.</span><span class="sxs-lookup"><span data-stu-id="b0f56-128">The following dialog is displayed.</span></span>

     ![Caixa de diálogo de notificação Adicionar Referência de Serviço](./media/how-to-access-a-service-from-a-workflow-application/add-service-reference-dialog.jpg)

     <span data-ttu-id="b0f56-130">Clique em **OK** para ignorar a caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="b0f56-130">Click **OK** to dismiss the dialog.</span></span> <span data-ttu-id="b0f56-131">Em seguida, pressione CTRL + SHIFT + B para compilar a solução.</span><span class="sxs-lookup"><span data-stu-id="b0f56-131">Next, press CTRL+SHIFT+B to build the solution.</span></span> <span data-ttu-id="b0f56-132">Observe na caixa de ferramentas uma nova seção foi adicionada chamada **MyWFClient. ServiceReference1. Activities**.</span><span class="sxs-lookup"><span data-stu-id="b0f56-132">Notice in the toolbox a new section has been added called **MyWFClient.ServiceReference1.Activities**.</span></span> <span data-ttu-id="b0f56-133">Expanda esta seção e observe a atividade Echo que foi adicionada conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="b0f56-133">Expand this section and notice the Echo activity that has been added as shown in the following illustration.</span></span>

     ![Atividade de eco na caixa de ferramentas](./media/how-to-access-a-service-from-a-workflow-application/echo-activity-toolbox.jpg)

7. <span data-ttu-id="b0f56-135">Arraste e solte uma <xref:System.Activities.Statements.Sequence> atividade na superfície do designer.</span><span class="sxs-lookup"><span data-stu-id="b0f56-135">Drag and drop a <xref:System.Activities.Statements.Sequence> activity onto the designer surface.</span></span> <span data-ttu-id="b0f56-136">Está na seção **fluxo de controle** da caixa de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="b0f56-136">It is under the **Control Flow** section of the toolbox.</span></span>

8. <span data-ttu-id="b0f56-137">Com a <xref:System.Activities.Statements.Sequence> atividade em foco, clique no link **variáveis** e adicione uma variável de cadeia de caracteres chamada `inString` .</span><span class="sxs-lookup"><span data-stu-id="b0f56-137">With the <xref:System.Activities.Statements.Sequence> activity in focus, click the **Variables** link and add a string variable named `inString`.</span></span> <span data-ttu-id="b0f56-138">Dê à variável um valor padrão `"Hello, world"` , bem como uma variável de cadeia de caracteres chamada `outString` , conforme mostrado no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="b0f56-138">Give the variable a default value of `"Hello, world"` as well as a string variable named `outString` as shown in the following diagram.</span></span>

     ![Adicionando uma variável instring](./media/how-to-access-a-service-from-a-workflow-application/add-instring-variable.jpg)

9. <span data-ttu-id="b0f56-140">Arraste e solte uma atividade **Echo** no <xref:System.Activities.Statements.Sequence> .</span><span class="sxs-lookup"><span data-stu-id="b0f56-140">Drag and drop an **Echo** activity into the <xref:System.Activities.Statements.Sequence>.</span></span> <span data-ttu-id="b0f56-141">Na janela Propriedades, associe o `inMsg` argumento à `inString` variável e o `outMsg` argumento à `outString` variável, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="b0f56-141">In the properties window bind the `inMsg` argument to the `inString` variable and the `outMsg` argument to the `outString` variable as shown in the following illustration.</span></span> <span data-ttu-id="b0f56-142">Isso passa o valor da `inString` variável para a operação e, em seguida, pega o valor de retorno e a coloca na `outString` variável.</span><span class="sxs-lookup"><span data-stu-id="b0f56-142">This passes in the value of the `inString` variable to the operation and then takes the return value and places it in the `outString` variable.</span></span>

     ![Associando os argumentos a variáveis](./media/how-to-access-a-service-from-a-workflow-application/bind-arguments-variables.jpg)

10. <span data-ttu-id="b0f56-144">Arraste e solte uma atividade **WriteLine** abaixo da atividade **Echo** para exibir a cadeia de caracteres retornada pela chamada de serviço.</span><span class="sxs-lookup"><span data-stu-id="b0f56-144">Drag and drop a **WriteLine** activity below the **Echo** activity to display the string returned by the service call.</span></span> <span data-ttu-id="b0f56-145">A atividade **WriteLine** está localizada no nó **primitivos** na caixa de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="b0f56-145">The **WriteLine** activity is located in the **Primitives** node in the toolbox.</span></span> <span data-ttu-id="b0f56-146">Vincule o argumento **Text** da atividade **WriteLine** à `outString` variável digitando na `outString` caixa de texto na atividade **WriteLine** .</span><span class="sxs-lookup"><span data-stu-id="b0f56-146">Bind the **Text** argument of the **WriteLine** activity to the `outString` variable by typing `outString` into the text box on the **WriteLine** activity.</span></span> <span data-ttu-id="b0f56-147">O fluxo de trabalho agora deve ser semelhante à ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="b0f56-147">The workflow should now look like the following illustration.</span></span>

     ![O fluxo de trabalho de cliente concluído](./media/how-to-access-a-service-from-a-workflow-application/complete-client-workflow.jpg)

11. <span data-ttu-id="b0f56-149">Clique com o botão direito do mouse na solução MyWFService e selecione **definir projetos de inicialização...**. Selecione o botão de opção **vários projetos de inicialização** e selecione **Iniciar** para cada projeto na coluna **ação** , conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="b0f56-149">Right-click the MyWFService solution and select **Set Startup Projects ...**. Select the **Multiple startup projects** radio button and select **Start** for each project in the **Action** column as shown in the following illustration.</span></span>

     ![Opções de projetos de inicialização](./media/how-to-access-a-service-from-a-workflow-application/startup-project-options.jpg)

12. <span data-ttu-id="b0f56-151">Pressione CTRL + F5 para iniciar o serviço e o cliente.</span><span class="sxs-lookup"><span data-stu-id="b0f56-151">Press Ctrl + F5 to launch both the service and the client.</span></span> <span data-ttu-id="b0f56-152">O ASP.NET Development Server hospeda o serviço, o Internet Explorer exibe a página de ajuda do WCF e o aplicativo de fluxo de trabalho do cliente é iniciado em uma janela do console e exibe a cadeia de caracteres retornada do serviço ("Olá, mundo").</span><span class="sxs-lookup"><span data-stu-id="b0f56-152">The ASP.NET Development Server hosts the service, Internet Explorer displays the WCF help page, and the client workflow application is launched in a console window and displays the string returned from the service ("Hello, world").</span></span>

## <a name="see-also"></a><span data-ttu-id="b0f56-153">Consulte também</span><span class="sxs-lookup"><span data-stu-id="b0f56-153">See also</span></span>

- [<span data-ttu-id="b0f56-154">Serviços de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="b0f56-154">Workflow Services</span></span>](workflow-services.md)
- [<span data-ttu-id="b0f56-155">Como criar um serviço de fluxo de trabalho com atividades de mensagens</span><span class="sxs-lookup"><span data-stu-id="b0f56-155">How to: Create a Workflow Service with Messaging Activities</span></span>](how-to-create-a-workflow-service-with-messaging-activities.md)
- [<span data-ttu-id="b0f56-156">Consumindo um serviço WCF de um fluxo de trabalho em um projeto Web</span><span class="sxs-lookup"><span data-stu-id="b0f56-156">Consuming a WCF Service from a Workflow in a Web Project</span></span>](https://docs.microsoft.com/archive/blogs/endpoint/how-to-consume-a-wcf-service-from-a-wf4-workflow)
