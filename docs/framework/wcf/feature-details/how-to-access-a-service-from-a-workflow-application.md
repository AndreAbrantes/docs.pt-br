---
title: Como acessar um serviço de um aplicativo de fluxo de trabalho
ms.date: 03/30/2017
ms.assetid: 925ef8ea-5550-4c9d-bb7b-209e20c280ad
ms.openlocfilehash: e9158f91d8df74cc9fd871567d854d32353d16e1
ms.sourcegitcommit: 586dbdcaef9767642436b1e4efbe88fb15473d6f
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2018
ms.locfileid: "48840583"
---
# <a name="how-to-access-a-service-from-a-workflow-application"></a><span data-ttu-id="3303c-102">Como acessar um serviço de um aplicativo de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="3303c-102">How To: Access a Service From a Workflow Application</span></span>
<span data-ttu-id="3303c-103">Este tópico descreve como chamar um serviço de fluxo de trabalho de um aplicativo de console do fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="3303c-103">This topic describes how to call a workflow service from a workflow console application.</span></span> <span data-ttu-id="3303c-104">Ele depende da conclusão do [como: criar um serviço de fluxo de trabalho com atividades de mensagens](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) tópico.</span><span class="sxs-lookup"><span data-stu-id="3303c-104">It depends on completion of the [How to: Create a Workflow Service with Messaging Activities](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) topic.</span></span> <span data-ttu-id="3303c-105">Embora este tópico descreve como chamar um serviço de fluxo de trabalho de um aplicativo de fluxo de trabalho, os mesmos métodos podem ser usados para chamar qualquer serviço do Windows Communication Foundation (WCF) de um aplicativo de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="3303c-105">Although this topic describes how to call a workflow service from a workflow application, the same methods can be used to call any Windows Communication Foundation (WCF) service from a workflow application.</span></span>

### <a name="create-a-workflow-console-application-project"></a><span data-ttu-id="3303c-106">Crie um projeto de aplicativo de Console do fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="3303c-106">Create a Workflow Console Application Project</span></span>

1.  <span data-ttu-id="3303c-107">Inicie o Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="3303c-107">Start Visual Studio 2012.</span></span>

2.  <span data-ttu-id="3303c-108">Carregar o projeto MyWFService criado na [como: criar um serviço de fluxo de trabalho com atividades de mensagens](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) tópico.</span><span class="sxs-lookup"><span data-stu-id="3303c-108">Load the MyWFService project you created in the [How to: Create a Workflow Service with Messaging Activities](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) topic.</span></span>

3.  <span data-ttu-id="3303c-109">Clique com botão direito do **MyWFService** solução na **Gerenciador de soluções** e selecione **Add**, **novo projeto**.</span><span class="sxs-lookup"><span data-stu-id="3303c-109">Right click the **MyWFService** solution in the **Solution Explorer** and select **Add**, **New Project**.</span></span> <span data-ttu-id="3303c-110">Selecione **fluxo de trabalho** na **modelos instalados** e **aplicativo de Console do fluxo de trabalho** na lista de tipos de projeto.</span><span class="sxs-lookup"><span data-stu-id="3303c-110">Select **Workflow** in the **Installed Templates** and **Workflow Console Application** from the list of project types.</span></span> <span data-ttu-id="3303c-111">Nomeie o projeto MyWFClient e usar o local padrão, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="3303c-111">Name the project MyWFClient and use the default location as shown in the following illustration.</span></span>

     <span data-ttu-id="3303c-112">![Adicionar caixa de diálogo Novo projeto](../../../../docs/framework/wcf/feature-details/media/addnewprojectdlg.JPG "AddNewProjectDlg")</span><span class="sxs-lookup"><span data-stu-id="3303c-112">![Add New Project Dialog](../../../../docs/framework/wcf/feature-details/media/addnewprojectdlg.JPG "AddNewProjectDlg")</span></span>

     <span data-ttu-id="3303c-113">Clique o **Okey** botão para ignorar a **diálogo Adicionar novo projeto**.</span><span class="sxs-lookup"><span data-stu-id="3303c-113">Click the **OK** button to dismiss the **Add New Project Dialog**.</span></span>

4.  <span data-ttu-id="3303c-114">Depois que o projeto é criado, o arquivo de Workflow1.xaml é aberto no designer.</span><span class="sxs-lookup"><span data-stu-id="3303c-114">After the project is created, the Workflow1.xaml file is opened in the designer.</span></span> <span data-ttu-id="3303c-115">Clique o **caixa de ferramentas** tab para abrir a caixa de ferramentas se não estiver já aberto e clique no apontador para manter a janela da caixa de ferramentas aberta.</span><span class="sxs-lookup"><span data-stu-id="3303c-115">Click the **Toolbox** tab to open the toolbox if it is not already open and click the pushpin to keep the toolbox window open.</span></span>

5.  <span data-ttu-id="3303c-116">Pressione **Ctrl**+**F5** para compilar e iniciar o serviço.</span><span class="sxs-lookup"><span data-stu-id="3303c-116">Press **Ctrl**+**F5** to build and launch the service.</span></span> <span data-ttu-id="3303c-117">Como antes, o ASP.NET Development Server é iniciado e o Internet Explorer exibe a página de Ajuda do WCF.</span><span class="sxs-lookup"><span data-stu-id="3303c-117">As before, the ASP.NET Development Server is launched and Internet Explorer displays the WCF Help Page.</span></span> <span data-ttu-id="3303c-118">Observe o URI para essa página, você deve usá-lo na próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="3303c-118">Notice the URI for this page as you must use it in the next step.</span></span>

     <span data-ttu-id="3303c-119">![IE exibindo a página de Ajuda do WCF e o URI](../../../../docs/framework/wcf/feature-details/media/iewcfhelppagewuri.JPG "IEWCFHelpPageWURI")</span><span class="sxs-lookup"><span data-stu-id="3303c-119">![IE displaying WCF Help Page and URI](../../../../docs/framework/wcf/feature-details/media/iewcfhelppagewuri.JPG "IEWCFHelpPageWURI")</span></span>

6.  <span data-ttu-id="3303c-120">Clique com botão direito do **MyWFClient** project na **Gerenciador de soluções** e selecione **Add** > **referência de serviço**.</span><span class="sxs-lookup"><span data-stu-id="3303c-120">Right click the **MyWFClient** project in the **Solution Explorer** and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="3303c-121">Clique o **Discover** botão para pesquisar a solução atual para todos os serviços.</span><span class="sxs-lookup"><span data-stu-id="3303c-121">Click the **Discover** button to search the current solution for any services.</span></span> <span data-ttu-id="3303c-122">Clique no triângulo ao lado de Service1.xamlx na lista de serviços.</span><span class="sxs-lookup"><span data-stu-id="3303c-122">Click the triangle next to Service1.xamlx in the Services list.</span></span> <span data-ttu-id="3303c-123">Clique no triângulo ao lado de Service1 para listar os contratos implementados pelo serviço Service1.</span><span class="sxs-lookup"><span data-stu-id="3303c-123">Click the triangle next to Service1 to list the contracts implemented by the Service1 service.</span></span> <span data-ttu-id="3303c-124">Expanda o **Service1** nó na **Services** lista.</span><span class="sxs-lookup"><span data-stu-id="3303c-124">Expand the **Service1** node in the **Services** list.</span></span> <span data-ttu-id="3303c-125">A operação de eco é exibida na **operações** lista conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="3303c-125">The Echo operation is displayed in the **Operations** list as shown in the following illustration.</span></span>

     <span data-ttu-id="3303c-126">![Adicionar caixa de diálogo de referência de serviço](../../../../docs/framework/wcf/feature-details/media/addservicereference.JPG "Adicionarreferenciaservico")</span><span class="sxs-lookup"><span data-stu-id="3303c-126">![Add Service Reference Dialog](../../../../docs/framework/wcf/feature-details/media/addservicereference.JPG "AddServiceReference")</span></span>

     <span data-ttu-id="3303c-127">Mantenha o namespace padrão e clique em **Okey** para ignorar a **Add Service Reference** caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="3303c-127">Keep the default namespace and click **OK** to dismiss the **Add Service Reference** dialog.</span></span> <span data-ttu-id="3303c-128">A seguinte caixa de diálogo é exibida.</span><span class="sxs-lookup"><span data-stu-id="3303c-128">The following dialog is displayed.</span></span>

     <span data-ttu-id="3303c-129">![A caixa de diálogo de notificação de referência do serviço de add](../../../../docs/framework/wcf/feature-details/media/asrdlg.JPG "ASRDlg")</span><span class="sxs-lookup"><span data-stu-id="3303c-129">![The add service reference notification dialog](../../../../docs/framework/wcf/feature-details/media/asrdlg.JPG "ASRDlg")</span></span>

     <span data-ttu-id="3303c-130">Clique em **Okey** para ignorar a caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="3303c-130">Click **OK** to dismiss the dialog.</span></span> <span data-ttu-id="3303c-131">Em seguida, pressione CTRL + SHIFT + B para compilar a solução.</span><span class="sxs-lookup"><span data-stu-id="3303c-131">Next, press CTRL+SHIFT+B to build the solution.</span></span> <span data-ttu-id="3303c-132">Observe, na caixa de ferramentas foi adicionada uma nova seção chamada **MyWFClient.ServiceReference1.Activities**.</span><span class="sxs-lookup"><span data-stu-id="3303c-132">Notice in the toolbox a new section has been added called **MyWFClient.ServiceReference1.Activities**.</span></span> <span data-ttu-id="3303c-133">Expanda esta seção e observe a atividade de eco que tenha sido adicionada, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="3303c-133">Expand this section and notice the Echo activity that has been added as shown in the following illustration.</span></span>

     <span data-ttu-id="3303c-134">![Atividade na caixa de ferramentas de eco](../../../../docs/framework/wcf/feature-details/media/echoactivity.JPG "EchoActivity")</span><span class="sxs-lookup"><span data-stu-id="3303c-134">![Echo activity in toolbox](../../../../docs/framework/wcf/feature-details/media/echoactivity.JPG "EchoActivity")</span></span>

7.  <span data-ttu-id="3303c-135">Arraste e solte um <xref:System.Activities.Statements.Sequence> atividade na superfície do designer.</span><span class="sxs-lookup"><span data-stu-id="3303c-135">Drag and drop a <xref:System.Activities.Statements.Sequence> activity onto the designer surface.</span></span> <span data-ttu-id="3303c-136">Ele está sob o **fluxo de controle** seção da caixa de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="3303c-136">It is under the **Control Flow** section of the toolbox.</span></span>

8.  <span data-ttu-id="3303c-137">Com o <xref:System.Activities.Statements.Sequence> atividade em foco, clique em de **variáveis** vincular e adicione uma variável de cadeia de caracteres denominada `inString`.</span><span class="sxs-lookup"><span data-stu-id="3303c-137">With the <xref:System.Activities.Statements.Sequence> activity in focus, click the **Variables** link and add a string variable named `inString`.</span></span> <span data-ttu-id="3303c-138">Dê à variável um valor padrão de `"Hello, world"` , bem como uma variável de cadeia de caracteres denominada `outString` conforme mostrado no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="3303c-138">Give the variable a default value of `"Hello, world"` as well as a string variable named `outString` as shown in the following diagram.</span></span>

     <span data-ttu-id="3303c-139">![Adicionando uma variável](../../../../docs/framework/wcf/feature-details/media/instringvar.JPG "inStringVar")</span><span class="sxs-lookup"><span data-stu-id="3303c-139">![Adding a variable](../../../../docs/framework/wcf/feature-details/media/instringvar.JPG "inStringVar")</span></span>

9. <span data-ttu-id="3303c-140">Arraste e solte uma **Echo** atividade para o <xref:System.Activities.Statements.Sequence>.</span><span class="sxs-lookup"><span data-stu-id="3303c-140">Drag and drop an **Echo** activity into the <xref:System.Activities.Statements.Sequence>.</span></span> <span data-ttu-id="3303c-141">Na janela Propriedades, associar a `inMsg` argumento para o `inString` variável e o `outMsg` argumento para o `outString` variável, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="3303c-141">In the properties window bind the `inMsg` argument to the `inString` variable and the `outMsg` argument to the `outString` variable as shown in the following illustration.</span></span> <span data-ttu-id="3303c-142">Isso transmite o valor da `inString` variável para a operação e, em seguida, usa o valor de retorno e o coloca no `outString` variável.</span><span class="sxs-lookup"><span data-stu-id="3303c-142">This passes in the value of the `inString` variable to the operation and then takes the return value and places it in the `outString` variable.</span></span>

     <span data-ttu-id="3303c-143">![Associando os argumentos a variáveis](../../../../docs/framework/wcf/feature-details/media/argumentbind.JPG "ArgumentBind")</span><span class="sxs-lookup"><span data-stu-id="3303c-143">![Binding the arguments to variables](../../../../docs/framework/wcf/feature-details/media/argumentbind.JPG "ArgumentBind")</span></span>

10. <span data-ttu-id="3303c-144">Arraste e solte uma **WriteLine** abaixo da atividade de **eco** atividade para exibir a cadeia de caracteres retornada pela chamada de serviço.</span><span class="sxs-lookup"><span data-stu-id="3303c-144">Drag and drop a **WriteLine** activity below the **Echo** activity to display the string returned by the service call.</span></span> <span data-ttu-id="3303c-145">O **WriteLine** atividade está localizada na **primitivos** nó na caixa de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="3303c-145">The **WriteLine** activity is located in the **Primitives** node in the toolbox.</span></span> <span data-ttu-id="3303c-146">Associar o **texto** argumento do **WriteLine** atividade para o `outString` variável digitando `outString` na caixa de texto no **WriteLine** atividade.</span><span class="sxs-lookup"><span data-stu-id="3303c-146">Bind the **Text** argument of the **WriteLine** activity to the `outString` variable by typing `outString` into the text box on the **WriteLine** activity.</span></span> <span data-ttu-id="3303c-147">O fluxo de trabalho agora deve ser semelhante a ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="3303c-147">The workflow should now look like the following illustration.</span></span>

     <span data-ttu-id="3303c-148">![O fluxo de trabalho de cliente completa](../../../../docs/framework/wcf/feature-details/media/completeclientwf.JPG "CompleteClientWF")</span><span class="sxs-lookup"><span data-stu-id="3303c-148">![The complete client workflow](../../../../docs/framework/wcf/feature-details/media/completeclientwf.JPG "CompleteClientWF")</span></span>

11. <span data-ttu-id="3303c-149">A solução MyWFService com o botão direito e selecione **definir projetos de inicialização...** . Selecione o **vários projetos de inicialização** botão de opção e selecione **inicie** para cada projeto na **ação** coluna, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="3303c-149">Right-click the MyWFService solution and select **Set Startup Projects ...**. Select the **Multiple startup projects** radio button and select **Start** for each project in the **Action** column as shown in the following illustration.</span></span>

     <span data-ttu-id="3303c-150">![Opções de projetos de inicialização](../../../../docs/framework/wcf/feature-details/media/startupprojects.JPG "StartupProjects")</span><span class="sxs-lookup"><span data-stu-id="3303c-150">![Startup projects options](../../../../docs/framework/wcf/feature-details/media/startupprojects.JPG "StartupProjects")</span></span>

12. <span data-ttu-id="3303c-151">Pressione Ctrl + F5 para iniciar o serviço e o cliente.</span><span class="sxs-lookup"><span data-stu-id="3303c-151">Press Ctrl + F5 to launch both the service and the client.</span></span> <span data-ttu-id="3303c-152">O ASP.NET Development Server hospeda o serviço, o Internet Explorer exibe a página de Ajuda do WCF e o aplicativo de fluxo de trabalho do cliente é iniciado em uma janela do console e exibe a cadeia de caracteres retornada do serviço ("Hello, world").</span><span class="sxs-lookup"><span data-stu-id="3303c-152">The ASP.NET Development Server hosts the service, Internet Explorer displays the WCF help page, and the client workflow application is launched in a console window and displays the string returned from the service ("Hello, world").</span></span>

## <a name="see-also"></a><span data-ttu-id="3303c-153">Consulte também</span><span class="sxs-lookup"><span data-stu-id="3303c-153">See Also</span></span>

- [<span data-ttu-id="3303c-154">Serviços de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="3303c-154">Workflow Services</span></span>](../../../../docs/framework/wcf/feature-details/workflow-services.md)
- [<span data-ttu-id="3303c-155">Como criar um serviço de fluxo de trabalho com atividades de mensagens</span><span class="sxs-lookup"><span data-stu-id="3303c-155">How to: Create a Workflow Service with Messaging Activities</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md)
- [<span data-ttu-id="3303c-156">Consumir um serviço do WCF de um fluxo de trabalho em um projeto Web</span><span class="sxs-lookup"><span data-stu-id="3303c-156">Consuming a WCF Service from a Workflow in a Web Project</span></span>](https://go.microsoft.com/fwlink/?LinkId=207725)
