---
title: Divulgação de informações
ms.date: 03/30/2017
ms.assetid: 4064c89f-afa6-444a-aa7e-807ef072131c
ms.openlocfilehash: ef660262925260ab5181829c38e32fd2c78b44e4
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64638679"
---
# <a name="information-disclosure"></a><span data-ttu-id="b0fe5-102">Divulgação de informações</span><span class="sxs-lookup"><span data-stu-id="b0fe5-102">Information Disclosure</span></span>
<span data-ttu-id="b0fe5-103">Divulgação de informações permite que um invasor obtenha informações valiosas sobre um sistema.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-103">Information disclosure enables an attacker to gain valuable information about a system.</span></span> <span data-ttu-id="b0fe5-104">Portanto, sempre considere quais informações você está revelando e se ele pode ser usado por um usuário mal-intencionado.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-104">Therefore, always consider what information you are revealing and whether it can be used by a malicious user.</span></span> <span data-ttu-id="b0fe5-105">A seguir lista os ataques de divulgação de informações possíveis e fornece atenuações para cada um.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-105">The following lists possible information disclosure attacks and provides mitigations for each.</span></span>  
  
## <a name="message-security-and-http"></a><span data-ttu-id="b0fe5-106">HTTP e a segurança de mensagem</span><span class="sxs-lookup"><span data-stu-id="b0fe5-106">Message Security and HTTP</span></span>  
 <span data-ttu-id="b0fe5-107">Se você estiver usando a segurança em nível de mensagem sobre uma camada de transporte HTTP, lembre-se de que a segurança em nível de mensagem não protege cabeçalhos HTTP.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-107">If you are using message-level security over an HTTP transport layer, be aware that message-level security does not protect HTTP headers.</span></span> <span data-ttu-id="b0fe5-108">A única maneira de proteger os cabeçalhos HTTP é usar o transporte HTTPS em vez de HTTP.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-108">The only way to protect HTTP headers is to use HTTPS transport instead of HTTP.</span></span> <span data-ttu-id="b0fe5-109">Transporte HTTPS faz com que a mensagem inteira, incluindo os cabeçalhos HTTP, para serem criptografados usando o protocolo Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="b0fe5-109">HTTPS transport causes the entire message, including the HTTP headers, to be encrypted using the Secure Sockets Layer (SSL) protocol.</span></span>  
  
## <a name="policy-information"></a><span data-ttu-id="b0fe5-110">Informações de política</span><span class="sxs-lookup"><span data-stu-id="b0fe5-110">Policy Information</span></span>  
 <span data-ttu-id="b0fe5-111">Manter a política de segurança é importante, especialmente em cenários de Federação em que os requisitos de token emitido confidenciais ou informações de emissor de token são expostas na política.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-111">Keeping policy secure is important, especially in federation scenarios where sensitive issued-token requirements or token-issuer information is exposed in policy.</span></span> <span data-ttu-id="b0fe5-112">Nesses casos, a recomendação é proteger o ponto de extremidade de serviço federado diretiva para impedir que invasores obter informações sobre o serviço, como o tipo de declarações para colocar no token emitido, ou redirecionando os clientes para mal-intencionado emissores de token.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-112">In these cases, the recommendation is to secure the federated service's policy endpoint to prevent attackers from obtaining information about the service, such as the type of claims to put in the issued token, or redirecting clients to malicious token issuers.</span></span> <span data-ttu-id="b0fe5-113">Por exemplo, um invasor poderia descobrir os pares de nome/senha de usuário reconfigurando a cadeia de confiança federada para terminar em um emissor que executou um ataque man-in-the-middle.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-113">For example, an attacker could discover user name/password pairs by reconfiguring the federated trust chain to terminate in an issuer that executed a man-in-the-middle attack.</span></span> <span data-ttu-id="b0fe5-114">Também é recomendável que verifique se os clientes federados que obtêm suas associações por meio da recuperação de política que confiar os emissores na cadeia de confiança federada obtido.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-114">It is also recommended that federated clients who obtain their bindings through policy retrieval verify that they trust the issuers in the obtained federated trust chain.</span></span> <span data-ttu-id="b0fe5-115">Para obter mais informações sobre cenários de federação, consulte [federação](../../../../docs/framework/wcf/feature-details/federation.md).</span><span class="sxs-lookup"><span data-stu-id="b0fe5-115">For more information about federation scenarios, see [Federation](../../../../docs/framework/wcf/feature-details/federation.md).</span></span>  
  
## <a name="memory-dumps-can-reveal-claim-information"></a><span data-ttu-id="b0fe5-116">Despejos de memória podem revelar informações de declaração</span><span class="sxs-lookup"><span data-stu-id="b0fe5-116">Memory Dumps Can Reveal Claim Information</span></span>  
 <span data-ttu-id="b0fe5-117">Quando um aplicativo falhar, arquivos de log, como aqueles gerados por recuperação de desastre. Watson, pode conter as informações de declaração.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-117">When an application fails, log files, such as those produced by Dr. Watson, can contain the claim information.</span></span> <span data-ttu-id="b0fe5-118">Essas informações não devem ser exportadas para outras entidades, como as equipes de suporte; Caso contrário, as informações de declaração que contém dados particulares também são exportadas.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-118">This information should not be exported to other entities, such as support teams; otherwise, the claim information that contains private data is also exported.</span></span> <span data-ttu-id="b0fe5-119">Você pode mitigar isso por não enviar os arquivos de log para entidades desconhecidas.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-119">You can mitigate this by not sending the log files to unknown entities.</span></span> <span data-ttu-id="b0fe5-120">Para obter mais informações, consulte [Windows Server 2003](https://go.microsoft.com/fwlink/?LinkId=89160).</span><span class="sxs-lookup"><span data-stu-id="b0fe5-120">For more information, see [Windows Server 2003](https://go.microsoft.com/fwlink/?LinkId=89160).</span></span>  
  
## <a name="endpoint-addresses"></a><span data-ttu-id="b0fe5-121">Endereços do ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="b0fe5-121">Endpoint Addresses</span></span>  
 <span data-ttu-id="b0fe5-122">Um endereço de ponto de extremidade contém as informações necessárias para se comunicar com um ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-122">An endpoint address contains the information needed to communicate with an endpoint.</span></span> <span data-ttu-id="b0fe5-123">Segurança SOAP deve incluir o endereço completo em que as mensagens de negociação de segurança que são trocadas para negociar uma chave simétrica entre um cliente e um servidor.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-123">SOAP security must include the address in full in the security negotiation messages that are exchanged in order to negotiate a symmetric key between a client and a server.</span></span> <span data-ttu-id="b0fe5-124">Como negociação de segurança é um processo de inicialização, os cabeçalhos de endereço não podem ser criptografados durante esse processo.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-124">Because security negotiation is a bootstrap process, the address headers cannot be encrypted during this process.</span></span> <span data-ttu-id="b0fe5-125">Portanto, o endereço não deve conter todos os dados confidenciais; Caso contrário, isso leva a ataques de divulgação de informações.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-125">Therefore, the address should not contain any confidential data; otherwise, it leads to information disclosure attacks.</span></span>  
  
## <a name="certificates-transferred-unencrypted"></a><span data-ttu-id="b0fe5-126">Certificados transferidos não criptografada</span><span class="sxs-lookup"><span data-stu-id="b0fe5-126">Certificates Transferred Unencrypted</span></span>  
 <span data-ttu-id="b0fe5-127">Quando você usa um certificado x. 509 para autenticar um cliente, o certificado é transferido de modo transparente, dentro do cabeçalho SOAP.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-127">When you use an X.509 certificate to authenticate a client, the certificate is transferred in the clear, inside the SOAP header.</span></span> <span data-ttu-id="b0fe5-128">Lembre-se de que isso como uma potencial divulgação de informações de identificação pessoal (PII).</span><span class="sxs-lookup"><span data-stu-id="b0fe5-128">Be aware of this as a potential personally identifiable information (PII) disclosure.</span></span> <span data-ttu-id="b0fe5-129">Isso não é um problema para `TransportWithMessageCredential` modo, em que a mensagem inteira é criptografada com segurança em nível de transporte.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-129">This is not an issue for `TransportWithMessageCredential` mode, where the entire message is encrypted with transport-level security.</span></span>  
  
## <a name="service-references"></a><span data-ttu-id="b0fe5-130">Referências de serviço</span><span class="sxs-lookup"><span data-stu-id="b0fe5-130">Service References</span></span>  
 <span data-ttu-id="b0fe5-131">Uma referência de serviço é uma referência a outro serviço.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-131">A service reference is a reference to another service.</span></span> <span data-ttu-id="b0fe5-132">Por exemplo, um serviço pode passar uma referência a um cliente durante uma operação de serviço.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-132">For example, a service may pass a service reference to a client in the course of an operation.</span></span> <span data-ttu-id="b0fe5-133">A referência de serviço também é usada com um *Verificador de identidade de confiança*, um componente interno que garante a identidade da entidade de destino antes da divulgação de informações como dados de aplicativo ou as credenciais para o destino.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-133">The service reference is also used with a *trust identity verifier*, an internal component that ensures the identity of the target principal before disclosing information such as application data or credentials to the target.</span></span> <span data-ttu-id="b0fe5-134">Se a identidade de confiança remoto não pode ser verificada ou está incorreta, o remetente deve garantir que nenhum dado foi divulgado que poderiam comprometer em si, o aplicativo ou o usuário.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-134">If the remote trust identity cannot be verified or is incorrect, the sender should ensure that no data was disclosed that could compromise itself, the application, or the user.</span></span>  
  
 <span data-ttu-id="b0fe5-135">Atenuantes incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="b0fe5-135">Mitigations include the following:</span></span>  
  
- <span data-ttu-id="b0fe5-136">Referências de serviço devem para ser confiável.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-136">Service references are assumed to be trustworthy.</span></span> <span data-ttu-id="b0fe5-137">Tome cuidado sempre que a transferência de instâncias de referência de serviço para garantir que eles não foram violados.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-137">Take care whenever transferring service reference instances to ensure that they have not been tampered with.</span></span>  
  
- <span data-ttu-id="b0fe5-138">Alguns aplicativos podem apresentar uma experiência de usuário que permite o estabelecimento interativo de confiança com base nos dados em que os dados de referência e a confiança do serviço comprovados pelo host remoto.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-138">Some applications can present a user experience that allows interactive establishment of trust based on data in the service reference and trust data proven by the remote host.</span></span> <span data-ttu-id="b0fe5-139">O WCF fornece pontos de extensibilidade para um recurso, mas o usuário deve ser implementado-los.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-139">WCF provides extensibility points for such a facility, but the user must implemented them.</span></span>  
  
## <a name="ntlm"></a><span data-ttu-id="b0fe5-140">NTLM</span><span class="sxs-lookup"><span data-stu-id="b0fe5-140">NTLM</span></span>  
 <span data-ttu-id="b0fe5-141">Por padrão, no ambiente de domínio do Windows, autenticação do Windows usa o protocolo Kerberos para autenticar e autorizar usuários.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-141">By default, in the Windows domain environment, Windows authentication uses the Kerberos protocol to authenticate and authorize users.</span></span> <span data-ttu-id="b0fe5-142">Se o protocolo Kerberos não pode ser usado por algum motivo, NT LAN Manager (NTLM) será usado como um fallback.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-142">If the Kerberos protocol cannot be used for some reason, NT LAN Manager (NTLM) is used as a fallback.</span></span> <span data-ttu-id="b0fe5-143">Você pode desativar esse comportamento, definindo a <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> propriedade para `false`.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-143">You can disable this behavior by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`.</span></span> <span data-ttu-id="b0fe5-144">Questões a serem consideradas ao permitir que o NTLM incluem:</span><span class="sxs-lookup"><span data-stu-id="b0fe5-144">Issues to be aware of when allowing NTLM include:</span></span>  
  
- <span data-ttu-id="b0fe5-145">NTLM expõe o nome de usuário do cliente.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-145">NTLM exposes the client user name.</span></span> <span data-ttu-id="b0fe5-146">Se o nome de usuário precisa ser mantidas confidenciais, em seguida, defina as `AllowNTLM` propriedade na associação à `false`.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-146">If the user name needs to be kept confidential, then set the `AllowNTLM` property on the binding to `false`.</span></span>  
  
- <span data-ttu-id="b0fe5-147">NTLM não oferece autenticação de servidor.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-147">NTLM does not provide server authentication.</span></span> <span data-ttu-id="b0fe5-148">Portanto, o cliente não pode garantir que ele está se comunicando com o serviço correto ao usar o NTLM como um protocolo de autenticação.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-148">Therefore, the client cannot ensure that it is communicating with the right service when you use NTLM as an authentication protocol.</span></span>  
  
### <a name="specifying-client-credentials-or-invalid-identity-forces-ntlm-usage"></a><span data-ttu-id="b0fe5-149">Uso do NTLM especificando as credenciais do cliente ou de força de identidade inválido</span><span class="sxs-lookup"><span data-stu-id="b0fe5-149">Specifying Client Credentials or Invalid Identity Forces NTLM Usage</span></span>  
 <span data-ttu-id="b0fe5-150">Ao criar um cliente, especificando as credenciais do cliente sem um nome de domínio, ou especificar uma identidade de servidor inválido, faz com que o NTLM a ser usado em vez do protocolo Kerberos (se o `AlllowNtlm` estiver definida como `true`).</span><span class="sxs-lookup"><span data-stu-id="b0fe5-150">When creating a client, specifying client credentials without a domain name, or specifying an invalid server identity, causes NTLM to be used instead of the Kerberos protocol (if the `AlllowNtlm` property is set to `true`).</span></span> <span data-ttu-id="b0fe5-151">Porque o NTLM não faz a autenticação do servidor, informações potencialmente podem ser divulgadas.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-151">Because  NTLM does not do server authentication, information can potentially be disclosed.</span></span>  
  
 <span data-ttu-id="b0fe5-152">Por exemplo, é possível especificar as credenciais do cliente Windows sem um nome de domínio, conforme mostrado no código a seguir em Visual C#.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-152">For example, it is possible to specify Windows client credentials without a domain name, as shown in the following Visual C# code.</span></span>  
  
```  
MyChannelFactory.Credentials.Windows.ClientCredential = new System.Net.NetworkCredential("username", "password");  
```  
  
 <span data-ttu-id="b0fe5-153">O código não especifica um nome de domínio e, portanto NTLM será usada.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-153">The code does not specify a domain name, and therefore NTLM will be used.</span></span>  
  
 <span data-ttu-id="b0fe5-154">Se o domínio for especificado, mas um nome de entidade de serviço inválido é especificado usando o recurso de identidade do ponto de extremidade, o NTLM é usado.</span><span class="sxs-lookup"><span data-stu-id="b0fe5-154">If the domain is specified, but an invalid service principal name is specified using the endpoint identity feature, then NTLM is used.</span></span> <span data-ttu-id="b0fe5-155">Para obter mais informações sobre como a identidade do ponto de extremidade é especificada, consulte [identidade de serviço e autenticação](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="b0fe5-155">For more information about how endpoint identity is specified, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b0fe5-156">Consulte também</span><span class="sxs-lookup"><span data-stu-id="b0fe5-156">See also</span></span>

- [<span data-ttu-id="b0fe5-157">Considerações sobre segurança</span><span class="sxs-lookup"><span data-stu-id="b0fe5-157">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)
- [<span data-ttu-id="b0fe5-158">Elevação de privilégio</span><span class="sxs-lookup"><span data-stu-id="b0fe5-158">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)
- [<span data-ttu-id="b0fe5-159">Negação de serviço</span><span class="sxs-lookup"><span data-stu-id="b0fe5-159">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)
- [<span data-ttu-id="b0fe5-160">Violação</span><span class="sxs-lookup"><span data-stu-id="b0fe5-160">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)
- [<span data-ttu-id="b0fe5-161">Cenários sem suporte</span><span class="sxs-lookup"><span data-stu-id="b0fe5-161">Unsupported Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/unsupported-scenarios.md)
- [<span data-ttu-id="b0fe5-162">Ataques de reprodução</span><span class="sxs-lookup"><span data-stu-id="b0fe5-162">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)
