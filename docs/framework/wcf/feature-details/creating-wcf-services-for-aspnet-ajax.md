---
title: Criando serviços do WCF para o AJAX ASP.NET
ms.date: 03/30/2017
ms.assetid: 04c0402c-e617-4ba5-aedf-d17692234776
ms.openlocfilehash: 64be5c8ec0d3ee105e026794912a9820bd7892d0
ms.sourcegitcommit: 581ab03291e91983459e56e40ea8d97b5189227e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/27/2019
ms.locfileid: "70045961"
---
# <a name="creating-wcf-services-for-aspnet-ajax"></a><span data-ttu-id="0ed5d-102">Criando serviços do WCF para o AJAX ASP.NET</span><span class="sxs-lookup"><span data-stu-id="0ed5d-102">Creating WCF Services for ASP.NET AJAX</span></span>

<span data-ttu-id="0ed5d-103">Microsoft ASP.NET AJAX permite que você crie rapidamente páginas da Web que incluem uma experiência de usuário avançada com elementos de interface do usuário altamente responsivos e familiares.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-103">Microsoft ASP.NET AJAX enables you to quickly create Web pages that include a rich user experience with responsive and familiar user interface elements.</span></span> <span data-ttu-id="0ed5d-104">O ASP.NET AJAX fornece bibliotecas de scripts de cliente que incorporam o JavaScript (linguagem cruzada) e as tecnologias HTML dinâmicos (DHTML), e integra-os com a plataforma de desenvolvimento baseada em servidor ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-104">ASP.NET AJAX provides client-script libraries that incorporate cross-browser ECMAScript (JavaScript) and dynamic HTML (DHTML) technologies, and it integrates them with the ASP.NET 2.0 server-based development platform.</span></span> <span data-ttu-id="0ed5d-105">Usando o ASP.NET AJAX, você pode melhorar a experiência do usuário e a eficiência dos seus aplicativos Web.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-105">By using ASP.NET AJAX, you can improve the user experience and the efficiency of your Web applications.</span></span>

<span data-ttu-id="0ed5d-106">O ASP.NET AJAX consiste em bibliotecas de scripts de cliente e de componentes de servidor que são integrados para fornecer uma estrutura de desenvolvimento robusta.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-106">ASP.NET AJAX consists of client-script libraries and of server components that are integrated to provide a robust development framework.</span></span> <span data-ttu-id="0ed5d-107">Para acessar um serviço de uma página do ASP.NET: depois que a URL do serviço é adicionada ao controle do Gerenciador de scripts do ASP.NET na página, as operações de serviço podem ser invocadas usando o código JavaScript que é exatamente como uma chamada de função JavaScript regular.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-107">To access a service from an ASP.NET page: once the service URL is added to the ASP.NET Script Manager control on the page, service operations may be invoked using JavaScript code that looks exactly like a regular JavaScript function call.</span></span> <span data-ttu-id="0ed5d-108">Consulte [saiba mais sobre o ASP.NET AJAX](https://go.microsoft.com/fwlink/?LinkId=186475) sobre o uso de serviços Web na estrutura AJAX.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-108">See [Learn ASP.NET AJAX](https://go.microsoft.com/fwlink/?LinkId=186475) about the use of Web services within the AJAX framework.</span></span>

<span data-ttu-id="0ed5d-109">A maioria dos serviços de Windows Communication Foundation (WCF) pode ser exposta como um serviço compatível com o ASP.NET AJAX, adicionando um ponto de extremidade do ASP.NET AJAX apropriado.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-109">Most Windows Communication Foundation (WCF) services may be exposed as a service compatible with ASP.NET AJAX by adding an appropriate ASP.NET AJAX endpoint.</span></span>

<span data-ttu-id="0ed5d-110">Se você estiver usando o Visual Studio, poderá usar um modelo predefinido para serviços WCF habilitados para AJAX, disponível na caixa de diálogo **Adicionar novo item** ao trabalhar com sites ou aplicativos web do ASP.net.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-110">If you are using Visual Studio, you may use a pre-built template for AJAX-enabled WCF services, available in the **Add New Item** dialog when working with ASP.NET Web Sites or Web Applications.</span></span>

<span data-ttu-id="0ed5d-111">Se você não estiver usando os modelos do Visual Studio, há duas maneiras de criar um ponto de extremidade do ASP.NET AJAX:</span><span class="sxs-lookup"><span data-stu-id="0ed5d-111">If you are not using the Visual Studio templates, there are two ways to create an ASP.NET AJAX endpoint:</span></span>

- <span data-ttu-id="0ed5d-112">Crie o ponto de extremidade usando a ativação dinâmica do host sem usar nenhuma configuração.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-112">Create the endpoint using dynamic host activation without using any configuration.</span></span> <span data-ttu-id="0ed5d-113">Essa é a abordagem mais básica se você não estiver familiarizado com o sistema de configuração do WCF.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-113">This is the most basic approach if you are unfamiliar with the WCF configuration system.</span></span> <span data-ttu-id="0ed5d-114">Para obter mais informações, confira [Como: Adicione um ponto de extremidade do ASP.NET AJAX](../../../../docs/framework/wcf/feature-details/how-to-add-an-aspnet-ajax-endpoint-without-using-configuration.md)sem usar a configuração.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-114">For more information, see [How to: Add an ASP.NET AJAX Endpoint Without Using Configuration](../../../../docs/framework/wcf/feature-details/how-to-add-an-aspnet-ajax-endpoint-without-using-configuration.md).</span></span>

- <span data-ttu-id="0ed5d-115">Adicione um ponto de extremidade habilitado para AJAX a um serviço WCF usando a configuração.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-115">Add an AJAX-enabled endpoint to a WCF service using configuration.</span></span> <span data-ttu-id="0ed5d-116">Para obter mais informações, confira [Como: Use a configuração para adicionar um ponto de](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)extremidade do ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-116">For more information, see [How to: Use Configuration to Add an ASP.NET AJAX Endpoint](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md).</span></span>

<span data-ttu-id="0ed5d-117">O modelo de programação da Web descrito na [visão geral do modelo de programação Web http do WCF](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model-overview.md) pode ser usado com serviços AJAX ASP.net.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-117">The Web Programming Model described in the [WCF Web HTTP Programming Model Overview](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model-overview.md) may be used with ASP.NET AJAX services.</span></span> <span data-ttu-id="0ed5d-118">Especificamente:</span><span class="sxs-lookup"><span data-stu-id="0ed5d-118">Specifically:</span></span>

- <span data-ttu-id="0ed5d-119">Você pode usar os <xref:System.ServiceModel.Web.WebGetAttribute> atributos <xref:System.ServiceModel.Web.WebInvokeAttribute> e para selecionar entre os verbos HTTP Get e http post.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-119">You can use the <xref:System.ServiceModel.Web.WebGetAttribute> and <xref:System.ServiceModel.Web.WebInvokeAttribute> attributes to select between HTTP GET and HTTP POST verbs.</span></span> <span data-ttu-id="0ed5d-120">Se usado corretamente, isso pode melhorar significativamente o desempenho do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-120">If used correctly, this may significantly improve your application’s performance.</span></span> <span data-ttu-id="0ed5d-121">Para obter mais informações, confira [Como: Escolha entre solicitações HTTP POST e HTTP GET para pontos de extremidade](../../../../docs/framework/wcf/feature-details/http-post-and-http-get-requests-for-aspnet-ajax-endpoints.md)do ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-121">For more information, see [How to: Choose between HTTP POST and HTTP GET requests for ASP.NET AJAX Endpoints](../../../../docs/framework/wcf/feature-details/http-post-and-http-get-requests-for-aspnet-ajax-endpoints.md).</span></span>

- <span data-ttu-id="0ed5d-122">Você pode usar as <xref:System.ServiceModel.Web.WebGetAttribute.ResponseFormat%2A> propriedades <xref:System.ServiceModel.Web.WebInvokeAttribute.ResponseFormat%2A> e para fazer com que o serviço retorne dados XML em vez do JavaScript Object Notation padrão (JSON).</span><span class="sxs-lookup"><span data-stu-id="0ed5d-122">You can use the <xref:System.ServiceModel.Web.WebGetAttribute.ResponseFormat%2A> and <xref:System.ServiceModel.Web.WebInvokeAttribute.ResponseFormat%2A> properties to cause your service to return XML data instead of the default JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="0ed5d-123">Fazer isso com a estrutura do ASP.NET AJAX faz com que o cliente JavaScript receba um objeto XML DOM.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-123">Doing this with the ASP.NET AJAX framework causes the JavaScript client to receive an XML DOM object.</span></span>

  > [!WARNING]
  > <span data-ttu-id="0ed5d-124">Sua operação deve definir o tipo de conteúdo como text/xml para que isso funcione.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-124">Your operation must set the content type to text/xml for this to work.</span></span> <span data-ttu-id="0ed5d-125">Caso contrário, o cliente JavaScript receberá uma cadeia de caracteres contendo o XML em vez de um objeto XML DOM.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-125">Otherwise, the JavaScript client will receive a string containing the XML instead of an XML DOM object.</span></span>

    <span data-ttu-id="0ed5d-126">Veja a seguir um exemplo de uma operação que retorna dados XML com o tipo de conteúdo definido adequadamente:</span><span class="sxs-lookup"><span data-stu-id="0ed5d-126">The following is an example of an operation that returns XML data with the content type set appropriately:</span></span>

  ```csharp
  [OperationContract, WebGet(ResponseFormat=WebMessageFormat.Xml)]
  public XElement GetData()
  {
      XElement x;
      //Get some data here...

      WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml";
      return x;
  }
  ```

- <span data-ttu-id="0ed5d-127">Nenhuma outra propriedade nos atributos <xref:System.ServiceModel.Web.WebGetAttribute> e <xref:System.ServiceModel.Web.WebInvokeAttribute> poderá ser alterada se a compatibilidade com o AJAX ASP.NET for necessária.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-127">No other properties on the <xref:System.ServiceModel.Web.WebGetAttribute> and <xref:System.ServiceModel.Web.WebInvokeAttribute> attributes can be changed if compatibility with ASP.NET AJAX is required.</span></span> <span data-ttu-id="0ed5d-128">Outros aspectos do modelo de programação da Web podem ser usados desde que as convenções de chamada do AJAX ASP.NET não sejam violadas.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-128">Other aspects of the Web Programming Model can be used as long as the ASP.NET AJAX calling conventions are not violated.</span></span>

 <span data-ttu-id="0ed5d-129">Cenários mais avançados exigem alguns detalhes adicionais de suporte a AJAX no WCF que serão compreendidos:</span><span class="sxs-lookup"><span data-stu-id="0ed5d-129">More advanced scenarios require some additional details of AJAX support in WCF be understood:</span></span>

- <span data-ttu-id="0ed5d-130">Para entender como os dados são transferidos entre um cliente de página AJAX e um serviço WCF usando JavaScript e para obter detalhes sobre como .NET Framework tipos são mapeados para tipos JavaScript, consulte [suporte para JSON e outros formatos de transferência de dados](../../../../docs/framework/wcf/feature-details/support-for-json-and-other-data-transfer-formats.md).</span><span class="sxs-lookup"><span data-stu-id="0ed5d-130">To understand how data is transferred between an AJAX page client and a WCF service using JavaScript, and for details on how .NET Framework types map to JavaScript types, see [Support for JSON and Other Data Transfer Formats](../../../../docs/framework/wcf/feature-details/support-for-json-and-other-data-transfer-formats.md).</span></span>

- <span data-ttu-id="0ed5d-131">Para aproveitar os recursos do ASP.NET, por exemplo, a autenticação baseada em URL e o acesso às informações de sessão do ASP.NET, talvez você queira habilitar o modo de compatibilidade do ASP.NET por meio da configuração.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-131">To take advantage of ASP.NET features, for example, URL-based authentication and accessing the ASP.NET session information, you may want to enable the ASP.NET Compatibility Mode through configuration.</span></span>

<span data-ttu-id="0ed5d-132">Os pontos de extremidade AJAX no WCF podem até mesmo ser consumidos sem a estrutura do ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-132">AJAX endpoints in WCF may even be consumed without the ASP.NET AJAX framework.</span></span> <span data-ttu-id="0ed5d-133">Isso requer uma compreensão da arquitetura de suporte do suporte AJAX no WCF.</span><span class="sxs-lookup"><span data-stu-id="0ed5d-133">Doing so requires an understanding of the support architecture of AJAX support in WCF.</span></span> <span data-ttu-id="0ed5d-134">Para obter uma discussão sobre essa arquitetura, consulte [modelo de objeto de programação do WCF Web http](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-object-model.md).</span><span class="sxs-lookup"><span data-stu-id="0ed5d-134">For a discussion of this architecture, see [WCF Web HTTP Programming Object Model](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-object-model.md).</span></span> <span data-ttu-id="0ed5d-135">Para obter um exemplo de código que demonstra essa abordagem, consulte o [serviço AJAX com JSON e XML](../../../../docs/framework/wcf/samples/ajax-service-with-json-and-xml-sample.md).</span><span class="sxs-lookup"><span data-stu-id="0ed5d-135">For a code sample demonstrating this approach, see the [AJAX Service with JSON and XML](../../../../docs/framework/wcf/samples/ajax-service-with-json-and-xml-sample.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="0ed5d-136">Consulte também</span><span class="sxs-lookup"><span data-stu-id="0ed5d-136">See also</span></span>

- [<span data-ttu-id="0ed5d-137">Modelo de programação HTTP Web do WCF</span><span class="sxs-lookup"><span data-stu-id="0ed5d-137">WCF Web HTTP Programming Model</span></span>](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model.md)
- [<span data-ttu-id="0ed5d-138">Como: Adicionar um ponto de extremidade do ASP.NET AJAX sem usar a configuração</span><span class="sxs-lookup"><span data-stu-id="0ed5d-138">How to: Add an ASP.NET AJAX Endpoint Without Using Configuration</span></span>](../../../../docs/framework/wcf/feature-details/how-to-add-an-aspnet-ajax-endpoint-without-using-configuration.md)
- [<span data-ttu-id="0ed5d-139">Como: Usar a configuração para adicionar um ponto de extremidade do ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="0ed5d-139">How to: Use Configuration to Add an ASP.NET AJAX Endpoint</span></span>](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)
- [<span data-ttu-id="0ed5d-140">Como: Escolha entre solicitações HTTP POST e HTTP GET para pontos de extremidade do ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="0ed5d-140">How to: Choose between HTTP POST and HTTP GET requests for ASP.NET AJAX Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/http-post-and-http-get-requests-for-aspnet-ajax-endpoints.md)
