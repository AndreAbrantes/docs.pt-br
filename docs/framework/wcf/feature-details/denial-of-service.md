---
title: "Negação de serviço"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- denial of service [WCF]
ms.assetid: dfb150f3-d598-4697-a5e6-6779e4f9b600
caps.latest.revision: 
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 5d5f67790abad5dcf6311de1817b4ea093e703d9
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/22/2017
---
# <a name="denial-of-service"></a><span data-ttu-id="7d1ca-102">Negação de serviço</span><span class="sxs-lookup"><span data-stu-id="7d1ca-102">Denial of Service</span></span>
<span data-ttu-id="7d1ca-103">Negação de serviço ocorre quando um sistema está sobrecarregado de forma que as mensagens não podem ser processadas ou eles são processados muito lentamente.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-103">Denial of service occurs when a system is overwhelmed in such a way that messages cannot be processed, or they are processed extremely slowly.</span></span>  
  
## <a name="excess-memory-consumption"></a><span data-ttu-id="7d1ca-104">Consumo de memória em excesso</span><span class="sxs-lookup"><span data-stu-id="7d1ca-104">Excess Memory Consumption</span></span>  
 <span data-ttu-id="7d1ca-105">Pode ocorrer um problema ao ler um documento XML com um grande número de prefixos, namespaces ou nomes exclusivos de locais.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-105">A problem can occur when reading an XML document with a large number of unique local names, namespaces, or prefixes.</span></span> <span data-ttu-id="7d1ca-106">Se você estiver usando uma classe que deriva de <xref:System.Xml.XmlReader>, e você chama o <xref:System.Xml.XmlReader.LocalName%2A>, <xref:System.Xml.XmlReader.Prefix%2A> ou <xref:System.Xml.XmlReader.NamespaceURI%2A> propriedade para cada item, a cadeia de caracteres retornada é adicionada a uma <xref:System.Xml.NameTable>.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-106">If you are using a class that derives from <xref:System.Xml.XmlReader>, and you call either the <xref:System.Xml.XmlReader.LocalName%2A>, <xref:System.Xml.XmlReader.Prefix%2A> or <xref:System.Xml.XmlReader.NamespaceURI%2A> property for each item, the returned string is added to a <xref:System.Xml.NameTable>.</span></span> <span data-ttu-id="7d1ca-107">A coleção mantida pelo <xref:System.Xml.NameTable> nunca diminui de tamanho, criando uma máquina virtual "vazamento de memória" das alças de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-107">The collection held by the <xref:System.Xml.NameTable> never decreases in size, creating a virtual "memory leak" of the string handles.</span></span>  
  
 <span data-ttu-id="7d1ca-108">Atenuantes incluem:</span><span class="sxs-lookup"><span data-stu-id="7d1ca-108">Mitigations include:</span></span>  
  
-   <span data-ttu-id="7d1ca-109">Derivam de <xref:System.Xml.NameTable> classe e impor uma cota de tamanho máximo.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-109">Derive from the <xref:System.Xml.NameTable> class and enforce a maximum size quota.</span></span> <span data-ttu-id="7d1ca-110">(Você não pode impedir o uso de um <xref:System.Xml.NameTable> ou alternar o <xref:System.Xml.NameTable> quando ele estiver cheio.)</span><span class="sxs-lookup"><span data-stu-id="7d1ca-110">(You cannot prevent the use of a <xref:System.Xml.NameTable> or switch the <xref:System.Xml.NameTable> when it is full.)</span></span>  
  
-   <span data-ttu-id="7d1ca-111">Evite usar as propriedades mencionadas e em vez disso, use o <xref:System.Xml.XmlReader.MoveToAttribute%2A> método com o <xref:System.Xml.XmlReader.IsStartElement%2A> método sempre que possível; esses métodos não retornar cadeias de caracteres e, portanto, evitar o problema de sobrecarga do <xref:System.Xml.NameTable> coleção.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-111">Avoid using the properties mentioned and instead use the <xref:System.Xml.XmlReader.MoveToAttribute%2A> method with the <xref:System.Xml.XmlReader.IsStartElement%2A> method where possible; those methods do not return strings and thus avoid the problem of overfilling the <xref:System.Xml.NameTable> collection.</span></span>  
  
## <a name="malicious-client-sends-excessive-license-requests-to-service"></a><span data-ttu-id="7d1ca-112">Cliente mal-intencionado envia solicitações de licença excessivas ao serviço</span><span class="sxs-lookup"><span data-stu-id="7d1ca-112">Malicious Client Sends Excessive License Requests to Service</span></span>  
 <span data-ttu-id="7d1ca-113">Se um cliente mal-intencionado bombardeiam um serviço com solicitações de licença excessiva, isso poderá causar para uso excessivo de memória do servidor.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-113">If a malicious client bombards a service with excessive license requests, it can cause the server to use excessive memory.</span></span>  
  
 <span data-ttu-id="7d1ca-114">Mitigação: Use as seguintes propriedades da <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings> classe:</span><span class="sxs-lookup"><span data-stu-id="7d1ca-114">Mitigation: Use the following properties of the <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings> class:</span></span>  
  
-   <span data-ttu-id="7d1ca-115"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxCachedCookies%2A>: controla o número máximo de limitada de tempo `SecurityContextToken`que o servidor armazena em cache após `SPNego` ou `SSL` negociação.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-115"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxCachedCookies%2A>: controls the maximum number of time-bounded `SecurityContextToken`s that the server caches after `SPNego` or `SSL` negotiation.</span></span>  
  
-   <span data-ttu-id="7d1ca-116"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.IssuedCookieLifetime%2A>: controla o tempo de vida de `SecurityContextTokens` que os problemas de servidor a seguir `SPNego` ou `SSL` negociação.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-116"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.IssuedCookieLifetime%2A>: controls the lifetime of the `SecurityContextTokens` that the server issues following `SPNego` or `SSL` negotiation.</span></span> <span data-ttu-id="7d1ca-117">Os caches de servidor a `SecurityContextToken`s para esse período de tempo.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-117">The server caches the `SecurityContextToken`s for this period of time.</span></span>  
  
-   <span data-ttu-id="7d1ca-118"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxPendingSessions%2A>: controla o número máximo de conversas seguras que são estabelecidas no servidor, mas para que nenhum aplicativo de mensagens foram processado.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-118"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxPendingSessions%2A>: controls the maximum number of secure conversations that are established at the server but for which no application messages have been processed.</span></span> <span data-ttu-id="7d1ca-119">Essa cota impede que os clientes estabelecendo conversas seguras no serviço, causando o serviço manter o estado por cliente, mas nunca usá-los.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-119">This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state per client, but never using them.</span></span>  
  
-   <span data-ttu-id="7d1ca-120"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.InactivityTimeout%2A>: controla o tempo máximo que o serviço mantém uma conversa segura ativo sem receber uma mensagem de aplicativo do cliente para a conversa.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-120"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.InactivityTimeout%2A>:  controls the maximum time the service keeps a secure conversation alive without receiving an application message from the client for the conversation.</span></span> <span data-ttu-id="7d1ca-121">Essa cota impede que os clientes estabelecendo conversas seguras no serviço, causando o serviço manter o estado por cliente, mas nunca usá-los.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-121">This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state per client, but never using them.</span></span>  
  
## <a name="wsdualhttpbinding-or-dual-custom-bindings-require-client-authentication"></a><span data-ttu-id="7d1ca-122">WSDualHttpBinding ou associações personalizadas duplas exigem autenticação de cliente</span><span class="sxs-lookup"><span data-stu-id="7d1ca-122">WSDualHttpBinding or Dual Custom Bindings Require Client Authentication</span></span>  
 <span data-ttu-id="7d1ca-123">Por padrão, o <xref:System.ServiceModel.WSDualHttpBinding> tem segurança habilitada.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-123">By default, the <xref:System.ServiceModel.WSDualHttpBinding> has security enabled.</span></span> <span data-ttu-id="7d1ca-124">É possível, no entanto, se a autenticação do cliente é desabilitada por definir o <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A> propriedade <xref:System.ServiceModel.MessageCredentialType.None>, um usuário mal-intencionado pode causar um ataque de negação de serviço em um serviço de terceiro.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-124">It is possible, however, that if the client authentication is disabled by setting the <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A> property to <xref:System.ServiceModel.MessageCredentialType.None>, a malicious user can cause a denial of service attack on a third service.</span></span> <span data-ttu-id="7d1ca-125">Isso pode ocorrer porque um cliente mal-intencionado pode direcionar o serviço para enviar um fluxo de mensagens para atender a um terceiro.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-125">This can occur because a malicious client can direct the service to send a stream of messages to a third service.</span></span>  
  
 <span data-ttu-id="7d1ca-126">Para atenuar isso, não defina a propriedade como `None`.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-126">To mitigate this, do not set the property to `None`.</span></span> <span data-ttu-id="7d1ca-127">Estar ciente dessa possibilidade ao criar uma associação personalizada que tem um padrão de mensagem dupla.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-127">Also be aware of this possibility when creating a custom binding that has a dual message pattern.</span></span>  
  
## <a name="auditing-event-log-can-be-filled"></a><span data-ttu-id="7d1ca-128">Log de eventos de auditoria pode ser preenchido</span><span class="sxs-lookup"><span data-stu-id="7d1ca-128">Auditing Event Log Can Be Filled</span></span>  
 <span data-ttu-id="7d1ca-129">Se um usuário mal-intencionado entenda que a auditoria está habilitada, essa invasor pode enviar mensagens inválidas que fazer com que as entradas de auditoria a serem gravados.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-129">If a malicious user understands that auditing is enabled, that attacker can send invalid messages that cause audit entries to be written.</span></span> <span data-ttu-id="7d1ca-130">Se o log de auditoria é preenchido dessa maneira, o sistema de auditoria falha.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-130">If the audit log is filled in this manner, the auditing system fails.</span></span>  
  
 <span data-ttu-id="7d1ca-131">Para atenuar isso, defina o <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior.SuppressAuditFailure%2A> propriedade `true` e use as propriedades do Visualizador de eventos para controlar o comportamento de auditoria.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-131">To mitigate this, set the <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior.SuppressAuditFailure%2A> property to `true` and use the properties of the Event Viewer to control the auditing behavior.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="7d1ca-132">usando o Visualizador de eventos para exibir e gerenciar logs de eventos, consulte [Visualizador de eventos](http://go.microsoft.com/fwlink/?LinkId=186123).</span><span class="sxs-lookup"><span data-stu-id="7d1ca-132"> using the Event Viewer to view and manage event logs, see [Event Viewer](http://go.microsoft.com/fwlink/?LinkId=186123).</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="7d1ca-133">[Auditoria](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span><span class="sxs-lookup"><span data-stu-id="7d1ca-133"> [Auditing](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span></span>  
  
## <a name="invalid-implementations-of-iauthorizationpolicy-can-cause-service-hangs"></a><span data-ttu-id="7d1ca-134">Implementações inválidas de IAuthorizationPolicy pode causa serviço trava</span><span class="sxs-lookup"><span data-stu-id="7d1ca-134">Invalid Implementations of IAuthorizationPolicy Can Cause Service Hangs</span></span>  
 <span data-ttu-id="7d1ca-135">Chamando o <xref:System.IdentityModel.Policy.IAuthorizationPolicy.Evaluate%2A> método em uma implementação falha do <xref:System.IdentityModel.Policy.IAuthorizationPolicy> interface pode fazer com que o serviço desligar.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-135">Calling the <xref:System.IdentityModel.Policy.IAuthorizationPolicy.Evaluate%2A> method on a faulty implementation of the <xref:System.IdentityModel.Policy.IAuthorizationPolicy> interface can cause the service to hang.</span></span>  
  
 <span data-ttu-id="7d1ca-136">Mitigação: Use somente o código confiável.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-136">Mitigation: Use only trusted code.</span></span> <span data-ttu-id="7d1ca-137">Ou seja, use somente o código que você tiver gravado e testado ou que vêm de um fornecedor confiável.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-137">That is, use only code that you have written and tested, or that comes from a trusted provider.</span></span> <span data-ttu-id="7d1ca-138">Não permitir extensões não confiáveis do <xref:System.IdentityModel.Policy.IAuthorizationPolicy> devem ser inseridos em seu código sem a devida consideração.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-138">Do not allow untrusted extensions of <xref:System.IdentityModel.Policy.IAuthorizationPolicy> to be plugged into your code without due consideration.</span></span> <span data-ttu-id="7d1ca-139">Isso se aplica a todas as extensões usadas em uma implementação de serviço.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-139">This applies to all extensions used in a service implementation.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="7d1ca-140">não faz qualquer diferença entre o código do aplicativo e o código externo que é conectado usando pontos de extensibilidade.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-140"> does not make any distinction between application code and foreign code that is plugged in using extensibility points.</span></span>  
  
## <a name="kerberos-maximum-token-size-may-need-resizing"></a><span data-ttu-id="7d1ca-141">Tamanho de Token Kerberos máximo pode ser necessário redimensionar</span><span class="sxs-lookup"><span data-stu-id="7d1ca-141">Kerberos Maximum Token Size May Need Resizing</span></span>  
 <span data-ttu-id="7d1ca-142">Se um cliente pertence a um grande número de grupos (aproximadamente 900, embora o número real varia dependendo dos grupos), um problema pode ocorrer quando o bloco do cabeçalho da mensagem excede 64 kilobytes.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-142">If a client belongs to a large number of groups (approximately 900, although the actual number varies depending on the groups), a problem may occur when a message header's block exceeds 64 kilobytes.</span></span> <span data-ttu-id="7d1ca-143">Nesse caso, você pode aumentar o tamanho de token Kerberos máximo, conforme descrito no artigo do Microsoft Support "[a autenticação Kerberos do Internet Explorer não funciona devido a um buffer insuficiente se conectam ao IIS](http://go.microsoft.com/fwlink/?LinkId=89176)."</span><span class="sxs-lookup"><span data-stu-id="7d1ca-143">In that case, you can increase the maximum Kerberos token size, as described in the Microsoft Support article "[Internet Explorer Kerberos authentication does not work because of an insufficient buffer connecting to IIS](http://go.microsoft.com/fwlink/?LinkId=89176)."</span></span> <span data-ttu-id="7d1ca-144">Você também pode precisar aumentar o máximo [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] para acomodar o maior token Kerberos da mensagem.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-144">You may also need to increase the maximum [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message size to accommodate the larger Kerberos token.</span></span>  
  
## <a name="autoenrollment-results-in-multiple-certificates-with-same-subject-name-for-machine"></a><span data-ttu-id="7d1ca-145">O registro automático resultados em vários certificados com o mesmo nome de assunto para a máquina</span><span class="sxs-lookup"><span data-stu-id="7d1ca-145">Autoenrollment Results in Multiple Certificates with Same Subject Name for Machine</span></span>  
 <span data-ttu-id="7d1ca-146">*O registro automático* é a capacidade de [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] para registrar automaticamente os usuários e computadores para certificados.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-146">*Autoenrollment* is the capability of [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] to automatically enroll users and computers for certificates.</span></span> <span data-ttu-id="7d1ca-147">Quando um computador estiver em um domínio com o recurso habilitado, um certificado x. 509 com a finalidade de autenticação de cliente é criado e inserido no repositório de certificados pessoais do computador local sempre que uma nova máquina é unida à automaticamente a rede.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-147">When a machine is on a domain with the feature enabled, an X.509 certificate with the intended purpose of client authentication is automatically created and inserted into the local computer's Personal certificates store whenever a new machine is joined to the network.</span></span> <span data-ttu-id="7d1ca-148">No entanto, o registro automático usa o mesmo nome de assunto para todos os certificados que ele cria no cache.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-148">However, autoenrollment uses the same subject name for all certificates it creates in the cache.</span></span>  
  
 <span data-ttu-id="7d1ca-149">O impacto é que [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] serviços podem falhar ao abrir em domínios com o registro automático.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-149">The impact is that [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services may fail to open on domains with autoenrollment.</span></span> <span data-ttu-id="7d1ca-150">Isso ocorre porque os critérios de pesquisa padrão serviço x. 509 credencial podem ser ambíguos porque existem vários certificados com o nome de sistema de nome de domínio (DNS) totalmente qualificado do computador.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-150">This occurs because the default service X.509 credential search criteria might be ambiguous because multiple certificates with the machine's fully qualified Domain Name System (DNS) name exist.</span></span> <span data-ttu-id="7d1ca-151">Um certificado se origina de registro automático; a outra pode ser um certificado emitido por conta própria.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-151">One certificate originates from autoenrollment; the other might be a self-issued certificate.</span></span>  
  
 <span data-ttu-id="7d1ca-152">Para atenuar isso, referenciar o certificado exato para usar usando um critério de pesquisa mais preciso sobre o [ \<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span><span class="sxs-lookup"><span data-stu-id="7d1ca-152">To mitigate this, reference the exact certificate to use by using a more precise search criterion on the [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span></span> <span data-ttu-id="7d1ca-153">Por exemplo, use o <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> opção e especifique o certificado por sua impressão digital exclusiva (hash).</span><span class="sxs-lookup"><span data-stu-id="7d1ca-153">For example, use the <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> option, and specify the certificate by its unique thumbprint (hash).</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="7d1ca-154">o recurso de registro automático, consulte [registro automático de certificados no Windows Server 2003](http://go.microsoft.com/fwlink/?LinkId=95166).</span><span class="sxs-lookup"><span data-stu-id="7d1ca-154"> the autoenrollment feature, see [Certificate Autoenrollment in Windows Server 2003](http://go.microsoft.com/fwlink/?LinkId=95166).</span></span>  
  
## <a name="last-of-multiple-alternative-subject-names-used-for-authorization"></a><span data-ttu-id="7d1ca-155">Última de vários nomes de entidade alternativo usado para autorização</span><span class="sxs-lookup"><span data-stu-id="7d1ca-155">Last of Multiple Alternative Subject Names Used for Authorization</span></span>  
 <span data-ttu-id="7d1ca-156">No caso raro quando um certificado x. 509 contém vários nomes de entidade alternativo e você autorizar usando o nome alternativo da entidade, autorização pode falhar.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-156">In the rare case when an X.509 certificate contains multiple alternative subject names, and you authorize using the alternative subject name, authorization may fail.</span></span>  
  
## <a name="protect-configuration-files-with-acls"></a><span data-ttu-id="7d1ca-157">Proteger os arquivos de configuração com ACLs</span><span class="sxs-lookup"><span data-stu-id="7d1ca-157">Protect Configuration Files with ACLs</span></span>  
 <span data-ttu-id="7d1ca-158">Você pode especificar declarações obrigatórias e opcionais em arquivos de código e configuração para [!INCLUDE[infocard](../../../../includes/infocard-md.md)] tokens emitidos.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-158">You can specify required and optional claims in code and configuration files for [!INCLUDE[infocard](../../../../includes/infocard-md.md)] issued tokens.</span></span> <span data-ttu-id="7d1ca-159">Isso resulta em elementos correspondentes que está sendo emitidos em `RequestSecurityToken` serviço de token de mensagens que são enviadas para a segurança.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-159">This results in corresponding elements being emitted in `RequestSecurityToken` messages that are sent to the security token service.</span></span> <span data-ttu-id="7d1ca-160">Um invasor pode modificar código ou configuração para remover as declarações necessárias ou opcionais, potencialmente obter o serviço de token de segurança para emitir um token que não permite o acesso ao serviço de destino.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-160">An attacker can modify code or configuration to remove required or optional claims, potentially getting the security token service to issue a token that does not allow access to the target service.</span></span>  
  
 <span data-ttu-id="7d1ca-161">Para atenuar: exigem acesso ao computador para modificar o arquivo de configuração.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-161">To mitigate: Require access to the computer to modify the configuration file.</span></span> <span data-ttu-id="7d1ca-162">Controle de acesso de arquivo de uso de ACLs para proteger os arquivos de configuração.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-162">Use file access control lists (ACLs) to secure configuration files.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="7d1ca-163">requer que o código seja no cache de assembly global ou de diretório do aplicativo antes de permitir esse tipo de código a ser carregado de configuração.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-163"> requires that code be in the application directory or the global assembly cache before it will allow such code to be loaded from configuration.</span></span> <span data-ttu-id="7d1ca-164">Use as ACLs do diretório para proteger diretórios.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-164">Use directory ACLs to secure directories.</span></span>  
  
## <a name="maximum-number-of-secure-sessions-for-a-service-is-reached"></a><span data-ttu-id="7d1ca-165">Número máximo de sessões seguras para um serviço é atingido</span><span class="sxs-lookup"><span data-stu-id="7d1ca-165">Maximum Number of Secure Sessions for a Service Is Reached</span></span>  
 <span data-ttu-id="7d1ca-166">Quando um cliente é autenticado com êxito por um serviço e uma sessão segura é estabelecida com o serviço, o serviço mantém o controle de sessão até que o cliente cancele ou a sessão expira.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-166">When a client is successfully authenticated by a service and a secure session is established with the service, the service keeps track of the session until the client cancels it or the session expires.</span></span> <span data-ttu-id="7d1ca-167">Cada sessão estabelecida conta em relação ao limite para o número máximo de sessões simultâneas ativas com um serviço.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-167">Every established session counts against the limit for the maximum number of active simultaneous sessions with a service.</span></span> <span data-ttu-id="7d1ca-168">Quando esse limite for atingido, clientes que tentam criar uma nova sessão com esse serviço serão rejeitados até que um ou mais ativas sessões expirarem ou são canceladas por um cliente.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-168">When this limit is reached, clients that attempt to create a new session with that service are rejected until one or more active sessions expire or are canceled by a client.</span></span> <span data-ttu-id="7d1ca-169">Um cliente pode ter várias sessões com um serviço, e cada um dessas sessões contado o limite.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-169">A client can have multiple sessions with a service, and each one of those sessions counts toward the limit.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7d1ca-170">Quando você usa sessões com monitoração de estado, o parágrafo anterior não se aplica.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-170">When you use stateful sessions, the previous paragraph does not apply.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="7d1ca-171">sessões com monitoração de estado, consulte [como: criar um Token de contexto de segurança para uma sessão segura](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).</span><span class="sxs-lookup"><span data-stu-id="7d1ca-171"> stateful sessions, see [How to: Create a Security Context Token for a Secure Session](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).</span></span>  
  
 <span data-ttu-id="7d1ca-172">Para atenuar isso, defina o limite para o número máximo de sessões ativas e o tempo de vida máximo para uma sessão definindo o <xref:System.ServiceModel.Channels.SecurityBindingElement> propriedade o <xref:System.ServiceModel.Channels.SecurityBindingElement> classe.</span><span class="sxs-lookup"><span data-stu-id="7d1ca-172">To mitigate this, set the limit for the maximum number of active sessions and the maximum lifetime for a session by setting the <xref:System.ServiceModel.Channels.SecurityBindingElement> property of the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7d1ca-173">Consulte também</span><span class="sxs-lookup"><span data-stu-id="7d1ca-173">See Also</span></span>  
 [<span data-ttu-id="7d1ca-174">Considerações sobre segurança</span><span class="sxs-lookup"><span data-stu-id="7d1ca-174">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)  
 [<span data-ttu-id="7d1ca-175">Divulgação de informações</span><span class="sxs-lookup"><span data-stu-id="7d1ca-175">Information Disclosure</span></span>](../../../../docs/framework/wcf/feature-details/information-disclosure.md)  
 [<span data-ttu-id="7d1ca-176">Elevação de privilégio</span><span class="sxs-lookup"><span data-stu-id="7d1ca-176">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)  
 [<span data-ttu-id="7d1ca-177">Negação de serviço</span><span class="sxs-lookup"><span data-stu-id="7d1ca-177">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)  
 [<span data-ttu-id="7d1ca-178">Ataques de reprodução</span><span class="sxs-lookup"><span data-stu-id="7d1ca-178">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)  
 [<span data-ttu-id="7d1ca-179">Violação</span><span class="sxs-lookup"><span data-stu-id="7d1ca-179">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)  
 [<span data-ttu-id="7d1ca-180">Cenários sem suporte</span><span class="sxs-lookup"><span data-stu-id="7d1ca-180">Unsupported Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/unsupported-scenarios.md)
