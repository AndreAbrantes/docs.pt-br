---
title: 'Como: desabilitar criptografia de assinaturas digitais'
ms.date: 03/30/2017
ms.assetid: fd174313-ad81-4dca-898a-016ccaff8187
ms.openlocfilehash: 461c5af2c7fbb98486a8decbe4aa998d8d21070d
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/22/2019
ms.locfileid: "69911171"
---
# <a name="how-to-disable-encryption-of-digital-signatures"></a><span data-ttu-id="eb6ec-102">Como: desabilitar criptografia de assinaturas digitais</span><span class="sxs-lookup"><span data-stu-id="eb6ec-102">How to: Disable Encryption of Digital Signatures</span></span>
<span data-ttu-id="eb6ec-103">Por padrão, uma mensagem é assinada e a assinatura é criptografada digitalmente.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-103">By default, a message is signed and the signature is digitally encrypted.</span></span> <span data-ttu-id="eb6ec-104">Isso é controlado por meio da criação de uma associação personalizada com uma <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> instância do <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> ou do e `MessageProtectionOrder` da configuração da propriedade de qualquer <xref:System.ServiceModel.Security.MessageProtectionOrder> classe para um valor de enumeração.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-104">This is controlled by creating a custom binding with an instance of the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> and setting the `MessageProtectionOrder` property of either class to a <xref:System.ServiceModel.Security.MessageProtectionOrder> enumeration value.</span></span> <span data-ttu-id="eb6ec-105">O padrão é <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-105">The default is <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="eb6ec-106">Esse processo consome até 30% mais tempo do que simplesmente assinar e criptografar com base no tamanho geral da mensagem (quanto menor a mensagem, maior o impacto no desempenho).</span><span class="sxs-lookup"><span data-stu-id="eb6ec-106">This process consumes up to 30 percent more time than simply signing and encrypting based on the overall message size (the smaller the message, the greater the performance impact).</span></span> <span data-ttu-id="eb6ec-107">No entanto, desabilitar a criptografia da assinatura pode permitir que um invasor Adivinhe o conteúdo da mensagem.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-107">Disabling encryption of the signature, however, might allow an attacker to guess the content of the message.</span></span> <span data-ttu-id="eb6ec-108">Isso é possível porque o elemento Signature contém o código hash do texto sem formatação de todas as partes assinadas na mensagem.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-108">This is possible because the signature element contains the hash code of the plain text of every signed part in the message.</span></span> <span data-ttu-id="eb6ec-109">Por exemplo, embora o corpo da mensagem seja criptografado por padrão, a assinatura não criptografada contém o código hash do corpo da mensagem antes da criptografia.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-109">For example, although the message body is encrypted by default, the unencrypted signature contains the hash code of the message body before the encryption.</span></span> <span data-ttu-id="eb6ec-110">Se o conjunto de valores possíveis para a parte assinada e criptografada for pequeno, um invasor poderá deduzir o conteúdo examinando o valor de hash.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-110">If the set of possible values for the signed and encrypted part is small, an attacker might be able to deduce the contents by looking at the hash value.</span></span> <span data-ttu-id="eb6ec-111">A criptografia da assinatura reduz esse vetor de ataque.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-111">Encrypting the signature mitigates this attack vector.</span></span>  
  
 <span data-ttu-id="eb6ec-112">Portanto, desabilite a criptografia da assinatura somente quando o valor do conteúdo estiver baixo ou o conjunto de possíveis valores de conteúdo for grande e não determinístico e o lucro de desempenho for mais importante do que reduzir o ataque descrito acima.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-112">Therefore, disable encryption of the signature only when the value of the content is low or the set of possible content values is large and nondeterministic, and the performance gain is more important than mitigating the attack described above.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="eb6ec-113">Se não houver nada na mensagem criptografada, o elemento Signature não será criptografado, mesmo quando a <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> propriedade ou <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> for definida como. <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature></span><span class="sxs-lookup"><span data-stu-id="eb6ec-113">If there is nothing in the message that is encrypted, the signature element is not encrypted, even when the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="eb6ec-114">Esse comportamento ocorre mesmo com associações fornecidas pelo sistema; todas as associações fornecidas pelo sistema têm a ordem de proteção de mensagem `SignBeforeEncryptAndEncryptSignature`definida como.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-114">This behavior occurs even with system-provided bindings; all system-provided bindings have the message protection order set to `SignBeforeEncryptAndEncryptSignature`.</span></span> <span data-ttu-id="eb6ec-115">No entanto, as gerações do WCF WSDL (Web Services Description Language) `<sp:EncryptSignature>` ainda conterá a asserção.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-115">However, the Web Services Description Language (WSDL) WCF generates will still contain the `<sp:EncryptSignature>` assertion.</span></span>  
  
### <a name="to-disable-digital-signing"></a><span data-ttu-id="eb6ec-116">Para desabilitar a assinatura digital</span><span class="sxs-lookup"><span data-stu-id="eb6ec-116">To disable digital signing</span></span>  
  
1. <span data-ttu-id="eb6ec-117">Criará um <xref:System.ServiceModel.Channels.CustomBinding>.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-117">Create a <xref:System.ServiceModel.Channels.CustomBinding>.</span></span> <span data-ttu-id="eb6ec-118">Para obter mais informações, confira [Como: Crie uma associação personalizada usando o SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span><span class="sxs-lookup"><span data-stu-id="eb6ec-118">For more information, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span></span>  
  
2. <span data-ttu-id="eb6ec-119">Adicione um <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> ou um <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> à coleção de associação.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-119">Add either an <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the binding collection.</span></span>  
  
3. <span data-ttu-id="eb6ec-120">Defina a <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> Propriedade como <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>ou defina a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> Propriedade como <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.</span><span class="sxs-lookup"><span data-stu-id="eb6ec-120">Set the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, or set the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="eb6ec-121">Consulte também</span><span class="sxs-lookup"><span data-stu-id="eb6ec-121">See also</span></span>

- [<span data-ttu-id="eb6ec-122">Recursos de segurança com associações personalizadas</span><span class="sxs-lookup"><span data-stu-id="eb6ec-122">Security Capabilities with Custom Bindings</span></span>](../../../../docs/framework/wcf/feature-details/security-capabilities-with-custom-bindings.md)
