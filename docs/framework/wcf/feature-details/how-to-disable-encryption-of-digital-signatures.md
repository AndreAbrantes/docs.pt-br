---
title: Como desabilitar criptografia de assinaturas digitais
ms.date: 03/30/2017
ms.assetid: fd174313-ad81-4dca-898a-016ccaff8187
ms.openlocfilehash: 074a32f6a69f8353568e76c99f4b65aece813f55
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33491654"
---
# <a name="how-to-disable-encryption-of-digital-signatures"></a><span data-ttu-id="b06bc-102">Como desabilitar criptografia de assinaturas digitais</span><span class="sxs-lookup"><span data-stu-id="b06bc-102">How to: Disable Encryption of Digital Signatures</span></span>
<span data-ttu-id="b06bc-103">Por padrão, uma mensagem é assinada e a assinatura digital é criptografada.</span><span class="sxs-lookup"><span data-stu-id="b06bc-103">By default, a message is signed and the signature is digitally encrypted.</span></span> <span data-ttu-id="b06bc-104">Isso é controlado pela criação de uma associação personalizada com uma instância do <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> ou o <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> e configuração de `MessageProtectionOrder` propriedade ou classe a um <xref:System.ServiceModel.Security.MessageProtectionOrder> valor de enumeração.</span><span class="sxs-lookup"><span data-stu-id="b06bc-104">This is controlled by creating a custom binding with an instance of the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> and setting the `MessageProtectionOrder` property of either class to a <xref:System.ServiceModel.Security.MessageProtectionOrder> enumeration value.</span></span> <span data-ttu-id="b06bc-105">O padrão é <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span><span class="sxs-lookup"><span data-stu-id="b06bc-105">The default is <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="b06bc-106">Esse processo consome até 30% mais tempo do que simplesmente assinatura e criptografia com base no tamanho da mensagem geral (quanto menor a mensagem, maior o impacto de desempenho).</span><span class="sxs-lookup"><span data-stu-id="b06bc-106">This process consumes up to 30 percent more time than simply signing and encrypting based on the overall message size (the smaller the message, the greater the performance impact).</span></span> <span data-ttu-id="b06bc-107">A desabilitação da criptografia da assinatura, no entanto, pode permitir que um invasor adivinhar o conteúdo da mensagem.</span><span class="sxs-lookup"><span data-stu-id="b06bc-107">Disabling encryption of the signature, however, might allow an attacker to guess the content of the message.</span></span> <span data-ttu-id="b06bc-108">Isso é possível porque o elemento de assinatura contém o código de hash do texto sem formatação de todas as partes da mensagem assinada.</span><span class="sxs-lookup"><span data-stu-id="b06bc-108">This is possible because the signature element contains the hash code of the plain text of every signed part in the message.</span></span> <span data-ttu-id="b06bc-109">Por exemplo, embora o corpo da mensagem é criptografado por padrão, a assinatura não criptografada contém o código hash do corpo da mensagem antes da criptografia.</span><span class="sxs-lookup"><span data-stu-id="b06bc-109">For example, although the message body is encrypted by default, the unencrypted signature contains the hash code of the message body before the encryption.</span></span> <span data-ttu-id="b06bc-110">Se o conjunto de valores possíveis para a parte assinada e criptografada é pequeno, um invasor consiga deduzir o conteúdo examinando o valor de hash.</span><span class="sxs-lookup"><span data-stu-id="b06bc-110">If the set of possible values for the signed and encrypted part is small, an attacker might be able to deduce the contents by looking at the hash value.</span></span> <span data-ttu-id="b06bc-111">Criptografando a assinatura atenua esse vetor de ataque.</span><span class="sxs-lookup"><span data-stu-id="b06bc-111">Encrypting the signature mitigates this attack vector.</span></span>  
  
 <span data-ttu-id="b06bc-112">Portanto, desabilite a criptografia da assinatura somente quando o valor do conteúdo for baixo ou o conjunto de valores possíveis de conteúdo é grande e não determinísticas, e o ganho de desempenho mais importante do que como reduzir o ataque descrito acima.</span><span class="sxs-lookup"><span data-stu-id="b06bc-112">Therefore, disable encryption of the signature only when the value of the content is low or the set of possible content values is large and nondeterministic, and the performance gain is more important than mitigating the attack described above.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b06bc-113">Se não houver nada na mensagem que é criptografada, o elemento de assinatura não é criptografado, mesmo quando o <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> ou <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> está definida como <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span><span class="sxs-lookup"><span data-stu-id="b06bc-113">If there is nothing in the message that is encrypted, the signature element is not encrypted, even when the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="b06bc-114">Esse comportamento ocorre mesmo com associações fornecidas pelo sistema; todas as associações fornecidas pelo sistema que a ordem de proteção de mensagem definida como `SignBeforeEncryptAndEncryptSignature`.</span><span class="sxs-lookup"><span data-stu-id="b06bc-114">This behavior occurs even with system-provided bindings; all system-provided bindings have the message protection order set to `SignBeforeEncryptAndEncryptSignature`.</span></span> <span data-ttu-id="b06bc-115">No entanto, o WSDL Web Services Description Language () WCF gera a será ainda contêm o `<sp:EncryptSignature>` asserção.</span><span class="sxs-lookup"><span data-stu-id="b06bc-115">However, the Web Services Description Language (WSDL) WCF generates will still contain the `<sp:EncryptSignature>` assertion.</span></span>  
  
### <a name="to-disable-digital-signing"></a><span data-ttu-id="b06bc-116">Para desabilitar a assinatura digital</span><span class="sxs-lookup"><span data-stu-id="b06bc-116">To disable digital signing</span></span>  
  
1.  <span data-ttu-id="b06bc-117">Criará um <xref:System.ServiceModel.Channels.CustomBinding>.</span><span class="sxs-lookup"><span data-stu-id="b06bc-117">Create a <xref:System.ServiceModel.Channels.CustomBinding>.</span></span> <span data-ttu-id="b06bc-118">Para obter mais informações, consulte [como: criar um personalizado de associação usando o SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span><span class="sxs-lookup"><span data-stu-id="b06bc-118">For more information, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span></span>  
  
2.  <span data-ttu-id="b06bc-119">Adicione um <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> ou <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> à coleção de associação.</span><span class="sxs-lookup"><span data-stu-id="b06bc-119">Add either an <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the binding collection.</span></span>  
  
3.  <span data-ttu-id="b06bc-120">Definir o <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> propriedade <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, ou defina o <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> propriedade para <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.</span><span class="sxs-lookup"><span data-stu-id="b06bc-120">Set the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, or set the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b06bc-121">Consulte também</span><span class="sxs-lookup"><span data-stu-id="b06bc-121">See Also</span></span>  
 [<span data-ttu-id="b06bc-122">Recursos de segurança com associações personalizadas</span><span class="sxs-lookup"><span data-stu-id="b06bc-122">Security Capabilities with Custom Bindings</span></span>](../../../../docs/framework/wcf/feature-details/security-capabilities-with-custom-bindings.md)
