---
title: "Mensagens em fila da solução de problemas"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a5f2836f-018d-42f5-a571-1e97e64ea5b0
caps.latest.revision: "19"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: a23dd402cdc12cd20ce7273a96df056aeda71ceb
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/02/2017
---
# <a name="troubleshooting-queued-messaging"></a><span data-ttu-id="9e839-102">Mensagens em fila da solução de problemas</span><span class="sxs-lookup"><span data-stu-id="9e839-102">Troubleshooting Queued Messaging</span></span>
<span data-ttu-id="9e839-103">Esta seção contém perguntas comuns e resolução de problemas para usar filas em [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9e839-103">This section contains common questions and troubleshooting help for using queues in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span></span>  
  
## <a name="common-questions"></a><span data-ttu-id="9e839-104">Perguntas comuns</span><span class="sxs-lookup"><span data-stu-id="9e839-104">Common Questions</span></span>  
 <span data-ttu-id="9e839-105">**P:** usei [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Beta 1 e instalou o hotfix do MSMQ.</span><span class="sxs-lookup"><span data-stu-id="9e839-105">**Q:** I used [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Beta 1 and I installed the MSMQ hotfix.</span></span> <span data-ttu-id="9e839-106">É necessário remover o hotfix?</span><span class="sxs-lookup"><span data-stu-id="9e839-106">Do I need to remove the hotfix?</span></span>  
  
 <span data-ttu-id="9e839-107">**R:** Sim.</span><span class="sxs-lookup"><span data-stu-id="9e839-107">**A:** Yes.</span></span> <span data-ttu-id="9e839-108">Esse hotfix não é mais suportado.</span><span class="sxs-lookup"><span data-stu-id="9e839-108">This hotfix is no longer supported.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="9e839-109">agora funciona com MSMQ sem um requisito de hotfix.</span><span class="sxs-lookup"><span data-stu-id="9e839-109"> now works on MSMQ without a hotfix requirement.</span></span>  
  
 <span data-ttu-id="9e839-110">**P:** há duas associações para o MSMQ: <xref:System.ServiceModel.NetMsmqBinding> e <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="9e839-110">**Q:** There are two bindings for MSMQ: <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span> <span data-ttu-id="9e839-111">O que devo usar e quando?</span><span class="sxs-lookup"><span data-stu-id="9e839-111">What should I use and when?</span></span>  
  
 <span data-ttu-id="9e839-112">**R:** usar o <xref:System.ServiceModel.NetMsmqBinding> quando você quiser usar o MSMQ como um transporte para comunicação em fila entre dois [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplicativos.</span><span class="sxs-lookup"><span data-stu-id="9e839-112">**A:** Use the <xref:System.ServiceModel.NetMsmqBinding> when you want to use MSMQ as a transport for queued communication between two [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications.</span></span> <span data-ttu-id="9e839-113">Use o <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> quando quiser usar os aplicativos existentes do MSMQ para se comunicar com o novo [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplicativos.</span><span class="sxs-lookup"><span data-stu-id="9e839-113">Use the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> when you want to use existing MSMQ applications to communicate with new [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications.</span></span>  
  
 <span data-ttu-id="9e839-114">**P:** é necessário atualizar o MSMQ para usar o <xref:System.ServiceModel.NetMsmqBinding> e `MsmqIntegration` associações?</span><span class="sxs-lookup"><span data-stu-id="9e839-114">**Q:** Do I have to upgrade MSMQ to use the <xref:System.ServiceModel.NetMsmqBinding> and `MsmqIntegration` bindings?</span></span>  
  
 <span data-ttu-id="9e839-115">**R:** não.</span><span class="sxs-lookup"><span data-stu-id="9e839-115">**A:** No.</span></span> <span data-ttu-id="9e839-116">Ambas as associações de trabalhar com MSMQ 3.0 em [!INCLUDE[wxp](../../../../includes/wxp-md.md)] e [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9e839-116">Both bindings work with MSMQ 3.0 on [!INCLUDE[wxp](../../../../includes/wxp-md.md)] and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)].</span></span> <span data-ttu-id="9e839-117">Determinados recursos de associação ficam disponíveis quando você atualizar para o MSMQ 4.0 em [!INCLUDE[wv](../../../../includes/wv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9e839-117">Certain features of the bindings become available when you upgrade to MSMQ 4.0 in [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span>  
  
 <span data-ttu-id="9e839-118">**P:** quais recursos do <xref:System.ServiceModel.NetMsmqBinding> e <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> associações estão disponíveis no MSMQ 4.0, mas não no MSMQ 3.0?</span><span class="sxs-lookup"><span data-stu-id="9e839-118">**Q:** What features of the <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> bindings are available in MSMQ 4.0 but not in MSMQ 3.0?</span></span>  
  
 <span data-ttu-id="9e839-119">**R:** os recursos a seguir estão disponíveis no MSMQ 4.0, mas não no MSMQ 3.0:</span><span class="sxs-lookup"><span data-stu-id="9e839-119">**A:** The following features are available in MSMQ 4.0 but not in MSMQ 3.0:</span></span>  
  
-   <span data-ttu-id="9e839-120">Fila de mensagens mortas personalizada é suportada somente no MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="9e839-120">Custom dead-letter queue is supported only on MSMQ 4.0.</span></span>  
  
-   <span data-ttu-id="9e839-121">MSMQ 3.0 e 4.0 tratar mensagens suspeitas de maneira diferente.</span><span class="sxs-lookup"><span data-stu-id="9e839-121">MSMQ 3.0 and 4.0 handle poison messages differently.</span></span>  
  
-   <span data-ttu-id="9e839-122">Somente o MSMQ 4.0 oferece suporte à leitura transacionada remota.</span><span class="sxs-lookup"><span data-stu-id="9e839-122">Only MSMQ 4.0 supports remote transacted read.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="9e839-123">[Diferenças nos recursos de enfileiramento de mensagens no Windows Vista, Windows Server 2003 e Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span><span class="sxs-lookup"><span data-stu-id="9e839-123"> [Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span></span>  
  
 <span data-ttu-id="9e839-124">**P:** possível usar o MSMQ 3.0 em um lado de uma comunicação em fila e MSMQ 4.0 no outro lado?</span><span class="sxs-lookup"><span data-stu-id="9e839-124">**Q:** Can I use MSMQ 3.0 on one side of a queued communication and MSMQ 4.0 on the other side?</span></span>  
  
 <span data-ttu-id="9e839-125">**R:** Sim.</span><span class="sxs-lookup"><span data-stu-id="9e839-125">**A:** Yes.</span></span>  
  
 <span data-ttu-id="9e839-126">**P:** deseja integrar os aplicativos existentes do MSMQ com novos [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] clientes ou servidores.</span><span class="sxs-lookup"><span data-stu-id="9e839-126">**Q:** I want to integrate existing MSMQ applications with new [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] clients or servers.</span></span> <span data-ttu-id="9e839-127">É necessário atualizar os dois lados da minha infra-estrutura MSMQ?</span><span class="sxs-lookup"><span data-stu-id="9e839-127">Do I need to upgrade both sides of my MSMQ infrastructure?</span></span>  
  
 <span data-ttu-id="9e839-128">**R:** não.</span><span class="sxs-lookup"><span data-stu-id="9e839-128">**A:** No.</span></span> <span data-ttu-id="9e839-129">Você não precisa atualizar para o MSMQ 4.0 em ambos os lados.</span><span class="sxs-lookup"><span data-stu-id="9e839-129">You do not have to upgrade to MSMQ 4.0 on either side.</span></span>  
  
## <a name="troubleshooting"></a><span data-ttu-id="9e839-130">Solução de problemas</span><span class="sxs-lookup"><span data-stu-id="9e839-130">Troubleshooting</span></span>  
 <span data-ttu-id="9e839-131">Esta seção contém as respostas para os problemas mais comuns.</span><span class="sxs-lookup"><span data-stu-id="9e839-131">This section contains answers to most common troubleshooting issues.</span></span> <span data-ttu-id="9e839-132">Alguns problemas conhecidos limitações também estão descritos nas notas de versão.</span><span class="sxs-lookup"><span data-stu-id="9e839-132">Some issues that are known limitations are also described in the release notes.</span></span>  
  
 <span data-ttu-id="9e839-133">**P:** estou tentando usar uma fila particular e recebo a seguinte exceção: `System.InvalidOperationException`: A URL é inválida.</span><span class="sxs-lookup"><span data-stu-id="9e839-133">**Q:** I am trying to use a private queue and I get the following exception: `System.InvalidOperationException`: The URL is invalid.</span></span> <span data-ttu-id="9e839-134">A URL para a fila não pode conter o caractere '$'.</span><span class="sxs-lookup"><span data-stu-id="9e839-134">The URL for the queue cannot contain the '$' character.</span></span> <span data-ttu-id="9e839-135">Use a sintaxe no MSMQ: //machine/private/queueName para endereçar uma fila particular.</span><span class="sxs-lookup"><span data-stu-id="9e839-135">Use the syntax in net.msmq://machine/private/queueName to address a private queue.</span></span>  
  
 <span data-ttu-id="9e839-136">**R:** Verifique se a fila de identificador de recurso uniforme (URI) em sua configuração e seu código.</span><span class="sxs-lookup"><span data-stu-id="9e839-136">**A:** Please check the queue Uniform Resource Identifier (URI) in your configuration and code.</span></span> <span data-ttu-id="9e839-137">Não use o caractere "$" no URI.</span><span class="sxs-lookup"><span data-stu-id="9e839-137">Do not use the "$" character in the URI.</span></span> <span data-ttu-id="9e839-138">Por exemplo, para atender a uma fila particular chamada OrdersQueue, especifique o URI como net.msmq://localhost/private/ordersQueue.</span><span class="sxs-lookup"><span data-stu-id="9e839-138">For example, to address a private queue named OrdersQueue, specify the URI as net.msmq://localhost/private/ordersQueue.</span></span>  
  
 <span data-ttu-id="9e839-139">**P:** chamando `ServiceHost.Open()` em meu aplicativo enfileirado gera a seguinte exceção: `System.ArgumentException`: um endereço base não pode conter uma cadeia de caracteres de consulta URI.</span><span class="sxs-lookup"><span data-stu-id="9e839-139">**Q:** Calling `ServiceHost.Open()` on my queued application throws the following exception: `System.ArgumentException`: A base address cannot contain a URI query string.</span></span> <span data-ttu-id="9e839-140">Por quê?</span><span class="sxs-lookup"><span data-stu-id="9e839-140">Why?</span></span>  
  
 <span data-ttu-id="9e839-141">**R:** Verifique a fila de URI em seu arquivo de configuração em seu código.</span><span class="sxs-lookup"><span data-stu-id="9e839-141">**A:** Check the queue URI in your configuration file and in your code.</span></span> <span data-ttu-id="9e839-142">Enquanto as filas do MSMQ suportam o uso do '?' caractere, URIs interpretar esse caractere como o início de uma consulta de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="9e839-142">While MSMQ queues support the use of the '?' character, URIs interpret this character as the beginning of a string query.</span></span> <span data-ttu-id="9e839-143">Para evitar esse problema, use nomes de filas que não contêm '?' caracteres.</span><span class="sxs-lookup"><span data-stu-id="9e839-143">To avoid this issue, use queue names that do not contain '?' characters.</span></span>  
  
 <span data-ttu-id="9e839-144">**P:** meu envio foi bem-sucedida, mas nenhuma operação de serviço é invocada no receptor.</span><span class="sxs-lookup"><span data-stu-id="9e839-144">**Q:** My send succeeded but no service operation is invoked on the receiver.</span></span> <span data-ttu-id="9e839-145">Por quê?</span><span class="sxs-lookup"><span data-stu-id="9e839-145">Why?</span></span>  
  
 <span data-ttu-id="9e839-146">**R:** para determinar a resposta, examine a lista de verificação a seguir:</span><span class="sxs-lookup"><span data-stu-id="9e839-146">**A:** To determine the answer, work through the following check list:</span></span>  
  
-   <span data-ttu-id="9e839-147">Verifique se os requisitos de fila transacional são compatíveis com as garantias especificadas.</span><span class="sxs-lookup"><span data-stu-id="9e839-147">Check that the transactional queue requirements are compatible with the assurances specified.</span></span> <span data-ttu-id="9e839-148">Observe os seguintes princípios:</span><span class="sxs-lookup"><span data-stu-id="9e839-148">Note the following principles:</span></span>  
  
    -   <span data-ttu-id="9e839-149">Você pode enviar mensagens duráveis (datagramas e sessões) com "exatamente uma vez" garantias (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`) apenas para uma fila transacional.</span><span class="sxs-lookup"><span data-stu-id="9e839-149">You can send durable messages (datagrams and sessions) with "exactly once" assurances (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`) only to a transactional queue.</span></span>  
  
    -   <span data-ttu-id="9e839-150">Você pode enviar sessões somente com garantia "exatamente uma vez".</span><span class="sxs-lookup"><span data-stu-id="9e839-150">You can send sessions only with "exactly once" assurances.</span></span>  
  
    -   <span data-ttu-id="9e839-151">Uma transação é necessária para receber mensagens em uma sessão de uma fila transacional.</span><span class="sxs-lookup"><span data-stu-id="9e839-151">A transaction is required to receive messages in a session from a transactional queue.</span></span>  
  
    -   <span data-ttu-id="9e839-152">Você pode enviar ou receber duráveis ou voláteis mensagens (datagramas) com nenhuma garantia (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`) somente a uma fila não transacional.</span><span class="sxs-lookup"><span data-stu-id="9e839-152">You can send or receive volatile or durable messages (datagrams only) with no assurances (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`) only to a non-transactional queue.</span></span>  
  
-   <span data-ttu-id="9e839-153">Verificar a fila de mensagens mortas.</span><span class="sxs-lookup"><span data-stu-id="9e839-153">Check the dead-letter queue.</span></span> <span data-ttu-id="9e839-154">Se você encontrar mensagens lá, determine por que eles não foram entregues.</span><span class="sxs-lookup"><span data-stu-id="9e839-154">If you find the messages there, determine why they were not delivered.</span></span>  
  
-   <span data-ttu-id="9e839-155">Verifique se as filas de saída para tratar de problemas ou de conectividade.</span><span class="sxs-lookup"><span data-stu-id="9e839-155">Check the outgoing queues for connectivity or addressing problems.</span></span>  
  
 <span data-ttu-id="9e839-156">**P:** especificou uma fila de mensagens mortas personalizada, mas ao iniciar o aplicativo de remetente, obtenho uma exceção de que a fila de mensagens mortas não foi encontrada ou o aplicativo de envio não tem permissão para a fila de mensagens mortas.</span><span class="sxs-lookup"><span data-stu-id="9e839-156">**Q:** I have specified a custom dead-letter queue, but when I start the sender application, I get an exception that either the dead-letter queue is not found, or the sending application has no permission to the dead-letter queue.</span></span> <span data-ttu-id="9e839-157">Por que é isso estiver acontecendo?</span><span class="sxs-lookup"><span data-stu-id="9e839-157">Why is this happening?</span></span>  
  
 <span data-ttu-id="9e839-158">**R:** a fila de mensagens mortas personalizada URI deve incluir "localhost" ou o nome do computador no primeiro segmento, por exemplo, net.msmq://localhost/private/myAppdead-letter fila.</span><span class="sxs-lookup"><span data-stu-id="9e839-158">**A:** The custom dead-letter queue URI must include a "localhost" or the computer name in the first segment, for example, net.msmq://localhost/private/myAppdead-letter queue.</span></span>  
  
 <span data-ttu-id="9e839-159">**P:** é sempre necessário definir uma fila de mensagens mortas personalizada, ou há uma fila de mensagens mortas padrão?</span><span class="sxs-lookup"><span data-stu-id="9e839-159">**Q:** Is it always necessary to define a custom dead-letter queue, or is there a default dead-letter queue?</span></span>  
  
 <span data-ttu-id="9e839-160">**R:** se garantias são "exatamente uma vez" (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`), e se você não especificar uma fila de mensagens mortas personalizada, o padrão é uma fila de mensagens mortas transacional de todo o sistema.</span><span class="sxs-lookup"><span data-stu-id="9e839-160">**A:** If assurances are "exactly once" (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`), and if you do not specify a custom dead-letter queue, the default is a system-wide transactional dead-letter queue.</span></span>  
  
 <span data-ttu-id="9e839-161">Se garantias são none (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`), em seguida, o padrão não é nenhuma funcionalidade de fila de mensagens mortas.</span><span class="sxs-lookup"><span data-stu-id="9e839-161">If assurances are none (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`), then the default is no dead-letter queue functionality.</span></span>  
  
 <span data-ttu-id="9e839-162">**P:** meu lança serviço em SvcHost.Open com uma mensagem "EndpointListener requisitos não podem ser atendidos pelo ListenerFactory".</span><span class="sxs-lookup"><span data-stu-id="9e839-162">**Q:** My service throws on SvcHost.Open with a message "EndpointListener requirements cannot be met by the ListenerFactory".</span></span> <span data-ttu-id="9e839-163">Por quê?</span><span class="sxs-lookup"><span data-stu-id="9e839-163">Why?</span></span>  
  
 <span data-ttu-id="9e839-164">R.</span><span class="sxs-lookup"><span data-stu-id="9e839-164">A.</span></span> <span data-ttu-id="9e839-165">Verifique seu contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="9e839-165">Check your service contract.</span></span> <span data-ttu-id="9e839-166">Você pode ter esquecido de colocar "IsOneWay =`true`" em todas as operações de serviço.</span><span class="sxs-lookup"><span data-stu-id="9e839-166">You may have forgotten to put "IsOneWay=`true`" on all the service operations.</span></span> <span data-ttu-id="9e839-167">As filas oferecem suporte somente a operações de serviço unidirecional.</span><span class="sxs-lookup"><span data-stu-id="9e839-167">Queues support only one-way service operations.</span></span>  
  
 <span data-ttu-id="9e839-168">**P:** há mensagens na fila, mas nenhuma operação de serviço é invocada.</span><span class="sxs-lookup"><span data-stu-id="9e839-168">**Q:** There are messages in the queue but no service operation is invoked.</span></span> <span data-ttu-id="9e839-169">Qual é o problema?</span><span class="sxs-lookup"><span data-stu-id="9e839-169">What is the problem?</span></span>  
  
 <span data-ttu-id="9e839-170">**R:** determinar se o host de serviço está com defeito.</span><span class="sxs-lookup"><span data-stu-id="9e839-170">**A:** Determine if your service host is faulted.</span></span> <span data-ttu-id="9e839-171">Você pode verificar, olhando para o rastreamento de ou implementar `IErrorHandler`.</span><span class="sxs-lookup"><span data-stu-id="9e839-171">You can check by looking at the trace or implementing `IErrorHandler`.</span></span> <span data-ttu-id="9e839-172">Falhas de host de serviço, por padrão, se uma mensagem suspeita é detectada.</span><span class="sxs-lookup"><span data-stu-id="9e839-172">Service host faults, by default, if a poison message is detected.</span></span>  
  
 <span data-ttu-id="9e839-173">**P:** há mensagens na fila, mas não está obtendo habilitado meu serviço na fila hospedado na Web.</span><span class="sxs-lookup"><span data-stu-id="9e839-173">**Q:** There are messages in the queue but my Web-hosted queued service is not getting activated.</span></span> <span data-ttu-id="9e839-174">Por quê?</span><span class="sxs-lookup"><span data-stu-id="9e839-174">Why?</span></span>  
  
 <span data-ttu-id="9e839-175">**R:** o motivo mais comum é permissões.</span><span class="sxs-lookup"><span data-stu-id="9e839-175">**A:** The most common reason is permissions.</span></span>  
  
1.  <span data-ttu-id="9e839-176">Certifique-se de que o `NetMsmqActivator` processo está sendo executado e a identidade do `NetMsmqActivator` processo recebe leitura e busca de permissão na fila.</span><span class="sxs-lookup"><span data-stu-id="9e839-176">Ensure that the `NetMsmqActivator` process is running and the identity of the `NetMsmqActivator` process is given read and seek permission on the queue.</span></span>  
  
2.  <span data-ttu-id="9e839-177">Se o `NetMsmqActivator` está monitorando filas em um computador remoto, certifique-se de que `NetMsmqActivator` não é executado em um token restrito.</span><span class="sxs-lookup"><span data-stu-id="9e839-177">If the `NetMsmqActivator` is monitoring queues on a remote machine, ensure that `NetMsmqActivator` does not run under a restricted token.</span></span> <span data-ttu-id="9e839-178">Para executar o `NetMsmqActivator` com um token irrestrito:</span><span class="sxs-lookup"><span data-stu-id="9e839-178">To run the `NetMsmqActivator` with an unrestricted token:</span></span>  
  
    ```  
    sc sidtype NetMsmqActivator unrestricted  
    ```  
  
 <span data-ttu-id="9e839-179">Para problemas de host da Web relacionados não são de segurança, consulte: [Web hospeda um aplicativo em fila](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md).</span><span class="sxs-lookup"><span data-stu-id="9e839-179">For non-security related Web host issues refer to: [Web Hosting a Queued Application](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md).</span></span>  
  
 <span data-ttu-id="9e839-180">**P:** qual é a maneira mais fácil para sessões de acesso?</span><span class="sxs-lookup"><span data-stu-id="9e839-180">**Q:** What is the easiest way to access sessions?</span></span>  
  
 <span data-ttu-id="9e839-181">**R:** definir AutoCompletar =`true` a operação que corresponde à última mensagem na sessão e defina o preenchimento automático =`false` em todas as operações de serviço restantes.</span><span class="sxs-lookup"><span data-stu-id="9e839-181">**A:** Set AutoComplete=`true` on the operation that corresponds to the last message in the session, and set AutoComplete=`false` on all remaining service operations.</span></span>  
  
 <span data-ttu-id="9e839-182">**P:** onde posso encontrar respostas para perguntas comuns sobre o MSMQ?</span><span class="sxs-lookup"><span data-stu-id="9e839-182">**Q:** Where can I find answers to common questions on MSMQ?</span></span>  
  
 <span data-ttu-id="9e839-183">**R:** [!INCLUDE[crabout](../../../../includes/crabout-md.md)] MSMQ, consulte [Microsoft Message Queuing](http://go.microsoft.com/fwlink/?LinkId=87810).</span><span class="sxs-lookup"><span data-stu-id="9e839-183">**A:** [!INCLUDE[crabout](../../../../includes/crabout-md.md)] MSMQ, see [Microsoft Message Queuing](http://go.microsoft.com/fwlink/?LinkId=87810).</span></span>  
  
 <span data-ttu-id="9e839-184">**P:** por que meu serviço lançar um `ProtocolException` quando ao ler de uma fila que contém mensagens de sessão em fila e datagrama mensagens em fila?</span><span class="sxs-lookup"><span data-stu-id="9e839-184">**Q:** Why does my service throw a `ProtocolException` when reading from a queue that contains both queued session messages and queued datagram messages?</span></span>  
  
 <span data-ttu-id="9e839-185">**R:** há uma diferença fundamental nas mensagens de sessão em forma de fila e mensagens na fila de datagrama são compostas.</span><span class="sxs-lookup"><span data-stu-id="9e839-185">**A:** There is a fundamental difference in the way queued session messages and queued datagram messages are composed.</span></span> <span data-ttu-id="9e839-186">Por isso, um serviço que está esperando para ler uma mensagem na fila de sessão não pode receber uma mensagem de datagrama em fila e um serviço que espera ler uma mensagem de datagrama na fila não pode receber uma mensagem de sessão.</span><span class="sxs-lookup"><span data-stu-id="9e839-186">Because of this, a service that is expecting to read a queued session message cannot receive a queued datagram message and a service expecting to read a queued datagram message cannot receive a session message.</span></span> <span data-ttu-id="9e839-187">Ao tentar ler os dois tipos de mensagens da mesma fila gera a seguinte exceção:</span><span class="sxs-lookup"><span data-stu-id="9e839-187">Attempting to read both types of messages from the same queue throws the following exception:</span></span>  
  
```  
System.ServiceModel.MsmqPoisonMessageException: The transport channel detected a poison message. This occurred because the message exceeded the maximum number of delivery attempts or because the channel detected a fundamental problem with the message. The inner exception may contain additional information.   
---> System.ServiceModel.ProtocolException: An incoming MSMQ message contained invalid or unexpected .NET Message Framing information in its body. The message cannot be received. Ensure that the sender is using a compatible service contract with a matching SessionMode.  
```  
  
 <span data-ttu-id="9e839-188">A fila de mensagens mortas de sistema, bem como qualquer fila de mensagens mortas personalizada, é particularmente suscetível a esse problema se um aplicativo envia mensagens de sessão em fila tanto na fila de mensagens de datagrama do mesmo computador.</span><span class="sxs-lookup"><span data-stu-id="9e839-188">The system dead-letter queue, as well as any custom dead-letter queue, is particularly susceptible to this issue if an application sends both queued session messages and queued datagram messages from the same computer.</span></span> <span data-ttu-id="9e839-189">Se uma mensagem não pode ser enviada com êxito, ele é movido para a fila de mensagens mortas.</span><span class="sxs-lookup"><span data-stu-id="9e839-189">If a message cannot be sent successfully, it is moved to the dead-letter queue.</span></span> <span data-ttu-id="9e839-190">Sob essas circunstâncias, é possível ter sessão e datagrama mensagens na fila de mensagens mortas.</span><span class="sxs-lookup"><span data-stu-id="9e839-190">Under these circumstances, it is possible to have both session and datagram messages in the dead-letter queue.</span></span> <span data-ttu-id="9e839-191">Não é possível separar os dois tipos de mensagens em tempo de execução durante a leitura de uma fila, portanto, aplicativos não devem enviar mensagens de sessão em fila tanto na fila de mensagens de datagrama do mesmo computador.</span><span class="sxs-lookup"><span data-stu-id="9e839-191">There is no way to separate both types of messages at runtime when reading from a queue, therefore, applications should not send both queued session messages and queued datagram messages from the same computer.</span></span>  
  
### <a name="msmq-integration-specific-troubleshooting"></a><span data-ttu-id="9e839-192">Integração de MSMQ: Solução de problemas específicos</span><span class="sxs-lookup"><span data-stu-id="9e839-192">MSMQ Integration: Specific Troubleshooting</span></span>  
 <span data-ttu-id="9e839-193">**P:** quando enviar uma mensagem, ou ao abrir o host de serviço, recebo um erro que indica o esquema está errado.</span><span class="sxs-lookup"><span data-stu-id="9e839-193">**Q:** When I send a message, or when I open the service host, I get an error that indicates the scheme is wrong.</span></span> <span data-ttu-id="9e839-194">Por quê?</span><span class="sxs-lookup"><span data-stu-id="9e839-194">Why?</span></span>  
  
 <span data-ttu-id="9e839-195">**R:** quando você usa a associação de integração do MSMQ, você deve usar o esquema FormatName.</span><span class="sxs-lookup"><span data-stu-id="9e839-195">**A:** When you use the MSMQ integration binding, you must use the msmq.formatname scheme.</span></span> <span data-ttu-id="9e839-196">Por exemplo, msmq.formatname:DIRECT=OS:.\private$\OrdersQueue.</span><span class="sxs-lookup"><span data-stu-id="9e839-196">For example, msmq.formatname:DIRECT=OS:.\private$\OrdersQueue.</span></span> <span data-ttu-id="9e839-197">Mas quando você especifica a fila de mensagens mortas personalizada, você deve usar o esquema NET. MSMQ.</span><span class="sxs-lookup"><span data-stu-id="9e839-197">But when you specify the custom dead-letter queue, you must use the net.msmq scheme.</span></span>  
  
 <span data-ttu-id="9e839-198">**P:** ao uso de um nome de formato público ou privado e abrir o host de serviço no [!INCLUDE[wv](../../../../includes/wv-md.md)], recebo um erro.</span><span class="sxs-lookup"><span data-stu-id="9e839-198">**Q:** When I use a public or private format name and open the service host on [!INCLUDE[wv](../../../../includes/wv-md.md)], I get an error.</span></span> <span data-ttu-id="9e839-199">Por quê?</span><span class="sxs-lookup"><span data-stu-id="9e839-199">Why?</span></span>  
  
 <span data-ttu-id="9e839-200">**R:** o [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] canal de integração em [!INCLUDE[wv](../../../../includes/wv-md.md)] verifica se uma fila sub pode ser aberta para a fila principal do aplicativo para tratar mensagens suspeitas.</span><span class="sxs-lookup"><span data-stu-id="9e839-200">**A:** The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] integration channel on [!INCLUDE[wv](../../../../includes/wv-md.md)] checks to see if a sub-queue can be opened for the main application queue for handling poison messages.</span></span> <span data-ttu-id="9e839-201">O nome de subfila é derivado de um FormatName que URI passado para o ouvinte.</span><span class="sxs-lookup"><span data-stu-id="9e839-201">The sub-queue name is derived from an msmq.formatname URI passed to the listener.</span></span> <span data-ttu-id="9e839-202">O nome de subfila no MSMQ só pode ser um nome de formato direto.</span><span class="sxs-lookup"><span data-stu-id="9e839-202">The sub-queue name in MSMQ can only be a direct format name.</span></span> <span data-ttu-id="9e839-203">Portanto, você verá o erro.</span><span class="sxs-lookup"><span data-stu-id="9e839-203">So you see the error.</span></span> <span data-ttu-id="9e839-204">Altere o URI da fila para um nome de formato direto.</span><span class="sxs-lookup"><span data-stu-id="9e839-204">Change the queue URI to a direct format name.</span></span>  
  
 <span data-ttu-id="9e839-205">**P:** quando receber uma mensagem de um aplicativo do MSMQ, a mensagem se encontra na fila e não é lido pelo recebimento [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9e839-205">**Q:** When receiving a message from an MSMQ application, the message sits in the queue and is not read by the receiving [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application.</span></span> <span data-ttu-id="9e839-206">Por quê?</span><span class="sxs-lookup"><span data-stu-id="9e839-206">Why?</span></span>  
  
 <span data-ttu-id="9e839-207">**R:** Verifique se a mensagem tem um corpo.</span><span class="sxs-lookup"><span data-stu-id="9e839-207">**A:** Check to see whether the message has a body.</span></span> <span data-ttu-id="9e839-208">Se a mensagem não tem nenhum corpo, o canal de integração do MSMQ ignora a mensagem.</span><span class="sxs-lookup"><span data-stu-id="9e839-208">If the message has no body, the MSMQ integration channel ignores the message.</span></span> <span data-ttu-id="9e839-209">Implementar `IErrorHandler` para ser notificado de exceções e verificar os rastreamentos.</span><span class="sxs-lookup"><span data-stu-id="9e839-209">Implement `IErrorHandler` to be notified of exceptions and check the traces.</span></span>  
  
### <a name="security-related-troubleshooting"></a><span data-ttu-id="9e839-210">Solução de problemas relacionados à segurança</span><span class="sxs-lookup"><span data-stu-id="9e839-210">Security-Related Troubleshooting</span></span>  
 <span data-ttu-id="9e839-211">**P:** ao executar o exemplo que usa uma associação padrão no modo de grupo de trabalho, mensagens parecerão sejam enviados, mas nunca são recebidas pelo destinatário.</span><span class="sxs-lookup"><span data-stu-id="9e839-211">**Q:** When I run the sample that uses a default binding in workgroup mode, messages seem to get sent but are never received by the receiver.</span></span>  
  
 <span data-ttu-id="9e839-212">**R:** por padrão, as mensagens são assinadas usando um certificado interno do MSMQ que requer que o serviço de diretório do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9e839-212">**A:** By default, messages are signed using an MSMQ internal certificate that requires the Active Directory directory service.</span></span> <span data-ttu-id="9e839-213">No modo de grupo de trabalho, como o Active Directory não estiver disponível, a mensagem de assinatura falha.</span><span class="sxs-lookup"><span data-stu-id="9e839-213">In workgroup mode, because Active Directory is not available, signing the message fails.</span></span> <span data-ttu-id="9e839-214">Portanto, a mensagem chega na fila de mensagens mortas e causa da falha, como "Assinatura incorreta", é indicada.</span><span class="sxs-lookup"><span data-stu-id="9e839-214">So the message lands in the dead-letter queue and failure cause, such as "Bad signature", is indicated.</span></span>  
  
 <span data-ttu-id="9e839-215">A solução é desativar a segurança.</span><span class="sxs-lookup"><span data-stu-id="9e839-215">The workaround is to turn off security.</span></span> <span data-ttu-id="9e839-216">Isso é feito definindo <xref:System.ServiceModel.NetMsmqSecurity.Mode%2A>  =  <xref:System.ServiceModel.NetMsmqSecurityMode.None> para funcionar no modo de grupo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="9e839-216">This is done by setting <xref:System.ServiceModel.NetMsmqSecurity.Mode%2A> = <xref:System.ServiceModel.NetMsmqSecurityMode.None> to make it work in workgroup mode.</span></span>  
  
 <span data-ttu-id="9e839-217">Outra solução alternativa é obter o <xref:System.ServiceModel.MsmqTransportSecurity> do <xref:System.ServiceModel.NetMsmqSecurity.Transport%2A> propriedade e defina-a como <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>e defina o certificado de cliente.</span><span class="sxs-lookup"><span data-stu-id="9e839-217">Another workaround is to get the <xref:System.ServiceModel.MsmqTransportSecurity> from the <xref:System.ServiceModel.NetMsmqSecurity.Transport%2A> property and set it to <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, and set the client certificate.</span></span>  
  
 <span data-ttu-id="9e839-218">Outra solução alternativa é instalar o MSMQ com a integração do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9e839-218">Yet another workaround is to install MSMQ with Active Directory integration.</span></span>  
  
 <span data-ttu-id="9e839-219">**P:** quando enviar uma mensagem com associação padrão (ativada de segurança de transporte) no Active Directory para uma fila, recebo uma mensagem de "certificado interno não encontrado".</span><span class="sxs-lookup"><span data-stu-id="9e839-219">**Q:** When I send a message with default binding (transport security turned on) in Active Directory to a queue, I get an "internal certificate not found" message.</span></span> <span data-ttu-id="9e839-220">Como corrigir isso?</span><span class="sxs-lookup"><span data-stu-id="9e839-220">How do I fix this?</span></span>  
  
 <span data-ttu-id="9e839-221">**R:** isso significa que o certificado no Active Directory para o remetente deve ser renovado.</span><span class="sxs-lookup"><span data-stu-id="9e839-221">**A:** This means that the certificate in Active Directory for the sender must be renewed.</span></span> <span data-ttu-id="9e839-222">Para fazer isso, abra **painel de controle**, **ferramentas administrativas**, **gerenciamento do computador**, clique com botão direito **MSMQ**e selecione **Propriedades**.</span><span class="sxs-lookup"><span data-stu-id="9e839-222">To do so, open **Control Panel**, **Administrative Tools**, **Computer Management**, right-click **MSMQ**, and select **Properties**.</span></span> <span data-ttu-id="9e839-223">Selecione o **certificado de usuário** guia e clique no **renovar** botão.</span><span class="sxs-lookup"><span data-stu-id="9e839-223">Select the **User Certificate** tab and click the **Renew** button.</span></span>  
  
 <span data-ttu-id="9e839-224">**P:** quando posso enviar uma mensagem usando <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> e especificar o certificado a ser usado, recebo uma mensagem de "Certificado inválido".</span><span class="sxs-lookup"><span data-stu-id="9e839-224">**Q:** When I send a message using <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and specify the certificate to use, I get an "Invalid certificate" message.</span></span> <span data-ttu-id="9e839-225">Como corrigir isso?</span><span class="sxs-lookup"><span data-stu-id="9e839-225">How do I fix this?</span></span>  
  
 <span data-ttu-id="9e839-226">**R:** não é possível usar um repositório de certificados do computador local com o modo de certificado.</span><span class="sxs-lookup"><span data-stu-id="9e839-226">**A:** You cannot use a local machine certificate store with certificate mode.</span></span> <span data-ttu-id="9e839-227">Você precisa copiar o certificado do repositório de certificados de máquina para o repositório do usuário atual usando o snap-in de certificado.</span><span class="sxs-lookup"><span data-stu-id="9e839-227">You have to copy the certificate from the machine certificate store to the current user store using the Certificate snap-in.</span></span> <span data-ttu-id="9e839-228">Para obter o certificado de snap-in:</span><span class="sxs-lookup"><span data-stu-id="9e839-228">To get the Certificate snap-in:</span></span>  
  
1.  <span data-ttu-id="9e839-229">Clique em **iniciar**, selecione **executar**, tipo `mmc`e clique em **Okey**.</span><span class="sxs-lookup"><span data-stu-id="9e839-229">Click **Start**, select **Run**, type `mmc`, and click **OK**.</span></span>  
  
2.  <span data-ttu-id="9e839-230">No **Console de gerenciamento Microsoft**, abra o **arquivo** menu e selecione **Adicionar/Remover Snap-in**.</span><span class="sxs-lookup"><span data-stu-id="9e839-230">In the **Microsoft Management Console**, open the **File** menu and select **Add/Remove Snap-in**.</span></span>  
  
3.  <span data-ttu-id="9e839-231">No **Adicionar/Remover Snap-in** caixa de diálogo, clique o **adicionar** botão.</span><span class="sxs-lookup"><span data-stu-id="9e839-231">In the **Add/Remove Snap-in** dialog box, click the **Add** button.</span></span>  
  
4.  <span data-ttu-id="9e839-232">No **Adicionar Snap-in Standalone** caixa de diálogo, selecione certificados e clique em **adicionar**.</span><span class="sxs-lookup"><span data-stu-id="9e839-232">In the **Add Standalone Snap-in** dialog box, select Certificates and click **Add**.</span></span>  
  
5.  <span data-ttu-id="9e839-233">No **certificados** caixa de diálogo snap-in, selecione **minha conta de usuário,** e clique em **concluir**.</span><span class="sxs-lookup"><span data-stu-id="9e839-233">In the **Certificates** snap-in dialog box, select **My user account,** and click **Finish**.</span></span>  
  
6.  <span data-ttu-id="9e839-234">Em seguida, adicione um segundo certificados snap-in usando as etapas anteriores, mas desta vez selecione **conta de computador** e clique em **próximo**.</span><span class="sxs-lookup"><span data-stu-id="9e839-234">Next, add a second Certificates snap-in using the previous steps, but this time select **Computer account** and click **Next**.</span></span>  
  
7.  <span data-ttu-id="9e839-235">Selecione **computador Local** e clique em **concluir**.</span><span class="sxs-lookup"><span data-stu-id="9e839-235">Select **Local Computer** and click **Finish**.</span></span> <span data-ttu-id="9e839-236">Agora você pode arrastar e soltar certificados do repositório de certificados de máquina para o armazenamento do usuário atual.</span><span class="sxs-lookup"><span data-stu-id="9e839-236">You can now drag and drop certificates from the machine certificate store to the current user store.</span></span>  
  
 <span data-ttu-id="9e839-237">**P:** ao meu serviço lê uma fila em outro computador no modo de grupo de trabalho, obtenho uma exceção "acesso negado".</span><span class="sxs-lookup"><span data-stu-id="9e839-237">**Q:** When my service reads from a queue on another computer in workgroup mode, I get an "access denied" exception.</span></span>  
  
 <span data-ttu-id="9e839-238">**R:** no modo de grupo de trabalho, para um aplicativo remoto acessar a fila, o aplicativo deve ter permissão para acessar a fila.</span><span class="sxs-lookup"><span data-stu-id="9e839-238">**A:** In workgroup mode, for a remote application to gain access to the queue, the application must have permission to access the queue.</span></span> <span data-ttu-id="9e839-239">Adicionar "Logon anônimo" à lista de controle de acesso (ACL) da fila e dê a ele a permissão de leitura.</span><span class="sxs-lookup"><span data-stu-id="9e839-239">Add "Anonymous login" to the queue's access control list (ACL) and give it read permission.</span></span>  
  
 <span data-ttu-id="9e839-240">**P:** quando um cliente de serviço de rede (ou qualquer cliente que não tem uma conta de domínio) envia uma mensagem na fila, o envio falhará com um certificado inválido.</span><span class="sxs-lookup"><span data-stu-id="9e839-240">**Q:** When a network service client (or any client that does not have a domain account) sends a queued message, the send fails with an invalid certificate.</span></span> <span data-ttu-id="9e839-241">Como corrigir isso?</span><span class="sxs-lookup"><span data-stu-id="9e839-241">How do I fix this?</span></span>  
  
 <span data-ttu-id="9e839-242">**R:** Verifique a configuração de associação.</span><span class="sxs-lookup"><span data-stu-id="9e839-242">**A:** Check the binding configuration.</span></span> <span data-ttu-id="9e839-243">A associação padrão foi ativada para a segurança de transporte MSMQ assinou a mensagem.</span><span class="sxs-lookup"><span data-stu-id="9e839-243">The default binding has MSMQ transport security turned on to sign the message.</span></span> <span data-ttu-id="9e839-244">Desativá-lo.</span><span class="sxs-lookup"><span data-stu-id="9e839-244">Turn it off.</span></span>  
  
### <a name="remote-transacted-receives"></a><span data-ttu-id="9e839-245">Recebe remoto transacionado</span><span class="sxs-lookup"><span data-stu-id="9e839-245">Remote Transacted Receives</span></span>  
 <span data-ttu-id="9e839-246">**P:** que há uma fila em um computador e um [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] que lê mensagens de uma fila no computador B (cenário de recebimento remoto transacionado), as mensagens não são lidas da fila de serviço.</span><span class="sxs-lookup"><span data-stu-id="9e839-246">**Q:** When I have a queue on machine A, and a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service that reads messages from a queue on machine B (the remote transacted receive scenario), messages are not read from the queue.</span></span> <span data-ttu-id="9e839-247">As informações de rastreamento indica o recebimento falhou com a mensagem "transação não pode ser importado."</span><span class="sxs-lookup"><span data-stu-id="9e839-247">Tracing information indicates the receive failed with the message "Transaction cannot be imported."</span></span> <span data-ttu-id="9e839-248">O que fazer para corrigir isso?</span><span class="sxs-lookup"><span data-stu-id="9e839-248">What can I do to fix this?</span></span>  
  
 <span data-ttu-id="9e839-249">**R:** existem três possíveis razões para isso:</span><span class="sxs-lookup"><span data-stu-id="9e839-249">**A:** There are three possible reasons for this:</span></span>  
  
-   <span data-ttu-id="9e839-250">Se você estiver no modo de domínio, receber remoto transacionado requer acesso de rede do coordenador de transações distribuídas da Microsoft (MSDTC).</span><span class="sxs-lookup"><span data-stu-id="9e839-250">If you are in domain mode, remote transacted receive requires Microsoft Distributed Transaction Coordinator (MSDTC) network access.</span></span> <span data-ttu-id="9e839-251">Você pode habilitar essa usando **Adicionar/remover componentes**.</span><span class="sxs-lookup"><span data-stu-id="9e839-251">You can enable this using **Add/Remove Components**.</span></span>  
  
     <span data-ttu-id="9e839-252">![Habilitar acesso DTC de rede](../../../../docs/framework/wcf/feature-details/media/applicationserveraddcomps.jpg "ApplicationServerAddComps")</span><span class="sxs-lookup"><span data-stu-id="9e839-252">![Enabling network DTC access](../../../../docs/framework/wcf/feature-details/media/applicationserveraddcomps.jpg "ApplicationServerAddComps")</span></span>  
  
-   <span data-ttu-id="9e839-253">Verifique o modo de autenticação para se comunicar com o Gerenciador de transações.</span><span class="sxs-lookup"><span data-stu-id="9e839-253">Check the authentication mode for communicating with the transaction manager.</span></span> <span data-ttu-id="9e839-254">Se você estiver no modo de grupo de trabalho, "Nenhuma autenticação necessária" deve ser selecionada.</span><span class="sxs-lookup"><span data-stu-id="9e839-254">If you are in workgroup mode, "No Authentication Required" must be selected.</span></span> <span data-ttu-id="9e839-255">Se você estiver no modo de domínio, "Autenticação mútua necessária" deve ser selecionada.</span><span class="sxs-lookup"><span data-stu-id="9e839-255">If you are in domain mode, then "Mutual Authentication Required" must be selected.</span></span>  
  
     <span data-ttu-id="9e839-256">![Habilitar transações XA](../../../../docs/framework/wcf/feature-details/media/4f3695e0-fb0b-4c5b-afac-75f8860d2bb0.jpg "4f3695e0-fb0b-4c5b-afac-75f8860d2bb0")</span><span class="sxs-lookup"><span data-stu-id="9e839-256">![Enabling XA transactions](../../../../docs/framework/wcf/feature-details/media/4f3695e0-fb0b-4c5b-afac-75f8860d2bb0.jpg "4f3695e0-fb0b-4c5b-afac-75f8860d2bb0")</span></span>  
  
-   <span data-ttu-id="9e839-257">Certifique-se de que o MSDTC está na lista de exceções de **Firewall de Conexão de Internet** configurações.</span><span class="sxs-lookup"><span data-stu-id="9e839-257">Make sure that MSDTC is in the list of exceptions in the **Internet Connection Firewall** settings.</span></span>  
  
-   <span data-ttu-id="9e839-258">Certifique-se de que você está usando [!INCLUDE[wv](../../../../includes/wv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9e839-258">Ensure that you are using [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span> <span data-ttu-id="9e839-259">MSMQ em [!INCLUDE[wv](../../../../includes/wv-md.md)] dá suporte à leitura transacionada remota.</span><span class="sxs-lookup"><span data-stu-id="9e839-259">MSMQ on [!INCLUDE[wv](../../../../includes/wv-md.md)] supports remote transacted read.</span></span> <span data-ttu-id="9e839-260">O MSMQ em versões anteriores do Windows não oferece suporte a leitura transacionada remota.</span><span class="sxs-lookup"><span data-stu-id="9e839-260">MSMQ on earlier Windows releases does not support remote transacted read.</span></span>  
  
 <span data-ttu-id="9e839-261">**P:** quando a leitura da fila do serviço é um serviço de rede, por exemplo, em uma Web host, por que recebo uma exceção de acesso negado é gerado durante a leitura da fila?</span><span class="sxs-lookup"><span data-stu-id="9e839-261">**Q:** When the service reading from the queue is a network service, for example, in a Web host, why do I get an access-denied exception is raised when reading from the queue?</span></span>  
  
 <span data-ttu-id="9e839-262">**R:** acesso de leitura do serviço de rede deve ser adicionado à fila de ACL para garantir que um serviço de rede pode ler da fila.</span><span class="sxs-lookup"><span data-stu-id="9e839-262">**A:** Network service read access must be added to the queue ACL to ensure that a network service can read from the queue.</span></span>  
  
 <span data-ttu-id="9e839-263">**P:** posso usar o serviço de ativação MSMQ para ativar aplicativos com base em mensagens em uma fila em um computador remoto?</span><span class="sxs-lookup"><span data-stu-id="9e839-263">**Q:** Can I use the MSMQ activation service to activate applications based on messages in a queue on a remote machine?</span></span>  
  
 <span data-ttu-id="9e839-264">**R:** Sim.</span><span class="sxs-lookup"><span data-stu-id="9e839-264">**A:** Yes.</span></span> <span data-ttu-id="9e839-265">Para fazer isso, você deve configurar o serviço de ativação MSMQ para ser executado como um serviço de rede e adicionar o acesso ao serviço de rede para a fila no computador remoto.</span><span class="sxs-lookup"><span data-stu-id="9e839-265">To do this, you must configure the MSMQ activation service to run as a network service, and add network service access to the queue on the remote machine.</span></span>  
  
## <a name="using-custom-msmq-bindings-with-receivecontext-enabled"></a><span data-ttu-id="9e839-266">Usando associações de MSMQ personalizado com ReceiveContext habilitado</span><span class="sxs-lookup"><span data-stu-id="9e839-266">Using Custom MSMQ Bindings with ReceiveContext Enabled</span></span>  
 <span data-ttu-id="9e839-267">Ao usar uma associação personalizada do MSMQ com <xref:System.ServiceModel.Channels.ReceiveContext> habilitado para processamento de uma mensagem de entrada usará um pool de threads porque MSMQ nativo não oferece suporte a conclusão de e/s para assíncrona <xref:System.ServiceModel.Channels.ReceiveContext> recebe.</span><span class="sxs-lookup"><span data-stu-id="9e839-267">When using a custom MSMQ binding with <xref:System.ServiceModel.Channels.ReceiveContext> enabled processing an incoming message will use a thread pool thread because native MSMQ does not support I/O completion for asynchronous <xref:System.ServiceModel.Channels.ReceiveContext> receives.</span></span> <span data-ttu-id="9e839-268">Isso ocorre porque o processamento dessa mensagem usa transações internas para <xref:System.ServiceModel.Channels.ReceiveContext> e MSMQ não dá suporte ao processamento assíncrono.</span><span class="sxs-lookup"><span data-stu-id="9e839-268">This is because processing such a message uses internal transactions for <xref:System.ServiceModel.Channels.ReceiveContext> and MSMQ does not support asynchronous processing.</span></span> <span data-ttu-id="9e839-269">Para contornar esse problema, você pode adicionar uma <xref:System.ServiceModel.Description.SynchronousReceiveBehavior> para o ponto de extremidade para forçar síncrona de processamento ou defina <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.MaxPendingReceives%2A> como 1.</span><span class="sxs-lookup"><span data-stu-id="9e839-269">To work around this issue you can add a <xref:System.ServiceModel.Description.SynchronousReceiveBehavior> to the endpoint to force synchronous processing or set <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.MaxPendingReceives%2A> to 1.</span></span>
