---
title: Importação e exportação de esquemas
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, schema import and export
- XsdDataContractExporter class
- XsdDataContractImporter class
ms.assetid: 0da32b50-ccd9-463a-844c-7fe803d3bf44
ms.openlocfilehash: a14ee9e5916133be3979650055cf3e57899a4cca
ms.sourcegitcommit: c7a7e1468bf0fa7f7065de951d60dfc8d5ba89f5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/14/2019
ms.locfileid: "65591805"
---
# <a name="schema-import-and-export"></a><span data-ttu-id="c02da-102">Importação e exportação de esquemas</span><span class="sxs-lookup"><span data-stu-id="c02da-102">Schema Import and Export</span></span>
<span data-ttu-id="c02da-103">Windows Communication Foundation (WCF) inclui um novo mecanismo de serialização, o <xref:System.Runtime.Serialization.DataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="c02da-103">Windows Communication Foundation (WCF) includes a new serialization engine, the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span> <span data-ttu-id="c02da-104">O `DataContractSerializer` converte entre objetos do .NET Framework e XML (em ambas as direções).</span><span class="sxs-lookup"><span data-stu-id="c02da-104">The `DataContractSerializer` translates between .NET Framework objects and XML (in both directions).</span></span> <span data-ttu-id="c02da-105">Além do serializador em si, o WCF inclui mecanismos de exportação de esquema e importação de esquema associado.</span><span class="sxs-lookup"><span data-stu-id="c02da-105">In addition to the serializer itself, WCF includes associated schema import and schema export mechanisms.</span></span> <span data-ttu-id="c02da-106">*Esquema* é uma descrição formal, precisa e legível por máquina da forma do XML que produz o serializador ou que o desserializador pode acessar.</span><span class="sxs-lookup"><span data-stu-id="c02da-106">*Schema* is a formal, precise, and machine-readable description of the shape of XML that the serializer produces or that the deserializer can access.</span></span> <span data-ttu-id="c02da-107">O WCF usa a linguagem de definição de esquema do World Wide Web Consortium (W3C) XML (XSD) como sua representação de esquema, que é amplamente interoperável com várias plataformas de terceiros.</span><span class="sxs-lookup"><span data-stu-id="c02da-107">WCF uses the World Wide Web Consortium (W3C) XML Schema definition language (XSD) as its schema representation, which is widely interoperable with numerous third-party platforms.</span></span>  
  
 <span data-ttu-id="c02da-108">O componente de importação de esquema, <xref:System.Runtime.Serialization.XsdDataContractImporter>, usa um documento de esquema XSD e gera classes do .NET Framework (normalmente classes de contrato de dados), de modo que os formulários serializados correspondem ao esquema especificado.</span><span class="sxs-lookup"><span data-stu-id="c02da-108">The schema import component, <xref:System.Runtime.Serialization.XsdDataContractImporter>, takes an XSD schema document and generates .NET Framework classes (normally data contract classes) such that the serialized forms correspond to the given schema.</span></span>  
  
 <span data-ttu-id="c02da-109">Por exemplo, o seguinte fragmento de esquema:</span><span class="sxs-lookup"><span data-stu-id="c02da-109">For example, the following schema fragment:</span></span>  
  
 [!code-csharp[c_SchemaImportExport#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#8)]
 [!code-vb[c_SchemaImportExport#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#8)]  
  
 <span data-ttu-id="c02da-110">gera o seguinte tipo (um pouco simplificado para melhorar a legibilidade).</span><span class="sxs-lookup"><span data-stu-id="c02da-110">generates the following type (simplified slightly for better readability).</span></span>  
  
 [!code-csharp[c_SchemaImportExport#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#1)]
 [!code-vb[c_SchemaImportExport#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#1)]  
  
 <span data-ttu-id="c02da-111">Observe que o tipo gerado segue várias práticas recomendadas de contrato de dados (encontrada no [as práticas recomendadas: Controle de versão de contrato de dados](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md)):</span><span class="sxs-lookup"><span data-stu-id="c02da-111">Note that the generated type follows several data contract best practices (found in [Best Practices: Data Contract Versioning](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md)):</span></span>  
  
- <span data-ttu-id="c02da-112">O tipo implementa o <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span><span class="sxs-lookup"><span data-stu-id="c02da-112">The type implements the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span></span> <span data-ttu-id="c02da-113">Para obter mais informações, consulte [Contratos de dados compatíveis por encaminhamento](../../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="c02da-113">For more information, see [Forward-Compatible Data Contracts](../../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span>  
  
- <span data-ttu-id="c02da-114">Membros de dados são implementados como propriedades públicas que encapsulam os campos particulares.</span><span class="sxs-lookup"><span data-stu-id="c02da-114">Data members are implemented as public properties that wrap private fields.</span></span>  
  
- <span data-ttu-id="c02da-115">A classe é uma classe parcial e adições podem ser feitas sem modificar o código gerado.</span><span class="sxs-lookup"><span data-stu-id="c02da-115">The class is a partial class, and additions can be made without modifying generated code.</span></span>  
  
 <span data-ttu-id="c02da-116">O <xref:System.Runtime.Serialization.XsdDataContractExporter> lhe permite fazer o contrário — levam os tipos que são serializados com o `DataContractSerializer` e gerar um documento de esquema XSD.</span><span class="sxs-lookup"><span data-stu-id="c02da-116">The <xref:System.Runtime.Serialization.XsdDataContractExporter> enables you to do the reverse—take types that are serializable with the `DataContractSerializer` and generate an XSD Schema document.</span></span>  
  
## <a name="fidelity-is-not-guaranteed"></a><span data-ttu-id="c02da-117">Não há garantia de fidelidade</span><span class="sxs-lookup"><span data-stu-id="c02da-117">Fidelity Is Not Guaranteed</span></span>  
 <span data-ttu-id="c02da-118">Não há garantia de que o esquema ou tipos de fazer uma viagem de ida e com total fidelidade.</span><span class="sxs-lookup"><span data-stu-id="c02da-118">It is not guaranteed that schema or types make a round trip with total fidelity.</span></span> <span data-ttu-id="c02da-119">(Um *ida e volta* significa para importar um esquema para criar um conjunto de classes e exportar os resultados para criar um esquema novamente.) O mesmo esquema não pode ser retornado.</span><span class="sxs-lookup"><span data-stu-id="c02da-119">(A *round trip* means to import a schema to create a set of classes, and export the result to create a schema again.) The same schema may not be returned.</span></span> <span data-ttu-id="c02da-120">Reverter o processo não é garantida para preservar a fidelidade também.</span><span class="sxs-lookup"><span data-stu-id="c02da-120">Reversing the process is also not guaranteed to preserve fidelity.</span></span> <span data-ttu-id="c02da-121">(Exporte um tipo para gerar seu esquema e, em seguida, importar o tipo de volta.</span><span class="sxs-lookup"><span data-stu-id="c02da-121">(Export a type to generate its schema, and then import the type back.</span></span> <span data-ttu-id="c02da-122">É improvável que o mesmo tipo será retornado).</span><span class="sxs-lookup"><span data-stu-id="c02da-122">It is unlikely the same type is returned.)</span></span>  
  
## <a name="supported-types"></a><span data-ttu-id="c02da-123">Tipos com suporte</span><span class="sxs-lookup"><span data-stu-id="c02da-123">Supported Types</span></span>  
 <span data-ttu-id="c02da-124">O modelo de contrato de dados dá suporte a apenas um subconjunto limitado do esquema WC3.</span><span class="sxs-lookup"><span data-stu-id="c02da-124">The data contract model supports only a limited subset of the WC3 schema.</span></span> <span data-ttu-id="c02da-125">Qualquer esquema que não estão em conformidade com esse subconjunto fará com que uma exceção durante o processo de importação.</span><span class="sxs-lookup"><span data-stu-id="c02da-125">Any schema that does not conform to this subset will cause an exception during the import process.</span></span> <span data-ttu-id="c02da-126">Por exemplo, não há nenhuma maneira de especificar que um membro de dados de um contrato de dados deve ser serializado como um atributo XML.</span><span class="sxs-lookup"><span data-stu-id="c02da-126">For example, there is no way to specify that a data member of a data contract should be serialized as an XML attribute.</span></span> <span data-ttu-id="c02da-127">Assim, os esquemas que exigem o uso de atributos XML não têm suporte e fará com que exceções durante a importação, porque é impossível gerar um contrato de dados com a projeção de XML correto.</span><span class="sxs-lookup"><span data-stu-id="c02da-127">Thus, schemas that require the use of XML attributes are not supported and will cause exceptions during import, because it is impossible to generate a data contract with the correct XML projection.</span></span>  
  
 <span data-ttu-id="c02da-128">Por exemplo, o seguinte fragmento de esquema não pode ser importado usando as configurações de importação padrão.</span><span class="sxs-lookup"><span data-stu-id="c02da-128">For example, the following schema fragment cannot be imported using the default import settings.</span></span>  
  
 [!code-xml[c_SchemaImportExport#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#9)]  
  
 <span data-ttu-id="c02da-129">Para obter mais informações, consulte [referência de esquema de contrato de dados](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="c02da-129">For more information, see [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).</span></span> <span data-ttu-id="c02da-130">Se um esquema não estiver de acordo com as regras do contrato de dados, use um mecanismo de serialização diferentes.</span><span class="sxs-lookup"><span data-stu-id="c02da-130">If a schema does not conform to the data contract rules, use a different serialization engine.</span></span> <span data-ttu-id="c02da-131">Por exemplo, o <xref:System.Xml.Serialization.XmlSerializer> usa seu próprio mecanismo de importação de esquema separado.</span><span class="sxs-lookup"><span data-stu-id="c02da-131">For example, the <xref:System.Xml.Serialization.XmlSerializer> uses its own separate schema import mechanism.</span></span> <span data-ttu-id="c02da-132">Além disso, há um modo de importação especiais em que o intervalo de esquema com suporte é expandido.</span><span class="sxs-lookup"><span data-stu-id="c02da-132">Also, there is a special import mode in which the range of supported schema is expanded.</span></span> <span data-ttu-id="c02da-133">Para obter mais informações, consulte a seção sobre como gerar <xref:System.Xml.Serialization.IXmlSerializable> digita [Importando esquema para gerar Classes](../../../../docs/framework/wcf/feature-details/importing-schema-to-generate-classes.md).</span><span class="sxs-lookup"><span data-stu-id="c02da-133">For more information, see the section about generating <xref:System.Xml.Serialization.IXmlSerializable> types in [Importing Schema to Generate Classes](../../../../docs/framework/wcf/feature-details/importing-schema-to-generate-classes.md).</span></span>  
  
 <span data-ttu-id="c02da-134">O `XsdDataContractExporter` dá suporte a quaisquer tipos do .NET Framework que podem ser serializados com o `DataContractSerializer`.</span><span class="sxs-lookup"><span data-stu-id="c02da-134">The `XsdDataContractExporter` supports any .NET Framework types that can be serialized with the `DataContractSerializer`.</span></span> <span data-ttu-id="c02da-135">Para obter mais informações, consulte [tipos com suporte pelo serializador de contrato de dados](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="c02da-135">For more information, see [Types Supported by the Data Contract Serializer](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span></span> <span data-ttu-id="c02da-136">Observe esse esquema gerada usando o `XsdDataContractExporter` são normalmente válidos dados que o `XsdDataContractImporter` pode usar (a menos que o <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> é usado para personalizar o esquema).</span><span class="sxs-lookup"><span data-stu-id="c02da-136">Note that schema generated using the `XsdDataContractExporter` is normally valid data that the `XsdDataContractImporter` can use (unless the <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> is used to customize the schema).</span></span>  
  
 <span data-ttu-id="c02da-137">Para obter mais informações sobre como usar o <xref:System.Runtime.Serialization.XsdDataContractImporter>, consulte [Importando esquema para gerar Classes](../../../../docs/framework/wcf/feature-details/importing-schema-to-generate-classes.md).</span><span class="sxs-lookup"><span data-stu-id="c02da-137">For more information about using the <xref:System.Runtime.Serialization.XsdDataContractImporter>, see [Importing Schema to Generate Classes](../../../../docs/framework/wcf/feature-details/importing-schema-to-generate-classes.md).</span></span>  
  
 <span data-ttu-id="c02da-138">Para obter mais informações sobre como usar o <xref:System.Runtime.Serialization.XsdDataContractExporter>, consulte [exportando esquemas de Classes](../../../../docs/framework/wcf/feature-details/exporting-schemas-from-classes.md).</span><span class="sxs-lookup"><span data-stu-id="c02da-138">For more information about using the <xref:System.Runtime.Serialization.XsdDataContractExporter>, see [Exporting Schemas from Classes](../../../../docs/framework/wcf/feature-details/exporting-schemas-from-classes.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c02da-139">Consulte também</span><span class="sxs-lookup"><span data-stu-id="c02da-139">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractSerializer>
- <xref:System.Runtime.Serialization.XsdDataContractImporter>
- <xref:System.Runtime.Serialization.XsdDataContractExporter>
- [<span data-ttu-id="c02da-140">Importando o esquema para gerar classes</span><span class="sxs-lookup"><span data-stu-id="c02da-140">Importing Schema to Generate Classes</span></span>](../../../../docs/framework/wcf/feature-details/importing-schema-to-generate-classes.md)
- [<span data-ttu-id="c02da-141">Exportando esquemas de Classes</span><span class="sxs-lookup"><span data-stu-id="c02da-141">Exporting Schemas from Classes</span></span>](../../../../docs/framework/wcf/feature-details/exporting-schemas-from-classes.md)
