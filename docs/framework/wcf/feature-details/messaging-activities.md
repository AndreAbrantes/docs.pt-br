---
title: Atividades de mensagem
ms.date: 03/30/2017
ms.assetid: 8498f215-1823-4aba-a6e1-391407f8c273
ms.openlocfilehash: 1e65a3ead9df4103fb270911e3bbb2cc03fcfcba
ms.sourcegitcommit: 30a558d23e3ac5a52071121a52c305c85fe15726
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/25/2019
ms.locfileid: "75347571"
---
# <a name="messaging-activities"></a><span data-ttu-id="3cb86-102">Atividades de mensagem</span><span class="sxs-lookup"><span data-stu-id="3cb86-102">Messaging activities</span></span>

<span data-ttu-id="3cb86-103">As atividades de mensagens permitem que os fluxos de trabalho enviem e recebam mensagens do WCF.</span><span class="sxs-lookup"><span data-stu-id="3cb86-103">Messaging activities allow workflows to send and receive WCF messages.</span></span> <span data-ttu-id="3cb86-104">Ao adicionar atividades de mensagens a um fluxo de trabalho, você pode modelar quaisquer MEP (padrões de troca de mensagens) arbitrariamente complexos.</span><span class="sxs-lookup"><span data-stu-id="3cb86-104">By adding messaging activities to a workflow you can model any arbitrarily complex message exchange patterns (MEP).</span></span>

## <a name="message-exchange-patterns"></a><span data-ttu-id="3cb86-105">Padrões de troca de mensagens</span><span class="sxs-lookup"><span data-stu-id="3cb86-105">Message exchange patterns</span></span>

<span data-ttu-id="3cb86-106">Há três padrões básicos de troca de mensagens:</span><span class="sxs-lookup"><span data-stu-id="3cb86-106">There are three basic message exchange patterns:</span></span>

- <span data-ttu-id="3cb86-107">**Datagrama** -ao usar o datagrama MEP o cliente envia uma mensagem para o serviço, mas o serviço não responde.</span><span class="sxs-lookup"><span data-stu-id="3cb86-107">**Datagram** - When using the datagram MEP the client sends a message to the service, but the service does not respond.</span></span> <span data-ttu-id="3cb86-108">Isso às vezes é chamado de "incêndio e esquecido".</span><span class="sxs-lookup"><span data-stu-id="3cb86-108">This is sometimes called "fire and forget".</span></span> <span data-ttu-id="3cb86-109">Um incêndio e esquecido o Exchange é um que requer a confirmação fora de banda da entrega bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="3cb86-109">A fire and forget exchange is one that requires out-of-band confirmation of successful delivery.</span></span> <span data-ttu-id="3cb86-110">A mensagem pode ser perdida em trânsito e nunca alcançar o serviço.</span><span class="sxs-lookup"><span data-stu-id="3cb86-110">The message might be lost in transit and never reach the service.</span></span> <span data-ttu-id="3cb86-111">Se o cliente enviar uma mensagem com êxito, ele não garante que o serviço tenha recebido a mensagem.</span><span class="sxs-lookup"><span data-stu-id="3cb86-111">If the client successfully sends a message, it does not guarantee that the service has received the message.</span></span> <span data-ttu-id="3cb86-112">O datagrama é um bloco de construção fundamental para mensagens, pois você pode criar seu próprio MEPs sobre ele.</span><span class="sxs-lookup"><span data-stu-id="3cb86-112">The datagram is a fundamental building block for messaging, as you can build your own MEPs on top of it.</span></span>

- <span data-ttu-id="3cb86-113">**Solicitação-resposta** -ao usar o MEP de solicitação-resposta o cliente envia uma mensagem para o serviço, o serviço faz o processamento necessário e, em seguida, envia uma resposta de volta ao cliente.</span><span class="sxs-lookup"><span data-stu-id="3cb86-113">**Request-Response** - When using the request-response MEP the client sends a message to the service, the service does the required processing, and then sends a response back to the client.</span></span> <span data-ttu-id="3cb86-114">O padrão consiste em pares de solicitação-resposta.</span><span class="sxs-lookup"><span data-stu-id="3cb86-114">The pattern consists of request-response pairs.</span></span> <span data-ttu-id="3cb86-115">Exemplos de chamadas de solicitação-resposta são RPC (chamadas de procedimento remoto) e solicitações GET de navegador.</span><span class="sxs-lookup"><span data-stu-id="3cb86-115">Examples of request-response calls are remote procedure calls (RPC) and browser GET requests.</span></span> <span data-ttu-id="3cb86-116">Esse padrão também é conhecido como Half-duplex.</span><span class="sxs-lookup"><span data-stu-id="3cb86-116">This pattern is also known as half-duplex.</span></span>

- <span data-ttu-id="3cb86-117">**Duplex** – ao usar o duplex MEP, o cliente e o serviço podem enviar mensagens entre si em qualquer ordem.</span><span class="sxs-lookup"><span data-stu-id="3cb86-117">**Duplex** - When using the duplex MEP the client and service can send messages to each other in any order.</span></span> <span data-ttu-id="3cb86-118">O duplex MEP é como uma conversa telefônica, onde cada palavra que está sendo falada é uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="3cb86-118">The duplex MEP is like a phone conversation, where each word being spoken is a message.</span></span>

<span data-ttu-id="3cb86-119">As atividades de mensagens permitem que você implemente qualquer um desses MEPs básicos, bem como qualquer MEP arbitrariamente complexa.</span><span class="sxs-lookup"><span data-stu-id="3cb86-119">The messaging activities allow you to implement any of these basic MEPs as well as any arbitrarily complex MEP.</span></span>

## <a name="messaging-activities"></a><span data-ttu-id="3cb86-120">Atividades de mensagem</span><span class="sxs-lookup"><span data-stu-id="3cb86-120">Messaging activities</span></span>

<span data-ttu-id="3cb86-121">O [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] define as seguintes atividades de mensagens:</span><span class="sxs-lookup"><span data-stu-id="3cb86-121">The [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] defines the following messaging activities:</span></span>

- <span data-ttu-id="3cb86-122"><xref:System.ServiceModel.Activities.Send>-use a atividade <xref:System.ServiceModel.Activities.Send> para enviar uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="3cb86-122"><xref:System.ServiceModel.Activities.Send>- Use the <xref:System.ServiceModel.Activities.Send> activity to send a message.</span></span>

- <span data-ttu-id="3cb86-123"><xref:System.ServiceModel.Activities.SendReply>-use a atividade <xref:System.ServiceModel.Activities.SendReply> para enviar uma resposta a uma mensagem recebida.</span><span class="sxs-lookup"><span data-stu-id="3cb86-123"><xref:System.ServiceModel.Activities.SendReply> - Use the <xref:System.ServiceModel.Activities.SendReply> activity to send a response to a received message.</span></span> <span data-ttu-id="3cb86-124">Essa atividade é usada pelos serviços de fluxo de trabalho ao implementar um MEP de solicitação/resposta.</span><span class="sxs-lookup"><span data-stu-id="3cb86-124">This activity is used by workflow services when implementing a request/reply MEP.</span></span>

- <span data-ttu-id="3cb86-125"><xref:System.ServiceModel.Activities.Receive>-use a atividade <xref:System.ServiceModel.Activities.Receive> para receber uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="3cb86-125"><xref:System.ServiceModel.Activities.Receive>- Use the <xref:System.ServiceModel.Activities.Receive> activity to receive a message.</span></span>

- <span data-ttu-id="3cb86-126"><xref:System.ServiceModel.Activities.ReceiveReply>-use a atividade <xref:System.ServiceModel.Activities.ReceiveReply> para receber uma mensagem de resposta.</span><span class="sxs-lookup"><span data-stu-id="3cb86-126"><xref:System.ServiceModel.Activities.ReceiveReply> - Use the <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive a reply message.</span></span> <span data-ttu-id="3cb86-127">Essa atividade é usada por clientes de serviço de fluxo de trabalho ao implementar um MEP de solicitação/resposta.</span><span class="sxs-lookup"><span data-stu-id="3cb86-127">This activity is used by workflow service clients when implementing a request/reply MEP.</span></span>

## <a name="messaging-activities-and-message-exchange-patterns"></a><span data-ttu-id="3cb86-128">Atividades de mensagens e padrões de troca de mensagens</span><span class="sxs-lookup"><span data-stu-id="3cb86-128">Messaging activities and message exchange patterns</span></span>

<span data-ttu-id="3cb86-129">Um dataMEP de datagrama envolve um cliente que envia uma mensagem e um serviço que recebe a mensagem.</span><span class="sxs-lookup"><span data-stu-id="3cb86-129">A datagram MEP involves a client sending a message and a service receiving the message.</span></span> <span data-ttu-id="3cb86-130">Se o cliente for um fluxo de trabalho, use uma atividade de <xref:System.ServiceModel.Activities.Send> para enviar a mensagem.</span><span class="sxs-lookup"><span data-stu-id="3cb86-130">If the client is a workflow use a <xref:System.ServiceModel.Activities.Send> activity to send the message.</span></span> <span data-ttu-id="3cb86-131">Para receber essa mensagem em um fluxo de trabalho, use uma atividade de <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-131">To receive that message in a workflow, use a <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="3cb86-132">As atividades <xref:System.ServiceModel.Activities.Send> e <xref:System.ServiceModel.Activities.Receive> têm uma propriedade denominada `Content`.</span><span class="sxs-lookup"><span data-stu-id="3cb86-132">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities each have a property named `Content`.</span></span> <span data-ttu-id="3cb86-133">Essa propriedade contém os dados que estão sendo enviados ou recebidos.</span><span class="sxs-lookup"><span data-stu-id="3cb86-133">This property contains the data being sent or received.</span></span> <span data-ttu-id="3cb86-134">Ao implementar a solicitação-Response MEP, o cliente e o serviço usam pares de atividades.</span><span class="sxs-lookup"><span data-stu-id="3cb86-134">When implementing the request-response MEP both the client and the service use pairs of activities.</span></span> <span data-ttu-id="3cb86-135">O cliente usa uma atividade de <xref:System.ServiceModel.Activities.Send> para enviar a mensagem e uma atividade de <xref:System.ServiceModel.Activities.ReceiveReply> para receber a resposta do serviço.</span><span class="sxs-lookup"><span data-stu-id="3cb86-135">The client uses a <xref:System.ServiceModel.Activities.Send> activity to send the message and a <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive the response from the service.</span></span> <span data-ttu-id="3cb86-136">Essas duas atividades são associadas entre si pela propriedade <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-136">These two activities are associated with each other by the <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property.</span></span> <span data-ttu-id="3cb86-137">Essa propriedade é definida para a atividade de <xref:System.ServiceModel.Activities.Send> que enviou a mensagem original.</span><span class="sxs-lookup"><span data-stu-id="3cb86-137">This property is set to the <xref:System.ServiceModel.Activities.Send> activity that sent the original message.</span></span> <span data-ttu-id="3cb86-138">O serviço também usa um par de atividades associadas: <xref:System.ServiceModel.Activities.Receive> e <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-138">The service also uses a pair of associated activities: <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="3cb86-139">Essas duas atividades são associadas pela propriedade <xref:System.ServiceModel.Activities.SendReply.Request%2A>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-139">These two activities are associated by the <xref:System.ServiceModel.Activities.SendReply.Request%2A> property.</span></span> <span data-ttu-id="3cb86-140">Essa propriedade é definida para a atividade de <xref:System.ServiceModel.Activities.Receive> que recebeu a mensagem original.</span><span class="sxs-lookup"><span data-stu-id="3cb86-140">This property is set to the <xref:System.ServiceModel.Activities.Receive> activity that received the original message.</span></span> <span data-ttu-id="3cb86-141">As atividades <xref:System.ServiceModel.Activities.ReceiveReply> e <xref:System.ServiceModel.Activities.SendReply>, como <xref:System.ServiceModel.Activities.Send> e <xref:System.ServiceModel.Activities.Receive> permitem enviar uma instância de <xref:System.ServiceModel.Channels.Message> ou um tipo de contrato de mensagem.</span><span class="sxs-lookup"><span data-stu-id="3cb86-141">The <xref:System.ServiceModel.Activities.ReceiveReply> and <xref:System.ServiceModel.Activities.SendReply> activities, like <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> allow you to send a <xref:System.ServiceModel.Channels.Message> instance or a message contract type.</span></span>

<span data-ttu-id="3cb86-142">Devido à natureza de execução demorada dos fluxos de trabalho, é importante que o padrão duplex de comunicação também dê suporte a conversas de longa execução.</span><span class="sxs-lookup"><span data-stu-id="3cb86-142">Because of the long-running nature of workflows, it is important for the duplex pattern of communication to also support long-running conversations.</span></span> <span data-ttu-id="3cb86-143">Para dar suporte a conversas de execução longa, os clientes que iniciam a conversa devem fornecer ao serviço uma oportunidade para chamá-lo novamente mais tarde, quando os dados estiverem disponíveis.</span><span class="sxs-lookup"><span data-stu-id="3cb86-143">To support long-running conversations, clients who initiate the conversation must provide the service with an opportunity to call it back at a later time when the data becomes available.</span></span> <span data-ttu-id="3cb86-144">Por exemplo, uma solicitação de ordem de compra é enviada para aprovação do gerente, mas pode não ser processada por um dia, uma semana ou até mesmo um ano; o fluxo de trabalho que gerencia a aprovação da ordem de compra deve saber retomar depois que a aprovação é fornecida.</span><span class="sxs-lookup"><span data-stu-id="3cb86-144">For example, a purchase order request is submitted for manager approval, but it might not be processed for a day, a week, or even a year; the workflow that manages the purchase order approval must know to resume after the approval is given.</span></span> <span data-ttu-id="3cb86-145">Há suporte para esse padrão de comunicação duplex em fluxos de trabalho usando a correlação.</span><span class="sxs-lookup"><span data-stu-id="3cb86-145">This pattern of duplex communication is supported in workflows using correlation.</span></span> <span data-ttu-id="3cb86-146">Para implementar um padrão duplex, use <xref:System.ServiceModel.Activities.Send> e <xref:System.ServiceModel.Activities.Receive> atividades.</span><span class="sxs-lookup"><span data-stu-id="3cb86-146">To implement a duplex pattern, use <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="3cb86-147">Na <xref:System.ServiceModel.Activities.Receive> atividade, inicialize uma correlação usando <xref:System.ServiceModel.Activities.CorrelationHandle>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-147">On the <xref:System.ServiceModel.Activities.Receive> activity, initialize a correlation using <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="3cb86-148">Na <xref:System.ServiceModel.Activities.Send> atividade, defina o identificador de correlação como o valor da propriedade <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-148">On the <xref:System.ServiceModel.Activities.Send> activity set that correlation handle as the <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A> property value.</span></span> <span data-ttu-id="3cb86-149">Para obter mais informações, consulte [duplex durável](durable-duplex-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="3cb86-149">For more information, see [Durable Duplex](durable-duplex-correlation.md).</span></span>

> [!NOTE]
> <span data-ttu-id="3cb86-150">A implementação de duplex do fluxo de trabalho usando uma correlação de retorno de chamada ("duplex durável") destina-se a conversas de longa execução.</span><span class="sxs-lookup"><span data-stu-id="3cb86-150">Workflow’s implementation of duplex using a callback correlation ("Durable Duplex") is intended for long-running conversations.</span></span> <span data-ttu-id="3cb86-151">Isso não é o mesmo que o WCF duplex com contratos de retorno de chamada em que a conversa é de execução curta (o tempo de vida do canal).</span><span class="sxs-lookup"><span data-stu-id="3cb86-151">This is not the same as WCF duplex with callback contracts where the conversation is short-running (the lifetime of the channel).</span></span>

## <a name="message-formatting-and-messaging-activities"></a><span data-ttu-id="3cb86-152">Formatação de mensagens e atividades de mensagens</span><span class="sxs-lookup"><span data-stu-id="3cb86-152">Message formatting and messaging activities</span></span>

<span data-ttu-id="3cb86-153">As atividades <xref:System.ServiceModel.Activities.Receive> e <xref:System.ServiceModel.Activities.ReceiveReply> têm uma propriedade denominada `Content`.</span><span class="sxs-lookup"><span data-stu-id="3cb86-153">The <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities have a property named `Content`.</span></span> <span data-ttu-id="3cb86-154">Essa propriedade é do tipo <xref:System.ServiceModel.Activities.ReceiveContent> e representa os dados que o <xref:System.ServiceModel.Activities.Receive> ou a atividade de <xref:System.ServiceModel.Activities.ReceiveReply> recebe.</span><span class="sxs-lookup"><span data-stu-id="3cb86-154">This property is of type <xref:System.ServiceModel.Activities.ReceiveContent> and represents data the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity receives.</span></span> <span data-ttu-id="3cb86-155">O .NET Framework define duas classes relacionadas chamadas <xref:System.ServiceModel.Activities.ReceiveMessageContent> e <xref:System.ServiceModel.Activities.ReceiveParametersContent> ambas derivam de <xref:System.ServiceModel.Activities.ReceiveContent>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-155">The .NET Framework defines two related classes called <xref:System.ServiceModel.Activities.ReceiveMessageContent> and <xref:System.ServiceModel.Activities.ReceiveParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.ReceiveContent>.</span></span> <span data-ttu-id="3cb86-156">Defina a propriedade `Content` da atividade de <xref:System.ServiceModel.Activities.Receive> ou <xref:System.ServiceModel.Activities.ReceiveReply> como uma instância de um desses tipos para receber dados em um serviço de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="3cb86-156">Set the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity’s `Content` property to an instance of one of these types to receive data into a workflow service.</span></span> <span data-ttu-id="3cb86-157">O tipo a ser usado depende do tipo de dados que a atividade recebe.</span><span class="sxs-lookup"><span data-stu-id="3cb86-157">The type to use depends upon the type of data the activity receives.</span></span> <span data-ttu-id="3cb86-158">Se a atividade receber um objeto `Message` ou um tipo de contrato de mensagem, use <xref:System.ServiceModel.Activities.ReceiveMessageContent>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-158">If the activity receives a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.ReceiveMessageContent>.</span></span> <span data-ttu-id="3cb86-159">Se a atividade receber um conjunto de contratos de dados ou tipos XML que podem ser serializados, use <xref:System.ServiceModel.Activities.ReceiveParametersContent>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-159">If the activity receives a set of data contract or XML types that can be serialized, use <xref:System.ServiceModel.Activities.ReceiveParametersContent>.</span></span> <span data-ttu-id="3cb86-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent> permite que você envie vários parâmetros, enquanto <xref:System.ServiceModel.Activities.ReceiveMessageContent> só permite enviar um objeto, a mensagem (ou o tipo de contrato de mensagem).</span><span class="sxs-lookup"><span data-stu-id="3cb86-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.ReceiveMessageContent> only allows you to send one object, the message (or message contract type).</span></span>

> [!NOTE]
> <span data-ttu-id="3cb86-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent> também pode ser usado com um único contrato de dados ou tipo XML que pode ser serializado.</span><span class="sxs-lookup"><span data-stu-id="3cb86-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent> can also be used with a single data contract or XML type that can be serialized.</span></span> <span data-ttu-id="3cb86-162">A diferença entre usar <xref:System.ServiceModel.Activities.ReceiveParametersContent> com um único parâmetro e o objeto passado diretamente para <xref:System.ServiceModel.Activities.ReceiveMessageContent> é o formato de fio.</span><span class="sxs-lookup"><span data-stu-id="3cb86-162">The difference between using <xref:System.ServiceModel.Activities.ReceiveParametersContent> with a single parameter and the object passed directly to <xref:System.ServiceModel.Activities.ReceiveMessageContent> is the wire-format.</span></span> <span data-ttu-id="3cb86-163">O conteúdo do parâmetro é encapsulado em um elemento XML que corresponde ao nome da operação e o objeto serializado é encapsulado em um elemento XML usando o nome do parâmetro (por exemplo, `<Echo><msg>Hello, World</msg></Echo>`).</span><span class="sxs-lookup"><span data-stu-id="3cb86-163">The parameter’s content is wrapped in an XML element that corresponds to the operation name and the serialized object is wrapped in an XML element using the parameter name (for example, `<Echo><msg>Hello, World</msg></Echo>`).</span></span> <span data-ttu-id="3cb86-164">O conteúdo da mensagem não é encapsulado pelo nome da operação.</span><span class="sxs-lookup"><span data-stu-id="3cb86-164">The message content is not wrapped by the operation name.</span></span> <span data-ttu-id="3cb86-165">Em vez disso, o objeto serializado é colocado dentro de um elemento XML usando o nome de tipo qualificado por XML (por exemplo, `<string>Hello, World</string>`).</span><span class="sxs-lookup"><span data-stu-id="3cb86-165">Instead, the serialized object is placed within an XML element using the XML-qualified type name (for example, `<string>Hello, World</string>`).</span></span>

<span data-ttu-id="3cb86-166">As atividades <xref:System.ServiceModel.Activities.Send> e <xref:System.ServiceModel.Activities.SendReply> também têm uma propriedade chamada `Content`.</span><span class="sxs-lookup"><span data-stu-id="3cb86-166">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities also have a property named `Content`.</span></span> <span data-ttu-id="3cb86-167">Essa propriedade é do tipo <xref:System.ServiceModel.Activities.SendContent> e representa os dados que o <xref:System.ServiceModel.Activities.Send> ou a atividade de <xref:System.ServiceModel.Activities.SendReply> envia.</span><span class="sxs-lookup"><span data-stu-id="3cb86-167">This property is of type <xref:System.ServiceModel.Activities.SendContent> and represents data the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity sends.</span></span> <span data-ttu-id="3cb86-168">O .NET Framework define dois tipos relacionados chamados <xref:System.ServiceModel.Activities.SendMessageContent> e <xref:System.ServiceModel.Activities.SendParametersContent> ambos derivam de <xref:System.ServiceModel.Activities.SendContent>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-168">The .NET Framework defines two related types called <xref:System.ServiceModel.Activities.SendMessageContent> and <xref:System.ServiceModel.Activities.SendParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.SendContent>.</span></span> <span data-ttu-id="3cb86-169">Defina a propriedade `Content` da atividade de <xref:System.ServiceModel.Activities.Send> ou <xref:System.ServiceModel.Activities.SendReply> como uma instância de um desses tipos para enviar dados de um serviço de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="3cb86-169">Set the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity’s `Content` property to an instance of one of these types to send data from a workflow service.</span></span> <span data-ttu-id="3cb86-170">O tipo a ser usado depende do tipo de dados que a atividade envia.</span><span class="sxs-lookup"><span data-stu-id="3cb86-170">The type to use depends upon the type of data the activity sends.</span></span> <span data-ttu-id="3cb86-171">Se a atividade enviar um objeto `Message` ou um tipo de contrato de mensagem, use <xref:System.ServiceModel.Activities.SendMessageContent>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-171">If the activity sends a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.SendMessageContent>.</span></span> <span data-ttu-id="3cb86-172">Se a atividade enviar um tipo de contrato de dados, use <xref:System.ServiceModel.Activities.SendParametersContent>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-172">If the activity sends a data contract type use <xref:System.ServiceModel.Activities.SendParametersContent>.</span></span> <span data-ttu-id="3cb86-173"><xref:System.ServiceModel.Activities.SendParametersContent> permite que você envie vários parâmetros, enquanto <xref:System.ServiceModel.Activities.SendMessageContent> só permite enviar um objeto, a mensagem (ou o tipo de contrato de mensagem).</span><span class="sxs-lookup"><span data-stu-id="3cb86-173"><xref:System.ServiceModel.Activities.SendParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.SendMessageContent> only allows you to send one object, the message (or the message contract type).</span></span>

<span data-ttu-id="3cb86-174">Ao programar imperativamente com as atividades de mensagens, você usa o <xref:System.Activities.InArgument%601> genérico e <xref:System.Activities.OutArgument%601> para encapsular os objetos atribuídos às propriedades da mensagem ou dos parâmetros das atividades <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Receive>e <xref:System.ServiceModel.Activities.ReceiveReply>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-174">When programming imperatively with the messaging activities, you use the generic <xref:System.Activities.InArgument%601> and <xref:System.Activities.OutArgument%601> to wrap the objects you assign to the message or parameters properties of the <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Receive>, and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="3cb86-175">Use <xref:System.Activities.InArgument%601> para as atividades <xref:System.ServiceModel.Activities.Send> e <xref:System.ServiceModel.Activities.SendReply> e <xref:System.Activities.OutArgument%601> para atividades <xref:System.ServiceModel.Activities.Receive> e <xref:System.ServiceModel.Activities.ReceiveReply>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-175">Use <xref:System.Activities.InArgument%601> for the <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities and <xref:System.Activities.OutArgument%601> for <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="3cb86-176">`In` argumentos são usados com as atividades Send porque os dados estão sendo passados para as atividades.</span><span class="sxs-lookup"><span data-stu-id="3cb86-176">`In` arguments are used with the send activities because the data is being passed into the activities.</span></span> <span data-ttu-id="3cb86-177">`Out` argumentos são usados com as atividades Receive porque os dados estão sendo passados das atividades, conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="3cb86-177">`Out` arguments are used with the receive activities because data is being passed out of the activities, as shown in the following example.</span></span>

```csharp
Receive reserveSeat = new Receive
{
    ...
    Content = new ReceiveParametersContent
    {
        Parameters =
        {
            { "ReservationInfo", new OutArgument<ReservationRequest>(reservationInfo) }
        }
    }
};
SendReply reserveSeat = new SendReply
{
    ...
    Request = reserveSeat,
    Content = new SendParametersContent
    {
        Parameters =
        {
            { "ReservationId", new InArgument<string>(reservationId) }
        }
    },
};
```

<span data-ttu-id="3cb86-178">Ao implementar um serviço de fluxo de trabalho que define uma operação de solicitação/resposta que retorna void, você deve instanciar uma atividade de <xref:System.ServiceModel.Activities.SendReply> e definir a propriedade <xref:System.ServiceModel.Activities.SendReply.Content%2A> como uma instância vazia de um dos tipos de conteúdo (<xref:System.ServiceModel.Activities.SendMessageContent> ou <xref:System.ServiceModel.Activities.SendParametersContent>), conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="3cb86-178">When implementing a workflow service that defines a request/response operation that returns void, you must instantiate a <xref:System.ServiceModel.Activities.SendReply> activity and set the <xref:System.ServiceModel.Activities.SendReply.Content%2A> property to an empty instance of one of the content types (<xref:System.ServiceModel.Activities.SendMessageContent> or <xref:System.ServiceModel.Activities.SendParametersContent>) as shown in the following example.</span></span>

```csharp
Receive rcv = new Receive()
{
ServiceContractName = "IService",
OperationName = "NullReturningContract",
Content = new ReceiveParametersContent( new Dictionary<string, OutArgument>() { { "message", new OutArgument<string>() } } )
};
SendReply sr = new SendReply()
{
Request = rcv
   Content = new SendParametersContent();
};
```

## <a name="add-service-reference"></a><span data-ttu-id="3cb86-179">Adicionar referência de serviço</span><span class="sxs-lookup"><span data-stu-id="3cb86-179">Add service reference</span></span>

<span data-ttu-id="3cb86-180">Ao chamar um serviço de fluxo de trabalho de um aplicativo de fluxo de trabalho, o Visual Studio 2012 gera atividades de mensagens personalizadas que encapsulam as <xref:System.ServiceModel.Activities.Send> usuais e <xref:System.ServiceModel.Activities.ReceiveReply> atividades usadas em um MEP de solicitação/resposta.</span><span class="sxs-lookup"><span data-stu-id="3cb86-180">When calling a workflow service from a workflow application, Visual Studio 2012 generates custom messaging activities that encapsulate the usual <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply> activities used in a request/reply MEP.</span></span> <span data-ttu-id="3cb86-181">Para usar esse recurso, clique com o botão direito do mouse no projeto cliente no Visual Studio e selecione **adicionar** > **referência de serviço**.</span><span class="sxs-lookup"><span data-stu-id="3cb86-181">To use this feature, right-click the client project in Visual Studio and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="3cb86-182">Digite o endereço base do serviço na caixa endereço e clique em ir.</span><span class="sxs-lookup"><span data-stu-id="3cb86-182">Type the base address of the service in the address box and click Go.</span></span> <span data-ttu-id="3cb86-183">Os serviços disponíveis são exibidos na caixa **Serviços:** .</span><span class="sxs-lookup"><span data-stu-id="3cb86-183">The available services are displayed in the **Services:** box.</span></span> <span data-ttu-id="3cb86-184">Expanda o nó de serviço para exibir os contratos com suporte.</span><span class="sxs-lookup"><span data-stu-id="3cb86-184">Expand the service node to display the contracts supported.</span></span> <span data-ttu-id="3cb86-185">Selecione o contrato que você deseja chamar e a lista de operações disponíveis é exibida na caixa **operações** .</span><span class="sxs-lookup"><span data-stu-id="3cb86-185">Select the contract you want to call and the list of available operations is displayed in the **Operations** box.</span></span> <span data-ttu-id="3cb86-186">Em seguida, você pode especificar o namespace para a atividade gerada e clicar em **OK**.</span><span class="sxs-lookup"><span data-stu-id="3cb86-186">You can then specify the namespace for the generated activity and click **OK**.</span></span> <span data-ttu-id="3cb86-187">Em seguida, você verá uma caixa de diálogo que diz que a operação foi concluída com êxito e que as atividades personalizadas geradas estão na caixa de ferramentas depois que você reconstruiu o projeto.</span><span class="sxs-lookup"><span data-stu-id="3cb86-187">You then see a dialog that says the operation completed successfully and that the generated custom activities are in the toolbox after you have rebuilt the project.</span></span> <span data-ttu-id="3cb86-188">Há uma atividade para cada operação definida no contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="3cb86-188">There is one activity for each operation defined on the service contract.</span></span> <span data-ttu-id="3cb86-189">Depois de recriar o projeto, você pode arrastar e soltar as atividades personalizadas em seu fluxo de trabalho e definir todas as propriedades necessárias na janela Propriedades.</span><span class="sxs-lookup"><span data-stu-id="3cb86-189">After rebuilding the project you can drag and drop the custom activities onto your workflow and set any required properties in the properties window.</span></span>

## <a name="messaging-activity-templates"></a><span data-ttu-id="3cb86-190">Modelos de atividade de mensagens</span><span class="sxs-lookup"><span data-stu-id="3cb86-190">Messaging activity templates</span></span>

<span data-ttu-id="3cb86-191">Para facilitar a configuração de um MEP de solicitação/resposta no cliente e no serviço, o Visual Studio 2012 fornece dois modelos de atividade de mensagens.</span><span class="sxs-lookup"><span data-stu-id="3cb86-191">To make setting up a request/response MEP on the client and service easier, Visual Studio 2012 provides two messaging activity templates.</span></span> <span data-ttu-id="3cb86-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply` é usado no serviço e `System.ServiceModel.Activities.Design.SendAndReceiveReply` é usado no cliente.</span><span class="sxs-lookup"><span data-stu-id="3cb86-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply` is used on the service and `System.ServiceModel.Activities.Design.SendAndReceiveReply` is used on the client.</span></span> <span data-ttu-id="3cb86-193">Em ambos os casos, os modelos adicionam as atividades de mensagens apropriadas ao seu fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="3cb86-193">In both cases the templates add the appropriate messaging activities to your workflow.</span></span> <span data-ttu-id="3cb86-194">No serviço, o `System.ServiceModel.Activities.Design.ReceiveAndSendReply` adiciona uma atividade de <xref:System.ServiceModel.Activities.Receive> seguida por uma atividade de <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-194">On the service, the `System.ServiceModel.Activities.Design.ReceiveAndSendReply` adds a <xref:System.ServiceModel.Activities.Receive> activity followed by a <xref:System.ServiceModel.Activities.SendReply> activity.</span></span> <span data-ttu-id="3cb86-195">A propriedade <xref:System.ServiceModel.Activities.SendReply.Request> é definida automaticamente para a atividade de <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-195">The <xref:System.ServiceModel.Activities.SendReply.Request> property is automatically set to the <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="3cb86-196">No cliente, o `System.ServiceModel.Activities.Design.SendAndReceiveReply` adiciona uma atividade de <xref:System.ServiceModel.Activities.Send> seguida por uma <xref:System.ServiceModel.Activities.ReceiveReply>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-196">On the client, the `System.ServiceModel.Activities.Design.SendAndReceiveReply` adds a <xref:System.ServiceModel.Activities.Send> activity followed by a <xref:System.ServiceModel.Activities.ReceiveReply>.</span></span> <span data-ttu-id="3cb86-197">A propriedade <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> é definida automaticamente para a atividade de <xref:System.ServiceModel.Activities.Send>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-197">The <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property is automatically set to the <xref:System.ServiceModel.Activities.Send> activity.</span></span> <span data-ttu-id="3cb86-198">Para usar esses modelos, basta arrastar e soltar o modelo apropriado no fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="3cb86-198">To use these templates, just drag and drop the appropriate template onto your workflow.</span></span>

## <a name="messaging-activities-and-transactions"></a><span data-ttu-id="3cb86-199">Atividades e transações de mensagens</span><span class="sxs-lookup"><span data-stu-id="3cb86-199">Messaging activities and transactions</span></span>

<span data-ttu-id="3cb86-200">Quando uma chamada é feita a um serviço de fluxo de trabalho, você pode querer fluir uma transação para a operação de serviço.</span><span class="sxs-lookup"><span data-stu-id="3cb86-200">When a call is made to a workflow service you may want to flow a transaction to the service operation.</span></span> <span data-ttu-id="3cb86-201">Para fazer isso, coloque a atividade de <xref:System.ServiceModel.Activities.Receive> em uma atividade de <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-201">To do this place the <xref:System.ServiceModel.Activities.Receive> activity within a <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity.</span></span> <span data-ttu-id="3cb86-202">A atividade de <xref:System.ServiceModel.Activities.TransactedReceiveScope> contém uma atividade de `Receive` e um corpo.</span><span class="sxs-lookup"><span data-stu-id="3cb86-202">The <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity contains a `Receive` activity and a body.</span></span> <span data-ttu-id="3cb86-203">A transação flui para o serviço permanece em ambiente durante a execução do corpo do <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span><span class="sxs-lookup"><span data-stu-id="3cb86-203">The transaction flowed to the service remains ambient throughout the execution of the body of the <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span></span> <span data-ttu-id="3cb86-204">A transação é concluída quando o corpo termina de ser executado.</span><span class="sxs-lookup"><span data-stu-id="3cb86-204">The transaction is completed when the body finishes executing.</span></span> <span data-ttu-id="3cb86-205">Para obter mais informações sobre fluxos de trabalho e transações, consulte [Transações de fluxo de trabalho](../../../../docs/framework/windows-workflow-foundation/workflow-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="3cb86-205">For more information about workflows and transactions see [Workflow Transactions](../../../../docs/framework/windows-workflow-foundation/workflow-transactions.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="3cb86-206">Veja também</span><span class="sxs-lookup"><span data-stu-id="3cb86-206">See also</span></span>

- [<span data-ttu-id="3cb86-207">Como enviar e receber falhas nos serviços de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="3cb86-207">How to Send and Receive Faults in Workflow Services</span></span>](https://go.microsoft.com/fwlink/?LinkId=189151)
- [<span data-ttu-id="3cb86-208">Criando um serviço de fluxo de trabalho de longa execução</span><span class="sxs-lookup"><span data-stu-id="3cb86-208">Creating a Long-running Workflow Service</span></span>](creating-a-long-running-workflow-service.md)
