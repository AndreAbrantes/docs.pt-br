---
title: 'Como: Hospedar um serviço de fluxo de trabalho com o Windows Server App Fabric'
ms.date: 03/30/2017
ms.assetid: 83b62cce-5fc2-4c6d-b27c-5742ba3bac73
ms.openlocfilehash: 94eff2a01c70e34e57ff153d0cbdef44b6377b01
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/23/2019
ms.locfileid: "54651182"
---
# <a name="how-to-host-a-workflow-service-with-windows-server-app-fabric"></a><span data-ttu-id="f2278-102">Como: Hospedar um serviço de fluxo de trabalho com o Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="f2278-102">How to: Host a Workflow Service with Windows Server App Fabric</span></span>
<span data-ttu-id="f2278-103">Hospedagem de serviços de fluxo de trabalho na tela do aplicativo é semelhante ao hospedarmos no IIS / WAS.</span><span class="sxs-lookup"><span data-stu-id="f2278-103">Hosting workflow services in App Fabric is similar to hosting under IIS/WAS.</span></span> <span data-ttu-id="f2278-104">A única diferença é que as ferramentas que do App Fabric fornece para implantação, monitoramento e gerenciamento de serviços de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="f2278-104">The only difference is the tools App Fabric provides for deploying, monitoring, and managing workflow services.</span></span> <span data-ttu-id="f2278-105">Este tópico usa o serviço de fluxo de trabalho criado a [criando um serviço de fluxo de trabalho de longa execução](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md).</span><span class="sxs-lookup"><span data-stu-id="f2278-105">This topic uses the workflow service created in the [Creating a Long-running Workflow Service](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md).</span></span> <span data-ttu-id="f2278-106">Esse tópico orientará você pela criação de um serviço de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="f2278-106">That topic will walk you through creating a workflow service.</span></span> <span data-ttu-id="f2278-107">Este tópico explica como hospedar o serviço de fluxo de trabalho usando a malha de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="f2278-107">This topic will explain how to host the workflow service using App Fabric.</span></span> <span data-ttu-id="f2278-108">Para obter mais informações sobre o Windows Server AppFabric, consulte [documentação do Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkID=193037&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="f2278-108">For more information about Windows Server App Fabric, see [Windows Server App Fabric Documentation](https://go.microsoft.com/fwlink/?LinkID=193037&clcid=0x409).</span></span> <span data-ttu-id="f2278-109">Antes de concluir as etapas a seguir, certifique-se de que ter o Windows Server App Fabric instalado.</span><span class="sxs-lookup"><span data-stu-id="f2278-109">Before completing the steps below make sure you have Windows Server App Fabric installed.</span></span>  <span data-ttu-id="f2278-110">Para fazer isso, abra os serviços de informações da Internet (inetmgr.exe), clique no nome de servidor na **conexões** exibir, clique em Sites e clique em **Default Web Site**.</span><span class="sxs-lookup"><span data-stu-id="f2278-110">To do this open up Internet Information Services (inetmgr.exe), click your server name in the **Connections** view, click Sites, and click **Default Web Site**.</span></span> <span data-ttu-id="f2278-111">No lado direito da tela, você deve ver uma seção chamada **App Fabric**.</span><span class="sxs-lookup"><span data-stu-id="f2278-111">In the right-hand side of the screen you should see a section called **App Fabric**.</span></span> <span data-ttu-id="f2278-112">Se você não vir essa seção (vai estar na parte superior do painel à direita) não tem malha de aplicativos instalada.</span><span class="sxs-lookup"><span data-stu-id="f2278-112">If you don’t see this section (it will be on the top of the right-hand pane) you do not have App Fabric installed.</span></span> <span data-ttu-id="f2278-113">Para obter mais informações sobre como instalar o Windows Server AppFabric, consulte [instalando o Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkId=193136).</span><span class="sxs-lookup"><span data-stu-id="f2278-113">For more information about installing Windows Server App Fabric see [Installing Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkId=193136).</span></span>  
  
### <a name="creating-a-simple-workflow-service"></a><span data-ttu-id="f2278-114">Criando um serviço de fluxo de trabalho simples</span><span class="sxs-lookup"><span data-stu-id="f2278-114">Creating a Simple Workflow Service</span></span>  
  
1.  <span data-ttu-id="f2278-115">Abra o Visual Studio 2012 e carregar a solução de OrderProcessing criado na [criando um serviço de fluxo de trabalho de longa execução](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md) tópico.</span><span class="sxs-lookup"><span data-stu-id="f2278-115">Open Visual Studio 2012 and load the OrderProcessing solution you created in the [Creating a Long-running Workflow Service](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md) topic.</span></span>  
  
2.  <span data-ttu-id="f2278-116">Clique com botão direito do **OrderService** do projeto e selecione **propriedades** e selecione o **Web** guia.</span><span class="sxs-lookup"><span data-stu-id="f2278-116">Right click the **OrderService** project and select **Properties** and select the **Web** tab.</span></span>  
  
3.  <span data-ttu-id="f2278-117">No **iniciar ação** selecione a seção da página de propriedades **página específica** e digite Service1.xamlx na caixa de edição.</span><span class="sxs-lookup"><span data-stu-id="f2278-117">In the **Start Action** section of the property page select **Specific Page** and type Service1.xamlx in the edit box.</span></span>  
  
4.  <span data-ttu-id="f2278-118">No **servidores** selecione a seção da página de propriedades **usar servidor Web do IIS Local** e digite a seguinte URL: `http://localhost/OrderService`.</span><span class="sxs-lookup"><span data-stu-id="f2278-118">In the **Servers** section of the property page select **Use Local IIS Web Server** and type in the following URL: `http://localhost/OrderService`.</span></span>  
  
5.  <span data-ttu-id="f2278-119">Clique o **criar diretório Virtual** botão.</span><span class="sxs-lookup"><span data-stu-id="f2278-119">Click the **Create Virtual Directory** button.</span></span> <span data-ttu-id="f2278-120">Isso criará um novo diretório virtual e configurar o projeto para copiar os arquivos necessários para o diretório virtual quando o projeto é compilado.</span><span class="sxs-lookup"><span data-stu-id="f2278-120">This will create a new virtual directory and set up the project to copy the needed files to the virtual directory when the project is built.</span></span>  <span data-ttu-id="f2278-121">Como alternativa, você poderia copiar manualmente o. xamlx, Web. config e todas as DLLs necessárias para o diretório virtual.</span><span class="sxs-lookup"><span data-stu-id="f2278-121">Alternatively you could manually copy the .xamlx, the web.config, and any needed DLLs to the virtual directory.</span></span>  
  
### <a name="configuring-a-workflow-service-hosted-in-windows-server-app-fabric"></a><span data-ttu-id="f2278-122">Configurar um serviço de fluxo de trabalho hospedado no Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="f2278-122">Configuring a Workflow Service Hosted in Windows Server App Fabric</span></span>  
  
1.  <span data-ttu-id="f2278-123">Abra o Gerenciador de serviços de informações da Internet (inetmgr.exe).</span><span class="sxs-lookup"><span data-stu-id="f2278-123">Open Internet Information Services Manager (inetmgr.exe).</span></span>  
  
2.  <span data-ttu-id="f2278-124">Navegue até o diretório virtual de OrderService na **conexões** painel.</span><span class="sxs-lookup"><span data-stu-id="f2278-124">Navigate to the OrderService virtual directory in the **Connections** pane.</span></span>  
  
3.  <span data-ttu-id="f2278-125">Clique com botão direito OrderService e selecione **gerenciar serviços WCF e WF**, **configurar...** .</span><span class="sxs-lookup"><span data-stu-id="f2278-125">Right click OrderService and select **Manage WCF and WF Services**, **Configure…**.</span></span> <span data-ttu-id="f2278-126">O **configurar WCF e WF do aplicativo** caixa de diálogo é exibida.</span><span class="sxs-lookup"><span data-stu-id="f2278-126">The **Configure WCF and WF for Application** dialog box is displayed.</span></span>  
  
4.  <span data-ttu-id="f2278-127">Selecione o **geral** guia para exibir informações gerais sobre o aplicativo, conforme mostrado na seguinte captura de tela.</span><span class="sxs-lookup"><span data-stu-id="f2278-127">Select the **General** tab to display general information about the application as shown in the following screen shot.</span></span>  
  
     <span data-ttu-id="f2278-128">![Guia geral da caixa de diálogo Configuração de malha do aplicativo](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-general.gif "AppFabricConfiguration-geral")</span><span class="sxs-lookup"><span data-stu-id="f2278-128">![General tab of the App Fabric Configuration dialog](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-general.gif "AppFabricConfiguration-General")</span></span>  
  
5.  <span data-ttu-id="f2278-129">Selecione o **monitoramento** guia. Isso mostra várias configurações de monitoramento, conforme mostrado na seguinte captura de tela.</span><span class="sxs-lookup"><span data-stu-id="f2278-129">Select the **Monitoring** tab. This shows various monitoring settings as shown in the following screen shot.</span></span>  
  
     <span data-ttu-id="f2278-130">![Guia do aplicativo de monitoramento da configuração de malha](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration-monitoramento")</span><span class="sxs-lookup"><span data-stu-id="f2278-130">![App Fabric Configuration Monitoring tab](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration-Monitoring")</span></span>  
  
     <span data-ttu-id="f2278-131">Para obter mais informações sobre como configurar o serviço de fluxo de trabalho de monitoramento na tela do aplicativo ver [Configurando o monitoramento com o App Fabric](https://go.microsoft.com/fwlink/?LinkId=193153).</span><span class="sxs-lookup"><span data-stu-id="f2278-131">For more information about configuring workflow service monitoring in App Fabric see [Configuring monitoring with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193153).</span></span>  
  
6.  <span data-ttu-id="f2278-132">Selecione o **persistência de fluxo de trabalho** guia. Isso permite que você configure seu aplicativo para usar o provedor de persistência de padrão do App Fabric conforme mostrado na seguinte captura de tela.</span><span class="sxs-lookup"><span data-stu-id="f2278-132">Select the **Workflow Persistence** tab. This allows you to configure your application to use App Fabric’s default persistence provider as shown in the following screen shot.</span></span>  
  
     <span data-ttu-id="f2278-133">![Configuração de malha de aplicativos &#45; persistência](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-persistence.gif "AppFabricConfiguration persistência")</span><span class="sxs-lookup"><span data-stu-id="f2278-133">![App Fabric Configuration &#45; Persistence](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-persistence.gif "AppFabricConfiguration-Persistence")</span></span>  
  
     <span data-ttu-id="f2278-134">Para obter mais informações sobre como configurar a persistência de fluxo de trabalho no Windows Server AppFabric, consulte [configurar a persistência de fluxo de trabalho na tela do aplicativo](https://go.microsoft.com/fwlink/?LinkId=193148).</span><span class="sxs-lookup"><span data-stu-id="f2278-134">For more information about configuring workflow persistence in Windows Server App Fabric see [Configuring Workflow Persistence in App Fabric](https://go.microsoft.com/fwlink/?LinkId=193148).</span></span>  
  
7.  <span data-ttu-id="f2278-135">Selecione o **gerenciamento de Host de fluxo de trabalho** guia. Isso permite que você especifique quando as instâncias de serviço de fluxo de trabalho ocioso devem ser descarregadas e persistente como mostrado na seguinte captura de tela.</span><span class="sxs-lookup"><span data-stu-id="f2278-135">Select the **Workflow Host Management** tab. This allows you to specify when idle workflow service instances should be unloaded and persisted as shown in the following screen shot.</span></span>  
  
     <span data-ttu-id="f2278-136">![Gerenciamento de Host de fluxo de trabalho de configuração de malha de aplicativos](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-management.gif "AppFabricConfiguration-gerenciamento")</span><span class="sxs-lookup"><span data-stu-id="f2278-136">![App Fabric Configuration  Workflow Host Management](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-management.gif "AppFabricConfiguration-Management")</span></span>  
  
     <span data-ttu-id="f2278-137">Para obter mais informações sobre a configuração de gerenciamento de host de fluxo de trabalho, consulte [Configurando o gerenciamento de Host de fluxo de trabalho na tela do aplicativo](https://go.microsoft.com/fwlink/?LinkId=193151).</span><span class="sxs-lookup"><span data-stu-id="f2278-137">For more information about workflow host management configuration see [Configuring Workflow Host Management in App Fabric](https://go.microsoft.com/fwlink/?LinkId=193151).</span></span>  
  
8.  <span data-ttu-id="f2278-138">Selecione o **Auto-Start** guia. Isso permite que você especifique configurações de inicialização automática para os serviços de fluxo de trabalho no aplicativo, conforme mostrado na seguinte captura de tela.</span><span class="sxs-lookup"><span data-stu-id="f2278-138">Select the **Auto-Start** tab. This allows you to specify auto-start settings for the workflow services in the application as shown in the following screen shot.</span></span>  
  
     <span data-ttu-id="f2278-139">![Automático da malha de aplicativo&#45;Iniciar configuração](../../../../docs/framework/wcf/feature-details/media/appfabricconfigurationautostart.gif "AppFabricConfigurationAutostart")</span><span class="sxs-lookup"><span data-stu-id="f2278-139">![App Fabric Auto&#45;start configuration](../../../../docs/framework/wcf/feature-details/media/appfabricconfigurationautostart.gif "AppFabricConfigurationAutostart")</span></span>  
  
     <span data-ttu-id="f2278-140">Para obter mais informações sobre como configurar o início automático, consulte [Configurando Auto-Start com App Fabric](https://go.microsoft.com/fwlink/?LinkId=193150).</span><span class="sxs-lookup"><span data-stu-id="f2278-140">For more information about configuring Auto-Start see [Configuring Auto-Start with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193150).</span></span>  
  
9. <span data-ttu-id="f2278-141">Selecione o **limitação** guia. Isso permite que você defina as configurações de limitação para o serviço de fluxo de trabalho, conforme mostrado na seguinte captura de tela.</span><span class="sxs-lookup"><span data-stu-id="f2278-141">Select the **Throttling** tab. This allows you to configure throttling settings for the workflow service as shown in the following screen shot.</span></span>  
  
     <span data-ttu-id="f2278-142">![Limitação da configuração da malha de aplicativos](../../../../docs/framework/wcf/feature-details/media/appfabricconfigurationthrottling.gif "AppFabricConfigurationThrottling")</span><span class="sxs-lookup"><span data-stu-id="f2278-142">![App Fabric configuration throttling](../../../../docs/framework/wcf/feature-details/media/appfabricconfigurationthrottling.gif "AppFabricConfigurationThrottling")</span></span>  
  
     <span data-ttu-id="f2278-143">Para obter mais informações sobre como configurar a limitação, consulte [Configurando a limitação com o App Fabric](https://go.microsoft.com/fwlink/?LinkId=193149).</span><span class="sxs-lookup"><span data-stu-id="f2278-143">For more information about configuring throttling see [Configuring Throttling with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193149).</span></span>  
  
10. <span data-ttu-id="f2278-144">Selecione o **segurança** guia. Isso permite que você defina as configurações de segurança para o aplicativo, conforme mostrado na seguinte captura de tela.</span><span class="sxs-lookup"><span data-stu-id="f2278-144">Select the **Security** tab. This allows you to configure security settings for the application as shown in the following screen shot.</span></span>  
  
     <span data-ttu-id="f2278-145">![Configuração de segurança da malha de aplicativos](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-security.gif "AppFabricConfiguration-segurança")</span><span class="sxs-lookup"><span data-stu-id="f2278-145">![App Fabric Security Configuration](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-security.gif "AppFabricConfiguration-Security")</span></span>  
  
     <span data-ttu-id="f2278-146">Para obter mais informações sobre como configurar a segurança com o Windows Server AppFabric, consulte [Configurando a segurança com o App Fabric](https://go.microsoft.com/fwlink/?LinkId=193152).</span><span class="sxs-lookup"><span data-stu-id="f2278-146">For more information about configuring security with Windows Server App Fabric see [Configuring Security with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193152).</span></span>  
  
### <a name="using-windows-server-app-fabric"></a><span data-ttu-id="f2278-147">Usando o Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="f2278-147">Using Windows Server App Fabric</span></span>  
  
1.  <span data-ttu-id="f2278-148">Compile a solução para copiar os arquivos necessários para o diretório virtual.</span><span class="sxs-lookup"><span data-stu-id="f2278-148">Build the solution to copy the necessary files to the virtual directory.</span></span>  
  
2.  <span data-ttu-id="f2278-149">Com o botão direito do mouse no projeto OrderClient e selecione **Debug**, **iniciar nova instância** para iniciar o aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="f2278-149">Right click the OrderClient project and select **Debug**, **Start New Instance** to launch the client application.</span></span>  
  
3.  <span data-ttu-id="f2278-150">O cliente será executado e o Visual Studio exibirá um **anexar aviso de segurança** caixa de diálogo, clique o **não anexar** botão.</span><span class="sxs-lookup"><span data-stu-id="f2278-150">The client will run and Visual Studio will display an **Attach Security Warning** dialog box, click the **Don’t Attach** button.</span></span> <span data-ttu-id="f2278-151">Isso informa ao Visual Studio não anexar ao processo do IIS para depuração.</span><span class="sxs-lookup"><span data-stu-id="f2278-151">This tells Visual Studio to not attach to the IIS process for debugging.</span></span>  
  
4.  <span data-ttu-id="f2278-152">O aplicativo cliente será imediatamente chamar o serviço de fluxo de trabalho e, em seguida, aguarde.</span><span class="sxs-lookup"><span data-stu-id="f2278-152">The client application will immediately call the Workflow service and then wait.</span></span> <span data-ttu-id="f2278-153">O serviço de fluxo de trabalho ficará ocioso e ser persistente.</span><span class="sxs-lookup"><span data-stu-id="f2278-153">The workflow service will go idle and be persisted.</span></span> <span data-ttu-id="f2278-154">Você pode verificar isso iniciando o Internet Information Services (inetmgr.exe), navegando até o OrderService no painel de conexões e selecioná-la.</span><span class="sxs-lookup"><span data-stu-id="f2278-154">You can verify this by starting Internet Information Services (inetmgr.exe), navigating to the OrderService in the Connections pane and selecting it.</span></span> <span data-ttu-id="f2278-155">Em seguida, clique no ícone do painel de aplicativo da malha no painel à direita.</span><span class="sxs-lookup"><span data-stu-id="f2278-155">Next, click the App Fabric Dashboard icon in the right-hand pane.</span></span> <span data-ttu-id="f2278-156">Em instâncias persistidas do WF, você verá há uma instância de serviço de fluxo de trabalho persistida como mostrado na seguinte captura de tela.</span><span class="sxs-lookup"><span data-stu-id="f2278-156">Under Persisted WF Instances you will see there is one persisted workflow service instance as shown in the following screen shot.</span></span>  
  
     <span data-ttu-id="f2278-157">![Painel da malha de aplicativos](../../../../docs/framework/wcf/feature-details/media/appfabricdashboard.gif "AppFabricDashboard")</span><span class="sxs-lookup"><span data-stu-id="f2278-157">![App Fabric Dashboard](../../../../docs/framework/wcf/feature-details/media/appfabricdashboard.gif "AppFabricDashboard")</span></span>  
  
     <span data-ttu-id="f2278-158">O **histórico de instância de WF** lista informações sobre o serviço de fluxo de trabalho, como o número de ativações do serviço de fluxo de trabalho, o número de conclusões de instância de serviço de fluxo de trabalho e o número de instâncias de fluxo de trabalho com falhas.</span><span class="sxs-lookup"><span data-stu-id="f2278-158">The **WF Instance History** lists information about the workflow service such as the number of workflow service activations, the number of workflow service instance completions, and the number of workflow instances with failures.</span></span> <span data-ttu-id="f2278-159">Em instâncias de ativo ou ocioso que será exibido um link, clicar no link exibirá mais informações sobre as instâncias de fluxo de trabalho ocioso, conforme mostrado na seguinte captura de tela.</span><span class="sxs-lookup"><span data-stu-id="f2278-159">Under Active or Idle instances a link will be displayed, clicking on the link will display more information about the idle workflow instances as shown in the following screen shot.</span></span>  
  
     <span data-ttu-id="f2278-160">![Persistente detalhes da instância de fluxo de trabalho](../../../../docs/framework/wcf/feature-details/media/persisteddetail.gif "PersistedDetail")</span><span class="sxs-lookup"><span data-stu-id="f2278-160">![Persisted Workflow Instance Details](../../../../docs/framework/wcf/feature-details/media/persisteddetail.gif "PersistedDetail")</span></span>  
  
     <span data-ttu-id="f2278-161">Para obter mais informações sobre o Windows Server App Fabric Consulte recursos e como usá-los [recursos de hospedagem do Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkID=193143&clcid=0x409)</span><span class="sxs-lookup"><span data-stu-id="f2278-161">For more information about Windows Server App Fabric features and how to use them see [Windows Server App Fabric Hosting Features](https://go.microsoft.com/fwlink/?LinkID=193143&clcid=0x409)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f2278-162">Consulte também</span><span class="sxs-lookup"><span data-stu-id="f2278-162">See also</span></span>
- [<span data-ttu-id="f2278-163">Criando um serviço de fluxo de trabalho de longa execução</span><span class="sxs-lookup"><span data-stu-id="f2278-163">Creating a Long-running Workflow Service</span></span>](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md)
- [<span data-ttu-id="f2278-164">Recursos de hospedagem do Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="f2278-164">Windows Server App Fabric Hosting Features</span></span>](https://go.microsoft.com/fwlink/?LinkId=193143)
- [<span data-ttu-id="f2278-165">Instalando o Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="f2278-165">Installing Windows Server App Fabric</span></span>](https://go.microsoft.com/fwlink/?LinkId=193136)
- [<span data-ttu-id="f2278-166">Documentação do Windows Server AppFabric</span><span class="sxs-lookup"><span data-stu-id="f2278-166">Windows Server App Fabric Documentation</span></span>](https://go.microsoft.com/fwlink/?LinkID=193037&clcid=0x409)
