---
title: Como hospedar um serviço de fluxo de trabalho com o Windows Server App Fabric
ms.date: 03/30/2017
ms.assetid: 83b62cce-5fc2-4c6d-b27c-5742ba3bac73
ms.openlocfilehash: ecc7a954b2d88cdbcf934cc836e9ad6e3ef7ed52
ms.sourcegitcommit: c01c18755bb7b0f82c7232314ccf7955ea7834db
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/15/2020
ms.locfileid: "75964760"
---
# <a name="how-to-host-a-workflow-service-with-windows-server-app-fabric"></a><span data-ttu-id="40b0a-102">Como hospedar um serviço de fluxo de trabalho com o Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="40b0a-102">How to: Host a Workflow Service with Windows Server App Fabric</span></span>

<span data-ttu-id="40b0a-103">A hospedagem de serviços de fluxo de trabalho no app Fabric é semelhante à hospedagem em IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="40b0a-103">Hosting workflow services in App Fabric is similar to hosting under IIS/WAS.</span></span> <span data-ttu-id="40b0a-104">A única diferença é que as ferramentas do App Fabric fornecem para implantar, monitorar e gerenciar serviços de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="40b0a-104">The only difference is the tools App Fabric provides for deploying, monitoring, and managing workflow services.</span></span> <span data-ttu-id="40b0a-105">Este tópico usa o serviço de fluxo de trabalho criado na [criação de um serviço de fluxo de trabalho de execução longa](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md).</span><span class="sxs-lookup"><span data-stu-id="40b0a-105">This topic uses the workflow service created in the [Creating a Long-running Workflow Service](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md).</span></span> <span data-ttu-id="40b0a-106">Esse tópico orientará você na criação de um serviço de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="40b0a-106">That topic will walk you through creating a workflow service.</span></span> <span data-ttu-id="40b0a-107">Este tópico explicará como hospedar o serviço de fluxo de trabalho usando o app Fabric.</span><span class="sxs-lookup"><span data-stu-id="40b0a-107">This topic will explain how to host the workflow service using App Fabric.</span></span> <span data-ttu-id="40b0a-108">Para obter mais informações sobre a malha de aplicativos do Windows Server, consulte a [documentação do Windows Server app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="40b0a-108">For more information about Windows Server App Fabric, see [Windows Server App Fabric Documentation](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10)).</span></span> <span data-ttu-id="40b0a-109">Antes de concluir as etapas abaixo, verifique se você tem o Windows Server app Fabric instalado.</span><span class="sxs-lookup"><span data-stu-id="40b0a-109">Before completing the steps below make sure you have Windows Server App Fabric installed.</span></span>  <span data-ttu-id="40b0a-110">Para fazer isso, abra Serviços de Informações da Internet (inetmgr. exe), clique no nome do servidor na exibição **conexões** , clique em sites e clique em **site padrão**.</span><span class="sxs-lookup"><span data-stu-id="40b0a-110">To do this open up Internet Information Services (inetmgr.exe), click your server name in the **Connections** view, click Sites, and click **Default Web Site**.</span></span> <span data-ttu-id="40b0a-111">No lado direito da tela, você verá uma seção chamada **app Fabric**.</span><span class="sxs-lookup"><span data-stu-id="40b0a-111">In the right-hand side of the screen you should see a section called **App Fabric**.</span></span> <span data-ttu-id="40b0a-112">Se você não vir esta seção (ela estará na parte superior do painel direito), você não tem o app Fabric instalado.</span><span class="sxs-lookup"><span data-stu-id="40b0a-112">If you don’t see this section (it will be on the top of the right-hand pane) you do not have App Fabric installed.</span></span> <span data-ttu-id="40b0a-113">Para obter mais informações sobre como instalar o Windows Server app Fabric, consulte [instalando o Windows Server app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="40b0a-113">For more information about installing Windows Server App Fabric see [Installing Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10)).</span></span>  
  
### <a name="creating-a-simple-workflow-service"></a><span data-ttu-id="40b0a-114">Criando um serviço de fluxo de trabalho simples</span><span class="sxs-lookup"><span data-stu-id="40b0a-114">Creating a Simple Workflow Service</span></span>  
  
1. <span data-ttu-id="40b0a-115">Abra o Visual Studio 2012 e carregue a solução OrderProcessing que você criou no tópico [criando um serviço de fluxo de trabalho de execução longa](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md) .</span><span class="sxs-lookup"><span data-stu-id="40b0a-115">Open Visual Studio 2012 and load the OrderProcessing solution you created in the [Creating a Long-running Workflow Service](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md) topic.</span></span>  
  
2. <span data-ttu-id="40b0a-116">Clique com o botão direito do mouse no projeto **OrderService** e selecione **Propriedades** e selecione a guia **Web** .</span><span class="sxs-lookup"><span data-stu-id="40b0a-116">Right click the **OrderService** project and select **Properties** and select the **Web** tab.</span></span>  
  
3. <span data-ttu-id="40b0a-117">Na seção **Iniciar ação** da página de propriedades, selecione **página específica** e digite Service1. xamlx na caixa de edição.</span><span class="sxs-lookup"><span data-stu-id="40b0a-117">In the **Start Action** section of the property page select **Specific Page** and type Service1.xamlx in the edit box.</span></span>  
  
4. <span data-ttu-id="40b0a-118">Na seção **servidores** da página de propriedades, selecione **usar servidor Web local do IIS** e digite a seguinte URL: `http://localhost/OrderService`.</span><span class="sxs-lookup"><span data-stu-id="40b0a-118">In the **Servers** section of the property page select **Use Local IIS Web Server** and type in the following URL: `http://localhost/OrderService`.</span></span>  
  
5. <span data-ttu-id="40b0a-119">Clique no botão **criar diretório virtual** .</span><span class="sxs-lookup"><span data-stu-id="40b0a-119">Click the **Create Virtual Directory** button.</span></span> <span data-ttu-id="40b0a-120">Isso criará um novo diretório virtual e configurará o projeto para copiar os arquivos necessários para o diretório virtual quando o projeto for compilado.</span><span class="sxs-lookup"><span data-stu-id="40b0a-120">This will create a new virtual directory and set up the project to copy the needed files to the virtual directory when the project is built.</span></span>  <span data-ttu-id="40b0a-121">Como alternativa, você pode copiar manualmente o. xamlx, o Web. config e todas as DLLs necessárias para o diretório virtual.</span><span class="sxs-lookup"><span data-stu-id="40b0a-121">Alternatively you could manually copy the .xamlx, the web.config, and any needed DLLs to the virtual directory.</span></span>  
  
### <a name="configuring-a-workflow-service-hosted-in-windows-server-app-fabric"></a><span data-ttu-id="40b0a-122">Configurando um serviço de fluxo de trabalho hospedado no Windows Server app Fabric</span><span class="sxs-lookup"><span data-stu-id="40b0a-122">Configuring a Workflow Service Hosted in Windows Server App Fabric</span></span>  
  
1. <span data-ttu-id="40b0a-123">Abra o Gerenciador de Serviços de Informações da Internet (inetmgr. exe).</span><span class="sxs-lookup"><span data-stu-id="40b0a-123">Open Internet Information Services Manager (inetmgr.exe).</span></span>  
  
2. <span data-ttu-id="40b0a-124">Navegue até o diretório virtual OrderService no painel **conexões** .</span><span class="sxs-lookup"><span data-stu-id="40b0a-124">Navigate to the OrderService virtual directory in the **Connections** pane.</span></span>  
  
3. <span data-ttu-id="40b0a-125">Clique com o botão direito do mouse em OrderService e selecione **gerenciar serviços WCF e WF**, **Configurar...** .</span><span class="sxs-lookup"><span data-stu-id="40b0a-125">Right click OrderService and select **Manage WCF and WF Services**, **Configure…**.</span></span> <span data-ttu-id="40b0a-126">A caixa de diálogo **Configurar WCF e WF para o aplicativo** é exibida.</span><span class="sxs-lookup"><span data-stu-id="40b0a-126">The **Configure WCF and WF for Application** dialog box is displayed.</span></span>  
  
4. <span data-ttu-id="40b0a-127">Selecione a guia **geral** para exibir informações gerais sobre o aplicativo, conforme mostrado na captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="40b0a-127">Select the **General** tab to display general information about the application as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="40b0a-128">![Guia Geral da caixa de diálogo de configuração do App Fabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-general.gif "AppFabricConfiguration-geral")</span><span class="sxs-lookup"><span data-stu-id="40b0a-128">![General tab of the App Fabric Configuration dialog](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-general.gif "AppFabricConfiguration-General")</span></span>  
  
5. <span data-ttu-id="40b0a-129">Selecione a guia **monitoramento** . Isso mostra várias configurações de monitoramento, conforme mostrado na captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="40b0a-129">Select the **Monitoring** tab. This shows various monitoring settings as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="40b0a-130">![Guia monitoramento de configuração do App Fabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration-monitoramento")</span><span class="sxs-lookup"><span data-stu-id="40b0a-130">![App Fabric Configuration Monitoring tab](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration-Monitoring")</span></span>  
  
     <span data-ttu-id="40b0a-131">Para obter mais informações sobre como configurar o monitoramento do serviço de fluxo de trabalho no app Fabric, consulte [Configuring Monitoring with app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677384(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="40b0a-131">For more information about configuring workflow service monitoring in App Fabric see [Configuring monitoring with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677384(v=azure.10)).</span></span>  
  
6. <span data-ttu-id="40b0a-132">Selecione a guia **persistência do fluxo de trabalho** . Isso permite que você configure seu aplicativo para usar o provedor de persistência padrão do App Fabric, conforme mostrado na captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="40b0a-132">Select the **Workflow Persistence** tab. This allows you to configure your application to use App Fabric’s default persistence provider as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="40b0a-133">![Persistência de configuração &#45; do App Fabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-persistence.gif "AppFabricConfiguration-persistência")</span><span class="sxs-lookup"><span data-stu-id="40b0a-133">![App Fabric Configuration &#45; Persistence](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-persistence.gif "AppFabricConfiguration-Persistence")</span></span>  
  
     <span data-ttu-id="40b0a-134">Para obter mais informações sobre como configurar a persistência de fluxo de trabalho no Windows Server app Fabric, consulte [Configuring Workflow Persistence in app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677353(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="40b0a-134">For more information about configuring workflow persistence in Windows Server App Fabric see [Configuring Workflow Persistence in App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677353(v=azure.10)).</span></span>  
  
7. <span data-ttu-id="40b0a-135">Selecione a guia **Gerenciamento de host do fluxo de trabalho** . Isso permite que você especifique quando as instâncias de serviço de fluxo de trabalho ocioso devem ser descarregadas e persistidas, conforme mostrado na captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="40b0a-135">Select the **Workflow Host Management** tab. This allows you to specify when idle workflow service instances should be unloaded and persisted as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="40b0a-136">![Gerenciamento de host de fluxo de trabalho de configuração do App Fabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-management.gif "AppFabricConfiguration-gerenciamento")</span><span class="sxs-lookup"><span data-stu-id="40b0a-136">![App Fabric Configuration  Workflow Host Management](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-management.gif "AppFabricConfiguration-Management")</span></span>  
  
     <span data-ttu-id="40b0a-137">Para obter mais informações sobre a configuração de gerenciamento de host de fluxo de trabalho, consulte [Configuring Workflow host Management in app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff383424(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="40b0a-137">For more information about workflow host management configuration see [Configuring Workflow Host Management in App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff383424(v=azure.10)).</span></span>  
  
8. <span data-ttu-id="40b0a-138">Selecione a guia **início automático** . Isso permite que você especifique configurações de início automático para os serviços de fluxo de trabalho no aplicativo, conforme mostrado na captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="40b0a-138">Select the **Auto-Start** tab. This allows you to specify auto-start settings for the workflow services in the application as shown in the following screenshot.</span></span>  
  
     ![Captura de tela que mostra a&#45;configuração de início automático do App Fabric.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-auto-start-configuration.gif)  
  
     <span data-ttu-id="40b0a-140">Para obter mais informações sobre como configurar o início automático, consulte [Configurando o início automático com o app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="40b0a-140">For more information about configuring Auto-Start see [Configuring Auto-Start with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span></span>  
  
9. <span data-ttu-id="40b0a-141">Selecione a guia **limitação** . Isso permite que você defina as configurações de limitação para o serviço de fluxo de trabalho, conforme mostrado na captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="40b0a-141">Select the **Throttling** tab. This allows you to configure throttling settings for the workflow service as shown in the following screenshot.</span></span>  
  
     ![Captura de tela que mostra a configuração de limitação do App Fabric.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-throttling-configuration.gif)  
  
     <span data-ttu-id="40b0a-143">Para obter mais informações sobre como configurar a limitação, consulte [Configurando a limitação com o app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="40b0a-143">For more information about configuring throttling see [Configuring Throttling with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677261(v=azure.10)).</span></span>  
  
10. <span data-ttu-id="40b0a-144">Selecione a guia **segurança** . Isso permite que você defina as configurações de segurança para o aplicativo, conforme mostrado na captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="40b0a-144">Select the **Security** tab. This allows you to configure security settings for the application as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="40b0a-145">![Configuração de segurança do App Fabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-security.gif "AppFabricConfiguration-segurança")</span><span class="sxs-lookup"><span data-stu-id="40b0a-145">![App Fabric Security Configuration](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-security.gif "AppFabricConfiguration-Security")</span></span>  
  
     <span data-ttu-id="40b0a-146">Para obter mais informações sobre como configurar a segurança com o Windows Server app Fabric, consulte [Configurando a segurança com o app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677278(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="40b0a-146">For more information about configuring security with Windows Server App Fabric see [Configuring Security with App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677278(v=azure.10)).</span></span>  
  
### <a name="using-windows-server-app-fabric"></a><span data-ttu-id="40b0a-147">Usando a malha de aplicativos do Windows Server</span><span class="sxs-lookup"><span data-stu-id="40b0a-147">Using Windows Server App Fabric</span></span>  
  
1. <span data-ttu-id="40b0a-148">Compile a solução para copiar os arquivos necessários para o diretório virtual.</span><span class="sxs-lookup"><span data-stu-id="40b0a-148">Build the solution to copy the necessary files to the virtual directory.</span></span>  
  
2. <span data-ttu-id="40b0a-149">Clique com o botão direito do mouse no projeto OrderClient e selecione **depurar**, **inicie a nova instância** para iniciar o aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="40b0a-149">Right click the OrderClient project and select **Debug**, **Start New Instance** to launch the client application.</span></span>  
  
3. <span data-ttu-id="40b0a-150">O cliente será executado e o Visual Studio exibirá uma caixa de diálogo de **aviso de segurança de anexo** , clique no botão **não anexar** .</span><span class="sxs-lookup"><span data-stu-id="40b0a-150">The client will run and Visual Studio will display an **Attach Security Warning** dialog box, click the **Don’t Attach** button.</span></span> <span data-ttu-id="40b0a-151">Isso diz ao Visual Studio para não anexar ao processo do IIS para depuração.</span><span class="sxs-lookup"><span data-stu-id="40b0a-151">This tells Visual Studio to not attach to the IIS process for debugging.</span></span>  
  
4. <span data-ttu-id="40b0a-152">O aplicativo cliente chamará imediatamente o serviço de fluxo de trabalho e aguardará.</span><span class="sxs-lookup"><span data-stu-id="40b0a-152">The client application will immediately call the Workflow service and then wait.</span></span> <span data-ttu-id="40b0a-153">O serviço de fluxo de trabalho ficará ocioso e persistirá.</span><span class="sxs-lookup"><span data-stu-id="40b0a-153">The workflow service will go idle and be persisted.</span></span> <span data-ttu-id="40b0a-154">Você pode verificar isso iniciando Serviços de Informações da Internet (inetmgr. exe), navegando até OrderService no painel conexões e selecionando-o.</span><span class="sxs-lookup"><span data-stu-id="40b0a-154">You can verify this by starting Internet Information Services (inetmgr.exe), navigating to the OrderService in the Connections pane and selecting it.</span></span> <span data-ttu-id="40b0a-155">Em seguida, clique no ícone do painel do App Fabric no painel à direita.</span><span class="sxs-lookup"><span data-stu-id="40b0a-155">Next, click the App Fabric Dashboard icon in the right-hand pane.</span></span> <span data-ttu-id="40b0a-156">Em instâncias persistentes do WF, você verá que há uma instância de serviço de fluxo de trabalho persistente, conforme mostrado na captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="40b0a-156">Under Persisted WF Instances you will see there is one persisted workflow service instance as shown in the following screenshot.</span></span>  
  
     ![Captura de tela que mostra o painel do App Fabric.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-dashboard.gif)  
  
     <span data-ttu-id="40b0a-158">O **histórico de instâncias do WF** lista informações sobre o serviço de fluxo de trabalho, como o número de ativações do serviço de fluxo de trabalho, o número de conclusões da instância do serviço de fluxo de trabalho e o número de instâncias de fluxo de trabalho com falhas.</span><span class="sxs-lookup"><span data-stu-id="40b0a-158">The **WF Instance History** lists information about the workflow service such as the number of workflow service activations, the number of workflow service instance completions, and the number of workflow instances with failures.</span></span> <span data-ttu-id="40b0a-159">Em instâncias ativas ou ociosas, um link será exibido, clicando no link exibirá mais informações sobre as instâncias de fluxo de trabalho ocioso, conforme mostrado na captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="40b0a-159">Under Active or Idle instances a link will be displayed, clicking on the link will display more information about the idle workflow instances as shown in the following screenshot.</span></span>  
  
     ![Captura de tela que mostra detalhes da instância de fluxo de trabalho persistente.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/persisted-workflow-instance-detail.gif)  
  
     <span data-ttu-id="40b0a-161">Para obter mais informações sobre os recursos do Windows Server app Fabric e como usá-los, consulte [recursos de hospedagem do Windows Server app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="40b0a-161">For more information about Windows Server App Fabric features and how to use them see [Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="40b0a-162">Veja também</span><span class="sxs-lookup"><span data-stu-id="40b0a-162">See also</span></span>

- [<span data-ttu-id="40b0a-163">Criando um serviço de fluxo de trabalho de longa execução</span><span class="sxs-lookup"><span data-stu-id="40b0a-163">Creating a Long-running Workflow Service</span></span>](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md)
- <span data-ttu-id="40b0a-164">[Recursos de hospedagem do Windows Server app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="40b0a-164">[Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>
- <span data-ttu-id="40b0a-165">[Instalando o Windows Server app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="40b0a-165">[Installing Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee790960(v=azure.10))</span></span>
- <span data-ttu-id="40b0a-166">[Documentação do Windows Server app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="40b0a-166">[Windows Server App Fabric Documentation](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10))</span></span>
