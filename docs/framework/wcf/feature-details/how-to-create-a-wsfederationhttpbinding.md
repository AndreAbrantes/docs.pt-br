---
title: Como criar uma WSFederationHttpBinding
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, federation
- federation
ms.assetid: e54897d7-aa6c-46ec-a278-b2430c8c2e10
caps.latest.revision: "16"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 22322c7b8cd03abcf3a98c49b9d43125b37d956d
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/22/2017
---
# <a name="how-to-create-a-wsfederationhttpbinding"></a><span data-ttu-id="cf610-102">Como criar uma WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="cf610-102">How to: Create a WSFederationHttpBinding</span></span>
<span data-ttu-id="cf610-103">Em [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], o <xref:System.ServiceModel.WSFederationHttpBinding> classe ([\<wsFederationHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) na configuração) fornece um mecanismo para expor um serviço federado.</span><span class="sxs-lookup"><span data-stu-id="cf610-103">In [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], the <xref:System.ServiceModel.WSFederationHttpBinding> class ([\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) in configuration) provides a mechanism for exposing a federated service.</span></span> <span data-ttu-id="cf610-104">Ou seja, um serviço que exige que os clientes se autentiquem usando um token de segurança emitido por um serviço de token de segurança.</span><span class="sxs-lookup"><span data-stu-id="cf610-104">That is, a service that requires clients to authenticate using a security token issued by a security token service.</span></span> <span data-ttu-id="cf610-105">Este tópico mostra como configurar um <xref:System.ServiceModel.WSFederationHttpBinding> em código e configuração.</span><span class="sxs-lookup"><span data-stu-id="cf610-105">This topic shows how to set up a <xref:System.ServiceModel.WSFederationHttpBinding> in both code and configuration.</span></span> <span data-ttu-id="cf610-106">Depois que a associação é criada, você pode configurar um ponto de extremidade para usar essa associação.</span><span class="sxs-lookup"><span data-stu-id="cf610-106">Once the binding is created, you can set up an endpoint to use that binding.</span></span>  
  
 <span data-ttu-id="cf610-107">As etapas básicas são descritas da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="cf610-107">The basic steps are outlined as follows:</span></span>  
  
1.  <span data-ttu-id="cf610-108">Selecione um modo de segurança.</span><span class="sxs-lookup"><span data-stu-id="cf610-108">Select a security mode.</span></span> <span data-ttu-id="cf610-109">O <xref:System.ServiceModel.WSFederationHttpBinding> dá suporte a `Message`, que fornece segurança de ponta a ponta no nível da mensagem, mesmo em vários saltos, e `TransportWithMessageCredential`, que fornece melhor desempenho em casos onde o cliente e o serviço podem fazer uma conexão direta via HTTPS.</span><span class="sxs-lookup"><span data-stu-id="cf610-109">The <xref:System.ServiceModel.WSFederationHttpBinding> supports `Message`, which provides end-to-end security at the message level, even across multiple hops, and `TransportWithMessageCredential`, which provides better performance in cases where the client and the service can make a direct connection over HTTPS.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="cf610-110">O <xref:System.ServiceModel.WSFederationHttpBinding> também oferece suporte a `None` como um modo de segurança.</span><span class="sxs-lookup"><span data-stu-id="cf610-110">The <xref:System.ServiceModel.WSFederationHttpBinding> also supports `None` as a security mode.</span></span> <span data-ttu-id="cf610-111">Esse modo não é seguro e é fornecido apenas para fins de depuração.</span><span class="sxs-lookup"><span data-stu-id="cf610-111">This mode is not secure and is provided for debugging purposes only.</span></span> <span data-ttu-id="cf610-112">Se um ponto de extremidade de serviço é implantado com um <xref:System.ServiceModel.WSFederationHttpBinding> com seu modo de segurança definido como `None`, associação de cliente resultante (gerado pelo [Ferramenta Utilitária de metadados ServiceModel (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)) é um <<!--zz xref:System.ServiceModel.WsHttpBinding --> `xref:System.ServiceModel.WsHttpBinding`> com o modo de segurança `None`.</span><span class="sxs-lookup"><span data-stu-id="cf610-112">If a service endpoint is deployed with a <xref:System.ServiceModel.WSFederationHttpBinding> with its security mode set to `None`, the resulting client binding (generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)) is a <<!--zz xref:System.ServiceModel.WsHttpBinding --> `xref:System.ServiceModel.WsHttpBinding`> with a security mode of `None`.</span></span>  
  
     <span data-ttu-id="cf610-113">Ao contrário de outras associações fornecidas pelo sistema, não é necessário selecionar um tipo de credencial de cliente ao usar o `WSFederationHttpBinding`.</span><span class="sxs-lookup"><span data-stu-id="cf610-113">Unlike other system-provided bindings, it is not necessary to select a client credential type when using the `WSFederationHttpBinding`.</span></span> <span data-ttu-id="cf610-114">Isso ocorre porque o tipo de credencial de cliente é sempre um token emitido.</span><span class="sxs-lookup"><span data-stu-id="cf610-114">This is because the client credential type is always an issued token.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="cf610-115">adquire um token de um emissor especificado e apresenta esse token para o serviço para autenticar o cliente.</span><span class="sxs-lookup"><span data-stu-id="cf610-115"> acquires a token from a specified issuer and presents that token to the service to authenticate the client.</span></span>  
  
2.  <span data-ttu-id="cf610-116">Em clientes federados, defina o <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> propriedade para a URL do serviço de token de segurança.</span><span class="sxs-lookup"><span data-stu-id="cf610-116">On federated clients, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property to the URL of the security token service.</span></span> <span data-ttu-id="cf610-117">Definir o <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> para a associação a ser usada para se comunicar com o serviço de token de segurança.</span><span class="sxs-lookup"><span data-stu-id="cf610-117">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> to the binding to use to communicate with the security token service.</span></span>  
  
3.  <span data-ttu-id="cf610-118">Opcional.</span><span class="sxs-lookup"><span data-stu-id="cf610-118">Optional.</span></span> <span data-ttu-id="cf610-119">Definir o <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> propriedade para o URI Uniform Resource identificador () de um tipo de token.</span><span class="sxs-lookup"><span data-stu-id="cf610-119">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the Uniform Resource Identifier (URI) of a token type.</span></span> <span data-ttu-id="cf610-120">Em serviços federados, especifique o tipo de token que o serviço espera.</span><span class="sxs-lookup"><span data-stu-id="cf610-120">On federated services, specify the token type that the service expects.</span></span> <span data-ttu-id="cf610-121">Em clientes federados, especifique o tipo de token as solicitações do cliente do serviço de token de segurança.</span><span class="sxs-lookup"><span data-stu-id="cf610-121">On federated clients, specify the token type the client requests from the security token service.</span></span>  
  
     <span data-ttu-id="cf610-122">Se nenhum tipo de token é especificado, os clientes geram Tokens de segurança de solicitação do WS-Trust (RSTs) sem um tipo de token URI e serviços espera que a autenticação de cliente usando um token de segurança asserções Markup Language (SAML) 1.1 por padrão.</span><span class="sxs-lookup"><span data-stu-id="cf610-122">If no token type is specified, clients generate WS-Trust Request Security Tokens (RSTs) without a token type URI, and services expect client authentication using a Security Assertions Markup Language (SAML) 1.1 token by default.</span></span>  
  
     <span data-ttu-id="cf610-123">O URI para um token SAML 1.1 é "http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1".</span><span class="sxs-lookup"><span data-stu-id="cf610-123">The URI for a SAML 1.1 token is "http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1".</span></span>  
  
4.  <span data-ttu-id="cf610-124">Opcional.</span><span class="sxs-lookup"><span data-stu-id="cf610-124">Optional.</span></span> <span data-ttu-id="cf610-125">Em serviços federados, defina o <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> propriedade para a URL de metadados de um serviço de token de segurança.</span><span class="sxs-lookup"><span data-stu-id="cf610-125">On federated services, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> property to the metadata URL of a security token service.</span></span> <span data-ttu-id="cf610-126">O ponto de extremidade de metadados permite que os clientes do serviço selecionar um par de associação/ponto de extremidade apropriado, se o serviço está configurado para publicar metadados.</span><span class="sxs-lookup"><span data-stu-id="cf610-126">The metadata endpoint enables clients of the service to select an appropriate binding/endpoint pair, if the service is configured to publish metadata.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="cf610-127">publicação de metadados, consulte [metadados de publicação](../../../../docs/framework/wcf/feature-details/publishing-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="cf610-127"> publishing metadata, see [Publishing Metadata](../../../../docs/framework/wcf/feature-details/publishing-metadata.md).</span></span>  
  
 <span data-ttu-id="cf610-128">Você também pode definir outras propriedades, incluindo o tipo de chave usado como uma chave de prova no token emitido, o conjunto de algoritmos para usar entre o cliente e o serviço se negociar ou especifique explicitamente as credenciais do serviço, qualquer específica declarações do serviço espera que o token emitido contenha e quaisquer elementos XML adicionais que devem ser adicionados à solicitação, que o cliente envia ao serviço de token de segurança.</span><span class="sxs-lookup"><span data-stu-id="cf610-128">You can also set other properties, including the type of key used as a proof key in the issued token, the algorithm suite to use between the client and the service, whether to negotiate or explicitly specify the service credential, any specific claims the service expects the issued token to contain, and any additional XML elements that must be added to the request the client sends to the security token service.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="cf610-129">O `NegotiateServiceCredential` propriedade só é relevante quando o `SecurityMode` é definido como `Message`.</span><span class="sxs-lookup"><span data-stu-id="cf610-129">The `NegotiateServiceCredential` property is only relevant when the `SecurityMode` is set to `Message`.</span></span> <span data-ttu-id="cf610-130">Se `SecurityMode` é definido como `TransportWithMessageCredential`, em seguida, o `NegotiateServiceCredential` propriedade será ignorada.</span><span class="sxs-lookup"><span data-stu-id="cf610-130">If `SecurityMode` is set to `TransportWithMessageCredential`, then the `NegotiateServiceCredential` property is ignored.</span></span>  
  
### <a name="to-configure-a-wsfederationhttpbinding-in-code"></a><span data-ttu-id="cf610-131">Para configurar uma WSFederationHttpBinding no código</span><span class="sxs-lookup"><span data-stu-id="cf610-131">To configure a WSFederationHttpBinding in code</span></span>  
  
1.  <span data-ttu-id="cf610-132">Criar uma instância do <xref:System.ServiceModel.WSFederationHttpBinding>.</span><span class="sxs-lookup"><span data-stu-id="cf610-132">Create an instance of the <xref:System.ServiceModel.WSFederationHttpBinding>.</span></span>  
  
2.  <span data-ttu-id="cf610-133">Definir o <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> propriedade <xref:System.ServiceModel.WSFederationHttpSecurityMode> ou <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="cf610-133">Set the <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> property to <xref:System.ServiceModel.WSFederationHttpSecurityMode> or <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> as required.</span></span> <span data-ttu-id="cf610-134">Se um conjunto de algoritmos de <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> é necessário, defina o <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> propriedade para um valor obtido <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>.</span><span class="sxs-lookup"><span data-stu-id="cf610-134">If an algorithm suite other than <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> is required, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> property to a value taken from <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>.</span></span>  
  
3.  <span data-ttu-id="cf610-135">Definir o <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> propriedade conforme apropriado.</span><span class="sxs-lookup"><span data-stu-id="cf610-135">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> property as appropriate.</span></span>  
  
4.  <span data-ttu-id="cf610-136">Definir o <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> propriedade <xref:System.IdentityModel.Tokens.SecurityKeyType> `SymmetricKey` ou.`AsymmetricKey`</span><span class="sxs-lookup"><span data-stu-id="cf610-136">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> property to <xref:System.IdentityModel.Tokens.SecurityKeyType>`SymmetricKey` or .`AsymmetricKey`</span></span> <span data-ttu-id="cf610-137">conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="cf610-137">as required.</span></span>  
  
5.  <span data-ttu-id="cf610-138">Definir o <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> propriedade para o valor apropriado.</span><span class="sxs-lookup"><span data-stu-id="cf610-138">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the appropriate value.</span></span> <span data-ttu-id="cf610-139">Se nenhum valor for definido, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] padrão é "http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1", que indica os tokens SAML 1.1.</span><span class="sxs-lookup"><span data-stu-id="cf610-139">If no value is set, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] defaults to "http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1", which indicates SAML 1.1 tokens.</span></span>  
  
6.  <span data-ttu-id="cf610-140">Necessário no cliente se nenhum emissor local for especificado; opcional no serviço.</span><span class="sxs-lookup"><span data-stu-id="cf610-140">Required on the client if no local issuer is specified; optional on the service.</span></span> <span data-ttu-id="cf610-141">Criar um <xref:System.ServiceModel.EndpointAddress> que contém as informações de endereço e a identidade do serviço de token de segurança e atribua o <xref:System.ServiceModel.EndpointAddress> de instância para o <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="cf610-141">Create an <xref:System.ServiceModel.EndpointAddress> that contains the address and identity information of the security token service and assign the <xref:System.ServiceModel.EndpointAddress> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property.</span></span>  
  
7.  <span data-ttu-id="cf610-142">Necessário no cliente se nenhum emissor local for especificado; não usado no serviço.</span><span class="sxs-lookup"><span data-stu-id="cf610-142">Required on the client if no local issuer is specified; not used on the service.</span></span> <span data-ttu-id="cf610-143">Criar um <xref:System.ServiceModel.Channels.Binding> para o `SecurityTokenService` e atribua o <xref:System.ServiceModel.Channels.Binding> de instância para o <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="cf610-143">Create a <xref:System.ServiceModel.Channels.Binding> for the `SecurityTokenService` and assign the <xref:System.ServiceModel.Channels.Binding> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> property.</span></span>  
  
8.  <span data-ttu-id="cf610-144">Não usado no cliente; opcional no serviço.</span><span class="sxs-lookup"><span data-stu-id="cf610-144">Not used on the client; optional on the service.</span></span> <span data-ttu-id="cf610-145">Criar um <xref:System.ServiceModel.EndpointAddress> instância para os metadados do serviço de token de segurança e atribuí-la para o `IssuerMetadataAddress` propriedade.</span><span class="sxs-lookup"><span data-stu-id="cf610-145">Create an <xref:System.ServiceModel.EndpointAddress> instance for the metadata of the security token service and assign it to the `IssuerMetadataAddress` property.</span></span>  
  
9. <span data-ttu-id="cf610-146">Opcional no cliente e o serviço.</span><span class="sxs-lookup"><span data-stu-id="cf610-146">Optional on both the client and the service.</span></span> <span data-ttu-id="cf610-147">Criar e adicionar um ou mais <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> instâncias para a coleção retornada pelo <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="cf610-147">Create and add one or more <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A> property.</span></span>  
  
10. <span data-ttu-id="cf610-148">Opcional no cliente e o serviço.</span><span class="sxs-lookup"><span data-stu-id="cf610-148">Optional on both the client and the service.</span></span> <span data-ttu-id="cf610-149">Criar e adicionar um ou mais <xref:System.Xml.XmlElement> instâncias para a coleção retornada pelo <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="cf610-149">Create and add one or more <xref:System.Xml.XmlElement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A> property.</span></span>  
  
### <a name="to-create-a-federated-endpoint-in-configuration"></a><span data-ttu-id="cf610-150">Para criar um ponto de extremidade federado na configuração</span><span class="sxs-lookup"><span data-stu-id="cf610-150">To create a federated endpoint in configuration</span></span>  
  
1.  <span data-ttu-id="cf610-151">Criar um [ \<wsFederationHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) como um filho de [ \<associações >](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) elemento no arquivo de configuração do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cf610-151">Create a [\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) as a child of the [\<bindings>](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) element in the application configuration file.</span></span>  
  
2.  <span data-ttu-id="cf610-152">Criar um [ \<associação >](../../../../docs/framework/misc/binding.md) elemento como um filho do [ \<wsFederationHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) e defina o `name` de atributo para um valor apropriado.</span><span class="sxs-lookup"><span data-stu-id="cf610-152">Create a [\<binding>](../../../../docs/framework/misc/binding.md) element as a child of [\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) and set the `name` attribute to an appropriate value.</span></span>  
  
3.  <span data-ttu-id="cf610-153">Criar um `<security>` elemento como um filho de [ \<associação >](../../../../docs/framework/misc/binding.md) elemento.</span><span class="sxs-lookup"><span data-stu-id="cf610-153">Create a `<security>` element as a child of the [\<binding>](../../../../docs/framework/misc/binding.md) element.</span></span>  
  
4.  <span data-ttu-id="cf610-154">Definir o `mode` atributo no `<security>` elemento com um valor de `Message` ou `TransportWithMessageCredential`, conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="cf610-154">Set the `mode` attribute on the `<security>` element to a value of `Message` or `TransportWithMessageCredential`, as required.</span></span>  
  
5.  <span data-ttu-id="cf610-155">Criar um `<message>` elemento como um filho de `<security>` elemento.</span><span class="sxs-lookup"><span data-stu-id="cf610-155">Create a `<message>` element as a child of the `<security>` element.</span></span>  
  
6.  <span data-ttu-id="cf610-156">Opcional.</span><span class="sxs-lookup"><span data-stu-id="cf610-156">Optional.</span></span> <span data-ttu-id="cf610-157">Definir o `algorithmSuite` atributo no `<message>` elemento com um valor apropriado.</span><span class="sxs-lookup"><span data-stu-id="cf610-157">Set the `algorithmSuite` attribute on the `<message>` element with an appropriate value.</span></span> <span data-ttu-id="cf610-158">O padrão é `Basic256`.</span><span class="sxs-lookup"><span data-stu-id="cf610-158">The default is `Basic256`.</span></span>  
  
7.  <span data-ttu-id="cf610-159">Opcional.</span><span class="sxs-lookup"><span data-stu-id="cf610-159">Optional.</span></span> <span data-ttu-id="cf610-160">Se uma chave assimétrica de prova é necessária, defina o `issuedKeyType` atributo do `<message>` elemento `AsymmetricKey`.</span><span class="sxs-lookup"><span data-stu-id="cf610-160">If an asymmetric proof key is required, set the `issuedKeyType` attribute of the `<message>` element to `AsymmetricKey`.</span></span> <span data-ttu-id="cf610-161">O padrão é `SymmetricKey`.</span><span class="sxs-lookup"><span data-stu-id="cf610-161">The default is `SymmetricKey`.</span></span>  
  
8.  <span data-ttu-id="cf610-162">Opcional.</span><span class="sxs-lookup"><span data-stu-id="cf610-162">Optional.</span></span> <span data-ttu-id="cf610-163">Definir o `issuedTokenType` atributo no `<message>` elemento.</span><span class="sxs-lookup"><span data-stu-id="cf610-163">Set the `issuedTokenType` attribute on the `<message>` element.</span></span>  
  
9. <span data-ttu-id="cf610-164">Necessário no cliente se nenhum emissor local for especificado; opcional no serviço.</span><span class="sxs-lookup"><span data-stu-id="cf610-164">Required on the client if no local issuer is specified; optional on the service.</span></span> <span data-ttu-id="cf610-165">Criar um `<issuer>` elemento como um filho de `<message>` elemento.</span><span class="sxs-lookup"><span data-stu-id="cf610-165">Create an `<issuer>` element as a child of the `<message>` element.</span></span>  
  
10. <span data-ttu-id="cf610-166">Definir o `address` de atributo para o `<issuer>` elemento e especifique o endereço no qual o serviço de token de segurança aceita solicitações de token.</span><span class="sxs-lookup"><span data-stu-id="cf610-166">Set the `address` attribute to the `<issuer>` element and specify the address at which the security token service accepts token requests.</span></span>  
  
11. <span data-ttu-id="cf610-167">Opcional.</span><span class="sxs-lookup"><span data-stu-id="cf610-167">Optional.</span></span> <span data-ttu-id="cf610-168">Adicionar um `<identity>` elemento filho e especifique a identidade do serviço de token de segurança</span><span class="sxs-lookup"><span data-stu-id="cf610-168">Add an `<identity>` child element and specify the identity of the security token service</span></span>  
  
12. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="cf610-169">[Autenticação e identidade de serviço](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="cf610-169"> [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>  
  
13. <span data-ttu-id="cf610-170">Necessário no cliente se nenhum emissor local for especificado; não usado no serviço.</span><span class="sxs-lookup"><span data-stu-id="cf610-170">Required on the client if no local issuer is specified; not used on the service.</span></span> <span data-ttu-id="cf610-171">Criar um [ \<associação >](../../../../docs/framework/misc/binding.md) elemento na seção de associações que pode ser usado para se comunicar com o serviço de token de segurança.</span><span class="sxs-lookup"><span data-stu-id="cf610-171">Create a [\<binding>](../../../../docs/framework/misc/binding.md) element in the bindings section that can be used to communicate with the security token service.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="cf610-172">criar uma associação, consulte [como: especificar uma associação de serviço na configuração](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="cf610-172"> creating a binding, see [How to: Specify a Service Binding in Configuration](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md).</span></span>  
  
14. <span data-ttu-id="cf610-173">Especificar a associação criada na etapa anterior, definindo o `binding` e `bindingConfiguration` atributos do `<issuer>` elemento.</span><span class="sxs-lookup"><span data-stu-id="cf610-173">Specify the binding created in the previous step by setting the `binding` and `bindingConfiguration` attributes of the `<issuer>` element.</span></span>  
  
15. <span data-ttu-id="cf610-174">Não usado no cliente; opcional no serviço.</span><span class="sxs-lookup"><span data-stu-id="cf610-174">Not used on the client; optional on the service.</span></span> <span data-ttu-id="cf610-175">Criar um `<issuerMetadata>` elemento como um filho de <`message`> elemento.</span><span class="sxs-lookup"><span data-stu-id="cf610-175">Create an `<issuerMetadata>` element as a child of the <`message`> element.</span></span> <span data-ttu-id="cf610-176">Em seguida, em um `address` atributo no `<issuerMetadata>` elemento, especifique o endereço no qual o serviço de token de segurança é publicar seus metadados.</span><span class="sxs-lookup"><span data-stu-id="cf610-176">Then, in an `address` attribute on the `<issuerMetadata>` element, specify the address at which the security token service is to publish its metadata.</span></span> <span data-ttu-id="cf610-177">Opcionalmente, adicione um `<identity>` elemento filho e especifique a identidade do serviço de token de segurança.</span><span class="sxs-lookup"><span data-stu-id="cf610-177">Optionally, add an `<identity>` child element and specify the identity of the security token service.</span></span>  
  
16. <span data-ttu-id="cf610-178">Opcional no cliente e o serviço.</span><span class="sxs-lookup"><span data-stu-id="cf610-178">Optional on both the client and the service.</span></span> <span data-ttu-id="cf610-179">Adicionar um `<claimTypeRequirements>` elemento como um filho de `<message>` elemento.</span><span class="sxs-lookup"><span data-stu-id="cf610-179">Add a `<claimTypeRequirements>` element as a child of the `<message>` element.</span></span> <span data-ttu-id="cf610-180">Especificar declarações obrigatórias e opcionais que o serviço depende adicionando [ \<Adicionar >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) elementos para o `<claimTypeRequirements>` tipo de elemento e especificando a declaração com o `claimType` atributo.</span><span class="sxs-lookup"><span data-stu-id="cf610-180">Specify required and optional claims that the service relies on by adding [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) elements to the `<claimTypeRequirements>` element and specifying the claim type with the `claimType` attribute.</span></span> <span data-ttu-id="cf610-181">Especifique se uma declaração fornecida é obrigatório ou opcional definindo o `isOptional` atributo.</span><span class="sxs-lookup"><span data-stu-id="cf610-181">Specify whether a given claim is required or optional by setting the `isOptional` attribute.</span></span>  
  
## <a name="example"></a><span data-ttu-id="cf610-182">Exemplo</span><span class="sxs-lookup"><span data-stu-id="cf610-182">Example</span></span>  
 <span data-ttu-id="cf610-183">O exemplo de código a seguir mostra o código para configurar um `WSFederationHttpBinding` imperativa.</span><span class="sxs-lookup"><span data-stu-id="cf610-183">The following code sample shows code for setting up a `WSFederationHttpBinding` imperatively.</span></span>  
  
 [!code-csharp[c_FederationBinding#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_federationbinding/cs/source.cs#2)] 
 [!code-vb[c_FederationBinding#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_federationbinding/vb/source.vb#2)]  
  
## <a name="see-also"></a><span data-ttu-id="cf610-184">Consulte também</span><span class="sxs-lookup"><span data-stu-id="cf610-184">See Also</span></span>  
 [<span data-ttu-id="cf610-185">Federação</span><span class="sxs-lookup"><span data-stu-id="cf610-185">Federation</span></span>](../../../../docs/framework/wcf/feature-details/federation.md)  
 [<span data-ttu-id="cf610-186">Exemplo de federação</span><span class="sxs-lookup"><span data-stu-id="cf610-186">Federation Sample</span></span>](../../../../docs/framework/wcf/samples/federation-sample.md)  
 [<span data-ttu-id="cf610-187">Como: desabilitar sessões seguras em um WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="cf610-187">How to: Disable Secure Sessions on a WSFederationHttpBinding</span></span>](../../../../docs/framework/wcf/feature-details/how-to-disable-secure-sessions-on-a-wsfederationhttpbinding.md)
