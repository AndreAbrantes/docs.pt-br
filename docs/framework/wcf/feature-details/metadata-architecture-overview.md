---
title: Visão geral da arquitetura de metadados
ms.date: 03/30/2017
helpviewer_keywords:
- metadata [WCF], overview
ms.assetid: 1d37645e-086d-4d68-a358-f3c5b6e8205e
ms.openlocfilehash: d0fc45b5ccabedb127061090eed1f6b63fd7acba
ms.sourcegitcommit: fb78d8abbdb87144a3872cf154930157090dd933
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/26/2018
ms.locfileid: "47199145"
---
# <a name="metadata-architecture-overview"></a><span data-ttu-id="57b10-102">Visão geral da arquitetura de metadados</span><span class="sxs-lookup"><span data-stu-id="57b10-102">Metadata Architecture Overview</span></span>
<span data-ttu-id="57b10-103">Windows Communication Foundation (WCF) fornece uma infraestrutura avançada para exportar, publicando, recuperando e importação de metadados de serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-103">Windows Communication Foundation (WCF) provides a rich infrastructure for exporting, publishing, retrieving, and importing service metadata.</span></span> <span data-ttu-id="57b10-104">Os serviços WCF usam metadados para descrever como interagir com pontos de extremidade do serviço para que as ferramentas, como Svcutil.exe, podem gerar automaticamente o código do cliente para acessar o serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-104">WCF services use metadata to describe how to interact with the service's endpoints so that tools, such as Svcutil.exe, can automatically generate client code for accessing the service.</span></span>  
  
 <span data-ttu-id="57b10-105">A maioria dos tipos que compõem a infraestrutura de metadados WCF reside no <xref:System.ServiceModel.Description> namespace.</span><span class="sxs-lookup"><span data-stu-id="57b10-105">Most of the types that make up the WCF metadata infrastructure reside in the <xref:System.ServiceModel.Description> namespace.</span></span>  
  
 <span data-ttu-id="57b10-106">O WCF usa o <xref:System.ServiceModel.Description.ServiceEndpoint> classe para descrever os pontos de extremidade em um serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-106">WCF uses the <xref:System.ServiceModel.Description.ServiceEndpoint> class to describe endpoints in a service.</span></span> <span data-ttu-id="57b10-107">Você pode usar o WCF para gerar metadados para pontos de extremidade de serviço ou importar metadados de serviço para gerar <xref:System.ServiceModel.Description.ServiceEndpoint> instâncias.</span><span class="sxs-lookup"><span data-stu-id="57b10-107">You can use WCF to generate metadata for service endpoints or import service metadata to generate <xref:System.ServiceModel.Description.ServiceEndpoint> instances.</span></span>  
  
 <span data-ttu-id="57b10-108">WCF representa os metadados para um serviço como uma instância de <xref:System.ServiceModel.Description.MetadataSet> tipo, a estrutura dos quais está intimamente ligada ao formato de serialização de metadados definido em WS-MetadataExchange.</span><span class="sxs-lookup"><span data-stu-id="57b10-108">WCF represents the metadata for a service as an instance of the <xref:System.ServiceModel.Description.MetadataSet> type, the structure of which is strongly tied to the metadata serialization format defined in WS-MetadataExchange.</span></span> <span data-ttu-id="57b10-109">O <xref:System.ServiceModel.Description.MetadataSet> tipo agrupa os metadados de serviço real, como documentos de descrição linguagem WSDL (Web Services), documentos de esquema XML ou expressões de WS-Policy, como uma coleção de <xref:System.ServiceModel.Description.MetadataSection> instâncias.</span><span class="sxs-lookup"><span data-stu-id="57b10-109">The <xref:System.ServiceModel.Description.MetadataSet> type bundles the actual service metadata, such as Web Services Description Language (WSDL) documents, XML schema documents, or WS-Policy expressions, as a collection of <xref:System.ServiceModel.Description.MetadataSection> instances.</span></span> <span data-ttu-id="57b10-110">Cada <xref:System.ServiceModel.Description.MetadataSection?displayProperty=nameWithType> instância contém um dialeto de metadados específicas e um identificador.</span><span class="sxs-lookup"><span data-stu-id="57b10-110">Each <xref:System.ServiceModel.Description.MetadataSection?displayProperty=nameWithType> instance contains a specific metadata dialect and an identifier.</span></span> <span data-ttu-id="57b10-111">Um <xref:System.ServiceModel.Description.MetadataSection?displayProperty=nameWithType> pode conter os seguintes itens no seu <xref:System.ServiceModel.Description.MetadataSection.Metadata%2A?displayProperty=nameWithType> propriedade:</span><span class="sxs-lookup"><span data-stu-id="57b10-111">A <xref:System.ServiceModel.Description.MetadataSection?displayProperty=nameWithType> can contain the following items in its <xref:System.ServiceModel.Description.MetadataSection.Metadata%2A?displayProperty=nameWithType> property:</span></span>  
  
- <span data-ttu-id="57b10-112">Metadados brutos.</span><span class="sxs-lookup"><span data-stu-id="57b10-112">Raw metadata.</span></span>  
  
- <span data-ttu-id="57b10-113">Uma instância de <xref:System.ServiceModel.Description.MetadataReference>.</span><span class="sxs-lookup"><span data-stu-id="57b10-113">A <xref:System.ServiceModel.Description.MetadataReference> instance.</span></span>  
  
- <span data-ttu-id="57b10-114">Uma instância de <xref:System.ServiceModel.Description.MetadataLocation>.</span><span class="sxs-lookup"><span data-stu-id="57b10-114">A <xref:System.ServiceModel.Description.MetadataLocation> instance.</span></span>  
  
 <span data-ttu-id="57b10-115">Um <xref:System.ServiceModel.Description.MetadataReference?displayProperty=nameWithType> instâncias de apontam para outro ponto de extremidade metadados de exchange (MEX) e <xref:System.ServiceModel.Description.MetadataLocation?displayProperty=nameWithType> instâncias apontam para um documento de metadados usando uma URL HTTP.</span><span class="sxs-lookup"><span data-stu-id="57b10-115">A <xref:System.ServiceModel.Description.MetadataReference?displayProperty=nameWithType> instances  point to another metadata exchange (MEX) endpoint and <xref:System.ServiceModel.Description.MetadataLocation?displayProperty=nameWithType> instances point to a metadata document using an HTTP URL.</span></span> <span data-ttu-id="57b10-116">O WCF oferece suporte ao uso de documentos WSDL para descrever os pontos de extremidade de serviço, contratos de serviço, associações, padrões de troca de mensagens, mensagens e implementadas por um serviço de mensagens de falha.</span><span class="sxs-lookup"><span data-stu-id="57b10-116">WCF supports using WSDL documents to describe service endpoints, service contracts, bindings, message exchange patterns, messages and fault messages implemented by a service.</span></span> <span data-ttu-id="57b10-117">Tipos de dados usados pelo serviço são descritos em documentos WSDL usando o esquema XML.</span><span class="sxs-lookup"><span data-stu-id="57b10-117">Data types used by the service are described in WSDL documents using XML schema.</span></span> <span data-ttu-id="57b10-118">Para obter mais informações, consulte [esquema de importação e exportação](../../../../docs/framework/wcf/feature-details/schema-import-and-export.md).</span><span class="sxs-lookup"><span data-stu-id="57b10-118">For more information, see [Schema Import and Export](../../../../docs/framework/wcf/feature-details/schema-import-and-export.md).</span></span> <span data-ttu-id="57b10-119">Você pode usar o WCF para exportar e importar as extensões WSDL para o comportamento de serviço, os comportamentos de contrato e elementos de associação que estendem a funcionalidade de um serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-119">You can use WCF to export and import WSDL extensions for service behavior, contract behaviors, and binding elements that extend the functionality of a service.</span></span> <span data-ttu-id="57b10-120">Para obter mais informações, consulte [exportação de metadados personalizados para uma extensão do WCF](../../../../docs/framework/wcf/extending/exporting-custom-metadata-for-a-wcf-extension.md).</span><span class="sxs-lookup"><span data-stu-id="57b10-120">For more information, see [Exporting Custom Metadata for a WCF Extension](../../../../docs/framework/wcf/extending/exporting-custom-metadata-for-a-wcf-extension.md).</span></span>  
  
## <a name="exporting-service-metadata"></a><span data-ttu-id="57b10-121">Exportação de metadados de serviço</span><span class="sxs-lookup"><span data-stu-id="57b10-121">Exporting Service Metadata</span></span>  
 <span data-ttu-id="57b10-122">No WCF, *exportação de metadados* é o processo de descrever os pontos de extremidade de serviço e Projetando-os em uma representação paralela e padronizada que os clientes podem usar para entender como usar o serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-122">In WCF, *metadata export* is the process of describing service endpoints and projecting them into a parallel, standardized representation that clients can use to understand how to use the service.</span></span> <span data-ttu-id="57b10-123">Para exportar metadados de <xref:System.ServiceModel.Description.ServiceEndpoint> instâncias, use uma implementação do <xref:System.ServiceModel.Description.MetadataExporter> classe abstrata.</span><span class="sxs-lookup"><span data-stu-id="57b10-123">To export metadata from <xref:System.ServiceModel.Description.ServiceEndpoint> instances, use an implementation of the <xref:System.ServiceModel.Description.MetadataExporter> abstract class.</span></span> <span data-ttu-id="57b10-124">Um <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> implementação gera metadados que é encapsulado em um <xref:System.ServiceModel.Description.MetadataSet> instância.</span><span class="sxs-lookup"><span data-stu-id="57b10-124">A <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> implementation generates metadata that is encapsulated in a <xref:System.ServiceModel.Description.MetadataSet> instance.</span></span>  
  
 <span data-ttu-id="57b10-125">O <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> classe fornece uma estrutura para a geração de expressões de política que descrevem os recursos e requisitos de uma associação de ponto de extremidade e suas operações associadas, mensagens e falhas.</span><span class="sxs-lookup"><span data-stu-id="57b10-125">The <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> class provides a framework for generating policy expressions that describe the capabilities and requirements of an endpoint binding and its associated operations, messages, and faults.</span></span> <span data-ttu-id="57b10-126">Essas expressões de política são capturados em um <xref:System.ServiceModel.Description.PolicyConversionContext> instância.</span><span class="sxs-lookup"><span data-stu-id="57b10-126">These policy expressions are captured in a <xref:System.ServiceModel.Description.PolicyConversionContext> instance.</span></span> <span data-ttu-id="57b10-127">Um <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> implementação, em seguida, pode anexar essas expressões de política para os metadados que ele gera.</span><span class="sxs-lookup"><span data-stu-id="57b10-127">A <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> implementation can then attach these policy expressions to the metadata it generates.</span></span>  
  
 <span data-ttu-id="57b10-128">O <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> chamadas em cada <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> que implementa o <xref:System.ServiceModel.Description.IPolicyExportExtension> interface na associação de uma <xref:System.ServiceModel.Description.ServiceEndpoint> ao gerar um <xref:System.ServiceModel.Description.PolicyConversionContext> do objeto para o <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> implementação a ser usada.</span><span class="sxs-lookup"><span data-stu-id="57b10-128">The <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> calls into each <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> that implements the <xref:System.ServiceModel.Description.IPolicyExportExtension> interface in the binding of a <xref:System.ServiceModel.Description.ServiceEndpoint> when generating a <xref:System.ServiceModel.Description.PolicyConversionContext> object for the <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> implementation to use.</span></span> <span data-ttu-id="57b10-129">Você pode exportar novas declarações de política com a implementação de <xref:System.ServiceModel.Description.IPolicyExportExtension> interface em suas implementações personalizadas do <xref:System.ServiceModel.Channels.BindingElement> tipo.</span><span class="sxs-lookup"><span data-stu-id="57b10-129">You can export new policy assertions by implementing the <xref:System.ServiceModel.Description.IPolicyExportExtension> interface on your custom implementations of the <xref:System.ServiceModel.Channels.BindingElement> type.</span></span>  
  
 <span data-ttu-id="57b10-130">O <xref:System.ServiceModel.Description.WsdlExporter> tipo é a implementação do <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> incluído com o WCF de classe abstrata.</span><span class="sxs-lookup"><span data-stu-id="57b10-130">The <xref:System.ServiceModel.Description.WsdlExporter> type is the implementation of the <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> abstract class included with WCF.</span></span> <span data-ttu-id="57b10-131">O <xref:System.ServiceModel.Description.WsdlExporter> tipo gera metadados WSDL com expressões de política anexada.</span><span class="sxs-lookup"><span data-stu-id="57b10-131">The <xref:System.ServiceModel.Description.WsdlExporter> type generates WSDL metadata with attached policy expressions.</span></span>  
  
 <span data-ttu-id="57b10-132">Para exportar metadados WSDL personalizados ou extensões WSDL para comportamentos de ponto de extremidade, comportamentos de contrato ou elementos de associação em um ponto de extremidade de serviço, você pode implementar o <xref:System.ServiceModel.Description.IWsdlExportExtension> interface.</span><span class="sxs-lookup"><span data-stu-id="57b10-132">To export custom WSDL metadata or WSDL extensions for endpoint behaviors, contract behaviors, or binding elements in a service endpoint, you can implement the <xref:System.ServiceModel.Description.IWsdlExportExtension> interface.</span></span> <span data-ttu-id="57b10-133">O <xref:System.ServiceModel.Description.WsdlExporter> examina um <xref:System.ServiceModel.Description.ServiceEndpoint> instância para associar elementos, comportamentos de operação, os comportamentos de contrato e os comportamentos de ponto de extremidade que implementam o <xref:System.ServiceModel.Description.IWsdlExportExtension> interface ao gerar o documento WSDL.</span><span class="sxs-lookup"><span data-stu-id="57b10-133">The <xref:System.ServiceModel.Description.WsdlExporter> looks at a <xref:System.ServiceModel.Description.ServiceEndpoint> instance for binding elements, operation behaviors, contract behaviors, and endpoint behaviors that implement the <xref:System.ServiceModel.Description.IWsdlExportExtension> interface when generating the WSDL document.</span></span>  
  
## <a name="publishing-service-metadata"></a><span data-ttu-id="57b10-134">Metadados do serviço de publicação</span><span class="sxs-lookup"><span data-stu-id="57b10-134">Publishing Service Metadata</span></span>  
 <span data-ttu-id="57b10-135">Os serviços WCF publicam metadados, expondo um ou mais pontos de extremidade de metadados.</span><span class="sxs-lookup"><span data-stu-id="57b10-135">WCF services publish metadata by exposing one or more metadata endpoints.</span></span> <span data-ttu-id="57b10-136">Publicação de metadados de serviço disponibiliza metadados de serviço usando protocolos padronizados, como solicitações de MEX e HTTP/GET.</span><span class="sxs-lookup"><span data-stu-id="57b10-136">Publishing service metadata makes service metadata available using standardized protocols, such as MEX and HTTP/GET requests.</span></span> <span data-ttu-id="57b10-137">Pontos de extremidade de metadados são semelhantes aos outros pontos de extremidade de serviço em que eles têm um endereço, uma ligação e um contrato.</span><span class="sxs-lookup"><span data-stu-id="57b10-137">Metadata endpoints are similar to other service endpoints in that they have an address, a binding, and a contract.</span></span> <span data-ttu-id="57b10-138">Você pode adicionar pontos de extremidade de metadados em um host de serviço na configuração ou no código.</span><span class="sxs-lookup"><span data-stu-id="57b10-138">You can add metadata endpoints to a service host in configuration or in code.</span></span>  
  
 <span data-ttu-id="57b10-139">Para publicar pontos de extremidade de metadados para um serviço WCF, você deve primeiro adicionar uma instância da <xref:System.ServiceModel.Description.ServiceMetadataBehavior> comportamento para o serviço de serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-139">To publish metadata endpoints for a WCF service, you must first add an instance of the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> service behavior to the service.</span></span> <span data-ttu-id="57b10-140">Adicionando um <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType> instância ao seu serviço aumenta seu serviço com a capacidade de publicar metadados, expondo um ou mais pontos de extremidade de metadados.</span><span class="sxs-lookup"><span data-stu-id="57b10-140">Adding a <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType> instance to your service augments your service with the ability to publish metadata by exposing one or more metadata endpoints.</span></span> <span data-ttu-id="57b10-141">Depois de adicionar o <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType> comportamento de serviço, em seguida, você pode expor pontos de extremidade de metadados que dão suporte os MEX protocolo ou metadados de pontos de extremidade que respondem às solicitações HTTP/GET.</span><span class="sxs-lookup"><span data-stu-id="57b10-141">Once you add the <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType> service behavior you can then expose metadata endpoints that support the MEX protocol or metadata endpoints that respond to HTTP/GET requests.</span></span>  
  
 <span data-ttu-id="57b10-142">Para adicionar pontos de extremidade de metadados que usam o protocolo MEX, adicionar pontos de extremidade de serviço para seu host de serviço que usam o contrato de serviço nomeada IMetadataExchange.WCF define o <xref:System.ServiceModel.Description.IMetadataExchange> interface que tem esse nome de contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-142">To add metadata endpoints that use the MEX protocol, add service endpoints to your service host that use the service contract named IMetadataExchange.WCF defines the <xref:System.ServiceModel.Description.IMetadataExchange> interface that has this service contract name.</span></span> <span data-ttu-id="57b10-143">Pontos de extremidade do WS-MetadataExchange ou pontos de extremidade MEX, podem usar uma das associações quatro padrão expostas pelos métodos de fábrica estáticos no <xref:System.ServiceModel.Description.MetadataExchangeBindings> classe para corresponder as associações padrão usadas por ferramentas do WCF, como Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="57b10-143">WS-MetadataExchange endpoints, or MEX endpoints, can use one of the four default bindings exposed by the static factory methods on the <xref:System.ServiceModel.Description.MetadataExchangeBindings> class to match the default bindings used by WCF tools, such as Svcutil.exe.</span></span> <span data-ttu-id="57b10-144">Você também pode configurar pontos de extremidade de metadados MEX usando uma associação personalizada.</span><span class="sxs-lookup"><span data-stu-id="57b10-144">You can also configure MEX metadata endpoints using a custom binding.</span></span>  
  
 <span data-ttu-id="57b10-145">O <xref:System.ServiceModel.Description.ServiceMetadataBehavior> usa um <xref:System.ServiceModel.Description.WsdlExporter?displayProperty=nameWithType> para exportar metadados para todos os pontos de extremidade de serviço em seu serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-145">The <xref:System.ServiceModel.Description.ServiceMetadataBehavior> uses a <xref:System.ServiceModel.Description.WsdlExporter?displayProperty=nameWithType> to export metadata for all service endpoints in your service.</span></span> <span data-ttu-id="57b10-146">Para obter mais informações sobre como exportar metadados de um serviço, consulte [exportando e importando metadados](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="57b10-146">For more information about exporting metadata from a service, see [Exporting and Importing Metadata](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md).</span></span>  
  
 <span data-ttu-id="57b10-147">O <xref:System.ServiceModel.Description.ServiceMetadataBehavior> amplia o seu host de serviço, adicionando um <xref:System.ServiceModel.Description.ServiceMetadataExtension> instância como uma extensão para o host de serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-147">The <xref:System.ServiceModel.Description.ServiceMetadataBehavior> augments your service host by adding a <xref:System.ServiceModel.Description.ServiceMetadataExtension> instance as an extension to your service host.</span></span> <span data-ttu-id="57b10-148">O <xref:System.ServiceModel.Description.ServiceMetadataExtension?displayProperty=nameWithType> fornece a implementação para os protocolos de publicação de metadados.</span><span class="sxs-lookup"><span data-stu-id="57b10-148">The <xref:System.ServiceModel.Description.ServiceMetadataExtension?displayProperty=nameWithType> provides the implementation for the metadata publishing protocols.</span></span> <span data-ttu-id="57b10-149">Você também pode usar o <xref:System.ServiceModel.Description.ServiceMetadataExtension?displayProperty=nameWithType> para obter metadados do serviço em tempo de execução acessando o <xref:System.ServiceModel.Description.ServiceMetadataExtension.Metadata%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="57b10-149">You can also use the <xref:System.ServiceModel.Description.ServiceMetadataExtension?displayProperty=nameWithType> to get the service's metadata at runtime by accessing the <xref:System.ServiceModel.Description.ServiceMetadataExtension.Metadata%2A> property.</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="57b10-150">Se você adicionar um ponto de extremidade MEX em seu arquivo de configuração do aplicativo e, em seguida, tente adicionar o <xref:System.ServiceModel.Description.ServiceMetadataBehavior> para seu host de serviço no código, você obtém a exceção a seguir:</span><span class="sxs-lookup"><span data-stu-id="57b10-150">If you add a MEX endpoint in your application configuration file and then attempt to add the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> to your service host in code you get the following exception:</span></span>  
>
> <span data-ttu-id="57b10-151">System. InvalidOperationException: O nome do contrato 'IMetadataExchange' não pôde ser encontrado na lista de contratos implementados pelo serviço Service1.</span><span class="sxs-lookup"><span data-stu-id="57b10-151">System.InvalidOperationException: The contract name 'IMetadataExchange' could not be found in the list of contracts implemented by the service Service1.</span></span> <span data-ttu-id="57b10-152">Adicione um ServiceMetadataBehavior ao arquivo de configuração ou ao ServiceHost diretamente para habilitar o suporte para este contrato.</span><span class="sxs-lookup"><span data-stu-id="57b10-152">Add a ServiceMetadataBehavior to the configuration file or to the ServiceHost directly to enable support for this contract.</span></span>  
>
> <span data-ttu-id="57b10-153">Você pode contornar esse problema, adicionando a <xref:System.ServiceModel.Description.ServiceMetadataBehavior> no arquivo de configuração ou adicionar o ponto de extremidade e <xref:System.ServiceModel.Description.ServiceMetadataBehavior> no código.</span><span class="sxs-lookup"><span data-stu-id="57b10-153">You can work around this issue by either adding the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> in the configuration file or adding both the endpoint and <xref:System.ServiceModel.Description.ServiceMetadataBehavior> in code.</span></span>  
>
> <span data-ttu-id="57b10-154">Para obter um exemplo de adição <xref:System.ServiceModel.Description.ServiceMetadataBehavior> em um arquivo de configuração de aplicativo, consulte a [Introdução](../../../../docs/framework/wcf/samples/getting-started-sample.md).</span><span class="sxs-lookup"><span data-stu-id="57b10-154">For an example of adding <xref:System.ServiceModel.Description.ServiceMetadataBehavior> in an application configuration file, see the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md).</span></span> <span data-ttu-id="57b10-155">Para obter um exemplo de adição <xref:System.ServiceModel.Description.ServiceMetadataBehavior> no código, consulte o [auto-hospedar](../../../../docs/framework/wcf/samples/self-host.md) exemplo.</span><span class="sxs-lookup"><span data-stu-id="57b10-155">For an example of adding <xref:System.ServiceModel.Description.ServiceMetadataBehavior> in code, see the [Self-Host](../../../../docs/framework/wcf/samples/self-host.md) sample.</span></span>  

> [!CAUTION]
> <span data-ttu-id="57b10-156">Quando os contratos de metadados de publicação para um serviço que expõe dois serviços diferentes que cada um contém uma operação o mesmo nome que uma exceção será lançada.</span><span class="sxs-lookup"><span data-stu-id="57b10-156">When publishing metadata for a service that exposes two different service contracts in which each contain an operation of the same name an exception is thrown.</span></span> <span data-ttu-id="57b10-157">Por exemplo, se você tiver um serviço que expõe um contrato de serviço chamado ICarService que tem uma operação obter (c de carro) e o mesmo serviço expõe um contrato de serviço chamado IBookService que tem uma operação Get (livro b), uma exceção é lançada ou uma mensagem de erro é exibido quando a geração de metadados do serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-157">For example, if you have a service that exposes a service contract called ICarService that has an operation Get(Car c) and the same service exposes a service contract called IBookService that has an operation Get(Book b), an exception is thrown or an error message is displayed when generating the service's metadata.</span></span> <span data-ttu-id="57b10-158">Para contornar esse problema, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="57b10-158">To work around this issue do one of the following:</span></span>  
>
> - <span data-ttu-id="57b10-159">Renomeie uma das operações.</span><span class="sxs-lookup"><span data-stu-id="57b10-159">Rename one of the operations.</span></span>
> - <span data-ttu-id="57b10-160">Defina o <xref:System.ServiceModel.OperationContractAttribute.Name%2A> para um nome diferente.</span><span class="sxs-lookup"><span data-stu-id="57b10-160">Set the <xref:System.ServiceModel.OperationContractAttribute.Name%2A> to a different name.</span></span>  
> - <span data-ttu-id="57b10-161">Defina um dos namespaces das operações em um namespace diferente usando o <xref:System.ServiceModel.ServiceContractAttribute.Namespace%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="57b10-161">Set one of the operations' namespaces to a different namespace using the <xref:System.ServiceModel.ServiceContractAttribute.Namespace%2A> property.</span></span>  
  
## <a name="retrieving-service-metadata"></a><span data-ttu-id="57b10-162">Recuperando metadados de serviço</span><span class="sxs-lookup"><span data-stu-id="57b10-162">Retrieving Service Metadata</span></span>  
 <span data-ttu-id="57b10-163">O WCF pode recuperar metadados de serviço usando protocolos padronizados, como WS-MetadataExchange e HTTP.</span><span class="sxs-lookup"><span data-stu-id="57b10-163">WCF can retrieve service metadata using standardized protocols such as WS-MetadataExchange and HTTP.</span></span> <span data-ttu-id="57b10-164">Ambos os protocolos são compatíveis com o <xref:System.ServiceModel.Description.MetadataExchangeClient> tipo.</span><span class="sxs-lookup"><span data-stu-id="57b10-164">Both of these protocols are supported by the <xref:System.ServiceModel.Description.MetadataExchangeClient> type.</span></span> <span data-ttu-id="57b10-165">Você recupera metadados de serviço usando o <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> tipo, fornecendo um endereço e uma associação opcional.</span><span class="sxs-lookup"><span data-stu-id="57b10-165">You retrieve service metadata using the <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> type by providing an address and an optional binding.</span></span> <span data-ttu-id="57b10-166">A associação usada por um <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> instância pode ser uma das associações padrão do <xref:System.ServiceModel.Description.MetadataExchangeBindings> carregado de classe estática, uma associação fornecida pelo usuário ou uma associação de uma configuração de ponto de extremidade para o `IMetadataExchange` contrato.</span><span class="sxs-lookup"><span data-stu-id="57b10-166">The binding used by a <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> instance can be one of the default bindings from the <xref:System.ServiceModel.Description.MetadataExchangeBindings> static class, a user-supplied binding, or a binding loaded from an endpoint configuration for the `IMetadataExchange` contract.</span></span> <span data-ttu-id="57b10-167">O <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> também pode resolver referências de URL de HTTP a metadados usando o <xref:System.Net.HttpWebRequest> tipo.</span><span class="sxs-lookup"><span data-stu-id="57b10-167">The <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> can also resolve HTTP URL references to metadata using the <xref:System.Net.HttpWebRequest> type.</span></span>  
  
 <span data-ttu-id="57b10-168">Por padrão, uma <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> instância está vinculada a um único <xref:System.ServiceModel.Channels.ChannelFactoryBase> instância.</span><span class="sxs-lookup"><span data-stu-id="57b10-168">By default, a <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> instance is tied to a single <xref:System.ServiceModel.Channels.ChannelFactoryBase> instance.</span></span> <span data-ttu-id="57b10-169">Você pode alterar ou substituir os <xref:System.ServiceModel.Channels.ChannelFactoryBase> instância usada por um <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> , substituindo o <xref:System.ServiceModel.Description.MetadataExchangeClient.GetChannelFactory%2A> método virtual.</span><span class="sxs-lookup"><span data-stu-id="57b10-169">You can change or replace the <xref:System.ServiceModel.Channels.ChannelFactoryBase> instance used by a <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> by overriding the <xref:System.ServiceModel.Description.MetadataExchangeClient.GetChannelFactory%2A> virtual method.</span></span> <span data-ttu-id="57b10-170">Da mesma forma, você pode alterar ou substituir os <xref:System.Net.HttpWebRequest?displayProperty=nameWithType> instância usada por um <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> para fazer solicitações HTTP/GET, substituindo o <xref:System.ServiceModel.Description.MetadataExchangeClient.GetWebRequest%2A?displayProperty=nameWithType> método virtual.</span><span class="sxs-lookup"><span data-stu-id="57b10-170">Similarly, you can change or replace the <xref:System.Net.HttpWebRequest?displayProperty=nameWithType> instance used by a <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> to make HTTP/GET requests by overriding the <xref:System.ServiceModel.Description.MetadataExchangeClient.GetWebRequest%2A?displayProperty=nameWithType> virtual method.</span></span>  
  
 <span data-ttu-id="57b10-171">Você pode recuperar metadados de serviço usando solicitações de WS-MetadataExchange ou HTTP/GET usando a ferramenta Svcutil.exe e passando o **/target:metadata** switch e um endereço.</span><span class="sxs-lookup"><span data-stu-id="57b10-171">You can retrieve service metadata using WS-MetadataExchange or HTTP/GET requests by using the Svcutil.exe tool and passing the **/target:metadata** switch and an address.</span></span> <span data-ttu-id="57b10-172">Svcutil.exe baixa os metadados no endereço especificado e salva os arquivos no disco.</span><span class="sxs-lookup"><span data-stu-id="57b10-172">Svcutil.exe downloads the metadata at the specified address and saves the files to disk.</span></span> <span data-ttu-id="57b10-173">Svcutil.exe usa um <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> instância internamente e carrega uma configuração de ponto de extremidade MEX (do arquivo de configuração de aplicativo) cujo nome corresponda o esquema do endereço passada para Svcutil.exe, se um existe.</span><span class="sxs-lookup"><span data-stu-id="57b10-173">Svcutil.exe uses a <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> instance internally and loads an MEX endpoint configuration (from the application configuration file) whose name matches the scheme of the address passed to Svcutil.exe, if one exists.</span></span> <span data-ttu-id="57b10-174">Caso contrário, Svcutil.exe padrão é usar uma das associações definidas pelo <xref:System.ServiceModel.Description.MetadataExchangeBindings> tipo de fábrica estáticos.</span><span class="sxs-lookup"><span data-stu-id="57b10-174">Otherwise, Svcutil.exe defaults to using one of the bindings defined by the <xref:System.ServiceModel.Description.MetadataExchangeBindings> static factory type.</span></span>  
  
## <a name="importing-service-metadata"></a><span data-ttu-id="57b10-175">Importação de metadados de serviço</span><span class="sxs-lookup"><span data-stu-id="57b10-175">Importing Service Metadata</span></span>  
 <span data-ttu-id="57b10-176">No WCF, a importação de metadados é o processo de geração de uma representação abstrata de um serviço ou seus componentes de seus metadados.</span><span class="sxs-lookup"><span data-stu-id="57b10-176">In WCF, metadata import is the process of generating an abstract representation of a service or its component parts from its metadata.</span></span> <span data-ttu-id="57b10-177">Por exemplo, o WCF pode importar <xref:System.ServiceModel.Description.ServiceEndpoint> instâncias, <xref:System.ServiceModel.Channels.Binding> instâncias ou <xref:System.ServiceModel.Description.ContractDescription> instâncias de uma WSDL de documento para um serviço.</span><span class="sxs-lookup"><span data-stu-id="57b10-177">For example, WCF can import <xref:System.ServiceModel.Description.ServiceEndpoint> instances, <xref:System.ServiceModel.Channels.Binding> instances or <xref:System.ServiceModel.Description.ContractDescription> instances from a WSDL document for a service.</span></span> <span data-ttu-id="57b10-178">Para importar metadados de serviço do WCF, use uma implementação do <xref:System.ServiceModel.Description.MetadataImporter> classe abstrata.</span><span class="sxs-lookup"><span data-stu-id="57b10-178">To import service metadata in WCF, use an implementation of the <xref:System.ServiceModel.Description.MetadataImporter> abstract class.</span></span> <span data-ttu-id="57b10-179">Tipos que derivam de <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> classe implementar o suporte para formatos de metadados de importação que aproveitam o WS-Policy importar lógica no WCF.</span><span class="sxs-lookup"><span data-stu-id="57b10-179">Types that derive from the <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> class implement support for importing metadata formats that take advantage of the WS-Policy import logic in WCF.</span></span>  
  
 <span data-ttu-id="57b10-180">Um <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> implementação coleta as expressões de política anexadas aos metadados do serviço em um <xref:System.ServiceModel.Description.PolicyConversionContext> objeto.</span><span class="sxs-lookup"><span data-stu-id="57b10-180">A <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> implementation collects the policy expressions attached to the service metadata in a <xref:System.ServiceModel.Description.PolicyConversionContext> object.</span></span> <span data-ttu-id="57b10-181">O <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> , em seguida, processa as diretivas como parte da importação de metadados chamando as implementações do <xref:System.ServiceModel.Description.IPolicyImportExtension> interface no <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="57b10-181">The <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> then processes the policies as part of importing the metadata by calling the implementations of the <xref:System.ServiceModel.Description.IPolicyImportExtension> interface in the <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A> property.</span></span>  
  
 <span data-ttu-id="57b10-182">Você pode adicionar suporte para a importação de novas declarações de política para um <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> adicionando sua própria implementação do <xref:System.ServiceModel.Description.IPolicyImportExtension> interface para o <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A> coleção em um <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> instância.</span><span class="sxs-lookup"><span data-stu-id="57b10-182">You can add support for importing new policy assertions to a <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> by adding your own implementation of the <xref:System.ServiceModel.Description.IPolicyImportExtension> interface to the <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A> collection on a <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> instance.</span></span> <span data-ttu-id="57b10-183">Como alternativa, você pode registrar sua extensão de importação de política no seu arquivo de configuração de aplicativo do cliente.</span><span class="sxs-lookup"><span data-stu-id="57b10-183">Alternatively, you can register your policy import extension in your client application configuration file.</span></span>  
  
 <span data-ttu-id="57b10-184">O <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> tipo é a implementação do <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> incluído com o WCF de classe abstrata.</span><span class="sxs-lookup"><span data-stu-id="57b10-184">The <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> type is the implementation of the <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> abstract class included with WCF.</span></span> <span data-ttu-id="57b10-185">O <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> tipo importa os metadados WSDL com políticas anexados que estão agrupados em um <xref:System.ServiceModel.Description.MetadataSet> objeto.</span><span class="sxs-lookup"><span data-stu-id="57b10-185">The <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> type imports WSDL metadata with attached policies that are bundled in a <xref:System.ServiceModel.Description.MetadataSet> object.</span></span>  
  
 <span data-ttu-id="57b10-186">Você pode adicionar suporte para a importação de extensões WSDL, Implementando a <xref:System.ServiceModel.Description.IWsdlImportExtension> interface e, em seguida, adicionar sua implementação para o <xref:System.ServiceModel.Description.WsdlImporter.WsdlImportExtensions%2A> propriedade em seu <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> instância.</span><span class="sxs-lookup"><span data-stu-id="57b10-186">You can add support for importing WSDL extensions by implementing the <xref:System.ServiceModel.Description.IWsdlImportExtension> interface and then adding your implementation to the <xref:System.ServiceModel.Description.WsdlImporter.WsdlImportExtensions%2A> property on your <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> instance.</span></span> <span data-ttu-id="57b10-187">O <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> também pode carregar a implementações do <xref:System.ServiceModel.Description.IWsdlImportExtension?displayProperty=nameWithType> interface registrada no seu arquivo de configuração de aplicativo do cliente.</span><span class="sxs-lookup"><span data-stu-id="57b10-187">The <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> can also load implementations of the <xref:System.ServiceModel.Description.IWsdlImportExtension?displayProperty=nameWithType> interface registered in your client application configuration file.</span></span>  
  
## <a name="dynamic-bindings"></a><span data-ttu-id="57b10-188">Associações dinâmicas</span><span class="sxs-lookup"><span data-stu-id="57b10-188">Dynamic Bindings</span></span>  
 <span data-ttu-id="57b10-189">Você pode atualizar dinamicamente a associação que você usa para criar um canal para um ponto de extremidade de serviço, que altera a associação para o ponto de extremidade ou você deseja criar um canal para um ponto de extremidade que usa o mesmo contrato, mas tem uma associação diferente.</span><span class="sxs-lookup"><span data-stu-id="57b10-189">You can dynamically update the binding that you use to create a channel to a service endpoint in the event that the binding for the endpoint changes or you want to create a channel to an endpoint that uses the same contract but has a different binding.</span></span> <span data-ttu-id="57b10-190">Você pode usar o <xref:System.ServiceModel.Description.MetadataResolver> classe estática para recuperar e importar metadados em tempo de execução para pontos de extremidade de serviço que implementa um contrato específico.</span><span class="sxs-lookup"><span data-stu-id="57b10-190">You can use the <xref:System.ServiceModel.Description.MetadataResolver> static class to retrieve and import metadata at runtime for service endpoints that implement a specific contract.</span></span> <span data-ttu-id="57b10-191">Você pode usar o importados <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> objetos para criar uma fábrica de canal ou de cliente para o ponto de extremidade desejado.</span><span class="sxs-lookup"><span data-stu-id="57b10-191">You can then use the imported <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> objects to create a client or channel factory to the desired endpoint.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="57b10-192">Consulte também</span><span class="sxs-lookup"><span data-stu-id="57b10-192">See Also</span></span>  
 <xref:System.ServiceModel.Description>  
 [<span data-ttu-id="57b10-193">Formatos de metadados</span><span class="sxs-lookup"><span data-stu-id="57b10-193">Metadata Formats</span></span>](../../../../docs/framework/wcf/feature-details/metadata-formats.md)  
 [<span data-ttu-id="57b10-194">Exportando e importando metadados</span><span class="sxs-lookup"><span data-stu-id="57b10-194">Exporting and Importing Metadata</span></span>](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md)  
 [<span data-ttu-id="57b10-195">Publicando metadados</span><span class="sxs-lookup"><span data-stu-id="57b10-195">Publishing Metadata</span></span>](../../../../docs/framework/wcf/feature-details/publishing-metadata.md)  
 [<span data-ttu-id="57b10-196">Recuperando metadados</span><span class="sxs-lookup"><span data-stu-id="57b10-196">Retrieving Metadata</span></span>](../../../../docs/framework/wcf/feature-details/retrieving-metadata.md)  
 [<span data-ttu-id="57b10-197">Usando metadados</span><span class="sxs-lookup"><span data-stu-id="57b10-197">Using Metadata</span></span>](../../../../docs/framework/wcf/feature-details/using-metadata.md)  
 [<span data-ttu-id="57b10-198">Considerações de segurança com metadados</span><span class="sxs-lookup"><span data-stu-id="57b10-198">Security Considerations with Metadata</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-with-metadata.md)  
 [<span data-ttu-id="57b10-199">Estendendo o sistema de metadados</span><span class="sxs-lookup"><span data-stu-id="57b10-199">Extending the Metadata System</span></span>](../../../../docs/framework/wcf/extending/extending-the-metadata-system.md)
