---
title: Configurando suporte de transações de WS-Atomic
ms.date: 03/30/2017
helpviewer_keywords:
- WS-AT protocol [WCF], configuring WS-Atomic Transaction
ms.assetid: cb9f1c9c-1439-4172-b9bc-b01c3e09ac48
ms.openlocfilehash: 2ec4fd65b97808fbf1a8401f5c0913face5835f0
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64651134"
---
# <a name="configuring-ws-atomic-transaction-support"></a><span data-ttu-id="09b64-102">Configurando suporte de transações de WS-Atomic</span><span class="sxs-lookup"><span data-stu-id="09b64-102">Configuring WS-Atomic Transaction Support</span></span>
<span data-ttu-id="09b64-103">Este tópico descreve como você pode configurar o suporte de WS-AtomicTransaction (WS-AT) usando o utilitário de configuração do WS-AT.</span><span class="sxs-lookup"><span data-stu-id="09b64-103">This topic describes how you can configure WS-AtomicTransaction (WS-AT) support by using the WS-AT Configuration Utility.</span></span>  
  
## <a name="using-the-ws-at-configuration-utility"></a><span data-ttu-id="09b64-104">Usando o utilitário de configuração WS-AT</span><span class="sxs-lookup"><span data-stu-id="09b64-104">Using the WS-AT Configuration Utility</span></span>  
 <span data-ttu-id="09b64-105">O utilitário de configuração do WS-AT (wsatConfig.exe) é usado para definir as configurações de WS-AT.</span><span class="sxs-lookup"><span data-stu-id="09b64-105">The WS-AT Configuration Utility (wsatConfig.exe) is used to configure WS-AT settings.</span></span> <span data-ttu-id="09b64-106">Para habilitar o serviço de protocolo WS-AT, você deve usar o utilitário de configuração para configurar a porta HTTPS para WS-AT, associar um certificado X.509 para a porta HTTPS e configurar certificados de parceiro autorizado, especificando nomes de entidade do certificado ou impressões digitais.</span><span class="sxs-lookup"><span data-stu-id="09b64-106">In order to enable the WS-AT protocol service, you must use the configuration utility to configure the HTTPS port for WS-AT, bind an X.509 certificate to the HTTPS port, and configure authorized partner certificates by specifying certificate subject names or thumbprints.</span></span> <span data-ttu-id="09b64-107">O utilitário de configuração também permite que você selecione o modo de rastreamento e saída do conjunto padrão e máximo entrada tempos limite de transação.</span><span class="sxs-lookup"><span data-stu-id="09b64-107">The configuration utility also allows you to select the tracing mode and set default outgoing and maximum incoming transaction timeouts.</span></span>  
  
 <span data-ttu-id="09b64-108">Você pode acessar a funcionalidade desta ferramenta usando um snap-in de página de propriedade de Console de gerenciamento Microsoft (MMC) no console de gerenciamento de serviços de componentes ou de uma janela de linha de comando.</span><span class="sxs-lookup"><span data-stu-id="09b64-108">You can access this tool's functionality by using a Microsoft Management Console (MMC) property page snap-in in the Component Services management console, or from a command-line window.</span></span> <span data-ttu-id="09b64-109">Configurar o suporte de WS-AT no computador local por meio da janela de linha de comando; Defina configurações em computadores locais e remotos usando o snap-in do MMC.</span><span class="sxs-lookup"><span data-stu-id="09b64-109">Configure WS-AT support on the local machine through the command-line window; configure settings on both local and remote machines by using the MMC snap-in.</span></span>  
  
 <span data-ttu-id="09b64-110">A janela de linha de comando pode ser acessada no local de instalação do SDK do Windows "%WINDIR%\Microsoft.NET\Framework\v3.0\Windows Communication Foundation".</span><span class="sxs-lookup"><span data-stu-id="09b64-110">The command-line window can be accessed in the Windows SDK installation location "%WINDIR%\Microsoft.NET\Framework\v3.0\Windows Communication Foundation".</span></span>  
  
 <span data-ttu-id="09b64-111">Para obter mais informações sobre a ferramenta de linha de comando, consulte [WS-AtomicTransaction utilitário de configuração (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md).</span><span class="sxs-lookup"><span data-stu-id="09b64-111">For more information about the command-line tool, see [WS-AtomicTransaction Configuration Utility (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md).</span></span>  
  
 <span data-ttu-id="09b64-112">Se você estiver executando [!INCLUDE[wxp](../../../../includes/wxp-md.md)] ou [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], você pode acessar o snap-in do MMC, navegando até **serviços de componente/ferramentas de controle do painel/administrativos**, com o botão direito **meu computador**, e selecionando **propriedades**.</span><span class="sxs-lookup"><span data-stu-id="09b64-112">If you are running [!INCLUDE[wxp](../../../../includes/wxp-md.md)] or [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], you can access the MMC snap-in by navigating to **Control Panel/Administrative Tools/Component Services**, right-clicking **My Computer**, and selecting **Properties**.</span></span> <span data-ttu-id="09b64-113">Isso é o mesmo local onde você pode configurar o Microsoft Distributed Transaction coordenador (MSDTC).</span><span class="sxs-lookup"><span data-stu-id="09b64-113">This is the same location where you can configure the Microsoft Distributed Transaction Coordinator (MSDTC).</span></span> <span data-ttu-id="09b64-114">As opções disponíveis para configuração estão agrupadas sob o **WS-AT** guia. Se você estiver executando o Windows Vista ou [!INCLUDE[lserver](../../../../includes/lserver-md.md)], o snap-in do MMC pode ser encontrado clicando o **começar** botão e inserindo `dcomcnfg.exe` no **pesquisa** caixa.</span><span class="sxs-lookup"><span data-stu-id="09b64-114">Options available for configuration are grouped under the **WS-AT** tab. If you are running Windows Vista or [!INCLUDE[lserver](../../../../includes/lserver-md.md)], the MMC snap-in can be found by clicking the **Start** button, and entering `dcomcnfg.exe` in the **Search** box.</span></span> <span data-ttu-id="09b64-115">Quando o MMC for aberto, navegue até a **Meus Computer\Distributed transação Coordinator\Local DTC** nó, clique com botão direito e selecione **propriedades**.</span><span class="sxs-lookup"><span data-stu-id="09b64-115">When the MMC is opened, navigate to the **My Computer\Distributed Transaction Coordinator\Local DTC** node, right click and select **Properties**.</span></span> <span data-ttu-id="09b64-116">As opções disponíveis para configuração estão agrupadas sob o **WS-AT** guia.</span><span class="sxs-lookup"><span data-stu-id="09b64-116">Options available for configuration are grouped under the **WS-AT** tab.</span></span>  
  
 <span data-ttu-id="09b64-117">Para obter mais informações sobre o snap-in, consulte a [Snap-in MMC de configuração WS-AtomicTransaction](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md).</span><span class="sxs-lookup"><span data-stu-id="09b64-117">For more information about the snap-in, see the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md).</span></span>  
  
 <span data-ttu-id="09b64-118">Para habilitar a interface do usuário da ferramenta, você deve primeiro registrar o arquivo WsatUI.dll, localizado no seguinte caminho</span><span class="sxs-lookup"><span data-stu-id="09b64-118">To enable the tool's user interface, you must first register the WsatUI.dll file, located at the following path</span></span>  
  
 <span data-ttu-id="09b64-119">%PROGRAMFILES%\Microsoft SDKs\Windows\v6.0\Bin</span><span class="sxs-lookup"><span data-stu-id="09b64-119">%PROGRAMFILES%\Microsoft SDKs\Windows\v6.0\Bin</span></span>  
  
 <span data-ttu-id="09b64-120">Para registrar o produto, execute o seguinte comando em uma janela do Prompt de comando:</span><span class="sxs-lookup"><span data-stu-id="09b64-120">To register the product, execute the following command from a Command Prompt window:</span></span>  
  
 `regasm.exe /codebase WsatUI.dll`  
  
## <a name="enabling-ws-at"></a><span data-ttu-id="09b64-121">Habilitando WS-AT</span><span class="sxs-lookup"><span data-stu-id="09b64-121">Enabling WS-AT</span></span>  
 <span data-ttu-id="09b64-122">Para habilitar o serviço de protocolo WS-AT dentro do MSDTC usando a porta 443 e um certificado X.509 com uma chave privada que foi instalada no repositório do computador local, use a ferramenta de wsatConfig.exe com o comando a seguir.</span><span class="sxs-lookup"><span data-stu-id="09b64-122">To enable the WS-AT protocol service inside MSDTC using port 443 and an X.509 certificate with a private key that has been installed in the local machine store, use the wsatConfig.exe tool with the following command.</span></span>  
  
 `WsatConfig.exe –network:enable –port:8443 –endpointCert:<machine|"Issuer\SubjectName"> -accountsCerts:<thumbprint|"Issuer\SubjectName"> -restart`  
  
 <span data-ttu-id="09b64-123">Substitua os respectivos parâmetros com valores relevantes para seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="09b64-123">Substitute the respective parameters with values relevant to your environment.</span></span>  
  
 <span data-ttu-id="09b64-124">Para desabilitar o serviço de protocolo WS-AT dentro do MSDTC, use a ferramenta de wsatConfig.exe com o comando a seguir.</span><span class="sxs-lookup"><span data-stu-id="09b64-124">To disable the WS-AT protocol service inside MSDTC, use the wsatConfig.exe tool with the following command.</span></span>  
  
 `WsatConfig.exe –network:disable -restart`  
  
## <a name="configuring-trust-between-two-machines"></a><span data-ttu-id="09b64-125">Configurar confiança entre dois computadores</span><span class="sxs-lookup"><span data-stu-id="09b64-125">Configuring Trust Between Two Machines</span></span>  
 <span data-ttu-id="09b64-126">O serviço de protocolo WS-AT exige que o administrador explicitamente Autorizar contas individuais para participar de transações distribuídas.</span><span class="sxs-lookup"><span data-stu-id="09b64-126">The WS-AT protocol service requires the administrator to explicitly authorize individual accounts to participate in distributed transactions.</span></span> <span data-ttu-id="09b64-127">Se você for um administrador para duas máquinas, você pode configurar ambas as máquinas para estabelecer uma relação de confiança mútua trocando o conjunto certo de certificados entre as máquinas, instalá-los em armazenamentos de certificados apropriados e usando o ferramenta de wsatConfig.exe para adicionar o certificado de cada máquina dos outros lista de certificados de participantes autorizados.</span><span class="sxs-lookup"><span data-stu-id="09b64-127">If you are an administrator for two machines, you can configure both machines to establish a mutual trust relationship by exchanging the right set of certificates between the machines, installing them into the appropriate certificate stores, and using the wsatConfig.exe tool to add each machine's certificate to the other's list of authorized participant certificates.</span></span> <span data-ttu-id="09b64-128">Essa etapa é necessária executar transações distribuídas entre dois computadores que usam WS-AT.</span><span class="sxs-lookup"><span data-stu-id="09b64-128">This step is necessary to perform distributed transactions between two machines using WS-AT.</span></span>  
  
 <span data-ttu-id="09b64-129">No exemplo a seguir descreve as etapas para estabelecer a confiança entre dois computadores, A e B.</span><span class="sxs-lookup"><span data-stu-id="09b64-129">In the following example outlines the steps to establish trust between two machines, A and B.</span></span>  
  
### <a name="creating-and-exporting-certificates"></a><span data-ttu-id="09b64-130">Criando e exportando certificados</span><span class="sxs-lookup"><span data-stu-id="09b64-130">Creating and Exporting Certificates</span></span>  
 <span data-ttu-id="09b64-131">Este procedimento requer o snap-in MMC de certificados.</span><span class="sxs-lookup"><span data-stu-id="09b64-131">This procedure requires the MMC Certificates snap-in.</span></span> <span data-ttu-id="09b64-132">O snap-in pode ser acessado abrindo o menu Iniciar/Executar, digite "mmc" na caixa de entrada e pressionar Okey.</span><span class="sxs-lookup"><span data-stu-id="09b64-132">The snap-in can be accessed by opening the Start/Run menu, typing "mmc" in the input box and pressing OK.</span></span> <span data-ttu-id="09b64-133">Em seguida, nos **Console1** janela, navegue até **arquivo/adicionar ou remover** Snap-in, clique em Adicionar e escolha **certificados** do **autônomos disponíveis Snap-ins** lista.</span><span class="sxs-lookup"><span data-stu-id="09b64-133">Then, in the **Console1** window, navigate to **the File/Add-Remove** Snap-in, click Add, and choose **Certificates** from the **Available Standalone Snapins** list.</span></span> <span data-ttu-id="09b64-134">Por fim, selecione **conta de computador** para gerenciar e clique em **Okey**.</span><span class="sxs-lookup"><span data-stu-id="09b64-134">Finally, select **Computer Account** to manage and click **OK**.</span></span> <span data-ttu-id="09b64-135">O **certificados** nó aparece no console do snap-in.</span><span class="sxs-lookup"><span data-stu-id="09b64-135">The **Certificates** node appears in the snap-in console.</span></span>  
  
 <span data-ttu-id="09b64-136">Você já deve ter os certificados necessários para estabelecer a confiança.</span><span class="sxs-lookup"><span data-stu-id="09b64-136">You must already possess the required certificates to establish trust.</span></span> <span data-ttu-id="09b64-137">Para saber como criar e instalar novos certificados antes das etapas a seguir, consulte [como: Criar e instalar certificados de cliente temporário no WCF durante o desenvolvimento](https://go.microsoft.com/fwlink/?LinkId=158925).</span><span class="sxs-lookup"><span data-stu-id="09b64-137">To learn how to create and install new certificates prior to the following steps, see [How to: Create and Install Temporary Client Certificates in WCF During Development](https://go.microsoft.com/fwlink/?LinkId=158925).</span></span>  
  
1. <span data-ttu-id="09b64-138">No computador A usando o snap-in, a importação de certificados do MMC o certificado existente (certA) no LocalMachine\MY (nó pessoal) e store LocalMachine\ROOT (nó de autoridade de certificação raiz confiável).</span><span class="sxs-lookup"><span data-stu-id="09b64-138">On machine A, using the MMC Certificates snap-in, import the existing certificate (certA) into the LocalMachine\MY (Personal Node) and LocalMachine\ROOT store (trusted root certification authority node).</span></span> <span data-ttu-id="09b64-139">Para importar um certificado para um nó específico, clique com botão direito no nó e escolha **todas as tarefas/importação**.</span><span class="sxs-lookup"><span data-stu-id="09b64-139">To import a certificate to a specific node, right-click the node and choose **All Tasks/Import**.</span></span>  
  
2. <span data-ttu-id="09b64-140">No computador B, usando o snap-in do MMC de certificados, criar ou obter um certificado certB com uma chave privada e importá-lo para o LocalMachine\MY (nó pessoal) e o armazenamento de LocalMachine\ROOT (nó de autoridade de certificação raiz confiável).</span><span class="sxs-lookup"><span data-stu-id="09b64-140">On machine B, using the MMC Certificates snap-in, create or obtain a certificate certB with a private key and import it into the LocalMachine\MY (Personal Node) and LocalMachine\ROOT store (trusted root certification authority node).</span></span>  
  
3. <span data-ttu-id="09b64-141">Exporte a chave pública de certA para um arquivo se isso não já foi feito.</span><span class="sxs-lookup"><span data-stu-id="09b64-141">Export certA's public key to a file if this has not been done already.</span></span>  
  
4. <span data-ttu-id="09b64-142">Exporte chave pública do certB para um arquivo, se isso não já foi feito.</span><span class="sxs-lookup"><span data-stu-id="09b64-142">Export certB's public key to a file if this has not been done already.</span></span>  
  
### <a name="establishing-mutual-trust-between-machines"></a><span data-ttu-id="09b64-143">Estabelecendo a confiança mútua entre máquinas</span><span class="sxs-lookup"><span data-stu-id="09b64-143">Establishing Mutual Trust Between Machines</span></span>  
  
1. <span data-ttu-id="09b64-144">No computador A, importe a representação de arquivo de certB nos armazenamentos de LocalMachine\MY e LocalMachine\ROOT.</span><span class="sxs-lookup"><span data-stu-id="09b64-144">On machine A, import the file representation of certB into the LocalMachine\MY and LocalMachine\ROOT stores.</span></span> <span data-ttu-id="09b64-145">Isso declara nessa máquina um certB de relações de confiança para se comunicar com ele.</span><span class="sxs-lookup"><span data-stu-id="09b64-145">This declares that machine A trusts certB to communicate with it.</span></span>  
  
2. <span data-ttu-id="09b64-146">No computador B, importe o arquivo do certA para os repositórios de LocalMachine\MY e LocalMachine\ROOT.</span><span class="sxs-lookup"><span data-stu-id="09b64-146">On machine B, import certA’s file into the LocalMachine\MY and LocalMachine\ROOT stores.</span></span> <span data-ttu-id="09b64-147">Isso implica na máquina B certA de relações de confiança para se comunicar com ele.</span><span class="sxs-lookup"><span data-stu-id="09b64-147">This implies that machine B trusts certA to communicate with it.</span></span>  
  
 <span data-ttu-id="09b64-148">Depois de concluir essas etapas, a relação de confiança é estabelecida entre as duas máquinas, e eles podem ser configurados para se comunicar entre si usando WS-AT.</span><span class="sxs-lookup"><span data-stu-id="09b64-148">After completing these steps, trust is established between the two machines, and they can be configured to communicate with each other using WS-AT.</span></span>  
  
### <a name="configuring-msdtc-to-use-certificates"></a><span data-ttu-id="09b64-149">Configurar o MSDTC para usar certificados</span><span class="sxs-lookup"><span data-stu-id="09b64-149">Configuring MSDTC to Use Certificates</span></span>  
 <span data-ttu-id="09b64-150">Desde que o serviço de protocolo WS-AT atua como um cliente e um servidor, ele deve escutar conexões de entrada tanto iniciar conexões de saída.</span><span class="sxs-lookup"><span data-stu-id="09b64-150">Since the WS-AT protocol service acts as both a client and a server, it must both listen for incoming connections and initiate outgoing connections.</span></span> <span data-ttu-id="09b64-151">Portanto, você precisa configurar o MSDTC para que ele saiba qual certificado usar ao se comunicar com parceiros externos e quais certificados para autorizar ao aceitar a entrada de comunicação.</span><span class="sxs-lookup"><span data-stu-id="09b64-151">Therefore, you need to configure MSDTC so that it knows which certificate to use when communicating with external parties, and which certificates to authorize when accepting incoming communication.</span></span>  
  
 <span data-ttu-id="09b64-152">Você pode configurar isso usando o snap-in do MMC WS-AT.</span><span class="sxs-lookup"><span data-stu-id="09b64-152">You can configure this by using the MMC WS-AT snap-in.</span></span> <span data-ttu-id="09b64-153">Para obter mais informações sobre essa ferramenta, consulte o [Snap-in MMC de configuração WS-AtomicTransaction](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) tópico.</span><span class="sxs-lookup"><span data-stu-id="09b64-153">For more information about this tool, see the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) topic.</span></span> <span data-ttu-id="09b64-154">As etapas a seguir descrevem como estabelecer a relação de confiança entre dois computadores executando o MSDTC.</span><span class="sxs-lookup"><span data-stu-id="09b64-154">The following steps describe how to establish trust between two computers running MSDTC.</span></span>  
  
1. <span data-ttu-id="09b64-155">Defina configurações de máquina do.</span><span class="sxs-lookup"><span data-stu-id="09b64-155">Configure machine A's settings.</span></span> <span data-ttu-id="09b64-156">Para "Certificado do ponto de extremidade", selecione certA.</span><span class="sxs-lookup"><span data-stu-id="09b64-156">For "Endpoint Certificate", select certA.</span></span> <span data-ttu-id="09b64-157">Por "Certificados autorizado", selecione o certB.</span><span class="sxs-lookup"><span data-stu-id="09b64-157">For "Authorized Certificates", select the certB.</span></span>  
  
2. <span data-ttu-id="09b64-158">Defina configurações do computador B.</span><span class="sxs-lookup"><span data-stu-id="09b64-158">Configure machine B's settings.</span></span> <span data-ttu-id="09b64-159">Para "Certificado do ponto de extremidade", selecione certB.</span><span class="sxs-lookup"><span data-stu-id="09b64-159">For "Endpoint Certificate", select certB.</span></span> <span data-ttu-id="09b64-160">Por "Certificados autorizado", selecione o certA.</span><span class="sxs-lookup"><span data-stu-id="09b64-160">For "Authorized Certificates", select the certA.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="09b64-161">Quando um computador envia uma mensagem ao outro computador, o remetente tenta verificar o nome da entidade do certificado do destinatário e o nome da máquina do destinatário correspondem.</span><span class="sxs-lookup"><span data-stu-id="09b64-161">When one machine sends a message to the other machine, the sender attempts to verify that the subject name of the recipient’s certificate and the name of the recipient’s machine match.</span></span> <span data-ttu-id="09b64-162">Se eles não corresponderem, falha de verificação do certificado e as duas máquinas não podem se comunicar.</span><span class="sxs-lookup"><span data-stu-id="09b64-162">If they do not match, certificate verification fails and the two machines cannot communicate.</span></span>  
>   
>  <span data-ttu-id="09b64-163">Para um computador ingressado em um domínio, o nome é o nome de domínio totalmente qualificado.</span><span class="sxs-lookup"><span data-stu-id="09b64-163">For a machine joined to a domain, the name is the fully qualified domain name.</span></span> <span data-ttu-id="09b64-164">Por padrão, o nome de uma máquina em um grupo de trabalho é o nome do computador NetBIOS.</span><span class="sxs-lookup"><span data-stu-id="09b64-164">By default, the name of a machine on a workgroup is the machine’s NetBIOS name.</span></span> <span data-ttu-id="09b64-165">No entanto, o nome também pode incluir um sufixo do sistema de nome de domínio (DNS), se um estiver presente para a conexão que está sendo usado entre os dois computadores.</span><span class="sxs-lookup"><span data-stu-id="09b64-165">However, the name can also include a Domain Name System (DNS) suffix if one is present for the connection being used between the two machines.</span></span>  
>   
>  <span data-ttu-id="09b64-166">Se o nome da máquina for alterado, por exemplo, quando um computador de grupo de trabalho ingressa em um domínio, você deve emitir novamente os certificados ou configurar manualmente os sufixos DNS.</span><span class="sxs-lookup"><span data-stu-id="09b64-166">If the name of the machine changes, for example, when a workgroup machine joins a domain, you must reissue certificates or manually configure DNS suffixes.</span></span>  
  
## <a name="security"></a><span data-ttu-id="09b64-167">Segurança</span><span class="sxs-lookup"><span data-stu-id="09b64-167">Security</span></span>  
 <span data-ttu-id="09b64-168">Como algumas das configurações relacionadas ao MSDTC e WS-AT são armazenadas no registro em HKLM\Software\Microsoft\MSDTC e em HKLM\Software\Microsoft\WSAT, respectivamente, certifique-se de que essas chaves do registro são protegidas para que somente os administradores podem gravar a eles.</span><span class="sxs-lookup"><span data-stu-id="09b64-168">Since some of the settings related to MSDTC and WS-AT are stored in the registry at HKLM\Software\Microsoft\MSDTC and at HKLM\Software\Microsoft\WSAT, respectively, ensure that these registry keys are secured so that only administrators can write to them.</span></span> <span data-ttu-id="09b64-169">Na ferramenta do Editor do registro, clique com botão direito a chave que você deseja proteger e selecione **permissão** para definir o controle de acesso apropriado.</span><span class="sxs-lookup"><span data-stu-id="09b64-169">In the Registry Editor tool, right-click the key you want to secure and select **Permission** to set the appropriate access control.</span></span> <span data-ttu-id="09b64-170">É crucial para a segurança e integridade do sistema tão importante que as chaves são somente leitura para usuários com poucos privilégios.</span><span class="sxs-lookup"><span data-stu-id="09b64-170">It is crucial to the security and integrity of the system that important keys are read-only for low-privileged users.</span></span>  
  
 <span data-ttu-id="09b64-171">Ao implantar o MSDTC, o administrador deve garantir que qualquer troca de dados do MSDTC é segura.</span><span class="sxs-lookup"><span data-stu-id="09b64-171">When deploying MSDTC, the administrator must ensure that any MSDTC data interchange is secure.</span></span> <span data-ttu-id="09b64-172">Em uma implantação de grupo de trabalho, isolar a infra-estrutura transacional contra usuários mal-intencionados; em uma implantação de cluster, proteger o registro de cluster.</span><span class="sxs-lookup"><span data-stu-id="09b64-172">In a workgroup deployment, isolate the transactional infrastructure from malicious users; in a cluster deployment, secure the cluster registry.</span></span>  
  
## <a name="tracing"></a><span data-ttu-id="09b64-173">Rastreamento</span><span class="sxs-lookup"><span data-stu-id="09b64-173">Tracing</span></span>  
 <span data-ttu-id="09b64-174">O serviço de protocolo WS-AT oferece suporte integrado, transações específicas de rastreamento que pode ser habilitado e gerenciado por meio do uso do [Snap-in MMC de configuração WS-AtomicTransaction](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) ferramenta.</span><span class="sxs-lookup"><span data-stu-id="09b64-174">The WS-AT protocol service supports integrated, transaction specific tracing that can be enabled and managed through the use of the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) tool.</span></span>  <span data-ttu-id="09b64-175">Rastreamentos podem incluir dados que indica a hora em que uma inscrição é feita para uma transação específica, o tempo que uma transação atinge seu estado terminal, o resultado a inscrição de cada transação tem recebido.</span><span class="sxs-lookup"><span data-stu-id="09b64-175">Traces can include data indicating the time an enlistment is made for a specific transaction, the time a transaction reaches its terminal state, the outcome each transaction enlistment has received.</span></span> <span data-ttu-id="09b64-176">Todos os rastreamentos podem ser exibidos usando o [ferramenta de Visualizador de rastreamento de serviço (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) ferramenta.</span><span class="sxs-lookup"><span data-stu-id="09b64-176">All traces can be viewed using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) tool.</span></span>  
  
 <span data-ttu-id="09b64-177">O serviço de protocolo WS-AT também dá suporte a rastreamento de ServiceModel integrado por meio da sessão de rastreamento ETW.</span><span class="sxs-lookup"><span data-stu-id="09b64-177">The WS-AT protocol service also supports integrated ServiceModel tracing through the ETW trace session.</span></span> <span data-ttu-id="09b64-178">Isso fornece rastreamentos mais detalhados, de comunicação específicos, além de rastreamentos de transação existentes.</span><span class="sxs-lookup"><span data-stu-id="09b64-178">This provides more detailed, communication-specific traces in addition to the existing transaction traces.</span></span>  <span data-ttu-id="09b64-179">Para habilitar esses rastreamentos adicionais, siga estas etapas</span><span class="sxs-lookup"><span data-stu-id="09b64-179">To enable these additional traces, follow these steps</span></span>  
  
1. <span data-ttu-id="09b64-180">Abra o **iniciar/executar** menu, digite "regedit" na caixa de entrada e selecione **Okey**.</span><span class="sxs-lookup"><span data-stu-id="09b64-180">Open the **Start/Run** menu, type "regedit" in the input box and select **OK**.</span></span>  
  
2. <span data-ttu-id="09b64-181">No **Editor do registro**, navegue até a seguinte pasta no painel esquerdo, Hkey_Local_Machine\SOFTWARE\Microsoft\WSAT\3.0\\</span><span class="sxs-lookup"><span data-stu-id="09b64-181">In the **Registry Editor**, navigate to the following folder on the left pane, Hkey_Local_Machine\SOFTWARE\Microsoft\WSAT\3.0\\</span></span>  
  
3. <span data-ttu-id="09b64-182">Clique com botão direito do `ServiceModelDiagnosticTracing` de valor no painel direito e selecione **modificar**.</span><span class="sxs-lookup"><span data-stu-id="09b64-182">Right click the `ServiceModelDiagnosticTracing` value in the right pane and select **Modify**.</span></span>  
  
4. <span data-ttu-id="09b64-183">No **dados do valor** caixa de entrada, digite um dos seguintes valores válidos para especificar o nível de rastreamento que você deseja habilitar.</span><span class="sxs-lookup"><span data-stu-id="09b64-183">In the **Value data** input box, enter one of the following valid values to specify the trace level you want to enable.</span></span>  
  
- <span data-ttu-id="09b64-184">0: desativado</span><span class="sxs-lookup"><span data-stu-id="09b64-184">0: off</span></span>  
  
- <span data-ttu-id="09b64-185">1: crítico</span><span class="sxs-lookup"><span data-stu-id="09b64-185">1: critical</span></span>  
  
- <span data-ttu-id="09b64-186">3: erro.</span><span class="sxs-lookup"><span data-stu-id="09b64-186">3: error.</span></span> <span data-ttu-id="09b64-187">Esse é o valor padrão</span><span class="sxs-lookup"><span data-stu-id="09b64-187">This is the default value</span></span>  
  
- <span data-ttu-id="09b64-188">7: aviso</span><span class="sxs-lookup"><span data-stu-id="09b64-188">7: warning</span></span>  
  
- <span data-ttu-id="09b64-189">15: informações</span><span class="sxs-lookup"><span data-stu-id="09b64-189">15: information</span></span>  
  
- <span data-ttu-id="09b64-190">31: detalhado</span><span class="sxs-lookup"><span data-stu-id="09b64-190">31: verbose</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="09b64-191">Consulte também</span><span class="sxs-lookup"><span data-stu-id="09b64-191">See also</span></span>

- [<span data-ttu-id="09b64-192">Utilitário de configuração de WS-AtomicTransaction (wsatConfig.exe)</span><span class="sxs-lookup"><span data-stu-id="09b64-192">WS-AtomicTransaction Configuration Utility (wsatConfig.exe)</span></span>](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)
- [<span data-ttu-id="09b64-193">Snap-in do MMC de configuração de WS-AtomicTransaction</span><span class="sxs-lookup"><span data-stu-id="09b64-193">WS-AtomicTransaction Configuration MMC Snap-in</span></span>](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md)
