---
title: Visão geral de correlação
ms.date: 03/30/2017
ms.assetid: edcc0315-5d26-44d6-a36d-ea554c418e9f
ms.openlocfilehash: 7128ff531bb81fb6de526092513d5525ca138735
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61857312"
---
# <a name="correlation-overview"></a>Visão geral de correlação
Correlação é o mecanismo para relacionar mensagens do serviço de fluxo de trabalho entre si ou para o estado da instância de aplicativo, como uma resposta a uma solicitação inicial ou uma ID de ordem específica para o estado persistente de um fluxo de trabalho de processamento de pedidos. Este tópico fornece uma visão geral de correlação. Os outros tópicos nesta seção fornecem informações adicionais para cada tipo de correlação.  
  
## <a name="types-of-correlation"></a>Tipos de correlação  
 Correlação pode ser baseada em conteúdo ou protocolo. Correlações com base no protocolo de usam os dados fornecidos pela infraestrutura de entrega de mensagem para fornecer o mapeamento entre as mensagens. As mensagens que são correlacionadas usando correlação baseada em protocolo estão relacionadas entre si usando um objeto na memória, como um <xref:System.ServiceModel.Channels.RequestContext>, ou por um token fornecido pelo protocolo de transporte. Correlações conteudo base se relacionam mensagens entre si usando dados de aplicativo especificado. As mensagens que são correlacionadas usando correlação conteudo base que estão relacionadas uns aos outros por alguns dados de aplicativo definido na mensagem, como um número de cliente.  
  
 As atividades que participam de uso de correlação um <xref:System.ServiceModel.Activities.CorrelationHandle> unir as atividades de mensagem. Por exemplo, uma <xref:System.ServiceModel.Activities.Send> que é usado para chamar um serviço e uma subsequente <xref:System.ServiceModel.Activities.Receive> que é usado para receber um retorno de chamada do serviço, compartilham a mesma <xref:System.ServiceModel.Activities.CorrelationHandle>. Esse padrão básico é usado se a correlação é conteúdo com base ou baseada em protocolo. O identificador da correlação pode ser definido explicitamente em cada atividade ou as atividades podem estar contidas em um <xref:System.ServiceModel.Activities.CorrelationScope> atividade. Atividades contidas em uma <xref:System.ServiceModel.Activities.CorrelationScope> têm seus identificadores de correlação gerenciados pelo <xref:System.ServiceModel.Activities.CorrelationScope> e não exigem o <xref:System.ServiceModel.Activities.CorrelationHandle> ser definido explicitamente. Um <xref:System.ServiceModel.Activities.CorrelationScope> escopo fornece <xref:System.ServiceModel.Activities.CorrelationHandle> gerenciamento para uma correlação de solicitação-resposta e um tipo de correlação adicionais. Serviços de fluxo de trabalho hospedados usando <xref:System.ServiceModel.Activities.WorkflowServiceHost> têm a mesma correlação de gerenciamento padrão como o <xref:System.ServiceModel.Activities.CorrelationScope> atividade. Esse gerenciamento de correlação padrão geralmente significa que em muitos cenários, mensagens de atividades em um <xref:System.ServiceModel.Activities.CorrelationScope> ou um serviço de fluxo de trabalho não exigem seus <xref:System.ServiceModel.Activities.CorrelationHandle> definido a menos que sejam de várias atividades de mensagens em paralelo ou se sobrepõem, como dois <xref:System.ServiceModel.Activities.Receive> atividades em paralelo ou dois <xref:System.ServiceModel.Activities.Send> atividades seguido por dois <xref:System.ServiceModel.Activities.Receive> atividades. Para obter mais informações sobre a correlação de padrão são fornecidas nos tópicos nesta seção abordam cada tipo específico de correlação. Para obter mais informações sobre atividades de mensagens, consulte [atividades de mensagens](../../../../docs/framework/wcf/feature-details/messaging-activities.md) e [como: Criar um serviço de fluxo de trabalho com atividades de mensagem](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).  
  
## <a name="protocol-based-correlation"></a>Correlação baseada em protocolo

Correlação baseada em protocolo usa o mecanismo de transporte para relacionar mensagens entre si e a instância apropriada. Algumas correlações de protocolo fornecido pelo sistema incluem a correlação de solicitação-resposta e correlação de contexto base. Uma correlação de solicitação-resposta é usada para correlacionar um único par de atividades de mensagem para formar uma operação bidirecional, tal como uma <xref:System.ServiceModel.Activities.Send> emparelhado com um <xref:System.ServiceModel.Activities.ReceiveReply>, ou uma <xref:System.ServiceModel.Activities.Receive> emparelhado com um <xref:System.ServiceModel.Activities.SendReply>. O Designer de fluxo de trabalho do Visual Studio também fornece um conjunto de modelos de atividade rapidamente implementar esse padrão. Uma correlação baseada em contexto baseia-se o mecanismo de troca de contexto descrito o [especificação de protocolo de troca de contexto do .NET](https://go.microsoft.com/fwlink/?LinkID=166059). Para usar a correlação baseada em contexto, uma com base no contexto de associação, como <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> ou <xref:System.ServiceModel.NetTcpContextBinding> deve ser usado no ponto de extremidade.  
  
Para obter mais informações sobre a correlação de protocolo, consulte [Duplex durável](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md) e [solicitação-resposta](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md). Para obter mais informações sobre como usar os modelos de atividade do Designer de fluxo de trabalho do Visual Studio, consulte [atividades de mensagens](../../../../docs/framework/wcf/feature-details/messaging-activities.md). Para o código de exemplo, consulte o [NetContextExchangeCorrelation](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ee662963%28v%3dvs.100%29) exemplo.  
  
## <a name="content-based-correlation"></a>Correlação conteudo base

Correlação conteudo base que usa de alguma informação na mensagem de associá-la a uma determinada instância. Ao contrário de correlação baseada em protocolo, correlação conteudo base requer o autor do aplicativo declarar explicitamente onde esses dados podem ser encontrados em cada mensagem relacionada. As atividades que usam a correlação conteudo base especificam esses dados de mensagem usando um <xref:System.ServiceModel.MessageQuerySet>. Correlação conteudo base é útil ao se comunicar com os serviços que não usam uma das ligações de contexto, como <xref:System.ServiceModel.BasicHttpContextBinding>.
  
## <a name="see-also"></a>Consulte também

- [NetContextExchangeCorrelation](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ee662963%28v%3dvs.100%29)
