---
title: "Visão geral de correlação"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: edcc0315-5d26-44d6-a36d-ea554c418e9f
caps.latest.revision: "12"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 3d4320c088c66abdc2c4ff226eb99d66fcbd3b38
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/21/2017
---
# <a name="correlation-overview"></a><span data-ttu-id="df5b4-102">Visão geral de correlação</span><span class="sxs-lookup"><span data-stu-id="df5b4-102">Correlation Overview</span></span>
<span data-ttu-id="df5b4-103">Correlação é o mecanismo para relacionar as mensagens do serviço de fluxo de trabalho para outro ou para o estado de instância de aplicativo, como uma resposta a uma solicitação inicial ou uma ID de ordem específica para o estado persistente de um fluxo de trabalho de processamento de pedidos.</span><span class="sxs-lookup"><span data-stu-id="df5b4-103">Correlation is the mechanism for relating workflow service messages to each other or to the application instance state, such as a reply to an initial request, or a particular order ID to the persisted state of an order-processing workflow.</span></span> <span data-ttu-id="df5b4-104">Este tópico fornece uma visão geral de correlação.</span><span class="sxs-lookup"><span data-stu-id="df5b4-104">This topic provides an overview of correlation.</span></span> <span data-ttu-id="df5b4-105">Os outros tópicos nesta seção fornecem informações adicionais para cada tipo de correlação.</span><span class="sxs-lookup"><span data-stu-id="df5b4-105">The other topics in this section provide additional information for each type of correlation.</span></span>  
  
## <a name="types-of-correlation"></a><span data-ttu-id="df5b4-106">Tipos de correlação</span><span class="sxs-lookup"><span data-stu-id="df5b4-106">Types of Correlation</span></span>  
 <span data-ttu-id="df5b4-107">Correlação pode ser baseada em conteúdo ou protocolo.</span><span class="sxs-lookup"><span data-stu-id="df5b4-107">Correlation can be protocol-based or content-based.</span></span> <span data-ttu-id="df5b4-108">Com base no protocolo correlações usam dados fornecidos pela infraestrutura de entrega de mensagem para fornecer mapeamento entre as mensagens.</span><span class="sxs-lookup"><span data-stu-id="df5b4-108">Protocol-based correlations use data provided by the message delivery infrastructure to provide the mapping between messages.</span></span> <span data-ttu-id="df5b4-109">As mensagens que são correlacionadas usando correlação baseada no protocolo estão relacionadas entre si usando um objeto na memória, como um <xref:System.ServiceModel.Channels.RequestContext>, ou por um token fornecido pelo protocolo de transporte.</span><span class="sxs-lookup"><span data-stu-id="df5b4-109">Messages that are correlated using protocol-based correlation are related to each other using an object in memory, such as a <xref:System.ServiceModel.Channels.RequestContext>, or by a token provided by the transport protocol.</span></span> <span data-ttu-id="df5b4-110">Com base em conteúdo correlações relacionam mensagens entre si usando dados de aplicativo especificado.</span><span class="sxs-lookup"><span data-stu-id="df5b4-110">Content-based correlations relate messages to each other using application-specified data.</span></span> <span data-ttu-id="df5b4-111">As mensagens que são correlacionadas usando correlação baseada em conteúdo estão relacionadas uns aos outros por alguns dados de aplicativo definido na mensagem, como um número de cliente.</span><span class="sxs-lookup"><span data-stu-id="df5b4-111">Messages that are correlated using content-based correlation are related to each other by some application-defined data in the message, such as a customer number.</span></span>  
  
 <span data-ttu-id="df5b4-112">Atividades que participam de correlação use um <xref:System.ServiceModel.Activities.CorrelationHandle> para unir as atividades de mensagens.</span><span class="sxs-lookup"><span data-stu-id="df5b4-112">Activities that participate in correlation use a <xref:System.ServiceModel.Activities.CorrelationHandle> to tie the messaging activities together.</span></span> <span data-ttu-id="df5b4-113">Por exemplo, um <xref:System.ServiceModel.Activities.Send> que é usada para chamar um serviço e um subsequentes <xref:System.ServiceModel.Activities.Receive> que é usado para receber um retorno de chamada do serviço, compartilham o mesmo <xref:System.ServiceModel.Activities.CorrelationHandle>.</span><span class="sxs-lookup"><span data-stu-id="df5b4-113">For example, a <xref:System.ServiceModel.Activities.Send> that is used to call a service and a subsequent <xref:System.ServiceModel.Activities.Receive> that is used to receive a callback from the service, share the same <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="df5b4-114">Esse padrão básico é usado se a correlação é conteúdo com base ou baseado no protocolo.</span><span class="sxs-lookup"><span data-stu-id="df5b4-114">This basic pattern is used whether the correlation is content based or protocol based.</span></span> <span data-ttu-id="df5b4-115">O identificador de correlação pode ser explicitamente definido em cada atividade ou as atividades podem estar contidas em um <xref:System.ServiceModel.Activities.CorrelationScope> atividade.</span><span class="sxs-lookup"><span data-stu-id="df5b4-115">The correlation handle can be explicitly set on each activity or the activities can be contained in a <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="df5b4-116">Atividades contidas em uma <xref:System.ServiceModel.Activities.CorrelationScope> têm seus identificadores de correlação gerenciados pelo <xref:System.ServiceModel.Activities.CorrelationScope> e não exigem o <xref:System.ServiceModel.Activities.CorrelationHandle> a ser definido explicitamente.</span><span class="sxs-lookup"><span data-stu-id="df5b4-116">Activities contained in a <xref:System.ServiceModel.Activities.CorrelationScope> have their correlation handles managed by the <xref:System.ServiceModel.Activities.CorrelationScope> and do not require the <xref:System.ServiceModel.Activities.CorrelationHandle> to be explicitly set.</span></span> <span data-ttu-id="df5b4-117">Um <xref:System.ServiceModel.Activities.CorrelationScope> escopo fornece <xref:System.ServiceModel.Activities.CorrelationHandle> gerenciamento para uma correlação de solicitação-resposta e um tipo de correlação adicionais.</span><span class="sxs-lookup"><span data-stu-id="df5b4-117">A <xref:System.ServiceModel.Activities.CorrelationScope> scope provides <xref:System.ServiceModel.Activities.CorrelationHandle> management for a request-reply correlation and one additional correlation type.</span></span> <span data-ttu-id="df5b4-118">Serviços de fluxo de trabalho hospedados usando <xref:System.ServiceModel.Activities.WorkflowServiceHost> têm o mesmo gerenciamento correlação padrão como o <xref:System.ServiceModel.Activities.CorrelationScope> atividade.</span><span class="sxs-lookup"><span data-stu-id="df5b4-118">Workflow services hosted using <xref:System.ServiceModel.Activities.WorkflowServiceHost> have the same default correlation management as the <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="df5b4-119">Este gerenciamento de correlação padrão geralmente significa que em muitos cenários, mensagens de atividades em um <xref:System.ServiceModel.Activities.CorrelationScope> ou um serviço de fluxo de trabalho não exigem seus <xref:System.ServiceModel.Activities.CorrelationHandle> definido a menos que tenha várias atividades de mensagens em paralelo ou se sobrepõem, como dois <xref:System.ServiceModel.Activities.Receive> atividades em paralelo ou dois <xref:System.ServiceModel.Activities.Send> atividades seguido por dois <xref:System.ServiceModel.Activities.Receive> atividades.</span><span class="sxs-lookup"><span data-stu-id="df5b4-119">This default correlation management generally means that in many scenarios, messaging activities in a <xref:System.ServiceModel.Activities.CorrelationScope> or a workflow service do not require their <xref:System.ServiceModel.Activities.CorrelationHandle> set unless multiple messaging activities are in parallel or overlap, such as two <xref:System.ServiceModel.Activities.Receive> activities in parallel, or two <xref:System.ServiceModel.Activities.Send> activities followed by two <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="df5b4-120">Para obter mais informações sobre a correlação padrão são fornecidas nos tópicos desta seção abrangem cada tipo específico de correlação.</span><span class="sxs-lookup"><span data-stu-id="df5b4-120">More information about default correlation is provided in the topics in this section that cover each specific type of correlation.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="df5b4-121">atividades de mensagens consulte [atividades de mensagens](../../../../docs/framework/wcf/feature-details/messaging-activities.md) e [como: criar um serviço de fluxo de trabalho com atividades de mensagens](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="df5b4-121"> messaging activities see [Messaging Activities](../../../../docs/framework/wcf/feature-details/messaging-activities.md) and [How to: Create a Workflow Service with Messaging Activities](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).</span></span>  
  
## <a name="protocol-based-correlation"></a><span data-ttu-id="df5b4-122">Correlação baseada no protocolo</span><span class="sxs-lookup"><span data-stu-id="df5b4-122">Protocol-Based Correlation</span></span>  
 <span data-ttu-id="df5b4-123">Correlação baseada no protocolo usa o mecanismo de transporte para relacionar as mensagens entre si e com a instância apropriada.</span><span class="sxs-lookup"><span data-stu-id="df5b4-123">Protocol-based correlation uses the transport mechanism to relate messages to each other and the appropriate instance.</span></span> <span data-ttu-id="df5b4-124">Alguns correlações protocolo fornecido pelo sistema incluem a correlação de solicitação-resposta e correlação baseada em contexto.</span><span class="sxs-lookup"><span data-stu-id="df5b4-124">Some system-provided protocol correlations include request-reply correlation and context-based correlation.</span></span> <span data-ttu-id="df5b4-125">Uma correlação de solicitação-resposta é usada para correlacionar um único par de atividades de mensagem para formar uma operação bidirecional, como um <xref:System.ServiceModel.Activities.Send> emparelhado com um <xref:System.ServiceModel.Activities.ReceiveReply>, ou um <xref:System.ServiceModel.Activities.Receive> emparelhado com um <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="df5b4-125">A request-reply correlation is used to correlate a single pair of messaging activities to form a two-way operation, such as a <xref:System.ServiceModel.Activities.Send> paired with a <xref:System.ServiceModel.Activities.ReceiveReply>, or a <xref:System.ServiceModel.Activities.Receive> paired with a <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="df5b4-126">O [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Designer de fluxo de trabalho também fornece um conjunto de modelos de atividade de rapidamente implementar esse padrão.</span><span class="sxs-lookup"><span data-stu-id="df5b4-126">The [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Workflow Designer also provides a set of activity templates to quickly implement this pattern.</span></span> <span data-ttu-id="df5b4-127">Uma correlação baseada em contexto baseia-se o mecanismo de troca de contexto descrito o [especificação do protocolo de troca de contexto de .NET](http://go.microsoft.com/fwlink/?LinkID=166059).</span><span class="sxs-lookup"><span data-stu-id="df5b4-127">A context-based correlation is based on the context exchange mechanism described in the [.NET Context Exchange Protocol Specification](http://go.microsoft.com/fwlink/?LinkID=166059).</span></span> <span data-ttu-id="df5b4-128">Para usar a correlação baseada em contexto, uma com base em contexto de associação, como <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> ou <xref:System.ServiceModel.NetTcpContextBinding> deve ser usado no ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="df5b4-128">To use context-based correlation, a context-based binding such as <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> or <xref:System.ServiceModel.NetTcpContextBinding> must be used on the endpoint.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="df5b4-129">correlação de protocolo, consulte [intercâmbio de contexto](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md), [Duplex durável](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md), e [solicitação-resposta](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="df5b4-129"> protocol correlation, see [Context Exchange](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md), [Durable Duplex](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md), and [Request-Reply](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="df5b4-130">usando o [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] modelos de atividade do Designer de fluxo de trabalho, consulte [atividades de mensagens](../../../../docs/framework/wcf/feature-details/messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="df5b4-130"> using the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Workflow Designer activity templates, see [Messaging Activities](../../../../docs/framework/wcf/feature-details/messaging-activities.md).</span></span> <span data-ttu-id="df5b4-131">Para obter o código de exemplo, consulte o [Duplex durável &#91; Exemplos de WF &#93; ](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md) e [NetContextExchangeCorrelation](http://msdn.microsoft.com/en-us/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf) exemplos.</span><span class="sxs-lookup"><span data-stu-id="df5b4-131">For sample code, see the [Durable Duplex &#91;WF Samples&#93;](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md) and [NetContextExchangeCorrelation](http://msdn.microsoft.com/en-us/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf) samples.</span></span>  
  
## <a name="content-based-correlation"></a><span data-ttu-id="df5b4-132">Correlação conteudo base</span><span class="sxs-lookup"><span data-stu-id="df5b4-132">Content-Based Correlation</span></span>  
 <span data-ttu-id="df5b4-133">Correlação baseada em conteúdo usa alguma informação na mensagem para associá-la a uma determinada instância.</span><span class="sxs-lookup"><span data-stu-id="df5b4-133">Content-based correlation uses some piece of information in the message to associate it to a particular instance.</span></span> <span data-ttu-id="df5b4-134">Ao contrário de correlação baseada no protocolo, correlação baseada em conteúdo requer o autor do aplicativo declarar explicitamente onde esses dados podem ser encontrados em cada mensagem relacionada.</span><span class="sxs-lookup"><span data-stu-id="df5b4-134">Unlike protocol-based correlation, content-based correlation requires the application author to explicitly state where this data can be found in each related message.</span></span> <span data-ttu-id="df5b4-135">As atividades que usam a correlação baseada em conteúdo especificar esses dados de mensagem usando um <xref:System.ServiceModel.MessageQuerySet>.</span><span class="sxs-lookup"><span data-stu-id="df5b4-135">Activities that use content-based correlation specify this message data by using a <xref:System.ServiceModel.MessageQuerySet>.</span></span> <span data-ttu-id="df5b4-136">Correlação baseada em conteúdo é útil ao se comunicar com os serviços que não usam uma das ligações de contexto, como <xref:System.ServiceModel.BasicHttpContextBinding>.</span><span class="sxs-lookup"><span data-stu-id="df5b4-136">Content-based correlation is useful when communicating with services that do not use one of the context bindings such as <xref:System.ServiceModel.BasicHttpContextBinding>.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="df5b4-137">correlação baseada em conteúdo, consulte [baseada em conteúdo](../../../../docs/framework/wcf/feature-details/content-based-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="df5b4-137"> content-based correlation, see [Content Based](../../../../docs/framework/wcf/feature-details/content-based-correlation.md).</span></span> <span data-ttu-id="df5b4-138">Para obter o código de exemplo, consulte o [correlação baseada em conteúdo](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md) e [Calculadora correlacionada](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md) exemplos.</span><span class="sxs-lookup"><span data-stu-id="df5b4-138">For sample code, see the [Content-Based Correlation](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md) and [Correlated Calculator](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md) samples.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="df5b4-139">Consulte também</span><span class="sxs-lookup"><span data-stu-id="df5b4-139">See Also</span></span>  
 [<span data-ttu-id="df5b4-140">Correlação baseada em conteúdo</span><span class="sxs-lookup"><span data-stu-id="df5b4-140">Content-Based Correlation</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md)  
 [<span data-ttu-id="df5b4-141">Calculadora correlacionada</span><span class="sxs-lookup"><span data-stu-id="df5b4-141">Correlated Calculator</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md)  
 [<span data-ttu-id="df5b4-142">Frente e verso durável &#91; Exemplos de WF &#93;</span><span class="sxs-lookup"><span data-stu-id="df5b4-142">Durable Duplex &#91;WF Samples&#93;</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md)  
 [<span data-ttu-id="df5b4-143">NetContextExchangeCorrelation</span><span class="sxs-lookup"><span data-stu-id="df5b4-143">NetContextExchangeCorrelation</span></span>](http://msdn.microsoft.com/en-us/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf)
