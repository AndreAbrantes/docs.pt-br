---
title: Mensagens de segurança que usam a segurança de transporte
ms.date: 03/30/2017
ms.assetid: 9029771a-097e-448a-a13a-55d2878330b8
ms.openlocfilehash: b3931d594b585a176be7a9a2e2779df5d844c56b
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96288587"
---
# <a name="securing-messages-using-transport-security"></a><span data-ttu-id="07cd6-102">Mensagens de segurança que usam a segurança de transporte</span><span class="sxs-lookup"><span data-stu-id="07cd6-102">Securing Messages Using Transport Security</span></span>

<span data-ttu-id="07cd6-103">Esta seção discute a segurança de transporte do MSMQ (enfileiramento de mensagens) que você pode usar para proteger mensagens enviadas a uma fila.</span><span class="sxs-lookup"><span data-stu-id="07cd6-103">This section discusses Message Queuing (MSMQ) transport security that you can use to secure messages sent to a queue.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="07cd6-104">Antes de ler este tópico, é recomendável que você leia os [conceitos de segurança](security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="07cd6-104">Before reading through this topic, it is recommended that you read [Security Concepts](security-concepts.md).</span></span>  
  
 <span data-ttu-id="07cd6-105">A ilustração a seguir fornece um modelo conceitual de comunicação em fila usando o Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="07cd6-105">The following illustration provides a conceptual model of queued communication using Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="07cd6-106">Esta ilustração e terminologia são usadas para explicar os conceitos de segurança de transporte.</span><span class="sxs-lookup"><span data-stu-id="07cd6-106">This illustration and terminology is used to explain transport security concepts.</span></span>  
  
 <span data-ttu-id="07cd6-107">![Diagrama de aplicativos enfileirados](media/distributed-queue-figure.jpg "Distributed-Queue-figura")</span><span class="sxs-lookup"><span data-stu-id="07cd6-107">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="07cd6-108">Ao enviar mensagens em fila usando o WCF com <xref:System.ServiceModel.NetMsmqBinding> o, a mensagem WCF é anexada como um corpo da mensagem MSMQ.</span><span class="sxs-lookup"><span data-stu-id="07cd6-108">When sending queued messages using WCF with <xref:System.ServiceModel.NetMsmqBinding>, the WCF message is attached as a body of the MSMQ message.</span></span> <span data-ttu-id="07cd6-109">A segurança de transporte protege toda a mensagem do MSMQ (cabeçalhos ou propriedades de mensagens MSMQ e o corpo da mensagem).</span><span class="sxs-lookup"><span data-stu-id="07cd6-109">Transport security secures the entire MSMQ message (MSMQ message headers or properties and the message body).</span></span> <span data-ttu-id="07cd6-110">Como é o corpo da mensagem do MSMQ, usar a segurança de transporte também protege a mensagem do WCF.</span><span class="sxs-lookup"><span data-stu-id="07cd6-110">Because it is the body of the MSMQ message, using transport security also secures the WCF message.</span></span>  
  
 <span data-ttu-id="07cd6-111">O principal conceito por trás da segurança de transporte é que o cliente precisa atender aos requisitos de segurança para obter a mensagem para a fila de destino.</span><span class="sxs-lookup"><span data-stu-id="07cd6-111">The key concept behind transport security is that the client has to meet security requirements to get the message to the target queue.</span></span> <span data-ttu-id="07cd6-112">Isso é diferente da segurança da mensagem, em que a mensagem é protegida para o aplicativo que recebe a mensagem.</span><span class="sxs-lookup"><span data-stu-id="07cd6-112">This is unlike Message security, where the message is secured for the application that receives the message.</span></span>  
  
 <span data-ttu-id="07cd6-113">Segurança de transporte usando <xref:System.ServiceModel.NetMsmqBinding> e <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacta como as mensagens MSMQ são protegidas em trânsito entre a fila de transmissão e a fila de destino onde o seguro implica:</span><span class="sxs-lookup"><span data-stu-id="07cd6-113">Transport security using <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacts how MSMQ messages are secured in-transit between the transmission queue and the target queue where secured implies:</span></span>  
  
- <span data-ttu-id="07cd6-114">Assinar a mensagem para garantir que ela não seja violada.</span><span class="sxs-lookup"><span data-stu-id="07cd6-114">Signing the message to ensure it is not tampered with.</span></span>  
  
- <span data-ttu-id="07cd6-115">Criptografar a mensagem para garantir que ela não possa ser vista ou adulterada.</span><span class="sxs-lookup"><span data-stu-id="07cd6-115">Encrypting the message to ensure that it cannot be seen or tampered with.</span></span> <span data-ttu-id="07cd6-116">Isso é recomendado, mas opcional.</span><span class="sxs-lookup"><span data-stu-id="07cd6-116">This is recommended but optional.</span></span>  
  
- <span data-ttu-id="07cd6-117">O Gerenciador de fila de destino que identifica o remetente da mensagem para não-repúdio.</span><span class="sxs-lookup"><span data-stu-id="07cd6-117">The target queue manager that identifies the sender of the message for non-repudiation.</span></span>  
  
 <span data-ttu-id="07cd6-118">No MSMQ, independentemente da autenticação, a fila de destino tem uma ACL (lista de controle de acesso) para verificar se o cliente tem permissão para enviar a mensagem para a fila de destino.</span><span class="sxs-lookup"><span data-stu-id="07cd6-118">In MSMQ, independent of authentication, the target queue has an access control list (ACL) to check whether the client has permission to send the message to the target queue.</span></span> <span data-ttu-id="07cd6-119">O aplicativo receptor também é verificado quanto à permissão para receber a mensagem da fila de destino.</span><span class="sxs-lookup"><span data-stu-id="07cd6-119">The receiving application is also checked for permission to receive the message from the target queue.</span></span>  
  
## <a name="wcf-msmq-transport-security-properties"></a><span data-ttu-id="07cd6-120">Propriedades de segurança de transporte MSMQ do WCF</span><span class="sxs-lookup"><span data-stu-id="07cd6-120">WCF MSMQ Transport Security Properties</span></span>  

 <span data-ttu-id="07cd6-121">O MSMQ usa a segurança do Windows para autenticação.</span><span class="sxs-lookup"><span data-stu-id="07cd6-121">MSMQ uses Windows security for authentication.</span></span> <span data-ttu-id="07cd6-122">Ele usa o SID (identificador de segurança do Windows) para identificar o cliente e usa Active Directory serviço de diretório como a autoridade de certificação ao autenticar o cliente.</span><span class="sxs-lookup"><span data-stu-id="07cd6-122">It uses the Windows security identifier (SID) to identify the client and uses Active Directory directory service as the certificate authority when authenticating the client.</span></span> <span data-ttu-id="07cd6-123">Isso requer que o MSMQ seja instalado com a integração do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="07cd6-123">This requires MSMQ to be installed with Active Directory integration.</span></span> <span data-ttu-id="07cd6-124">Como o SID de domínio do Windows é usado para identificar o cliente, essa opção de segurança só é significativa quando o cliente e o serviço fazem parte do mesmo domínio do Windows.</span><span class="sxs-lookup"><span data-stu-id="07cd6-124">Because the Windows domain SID is used to identify the client, this security option is only meaningful when both the client and service are part of the same Windows domain.</span></span>  
  
 <span data-ttu-id="07cd6-125">O MSMQ também fornece a capacidade de anexar um certificado com a mensagem que não está registrada com Active Directory.</span><span class="sxs-lookup"><span data-stu-id="07cd6-125">MSMQ also provides the ability to attach a certificate with the message that is not registered with Active Directory.</span></span> <span data-ttu-id="07cd6-126">Nesse caso, ele garante que a mensagem foi assinada usando o certificado anexado.</span><span class="sxs-lookup"><span data-stu-id="07cd6-126">In this case, it ensures that the message was signed using the attached certificate.</span></span>  
  
 <span data-ttu-id="07cd6-127">O WCF fornece essas duas opções como parte da segurança de transporte MSMQ e é o pivô principal para segurança de transporte.</span><span class="sxs-lookup"><span data-stu-id="07cd6-127">WCF provides both these options as part of MSMQ transport security and they are the key pivot for transport security.</span></span>  
  
 <span data-ttu-id="07cd6-128">Por padrão, a segurança de transporte é ativada.</span><span class="sxs-lookup"><span data-stu-id="07cd6-128">By default, transport security is turned on.</span></span>  
  
 <span data-ttu-id="07cd6-129">Considerando esses conceitos básicos, as seções a seguir detalham as propriedades de segurança de transporte agrupadas com o <xref:System.ServiceModel.NetMsmqBinding> e o <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> .</span><span class="sxs-lookup"><span data-stu-id="07cd6-129">Given these basics, the following sections detail transport security properties bundled with <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span>  
  
#### <a name="msmq-authentication-mode"></a><span data-ttu-id="07cd6-130">Modo de autenticação do MSMQ</span><span class="sxs-lookup"><span data-stu-id="07cd6-130">MSMQ Authentication Mode</span></span>  

 <span data-ttu-id="07cd6-131">O <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> determina se a segurança de domínio do Windows ou uma segurança externa baseada em certificado deve ser usada para proteger a mensagem.</span><span class="sxs-lookup"><span data-stu-id="07cd6-131">The <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> dictates whether to use the Windows domain security or an external certificate-based security to secure the message.</span></span> <span data-ttu-id="07cd6-132">Nos dois modos de autenticação, o canal de transporte na fila do WCF usa o `CertificateValidationMode` especificado na configuração do serviço.</span><span class="sxs-lookup"><span data-stu-id="07cd6-132">In both authentication modes, the WCF queued transport channel uses the `CertificateValidationMode` specified in the service configuration.</span></span> <span data-ttu-id="07cd6-133">O modo de validação de certificado especifica o mecanismo usado para verificar a validade do certificado.</span><span class="sxs-lookup"><span data-stu-id="07cd6-133">The certificate validation mode specifies the mechanism used to check the validity of the certificate.</span></span>  
  
 <span data-ttu-id="07cd6-134">Quando a segurança de transporte é ativada, a configuração padrão é <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> .</span><span class="sxs-lookup"><span data-stu-id="07cd6-134">When transport security is turned on, the default setting is <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="windows-domain-authentication-mode"></a><span data-ttu-id="07cd6-135">Modo de autenticação de domínio do Windows</span><span class="sxs-lookup"><span data-stu-id="07cd6-135">Windows Domain Authentication Mode</span></span>  

 <span data-ttu-id="07cd6-136">A escolha de usar a segurança do Windows requer a integração de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="07cd6-136">The choice of using Windows security requires Active Directory integration.</span></span> <span data-ttu-id="07cd6-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> é o modo de segurança de transporte padrão.</span><span class="sxs-lookup"><span data-stu-id="07cd6-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> is the default transport security mode.</span></span> <span data-ttu-id="07cd6-138">Quando isso é definido, o canal do WCF anexa o SID do Windows à mensagem do MSMQ e usa seu certificado interno obtido do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="07cd6-138">When this is set, the WCF channel attaches the Windows SID to the MSMQ message and uses its internal certificate obtained from Active Directory.</span></span> <span data-ttu-id="07cd6-139">O MSMQ usa esse certificado interno para proteger a mensagem.</span><span class="sxs-lookup"><span data-stu-id="07cd6-139">MSMQ uses this internal certificate to secure the message.</span></span> <span data-ttu-id="07cd6-140">O Gerenciador de filas de recebimento usa Active Directory para pesquisar e localizar um certificado correspondente para autenticar o cliente e verifica se o SID também corresponde ao do cliente.</span><span class="sxs-lookup"><span data-stu-id="07cd6-140">The receiving queue manager uses Active Directory to search and find a matching certificate to authenticate the client and checks that the SID also matches that of the client.</span></span> <span data-ttu-id="07cd6-141">Essa etapa de autenticação é executada se um certificado, gerado internamente no caso do `WindowsDomain` modo de autenticação ou gerado externamente no caso do `Certificate` modo de autenticação, é anexado à mensagem mesmo que a fila de destino não esteja marcada como exigindo autenticação.</span><span class="sxs-lookup"><span data-stu-id="07cd6-141">This authentication step is executed if a certificate, either internally generated in the case of `WindowsDomain` authentication mode or externally generated in the case of `Certificate` authentication mode, is attached to the message even if the target queue is not marked as requiring authentication.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="07cd6-142">Ao criar uma fila, você pode marcar a fila como uma fila autenticada para indicar que a fila requer autenticação do cliente enviando mensagens para a fila.</span><span class="sxs-lookup"><span data-stu-id="07cd6-142">When creating a queue, you can mark the queue as an authenticated queue to indicate that the queue requires authentication of the client sending messages to the queue.</span></span> <span data-ttu-id="07cd6-143">Isso garante que nenhuma mensagem não autenticada seja aceita na fila.</span><span class="sxs-lookup"><span data-stu-id="07cd6-143">This ensures that no unauthenticated messages are accepted in the queue.</span></span>  
  
 <span data-ttu-id="07cd6-144">O SID anexado à mensagem também é usado para verificar a ACL da fila de destino para garantir que o cliente tenha autoridade para enviar mensagens para a fila.</span><span class="sxs-lookup"><span data-stu-id="07cd6-144">The SID attached with the message is also used to check against the target queue's ACL to ensure that the client has the authority to send messages to the queue.</span></span>  
  
#### <a name="certificate-authentication-mode"></a><span data-ttu-id="07cd6-145">Modo de autenticação de certificado</span><span class="sxs-lookup"><span data-stu-id="07cd6-145">Certificate Authentication Mode</span></span>  

 <span data-ttu-id="07cd6-146">A opção de usar o modo de autenticação de certificado não requer integração de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="07cd6-146">The choice of using certificate authentication mode does not require Active Directory integration.</span></span> <span data-ttu-id="07cd6-147">Na verdade, em alguns casos, como quando o MSMQ é instalado no modo de grupo de trabalho (sem integração com o Active Directory) ou ao usar o protocolo de transferência SRMP (protocolo SOAP de mensagens confiáveis) para enviar mensagens para a fila, o só <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> funciona.</span><span class="sxs-lookup"><span data-stu-id="07cd6-147">In fact, in some cases, such as when MSMQ is installed in workgroup mode (without Active Directory integration) or when using the SOAP Reliable Messaging Protocol (SRMP) transfer protocol to send messages to the queue, only <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> works.</span></span>  
  
 <span data-ttu-id="07cd6-148">Ao enviar uma mensagem WCF com <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> , o canal WCF não anexa um SID do Windows à mensagem MSMQ.</span><span class="sxs-lookup"><span data-stu-id="07cd6-148">When sending a WCF message with <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, the WCF channel does not attach a Windows SID to the MSMQ message.</span></span> <span data-ttu-id="07cd6-149">Dessa forma, a ACL da fila de destino deve permitir que o `Anonymous` acesso do usuário envie para a fila.</span><span class="sxs-lookup"><span data-stu-id="07cd6-149">As such, the target queue ACL must allow for `Anonymous` user access to send to the queue.</span></span> <span data-ttu-id="07cd6-150">O Gerenciador de filas de recebimento verifica se a mensagem MSMQ foi assinada com o certificado, mas não executa nenhuma autenticação.</span><span class="sxs-lookup"><span data-stu-id="07cd6-150">The receiving queue manager checks whether the MSMQ message was signed with the certificate but does not perform any authentication.</span></span>  
  
 <span data-ttu-id="07cd6-151">O certificado com suas informações de declarações e identidades é populado no <xref:System.ServiceModel.ServiceSecurityContext> pelo canal de transporte enfileirado do WCF.</span><span class="sxs-lookup"><span data-stu-id="07cd6-151">The certificate with its claims and identity information is populated in the <xref:System.ServiceModel.ServiceSecurityContext> by the WCF queued transport channel.</span></span> <span data-ttu-id="07cd6-152">O serviço pode usar essas informações para executar sua própria autenticação do remetente.</span><span class="sxs-lookup"><span data-stu-id="07cd6-152">The service can use this information to perform its own authentication of the sender.</span></span>  
  
### <a name="msmq-protection-level"></a><span data-ttu-id="07cd6-153">Nível de proteção MSMQ</span><span class="sxs-lookup"><span data-stu-id="07cd6-153">MSMQ Protection Level</span></span>  

 <span data-ttu-id="07cd6-154">O nível de proteção determina como proteger a mensagem do MSMQ para garantir que ela não seja violada.</span><span class="sxs-lookup"><span data-stu-id="07cd6-154">The protection level dictates how to protect the MSMQ message to ensure that it is not tampered with.</span></span> <span data-ttu-id="07cd6-155">Ele é especificado na <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="07cd6-155">It is specified in the <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> property.</span></span> <span data-ttu-id="07cd6-156">O valor padrão é <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="07cd6-156">The default value is <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span>  
  
#### <a name="sign-protection-level"></a><span data-ttu-id="07cd6-157">Assinar nível de proteção</span><span class="sxs-lookup"><span data-stu-id="07cd6-157">Sign Protection Level</span></span>  

 <span data-ttu-id="07cd6-158">A mensagem MSMQ é assinada usando o certificado gerado internamente ao usar o `WindowsDomain` modo de autenticação ou um certificado gerado externamente ao usar o `Certificate` modo de autenticação.</span><span class="sxs-lookup"><span data-stu-id="07cd6-158">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or an externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
#### <a name="sign-and-encrypt-protection-level"></a><span data-ttu-id="07cd6-159">Assinar e criptografar o nível de proteção</span><span class="sxs-lookup"><span data-stu-id="07cd6-159">Sign and Encrypt Protection Level</span></span>  

 <span data-ttu-id="07cd6-160">A mensagem MSMQ é assinada usando o certificado gerado internamente ao usar o `WindowsDomain` modo de autenticação ou o certificado gerado externamente ao usar o `Certificate` modo de autenticação.</span><span class="sxs-lookup"><span data-stu-id="07cd6-160">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
 <span data-ttu-id="07cd6-161">Além de assinar a mensagem, a mensagem MSMQ é criptografada usando a chave pública do certificado obtido de Active Directory que pertence ao Gerenciador de fila de recebimento que hospeda a fila de destino.</span><span class="sxs-lookup"><span data-stu-id="07cd6-161">In addition to signing the message, the MSMQ message is encrypted using the public key of the certificate obtained from Active Directory that belongs to the receiving queue manager that hosts the target queue.</span></span> <span data-ttu-id="07cd6-162">O Gerenciador de filas de envio garante que a mensagem MSMQ seja criptografada em trânsito.</span><span class="sxs-lookup"><span data-stu-id="07cd6-162">The sending queue manager ensures that the MSMQ message is encrypted in transit.</span></span> <span data-ttu-id="07cd6-163">O Gerenciador de filas de recebimento descriptografa a mensagem MSMQ usando a chave privada de seu certificado interno e armazena a mensagem na fila (se autenticada e autorizada) em texto não criptografado.</span><span class="sxs-lookup"><span data-stu-id="07cd6-163">The receiving queue manager decrypts the MSMQ message using the private key of its internal certificate and stores the message in the queue (if authenticated and authorized) in clear text.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="07cd6-164">Para criptografar a mensagem, Active Directory acesso é necessário ( `UseActiveDirectory` a propriedade de <xref:System.ServiceModel.NetMsmqBinding> deve ser definida como `true` ) e pode ser usada com <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> .</span><span class="sxs-lookup"><span data-stu-id="07cd6-164">To encrypt the message, Active Directory access is required (`UseActiveDirectory` property of <xref:System.ServiceModel.NetMsmqBinding> must be set to `true`) and can be used with both <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="none-protection-level"></a><span data-ttu-id="07cd6-165">Nenhum nível de proteção</span><span class="sxs-lookup"><span data-stu-id="07cd6-165">None Protection Level</span></span>  

 <span data-ttu-id="07cd6-166">Isso é implícito quando <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> é definido como <xref:System.Net.Security.ProtectionLevel.None> .</span><span class="sxs-lookup"><span data-stu-id="07cd6-166">This is implied when <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.None>.</span></span> <span data-ttu-id="07cd6-167">Este não pode ser um valor válido para outros modos de autenticação.</span><span class="sxs-lookup"><span data-stu-id="07cd6-167">This cannot be a valid value for any other authentication modes.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="07cd6-168">Se a mensagem MSMQ for assinada, o MSMQ verificará se a mensagem está assinada com o certificado anexado (interno ou externo) independentemente do estado da fila, ou seja, da fila autenticada ou não.</span><span class="sxs-lookup"><span data-stu-id="07cd6-168">If the MSMQ message is signed, MSMQ checks whether the message is signed with the attached certificate (internal or external) independent of the state of the queue, that is, authenticated queue or not.</span></span>  
  
### <a name="msmq-encryption-algorithm"></a><span data-ttu-id="07cd6-169">Algoritmo de criptografia MSMQ</span><span class="sxs-lookup"><span data-stu-id="07cd6-169">MSMQ Encryption Algorithm</span></span>  

 <span data-ttu-id="07cd6-170">O algoritmo de criptografia especifica o algoritmo a ser usado para criptografar a mensagem do MSMQ na conexão.</span><span class="sxs-lookup"><span data-stu-id="07cd6-170">The encryption algorithm specifies the algorithm to use to encrypt the MSMQ message on the wire.</span></span> <span data-ttu-id="07cd6-171">Essa propriedade será usada somente se <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> for definido como <xref:System.Net.Security.ProtectionLevel.EncryptAndSign> .</span><span class="sxs-lookup"><span data-stu-id="07cd6-171">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="07cd6-172">Os algoritmos com suporte são `RC4Stream` e `AES` e o padrão é `RC4Stream` .</span><span class="sxs-lookup"><span data-stu-id="07cd6-172">The supported algorithms are `RC4Stream` and `AES` and the default is `RC4Stream`.</span></span>  
  
 <span data-ttu-id="07cd6-173">Você poderá usar o `AES` algoritmo somente se o remetente tiver o MSMQ 4,0 instalado.</span><span class="sxs-lookup"><span data-stu-id="07cd6-173">You can use the `AES` algorithm only if the sender has MSMQ 4.0 installed.</span></span> <span data-ttu-id="07cd6-174">Além disso, a fila de destino também deve ser hospedada no MSMQ 4,0.</span><span class="sxs-lookup"><span data-stu-id="07cd6-174">In addition, the target queue must also be hosted on MSMQ 4.0.</span></span>  
  
### <a name="msmq-hash-algorithm"></a><span data-ttu-id="07cd6-175">Algoritmo de hash MSMQ</span><span class="sxs-lookup"><span data-stu-id="07cd6-175">MSMQ Hash Algorithm</span></span>  

 <span data-ttu-id="07cd6-176">O algoritmo de hash especifica o algoritmo usado para criar uma assinatura digital da mensagem MSMQ.</span><span class="sxs-lookup"><span data-stu-id="07cd6-176">The hash algorithm specifies the algorithm used to create a digital signature of the MSMQ message.</span></span> <span data-ttu-id="07cd6-177">O Gerenciador de filas de recebimento usa esse mesmo algoritmo para autenticar a mensagem MSMQ.</span><span class="sxs-lookup"><span data-stu-id="07cd6-177">The receiving queue manager uses this same algorithm to authenticate the MSMQ message.</span></span> <span data-ttu-id="07cd6-178">Essa propriedade será usada somente se <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> for definido como <xref:System.Net.Security.ProtectionLevel.Sign> ou <xref:System.Net.Security.ProtectionLevel.EncryptAndSign> .</span><span class="sxs-lookup"><span data-stu-id="07cd6-178">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.Sign> or <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="07cd6-179">Os algoritmos com suporte são `MD5`, `SHA1`, `SHA256` e `SHA512`.</span><span class="sxs-lookup"><span data-stu-id="07cd6-179">The supported algorithms are `MD5`, `SHA1`, `SHA256`, and `SHA512`.</span></span> <span data-ttu-id="07cd6-180">O padrão é `SHA1`.</span><span class="sxs-lookup"><span data-stu-id="07cd6-180">The default is `SHA1`.</span></span>

 <span data-ttu-id="07cd6-181">Devido a problemas de colisão com MD5/SHA1, a Microsoft recomenda SHA256 ou melhor.</span><span class="sxs-lookup"><span data-stu-id="07cd6-181">Due to collision problems with MD5/SHA1, Microsoft recommends SHA256 or better.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="07cd6-182">Veja também</span><span class="sxs-lookup"><span data-stu-id="07cd6-182">See also</span></span>

- [<span data-ttu-id="07cd6-183">Visão geral de filas</span><span class="sxs-lookup"><span data-stu-id="07cd6-183">Queues Overview</span></span>](queues-overview.md)
- [<span data-ttu-id="07cd6-184">Conceitos de segurança</span><span class="sxs-lookup"><span data-stu-id="07cd6-184">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="07cd6-185">Protegendo serviços e clientes</span><span class="sxs-lookup"><span data-stu-id="07cd6-185">Securing Services and Clients</span></span>](securing-services-and-clients.md)
