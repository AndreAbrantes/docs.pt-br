---
title: Serviços de fluxo de trabalho de hospedagem
ms.date: 03/30/2017
ms.assetid: 2d55217e-8697-4113-94ce-10b60863342e
ms.openlocfilehash: 908ef7ebb9bfb1e2c49d96e41c0df1d843c0454d
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84597274"
---
# <a name="hosting-workflow-services"></a><span data-ttu-id="5ab16-102">Serviços de fluxo de trabalho de hospedagem</span><span class="sxs-lookup"><span data-stu-id="5ab16-102">Hosting Workflow Services</span></span>

<span data-ttu-id="5ab16-103">Um serviço de fluxo de trabalho deve ser hospedado para que ele responda às mensagens de entrada.</span><span class="sxs-lookup"><span data-stu-id="5ab16-103">A workflow service must be hosted for it to respond to incoming messages.</span></span> <span data-ttu-id="5ab16-104">Os serviços de fluxo de trabalho usam a infraestrutura de mensagens do WCF e, portanto, são hospedados de maneiras semelhantes.</span><span class="sxs-lookup"><span data-stu-id="5ab16-104">Workflow services use the WCF messaging infrastructure and are therefore hosted in similar ways.</span></span> <span data-ttu-id="5ab16-105">Como os serviços WCF, os serviços de fluxo de trabalho podem ser hospedados em qualquer aplicativo gerenciado, em Serviços de Informações da Internet (IIS) ou em WAS (serviços de ativação de processos do Windows).</span><span class="sxs-lookup"><span data-stu-id="5ab16-105">Like WCF services, workflow services can be hosted in any managed application, under Internet Information Services (IIS), or under Windows Process Activation Services (WAS).</span></span> <span data-ttu-id="5ab16-106">Além disso, os serviços de fluxo de trabalho podem ser hospedados na malha de aplicativos do Windows Server.</span><span class="sxs-lookup"><span data-stu-id="5ab16-106">In addition, workflow services can be hosted under Windows Server App Fabric.</span></span> <span data-ttu-id="5ab16-107">Para obter mais informações sobre a malha de aplicativos do Windows Server, consulte [documentação do Windows Server app Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10)), [recursos de hospedagem do AppFabric](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))e conceitos de hospedagem do [AppFabric](https://docs.microsoft.com/previous-versions/appfabric/ee677371(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="5ab16-107">For more information about Windows Server App Fabric see [Windows Server App Fabric documentation](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10)), [AppFabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10)), and [AppFabric Hosting Concepts](https://docs.microsoft.com/previous-versions/appfabric/ee677371(v=azure.10)).</span></span> <span data-ttu-id="5ab16-108">Para obter mais informações sobre as várias maneiras de hospedar serviços WCF, consulte [serviços de hospedagem](../hosting-services.md).</span><span class="sxs-lookup"><span data-stu-id="5ab16-108">For more information about the various ways to host WCF services see [Hosting Services](../hosting-services.md).</span></span>

## <a name="hosting-in-a-managed-application"></a><span data-ttu-id="5ab16-109">Hospedando em um aplicativo gerenciado</span><span class="sxs-lookup"><span data-stu-id="5ab16-109">Hosting in a managed application</span></span>
 <span data-ttu-id="5ab16-110">Para hospedar um serviço de fluxo de trabalho em um aplicativo gerenciado, use a <xref:System.ServiceModel.Activities.WorkflowServiceHost> classe.</span><span class="sxs-lookup"><span data-stu-id="5ab16-110">To host a workflow service in a managed application, use the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class.</span></span> <span data-ttu-id="5ab16-111">O <xref:System.ServiceModel.Activities.WorkflowServiceHost> construtor permite que você especifique uma instância de serviço de fluxo de trabalho singleton, uma definição de serviço de fluxo de trabalho ou uma atividade que usa as atividades de mensagens de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="5ab16-111">The <xref:System.ServiceModel.Activities.WorkflowServiceHost> constructor allows you to specify a singleton workflow service instance, a workflow service definition, or an activity that uses the workflow messaging activities.</span></span> <span data-ttu-id="5ab16-112"><xref:System.ServiceModel.Channels.CommunicationObject.Open%2A>A chamada faz com que o serviço inicie a escuta de mensagens de entrada.</span><span class="sxs-lookup"><span data-stu-id="5ab16-112">Calling <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A> causes the service to start listening for incoming messages.</span></span>

## <a name="hosting-under-iis-or-was"></a><span data-ttu-id="5ab16-113">Hospedagem no IIS ou WAS</span><span class="sxs-lookup"><span data-stu-id="5ab16-113">Hosting under IIS or WAS</span></span>
 <span data-ttu-id="5ab16-114">Hospedar um serviço de fluxo de trabalho no IIS ou o WAS envolve a criação de um diretório virtual e a colocação de arquivos no diretório virtual que definem o serviço e seu comportamento.</span><span class="sxs-lookup"><span data-stu-id="5ab16-114">Hosting a workflow service under IIS or WAS involves creating a virtual directory and placing files in the virtual directory that define the service and its behavior.</span></span> <span data-ttu-id="5ab16-115">Ao hospedar um serviço de fluxo de trabalho no IIS ou o WAS há várias possibilidades:</span><span class="sxs-lookup"><span data-stu-id="5ab16-115">When hosting a workflow service under IIS or WAS there are several possibilities:</span></span>

- <span data-ttu-id="5ab16-116">Coloque um arquivo. xamlx que define o serviço de fluxo de trabalho em um diretório virtual do IIS/WAS, juntamente com um arquivo Web. config que especifica os comportamentos de serviço, os pontos de extremidade e outros elementos de configuração.</span><span class="sxs-lookup"><span data-stu-id="5ab16-116">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory along with a Web.config file that specifies the service behaviors, endpoints, and other configuration elements.</span></span>

- <span data-ttu-id="5ab16-117">Coloque um arquivo. xamlx que define o serviço de fluxo de trabalho em um diretório virtual do IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="5ab16-117">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory.</span></span> <span data-ttu-id="5ab16-118">O arquivo. xamlx especifica os pontos de extremidade a serem expostos.</span><span class="sxs-lookup"><span data-stu-id="5ab16-118">The .xamlx file specifies the endpoints to expose.</span></span> <span data-ttu-id="5ab16-119">Os pontos de extremidade são especificados em um `WorkflowService.Endpoints` elemento, conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="5ab16-119">Endpoints are specified in a `WorkflowService.Endpoints` element as shown in the following example.</span></span>

    ```xml
    <WorkflowService xmlns="http://schemas.microsoft.com/netfx/2009/xaml/servicemodel"  xmlns:p1="http://schemas.microsoft.com/netfx/2009/xaml/activities" xmlns:sad="clr-namespace:System.Activities.Debugger;assembly=System.Activities" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
      <WorkflowService.Endpoints>
        <Endpoint ServiceContractName="IWorkFlowEchoService" AddressUri="">
          <Endpoint.Binding>
            <BasicHttpBinding />
          </Endpoint.Binding>
        </Endpoint>
      </WorkflowService.Endpoints>
    <!-- ... -->
    </WorkflowService>
    ```

    > [!NOTE]
    > <span data-ttu-id="5ab16-120">Os comportamentos não podem ser especificados em um arquivo. xamlx, portanto, você deve usar um Web. config se precisar especificar configurações de comportamento.</span><span class="sxs-lookup"><span data-stu-id="5ab16-120">Behaviors cannot be specified in a .xamlx file, so you must use a Web.config if you need to specify behavior settings.</span></span>

- <span data-ttu-id="5ab16-121">Coloque um arquivo. xamlx que define o serviço de fluxo de trabalho em um diretório virtual do IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="5ab16-121">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory.</span></span> <span data-ttu-id="5ab16-122">Além disso, coloque um arquivo. svc no diretório virtual.</span><span class="sxs-lookup"><span data-stu-id="5ab16-122">In addition, place a .svc file in the virtual directory.</span></span> <span data-ttu-id="5ab16-123">O arquivo. svc permite especificar uma fábrica de hosts de serviço Web personalizada, aplicar o comportamento personalizado ou carregar a configuração de um local personalizado.</span><span class="sxs-lookup"><span data-stu-id="5ab16-123">The .svc file allows you to specify a custom Web service host factory, apply custom behavior, or load configuration from a custom location.</span></span>

- <span data-ttu-id="5ab16-124">Coloque um assembly no diretório virtual do IIS/WAS que contém uma atividade que usa as atividades de mensagens do WCF.</span><span class="sxs-lookup"><span data-stu-id="5ab16-124">Place an assembly in the IIS/WAS virtual directory that contains an activity that uses the WCF messaging activities.</span></span>

 <span data-ttu-id="5ab16-125">Um arquivo. xamlx que define um serviço de fluxo de trabalho deve conter um `Service` elemento raiz <> ou um elemento raiz que contenha qualquer tipo derivado de <xref:System.Workflow.ComponentModel.Activity> .</span><span class="sxs-lookup"><span data-stu-id="5ab16-125">A .xamlx file that defines a workflow service must contain a <`Service`> root element or a root element that contains any type derived from <xref:System.Workflow.ComponentModel.Activity>.</span></span> <span data-ttu-id="5ab16-126">Ao usar o modelo de atividade do Visual Studio, um arquivo. xamlx é criado.</span><span class="sxs-lookup"><span data-stu-id="5ab16-126">When using the Visual Studio activity template, a .xamlx file is created.</span></span> <span data-ttu-id="5ab16-127">Ao usar o modelo de serviço de fluxo de trabalho do WCF, um arquivo. xamlx é criado.</span><span class="sxs-lookup"><span data-stu-id="5ab16-127">When using the WCF Workflow Service template, a .xamlx file is created.</span></span>

## <a name="hosting-workflow-services-under-windows-server-app-fabric"></a><span data-ttu-id="5ab16-128">Hospedando serviços de fluxo de trabalho no Windows Server app Fabric</span><span class="sxs-lookup"><span data-stu-id="5ab16-128">Hosting Workflow Services under Windows Server App Fabric</span></span>
 <span data-ttu-id="5ab16-129">A hospedagem de um serviço de fluxo de trabalho no Windows Server app Fabric é feita da mesma maneira que a hospedagem no IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="5ab16-129">Hosting a workflow service under Windows Server App Fabric is done in the same way as hosting under IIS/WAS.</span></span> <span data-ttu-id="5ab16-130">A única diferença é o fato de que o Windows Server app Fabric está instalado.</span><span class="sxs-lookup"><span data-stu-id="5ab16-130">The only difference is the fact that Windows Server App Fabric is installed.</span></span> <span data-ttu-id="5ab16-131">O Windows Server app Fabric fornece ferramentas que são adicionadas ao Serviços de Informações da Internet Manager, bem como PowerShell commandlets.</span><span class="sxs-lookup"><span data-stu-id="5ab16-131">Windows Server App Fabric provides tools that are added to Internet Information Services Manager, as well as powershell commandlets.</span></span> <span data-ttu-id="5ab16-132">Essas ferramentas simplificam a implantação, o gerenciamento e o acompanhamento de serviços de fluxo de trabalho e serviços WCF.</span><span class="sxs-lookup"><span data-stu-id="5ab16-132">These tools simplify deploying, managing, and tracking of workflow services and WCF services.</span></span>

## <a name="referencing-custom-activities"></a><span data-ttu-id="5ab16-133">Referenciando atividades personalizadas</span><span class="sxs-lookup"><span data-stu-id="5ab16-133">Referencing Custom Activities</span></span>
 <span data-ttu-id="5ab16-134">As referências a atividades personalizadas devem ser adicionadas à `Assemblies` seção <> em <`System.Web.Compilation`> para que elas sejam carregadas no domínio do aplicativo e o desserializador de XAML seja capaz de localizar os tipos.</span><span class="sxs-lookup"><span data-stu-id="5ab16-134">References to custom activities must be added to the <`Assemblies`> section under <`System.Web.Compilation`> so that they are loaded into the Application Domain and the XAML deserializer is able to locate the types.</span></span> <span data-ttu-id="5ab16-135">Essas configurações podem ser feitas no nível do aplicativo ou no Web. config raiz se as configurações devem ser aplicadas a todos os aplicativos no computador.</span><span class="sxs-lookup"><span data-stu-id="5ab16-135">These settings can be made at the application level or in the root Web.config if the settings should be applied to all applications on the machine.</span></span>

## <a name="deployment"></a><span data-ttu-id="5ab16-136">Implantação</span><span class="sxs-lookup"><span data-stu-id="5ab16-136">Deployment</span></span>
 <span data-ttu-id="5ab16-137">A ferramenta de implantação da Web foi criada para facilitar o trabalho de implantação.</span><span class="sxs-lookup"><span data-stu-id="5ab16-137">The Web Deployment tool has been created to make the job of deployment easier.</span></span> <span data-ttu-id="5ab16-138">A ferramenta permite migrar aplicativos entre o IIS 6,0 e o IIS 7,0, sincronizar farms de servidores e empacotar, arquivar e implantar aplicativos Web.</span><span class="sxs-lookup"><span data-stu-id="5ab16-138">The tool allows you to migrate applications between IIS 6.0 and IIS 7.0, synchronize server farms, and package, archive and deploy Web applications.</span></span> <span data-ttu-id="5ab16-139">Para obter mais informações, consulte [ferramenta de implantação da MS](https://go.microsoft.com/fwlink/?LinkId=178690).</span><span class="sxs-lookup"><span data-stu-id="5ab16-139">For more information, see [MS Deployment Tool](https://go.microsoft.com/fwlink/?LinkId=178690).</span></span>

## <a name="see-also"></a><span data-ttu-id="5ab16-140">Consulte também</span><span class="sxs-lookup"><span data-stu-id="5ab16-140">See also</span></span>

- [<span data-ttu-id="5ab16-141">Internos do host de serviço de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="5ab16-141">Workflow Service Host Internals</span></span>](workflow-service-host-internals.md)
- [<span data-ttu-id="5ab16-142">Configurando WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="5ab16-142">Configuring WorkflowServiceHost</span></span>](configuring-workflowservicehost.md)
