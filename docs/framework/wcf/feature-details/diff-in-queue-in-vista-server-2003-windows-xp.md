---
title: Diferenças de recursos em fila no Windows Vista, Windows Server 2003, e no Windows XP
ms.date: 03/30/2017
helpviewer_keywords:
- queues [WCF], differences in operating systems
ms.assetid: aa809d93-d0a3-4ae6-a726-d015cca37c04
ms.openlocfilehash: abd81b5e7bf611fc6b4f446a82628b83130f2d54
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84599198"
---
# <a name="differences-in-queuing-features-in-windows-vista-windows-server-2003-and-windows-xp"></a><span data-ttu-id="d0e22-102">Diferenças de recursos em fila no Windows Vista, Windows Server 2003, e no Windows XP</span><span class="sxs-lookup"><span data-stu-id="d0e22-102">Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP</span></span>
<span data-ttu-id="d0e22-103">Este tópico resume as diferenças no recurso de filas do Windows Communication Foundation (WCF) entre o Windows Vista, o Windows Server 2003 e o Windows XP.</span><span class="sxs-lookup"><span data-stu-id="d0e22-103">This topic summarizes the differences in the Windows Communication Foundation (WCF) queues feature between Windows Vista, Windows Server 2003, and Windows XP.</span></span>  
  
## <a name="application-specific-dead-letter-queue"></a><span data-ttu-id="d0e22-104">Fila de mensagens mortas específica do aplicativo</span><span class="sxs-lookup"><span data-stu-id="d0e22-104">Application-Specific Dead-Letter Queue</span></span>  
 <span data-ttu-id="d0e22-105">As mensagens em fila podem permanecer na fila indefinidamente se o aplicativo de recebimento não lê-las em tempo hábil.</span><span class="sxs-lookup"><span data-stu-id="d0e22-105">Queued messages can remain in the queue indefinitely if the receiving application does not read them in a timely fashion.</span></span> <span data-ttu-id="d0e22-106">Esse comportamento não é aconselhável se as mensagens forem sensíveis ao tempo.</span><span class="sxs-lookup"><span data-stu-id="d0e22-106">This behavior is not advisable if the messages are time-sensitive.</span></span> <span data-ttu-id="d0e22-107">As mensagens com detecção de hora têm uma `TimeToLive` propriedade definida na associação em fila.</span><span class="sxs-lookup"><span data-stu-id="d0e22-107">Time-sensitive messages have a `TimeToLive` property set in the queued binding.</span></span> <span data-ttu-id="d0e22-108">Essa propriedade indica por quanto tempo as mensagens podem estar na fila antes de expirarem.</span><span class="sxs-lookup"><span data-stu-id="d0e22-108">This property indicates how long the messages can be in the queue before they expire.</span></span> <span data-ttu-id="d0e22-109">As mensagens expiradas são enviadas para uma fila especial chamada fila de mensagens mortas.</span><span class="sxs-lookup"><span data-stu-id="d0e22-109">Expired messages are sent to a special queue called the dead-letter queue.</span></span> <span data-ttu-id="d0e22-110">Uma mensagem também pode acabar em uma fila de mensagens mortas por outros motivos, como exceder uma cota de fila ou apresentar uma falha de autenticação.</span><span class="sxs-lookup"><span data-stu-id="d0e22-110">A message can also end up in a dead-letter queue for other reasons, such as exceeding a queue quota or experiencing an authentication failure.</span></span>  
  
 <span data-ttu-id="d0e22-111">Normalmente, uma única fila de mensagens mortas de todo o sistema existe para todos os aplicativos em fila que compartilham um Gerenciador de filas.</span><span class="sxs-lookup"><span data-stu-id="d0e22-111">Typically, a single system-wide dead-letter queue exists for all queued applications that share a queue manager.</span></span> <span data-ttu-id="d0e22-112">Uma fila de mensagens mortas para cada aplicativo permite um melhor isolamento entre os aplicativos em fila que compartilham um Gerenciador de filas, permitindo que esses aplicativos especifiquem sua própria fila de mensagens mortas específica do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d0e22-112">A dead-letter queue for each application enables better isolation between queued applications that share a queue manager by allowing these applications to specify their own application-specific dead-letter queue.</span></span> <span data-ttu-id="d0e22-113">Um aplicativo que compartilha uma fila de mensagens mortas com outros aplicativos tem que procurar na fila para localizar as mensagem que se aplicam a ela.</span><span class="sxs-lookup"><span data-stu-id="d0e22-113">An application that shares a dead-letter queue with other applications has to browse the queue to find messages that are applicable to it.</span></span> <span data-ttu-id="d0e22-114">Com uma fila de mensagens mortas específica do aplicativo, o aplicativo pode ter certeza de que todas as mensagens em sua fila de mensagens mortas são aplicáveis a ela.</span><span class="sxs-lookup"><span data-stu-id="d0e22-114">With an application-specific dead-letter queue, the application can be assured that all messages in its dead-letter queue are applicable to it.</span></span>  
  
 <span data-ttu-id="d0e22-115">O Windows Vista fornece filas de mensagens mortas específicas do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d0e22-115">Windows Vista provides for application-specific dead-letter queues.</span></span> <span data-ttu-id="d0e22-116">As filas de mensagens mortas específicas do aplicativo não estão disponíveis no Windows Server 2003 e no Windows XP, e os aplicativos devem usar a fila de mensagens mortas de todo o sistema.</span><span class="sxs-lookup"><span data-stu-id="d0e22-116">Application-specific dead-letter queues are not available in Windows Server 2003 and Windows XP, and applications must use the system-wide dead-letter queue.</span></span>  
  
## <a name="poison-message-handling"></a><span data-ttu-id="d0e22-117">Manipulação de mensagens suspeitas</span><span class="sxs-lookup"><span data-stu-id="d0e22-117">Poison-Message Handling</span></span>  
 <span data-ttu-id="d0e22-118">Uma mensagem suspeita é uma mensagem que excedeu o número máximo de tentativas de entrega para o aplicativo de recebimento.</span><span class="sxs-lookup"><span data-stu-id="d0e22-118">A poison message is a message that has exceeded the maximum number of delivery attempts to the receiving application.</span></span> <span data-ttu-id="d0e22-119">Essa situação pode surgir quando um aplicativo que lê uma mensagem de uma fila transacional não pode processar a mensagem imediatamente devido a erros.</span><span class="sxs-lookup"><span data-stu-id="d0e22-119">This situation can arise when an application that reads a message from a transactional queue cannot process the message immediately because of errors.</span></span> <span data-ttu-id="d0e22-120">Se o aplicativo abortar a transação na qual a mensagem em fila foi recebida, ela retornará a mensagem para a fila.</span><span class="sxs-lookup"><span data-stu-id="d0e22-120">If the application aborts the transaction in which the queued message was received, it returns the message to the queue.</span></span> <span data-ttu-id="d0e22-121">Em seguida, o aplicativo tenta recuperar a mensagem novamente em uma nova transação.</span><span class="sxs-lookup"><span data-stu-id="d0e22-121">The application then tries to retrieve the message again in a new transaction.</span></span> <span data-ttu-id="d0e22-122">Se o problema que causa o erro não for corrigido, o aplicativo receptor poderá ficar preso em um loop recebendo e anulando a mesma mensagem até que ela exceda o número máximo de tentativas de entrega e um resultado de mensagem suspeita.</span><span class="sxs-lookup"><span data-stu-id="d0e22-122">If the problem that causes the error is not corrected, the receiving application can get stuck in a loop receiving and aborting the same message until it exceeds the maximum number of delivery attempts, and a poison message results.</span></span>  
  
 <span data-ttu-id="d0e22-123">As principais diferenças entre o MSMQ (enfileiramento de mensagens) no Windows Vista, no Windows Server 2003 e no Windows XP que são relevantes para o tratamento de suspeitas incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="d0e22-123">The key differences between Message Queuing (MSMQ) on Windows Vista, Windows Server 2003, and Windows XP that are relevant to poison handling include the following:</span></span>  
  
- <span data-ttu-id="d0e22-124">O MSMQ no Windows Vista dá suporte a subfilas, enquanto o Windows Server 2003 e o Windows XP não dão suporte a subfilas.</span><span class="sxs-lookup"><span data-stu-id="d0e22-124">MSMQ in Windows Vista supports subqueues, while Windows Server 2003 and Windows XP do not support subqueues.</span></span> <span data-ttu-id="d0e22-125">As subfilas são usadas na manipulação de mensagens suspeitas.</span><span class="sxs-lookup"><span data-stu-id="d0e22-125">Subqueues are used in poison-message handling.</span></span> <span data-ttu-id="d0e22-126">As filas de repetição e a fila de suspeitas são subfilas para a fila de aplicativo que é criada com base nas configurações de tratamento de mensagens suspeitas.</span><span class="sxs-lookup"><span data-stu-id="d0e22-126">The retry queues and the poison queue are subqueues to the application queue that is created based on the poison-message handling settings.</span></span> <span data-ttu-id="d0e22-127">O `MaxRetryCycles` determina quantas subfilas de repetição criar.</span><span class="sxs-lookup"><span data-stu-id="d0e22-127">The `MaxRetryCycles` dictates how many retry subqueues to create.</span></span> <span data-ttu-id="d0e22-128">Portanto, quando executado no Windows Server 2003 ou no Windows XP, `MaxRetryCycles` é ignorado e `ReceiveErrorHandling.Move` não é permitido.</span><span class="sxs-lookup"><span data-stu-id="d0e22-128">Therefore, when running on Windows Server 2003 or Windows XP, `MaxRetryCycles` are ignored and `ReceiveErrorHandling.Move` is not allowed.</span></span>  
  
- <span data-ttu-id="d0e22-129">O MSMQ no Windows Vista dá suporte à confirmação negativa, enquanto o Windows Server 2003 e o Windows XP não fazem isso.</span><span class="sxs-lookup"><span data-stu-id="d0e22-129">MSMQ in Windows Vista supports negative acknowledgment, while Windows Server 2003 and Windows XP do not.</span></span> <span data-ttu-id="d0e22-130">Uma confirmação negativa do Gerenciador de filas de recebimento faz com que o Gerenciador de filas de envio Coloque a mensagem rejeitada na fila de mensagens mortas.</span><span class="sxs-lookup"><span data-stu-id="d0e22-130">A negative acknowledgment from the receiving queue manager causes the sending queue manager to place the rejected message in the dead-letter queue.</span></span> <span data-ttu-id="d0e22-131">Como tal, o `ReceiveErrorHandling.Reject` não é permitido com o Windows Server 2003 e o Windows XP.</span><span class="sxs-lookup"><span data-stu-id="d0e22-131">As such, `ReceiveErrorHandling.Reject` is not allowed with Windows Server 2003 and Windows XP.</span></span>  
  
- <span data-ttu-id="d0e22-132">O MSMQ no Windows Vista oferece suporte a uma propriedade de mensagem que mantém a contagem do número de vezes que a entrega de mensagem é tentada.</span><span class="sxs-lookup"><span data-stu-id="d0e22-132">MSMQ in Windows Vista supports a message property that keeps count of the number of times message delivery is attempted.</span></span> <span data-ttu-id="d0e22-133">Essa propriedade de anulação de contagem não está disponível no Windows Server 2003 e no Windows XP.</span><span class="sxs-lookup"><span data-stu-id="d0e22-133">This abort count property is not available on Windows Server 2003 and Windows XP.</span></span> <span data-ttu-id="d0e22-134">O WCF mantém a contagem de anulação na memória, portanto, é possível que essa propriedade não contenha um valor preciso quando a mesma mensagem é lida por mais de um serviço WCF em um Web farm.</span><span class="sxs-lookup"><span data-stu-id="d0e22-134">WCF maintains the abort count in memory, so it is possible that this property may not contain an accurate value when the same message is read by more than one WCF service in a Web farm.</span></span>  
  
## <a name="remote-transactional-read"></a><span data-ttu-id="d0e22-135">Leitura transacional remota</span><span class="sxs-lookup"><span data-stu-id="d0e22-135">Remote Transactional Read</span></span>  
 <span data-ttu-id="d0e22-136">O MSMQ no Windows Vista dá suporte a leituras transacionais remotas.</span><span class="sxs-lookup"><span data-stu-id="d0e22-136">MSMQ on Windows Vista supports remote transactional reads.</span></span> <span data-ttu-id="d0e22-137">Isso permite que um aplicativo que está lendo de uma fila seja hospedado em um computador diferente do computador no qual a fila está hospedada.</span><span class="sxs-lookup"><span data-stu-id="d0e22-137">This allows an application that is reading from a queue to be hosted on a computer that is different from the computer on which the queue is hosted.</span></span> <span data-ttu-id="d0e22-138">Isso garante a capacidade de ter um farm de serviços de leitura de uma fila central, o que aumenta a taxa de transferência geral do sistema.</span><span class="sxs-lookup"><span data-stu-id="d0e22-138">This ensures the ability to have a farm of services reading from a central queue, which increases the overall throughput of the system.</span></span> <span data-ttu-id="d0e22-139">Ele também garante que, se ocorrer uma falha durante a leitura e o processamento da mensagem, a transação será revertida e a mensagem permanecerá na fila para processamento posterior.</span><span class="sxs-lookup"><span data-stu-id="d0e22-139">It also ensures that if a failure occurs when reading and processing the message, the transaction rolls back and the message remains in the queue for later processing.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d0e22-140">Consulte também</span><span class="sxs-lookup"><span data-stu-id="d0e22-140">See also</span></span>

- [<span data-ttu-id="d0e22-141">Usando filas de mensagens mortas para lidar com falhas de transferência de mensagem</span><span class="sxs-lookup"><span data-stu-id="d0e22-141">Using Dead-Letter Queues to Handle Message Transfer Failures</span></span>](using-dead-letter-queues-to-handle-message-transfer-failures.md)
- [<span data-ttu-id="d0e22-142">Manipulação de mensagens suspeitas</span><span class="sxs-lookup"><span data-stu-id="d0e22-142">Poison Message Handling</span></span>](poison-message-handling.md)
