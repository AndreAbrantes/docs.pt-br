---
title: Como especificar a cadeia de certificados da autoridade de certificação utilizada para verificar assinaturas (WCF)
ms.date: 03/30/2017
helpviewer_keywords:
- certificates [WCF], specifying the certificate authority certificate chain
- certificates [WCF], verifying signatures
ms.assetid: 7c719355-aa41-4567-80d0-5115a8cf73fd
ms.openlocfilehash: 9e2ba9f3550442602cab217fec329e6c19efd3b3
ms.sourcegitcommit: 3ab9254890a52a50762995fa6d7d77a00348db7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/20/2018
ms.locfileid: "46481683"
---
# <a name="how-to-specify-the-certificate-authority-certificate-chain-used-to-verify-signatures-wcf"></a><span data-ttu-id="133a5-102">Como especificar a cadeia de certificados da autoridade de certificação utilizada para verificar assinaturas (WCF)</span><span class="sxs-lookup"><span data-stu-id="133a5-102">How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)</span></span>
<span data-ttu-id="133a5-103">Quando o Windows Communication Foundation (WCF) recebe uma mensagem SOAP assinada usando um certificado X.509, por padrão ele verifica se o certificado x. 509 foi emitido por uma autoridade de certificação confiável.</span><span class="sxs-lookup"><span data-stu-id="133a5-103">When Windows Communication Foundation (WCF) receives a SOAP message signed using an X.509 certificate, by default it verifies that the X.509 certificate was issued by a trusted certification authority.</span></span> <span data-ttu-id="133a5-104">Isso é feito procurando em um repositório de certificados e determinar se o certificado de autoridade de certificação tiver sido designada como confiável.</span><span class="sxs-lookup"><span data-stu-id="133a5-104">This is done by looking in a certificate store and determining if the certificate for that certification authority has been designated as trusted.</span></span> <span data-ttu-id="133a5-105">Em ordem para o WCF tomar essa decisão, a cadeia de certificados de autoridade de certificação deve ser instalada no repositório de certificados correto.</span><span class="sxs-lookup"><span data-stu-id="133a5-105">In order for WCF to make this determination, the certification authority certificate chain must be installed in the correct certificate store.</span></span>  
  
### <a name="to-install-a-certification-authority-certificate-chain"></a><span data-ttu-id="133a5-106">Para instalar uma cadeia de certificados de autoridade de certificação</span><span class="sxs-lookup"><span data-stu-id="133a5-106">To install a certification authority certificate chain</span></span>  
  
-   <span data-ttu-id="133a5-107">Para cada autoridade de certificação que um destinatário de mensagem SOAP deve confiar em certificados x. 509 emitidos, instale a cadeia de certificados de autoridade de certificação no repositório de certificados que o WCF está configurado para recuperar os certificados x. 509 do.</span><span class="sxs-lookup"><span data-stu-id="133a5-107">For each certification authority that a SOAP message recipient intends to trust X.509 certificates issued from, install the certification authority certificate chain into the certificate store that WCF is configured to retrieve X.509 certificates from.</span></span>  
  
     <span data-ttu-id="133a5-108">Por exemplo, se um destinatário de mensagem SOAP pretende confiar em certificados x. 509 emitidos pela Microsoft, a cadeia de certificados de autoridade de certificação da Microsoft deve ser instalada no repositório de certificados que o WCF é configurado para procurar por certificados X.509 de.</span><span class="sxs-lookup"><span data-stu-id="133a5-108">For instance, if a SOAP message recipient intends to trust X.509 certificates issued by Microsoft, the certification authority certificate chain for Microsoft must be installed in the certificate store that WCF is set up to look for X.509 certificates from.</span></span> <span data-ttu-id="133a5-109">O repositório de certificados em que o WCF procura certificados x. 509 pode ser especificado no código ou configuração.</span><span class="sxs-lookup"><span data-stu-id="133a5-109">The certificate store in which WCF looks for X.509 certificates can be specified in code or configuration.</span></span> <span data-ttu-id="133a5-110">Por exemplo, isso pode ser especificado no código usando o <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> método ou na configuração de várias maneiras, incluindo o [ \<serviceCertificate >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecertificate-of-clientcredentials-element.md) .</span><span class="sxs-lookup"><span data-stu-id="133a5-110">For example, this can be specified in code using the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method or in configuration a few ways, including the [\<serviceCertificate>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecertificate-of-clientcredentials-element.md) .</span></span>  
  
     <span data-ttu-id="133a5-111">Porque o Windows é fornecido com um conjunto padrão de cadeias de certificados de autoridades de certificação confiáveis, não pode ser necessário instalar a cadeia de certificados para todas as autoridades de certificação.</span><span class="sxs-lookup"><span data-stu-id="133a5-111">Because Windows ships with a set of default certificate chains for trusted certificate authorities, it may not be necessary to install the certificate chain for all certificate authorities.</span></span>  
  
    1.  <span data-ttu-id="133a5-112">Exporte a cadeia de certificados de autoridade de certificação.</span><span class="sxs-lookup"><span data-stu-id="133a5-112">Export the certification authority certificate chain.</span></span>  
  
         <span data-ttu-id="133a5-113">Exatamente como isso é feito depende da autoridade de certificação.</span><span class="sxs-lookup"><span data-stu-id="133a5-113">Exactly how this is done depends on the certification authority.</span></span> <span data-ttu-id="133a5-114">Se a autoridade de certificação estiver executando serviços de certificados Microsoft, selecione **baixar um certificado de autoridade de certificação, cadeia de certificados ou lista de certificados Revogados**e, em seguida, escolha **certificado de autoridade de certificação baixar**.</span><span class="sxs-lookup"><span data-stu-id="133a5-114">If the certification authority is running Microsoft Certificate Services, select **Download a CA certificate, certificate chain, or CRL**, and then choose **Download CA certificate**.</span></span>  
  
    2.  <span data-ttu-id="133a5-115">Importe a cadeia de certificados de autoridade de certificação.</span><span class="sxs-lookup"><span data-stu-id="133a5-115">Import the certification authority certificate chain.</span></span>  
  
         <span data-ttu-id="133a5-116">No Microsoft Management Console (MMC), abra o snap-in de certificados.</span><span class="sxs-lookup"><span data-stu-id="133a5-116">In the Microsoft Management Console (MMC), open the Certificates snap-in.</span></span> <span data-ttu-id="133a5-117">Para o repositório de certificados que o WCF é configurado para recuperar certificados x. 509 no, selecione a **raiz confiáveis** **autoridades de certificação** pasta.</span><span class="sxs-lookup"><span data-stu-id="133a5-117">For the certificate store that WCF is configured to retrieve X.509 certificates from, select the **Trusted Root** **Certification Authorities** folder.</span></span> <span data-ttu-id="133a5-118">Sob o **autoridades de certificação raiz confiáveis** pasta, com o botão direito do **certificados** pasta, aponte para **todas as tarefas**e, em seguida, clique em **importação** .</span><span class="sxs-lookup"><span data-stu-id="133a5-118">Under the **Trusted Root Certification Authorities** folder, right-click the **Certificates** folder, point to **All Tasks**, and then click **Import**.</span></span> <span data-ttu-id="133a5-119">Forneça o arquivo exportado na etapa um.</span><span class="sxs-lookup"><span data-stu-id="133a5-119">Provide the file exported in step a.</span></span>  
  
         <span data-ttu-id="133a5-120">Para obter mais informações sobre como usar o snap-in de certificados com o MMC, consulte [como: exibir certificados com o Snap-in do MMC](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md).</span><span class="sxs-lookup"><span data-stu-id="133a5-120">For more information about using the Certificates snap-in with MMC, see [How to: View Certificates with the MMC Snap-in](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="133a5-121">Consulte também</span><span class="sxs-lookup"><span data-stu-id="133a5-121">See Also</span></span>  
 [<span data-ttu-id="133a5-122">Trabalhando com certificados</span><span class="sxs-lookup"><span data-stu-id="133a5-122">Working with Certificates</span></span>](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)
