---
title: Comportamentos de segurança no WCF
ms.date: 03/30/2017
ms.assetid: 513232c0-39fd-4409-bda6-5ebd5e0ea7b0
author: BrucePerlerMS
manager: mbaldwin
ms.openlocfilehash: 57bd34c72e98091c4a429d683a0da4ce2d3967c0
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33508638"
---
# <a name="security-behaviors-in-wcf"></a><span data-ttu-id="9f79c-102">Comportamentos de segurança no WCF</span><span class="sxs-lookup"><span data-stu-id="9f79c-102">Security Behaviors in WCF</span></span>
<span data-ttu-id="9f79c-103">No Windows Communication Foundation (WCF), comportamentos de modificar o comportamento de tempo de execução no nível de serviço ou no nível do ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="9f79c-103">In Windows Communication Foundation (WCF), behaviors modify run-time behavior at the service level or at the endpoint level.</span></span> <span data-ttu-id="9f79c-104">(Para obter mais informações sobre comportamentos em geral, consulte [especificando comportamento de tempo de execução do serviço](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md).) *Comportamentos de segurança* permitem o controle sobre as credenciais, autenticação, autorização e logs de auditoria.</span><span class="sxs-lookup"><span data-stu-id="9f79c-104">(For more information about behaviors in general, see [Specifying Service Run-Time Behavior](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md).) *Security behaviors* allow control over credentials, authentication, authorization, and auditing logs.</span></span> <span data-ttu-id="9f79c-105">Você pode usar comportamentos por programação ou por meio da configuração.</span><span class="sxs-lookup"><span data-stu-id="9f79c-105">You can use behaviors either by programming or through configuration.</span></span> <span data-ttu-id="9f79c-106">Este tópico se concentra na configuração os seguintes comportamentos relacionados às funções de segurança:</span><span class="sxs-lookup"><span data-stu-id="9f79c-106">This topic focuses on configuring the following behaviors related to security functions:</span></span>  
  
-   <span data-ttu-id="9f79c-107">[\<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-107">[\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span></span>  
  
-   <span data-ttu-id="9f79c-108">[\<clientCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-108">[\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md).</span></span>  
  
-   <span data-ttu-id="9f79c-109">[\<serviceAuthorization >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-109">[\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md).</span></span>  
  
-   <span data-ttu-id="9f79c-110">[\<serviceSecurityAudit >](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-110">[\<serviceSecurityAudit>](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md).</span></span>  
  
-   <span data-ttu-id="9f79c-111">[\<serviceMetadata >](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md), que também permite que você especifique um ponto de extremidade seguro que os clientes podem acessar para metadados.</span><span class="sxs-lookup"><span data-stu-id="9f79c-111">[\<serviceMetadata>](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md), which also enables you to specify a secure endpoint that clients can access for metadata.</span></span>  
  
## <a name="setting-credentials-with-behaviors"></a><span data-ttu-id="9f79c-112">Configuração de credenciais com comportamentos</span><span class="sxs-lookup"><span data-stu-id="9f79c-112">Setting Credentials with Behaviors</span></span>  
 <span data-ttu-id="9f79c-113">Use o [ \<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) e [ \<clientCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) para definir valores de credencial para um serviço ou cliente.</span><span class="sxs-lookup"><span data-stu-id="9f79c-113">Use the [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) and [\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) to set credential values for a service or client.</span></span> <span data-ttu-id="9f79c-114">A configuração de associação subjacente determina se uma credencial deve ser definida.</span><span class="sxs-lookup"><span data-stu-id="9f79c-114">The underlying binding configuration determines whether a credential has to be set.</span></span> <span data-ttu-id="9f79c-115">Por exemplo, se o modo de segurança é definido como `None`, clientes e serviços não autentiquem uns aos outros e não requerer nenhuma credencial de qualquer tipo.</span><span class="sxs-lookup"><span data-stu-id="9f79c-115">For example, if the security mode is set to `None`, both clients and services do not authenticate each other and require no credentials of any type.</span></span>  
  
 <span data-ttu-id="9f79c-116">Por outro lado, a associação de serviço pode exigir um tipo de credencial de cliente.</span><span class="sxs-lookup"><span data-stu-id="9f79c-116">On the other hand, the service binding can require a client credential type.</span></span> <span data-ttu-id="9f79c-117">Nesse caso, você precisará definir um valor de credencial usando um comportamento.</span><span class="sxs-lookup"><span data-stu-id="9f79c-117">In that case, you may have to set a credential value using a behavior.</span></span> <span data-ttu-id="9f79c-118">(Para obter mais informações sobre os possíveis tipos de credenciais, consulte [selecionando um tipo de credencial](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).) Em alguns casos, como quando as credenciais do Windows são usadas para autenticar, o ambiente estabelece automaticamente o valor de credencial real e você não precisa definir explicitamente o valor de credencial (a menos que você deseja especificar um conjunto diferente de credenciais).</span><span class="sxs-lookup"><span data-stu-id="9f79c-118">(For more information about the possible types of credentials, see [Selecting a Credential Type](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).) In some cases, such as when Windows credentials are used to authenticate, the environment automatically establishes the actual credential value and you do not need to explicitly set the credential value (unless you want to specify a different set of credentials).</span></span>  
  
 <span data-ttu-id="9f79c-119">Todas as credenciais de serviço são encontradas como elementos filho de [ \<serviceBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-119">All service credentials are found as child elements of the [\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span></span> <span data-ttu-id="9f79c-120">O exemplo a seguir mostra um certificado usado como uma credencial de serviço.</span><span class="sxs-lookup"><span data-stu-id="9f79c-120">The following example shows a certificate used as a service credential.</span></span>  
  
```xml  
<configuration>  
 <system.serviceModel>  
  <behaviors>  
   <serviceBehaviors>  
    <behavior name="ServiceBehavior1">  
     <serviceCredentials>  
      <serviceCertificate findValue="000000000000000000000000000"   
                          storeLocation="CurrentUser"  
      storeName="Root" x509FindType="FindByThumbprint" />  
     </serviceCredentials>  
    </behavior>  
   </serviceBehaviors>  
  </behaviors>  
 </system.serviceModel>  
</configuration>  
```  
  
## <a name="service-credentials"></a><span data-ttu-id="9f79c-121">Credenciais de serviço</span><span class="sxs-lookup"><span data-stu-id="9f79c-121">Service Credentials</span></span>  
 <span data-ttu-id="9f79c-122">O [ \<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) contém quatro elementos filho.</span><span class="sxs-lookup"><span data-stu-id="9f79c-122">The [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) contains four child elements.</span></span> <span data-ttu-id="9f79c-123">Os elementos e seus usos são discutidos nas seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="9f79c-123">The elements and their usages are discussed in the following sections.</span></span>  
  
### <a name="servicecertificate-element"></a><span data-ttu-id="9f79c-124">\<serviceCertificate > elemento</span><span class="sxs-lookup"><span data-stu-id="9f79c-124">\<serviceCertificate> Element</span></span>  
 <span data-ttu-id="9f79c-125">Use esse elemento para especificar um certificado x. 509 que é usado para autenticar o serviço para clientes usando o modo de segurança de mensagem.</span><span class="sxs-lookup"><span data-stu-id="9f79c-125">Use this element to specify an X.509 certificate that is used to authenticate the service to clients using Message security mode.</span></span> <span data-ttu-id="9f79c-126">Se você estiver usando um certificado que é periodicamente renovada, em seguida, suas alterações de impressão digital.</span><span class="sxs-lookup"><span data-stu-id="9f79c-126">If you are using a certificate that is periodically renewed, then its thumbprint changes.</span></span> <span data-ttu-id="9f79c-127">Nesse caso, use o nome da entidade como o `X509FindType` porque o certificado pode ser reemitido com o mesmo nome de assunto.</span><span class="sxs-lookup"><span data-stu-id="9f79c-127">In that case, use the subject name as the `X509FindType` because the certificate can be reissued with the same subject name.</span></span>  
  
 <span data-ttu-id="9f79c-128">Para obter mais informações sobre como usar o elemento, consulte [como: especificar valores de credencial de cliente](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-128">For more information about using the element, see [How to: Specify Client Credential Values](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span></span>  
  
### <a name="certificate-of-clientcertificate-element"></a><span data-ttu-id="9f79c-129">\<certificado > de \<clientCertificate > elemento</span><span class="sxs-lookup"><span data-stu-id="9f79c-129">\<certificate> of \<clientCertificate> Element</span></span>  
 <span data-ttu-id="9f79c-130">Use o [ \<certificado >](../../../../docs/framework/configure-apps/file-schema/wcf/certificate-of-clientcertificate-element.md) elemento quando o serviço deve ter o certificado do cliente com antecedência para comunicação segura com o cliente.</span><span class="sxs-lookup"><span data-stu-id="9f79c-130">Use the [\<certificate>](../../../../docs/framework/configure-apps/file-schema/wcf/certificate-of-clientcertificate-element.md) element when the service must have the client's certificate in advance to communicate securely with the client.</span></span> <span data-ttu-id="9f79c-131">Isso ocorre ao usar o padrão de comunicação duplex.</span><span class="sxs-lookup"><span data-stu-id="9f79c-131">This occurs when using the duplex communication pattern.</span></span> <span data-ttu-id="9f79c-132">O padrão mais comum de solicitação-resposta, o cliente inclui o seu certificado na solicitação, o serviço usa para proteger sua resposta ao cliente.</span><span class="sxs-lookup"><span data-stu-id="9f79c-132">In the more typical request-reply pattern, the client includes its certificate in the request, which the service uses to secure its response back to the client.</span></span> <span data-ttu-id="9f79c-133">O padrão de comunicação duplex, no entanto, não tem solicitações e respostas.</span><span class="sxs-lookup"><span data-stu-id="9f79c-133">The duplex communication pattern, however, has no requests and replies.</span></span> <span data-ttu-id="9f79c-134">O serviço não é possível inferir o certificado do cliente da comunicação e, portanto, o serviço requer que o certificado do cliente com antecedência para proteger as mensagens para o cliente.</span><span class="sxs-lookup"><span data-stu-id="9f79c-134">The service cannot infer the client's certificate from the communication and therefore the service requires the client's certificate in advance to secure the messages to the client.</span></span> <span data-ttu-id="9f79c-135">Você deve obter o certificado do cliente de uma maneira de fora de banda e especificar o certificado usando esse elemento.</span><span class="sxs-lookup"><span data-stu-id="9f79c-135">You must obtain the client's certificate in an out-of-band manner and specify the certificate using this element.</span></span> <span data-ttu-id="9f79c-136">Para obter mais informações sobre serviços de duplex, consulte [como: criar um contrato Duplex](../../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-136">For more information about duplex services, see [How to: Create a Duplex Contract](../../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md).</span></span>  
  
### <a name="authentication-of-clientcertificate-element"></a><span data-ttu-id="9f79c-137">\<autenticação > de \<clientCertificate > elemento</span><span class="sxs-lookup"><span data-stu-id="9f79c-137">\<authentication> of \<clientCertificate> Element</span></span>  
 <span data-ttu-id="9f79c-138">O [ \<autenticação >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) elemento permite que você personalize a forma como os clientes são autenticados.</span><span class="sxs-lookup"><span data-stu-id="9f79c-138">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) element enables you to customize how clients are authenticated.</span></span> <span data-ttu-id="9f79c-139">Você pode definir o `CertificateValidationMode` atributo `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust`, ou `Custom`.</span><span class="sxs-lookup"><span data-stu-id="9f79c-139">You can set the `CertificateValidationMode` attribute to `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust`, or `Custom`.</span></span> <span data-ttu-id="9f79c-140">Por padrão, o nível é definido como `ChainTrust`, que especifica que cada certificado deve ser encontrado em uma hierarquia de certificados terminam em um *autoridade raiz* na parte superior da cadeia.</span><span class="sxs-lookup"><span data-stu-id="9f79c-140">By default, the level is set to `ChainTrust`, which specifies that each certificate must be found in a hierarchy of certificates ending in a *root authority* at the top of the chain.</span></span> <span data-ttu-id="9f79c-141">Este é o modo mais seguro.</span><span class="sxs-lookup"><span data-stu-id="9f79c-141">This is the most secure mode.</span></span> <span data-ttu-id="9f79c-142">Você também pode definir o valor `PeerOrChainTrust`, que especifica que os certificados emitidos por conta própria (confiança ponto a ponto) são aceitos, bem como certificados que estão em uma cadeia confiável.</span><span class="sxs-lookup"><span data-stu-id="9f79c-142">You can also set the value to `PeerOrChainTrust`, which specifies that self-issued certificates (peer trust) are accepted as well as certificates that are in a trusted chain.</span></span> <span data-ttu-id="9f79c-143">Esse valor é usado durante o desenvolvimento e depuração clientes e serviços, pois os certificados emitidos por conta própria não precisam ser adquiridos de uma autoridade confiável.</span><span class="sxs-lookup"><span data-stu-id="9f79c-143">This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority.</span></span> <span data-ttu-id="9f79c-144">Ao implantar um cliente, use o `ChainTrust` valor em vez disso.</span><span class="sxs-lookup"><span data-stu-id="9f79c-144">When deploying a client, use the `ChainTrust` value instead.</span></span> <span data-ttu-id="9f79c-145">Você também pode definir o valor `Custom`.</span><span class="sxs-lookup"><span data-stu-id="9f79c-145">You can also set the value to `Custom`.</span></span> <span data-ttu-id="9f79c-146">Quando definido como o `Custom` valor, você também deve definir o `CustomCertificateValidatorType` de atributo para um assembly e o tipo usado para validar o certificado.</span><span class="sxs-lookup"><span data-stu-id="9f79c-146">When set to the `Custom` value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="9f79c-147">Para criar seu próprios validador personalizado, você deve herdar de abstrata <xref:System.IdentityModel.Selectors.X509CertificateValidator> classe.</span><span class="sxs-lookup"><span data-stu-id="9f79c-147">To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span>  
  
### <a name="issuedtokenauthentication-element"></a><span data-ttu-id="9f79c-148">\<issuedTokenAuthentication > elemento</span><span class="sxs-lookup"><span data-stu-id="9f79c-148">\<issuedTokenAuthentication> Element</span></span>  
 <span data-ttu-id="9f79c-149">O cenário de token emitido tem três etapas.</span><span class="sxs-lookup"><span data-stu-id="9f79c-149">The issued token scenario has three stages.</span></span> <span data-ttu-id="9f79c-150">O primeiro estágio, um cliente tentar acessar um serviço é chamado um *do serviço de token seguro* (STS).</span><span class="sxs-lookup"><span data-stu-id="9f79c-150">In the first stage, a client trying to access a service is referred to a *secure token service* (STS).</span></span> <span data-ttu-id="9f79c-151">O STS subsequentemente problemas o cliente um token, normalmente um token de segurança asserções SAML (Markup Language) e, em seguida, autentica o cliente.</span><span class="sxs-lookup"><span data-stu-id="9f79c-151">The STS then authenticates the client and subsequently issues the client a token, typically a Security Assertions Markup Language (SAML) token.</span></span> <span data-ttu-id="9f79c-152">O cliente, em seguida, retorne para o serviço com o token.</span><span class="sxs-lookup"><span data-stu-id="9f79c-152">The client then returns to the service with the token.</span></span> <span data-ttu-id="9f79c-153">O serviço examina o token de dados que permite que o serviço autenticar o token e, portanto, o cliente.</span><span class="sxs-lookup"><span data-stu-id="9f79c-153">The service examines the token for data that allows the service to authenticate the token and therefore the client.</span></span> <span data-ttu-id="9f79c-154">Para autenticar o token, o certificado que usa o serviço de token de seguro deve ser conhecido para o serviço.</span><span class="sxs-lookup"><span data-stu-id="9f79c-154">To authenticate the token, the certificate that the secure token service uses must be known to the service.</span></span> <span data-ttu-id="9f79c-155">O [ \<issuedTokenAuthentication >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) elemento é o repositório de todos esses certificados de serviço de token seguro.</span><span class="sxs-lookup"><span data-stu-id="9f79c-155">The [\<issuedTokenAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) element is the repository for any such secure token service certificates.</span></span> <span data-ttu-id="9f79c-156">Para adicionar certificados, use o [ \<knownCertificates >](../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-156">To add certificates, use the [\<knownCertificates>](../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md).</span></span> <span data-ttu-id="9f79c-157">Inserir uma [ \<Adicionar >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md) para cada certificado, conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="9f79c-157">Insert an [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md) for each certificate, as shown in the following example.</span></span>  
  
```xml  
<issuedTokenAuthentication>  
   <knownCertificates>  
      <add findValue="www.contoso.com"   
           storeLocation="LocalMachine" storeName="My"   
           X509FindType="FindBySubjectName" />  
    </knownCertificates>  
</issuedTokenAuthentication>  
```  
  
 <span data-ttu-id="9f79c-158">Por padrão, os certificados devem ser obtidos de um serviço de token seguro.</span><span class="sxs-lookup"><span data-stu-id="9f79c-158">By default, the certificates must be obtained from a secure token service.</span></span> <span data-ttu-id="9f79c-159">Esses "conhecidos" certificados Certifique-se de que apenas legítimas clientes podem acessar um serviço.</span><span class="sxs-lookup"><span data-stu-id="9f79c-159">These "known" certificates ensure that only legitimate clients can access a service.</span></span>  
  
 <span data-ttu-id="9f79c-160">Você deve usar o [ \<allowedAudienceUris >](../../../../docs/framework/configure-apps/file-schema/wcf/allowedaudienceuris.md) coleção em um aplicativo federado que utiliza um *do serviço de token seguro* (STS) que emite `SamlSecurityToken` tokens de segurança.</span><span class="sxs-lookup"><span data-stu-id="9f79c-160">You should use the [\<allowedAudienceUris>](../../../../docs/framework/configure-apps/file-schema/wcf/allowedaudienceuris.md) collection in a federated application that utilizes a *secure token service* (STS) that issues `SamlSecurityToken` security tokens.</span></span> <span data-ttu-id="9f79c-161">Quando o STS emite o token de segurança, ele pode especificar o URI dos serviços da Web para o qual o token de segurança destina-se com a adição de um `SamlAudienceRestrictionCondition` para o token de segurança.</span><span class="sxs-lookup"><span data-stu-id="9f79c-161">When the STS issues the security token, it can specify the URI of the Web services for which the security token is intended by adding a `SamlAudienceRestrictionCondition` to the security token.</span></span> <span data-ttu-id="9f79c-162">Que permite que o `SamlSecurityTokenAuthenticator` para o serviço Web destinatário verificar se o token de segurança emitido destina-se para esse serviço da Web, especificando que essa seleção deve acontecer, fazendo o seguinte:</span><span class="sxs-lookup"><span data-stu-id="9f79c-162">That allows the `SamlSecurityTokenAuthenticator` for the recipient Web service to verify that the issued security token is intended for this Web service by specifying that this check should happen by doing the following:</span></span>  
  
-   <span data-ttu-id="9f79c-163">Definir o `audienceUriMode` atributo de [ \<issuedTokenAuthentication >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) para `Always` ou `BearerKeyOnly`.</span><span class="sxs-lookup"><span data-stu-id="9f79c-163">Set the `audienceUriMode` attribute of [\<issuedTokenAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) to `Always` or `BearerKeyOnly`.</span></span>  
  
-   <span data-ttu-id="9f79c-164">Especifique o conjunto de URIs válidos, adicionando os URIs a esta coleção.</span><span class="sxs-lookup"><span data-stu-id="9f79c-164">Specify the set of valid URIs, by adding the URIs to this collection.</span></span> <span data-ttu-id="9f79c-165">Para fazer isso, insira uma [ \<Adicionar >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-allowedaudienceuris.md) para cada URI</span><span class="sxs-lookup"><span data-stu-id="9f79c-165">To do this, insert an [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-allowedaudienceuris.md) for each URI</span></span>  
  
 <span data-ttu-id="9f79c-166">Para obter mais informações, consulte <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator>.</span><span class="sxs-lookup"><span data-stu-id="9f79c-166">For more information, see <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator>.</span></span>  
  
 <span data-ttu-id="9f79c-167">Para obter mais informações sobre este elemento de configuração, consulte [como: configurar credenciais em um serviço de Federação](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-167">For more information about using this configuration element, see [How to: Configure Credentials on a Federation Service](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md).</span></span>  
  
#### <a name="allowing-anonymous-cardspace-users"></a><span data-ttu-id="9f79c-168">Permitir que usuários anônimos CardSpace</span><span class="sxs-lookup"><span data-stu-id="9f79c-168">Allowing Anonymous CardSpace Users</span></span>  
 <span data-ttu-id="9f79c-169">Definindo o `AllowUntrustedRsaIssuers` atributo do `<IssuedTokenAuthentication>` elemento `true` explicitamente permite que qualquer cliente apresentar um token emitido por conta própria assinado com um par de chaves RSA arbitrário.</span><span class="sxs-lookup"><span data-stu-id="9f79c-169">Setting the `AllowUntrustedRsaIssuers` attribute of the `<IssuedTokenAuthentication>` element to `true` explicitly allows any client to present a self-issued token signed with an arbitrary RSA key pair.</span></span> <span data-ttu-id="9f79c-170">O emissor é *não confiável* porque a chave não tem nenhum dado de emissor associado a ele.</span><span class="sxs-lookup"><span data-stu-id="9f79c-170">The issuer is *untrusted* because the key has no issuer data associated with it.</span></span> <span data-ttu-id="9f79c-171">Um [!INCLUDE[infocard](../../../../includes/infocard-md.md)] usuário pode criar um cartão emitido por conta própria que inclui automaticamente fornecidas declarações de identidade.</span><span class="sxs-lookup"><span data-stu-id="9f79c-171">A [!INCLUDE[infocard](../../../../includes/infocard-md.md)] user can create a self-issued card that includes self-provided claims of identity.</span></span> <span data-ttu-id="9f79c-172">Use esse recurso com cuidado.</span><span class="sxs-lookup"><span data-stu-id="9f79c-172">Use this capability with caution.</span></span> <span data-ttu-id="9f79c-173">Para usar esse recurso, considere a chave pública RSA como uma senha mais segura que deve ser armazenada em um banco de dados juntamente com um nome de usuário.</span><span class="sxs-lookup"><span data-stu-id="9f79c-173">To use this feature, think of the RSA public key as a more secure password that should be stored in a database along with a user name.</span></span> <span data-ttu-id="9f79c-174">Antes de permitir o acesso de cliente ao serviço, verifique se a chave pública RSA apresentada pelo cliente, comparando-o com a chave pública armazenada para o nome de usuário apresentada.</span><span class="sxs-lookup"><span data-stu-id="9f79c-174">Before allowing a client access to the service, verify the client-presented RSA public key by comparing it with the stored public key for the presented user name.</span></span> <span data-ttu-id="9f79c-175">Isso pressupõe que você estabelecer um processo de registro no qual os usuários podem registrar seus nomes de usuário e associá-los com as chaves públicas do RSA emitidas por conta própria.</span><span class="sxs-lookup"><span data-stu-id="9f79c-175">This presumes that you have established a registration process whereby users can register their user names and associate them with the self-issued RSA public keys.</span></span>  
  
## <a name="client-credentials"></a><span data-ttu-id="9f79c-176">Credenciais do cliente</span><span class="sxs-lookup"><span data-stu-id="9f79c-176">Client Credentials</span></span>  
 <span data-ttu-id="9f79c-177">As credenciais do cliente são usadas para autenticar o cliente para serviços em casos em que a autenticação mútua é necessária.</span><span class="sxs-lookup"><span data-stu-id="9f79c-177">Client credentials are used to authenticate the client to services in cases where mutual authentication is required.</span></span> <span data-ttu-id="9f79c-178">Você pode usar a seção para especificar os certificados de serviço para cenários em que o cliente deve proteger as mensagens para um serviço com o certificado do serviço.</span><span class="sxs-lookup"><span data-stu-id="9f79c-178">You can use the section to specify service certificates for scenarios where the client must secure messages to a service with the service's certificate.</span></span>  
  
 <span data-ttu-id="9f79c-179">Você também pode configurar um cliente como parte de um cenário de federação para tokens emitido de uso de um serviço de token seguro ou um emissor local de tokens.</span><span class="sxs-lookup"><span data-stu-id="9f79c-179">You can also configure a client as part of a federation scenario to use issued tokens from a secure token service or a local issuer of tokens.</span></span> <span data-ttu-id="9f79c-180">Para obter mais informações sobre cenários federados, consulte [federação e Tokens emitidos](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-180">For more information about federated scenarios, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span> <span data-ttu-id="9f79c-181">Todas as credenciais de cliente estão localizadas sob o [ \<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md), conforme mostrado no código a seguir.</span><span class="sxs-lookup"><span data-stu-id="9f79c-181">All client credentials are found under the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md), as shown in the following code.</span></span>  
  
```xml  
<behaviors>  
 <endpointBehaviors>  
  <behavior name="EndpointBehavior1">  
   <clientCredentials>  
    <clientCertificate findValue="cn=www.contoso.com"     
        storeLocation="LocalMachine"  
        storeName="AuthRoot" x509FindType="FindBySubjectName" />  
    <serviceCertificate>  
     <defaultCertificate findValue="www.cohowinery.com"   
                    storeLocation="LocalMachine"  
                    storeName="Root" x509FindType="FindByIssuerName" />  
    <authentication revocationMode="Online"  
                    trustedStoreLocation="LocalMachine" />  
    </serviceCertificate>  
   </clientCredentials>  
  </behavior>  
 </endpointBehaviors>  
```  
  
#### <a name="clientcertifictate-element"></a><span data-ttu-id="9f79c-182">\<clientCertifictate > elemento</span><span class="sxs-lookup"><span data-stu-id="9f79c-182">\<clientCertifictate> Element</span></span>  
 <span data-ttu-id="9f79c-183">Defina o certificado usado para autenticar o cliente com esse elemento.</span><span class="sxs-lookup"><span data-stu-id="9f79c-183">Set the certificate used to authenticate the client with this element.</span></span> <span data-ttu-id="9f79c-184">Para obter mais informações, consulte [como: especificar valores de credencial de cliente](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-184">For more information, see [How to: Specify Client Credential Values](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span></span>  
  
#### <a name="httpdigest"></a><span data-ttu-id="9f79c-185">\<httpDigest ></span><span class="sxs-lookup"><span data-stu-id="9f79c-185">\<httpDigest></span></span>  
 <span data-ttu-id="9f79c-186">Esse recurso deve ser habilitado com o Active Directory no Windows e serviços de informações da Internet (IIS).</span><span class="sxs-lookup"><span data-stu-id="9f79c-186">This feature must be enabled with Active Directory on Windows and Internet Information Services (IIS).</span></span> <span data-ttu-id="9f79c-187">Para obter mais informações, consulte [a autenticação Digest no IIS 6.0](http://go.microsoft.com/fwlink/?LinkId=88443).</span><span class="sxs-lookup"><span data-stu-id="9f79c-187">For more information, see [Digest Authentication in IIS 6.0](http://go.microsoft.com/fwlink/?LinkId=88443).</span></span>  
  
#### <a name="issuedtoken-element"></a><span data-ttu-id="9f79c-188">\<issuedToken > elemento</span><span class="sxs-lookup"><span data-stu-id="9f79c-188">\<issuedToken> Element</span></span>  
 <span data-ttu-id="9f79c-189">O [ \<issuedToken >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtoken.md) contém os elementos usados para configurar um emissor local de tokens ou comportamentos usados com um serviço de token de segurança.</span><span class="sxs-lookup"><span data-stu-id="9f79c-189">The [\<issuedToken>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtoken.md) contains the elements used to configure a local issuer of tokens, or behaviors used with an security token service.</span></span> <span data-ttu-id="9f79c-190">Para obter instruções sobre como configurar um cliente para usar um emissor local, consulte [como: configurar um emissor Local](../../../../docs/framework/wcf/feature-details/how-to-configure-a-local-issuer.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-190">For instructions on configuring a client to use a local issuer, see [How to: Configure a Local Issuer](../../../../docs/framework/wcf/feature-details/how-to-configure-a-local-issuer.md).</span></span>  
  
#### <a name="localissueraddress"></a><span data-ttu-id="9f79c-191">\<localIssuerAddress ></span><span class="sxs-lookup"><span data-stu-id="9f79c-191">\<localIssuerAddress></span></span>  
 <span data-ttu-id="9f79c-192">Especifica um endereço de serviço de token de segurança padrão.</span><span class="sxs-lookup"><span data-stu-id="9f79c-192">Specifies a default security token service address.</span></span> <span data-ttu-id="9f79c-193">Isso é usado quando o <xref:System.ServiceModel.WSFederationHttpBinding> não fornecer uma URL para o serviço de token de segurança, ou quando o endereço do emissor de uma associação federada é http://schemas.microsoft.com/2005/12/ServiceModel/Addressing/Anonymous ou `null`.</span><span class="sxs-lookup"><span data-stu-id="9f79c-193">This is used when the <xref:System.ServiceModel.WSFederationHttpBinding> does not supply a URL for the security token service, or when the issuer address of a federated binding is http://schemas.microsoft.com/2005/12/ServiceModel/Addressing/Anonymous or `null`.</span></span> <span data-ttu-id="9f79c-194">Nesses casos, o <xref:System.ServiceModel.Description.ClientCredentials> deve ser configurado com o endereço do emissor local e a associação a ser usado para se comunicar com esse emissor.</span><span class="sxs-lookup"><span data-stu-id="9f79c-194">In such cases, the <xref:System.ServiceModel.Description.ClientCredentials> must be configured with the address of the local issuer and the binding to use to communicate with that issuer.</span></span>  
  
#### <a name="issuerchannelbehaviors"></a><span data-ttu-id="9f79c-195">\<issuerChannelBehaviors ></span><span class="sxs-lookup"><span data-stu-id="9f79c-195">\<issuerChannelBehaviors></span></span>  
 <span data-ttu-id="9f79c-196">Use o [ \<issuerChannelBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/issuerchannelbehaviors-element.md) para adicionar os comportamentos do cliente WCF usados ao se comunicar com um serviço de token de segurança.</span><span class="sxs-lookup"><span data-stu-id="9f79c-196">Use the [\<issuerChannelBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/issuerchannelbehaviors-element.md) to add WCF client behaviors used when communicating with a security token service.</span></span> <span data-ttu-id="9f79c-197">Definem os comportamentos do cliente no [ \<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md) seção.</span><span class="sxs-lookup"><span data-stu-id="9f79c-197">Define client behaviors in the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md) section.</span></span> <span data-ttu-id="9f79c-198">Para usar um comportamento definido, adicione um <`add`> elemento para o `<issuerChannelBehaviors>` elemento com dois atributos.</span><span class="sxs-lookup"><span data-stu-id="9f79c-198">To use a defined behavior, add an <`add`> element to the `<issuerChannelBehaviors>` element with two attributes.</span></span> <span data-ttu-id="9f79c-199">Definir o `issuerAddress` para a URL do serviço de token de segurança e definir o `behaviorConfiguration` de atributo para o nome do comportamento do ponto de extremidade definido, conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="9f79c-199">Set the `issuerAddress` to the URL of the security token service and set the `behaviorConfiguration` attribute to the name of the defined endpoint behavior, as shown in the following example.</span></span>  
  
```xml  
<clientCredentials>  
   <issuedToken>  
      <issuerChannelBehaviors>  
         <add issuerAddress="http://www.contoso.com"  
               behaviorConfiguration="clientBehavior1" />     
```  
  
#### <a name="servicecertificate-element"></a><span data-ttu-id="9f79c-200">\<serviceCertificate > elemento</span><span class="sxs-lookup"><span data-stu-id="9f79c-200">\<serviceCertificate> Element</span></span>  
 <span data-ttu-id="9f79c-201">Use esse elemento para controlar a autenticação de certificados de serviço.</span><span class="sxs-lookup"><span data-stu-id="9f79c-201">Use this element to control authentication of service certificates.</span></span>  
  
 <span data-ttu-id="9f79c-202">O [ \<defaultCertificate >](../../../../docs/framework/configure-apps/file-schema/wcf/defaultcertificate-element.md) elemento pode armazenar um único certificado usado quando o serviço não especifica nenhum certificado.</span><span class="sxs-lookup"><span data-stu-id="9f79c-202">The [\<defaultCertificate>](../../../../docs/framework/configure-apps/file-schema/wcf/defaultcertificate-element.md) element can store a single certificate used when the service specifies no certificate.</span></span>  
  
 <span data-ttu-id="9f79c-203">Use o [ \<scopedCertificates >](../../../../docs/framework/configure-apps/file-schema/wcf/scopedcertificates-element.md) e [ \<Adicionar >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-scopedcertificates-element.md) configurar certificados de serviço que estão associados a serviços específicos.</span><span class="sxs-lookup"><span data-stu-id="9f79c-203">Use the [\<scopedCertificates>](../../../../docs/framework/configure-apps/file-schema/wcf/scopedcertificates-element.md) and [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-scopedcertificates-element.md) to set service certificates that are associated with specific services.</span></span> <span data-ttu-id="9f79c-204">O `<add>` elemento inclui um `targetUri` atributo que é usado para associar o certificado com o serviço.</span><span class="sxs-lookup"><span data-stu-id="9f79c-204">The `<add>` element includes a `targetUri` attribute that is used to associate the certificate with the service.</span></span>  
  
 <span data-ttu-id="9f79c-205">O [ \<autenticação >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) elemento Especifica o nível de confiança usado para autenticar certificados.</span><span class="sxs-lookup"><span data-stu-id="9f79c-205">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element specifies the level of trust used to authenticate certificates.</span></span> <span data-ttu-id="9f79c-206">Por padrão, o nível é definido como "ChainTrust", que especifica que cada certificado deve ser encontrado em uma hierarquia de certificados terminam em uma autoridade de certificação confiável na parte superior da cadeia.</span><span class="sxs-lookup"><span data-stu-id="9f79c-206">By default, the level is set to "ChainTrust," which specifies that each certificate must be found in a hierarchy of certificates ending in a trusted certification authority at the top of the chain.</span></span> <span data-ttu-id="9f79c-207">Este é o modo mais seguro.</span><span class="sxs-lookup"><span data-stu-id="9f79c-207">This is the most secure mode.</span></span> <span data-ttu-id="9f79c-208">Você também pode definir o valor "PeerOrChainTrust", que especifica que os certificados emitidos por conta própria (confiança ponto a ponto) são aceitos, bem como certificados que estão em uma cadeia confiável.</span><span class="sxs-lookup"><span data-stu-id="9f79c-208">You can also set the value to "PeerOrChainTrust", which specifies that self-issued certificates (peer trust) are accepted, as well as certificates that are in a trusted chain.</span></span> <span data-ttu-id="9f79c-209">Esse valor é usado durante o desenvolvimento e depuração clientes e serviços, pois os certificados emitidos por conta própria não precisam ser adquiridos de uma autoridade confiável.</span><span class="sxs-lookup"><span data-stu-id="9f79c-209">This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority.</span></span> <span data-ttu-id="9f79c-210">Ao implantar um cliente, use o valor de "ChainTrust".</span><span class="sxs-lookup"><span data-stu-id="9f79c-210">When deploying a client, use the "ChainTrust" value instead.</span></span> <span data-ttu-id="9f79c-211">Você também pode definir o valor para "Custom" ou "None".</span><span class="sxs-lookup"><span data-stu-id="9f79c-211">You can also set the value to "Custom" or "None."</span></span> <span data-ttu-id="9f79c-212">Para usar o valor de "Custom", você também deve definir o `CustomCertificateValidatorType` de atributo para um assembly e o tipo usado para validar o certificado.</span><span class="sxs-lookup"><span data-stu-id="9f79c-212">To use the "Custom" value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="9f79c-213">Para criar seu próprios validador personalizado, você deve herdar de abstrata <xref:System.IdentityModel.Selectors.X509CertificateValidator> classe.</span><span class="sxs-lookup"><span data-stu-id="9f79c-213">To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span> <span data-ttu-id="9f79c-214">Para obter mais informações, consulte [como: criar um serviço que utiliza um validador de certificado personalizado](../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-214">For more information, see [How to: Create a Service that Employs a Custom Certificate Validator](../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).</span></span>  
  
 <span data-ttu-id="9f79c-215">O [ \<autenticação >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) elemento inclui um `RevocationMode` atributo que especifica como os certificados são verificados para revogação.</span><span class="sxs-lookup"><span data-stu-id="9f79c-215">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element includes a `RevocationMode` attribute that specifies how certificates are checked for revocation.</span></span> <span data-ttu-id="9f79c-216">O padrão é "online", que indica que os certificados são automaticamente verificados para revogação.</span><span class="sxs-lookup"><span data-stu-id="9f79c-216">The default is "online", which indicates that certificates are automatically checked for revocation.</span></span> <span data-ttu-id="9f79c-217">Para obter mais informações, consulte [trabalhar com certificados](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-217">For more information, see [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span></span>  
  
## <a name="serviceauthorization"></a><span data-ttu-id="9f79c-218">ServiceAuthorization</span><span class="sxs-lookup"><span data-stu-id="9f79c-218">ServiceAuthorization</span></span>  
 <span data-ttu-id="9f79c-219">O [ \<serviceAuthorization >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md) elemento contém elementos que afetam a autorização, provedores de função personalizada e representação.</span><span class="sxs-lookup"><span data-stu-id="9f79c-219">The [\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md) element contains elements that affect authorization, custom role providers, and impersonation.</span></span>  
  
 <span data-ttu-id="9f79c-220">O <xref:System.Security.Permissions.PrincipalPermissionAttribute> classe é aplicada a um método de serviço.</span><span class="sxs-lookup"><span data-stu-id="9f79c-220">The <xref:System.Security.Permissions.PrincipalPermissionAttribute> class is applied to a service method.</span></span> <span data-ttu-id="9f79c-221">O atributo especifica os grupos de usuários para usar ao autorizar o uso de um método protegido.</span><span class="sxs-lookup"><span data-stu-id="9f79c-221">The attribute specifies the groups of users to use when authorizing use of a protected method.</span></span> <span data-ttu-id="9f79c-222">O valor padrão é "UseWindowsGroups" e especifica que os grupos do Windows, como "Administradores" ou "Usuários" são pesquisados para uma tentativa de acessar um recurso de identidade.</span><span class="sxs-lookup"><span data-stu-id="9f79c-222">The default value is "UseWindowsGroups" and specifies that Windows groups, such as "Administrators" or "Users," are searched for an identity trying to access a resource.</span></span> <span data-ttu-id="9f79c-223">Você também pode especificar "UseAspNetRoles" para usar um provedor de função personalizada que está configurado com o <`system.web` > elemento, conforme mostrado no código a seguir.</span><span class="sxs-lookup"><span data-stu-id="9f79c-223">You can also specify "UseAspNetRoles" to use a custom role provider that is configured under the <`system.web` > element, as shown in the following code.</span></span>  
  
```xml  
<system.web>  
  <membership defaultProvider="SqlProvider"   
   userIsOnlineTimeWindow="15">  
     <providers>  
       <clear />  
       <add   
          name="SqlProvider"   
          type="System.Web.Security.SqlMembershipProvider"   
          connectionStringName="SqlConn"  
          applicationName="MembershipProvider"  
          enablePasswordRetrieval="false"  
          enablePasswordReset="false"  
          requiresQuestionAndAnswer="false"  
          requiresUniqueEmail="true"  
          passwordFormat="Hashed" />  
     </providers>  
   </membership>  
  <!-- Other configuration code not shown.-->  
</system.web>  
```  
  
 <span data-ttu-id="9f79c-224">O código a seguir mostra o `roleProviderName` usado com o `principalPermissionMode` atributo.</span><span class="sxs-lookup"><span data-stu-id="9f79c-224">The following code shows the `roleProviderName` used with the `principalPermissionMode` attribute.</span></span>  
  
```xml  
<behaviors>  
 <behavior name="ServiceBehaviour">          
  <serviceAuthorization principalPermissionMode ="UseAspNetRoles"   
                        roleProviderName ="SqlProvider" />  
</behavior>   
   <!-- Other configuration code not shown. -->  
</behaviors>  
```  
  
## <a name="configuring-security-audits"></a><span data-ttu-id="9f79c-225">Configurar auditorias de segurança</span><span class="sxs-lookup"><span data-stu-id="9f79c-225">Configuring Security Audits</span></span>  
 <span data-ttu-id="9f79c-226">Use o [ \<serviceSecurityAudit >](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md) para especificar o log gravado e quais tipos de eventos de log.</span><span class="sxs-lookup"><span data-stu-id="9f79c-226">Use the [\<serviceSecurityAudit>](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md) to specify the log written to, and what types of events to log.</span></span> <span data-ttu-id="9f79c-227">Para obter mais informações, consulte [auditoria](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span><span class="sxs-lookup"><span data-stu-id="9f79c-227">For more information, see [Auditing](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span></span>  
  
```xml  
<system.serviceModel>  
<serviceBehaviors>  
  <behavior name="NewBehavior">  
    <serviceSecurityAudit auditLogLocation="Application"   
             suppressAuditFailure="true"  
             serviceAuthorizationAuditLevel="Success"   
             messageAuthenticationAuditLevel="Success" />  
    </behavior>  
  </serviceBehaviors>  
</behaviors>  
```  
  
## <a name="secure-metadata-exchange"></a><span data-ttu-id="9f79c-228">Proteger a troca de metadados</span><span class="sxs-lookup"><span data-stu-id="9f79c-228">Secure Metadata Exchange</span></span>  
 <span data-ttu-id="9f79c-229">Exportação de metadados para clientes é conveniente para desenvolvedores de cliente e de serviço, pois permite downloads de código do cliente e configuração.</span><span class="sxs-lookup"><span data-stu-id="9f79c-229">Exporting metadata to clients is convenient for service and client developers, as it enables downloads of configuration and client code.</span></span> <span data-ttu-id="9f79c-230">Para reduzir a exposição de um serviço a usuários mal-intencionados, é possível proteger a transferência usando o SSL em mecanismo de HTTP (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="9f79c-230">To reduce the exposure of a service to malicious users, it is possible to secure the transfer using the SSL over HTTP (HTTPS) mechanism.</span></span> <span data-ttu-id="9f79c-231">Para fazer isso, primeiro você deve ligar um certificado x. 509 apropriado para uma porta específica no computador que hospeda o serviço.</span><span class="sxs-lookup"><span data-stu-id="9f79c-231">To do so, you must first bind a suitable X.509 certificate to a specific port on the computer that is hosting the service.</span></span> <span data-ttu-id="9f79c-232">(Para obter mais informações, consulte [trabalhar com certificados](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).) Em seguida, adicione um [ \<serviceMetadata >](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md) para a configuração do serviço e defina o `HttpsGetEnabled` atributo `true`.</span><span class="sxs-lookup"><span data-stu-id="9f79c-232">(For more information, see [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).) Second, add a [\<serviceMetadata>](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md) to the service configuration and set the `HttpsGetEnabled` attribute to `true`.</span></span> <span data-ttu-id="9f79c-233">Finalmente, defina o `HttpsGetUrl` atributo para a URL do ponto de extremidade de metadados de serviço, conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="9f79c-233">Finally, set the `HttpsGetUrl` attribute to the URL of the service metadata endpoint, as shown in the following example.</span></span>  
  
```xml  
<behaviors>  
 <serviceBehaviors>  
  <behavior name="NewBehavior">  
    <serviceMetadata httpsGetEnabled="true"   
     httpsGetUrl="https://myComputerName/myEndpoint" />  
  </behavior>  
 </serviceBehaviors>  
</behaviors>  
```  
  
## <a name="see-also"></a><span data-ttu-id="9f79c-234">Consulte também</span><span class="sxs-lookup"><span data-stu-id="9f79c-234">See Also</span></span>  
 [<span data-ttu-id="9f79c-235">Auditoria</span><span class="sxs-lookup"><span data-stu-id="9f79c-235">Auditing</span></span>](../../../../docs/framework/wcf/feature-details/auditing-security-events.md)  
 [<span data-ttu-id="9f79c-236">Modelo de segurança para o Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="9f79c-236">Security Model for Windows Server App Fabric</span></span>](http://go.microsoft.com/fwlink/?LinkID=201279&clcid=0x409)
