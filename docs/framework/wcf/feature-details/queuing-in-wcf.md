---
title: Enfileiramento no WCF
ms.date: 03/30/2017
ms.assetid: e98d76ba-1acf-42cd-b137-0f8214661112
ms.openlocfilehash: e6608a3d556b546660be904eb8c853243e833d2e
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79184556"
---
# <a name="queuing-in-wcf"></a><span data-ttu-id="5a43c-102">Enfileiramento no WCF</span><span class="sxs-lookup"><span data-stu-id="5a43c-102">Queuing in WCF</span></span>
<span data-ttu-id="5a43c-103">Esta seção descreve como usar a comunicação enfileirada na Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="5a43c-103">This section describes how to use queued communication in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="queues-as-a-wcf-transport-binding"></a><span data-ttu-id="5a43c-104">Filas como uma vinculação de transporte WCF</span><span class="sxs-lookup"><span data-stu-id="5a43c-104">Queues as a WCF transport binding</span></span>  
 <span data-ttu-id="5a43c-105">No WCF, os contratos especificam o que está sendo trocado.</span><span class="sxs-lookup"><span data-stu-id="5a43c-105">In WCF, the contracts specify what is being exchanged.</span></span> <span data-ttu-id="5a43c-106">Os contratos são trocas de mensagens dependentes de negócios ou específicas de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="5a43c-106">Contracts are business-dependent or application-specific message exchanges.</span></span> <span data-ttu-id="5a43c-107">O mecanismo usado para trocar mensagens (ou o "como") é especificado nas vinculações.</span><span class="sxs-lookup"><span data-stu-id="5a43c-107">The mechanism used to exchange messages (or the "how") is specified in the bindings.</span></span> <span data-ttu-id="5a43c-108">As vinculações no WCF encapsulam detalhes da troca de mensagens.</span><span class="sxs-lookup"><span data-stu-id="5a43c-108">Bindings in WCF encapsulate details of the message exchange.</span></span> <span data-ttu-id="5a43c-109">Eles expõem os botões de configuração para o usuário controlar vários aspectos do transporte ou do protocolo que as vinculações representam.</span><span class="sxs-lookup"><span data-stu-id="5a43c-109">They expose configuration knobs for the user to control various aspects of the transport or the protocol that the bindings represent.</span></span> <span data-ttu-id="5a43c-110">A fila no WCF é tratada como qualquer outra vinculação de transporte, o que é uma grande vantagem para muitos aplicativos de fila.</span><span class="sxs-lookup"><span data-stu-id="5a43c-110">Queuing in WCF is treated like any other transport binding, which is a big advantage for many queuing applications.</span></span> <span data-ttu-id="5a43c-111">Hoje, muitos aplicativos de fila são escritos de forma diferente de outros aplicativos distribuídos no estilo RPC (Remote Procedure Call, chamada de procedimento remoto), tornando mais difícil de seguir e manter.</span><span class="sxs-lookup"><span data-stu-id="5a43c-111">Today, many queuing applications are written differently from other remote procedure call (RPC)-style distributed applications, making it harder to follow and maintain.</span></span> <span data-ttu-id="5a43c-112">Com o WCF, o estilo de escrever um aplicativo distribuído é muito o mesmo, facilitando o seguimento e a manutenção.</span><span class="sxs-lookup"><span data-stu-id="5a43c-112">With WCF, the style of writing a distributed application is much the same, making it easier to follow and maintain.</span></span> <span data-ttu-id="5a43c-113">Além disso, ao fatorar o mecanismo de troca separadamente da lógica empresarial, é mais fácil configurar o transporte ou fazer alterações nele sem afetar o código específico do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5a43c-113">Moreover, by factoring out the mechanism of exchange separately from the business logic, it is easier to configure the transport or make changes to it without affecting application specific code.</span></span> <span data-ttu-id="5a43c-114">A figura a seguir ilustra a estrutura de um serviço wcf e cliente usando MSMQ como transporte.</span><span class="sxs-lookup"><span data-stu-id="5a43c-114">The following figure illustrates the structure of a WCF service and client using MSMQ as a transport.</span></span>  
  
 <span data-ttu-id="5a43c-115">![Diagrama de aplicativos enfileirados](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Figura de fila distribuída")</span><span class="sxs-lookup"><span data-stu-id="5a43c-115">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="5a43c-116">Como você pode ver na figura anterior, o cliente e o serviço devem definir apenas a semântica do aplicativo, ou seja, o contrato e a implementação.</span><span class="sxs-lookup"><span data-stu-id="5a43c-116">As you can see from the preceding figure, the client and service must define only the application semantics, that is, the contract and implementation.</span></span> <span data-ttu-id="5a43c-117">O serviço configura uma vinculação enfileirada com configurações preferenciais.</span><span class="sxs-lookup"><span data-stu-id="5a43c-117">The service configures a queued binding with preferred settings.</span></span> <span data-ttu-id="5a43c-118">O cliente usa a [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) para gerar um cliente WCF para o serviço e para gerar um arquivo de configuração que descreve as vinculações a serem usados para enviar mensagens ao serviço.</span><span class="sxs-lookup"><span data-stu-id="5a43c-118">The client uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a WCF client to the service and to generate a configuration file that describes the bindings to use to send messages to the service.</span></span> <span data-ttu-id="5a43c-119">Assim, para enviar uma mensagem enfileirada, o cliente instancia um cliente WCF e invoca uma operação nele.</span><span class="sxs-lookup"><span data-stu-id="5a43c-119">Thus, to send a queued message, the client instantiates a WCF client and invokes an operation on it.</span></span> <span data-ttu-id="5a43c-120">Isso faz com que a mensagem seja enviada para a fila de transmissão e transferida para a fila de destino.</span><span class="sxs-lookup"><span data-stu-id="5a43c-120">This causes the message to be sent to the transmission queue and transferred to the target queue.</span></span> <span data-ttu-id="5a43c-121">Todas as complexidades da comunicação enfileirada estão ocultas do aplicativo que está enviando e recebendo mensagens.</span><span class="sxs-lookup"><span data-stu-id="5a43c-121">All the complexities of queued communication are hidden from the application that is sending and receiving messages.</span></span>  
  
 <span data-ttu-id="5a43c-122">As ressalvas sobre a vinculação enfileirada no WCF incluem:</span><span class="sxs-lookup"><span data-stu-id="5a43c-122">Caveats about queued binding in WCF include:</span></span>  
  
- <span data-ttu-id="5a43c-123">Todas as operações de serviço devem ser unidirecionais porque a vinculação enfileirada padrão no WCF não suporta comunicação duplex usando filas.</span><span class="sxs-lookup"><span data-stu-id="5a43c-123">All service operations must be one-way because the default queued binding in WCF does not support duplex communication using queues.</span></span> <span data-ttu-id="5a43c-124">Uma amostra de comunicação bidirecional[(Comunicação Bidirecional)](../../../../docs/framework/wcf/samples/two-way-communication.md)ilustra como usar dois contratos unidirecionais para implementar a comunicação duplex usando filas.</span><span class="sxs-lookup"><span data-stu-id="5a43c-124">A two-way communication sample ([Two-Way Communication](../../../../docs/framework/wcf/samples/two-way-communication.md)) illustrates how to use two one-way contracts to implement duplex communication using queues.</span></span>  
  
- <span data-ttu-id="5a43c-125">Para gerar um cliente WCF usando a troca de metadados requer um ponto final HTTP adicional no serviço para que ele possa ser consultado diretamente para gerar o cliente WCF e obter informações vinculativas para configurar adequadamente a comunicação enfileirada.</span><span class="sxs-lookup"><span data-stu-id="5a43c-125">To generate a WCF client using metadata exchange requires an additional HTTP endpoint on the service so that it can be queried directly to generate the WCF client and obtain binding information to appropriately configure queued communication.</span></span>  
  
- <span data-ttu-id="5a43c-126">Com base na vinculação enfileirada, é necessária uma configuração extra fora do WCF.</span><span class="sxs-lookup"><span data-stu-id="5a43c-126">Based on the queued binding, extra configuration outside of WCF is required.</span></span> <span data-ttu-id="5a43c-127">Por exemplo, <xref:System.ServiceModel.NetMsmqBinding> a classe enviada com OWCF exige que você configure as vinculações, bem como configure minimamente a fila de mensagens (MSMQ).</span><span class="sxs-lookup"><span data-stu-id="5a43c-127">For example, the <xref:System.ServiceModel.NetMsmqBinding> class that is shipped with WCF requires you to configure the bindings as well as minimally configure Message Queuing (MSMQ).</span></span>  
  
 <span data-ttu-id="5a43c-128">As seções a seguir descrevem as vinculações específicas enfileiradas enviadas com WCF, que são baseadas no MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5a43c-128">The following sections describe the specific queued bindings shipped with WCF, which are based on MSMQ.</span></span>  
  
### <a name="msmq"></a><span data-ttu-id="5a43c-129">MSMQ</span><span class="sxs-lookup"><span data-stu-id="5a43c-129">MSMQ</span></span>  
 <span data-ttu-id="5a43c-130">O transporte enfileirado no WCF usa o MSMQ para sua comunicação enfileirada.</span><span class="sxs-lookup"><span data-stu-id="5a43c-130">The queued transport in WCF uses MSMQ for its queued communication.</span></span>  
  
 <span data-ttu-id="5a43c-131">O MSMQ é fornecido como um componente opcional com windows e funciona como um serviço NT.</span><span class="sxs-lookup"><span data-stu-id="5a43c-131">MSMQ ships as an optional component with Windows and runs as an NT service.</span></span> <span data-ttu-id="5a43c-132">Ele captura mensagens para transmissão em uma fila de transmissão e para entrega em uma fila de destino.</span><span class="sxs-lookup"><span data-stu-id="5a43c-132">It captures messages for transmission in a transmission queue and for delivery in a target queue.</span></span> <span data-ttu-id="5a43c-133">Os gerentes de fila do MSMQ implementam um protocolo confiável de transferência de mensagens para que as mensagens não sejam perdidas na transmissão.</span><span class="sxs-lookup"><span data-stu-id="5a43c-133">The MSMQ queue managers implement a reliable message-transfer protocol so that messages are not lost in transmission.</span></span> <span data-ttu-id="5a43c-134">O protocolo pode ser nativo ou baseado em SOAP, como o SOAP Reliable Message Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="5a43c-134">The protocol can be either native or SOAP-based, such as the SOAP Reliable Message Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="5a43c-135">No MSMQ, as filas podem ser transacionais ou não transacionais.</span><span class="sxs-lookup"><span data-stu-id="5a43c-135">In MSMQ, queues can be transactional or non-transactional.</span></span> <span data-ttu-id="5a43c-136">Uma fila transacional permite que as mensagens sejam capturadas e entregues em uma transação e, em seguida, armazenadas duramente na fila.</span><span class="sxs-lookup"><span data-stu-id="5a43c-136">A transactional queue allows messages to be captured and delivered in a transaction and then stored durably in the queue.</span></span> <span data-ttu-id="5a43c-137">As mensagens enviadas para uma fila transacional são transferidas exatamente uma vez em ordem.</span><span class="sxs-lookup"><span data-stu-id="5a43c-137">Messages sent to a transactional queue are transferred exactly once in order.</span></span> <span data-ttu-id="5a43c-138">Você pode usar uma fila não transacional para enviar mensagens voláteis e duráveis.</span><span class="sxs-lookup"><span data-stu-id="5a43c-138">You can use a non-transactional queue to send both volatile and durable messages.</span></span> <span data-ttu-id="5a43c-139">Uma mensagem enviada para uma fila não transacional não possui garantias de transferência confiáveis; assim, as mensagens podem ser perdidas.</span><span class="sxs-lookup"><span data-stu-id="5a43c-139">A message sent to a non-transactional queue does not carry any reliable transfer assurances; thus, messages can be lost.</span></span>  
  
 <span data-ttu-id="5a43c-140">As filas mSMQ também podem ser protegidas usando uma identidade do Windows registrada no serviço de diretório do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5a43c-140">MSMQ queues can also be secured using a Windows identity registered with the Active Directory directory service.</span></span> <span data-ttu-id="5a43c-141">Ao instalar o MSMQ, você pode instalar a integração do Active Directory, que exige que o computador faça parte de uma rede de domínio do Windows.</span><span class="sxs-lookup"><span data-stu-id="5a43c-141">When installing MSMQ, you can install Active Directory integration, which requires the computer to be part of a Windows domain network.</span></span>  
  
 <span data-ttu-id="5a43c-142">Para obter mais informações sobre o MSMQ, consulte [Instalação de fila de mensagens (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md).</span><span class="sxs-lookup"><span data-stu-id="5a43c-142">For more information about MSMQ, see [Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md).</span></span>  
  
### <a name="netmsmqbinding"></a><span data-ttu-id="5a43c-143">NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="5a43c-143">NetMsmqBinding</span></span>  
 <span data-ttu-id="5a43c-144">O [ \<netMsmqBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) é o WCF de vinculação enfileirado que fornece dois pontos finais do WCF para se comunicar usando o MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5a43c-144">The [\<netMsmqBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) is the queued binding WCF provides for two WCF endpoints to communicate using MSMQ.</span></span> <span data-ttu-id="5a43c-145">A vinculação, portanto, expõe propriedades específicas do MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5a43c-145">The binding, therefore, exposes properties that are specific to MSMQ.</span></span> <span data-ttu-id="5a43c-146">No entanto, nem todas as características e `NetMsmqBinding`propriedades do MSMQ estão expostas no .</span><span class="sxs-lookup"><span data-stu-id="5a43c-146">However, not all MSMQ features and properties are exposed in the `NetMsmqBinding`.</span></span> <span data-ttu-id="5a43c-147">O `NetMsmqBinding` compacto é projetado com um conjunto ideal de recursos que a maioria dos clientes deve encontrar suficiente.</span><span class="sxs-lookup"><span data-stu-id="5a43c-147">The compact `NetMsmqBinding` is designed with an optimal set of features that most customers should find sufficient.</span></span>  
  
 <span data-ttu-id="5a43c-148">O `NetMsmqBinding` manifesto dos conceitos centrais de fila discutidos até agora na forma de propriedades nas vinculações.</span><span class="sxs-lookup"><span data-stu-id="5a43c-148">The `NetMsmqBinding` manifests the core queuing concepts discussed thus far in the form of properties on the bindings.</span></span> <span data-ttu-id="5a43c-149">Essas propriedades, por sua vez, comunicam ao MSMQ como transferir e entregar as mensagens.</span><span class="sxs-lookup"><span data-stu-id="5a43c-149">These properties, in turn, communicate to MSMQ how to transfer and deliver the messages.</span></span> <span data-ttu-id="5a43c-150">A discussão das categorias de propriedade está nas seguintes seções.</span><span class="sxs-lookup"><span data-stu-id="5a43c-150">A discussion of the property categories is in the following sections.</span></span> <span data-ttu-id="5a43c-151">Para obter mais informações, consulte os tópicos conceituais que descrevem as propriedades específicas de forma mais completa.</span><span class="sxs-lookup"><span data-stu-id="5a43c-151">For more information, see the conceptual topics that describe specific properties more completely.</span></span>  
  
#### <a name="exactlyonce-and-durable-properties"></a><span data-ttu-id="5a43c-152">Exatamenteonce e Propriedades Duráveis</span><span class="sxs-lookup"><span data-stu-id="5a43c-152">ExactlyOnce and Durable Properties</span></span>  
 <span data-ttu-id="5a43c-153">As `ExactlyOnce` `Durable` propriedades e afetam a forma como as mensagens são transferidas entre filas:</span><span class="sxs-lookup"><span data-stu-id="5a43c-153">The `ExactlyOnce` and `Durable` properties affect how messages are transferred between queues:</span></span>  
  
- <span data-ttu-id="5a43c-154">`ExactlyOnce`: Quando `true` definido como (o padrão), o canal enfileirado garante que a mensagem, se entregue, não seja duplicada.</span><span class="sxs-lookup"><span data-stu-id="5a43c-154">`ExactlyOnce`: When set to `true` (the default), the queued channel ensures that the message, if delivered, is not duplicated.</span></span> <span data-ttu-id="5a43c-155">Também garante que a mensagem não seja perdida.</span><span class="sxs-lookup"><span data-stu-id="5a43c-155">It also ensures that the message is not lost.</span></span> <span data-ttu-id="5a43c-156">Se a mensagem não puder ser entregue ou a mensagem Time-To Live expirar antes que a mensagem possa ser entregue, a mensagem falhada, juntamente com a razão da falha de entrega, será gravada em uma fila de letras mortas.</span><span class="sxs-lookup"><span data-stu-id="5a43c-156">If the message cannot be delivered, or the message Time-To Live expires before the message can be delivered, the failed message along with the delivery failure reason is recorded in a dead-letter queue.</span></span> <span data-ttu-id="5a43c-157">Quando configurado para `false`, o canal enfileirado faz um esforço para transferir a mensagem.</span><span class="sxs-lookup"><span data-stu-id="5a43c-157">When set to `false`, the queued channel makes an effort to transfer the message.</span></span> <span data-ttu-id="5a43c-158">Neste caso, você pode escolher opcionalmente uma fila de letras mortas.</span><span class="sxs-lookup"><span data-stu-id="5a43c-158">In this case, you can optionally choose a dead-letter queue.</span></span>  
  
- <span data-ttu-id="5a43c-159">`Durable:`Quando definido `true` como (o padrão), o canal enfileirado garante que o MSMQ armate a mensagem duramente no disco.</span><span class="sxs-lookup"><span data-stu-id="5a43c-159">`Durable:` When set to `true` (the default), the queued channel ensures that MSMQ stores the message durably on disk.</span></span> <span data-ttu-id="5a43c-160">Assim, se o serviço MSMQ parar e reiniciar, as mensagens no disco serão transferidas para a fila de destino ou entregues ao serviço.</span><span class="sxs-lookup"><span data-stu-id="5a43c-160">Thus, if the MSMQ service were to stop and restart, the messages on disk is transferred to the target queue or delivered to the service.</span></span> <span data-ttu-id="5a43c-161">Quando `false`configuradas, as mensagens são armazenadas em armazenamento volátil e são perdidas ao parar e reiniciar o serviço MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5a43c-161">When set to `false`, the messages are stored in volatile store and are lost on stopping and restarting the MSMQ service.</span></span>  
  
 <span data-ttu-id="5a43c-162">Para `ExactlyOnce` uma transferência confiável, o MSMQ requer que a fila seja transacional.</span><span class="sxs-lookup"><span data-stu-id="5a43c-162">For `ExactlyOnce` reliable transfer, MSMQ requires the queue to be transactional.</span></span> <span data-ttu-id="5a43c-163">Além disso, o MSMQ requer uma transação para ler a partir de uma fila transacional.</span><span class="sxs-lookup"><span data-stu-id="5a43c-163">Also, MSMQ requires a transaction to read from a transactional queue.</span></span> <span data-ttu-id="5a43c-164">Como tal, ao `NetMsmqBinding`usar o , lembre-se de que `ExactlyOnce` uma transação é necessária para enviar ou receber mensagens quando estiver definida para `true`.</span><span class="sxs-lookup"><span data-stu-id="5a43c-164">As such, when you use the `NetMsmqBinding`, remember that a transaction is required to send or receive messages when `ExactlyOnce` is set to `true`.</span></span> <span data-ttu-id="5a43c-165">Da mesma forma, o MSMQ exige que a fila não seja transacional para garantias de melhor esforço, como quando `ExactlyOnce` é `false` e para mensagens voláteis.</span><span class="sxs-lookup"><span data-stu-id="5a43c-165">Similarly, MSMQ requires the queue to be non-transactional for best-effort assurances, such as when `ExactlyOnce` is `false` and for volatile messaging.</span></span> <span data-ttu-id="5a43c-166">Assim, ao `ExactlyOnce` `false` definir ou `false`durável para , você não pode enviar ou receber usando uma transação.</span><span class="sxs-lookup"><span data-stu-id="5a43c-166">Thus, when setting `ExactlyOnce` to `false` or durable to `false`, you cannot send or receive using a transaction.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5a43c-167">Certifique-se de que a fila correta (transacional ou não transacional) seja criada com base nas configurações nas vinculações.</span><span class="sxs-lookup"><span data-stu-id="5a43c-167">Ensure that the correct queue (transactional or non-transactional) is created based on settings in the bindings.</span></span> <span data-ttu-id="5a43c-168">Se `ExactlyOnce` `true`for, use uma fila transacional; caso contrário, use uma fila não transacional.</span><span class="sxs-lookup"><span data-stu-id="5a43c-168">If `ExactlyOnce` is `true`, use a transactional queue; otherwise, use a non-transactional queue.</span></span>  
  
#### <a name="dead-letter-queue-properties"></a><span data-ttu-id="5a43c-169">Propriedades da fila de letras mortas</span><span class="sxs-lookup"><span data-stu-id="5a43c-169">Dead-Letter Queue Properties</span></span>  
 <span data-ttu-id="5a43c-170">A fila de letras mortas é usada para armazenar mensagens que falham na entrega.</span><span class="sxs-lookup"><span data-stu-id="5a43c-170">The dead-letter queue is used to store messages that fail delivery.</span></span> <span data-ttu-id="5a43c-171">O usuário pode escrever uma lógica de compensação que lê mensagens fora da fila de letras mortas.</span><span class="sxs-lookup"><span data-stu-id="5a43c-171">The user can write compensating logic that reads messages out of the dead-letter queue.</span></span>  
  
 <span data-ttu-id="5a43c-172">Muitos sistemas de fila fornecem uma fila de letras mortas em todo o sistema.</span><span class="sxs-lookup"><span data-stu-id="5a43c-172">Many queuing systems provide for a system-wide dead-letter queue.</span></span> <span data-ttu-id="5a43c-173">O MSMQ fornece uma fila de letras mortas não transacionais em todo o sistema para mensagens que falham na entrega de filas não transacionais e uma fila de letras mortas transacionais em todo o sistema para mensagens que falham na entrega de filas transacionais.</span><span class="sxs-lookup"><span data-stu-id="5a43c-173">MSMQ provides a system-wide non-transactional dead-letter queue for messages that fail delivery to non-transactional queues and a system-wide transactional dead-letter queue for messages that fail delivery to transactional queues.</span></span>  
  
 <span data-ttu-id="5a43c-174">Se vários clientes que enviam mensagens para diferentes filas de destino compartilharem o serviço MSMQ, todas as mensagens enviadas pelos clientes vão para a mesma fila de letras mortas.</span><span class="sxs-lookup"><span data-stu-id="5a43c-174">If multiple clients sending messages to different target queues share the MSMQ service, all messages sent by the clients go to the same dead-letter queue.</span></span> <span data-ttu-id="5a43c-175">Isso nem sempre é preferível.</span><span class="sxs-lookup"><span data-stu-id="5a43c-175">This is not always preferable.</span></span> <span data-ttu-id="5a43c-176">Para um melhor isolamento, o WCF e o MSMQ no Windows Vista fornecem uma fila de letras mortas personalizada (ou fila de letra morta específica do aplicativo) que o usuário pode especificar para armazenar mensagens que falham na entrega.</span><span class="sxs-lookup"><span data-stu-id="5a43c-176">For better isolation, WCF and MSMQ in Windows Vista provide a custom dead-letter queue (or application-specific dead-letter queue) that the user can specify to store messages that fail delivery.</span></span> <span data-ttu-id="5a43c-177">Portanto, clientes diferentes não compartilham a mesma fila de letras mortas.</span><span class="sxs-lookup"><span data-stu-id="5a43c-177">Therefore, different clients do not share the same dead-letter queue.</span></span>  
  
 <span data-ttu-id="5a43c-178">A vinculação tem duas propriedades de interesse:</span><span class="sxs-lookup"><span data-stu-id="5a43c-178">The binding has two properties of interest:</span></span>  
  
- <span data-ttu-id="5a43c-179">`DeadLetterQueue`: Esta propriedade é uma enumeração que indica se uma fila de letras mortas é solicitada.</span><span class="sxs-lookup"><span data-stu-id="5a43c-179">`DeadLetterQueue`: This property is an enumeration that indicates whether a dead-letter queue is requested.</span></span> <span data-ttu-id="5a43c-180">A enumeração também contém o tipo de fila de letras mortas, se uma for solicitada.</span><span class="sxs-lookup"><span data-stu-id="5a43c-180">The enumeration also contains the kind of dead-letter queue, if one is requested.</span></span> <span data-ttu-id="5a43c-181">Os valores são `None`, `System` e `Custom`.</span><span class="sxs-lookup"><span data-stu-id="5a43c-181">The values are `None`, `System`, and `Custom`.</span></span> <span data-ttu-id="5a43c-182">Para obter mais informações sobre a interpretação dessas propriedades, consulte [Usando filas de letras mortas para lidar com falhas de transferência de mensagens](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</span><span class="sxs-lookup"><span data-stu-id="5a43c-182">For more information about the interpretation of these properties, see [Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</span></span>  
  
- <span data-ttu-id="5a43c-183">`CustomDeadLetterQueue`: Esta propriedade é o endereço URI (Uniform Resource Identifier, identificador de recursos uniformes) da fila de letras mortas específica do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5a43c-183">`CustomDeadLetterQueue`: This property is the Uniform Resource Identifier (URI) address of the application-specific dead-letter queue.</span></span> <span data-ttu-id="5a43c-184">Isso é `DeadLetterQueue`necessário se .`Custom`</span><span class="sxs-lookup"><span data-stu-id="5a43c-184">This is required if `DeadLetterQueue`.`Custom`</span></span> <span data-ttu-id="5a43c-185">é escolhido.</span><span class="sxs-lookup"><span data-stu-id="5a43c-185">is chosen.</span></span>  
  
#### <a name="poison-message-handling-properties"></a><span data-ttu-id="5a43c-186">Propriedades de manuseio de mensagens venenosas</span><span class="sxs-lookup"><span data-stu-id="5a43c-186">Poison Message Handling properties</span></span>  
 <span data-ttu-id="5a43c-187">Quando o serviço lê mensagens da fila de destino em uma transação, o serviço pode não processar a mensagem por várias razões.</span><span class="sxs-lookup"><span data-stu-id="5a43c-187">When the service reads messages from the target queue under a transaction, the service may fail to process the message for various reasons.</span></span> <span data-ttu-id="5a43c-188">A mensagem é então colocada de volta na fila para ser lida novamente.</span><span class="sxs-lookup"><span data-stu-id="5a43c-188">The message is then put back into the queue to be read again.</span></span> <span data-ttu-id="5a43c-189">Para lidar com mensagens que falham repetidamente, um conjunto de propriedades de manuseio de mensagens venenosas pode ser configurado na vinculação.</span><span class="sxs-lookup"><span data-stu-id="5a43c-189">To deal with messages that fail repeatedly, a set of poison-message handling properties can be configured in the binding.</span></span> <span data-ttu-id="5a43c-190">Existem quatro `ReceiveRetryCount`propriedades: `RetryCycleDelay`, `ReceiveErrorHandling` `MaxRetryCycles`e .</span><span class="sxs-lookup"><span data-stu-id="5a43c-190">There are four properties: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="5a43c-191">Para obter mais informações sobre essas propriedades, consulte [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="5a43c-191">For more information about these properties, see [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span></span>  
  
#### <a name="security-properties"></a><span data-ttu-id="5a43c-192">Propriedades de segurança</span><span class="sxs-lookup"><span data-stu-id="5a43c-192">Security Properties</span></span>  
 <span data-ttu-id="5a43c-193">O MSMQ expõe seu próprio modelo de segurança, como listas de controle de acesso (ACLs) em uma fila ou envio de mensagens autenticadas.</span><span class="sxs-lookup"><span data-stu-id="5a43c-193">MSMQ exposes its own security model, such as access control lists (ACLs) on a queue or sending authenticated messages.</span></span> <span data-ttu-id="5a43c-194">O `NetMsmqBinding` expõe essas propriedades de segurança como parte de suas configurações de segurança de transporte.</span><span class="sxs-lookup"><span data-stu-id="5a43c-194">The `NetMsmqBinding` exposes these security properties as part of its transport security settings.</span></span> <span data-ttu-id="5a43c-195">Existem duas propriedades na vinculação `MsmqAuthenticationMode` `MsmqProtectionLevel`para segurança de transporte: e .</span><span class="sxs-lookup"><span data-stu-id="5a43c-195">There are two properties in the binding for transport security: `MsmqAuthenticationMode` and `MsmqProtectionLevel`.</span></span> <span data-ttu-id="5a43c-196">As configurações nessas propriedades dependem de como o MSMQ está configurado.</span><span class="sxs-lookup"><span data-stu-id="5a43c-196">Settings in these properties depend on how MSMQ is configured.</span></span> <span data-ttu-id="5a43c-197">Para obter mais informações, consulte [Protegendo mensagens usando a segurança de transporte](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="5a43c-197">For more information, see [Securing Messages Using Transport Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span></span>  
  
 <span data-ttu-id="5a43c-198">Além da segurança de transporte, a própria mensagem SOAP real pode ser protegida usando a segurança da mensagem.</span><span class="sxs-lookup"><span data-stu-id="5a43c-198">In addition to transport security, the actual SOAP message itself can be secured using message security.</span></span> <span data-ttu-id="5a43c-199">Para obter mais informações, consulte [Proteger mensagens usando a segurança de mensagens](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md).</span><span class="sxs-lookup"><span data-stu-id="5a43c-199">For more information, see [Securing Messages Using Message Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md).</span></span>  
  
 <span data-ttu-id="5a43c-200">`MsmqTransportSecurity`também expõe duas `MsmqEncryptionAlgorithm` propriedades, e `MsmqHashAlgorithm`.</span><span class="sxs-lookup"><span data-stu-id="5a43c-200">`MsmqTransportSecurity` also exposes two properties, `MsmqEncryptionAlgorithm` and `MsmqHashAlgorithm`.</span></span> <span data-ttu-id="5a43c-201">Estas são enumerações de diferentes algoritmos para escolher para a criptografia de transferência de fila para fila de mensagens e hashing das assinaturas.</span><span class="sxs-lookup"><span data-stu-id="5a43c-201">These are enumerations of different algorithms to choose for queue-to-queue transfer encryption of messages and hashing of the signatures.</span></span>  
  
#### <a name="other-properties"></a><span data-ttu-id="5a43c-202">Outras propriedades</span><span class="sxs-lookup"><span data-stu-id="5a43c-202">Other Properties</span></span>  
 <span data-ttu-id="5a43c-203">Além das propriedades anteriores, outras propriedades específicas do MSMQ expostas na vinculação incluem:</span><span class="sxs-lookup"><span data-stu-id="5a43c-203">In addition to the preceding properties, other MSMQ-specific properties exposed in the binding include:</span></span>  
  
- <span data-ttu-id="5a43c-204">`UseSourceJournal`: Uma propriedade para indicar que o diário de origem está ligado.</span><span class="sxs-lookup"><span data-stu-id="5a43c-204">`UseSourceJournal`: A property to indicate that source journaling is turned on.</span></span> <span data-ttu-id="5a43c-205">O diário de origem é um recurso MSMQ que mantém o controle das mensagens que foram transmitidas com sucesso da fila de transmissão.</span><span class="sxs-lookup"><span data-stu-id="5a43c-205">Source journaling is an MSMQ feature that keeps track of messages that have been successfully transmitted from the transmission queue.</span></span>  
  
- <span data-ttu-id="5a43c-206">`UseMsmqTracing`: Uma propriedade para indicar que o rastreamento MSMQ está ligado.</span><span class="sxs-lookup"><span data-stu-id="5a43c-206">`UseMsmqTracing`: A property to indicate that MSMQ tracing is turned on.</span></span> <span data-ttu-id="5a43c-207">O rastreamento do MSMQ envia mensagens de relatório para uma fila de relatórios cada vez que uma mensagem sai ou chega a uma máquina hospedando um gerenciador de fila smq.</span><span class="sxs-lookup"><span data-stu-id="5a43c-207">MSMQ tracing sends report messages to a report queue each time a message leaves or arrives at a machine hosting an MSMQ queue manager.</span></span>  
  
- <span data-ttu-id="5a43c-208">`QueueTransferProtocol`: Uma enumeração do protocolo a ser usado para transferências de mensagens de fila para fila.</span><span class="sxs-lookup"><span data-stu-id="5a43c-208">`QueueTransferProtocol`: An enumeration of the protocol to use for queue-to-queue message transfers.</span></span> <span data-ttu-id="5a43c-209">O MSMQ implementa um protocolo nativo de transferência de fila para fila e um protocolo baseado em SOAP chamado SOAP Reliable Messaging Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="5a43c-209">MSMQ implements a native queue-to-queue transfer protocol and a SOAP-based protocol called SOAP Reliable Messaging Protocol (SRMP).</span></span> <span data-ttu-id="5a43c-210">O SRMP é usado ao usar o transporte HTTP para transferências de fila para fila.</span><span class="sxs-lookup"><span data-stu-id="5a43c-210">SRMP is used when using HTTP transport for queue-to-queue transfers.</span></span> <span data-ttu-id="5a43c-211">O seguro SRMP é usado ao usar HTTPS para transferências de fila para fila.</span><span class="sxs-lookup"><span data-stu-id="5a43c-211">SRMP secure is used when using HTTPS for queue-to-queue transfers.</span></span>  
  
- <span data-ttu-id="5a43c-212">`UseActiveDirectory`: Um valor booleano para indicar se o Diretório Ativo deve ser usado para resolução de endereços de fila.</span><span class="sxs-lookup"><span data-stu-id="5a43c-212">`UseActiveDirectory`: A Boolean value to indicate whether the Active Directory must be used for queue address resolution.</span></span> <span data-ttu-id="5a43c-213">Por padrão, isso está desligado.</span><span class="sxs-lookup"><span data-stu-id="5a43c-213">By default, this is off.</span></span> <span data-ttu-id="5a43c-214">Para obter mais informações, consulte [Pontos finais de serviço e endereçamento de fila](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md).</span><span class="sxs-lookup"><span data-stu-id="5a43c-214">For more information, see [Service Endpoints and Queue Addressing](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md).</span></span>  
  
### <a name="msmqintegrationbinding"></a><span data-ttu-id="5a43c-215">MsmqIntegrationBinding</span><span class="sxs-lookup"><span data-stu-id="5a43c-215">MsmqIntegrationBinding</span></span>  
 <span data-ttu-id="5a43c-216">O `MsmqIntegrationBinding` é usado quando você deseja que um ponto final do WCF se comunique com um aplicativo MSMQ existente escrito em C, C++, COM ou APIs do System.Messaging.</span><span class="sxs-lookup"><span data-stu-id="5a43c-216">The `MsmqIntegrationBinding` is used when you want a WCF endpoint to communicate with an existing MSMQ application written in C, C++, COM, or System.Messaging APIs.</span></span>  
  
 <span data-ttu-id="5a43c-217">As propriedades de ligação `NetMsmqBinding`são as mesmas para .</span><span class="sxs-lookup"><span data-stu-id="5a43c-217">The binding properties are the same as for `NetMsmqBinding`.</span></span> <span data-ttu-id="5a43c-218">No entanto, as seguintes diferenças se aplicam:</span><span class="sxs-lookup"><span data-stu-id="5a43c-218">However, the following differences apply:</span></span>  
  
- <span data-ttu-id="5a43c-219">O contrato `MsmqIntegrationBinding` de operação é restrito a <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> tomar um único parâmetro do tipo onde o parâmetro tipo é o tipo de corpo.</span><span class="sxs-lookup"><span data-stu-id="5a43c-219">The operation contract for `MsmqIntegrationBinding` is restricted to taking a single parameter of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> where the type parameter is the body type.</span></span>  
  
- <span data-ttu-id="5a43c-220">Grande parte das propriedades de mensagem nativa <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> do MSMQ são expostas no para uso.</span><span class="sxs-lookup"><span data-stu-id="5a43c-220">Much of MSMQ native message properties are exposed in the <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> for use.</span></span>  
  
- <span data-ttu-id="5a43c-221">Para ajudar na serialização e desserialização do corpo da mensagem, serializadores como XML e ActiveX são fornecidos.</span><span class="sxs-lookup"><span data-stu-id="5a43c-221">To help with serialization and deserialization of the message body, serializers such as XML and ActiveX are provided.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="5a43c-222">Exemplo de código</span><span class="sxs-lookup"><span data-stu-id="5a43c-222">Sample Code</span></span>  
 <span data-ttu-id="5a43c-223">Para obter instruções passo a passo sobre como escrever serviços WCF que usam mSMQ, consulte os seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="5a43c-223">For step by step instructions on how to write WCF services that use MSMQ see the following topics:</span></span>  
  
- [<span data-ttu-id="5a43c-224">Como trocar mensagens com pontos de extremidade do WCF e aplicativos de enfileiramento de mensagens</span><span class="sxs-lookup"><span data-stu-id="5a43c-224">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
  
- [<span data-ttu-id="5a43c-225">Como fazer intercâmbio de mensagens em fila com pontos de extremidade do WCF</span><span class="sxs-lookup"><span data-stu-id="5a43c-225">How to: Exchange Queued Messages with WCF Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)  
  
 <span data-ttu-id="5a43c-226">Para obter uma amostra de código concluída ilustrando o uso do MSMQ no WCF, consulte os seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="5a43c-226">For a completed code sample illustrating the use of MSMQ in WCF see the following topics:</span></span>  
  
- [<span data-ttu-id="5a43c-227">Associação transacionada do MSMQ</span><span class="sxs-lookup"><span data-stu-id="5a43c-227">Transacted MSMQ Binding</span></span>](../../../../docs/framework/wcf/samples/transacted-msmq-binding.md)  
  
- [<span data-ttu-id="5a43c-228">Comunicação em fila volátil</span><span class="sxs-lookup"><span data-stu-id="5a43c-228">Volatile Queued Communication</span></span>](../../../../docs/framework/wcf/samples/volatile-queued-communication.md)  
  
- [<span data-ttu-id="5a43c-229">Filas de mensagens de inatividade</span><span class="sxs-lookup"><span data-stu-id="5a43c-229">Dead Letter Queues</span></span>](../../../../docs/framework/wcf/samples/dead-letter-queues.md)  
  
- [<span data-ttu-id="5a43c-230">Sessões e filas</span><span class="sxs-lookup"><span data-stu-id="5a43c-230">Sessions and Queues</span></span>](../../../../docs/framework/wcf/samples/sessions-and-queues.md)  
  
- [<span data-ttu-id="5a43c-231">Comunicação bidirecional</span><span class="sxs-lookup"><span data-stu-id="5a43c-231">Two-Way Communication</span></span>](../../../../docs/framework/wcf/samples/two-way-communication.md)
  
- [<span data-ttu-id="5a43c-232">SRMP</span><span class="sxs-lookup"><span data-stu-id="5a43c-232">SRMP</span></span>](../../../../docs/framework/wcf/samples/srmp.md)  
  
- [<span data-ttu-id="5a43c-233">Segurança de mensagem através do enfileiramento de mensagem</span><span class="sxs-lookup"><span data-stu-id="5a43c-233">Message Security over Message Queuing</span></span>](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)  
  
## <a name="see-also"></a><span data-ttu-id="5a43c-234">Confira também</span><span class="sxs-lookup"><span data-stu-id="5a43c-234">See also</span></span>

- [<span data-ttu-id="5a43c-235">Pontos de extremidade de serviço e endereçamento de fila</span><span class="sxs-lookup"><span data-stu-id="5a43c-235">Service Endpoints and Queue Addressing</span></span>](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md)
- [<span data-ttu-id="5a43c-236">Hospedagem na Web de um aplicativo na fila</span><span class="sxs-lookup"><span data-stu-id="5a43c-236">Web Hosting a Queued Application</span></span>](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md)
