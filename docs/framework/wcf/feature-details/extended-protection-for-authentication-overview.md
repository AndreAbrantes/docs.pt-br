---
title: Proteção estendida para visão geral de autenticação
ms.date: 03/30/2017
ms.assetid: 3d2ceffe-a7bf-4bd9-a5a2-9406423bd7f8
ms.openlocfilehash: b171644c3869df119f09ee4815a06563c4f2c160
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/08/2019
ms.locfileid: "59183671"
---
# <a name="extended-protection-for-authentication-overview"></a><span data-ttu-id="e1ea7-102">Proteção estendida para visão geral de autenticação</span><span class="sxs-lookup"><span data-stu-id="e1ea7-102">Extended Protection for Authentication Overview</span></span>
<span data-ttu-id="e1ea7-103">Proteção estendida para autenticação ajuda a proteger contra ataques de (MITM) man-in-the-middle, nos quais um invasor intercepta as credenciais de um cliente e encaminha-as para um servidor.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-103">Extended Protection for Authentication helps protect against man-in-the-middle (MITM) attacks, in which an attacker intercepts a client’s credentials and forwards them to a server.</span></span>  
  
 <span data-ttu-id="e1ea7-104">Considere um cenário com três participantes: um cliente, o servidor e o invasor.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-104">Consider a scenario with three participants: a client, server, and attacker.</span></span> <span data-ttu-id="e1ea7-105">O servidor tem a URL `https://server`, enquanto que o invasor tem a URL `https://attacker`.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-105">The server has the URL `https://server`, whereas the attacker has the URL `https://attacker`.</span></span> <span data-ttu-id="e1ea7-106">O invasor truques o cliente para acessar o invasor como se fosse o servidor.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-106">The attacker tricks the client into accessing the attacker as if it were the server.</span></span> <span data-ttu-id="e1ea7-107">O invasor, em seguida, envia uma solicitação ao servidor.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-107">The attacker then sends a request to the server.</span></span> <span data-ttu-id="e1ea7-108">Se o invasor está tentando acessar um recurso seguro, o servidor responde ao invasor com um cabeçalho WWW-Authenticate.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-108">If the attacker is trying to access a secure resource, the server replies to the attacker with a WWW-Authenticate header.</span></span> <span data-ttu-id="e1ea7-109">O invasor não tem as informações de autenticação, portanto, ele envia o cabeçalho WWW-Authenticate logon no cliente.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-109">The attacker does not have the authentication information, so it sends the WWW-Authenticate header on to the client.</span></span> <span data-ttu-id="e1ea7-110">O cliente envia o cabeçalho de autorização para o invasor e o invasor envia o cabeçalho de logon no servidor e obtém acesso aos recursos seguros usando as credenciais do cliente.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-110">The client sends the Authorization header to the attacker, and the attacker sends the header on to the server and gets access to the secure resources using the client’s credentials.</span></span>  
  
 <span data-ttu-id="e1ea7-111">Atualmente, quando um aplicativo cliente se autentica no servidor usando Kerberos, Digest ou NTLM usando HTTPS, primeiro é estabelecer um canal de segurança de nível de transporte (TLS) e a autenticação é feita usando este canal.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-111">Currently, when a client application authenticates itself to the server using Kerberos, Digest, or NTLM using HTTPS, a Transport Level Security (TLS) channel is first established and authentication takes place using this channel.</span></span> <span data-ttu-id="e1ea7-112">No entanto, não há nenhuma associação entre a chave de sessão gerada pelo protocolo (SSL) e a chave de sessão que é gerada durante a autenticação.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-112">However, there is no binding between the session key generated by Secure Sockets Layer (SSL) and the session key that is generated during authentication.</span></span> <span data-ttu-id="e1ea7-113">Assim, no cenário anterior, se a comunicação ocorre via um TLS (por exemplo, um canal HTTPS), existem dois canais SSL criados: um entre o cliente e o invasor e outro entre o invasor e o servidor.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-113">So, in the previous scenario, if the communication takes places over a TLS (such as an HTTPS channel), there are two SSL channels created: one between the client and the attacker, and another between the attacker and the server.</span></span> <span data-ttu-id="e1ea7-114">As credenciais do cliente são enviadas do cliente ao servidor pela primeira vez no canal SSL entre o cliente e o invasor e, em seguida, no canal entre o invasor e o servidor.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-114">The client’s credentials are sent from the client to the server first over the SSL channel between the client and the attacker and then over the channel between the attacker and the server.</span></span> <span data-ttu-id="e1ea7-115">Depois que as credenciais do cliente acessar o servidor, o servidor verifica as credenciais sem detectar que o canal pelo qual essas credenciais foram enviadas originou-se com o invasor e não pelo cliente.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-115">Once the client’s credentials reach the server, the server verifies the credentials without detecting that the channel over which those credentials were sent originated with the attacker and not the client.</span></span>  
  
 <span data-ttu-id="e1ea7-116">A solução é usar um canal externo protegido por TLS e um canal interno autenticado pelo cliente e para passar um canal de associação de Token (CBT) para o servidor.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-116">The solution is to use a TLS-secured outer channel and a client-authenticated inner channel, and to pass a Channel Binding Token (CBT) to the server.</span></span> <span data-ttu-id="e1ea7-117">O CBT é uma propriedade do canal externo protegido por TLS e é usado para associar o canal externo para uma conversa sobre o canal interno autenticado pelo cliente.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-117">The CBT is a property of the TLS-secured outer channel, and is used to bind the outer channel to a conversation over the client-authenticated inner channel.</span></span>  
  
 <span data-ttu-id="e1ea7-118">No cenário anterior, o CBT do canal TLS cliente invasor é mesclado com as informações de autorização que são enviadas ao servidor.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-118">In the previous scenario, the CBT of the client-attacker TLS channel is merged with the authorization information that is sent to the server.</span></span> <span data-ttu-id="e1ea7-119">Um servidor compatível com o CBT compara o CBT contido nas informações de autenticação de cliente, que corresponde ao canal de cliente invasor, para o CBT anexado para o canal de servidor do invasor.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-119">A CBT-aware server compares the CBT contained in the client authentication information, which corresponds to the client-attacker channel, to the CBT attached to the attacker-server channel.</span></span> <span data-ttu-id="e1ea7-120">Um CBT é específico para o destino do canal, portanto o CBT de invasor cliente não coincide com o CBT de invasor-server.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-120">A CBT is specific to a channel’s destination, so the client-attacker CBT does not match the attacker-server CBT.</span></span> <span data-ttu-id="e1ea7-121">Isso permite que o servidor de detectar um ataque MITM e se recusar a solicitação de autenticação.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-121">This lets the server detect the MITM attack and refuse the authentication request.</span></span>  
  
 <span data-ttu-id="e1ea7-122">O lado do cliente não exige qualquer parâmetro de configuração.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-122">The client side does not require any configuration setting.</span></span> <span data-ttu-id="e1ea7-123">Depois que o cliente foi atualizado para passar o CBT para o servidor, ele sempre faz isso.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-123">Once the client has been updated to pass the CBT to the server, it always does so.</span></span> <span data-ttu-id="e1ea7-124">Se o servidor também foi atualizado, ele pode ser configurado para usar o CBT ou ignorá-lo.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-124">If the server has also been updated, it can be configured to use the CBT or ignore it.</span></span> <span data-ttu-id="e1ea7-125">Se não tiver sido atualizado, ignorá-la.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-125">If it has not been updated, it ignores it.</span></span>  
  
 <span data-ttu-id="e1ea7-126">O servidor pode ter os seguintes níveis de proteção:</span><span class="sxs-lookup"><span data-stu-id="e1ea7-126">The server can have the following levels of protection:</span></span>  
  
-   <span data-ttu-id="e1ea7-127">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-127">None.</span></span> <span data-ttu-id="e1ea7-128">Nenhuma validação de associação de canal é executada.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-128">No channel binding validation is performed.</span></span> <span data-ttu-id="e1ea7-129">Esse é o comportamento de todos os servidores que não foram atualizados.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-129">This is the behavior of all servers that have not been updated.</span></span>  
  
-   <span data-ttu-id="e1ea7-130">Parcial.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-130">Partial.</span></span> <span data-ttu-id="e1ea7-131">Todos os clientes que foram atualizados devem fornecer informações de associação de canal para o servidor.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-131">All clients that have been updated must provide channel binding information to the server.</span></span> <span data-ttu-id="e1ea7-132">Os clientes que não foram atualizados não é necessário fazê-lo.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-132">Clients that have not been updated do not have to do so.</span></span> <span data-ttu-id="e1ea7-133">Isso é uma opção intermediária que permite a compatibilidade de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-133">This is an intermediate option that allows for application compatibility.</span></span>  
  
-   <span data-ttu-id="e1ea7-134">Completo.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-134">Full.</span></span> <span data-ttu-id="e1ea7-135">Todos os clientes devem fornecer informações de associação de canal.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-135">All clients must provide channel binding information.</span></span> <span data-ttu-id="e1ea7-136">O servidor rejeita solicitações de autenticação de clientes que não faça isso.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-136">The server rejects authentication requests from clients that do not do so.</span></span>  
  
 <span data-ttu-id="e1ea7-137">Para obter mais informações, consulte o exemplo de proteção de CBT/estendida Win7.</span><span class="sxs-lookup"><span data-stu-id="e1ea7-137">For more information, see the Win7 CBT/Extended Protection sample.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e1ea7-138">Consulte também</span><span class="sxs-lookup"><span data-stu-id="e1ea7-138">See also</span></span>

- [<span data-ttu-id="e1ea7-139">Modelo de segurança do Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="e1ea7-139">Security Model for Windows Server App Fabric</span></span>](https://go.microsoft.com/fwlink/?LinkID=201279&clcid=0x409)
