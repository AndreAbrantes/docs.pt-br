---
title: Proteção estendida para visão geral de autenticação
ms.date: 03/30/2017
ms.assetid: 3d2ceffe-a7bf-4bd9-a5a2-9406423bd7f8
ms.openlocfilehash: 0537e6147a7b43dabcb4c3612fc58da11dfd4d6d
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96255540"
---
# <a name="extended-protection-for-authentication-overview"></a><span data-ttu-id="cb92e-102">Proteção estendida para visão geral de autenticação</span><span class="sxs-lookup"><span data-stu-id="cb92e-102">Extended Protection for Authentication Overview</span></span>

<span data-ttu-id="cb92e-103">Proteção Estendida para Autenticação ajuda a proteger contra ataques MITM (Man-in-the-Middle), nos quais um invasor intercepta as credenciais de um cliente e as encaminha para um servidor.</span><span class="sxs-lookup"><span data-stu-id="cb92e-103">Extended Protection for Authentication helps protect against man-in-the-middle (MITM) attacks, in which an attacker intercepts a client’s credentials and forwards them to a server.</span></span>  
  
 <span data-ttu-id="cb92e-104">Considere um cenário com três participantes: um cliente, servidor e invasor.</span><span class="sxs-lookup"><span data-stu-id="cb92e-104">Consider a scenario with three participants: a client, server, and attacker.</span></span> <span data-ttu-id="cb92e-105">O servidor tem a URL `https://server` , enquanto o invasor tem a URL `https://attacker` .</span><span class="sxs-lookup"><span data-stu-id="cb92e-105">The server has the URL `https://server`, whereas the attacker has the URL `https://attacker`.</span></span> <span data-ttu-id="cb92e-106">O invasor vaza o cliente para acessar o invasor como se fosse o servidor.</span><span class="sxs-lookup"><span data-stu-id="cb92e-106">The attacker tricks the client into accessing the attacker as if it were the server.</span></span> <span data-ttu-id="cb92e-107">Em seguida, o invasor envia uma solicitação ao servidor.</span><span class="sxs-lookup"><span data-stu-id="cb92e-107">The attacker then sends a request to the server.</span></span> <span data-ttu-id="cb92e-108">Se o invasor estiver tentando acessar um recurso seguro, o servidor responderá ao invasor com um cabeçalho WWW-Authenticate.</span><span class="sxs-lookup"><span data-stu-id="cb92e-108">If the attacker is trying to access a secure resource, the server replies to the attacker with a WWW-Authenticate header.</span></span> <span data-ttu-id="cb92e-109">O invasor não tem as informações de autenticação e, portanto, envia o cabeçalho de WWW-Authenticate para o cliente.</span><span class="sxs-lookup"><span data-stu-id="cb92e-109">The attacker does not have the authentication information, so it sends the WWW-Authenticate header on to the client.</span></span> <span data-ttu-id="cb92e-110">O cliente envia o cabeçalho de autorização para o invasor, e o invasor envia o cabeçalho para o servidor e obtém acesso aos recursos seguros usando as credenciais do cliente.</span><span class="sxs-lookup"><span data-stu-id="cb92e-110">The client sends the Authorization header to the attacker, and the attacker sends the header on to the server and gets access to the secure resources using the client’s credentials.</span></span>  
  
 <span data-ttu-id="cb92e-111">Atualmente, quando um aplicativo cliente se autentica no servidor usando Kerberos, Digest ou NTLM usando HTTPS, um canal de TLS (segurança de nível de transporte) é estabelecido primeiro e a autenticação ocorre usando esse canal.</span><span class="sxs-lookup"><span data-stu-id="cb92e-111">Currently, when a client application authenticates itself to the server using Kerberos, Digest, or NTLM using HTTPS, a Transport Level Security (TLS) channel is first established and authentication takes place using this channel.</span></span> <span data-ttu-id="cb92e-112">No entanto, não há nenhuma associação entre a chave de sessão gerada por protocolo SSL (SSL) e a chave de sessão que é gerada durante a autenticação.</span><span class="sxs-lookup"><span data-stu-id="cb92e-112">However, there is no binding between the session key generated by Secure Sockets Layer (SSL) and the session key that is generated during authentication.</span></span> <span data-ttu-id="cb92e-113">Portanto, no cenário anterior, se a comunicação assumir o lugar de um TLS (como um canal HTTPS), há dois canais SSL criados: um entre o cliente e o invasor e outro entre o invasor e o servidor.</span><span class="sxs-lookup"><span data-stu-id="cb92e-113">So, in the previous scenario, if the communication takes places over a TLS (such as an HTTPS channel), there are two SSL channels created: one between the client and the attacker, and another between the attacker and the server.</span></span> <span data-ttu-id="cb92e-114">As credenciais do cliente são enviadas do cliente para o servidor primeiro por meio do canal SSL entre o cliente e o invasor e, em seguida, pelo canal entre o invasor e o servidor.</span><span class="sxs-lookup"><span data-stu-id="cb92e-114">The client’s credentials are sent from the client to the server first over the SSL channel between the client and the attacker and then over the channel between the attacker and the server.</span></span> <span data-ttu-id="cb92e-115">Depois que as credenciais do cliente chegarem ao servidor, o servidor verificará as credenciais sem detectar que o canal pelo qual essas credenciais foram enviadas foi originado com o invasor e não o cliente.</span><span class="sxs-lookup"><span data-stu-id="cb92e-115">Once the client’s credentials reach the server, the server verifies the credentials without detecting that the channel over which those credentials were sent originated with the attacker and not the client.</span></span>  
  
 <span data-ttu-id="cb92e-116">A solução é usar um canal externo protegido por TLS e um canal interno autenticado pelo cliente e passar um token de associação de canal (CBT) para o servidor.</span><span class="sxs-lookup"><span data-stu-id="cb92e-116">The solution is to use a TLS-secured outer channel and a client-authenticated inner channel, and to pass a Channel Binding Token (CBT) to the server.</span></span> <span data-ttu-id="cb92e-117">O CBT é uma propriedade do canal externo protegido por TLS e é usado para associar o canal externo a uma conversa no canal interno autenticado pelo cliente.</span><span class="sxs-lookup"><span data-stu-id="cb92e-117">The CBT is a property of the TLS-secured outer channel, and is used to bind the outer channel to a conversation over the client-authenticated inner channel.</span></span>  
  
 <span data-ttu-id="cb92e-118">No cenário anterior, o CBT do canal do cliente-invasor TLS é mesclado com as informações de autorização que são enviadas para o servidor.</span><span class="sxs-lookup"><span data-stu-id="cb92e-118">In the previous scenario, the CBT of the client-attacker TLS channel is merged with the authorization information that is sent to the server.</span></span> <span data-ttu-id="cb92e-119">Um servidor com reconhecimento de CBT compara o CBT contido nas informações de autenticação do cliente, que corresponde ao canal do invasor do cliente, para o CBT conectado ao canal do servidor do invasor.</span><span class="sxs-lookup"><span data-stu-id="cb92e-119">A CBT-aware server compares the CBT contained in the client authentication information, which corresponds to the client-attacker channel, to the CBT attached to the attacker-server channel.</span></span> <span data-ttu-id="cb92e-120">Um CBT é específico para o destino de um canal, portanto, o CBT do invasor do cliente não corresponde ao invasor-servidor CBT.</span><span class="sxs-lookup"><span data-stu-id="cb92e-120">A CBT is specific to a channel’s destination, so the client-attacker CBT does not match the attacker-server CBT.</span></span> <span data-ttu-id="cb92e-121">Isso permite que o servidor detecte o ataque MITM e recuse a solicitação de autenticação.</span><span class="sxs-lookup"><span data-stu-id="cb92e-121">This lets the server detect the MITM attack and refuse the authentication request.</span></span>  
  
 <span data-ttu-id="cb92e-122">O lado do cliente não requer nenhuma definição de configuração.</span><span class="sxs-lookup"><span data-stu-id="cb92e-122">The client side does not require any configuration setting.</span></span> <span data-ttu-id="cb92e-123">Depois que o cliente tiver sido atualizado para passar o CBT para o servidor, ele sempre fará isso.</span><span class="sxs-lookup"><span data-stu-id="cb92e-123">Once the client has been updated to pass the CBT to the server, it always does so.</span></span> <span data-ttu-id="cb92e-124">Se o servidor também tiver sido atualizado, ele poderá ser configurado para usar o CBT ou ignorá-lo.</span><span class="sxs-lookup"><span data-stu-id="cb92e-124">If the server has also been updated, it can be configured to use the CBT or ignore it.</span></span> <span data-ttu-id="cb92e-125">Se ele não tiver sido atualizado, ele o ignorará.</span><span class="sxs-lookup"><span data-stu-id="cb92e-125">If it has not been updated, it ignores it.</span></span>  
  
 <span data-ttu-id="cb92e-126">O servidor pode ter os seguintes níveis de proteção:</span><span class="sxs-lookup"><span data-stu-id="cb92e-126">The server can have the following levels of protection:</span></span>  
  
- <span data-ttu-id="cb92e-127">nenhuma.</span><span class="sxs-lookup"><span data-stu-id="cb92e-127">None.</span></span> <span data-ttu-id="cb92e-128">Nenhuma validação de associação de canal é executada.</span><span class="sxs-lookup"><span data-stu-id="cb92e-128">No channel binding validation is performed.</span></span> <span data-ttu-id="cb92e-129">Esse é o comportamento de todos os servidores que não foram atualizados.</span><span class="sxs-lookup"><span data-stu-id="cb92e-129">This is the behavior of all servers that have not been updated.</span></span>  
  
- <span data-ttu-id="cb92e-130">Parcial.</span><span class="sxs-lookup"><span data-stu-id="cb92e-130">Partial.</span></span> <span data-ttu-id="cb92e-131">Todos os clientes que foram atualizados devem fornecer informações de associação de canal para o servidor.</span><span class="sxs-lookup"><span data-stu-id="cb92e-131">All clients that have been updated must provide channel binding information to the server.</span></span> <span data-ttu-id="cb92e-132">Os clientes que não foram atualizados não precisam fazer isso.</span><span class="sxs-lookup"><span data-stu-id="cb92e-132">Clients that have not been updated do not have to do so.</span></span> <span data-ttu-id="cb92e-133">Essa é uma opção intermediária que permite a compatibilidade de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="cb92e-133">This is an intermediate option that allows for application compatibility.</span></span>  
  
- <span data-ttu-id="cb92e-134">Completa.</span><span class="sxs-lookup"><span data-stu-id="cb92e-134">Full.</span></span> <span data-ttu-id="cb92e-135">Todos os clientes devem fornecer informações de associação de canal.</span><span class="sxs-lookup"><span data-stu-id="cb92e-135">All clients must provide channel binding information.</span></span> <span data-ttu-id="cb92e-136">O servidor rejeita solicitações de autenticação de clientes que não fazem isso.</span><span class="sxs-lookup"><span data-stu-id="cb92e-136">The server rejects authentication requests from clients that do not do so.</span></span>  
  
 <span data-ttu-id="cb92e-137">Para obter mais informações, consulte o exemplo de proteção do Win7 CBT/Extended.</span><span class="sxs-lookup"><span data-stu-id="cb92e-137">For more information, see the Win7 CBT/Extended Protection sample.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cb92e-138">Veja também</span><span class="sxs-lookup"><span data-stu-id="cb92e-138">See also</span></span>

- <span data-ttu-id="cb92e-139">[Modelo de segurança para o Windows Server app Fabric](/previous-versions/appfabric/ee677202(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="cb92e-139">[Security Model for Windows Server App Fabric](/previous-versions/appfabric/ee677202(v=azure.10))</span></span>
