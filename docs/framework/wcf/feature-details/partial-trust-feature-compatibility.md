---
title: Compatibilidade da funcionalidade de confiança parcial
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: a36a540b-1606-4e63-88e0-b7c59e0e6ab7
caps.latest.revision: 75
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 20cb6c1cd7a3b06b57bce02d5c3caacc7e2e42b7
ms.sourcegitcommit: 2042de78fcdceebb6b8ac4b7a292b93e8782cbf5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/27/2018
---
# <a name="partial-trust-feature-compatibility"></a><span data-ttu-id="e1f33-102">Compatibilidade da funcionalidade de confiança parcial</span><span class="sxs-lookup"><span data-stu-id="e1f33-102">Partial Trust Feature Compatibility</span></span>
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="e1f33-103"> oferece suporte a um subconjunto limitado de funcionalidade quando executados em um ambiente parcialmente confiável.</span><span class="sxs-lookup"><span data-stu-id="e1f33-103"> supports a limited subset of functionality when running in a partially-trusted environment.</span></span> <span data-ttu-id="e1f33-104">Os recursos com suporte em confiança parcial são projetados para um conjunto de cenários específicos, conforme descrito no [suporte para cenários de implantação](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) tópico.</span><span class="sxs-lookup"><span data-stu-id="e1f33-104">The features supported in partial trust are designed around a specific set of scenarios as described in the [Supported Deployment Scenarios](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) topic.</span></span>  
  
## <a name="minimum-permission-requirements"></a><span data-ttu-id="e1f33-105">Requisitos de permissão mínima</span><span class="sxs-lookup"><span data-stu-id="e1f33-105">Minimum Permission Requirements</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="e1f33-106"> dá suporte a um subconjunto de recursos em aplicativos em execução em qualquer um dos seguintes conjuntos de permissões nomeadas padrão:</span><span class="sxs-lookup"><span data-stu-id="e1f33-106"> supports a subset of features in applications running under either of the following standard named permission sets:</span></span>  
  
-   <span data-ttu-id="e1f33-107">Permissões de confiança médio</span><span class="sxs-lookup"><span data-stu-id="e1f33-107">Medium Trust permissions</span></span>  
  
-   <span data-ttu-id="e1f33-108">Permissões de zona da Internet</span><span class="sxs-lookup"><span data-stu-id="e1f33-108">Internet Zone permissions</span></span>  
  
 <span data-ttu-id="e1f33-109">Tentativa de usar [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] em aplicativos parcialmente confiáveis com permissões mais restritivas pode resultar em exceções de segurança em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="e1f33-109">Attempting to use [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] in partially-trusted applications with more restrictive permissions may result in security exceptions at runtime.</span></span>  
  
## <a name="contracts"></a><span data-ttu-id="e1f33-110">Contratos</span><span class="sxs-lookup"><span data-stu-id="e1f33-110">Contracts</span></span>  
 <span data-ttu-id="e1f33-111">Contratos estão sujeitas às seguintes restrições ao executar em confiança parcial:</span><span class="sxs-lookup"><span data-stu-id="e1f33-111">Contracts are subject to the following restrictions when running under partial trust:</span></span>  
  
-   <span data-ttu-id="e1f33-112">A classe de serviço que implementa o `[ServiceContract]` interface deve ser `public` e ter um `public` construtor.</span><span class="sxs-lookup"><span data-stu-id="e1f33-112">The service class that implements the `[ServiceContract]` interface must be `public` and have a `public` constructor.</span></span> <span data-ttu-id="e1f33-113">Se ele define `[OperationContract]` métodos, eles devem ser `public`.</span><span class="sxs-lookup"><span data-stu-id="e1f33-113">If it defines `[OperationContract]` methods, these must be `public`.</span></span> <span data-ttu-id="e1f33-114">Se, em vez disso, ele implementa um `[ServiceContract]` interface, as implementações de método podem ser explícitas ou `private`, desde que o `[ServiceContract]` interface é `public`.</span><span class="sxs-lookup"><span data-stu-id="e1f33-114">If it instead implements a `[ServiceContract]` interface, those method implementations can be explicit or `private`, provided that the `[ServiceContract]` interface is `public`.</span></span>  
  
-   <span data-ttu-id="e1f33-115">Ao usar o `[ServiceKnownType]` atributo, o método especificado deve ser `public`.</span><span class="sxs-lookup"><span data-stu-id="e1f33-115">When using the `[ServiceKnownType]` attribute, the method specified must be `public`.</span></span>  
  
-   <span data-ttu-id="e1f33-116">`[MessageContract]` classes e seus membros podem ser `public`.</span><span class="sxs-lookup"><span data-stu-id="e1f33-116">`[MessageContract]` classes and their members can be `public`.</span></span> <span data-ttu-id="e1f33-117">Se o `[MessageContract]` classe é definida no assembly do aplicativo pode ser `internal` e ter `internal` membros.</span><span class="sxs-lookup"><span data-stu-id="e1f33-117">If the `[MessageContract]` class is defined in the application assembly it can be `internal` and have `internal` members.</span></span>  
  
## <a name="system-provided-bindings"></a><span data-ttu-id="e1f33-118">Associações fornecidas pelo sistema</span><span class="sxs-lookup"><span data-stu-id="e1f33-118">System-Provided Bindings</span></span>  
 <span data-ttu-id="e1f33-119">O <xref:System.ServiceModel.BasicHttpBinding> e <xref:System.ServiceModel.WebHttpBinding> têm suporte total em um ambiente de confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-119">The <xref:System.ServiceModel.BasicHttpBinding> and <xref:System.ServiceModel.WebHttpBinding> are fully supported in a partial trust environment.</span></span> <span data-ttu-id="e1f33-120">O <xref:System.ServiceModel.WSHttpBinding> tem suporte para somente modo de segurança de transporte.</span><span class="sxs-lookup"><span data-stu-id="e1f33-120">The <xref:System.ServiceModel.WSHttpBinding> is supported for Transport security mode only.</span></span>  
  
 <span data-ttu-id="e1f33-121">Associações que usam transportes diferente de HTTP, como o <xref:System.ServiceModel.NetTcpBinding>, o <xref:System.ServiceModel.NetNamedPipeBinding>, ou o <xref:System.ServiceModel.NetMsmqBinding>, não são suportados quando executados em um ambiente de confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-121">Bindings that use transports other than HTTP, such as the <xref:System.ServiceModel.NetTcpBinding>, the <xref:System.ServiceModel.NetNamedPipeBinding>, or the <xref:System.ServiceModel.NetMsmqBinding>, are not supported when running in a partial trust environment.</span></span>  
  
## <a name="custom-bindings"></a><span data-ttu-id="e1f33-122">Associações personalizadas</span><span class="sxs-lookup"><span data-stu-id="e1f33-122">Custom Bindings</span></span>  
 <span data-ttu-id="e1f33-123">Associações personalizadas podem ser criadas e usados em um ambiente de confiança parcial, mas devem seguir as restrições especificadas nesta seção.</span><span class="sxs-lookup"><span data-stu-id="e1f33-123">Custom bindings can be created and used in a partial trust environment, but must follow the restrictions specified in this section.</span></span>  
  
### <a name="transports"></a><span data-ttu-id="e1f33-124">Transportes</span><span class="sxs-lookup"><span data-stu-id="e1f33-124">Transports</span></span>  
 <span data-ttu-id="e1f33-125">Os únicos permitidos são elementos de associação de transporte <xref:System.ServiceModel.Channels.HttpTransportBindingElement> e <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="e1f33-125">The only allowed transport binding elements are <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span></span>  
  
### <a name="encoders"></a><span data-ttu-id="e1f33-126">Codificadores</span><span class="sxs-lookup"><span data-stu-id="e1f33-126">Encoders</span></span>  
 <span data-ttu-id="e1f33-127">Os seguintes codificadores são permitidos:</span><span class="sxs-lookup"><span data-stu-id="e1f33-127">The following encoders are allowed:</span></span>  
  
-   <span data-ttu-id="e1f33-128">O codificador de texto (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="e1f33-128">The text encoder (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span></span>  
  
-   <span data-ttu-id="e1f33-129">O codificador binário (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="e1f33-129">The binary encoder (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span></span>  
  
-   <span data-ttu-id="e1f33-130">O codificador de mensagem da Web (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="e1f33-130">The Web Message encoder (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span></span>  
  
 <span data-ttu-id="e1f33-131">Não há suporte para os codificadores de mecanismo de otimização de transmissão da mensagem (MTOM).</span><span class="sxs-lookup"><span data-stu-id="e1f33-131">The Message Transmission Optimization Mechanism (MTOM) encoders are not supported.</span></span>  
  
### <a name="security"></a><span data-ttu-id="e1f33-132">Segurança</span><span class="sxs-lookup"><span data-stu-id="e1f33-132">Security</span></span>  
 <span data-ttu-id="e1f33-133">Aplicativos parcialmente confiáveis podem usar [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]de recursos de segurança para proteger suas comunicações de nível de transporte.</span><span class="sxs-lookup"><span data-stu-id="e1f33-133">Partially-trusted applications can use [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]'s transport-level security features for securing their communication.</span></span> <span data-ttu-id="e1f33-134">Não há suporte para a segurança em nível de mensagem.</span><span class="sxs-lookup"><span data-stu-id="e1f33-134">Message-level security is not supported.</span></span> <span data-ttu-id="e1f33-135">Configurando uma associação para usar a segurança de nível de mensagem resulta em uma exceção em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="e1f33-135">Configuring a binding to use message-level security results in an exception at runtime.</span></span>  
  
### <a name="unsupported-bindings"></a><span data-ttu-id="e1f33-136">Não há suporte para associações</span><span class="sxs-lookup"><span data-stu-id="e1f33-136">Unsupported Bindings</span></span>  
 <span data-ttu-id="e1f33-137">Não há suporte para associações que usam o sistema de mensagens confiável, transações ou segurança em nível de mensagem.</span><span class="sxs-lookup"><span data-stu-id="e1f33-137">Bindings that use reliable messaging, transactions, or message-level security are not supported.</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="e1f33-138">Serialização</span><span class="sxs-lookup"><span data-stu-id="e1f33-138">Serialization</span></span>  
 <span data-ttu-id="e1f33-139">Tanto o <xref:System.Runtime.Serialization.DataContractSerializer> e <xref:System.Xml.Serialization.XmlSerializer> têm suporte em um ambiente de confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-139">Both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer> are supported in a partial trust environment.</span></span> <span data-ttu-id="e1f33-140">No entanto, usar o <xref:System.Runtime.Serialization.DataContractSerializer> está sujeita às seguintes condições:</span><span class="sxs-lookup"><span data-stu-id="e1f33-140">However, use of the <xref:System.Runtime.Serialization.DataContractSerializer> is subject to the following conditions:</span></span>  
  
-   <span data-ttu-id="e1f33-141">Todos os serializável `[DataContract]` tipos devem ser `public`.</span><span class="sxs-lookup"><span data-stu-id="e1f33-141">All serializable `[DataContract]` types must be `public`.</span></span>  
  
-   <span data-ttu-id="e1f33-142">Todos os serializável `[DataMember]` campos ou propriedades em um `[DataContract]` tipo deve ser público e leitura/gravação.</span><span class="sxs-lookup"><span data-stu-id="e1f33-142">All serializable `[DataMember]` fields or properties in a `[DataContract]` type must be public and read/write.</span></span> <span data-ttu-id="e1f33-143">A serialização e desserialização de [readonly](http://go.microsoft.com/fwlink/?LinkID=98854) campos não é suportado quando executando [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] em um aplicativo parcialmente confiável.</span><span class="sxs-lookup"><span data-stu-id="e1f33-143">The serialization and deserialization of [readonly](http://go.microsoft.com/fwlink/?LinkID=98854) fields is not supported when running [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] in a partially-trusted application.</span></span>  
  
-   <span data-ttu-id="e1f33-144">O  `[Serializable]` /modelo de programação ISerializable não tem suporte em um ambiente de confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-144">The `[Serializable]`/ISerializable programming model is not supported in a partial trust environment.</span></span>  
  
-   <span data-ttu-id="e1f33-145">Tipos conhecidos devem ser especificados no código ou configuração de nível de máquina (Machine. config).</span><span class="sxs-lookup"><span data-stu-id="e1f33-145">Known types must be specified in code or machine-level configuration (machine.config).</span></span> <span data-ttu-id="e1f33-146">Tipos conhecidos não podem ser especificados na configuração de nível de aplicativo por motivos de segurança.</span><span class="sxs-lookup"><span data-stu-id="e1f33-146">Known types cannot be specified in application-level configuration for security reasons.</span></span>  
  
-   <span data-ttu-id="e1f33-147">Tipos que implementam <xref:System.Runtime.Serialization.IObjectReference> lançar uma exceção em um ambiente parcialmente confiável.</span><span class="sxs-lookup"><span data-stu-id="e1f33-147">Types that implement <xref:System.Runtime.Serialization.IObjectReference> throw an exception in a partially-trusted environment.</span></span>  
  
 <span data-ttu-id="e1f33-148">Consulte a seção de serialização em [práticas recomendadas de confiança parcial](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) para obter mais informações sobre segurança ao usar <xref:System.Runtime.Serialization.DataContractSerializer> com segurança em um aplicativo parcialmente confiável.</span><span class="sxs-lookup"><span data-stu-id="e1f33-148">See the Serialization section in [Partial Trust Best Practices](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) for more information about security when using <xref:System.Runtime.Serialization.DataContractSerializer> safely in a partially-trusted application.</span></span>  
  
### <a name="collection-types"></a><span data-ttu-id="e1f33-149">Tipos de coleção</span><span class="sxs-lookup"><span data-stu-id="e1f33-149">Collection Types</span></span>  
 <span data-ttu-id="e1f33-150">Alguns tipos de coleção implementam <xref:System.Collections.Generic.IEnumerable%601> e <xref:System.Collections.IEnumerable>.</span><span class="sxs-lookup"><span data-stu-id="e1f33-150">Some collection types implement both <xref:System.Collections.Generic.IEnumerable%601> and <xref:System.Collections.IEnumerable>.</span></span> <span data-ttu-id="e1f33-151">Exemplos incluem os tipos que implementam <xref:System.Collections.Generic.ICollection%601>.</span><span class="sxs-lookup"><span data-stu-id="e1f33-151">Examples include types that implement <xref:System.Collections.Generic.ICollection%601>.</span></span> <span data-ttu-id="e1f33-152">Esses tipos podem implementar uma `public` implementação de `GetEnumerator()`e uma implementação explícita de `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="e1f33-152">Such types can implement a `public` implementation of `GetEnumerator()`, and an explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="e1f33-153">Nesse caso, <xref:System.Runtime.Serialization.DataContractSerializer> invoca o `public` implementação de `GetEnumerator()`e não a implementação explícita de `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="e1f33-153">In this case, <xref:System.Runtime.Serialization.DataContractSerializer> invokes the `public` implementation of `GetEnumerator()`, and not the explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="e1f33-154">Se nenhuma a `GetEnumerator()` são implementações `public` e todas as implementações explícitas, em seguida, <xref:System.Runtime.Serialization.DataContractSerializer> invoca `IEnumerable.GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="e1f33-154">If none of the `GetEnumerator()` implementations are `public` and all are explicit implementations, then <xref:System.Runtime.Serialization.DataContractSerializer> invokes `IEnumerable.GetEnumerator()`.</span></span>  
  
 <span data-ttu-id="e1f33-155">Para a coleção de tipos quando [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] está em execução em um ambiente de confiança parcial, se nenhuma do `GetEnumerator()` são implementações `public`, ou nenhum deles são implementações de interface explícita e é gerada uma exceção de segurança.</span><span class="sxs-lookup"><span data-stu-id="e1f33-155">For collection types when [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is running in a partial trust environment, if none of the `GetEnumerator()` implementations are `public`, or none of them are explicit interface implementations, then a security exception is thrown.</span></span>  
  
### <a name="netdatacontractserializer"></a><span data-ttu-id="e1f33-156">NetDataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="e1f33-156">NetDataContractSerializer</span></span>  
 <span data-ttu-id="e1f33-157">Muitos tipos de coleção do .NET Framework, como <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> e <xref:System.Collections.Hashtable> não oferece suporte a <xref:System.Runtime.Serialization.NetDataContractSerializer> em confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-157">Many .NET Framework collection types such as <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> and <xref:System.Collections.Hashtable> are not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span> <span data-ttu-id="e1f33-158">Esses tipos têm o `[Serializable]` atributo definido e, conforme mencionado anteriormente na seção de serialização, esse atributo não tem suporte em confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-158">These types have the `[Serializable]` attribute set, and as stated previously in the Serialization section, this attribute is not supported in partial trust.</span></span> <span data-ttu-id="e1f33-159">O <xref:System.Runtime.Serialization.DataContractSerializer> trata coleções de uma forma especial e, portanto, é possível contornar essa restrição, mas o <xref:System.Runtime.Serialization.NetDataContractSerializer> não tem nenhum esse mecanismo para contornar essa restrição.</span><span class="sxs-lookup"><span data-stu-id="e1f33-159">The <xref:System.Runtime.Serialization.DataContractSerializer> treats collections in a special way and is thus able to get around this restriction, but the <xref:System.Runtime.Serialization.NetDataContractSerializer> has no such mechanism to circumvent this restriction.</span></span>  
  
 <span data-ttu-id="e1f33-160">O <xref:System.DateTimeOffset> tipo não é suportado pelo <xref:System.Runtime.Serialization.NetDataContractSerializer> em confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-160">The <xref:System.DateTimeOffset> type is not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span>  
  
 <span data-ttu-id="e1f33-161">Um substituto não pode ser usado com o <xref:System.Runtime.Serialization.NetDataContractSerializer> (usando o <xref:System.Runtime.Serialization.SurrogateSelector> mecanismo) durante a execução em confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-161">A surrogate cannot be used with the <xref:System.Runtime.Serialization.NetDataContractSerializer> (using the <xref:System.Runtime.Serialization.SurrogateSelector> mechanism) when running in partial trust.</span></span> <span data-ttu-id="e1f33-162">Observe que essa restrição se aplica ao uso de um substituto, não para serializá-lo.</span><span class="sxs-lookup"><span data-stu-id="e1f33-162">Note that this restriction applies to using a surrogate, not to serializing it.</span></span>  
  
## <a name="enabling-common-behaviors-to-run"></a><span data-ttu-id="e1f33-163">Habilitar comportamentos comuns executar</span><span class="sxs-lookup"><span data-stu-id="e1f33-163">Enabling Common Behaviors to Run</span></span>  
 <span data-ttu-id="e1f33-164">Comportamentos de serviço ou o ponto de extremidade não marcado com o <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atributo (APTCA) que são adicionados para o [ \<commonBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) seção de um arquivo de configuração não são executados quando o aplicativo é executado em uma relação de confiança parcial ambiente e nenhuma exceção é lançada quando isso ocorre.</span><span class="sxs-lookup"><span data-stu-id="e1f33-164">Service or endpoint behaviors not marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute (APTCA) that are added to the [\<commonBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) section of a configuration file are not run when the application runs in a partial trust environment and no exception is thrown when this occurs.</span></span> <span data-ttu-id="e1f33-165">Para impor a execução de comportamentos comuns, você deve fazer uma das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="e1f33-165">To enforce the running of common behaviors, you must do one of the following options:</span></span>  
  
-   <span data-ttu-id="e1f33-166">Marcar o comportamento comum com o <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atributo para que ele pode ser executado quando implantado como um aplicativo de confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-166">Mark your common behavior with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute so that it can run when deployed as a partial trust application.</span></span> <span data-ttu-id="e1f33-167">Observe que uma entrada de registro pode ser definida no computador para impedir que os assemblies marcados APTCA em execução.</span><span class="sxs-lookup"><span data-stu-id="e1f33-167">Note that a registry entry can be set on the computer to prevent APTCA-marked assemblies from running.</span></span> <span data-ttu-id="e1f33-168">.</span><span class="sxs-lookup"><span data-stu-id="e1f33-168">.</span></span>  
  
-   <span data-ttu-id="e1f33-169">Verifique se o aplicativo é implantado como um aplicativo totalmente confiável que os usuários não podem modificar as configurações de segurança de acesso do código para executar o aplicativo em um ambiente de confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-169">Ensure that if the application is deployed as a fully-trusted application that users cannot modify the code-access security settings to run the application in a partial trust environment.</span></span> <span data-ttu-id="e1f33-170">Se eles podem fazer isso, o comportamento não é executado e nenhuma exceção é lançada.</span><span class="sxs-lookup"><span data-stu-id="e1f33-170">If they can do so, the behavior does not run and no exception is thrown.</span></span> <span data-ttu-id="e1f33-171">Para verificar isso, consulte o **levelfinal** usando a opção [Caspol.exe (ferramenta de política de segurança de acesso do código)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="e1f33-171">To ensure this, see the **levelfinal** option using [Caspol.exe (Code Access Security Policy Tool)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
 <span data-ttu-id="e1f33-172">Para obter um exemplo de um comportamento comum, consulte [como: bloqueio para pontos de extremidade na empresa](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span><span class="sxs-lookup"><span data-stu-id="e1f33-172">For an example of a common behavior, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span></span>  
  
## <a name="configuration"></a><span data-ttu-id="e1f33-173">Configuração</span><span class="sxs-lookup"><span data-stu-id="e1f33-173">Configuration</span></span>  
 <span data-ttu-id="e1f33-174">Com uma exceção, o código parcialmente confiável somente pode carregar [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] seções de configuração no local `app.config` arquivo.</span><span class="sxs-lookup"><span data-stu-id="e1f33-174">With one exception, partially-trusted code can only load [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] configuration sections in the local `app.config` file.</span></span> <span data-ttu-id="e1f33-175">Para carregar [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] seções de configuração que fazem referência [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] seções em Machine. config ou em um arquivo Web. config de raiz requer ConfigurationPermission(Unrestricted).</span><span class="sxs-lookup"><span data-stu-id="e1f33-175">To load [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] configuration sections that reference [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] sections in machine.config or in a root web.config file requires ConfigurationPermission(Unrestricted).</span></span> <span data-ttu-id="e1f33-176">Sem essa permissão, as referências a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] seções de configuração (comportamentos, associações) fora os resultados do arquivo de configuração local em uma exceção quando a configuração é carregada.</span><span class="sxs-lookup"><span data-stu-id="e1f33-176">Without this permission, references to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] configuration sections (behaviors, bindings) outside of the local configuration file results in an exception when the configuration is loaded.</span></span>  
  
 <span data-ttu-id="e1f33-177">A única exceção é a configuração de tipo conhecido para a serialização, conforme descrito na seção serialização deste tópico.</span><span class="sxs-lookup"><span data-stu-id="e1f33-177">The one exception is known-type configuration for serialization, as described in the Serialization section of this topic.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="e1f33-178">Somente há suporte para extensões de configuração quando em execução em confiança total.</span><span class="sxs-lookup"><span data-stu-id="e1f33-178">Configuration extensions are only supported when running under Full Trust.</span></span>  
  
## <a name="diagnostics"></a><span data-ttu-id="e1f33-179">Diagnóstico</span><span class="sxs-lookup"><span data-stu-id="e1f33-179">Diagnostics</span></span>  
  
### <a name="event-logging"></a><span data-ttu-id="e1f33-180">Registro de eventos em log</span><span class="sxs-lookup"><span data-stu-id="e1f33-180">Event Logging</span></span>  
 <span data-ttu-id="e1f33-181">O log de eventos limitado tem suporte em confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-181">Limited event logging is supported under partial trust.</span></span> <span data-ttu-id="e1f33-182">Apenas as falhas de ativação de serviço e falhas de registro em log de rastreamento de mensagens são registradas no log de eventos.</span><span class="sxs-lookup"><span data-stu-id="e1f33-182">Only service activation faults and tracing/message logging failures are logged to the Event Log.</span></span> <span data-ttu-id="e1f33-183">O número máximo de eventos que podem ser registrados por um processo é 5, para evitar a escrita de mensagens excessivas no log de eventos.</span><span class="sxs-lookup"><span data-stu-id="e1f33-183">The maximum number of events that can be logged by a process is 5, to avoid writing excessive messages to the Event Log.</span></span>  
  
### <a name="message-logging"></a><span data-ttu-id="e1f33-184">Registro em log de mensagens</span><span class="sxs-lookup"><span data-stu-id="e1f33-184">Message Logging</span></span>  
 <span data-ttu-id="e1f33-185">Mensagem de log não funciona quando [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] é executado em um ambiente de confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-185">Message logging does not work when [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is run in a partial trust environment.</span></span> <span data-ttu-id="e1f33-186">Se habilitada em confiança parcial, ela não falhará ativação do serviço, mas nenhuma mensagem é registrada.</span><span class="sxs-lookup"><span data-stu-id="e1f33-186">If enabled under partial trust, it does not fail service activation, but no message is logged.</span></span>  
  
### <a name="tracing"></a><span data-ttu-id="e1f33-187">Rastreamento</span><span class="sxs-lookup"><span data-stu-id="e1f33-187">Tracing</span></span>  
 <span data-ttu-id="e1f33-188">Funcionalidade de rastreamento restrito está disponível quando executado em um ambiente de confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-188">Restricted tracing functionality is available when running in a partial trust environment.</span></span> <span data-ttu-id="e1f33-189">No <`listeners`> elemento no arquivo de configuração, os únicos tipos que você pode adicionar são <xref:System.Diagnostics.TextWriterTraceListener> e o novo <xref:System.Diagnostics.EventSchemaTraceListener>.</span><span class="sxs-lookup"><span data-stu-id="e1f33-189">In the <`listeners`> element in the configuration file, the only types that you can add are <xref:System.Diagnostics.TextWriterTraceListener> and the new <xref:System.Diagnostics.EventSchemaTraceListener>.</span></span> <span data-ttu-id="e1f33-190">Uso do padrão <xref:System.Diagnostics.XmlWriterTraceListener> pode resultar em logs incompletas ou incorretas.</span><span class="sxs-lookup"><span data-stu-id="e1f33-190">Use of the standard <xref:System.Diagnostics.XmlWriterTraceListener> may result in incomplete or incorrect logs.</span></span>  
  
 <span data-ttu-id="e1f33-191">Fontes de rastreamento com suporte são:</span><span class="sxs-lookup"><span data-stu-id="e1f33-191">Supported trace sources are:</span></span>  
  
-   <xref:System.ServiceModel>  
  
-   <xref:System.Runtime.Serialization>  
  
-   <span data-ttu-id="e1f33-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors> e <xref:System.IdentityModel.Tokens>.</span><span class="sxs-lookup"><span data-stu-id="e1f33-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>, and <xref:System.IdentityModel.Tokens>.</span></span>  
  
 <span data-ttu-id="e1f33-193">Não há suporte para as seguintes fontes de rastreamento:</span><span class="sxs-lookup"><span data-stu-id="e1f33-193">The following trace sources are not supported:</span></span>  
  
-   <span data-ttu-id="e1f33-194">CardSpace</span><span class="sxs-lookup"><span data-stu-id="e1f33-194">CardSpace</span></span>  
  
-   <xref:System.IO.Log>  

-   <span data-ttu-id="e1f33-195">[System.ServiceModel.Internal.TransactionBridge](https://msdn.microsoft.com/library/system.servicemodel.internal.transactionbridge.aspx)]</span><span class="sxs-lookup"><span data-stu-id="e1f33-195">[System.ServiceModel.Internal.TransactionBridge](https://msdn.microsoft.com/library/system.servicemodel.internal.transactionbridge.aspx)]</span></span>
  
 <span data-ttu-id="e1f33-196">Os seguintes membros de <xref:System.Diagnostics.TraceOptions> enumeração não deve ser especificada:</span><span class="sxs-lookup"><span data-stu-id="e1f33-196">The following members of the <xref:System.Diagnostics.TraceOptions> enumeration should not be specified:</span></span>  
  
-   <xref:System.Diagnostics.TraceOptions.Callstack?displayProperty=nameWithType>  
  
-   <xref:System.Diagnostics.TraceOptions.ProcessId?displayProperty=nameWithType>  
  
 <span data-ttu-id="e1f33-197">Ao usar o rastreamento em um ambiente de confiança parcial, certifique-se de que o aplicativo tem permissões suficientes para armazenar a saída do ouvinte de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="e1f33-197">When using tracing in a partial trust environment, ensure that the application has sufficient permissions to store the output of the trace listener.</span></span> <span data-ttu-id="e1f33-198">Por exemplo, ao usar o <xref:System.Diagnostics.TextWriterTraceListener> para gravar a saída de rastreamento em um arquivo de texto, certifique-se de que o aplicativo tem FileIOPermission necessário necessária para gravar no arquivo de rastreamento com êxito.</span><span class="sxs-lookup"><span data-stu-id="e1f33-198">For example, when using the <xref:System.Diagnostics.TextWriterTraceListener> to write trace output to a text file, ensure that the application has the necessary FileIOPermission required to successfully write to the trace file.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e1f33-199">Para evitar a saturação com erros duplicados, os arquivos de rastreamento [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] desabilita o rastreamento do recurso ou ação após a primeira falha de segurança.</span><span class="sxs-lookup"><span data-stu-id="e1f33-199">To avoid flooding the trace files with duplicate errors, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="e1f33-200">Há um rastreamento de exceção para cada acesso a recursos com falha, a primeira vez que é feita uma tentativa de acessar o recurso ou executar a ação.</span><span class="sxs-lookup"><span data-stu-id="e1f33-200">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="wcf-service-host"></a><span data-ttu-id="e1f33-201">Host de serviço do WCF</span><span class="sxs-lookup"><span data-stu-id="e1f33-201">WCF Service Host</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="e1f33-202"> host de serviço não dá suporte a confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-202"> service host does not support partial trust.</span></span> <span data-ttu-id="e1f33-203">Se você quiser usar um [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] de serviço em confiança parcial, não use o [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] modelo de projeto de biblioteca de serviço no Visual Studio para criar seu serviço.</span><span class="sxs-lookup"><span data-stu-id="e1f33-203">If you want to use a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service in partial trust, do not use the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Service Library Project template in Visual Studio to build your service.</span></span> <span data-ttu-id="e1f33-204">Em vez disso, crie um novo site da Web no Visual Studio escolhendo o [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] modelo de site da Web do serviço, que pode hospedar o serviço em um servidor Web no qual [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] há suporte para a relação de confiança parcial.</span><span class="sxs-lookup"><span data-stu-id="e1f33-204">Instead, create a new Web site in Visual Studio by choosing the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service Web site template, which can host the service in a Web server on which [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] partial trust is supported.</span></span>  
  
## <a name="other-limitations"></a><span data-ttu-id="e1f33-205">Outras limitações</span><span class="sxs-lookup"><span data-stu-id="e1f33-205">Other Limitations</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="e1f33-206"> é geralmente limitado para as considerações de segurança que imponham pelo aplicativo host.</span><span class="sxs-lookup"><span data-stu-id="e1f33-206"> is generally limited to the security considerations imposed upon it by the hosting application.</span></span> <span data-ttu-id="e1f33-207">Por exemplo, se [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] está hospedado em um aplicativo de navegador de XAML (XBAP), ele está sujeito a limitações XBAP, conforme descrito na [Windows Presentation Foundation Partial Trust Security](http://go.microsoft.com/fwlink/?LinkId=89138).</span><span class="sxs-lookup"><span data-stu-id="e1f33-207">For example, if [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is hosted in a XAML Browser Application (XBAP), it is subject to XBAP limitations, as described in [Windows Presentation Foundation Partial Trust Security](http://go.microsoft.com/fwlink/?LinkId=89138).</span></span>  
  
 <span data-ttu-id="e1f33-208">Os seguintes recursos adicionais não são habilitados quando executar indigo2 em um ambiente de confiança parcial:</span><span class="sxs-lookup"><span data-stu-id="e1f33-208">The following additional features are not enabled when running indigo2 in a partial trust environment:</span></span>  
  
-   <span data-ttu-id="e1f33-209">WMI (Instrumentação de Gerenciamento do Windows)</span><span class="sxs-lookup"><span data-stu-id="e1f33-209">Windows Management Instrumentation (WMI)</span></span>  
  
-   <span data-ttu-id="e1f33-210">O log de eventos é habilitado apenas parcialmente (consulte a discussão **diagnóstico** seção).</span><span class="sxs-lookup"><span data-stu-id="e1f33-210">Event logging is only partially enabled (see discussion in **Diagnostics** section).</span></span>  
  
-   <span data-ttu-id="e1f33-211">Contadores de desempenho</span><span class="sxs-lookup"><span data-stu-id="e1f33-211">Performance counters</span></span>  
  
 <span data-ttu-id="e1f33-212">O uso de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] recursos que não são suportados em um ambiente de confiança parcial podem resultar em exceções em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="e1f33-212">Use of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] features that are not supported in a partial trust environment may result in exceptions at runtime.</span></span>  
  
## <a name="unlisted-features"></a><span data-ttu-id="e1f33-213">Recursos não listados</span><span class="sxs-lookup"><span data-stu-id="e1f33-213">Unlisted Features</span></span>  
 <span data-ttu-id="e1f33-214">A melhor maneira de descobrir que uma parte das informações ou ação não está disponível quando executados em um ambiente de confiança parcial é tentar acessar o recurso ou executar a ação dentro de um `try` bloco e, em seguida, `catch` a falha.</span><span class="sxs-lookup"><span data-stu-id="e1f33-214">The best way to discover that a piece of information or action is unavailable when running in a partial trust environment is to try to access the resource or do the action inside of a `try` block, and then `catch` the failure.</span></span> <span data-ttu-id="e1f33-215">Para evitar a saturação com erros duplicados, os arquivos de rastreamento [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] desabilita o rastreamento do recurso ou ação após a primeira falha de segurança.</span><span class="sxs-lookup"><span data-stu-id="e1f33-215">To avoid flooding the trace files with duplicate errors, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="e1f33-216">Há um rastreamento de exceção para cada acesso a recursos com falha, a primeira vez que é feita uma tentativa de acessar o recurso ou executar a ação.</span><span class="sxs-lookup"><span data-stu-id="e1f33-216">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e1f33-217">Consulte também</span><span class="sxs-lookup"><span data-stu-id="e1f33-217">See Also</span></span>  
 <xref:System.ServiceModel.Channels.HttpTransportBindingElement>  
 <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>  
 <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>  
 <xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>  
 [<span data-ttu-id="e1f33-218">Cenários de implantação com suporte</span><span class="sxs-lookup"><span data-stu-id="e1f33-218">Supported Deployment Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md)  
 [<span data-ttu-id="e1f33-219">Práticas recomendadas de confiança parcial</span><span class="sxs-lookup"><span data-stu-id="e1f33-219">Partial Trust Best Practices</span></span>](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md)
