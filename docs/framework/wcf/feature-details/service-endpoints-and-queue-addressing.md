---
title: Pontos de extremidade de serviço e endereçamento de fila
ms.date: 03/30/2017
ms.assetid: 7d2d59d7-f08b-44ed-bd31-913908b83d97
ms.openlocfilehash: a2f4807e447482ee790f2ca9a2ab4dbde531b1c8
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33504936"
---
# <a name="service-endpoints-and-queue-addressing"></a><span data-ttu-id="18f64-102">Pontos de extremidade de serviço e endereçamento de fila</span><span class="sxs-lookup"><span data-stu-id="18f64-102">Service Endpoints and Queue Addressing</span></span>
<span data-ttu-id="18f64-103">Este tópico discute como os clientes atendem serviços leem de filas e como pontos de extremidade de serviço são mapeados para filas.</span><span class="sxs-lookup"><span data-stu-id="18f64-103">This topic discusses how clients address services that read from queues and how service endpoints map to queues.</span></span> <span data-ttu-id="18f64-104">Como um lembrete, a ilustração a seguir mostra clássica, implantação de aplicativo na fila do Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="18f64-104">As a reminder, the following illustration shows the classic Windows Communication Foundation (WCF) queued application deployment.</span></span>  
  
 <span data-ttu-id="18f64-105">![Na fila de diagrama do aplicativo](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Figura distribuídas de fila")</span><span class="sxs-lookup"><span data-stu-id="18f64-105">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="18f64-106">Para o cliente enviar a mensagem para o serviço, o cliente trata a mensagem à fila de destino.</span><span class="sxs-lookup"><span data-stu-id="18f64-106">For the client to send the message to the service, the client addresses the message to the Target Queue.</span></span> <span data-ttu-id="18f64-107">Para o serviço ler mensagens da fila, ele define o endereço de escuta para a fila de destino.</span><span class="sxs-lookup"><span data-stu-id="18f64-107">For the service to read messages from the queue, it sets its listen address to the Target Queue.</span></span> <span data-ttu-id="18f64-108">Endereçamento no WCF é baseado no URI Uniform Resource Identifier enquanto nomes de filas do enfileiramento de mensagens (MSMQ) não são baseados no URI.</span><span class="sxs-lookup"><span data-stu-id="18f64-108">Addressing in WCF is Uniform Resource Identifier (URI)-based while Message Queuing (MSMQ) queue names are not URI-based.</span></span> <span data-ttu-id="18f64-109">Portanto, é essencial compreender como tratar filas criadas no MSMQ usando o WCF.</span><span class="sxs-lookup"><span data-stu-id="18f64-109">It is therefore essential to understand how to address queues created in MSMQ using WCF.</span></span>  
  
## <a name="msmq-addressing"></a><span data-ttu-id="18f64-110">Endereçamento de MSMQ</span><span class="sxs-lookup"><span data-stu-id="18f64-110">MSMQ Addressing</span></span>  
 <span data-ttu-id="18f64-111">MSMQ usa caminhos e nomes de formato para identificar uma fila.</span><span class="sxs-lookup"><span data-stu-id="18f64-111">MSMQ uses paths and format names to identify a queue.</span></span> <span data-ttu-id="18f64-112">Caminhos de especificar um nome de host e um `QueueName`.</span><span class="sxs-lookup"><span data-stu-id="18f64-112">Paths specify a host name and a `QueueName`.</span></span> <span data-ttu-id="18f64-113">Opcionalmente, pode haver um `Private$` entre o nome do host e o `QueueName` para indicar uma fila particular que não é publicada no serviço de diretório do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="18f64-113">Optionally, there can be a `Private$` between the host name and the `QueueName` to indicate a private queue that is not published in the Active Directory directory service.</span></span>  
  
 <span data-ttu-id="18f64-114">Nomes de caminho são mapeados para "FormatNames" para determinar os aspectos adicionais do endereço, incluindo o protocolo de transferência de Gerenciador de roteamento e a fila.</span><span class="sxs-lookup"><span data-stu-id="18f64-114">Path names are mapped to "FormatNames" to determine additional aspects of the address, including routing and queue manager transfer protocol.</span></span> <span data-ttu-id="18f64-115">O Gerenciador de fila dá suporte a dois protocolos de transferência: o protocolo nativo do MSMQ e confiável de mensagens protocolo SRMP (SOAP).</span><span class="sxs-lookup"><span data-stu-id="18f64-115">The Queue Manager supports two transfer protocols: native MSMQ protocol and SOAP Reliable Messaging Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="18f64-116">Para obter mais informações sobre nomes de caminho e o formato do MSMQ, consulte [sobre enfileiramento](http://go.microsoft.com/fwlink/?LinkId=94837).</span><span class="sxs-lookup"><span data-stu-id="18f64-116">For more information about MSMQ path and format names, see [About Message Queuing](http://go.microsoft.com/fwlink/?LinkId=94837).</span></span>  
  
## <a name="netmsmqbinding-and-service-addressing"></a><span data-ttu-id="18f64-117">NetMsmqBinding e endereçamento de serviço</span><span class="sxs-lookup"><span data-stu-id="18f64-117">NetMsmqBinding and Service Addressing</span></span>  
 <span data-ttu-id="18f64-118">Ao endereçar uma mensagem para um serviço, o esquema de URI é escolhido com base no transporte usado para comunicação.</span><span class="sxs-lookup"><span data-stu-id="18f64-118">When addressing a message to a service, the scheme in the URI is chosen based on the transport used for communication.</span></span> <span data-ttu-id="18f64-119">Cada transporte do WCF tem um esquema exclusivo.</span><span class="sxs-lookup"><span data-stu-id="18f64-119">Each transport in WCF has a unique scheme.</span></span> <span data-ttu-id="18f64-120">O esquema deve refletir a natureza de transporte usado para comunicação.</span><span class="sxs-lookup"><span data-stu-id="18f64-120">The scheme must reflect the nature of transport used for communication.</span></span> <span data-ttu-id="18f64-121">Por exemplo, net.tcp, NET. pipe, HTTP e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="18f64-121">For example, net.tcp, net.pipe, HTTP, and so on.</span></span>  
  
 <span data-ttu-id="18f64-122">O MSMQ em fila transporte em WCF expõe um esquema NET. MSMQ.</span><span class="sxs-lookup"><span data-stu-id="18f64-122">The MSMQ queued transport in WCF exposes a net.msmq scheme.</span></span> <span data-ttu-id="18f64-123">Qualquer mensagem endereçada usando o esquema NET. MSMQ é enviada usando o `NetMsmqBinding` no canal de transporte em fila do MSMQ.</span><span class="sxs-lookup"><span data-stu-id="18f64-123">Any message addressed using the net.msmq scheme is sent using the `NetMsmqBinding` over the MSMQ queued transport channel.</span></span>  
  
 <span data-ttu-id="18f64-124">O endereçamento de uma fila no WCF com base no seguinte padrão:</span><span class="sxs-lookup"><span data-stu-id="18f64-124">The addressing of a queue in WCF is based on the following pattern:</span></span>  
  
 <span data-ttu-id="18f64-125">NET. MSMQ: / / \< *nome de host*> / [privada /] \< *nome da fila*></span><span class="sxs-lookup"><span data-stu-id="18f64-125">net.msmq: // \<*host-name*> / [private/] \<*queue-name*></span></span>  
  
 <span data-ttu-id="18f64-126">em que:</span><span class="sxs-lookup"><span data-stu-id="18f64-126">where:</span></span>  
  
-   <span data-ttu-id="18f64-127">\<*nome do host*> é o nome do computador que hospeda a fila de destino.</span><span class="sxs-lookup"><span data-stu-id="18f64-127">\<*host-name*> is the name of the machine that hosts the Target Queue.</span></span>  
  
-   <span data-ttu-id="18f64-128">[privada] é opcional.</span><span class="sxs-lookup"><span data-stu-id="18f64-128">[private] is optional.</span></span> <span data-ttu-id="18f64-129">Ele é usado ao endereçar uma fila de destino é uma fila particular.</span><span class="sxs-lookup"><span data-stu-id="18f64-129">It is used when addressing a Target Queue that is a private queue.</span></span> <span data-ttu-id="18f64-130">Para resolver uma fila pública, você não deve especificar privada.</span><span class="sxs-lookup"><span data-stu-id="18f64-130">To address a public queue, you must not specify private.</span></span> <span data-ttu-id="18f64-131">Observe que, ao contrário dos caminhos MSMQ, não há nenhum "$" no formato URI WCF.</span><span class="sxs-lookup"><span data-stu-id="18f64-131">Note that, unlike MSMQ paths, there is no "$" in the WCF URI form.</span></span>  
  
-   <span data-ttu-id="18f64-132">\<*nome da fila*> é o nome da fila.</span><span class="sxs-lookup"><span data-stu-id="18f64-132">\<*queue-name*> is the name of the queue.</span></span> <span data-ttu-id="18f64-133">O nome da fila também pode referir-se para uma subfila de mensagens.</span><span class="sxs-lookup"><span data-stu-id="18f64-133">The queue name can also refer to a subqueue.</span></span> <span data-ttu-id="18f64-134">Portanto, \< *nome de fila*> = \< *nome-da-fila*> [; *nome de queue sub*].</span><span class="sxs-lookup"><span data-stu-id="18f64-134">Thus, \<*queue-name*> = \<*name-of-queue*>[;*sub-queue-name*].</span></span>  
  
 <span data-ttu-id="18f64-135">Exemplo 1: Para endereçar uma fila particular PurchaseOrders hospedados no computador abc atadatum.com, o URI seria net.msmq://abc.adatum.com/private/PurchaseOrders.</span><span class="sxs-lookup"><span data-stu-id="18f64-135">Example1: To address a private queue PurchaseOrders hosted on computer abc atadatum.com, the URI would be net.msmq://abc.adatum.com/private/PurchaseOrders.</span></span>  
  
 <span data-ttu-id="18f64-136">Exemplo 2: Para resolver uma fila pública AccountsPayable hospedado no computador def atadatum.com, o URI seria net.msmq://def.adatum.com/AccountsPayable.</span><span class="sxs-lookup"><span data-stu-id="18f64-136">Example2: To address a public queue AccountsPayable hosted on computer def atadatum.com, the URI would be net.msmq://def.adatum.com/AccountsPayable.</span></span>  
  
 <span data-ttu-id="18f64-137">O endereço da fila é usado como o URI de escuta pelo ouvinte para ler mensagens de.</span><span class="sxs-lookup"><span data-stu-id="18f64-137">The queue address is used as the Listen URI by the Listener to read messages from.</span></span> <span data-ttu-id="18f64-138">Em outras palavras, o endereço da fila é equivalente para o soquete de TCP de porta de escuta.</span><span class="sxs-lookup"><span data-stu-id="18f64-138">In other words, the queue address is equivalent to the listen port of TCP socket.</span></span>  
  
 <span data-ttu-id="18f64-139">Um ponto de extremidade que lê uma fila deve especificar o endereço da fila usando o mesmo esquema especificado anteriormente ao abrir o ServiceHost.</span><span class="sxs-lookup"><span data-stu-id="18f64-139">An endpoint that reads from a queue must specify the address of the queue using the same scheme specified previously when opening the ServiceHost.</span></span> <span data-ttu-id="18f64-140">Para obter exemplos, consulte [associação de MSMQ Net](../../../../docs/framework/wcf/samples/net-msmq-binding.md) e [mensagem de enfileiramento de mensagens de associação exemplos de integração](http://msdn.microsoft.com/library/997d11cb-f2c5-4ba0-9209-92843d4d0e1a).</span><span class="sxs-lookup"><span data-stu-id="18f64-140">For examples, see [Net MSMQ Binding](../../../../docs/framework/wcf/samples/net-msmq-binding.md) and [Message Queuing Integration Binding Samples](http://msdn.microsoft.com/library/997d11cb-f2c5-4ba0-9209-92843d4d0e1a).</span></span>  
  
### <a name="multiple-contracts-in-a-queue"></a><span data-ttu-id="18f64-141">Vários contratos em uma fila</span><span class="sxs-lookup"><span data-stu-id="18f64-141">Multiple Contracts in a Queue</span></span>  
 <span data-ttu-id="18f64-142">Mensagens em uma fila podem implementar contratos diferentes.</span><span class="sxs-lookup"><span data-stu-id="18f64-142">Messages in a queue can implement different contracts.</span></span> <span data-ttu-id="18f64-143">Nesse caso, é essencial que uma das seguintes opções é verdadeira para ler e processar todas as mensagens com êxito:</span><span class="sxs-lookup"><span data-stu-id="18f64-143">In this case, it is essential that one of the following is true to successfully read and process all messages:</span></span>  
  
-   <span data-ttu-id="18f64-144">Especifique um ponto de extremidade para um serviço que implementa todos os contratos.</span><span class="sxs-lookup"><span data-stu-id="18f64-144">Specify an endpoint for a service that implements all the contracts.</span></span> <span data-ttu-id="18f64-145">Essa é a abordagem recomendada.</span><span class="sxs-lookup"><span data-stu-id="18f64-145">This is the recommended approach.</span></span>  
  
-   <span data-ttu-id="18f64-146">Especificar vários pontos de extremidade com contratos diferentes, mas certifique-se de que todos os pontos de extremidade usem os mesmos `NetMsmqBinding` objeto.</span><span class="sxs-lookup"><span data-stu-id="18f64-146">Specify multiple endpoints with different contracts, but ensure that all the endpoints use the same `NetMsmqBinding` object.</span></span> <span data-ttu-id="18f64-147">A lógica de expedição de ServiceModel usa uma bomba de mensagem que lê mensagens fora do canal de transporte de expedição, que eventualmente desmultiplexa mensagens com base no contrato de pontos de extremidade diferentes.</span><span class="sxs-lookup"><span data-stu-id="18f64-147">The dispatching logic in ServiceModel uses a message pump that reads messages out of the transport channel for dispatch, which eventually de-multiplexes messages based on the contract to different endpoints.</span></span> <span data-ttu-id="18f64-148">Uma bomba de mensagem é criada para um par de associação/URI de escuta.</span><span class="sxs-lookup"><span data-stu-id="18f64-148">A message pump is created for a listen URI/Binding pair.</span></span> <span data-ttu-id="18f64-149">O endereço da fila é usado como o URI de escuta pelo ouvinte na fila.</span><span class="sxs-lookup"><span data-stu-id="18f64-149">The queue address is used as the Listen URI by the queued listener.</span></span> <span data-ttu-id="18f64-150">Com o uso de pontos de extremidade que o mesmo objeto de associação garante que uma bomba de mensagem única é usada para ler a mensagem e eliminação multiplex para pontos de extremidade relevantes com base no contrato.</span><span class="sxs-lookup"><span data-stu-id="18f64-150">Having all the endpoints use the same binding object ensures that a single message pump is used to read the message and de-multiplex to relevant endpoints based on the contract.</span></span>  
  
### <a name="srmp-messaging"></a><span data-ttu-id="18f64-151">Mensagens SRMP</span><span class="sxs-lookup"><span data-stu-id="18f64-151">SRMP Messaging</span></span>  
 <span data-ttu-id="18f64-152">Como discutido anteriormente, você pode usar o protocolo SRMP para transferências de fila para a fila.</span><span class="sxs-lookup"><span data-stu-id="18f64-152">As previously discussed, you can use the SRMP protocol for queue-to-queue transfers.</span></span> <span data-ttu-id="18f64-153">Isso é geralmente usado quando um transporte HTTP transmite mensagens entre a fila de transmissão e a fila de destino.</span><span class="sxs-lookup"><span data-stu-id="18f64-153">This is commonly used when an HTTP transport transmits messages between the Transmission Queue and the Target Queue.</span></span>  
  
 <span data-ttu-id="18f64-154">Para usar o protocolo de transferência SRMP, receba mensagens usando o esquema URI do NET. MSMQ, conforme mencionado anteriormente e especificar a opção de SRMP ou SRMP protegidos no `QueueTransferProtocol` propriedade o `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="18f64-154">To use the SRMP transfer protocol, address messages using the net.msmq URI scheme, as mentioned previously, and specify the choice of SRMP or Secured SRMP in the `QueueTransferProtocol` property of the `NetMsmqBinding`.</span></span>  
  
 <span data-ttu-id="18f64-155">Especificando o `QueueTransferProtocol` propriedade é um recurso somente de envio.</span><span class="sxs-lookup"><span data-stu-id="18f64-155">Specifying the `QueueTransferProtocol` property is a send-only feature.</span></span> <span data-ttu-id="18f64-156">Essa é uma indicação pelo cliente que tipo de fila de transferência de protocolo a ser usado.</span><span class="sxs-lookup"><span data-stu-id="18f64-156">This is an indication by the client which kind of queue transfer protocol to use.</span></span>  
  
### <a name="using-active-directory"></a><span data-ttu-id="18f64-157">Usando o Active Directory</span><span class="sxs-lookup"><span data-stu-id="18f64-157">Using Active Directory</span></span>  
 <span data-ttu-id="18f64-158">MSMQ vem com suporte para integração do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="18f64-158">MSMQ comes with support for Active Directory integration.</span></span> <span data-ttu-id="18f64-159">Quando o MSMQ está instalado com a integração do Active Directory, o computador deve ser parte de um domínio do Windows.</span><span class="sxs-lookup"><span data-stu-id="18f64-159">When MSMQ is installed with Active Directory integration, the machine must be part of a Windows domain.</span></span> <span data-ttu-id="18f64-160">Active Directory é usado para publicar as filas para descoberta; Essas filas são chamadas *filas públicas*.</span><span class="sxs-lookup"><span data-stu-id="18f64-160">Active Directory is used to publish queues for discovery; such queues are called *public queues*.</span></span> <span data-ttu-id="18f64-161">Ao endereçar uma fila, a fila pode ser resolvida usando o Active Directory.</span><span class="sxs-lookup"><span data-stu-id="18f64-161">When addressing a queue, the queue can be resolved using Active Directory.</span></span> <span data-ttu-id="18f64-162">Isso é semelhante a como o sistema de nome de domínio (DNS) é usado para resolver o endereço IP de um nome de rede.</span><span class="sxs-lookup"><span data-stu-id="18f64-162">This is similar to how Domain Name System (DNS) is used to resolve the IP address of a network name.</span></span> <span data-ttu-id="18f64-163">O `UseActiveDirectory` propriedade `NetMsmqBinding` é um valor booliano que indica se o canal em fila deve usar o Active Directory para resolver o URI da fila.</span><span class="sxs-lookup"><span data-stu-id="18f64-163">The `UseActiveDirectory` property in `NetMsmqBinding` is a Boolean that indicates whether the queued channel must use Active Directory to resolve the queue URI.</span></span> <span data-ttu-id="18f64-164">Por padrão, ele é definido como `false`.</span><span class="sxs-lookup"><span data-stu-id="18f64-164">By default it is set to `false`.</span></span> <span data-ttu-id="18f64-165">Se o `UseActiveDirectory` está definida como `true`, em seguida, o canal em fila usa o Active Directory para converter o net.msmq:// URI para o nome de formato.</span><span class="sxs-lookup"><span data-stu-id="18f64-165">If the `UseActiveDirectory` property is set to `true`, then the queued channel uses Active Directory to convert the net.msmq:// URI to format name.</span></span>  
  
 <span data-ttu-id="18f64-166">O `UseActiveDirectory` propriedade é significativa apenas para o cliente que está enviando a mensagem porque ele é usado para resolver o endereço da fila ao enviar mensagens.</span><span class="sxs-lookup"><span data-stu-id="18f64-166">The `UseActiveDirectory` property is meaningful only for the client that is sending the message because it is used to resolve the address of the queue when sending messages.</span></span>  
  
### <a name="mapping-netmsmq-uri-to-message-queuing-format-names"></a><span data-ttu-id="18f64-167">O mapeamento de URI do NET. MSMQ para nomes de formato de enfileiramento de mensagens</span><span class="sxs-lookup"><span data-stu-id="18f64-167">Mapping net.msmq URI to Message Queuing Format Names</span></span>  
 <span data-ttu-id="18f64-168">O canal em fila manipula mapear o nome do URI de NET. MSMQ fornecido para o canal para nomes de formato do MSMQ.</span><span class="sxs-lookup"><span data-stu-id="18f64-168">The queued channel handles mapping the net.msmq URI name provided to the channel to MSMQ format names.</span></span> <span data-ttu-id="18f64-169">A tabela a seguir resume as regras usadas para mapear entre eles.</span><span class="sxs-lookup"><span data-stu-id="18f64-169">The following table summarizes the rules used to map between them.</span></span>  
  
|<span data-ttu-id="18f64-170">Endereço da fila com base no URI do WCF</span><span class="sxs-lookup"><span data-stu-id="18f64-170">WCF URI-based queue address</span></span>|<span data-ttu-id="18f64-171">Use a propriedade do Active Directory</span><span class="sxs-lookup"><span data-stu-id="18f64-171">Use Active Directory property</span></span>|<span data-ttu-id="18f64-172">Propriedade de protocolo de transferência de fila</span><span class="sxs-lookup"><span data-stu-id="18f64-172">Queue Transfer Protocol property</span></span>|<span data-ttu-id="18f64-173">Nomes de formato resultantes do MSMQ</span><span class="sxs-lookup"><span data-stu-id="18f64-173">Resulting MSMQ format names</span></span>|  
|----------------------------------|-----------------------------------|--------------------------------------|---------------------------------|  
|<span data-ttu-id="18f64-174">NET.MSMQ://\<machine-name >/privado/abc</span><span class="sxs-lookup"><span data-stu-id="18f64-174">Net.msmq://\<machine-name>/private/abc</span></span>|<span data-ttu-id="18f64-175">False (padrão)</span><span class="sxs-lookup"><span data-stu-id="18f64-175">False (default)</span></span>|<span data-ttu-id="18f64-176">Nativo (padrão)</span><span class="sxs-lookup"><span data-stu-id="18f64-176">Native (default)</span></span>|<span data-ttu-id="18f64-177">DIRECT=OS:machine-name\private$\abc</span><span class="sxs-lookup"><span data-stu-id="18f64-177">DIRECT=OS:machine-name\private$\abc</span></span>|  
|<span data-ttu-id="18f64-178">NET.MSMQ://\<machine-name >/privado/abc</span><span class="sxs-lookup"><span data-stu-id="18f64-178">Net.msmq://\<machine-name>/private/abc</span></span>|<span data-ttu-id="18f64-179">False</span><span class="sxs-lookup"><span data-stu-id="18f64-179">False</span></span>|<span data-ttu-id="18f64-180">SRMP</span><span class="sxs-lookup"><span data-stu-id="18f64-180">SRMP</span></span>|<span data-ttu-id="18f64-181">DIRECT =http://machine/msmq/private$/ abc</span><span class="sxs-lookup"><span data-stu-id="18f64-181">DIRECT=http://machine/msmq/private$/abc</span></span>|  
|<span data-ttu-id="18f64-182">NET.MSMQ://\<machine-name >/privado/abc</span><span class="sxs-lookup"><span data-stu-id="18f64-182">Net.msmq://\<machine-name>/private/abc</span></span>|<span data-ttu-id="18f64-183">verdadeiro</span><span class="sxs-lookup"><span data-stu-id="18f64-183">True</span></span>|<span data-ttu-id="18f64-184">Nativo</span><span class="sxs-lookup"><span data-stu-id="18f64-184">Native</span></span>|<span data-ttu-id="18f64-185">PÚBLICO = alguns guid (o GUID da fila)</span><span class="sxs-lookup"><span data-stu-id="18f64-185">PUBLIC=some-guid (the GUID of the queue)</span></span>|  
  
### <a name="reading-messages-from-the-dead-letter-queue-or-the-poison-message-queue"></a><span data-ttu-id="18f64-186">Lendo mensagens da fila de mensagens mortas ou a fila de mensagens suspeitas</span><span class="sxs-lookup"><span data-stu-id="18f64-186">Reading Messages from the Dead-Letter Queue or the Poison-Message Queue</span></span>  
 <span data-ttu-id="18f64-187">Para ler mensagens de uma fila de mensagens suspeitas é uma subfila da fila de destino, abra o `ServiceHost` com o endereço da subfila.</span><span class="sxs-lookup"><span data-stu-id="18f64-187">To read messages from a poison-message queue that is a subqueue of the target queue, open the `ServiceHost` with the address of the subqueue.</span></span>  
  
 <span data-ttu-id="18f64-188">Exemplo: Um serviço que lê da fila de mensagens suspeitas da fila particular PurchaseOrders na máquina local tratar net.msmq://localhost/private/PurchaseOrders;poison.</span><span class="sxs-lookup"><span data-stu-id="18f64-188">Example: A service that reads from the poison-message queue of the PurchaseOrders private queue from the local machine would address net.msmq://localhost/private/PurchaseOrders;poison.</span></span>  
  
 <span data-ttu-id="18f64-189">Para ler mensagens de uma fila de mensagens mortas transacional do sistema, o URI deve estar no formato: net.msmq://localhost/system$; DeadXact.</span><span class="sxs-lookup"><span data-stu-id="18f64-189">To read messages from a system transactional dead-letter queue, the URI must be of the form: net.msmq://localhost/system$;DeadXact.</span></span>  
  
 <span data-ttu-id="18f64-190">Para ler mensagens de uma fila de mensagens mortas do sistema não transacionais, o URI deve ser do formulário: net.msmq://localhost/system$; mensagens mortas.</span><span class="sxs-lookup"><span data-stu-id="18f64-190">To read messages from a system nontransactional dead-letter queue, the URI must be of the form: net.msmq://localhost/system$;DeadLetter.</span></span>  
  
 <span data-ttu-id="18f64-191">Ao usar uma fila de mensagens mortas personalizada, observe que a fila de mensagens mortas deve residir no computador local.</span><span class="sxs-lookup"><span data-stu-id="18f64-191">When using a custom dead-letter queue, note that the dead-letter queue must reside on the local computer.</span></span> <span data-ttu-id="18f64-192">Como tal, o URI para a fila de mensagens mortas é restrito ao formulário:</span><span class="sxs-lookup"><span data-stu-id="18f64-192">As such, the URI for the dead-letter queue is restricted to the form:</span></span>  
  
 <span data-ttu-id="18f64-193">NET. MSMQ: //localhost/ [privada /] \< *personalizado-mortas-letra--nome de fila*>.</span><span class="sxs-lookup"><span data-stu-id="18f64-193">net.msmq: //localhost/ [private/]  \<*custom-dead-letter-queue-name*>.</span></span>  
  
 <span data-ttu-id="18f64-194">Um serviço WCF verifica que todas as mensagens recebidas foram resolvidas para a fila particular está escutando nas.</span><span class="sxs-lookup"><span data-stu-id="18f64-194">A WCF service verifies that all messages it receives were addressed to the particular queue it is listening on.</span></span> <span data-ttu-id="18f64-195">Se a fila de destino da mensagem não coincide com a fila que for localizado no, o serviço não processa a mensagem.</span><span class="sxs-lookup"><span data-stu-id="18f64-195">If the message’s destination queue does not match the queue it is found in, the service does not process the message.</span></span> <span data-ttu-id="18f64-196">Este é um problema que serviços de escuta em uma fila de mensagens mortas devem tratar porque qualquer mensagem na fila de mensagens mortas deveria ser entregue em outro lugar.</span><span class="sxs-lookup"><span data-stu-id="18f64-196">This is an issue that services listening to a dead-letter queue must address because any message in the dead-letter queue was meant to be delivered elsewhere.</span></span> <span data-ttu-id="18f64-197">Para ler mensagens de uma fila de mensagens mortas ou de uma fila suspeita, um `ServiceBehavior` com o <xref:System.ServiceModel.AddressFilterMode.Any> parâmetro deve ser usado.</span><span class="sxs-lookup"><span data-stu-id="18f64-197">To read messages from a dead-letter queue, or from a poison queue, a `ServiceBehavior` with the <xref:System.ServiceModel.AddressFilterMode.Any> parameter must be used.</span></span> <span data-ttu-id="18f64-198">Para obter um exemplo, consulte [filas de mensagens mortas](../../../../docs/framework/wcf/samples/dead-letter-queues.md).</span><span class="sxs-lookup"><span data-stu-id="18f64-198">For an example, see [Dead Letter Queues](../../../../docs/framework/wcf/samples/dead-letter-queues.md).</span></span>  
  
## <a name="msmqintegrationbinding-and-service-addressing"></a><span data-ttu-id="18f64-199">MsmqIntegrationBinding e endereçamento de serviço</span><span class="sxs-lookup"><span data-stu-id="18f64-199">MsmqIntegrationBinding and Service Addressing</span></span>  
 <span data-ttu-id="18f64-200">O `MsmqIntegrationBinding` é usado para comunicação com aplicativos tradicionais do MSMQ.</span><span class="sxs-lookup"><span data-stu-id="18f64-200">The `MsmqIntegrationBinding` is used for communication with traditional MSMQ applications.</span></span> <span data-ttu-id="18f64-201">Para facilitar a interoperação com um aplicativo de MSMQ existente, o WCF dá suporte a endereçamento de nome de formato somente.</span><span class="sxs-lookup"><span data-stu-id="18f64-201">To ease interoperation with an existing MSMQ application, WCF supports only format name addressing.</span></span> <span data-ttu-id="18f64-202">Assim, as mensagens enviadas usando essa associação devem estar de acordo com o esquema de URI:</span><span class="sxs-lookup"><span data-stu-id="18f64-202">Thus, messages sent using this binding must conform to the URI scheme:</span></span>  
  
 <span data-ttu-id="18f64-203">msmq.formatname:\<*MSMQ-format-name*>></span><span class="sxs-lookup"><span data-stu-id="18f64-203">msmq.formatname:\<*MSMQ-format-name*>></span></span>  
  
 <span data-ttu-id="18f64-204">O nome de MSMQ-formato tem o formato especificado pelo MSMQ em [sobre enfileiramento](http://go.microsoft.com/fwlink/?LinkId=94837).</span><span class="sxs-lookup"><span data-stu-id="18f64-204">The MSMQ-format-name is of the form specified by MSMQ in [About Message Queuing](http://go.microsoft.com/fwlink/?LinkId=94837).</span></span>  
  
 <span data-ttu-id="18f64-205">Observe que você só pode usar nomes de formato direto e nomes de formato públicos e privados (requer a integração do Active Directory) ao receber mensagens de uma fila usando `MsmqIntegrationBinding`.</span><span class="sxs-lookup"><span data-stu-id="18f64-205">Note that you can only use direct format names, and public and private format names (requires Active Directory integration) when receiving messages from a queue using `MsmqIntegrationBinding`.</span></span> <span data-ttu-id="18f64-206">No entanto, é recomendável que você use nomes de formato direto.</span><span class="sxs-lookup"><span data-stu-id="18f64-206">However, it is advised that you use direct format names.</span></span> <span data-ttu-id="18f64-207">Por exemplo, em [!INCLUDE[wv](../../../../includes/wv-md.md)], usar qualquer outro nome de formato causa um erro porque o sistema tenta abrir uma subfila, que só pode ser aberta com nomes de formato direto.</span><span class="sxs-lookup"><span data-stu-id="18f64-207">For example, on [!INCLUDE[wv](../../../../includes/wv-md.md)], using any other format name causes an error because the system attempts to open a subqueue, which can only be opened with direct format names.</span></span>  
  
 <span data-ttu-id="18f64-208">Ao abordar SRMP usando `MsmqIntegrationBinding`, não há nenhum requisito de adicionar /msmq/ no nome de formato direto para ajudar a serviços de informações da Internet (IIS) com a distribuição.</span><span class="sxs-lookup"><span data-stu-id="18f64-208">When addressing SRMP using `MsmqIntegrationBinding`, there is no requirement to add /msmq/ in the direct format name to help Internet Information Services (IIS) with dispatching.</span></span> <span data-ttu-id="18f64-209">Por exemplo: quando uma fila de protocolo abc usando o SRMP, em vez de direta de endereçamento =http://adatum.com/msmq/private$/ abc, você deve usar DIRECT =http://adatum.com/private$/ abc.</span><span class="sxs-lookup"><span data-stu-id="18f64-209">For example: When addressing a queue abc using the SRMP protocol, instead of DIRECT=http://adatum.com/msmq/private$/abc, you should use DIRECT=http://adatum.com/private$/abc.</span></span>  
  
 <span data-ttu-id="18f64-210">Observe que você não pode usar o endereçamento net.msmq:// com `MsmqIntegrationBinding`.</span><span class="sxs-lookup"><span data-stu-id="18f64-210">Note that you cannot use net.msmq:// addressing with `MsmqIntegrationBinding`.</span></span> <span data-ttu-id="18f64-211">Como `MsmqIntegrationBinding` oferece suporte a forma livre MSMQ formato nome de endereçamento, você pode usar um serviço WCF que usa esta associação para usar recursos da lista de distribuição e de multicast no MSMQ.</span><span class="sxs-lookup"><span data-stu-id="18f64-211">Because `MsmqIntegrationBinding` supports free-form MSMQ format name addressing, you can use a WCF service that uses this binding to use multicast and distribution list features in MSMQ.</span></span> <span data-ttu-id="18f64-212">Especificação de uma exceção `CustomDeadLetterQueue` ao usar o `MsmqIntegrationBinding`.</span><span class="sxs-lookup"><span data-stu-id="18f64-212">One exception is specifying `CustomDeadLetterQueue` when using the `MsmqIntegrationBinding`.</span></span> <span data-ttu-id="18f64-213">Ele deve estar net.msmq:// a forma, semelhante a como ele é especificado usando o `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="18f64-213">It must be of the form net.msmq://, similar to how it is specified using the `NetMsmqBinding`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="18f64-214">Consulte também</span><span class="sxs-lookup"><span data-stu-id="18f64-214">See Also</span></span>  
 [<span data-ttu-id="18f64-215">Hospedagem na Web de um aplicativo na fila</span><span class="sxs-lookup"><span data-stu-id="18f64-215">Web Hosting a Queued Application</span></span>](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md)
