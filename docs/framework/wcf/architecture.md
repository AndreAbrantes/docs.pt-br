---
title: Arquitetura do Windows Communication Foundation
ms.date: 03/30/2017
helpviewer_keywords:
- Windows Communication Foundation [WCF], architecture
- WCF [WCF], architecture
- architecture [WCF]
ms.assetid: a3bcb0a1-56ea-4ba6-9736-d260d90dade5
ms.openlocfilehash: f34a05a436dd021f0d1fcc05f3a12a058123acdc
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/15/2019
ms.locfileid: "72320828"
---
# <a name="windows-communication-foundation-architecture"></a><span data-ttu-id="9ccc7-102">Arquitetura do Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="9ccc7-102">Windows Communication Foundation Architecture</span></span>
<span data-ttu-id="9ccc7-103">O gráfico a seguir ilustra as principais camadas da arquitetura do Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="9ccc7-103">The following graphic illustrates the major layers of the Windows Communication Foundation (WCF) architecture.</span></span>  
  
## <a name="wcf-architecture"></a><span data-ttu-id="9ccc7-104">Arquitetura do WCF</span><span class="sxs-lookup"><span data-stu-id="9ccc7-104">WCF Architecture</span></span>  
 <span data-ttu-id="9ccc7-105">![A arquitetura do WCF](./media/wcf-architecture.gif "WCF_Architecture")</span><span class="sxs-lookup"><span data-stu-id="9ccc7-105">![The WCF Architecture](./media/wcf-architecture.gif "WCF_Architecture")</span></span>  
  
### <a name="contracts-and-descriptions"></a><span data-ttu-id="9ccc7-106">Contratos e descrições</span><span class="sxs-lookup"><span data-stu-id="9ccc7-106">Contracts and Descriptions</span></span>  
 <span data-ttu-id="9ccc7-107">Os contratos definem vários aspectos do sistema de mensagens.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-107">Contracts define various aspects of the message system.</span></span> <span data-ttu-id="9ccc7-108">O contrato de dados descreve todos os parâmetros que compõem cada mensagem que um serviço pode criar ou consumir.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-108">The data contract describes every parameter that makes up every message that a service can create or consume.</span></span> <span data-ttu-id="9ccc7-109">Os parâmetros de mensagem são definidos por documentos XSD, permitindo que qualquer sistema que entenda o XML processe os documentos.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-109">The message parameters are defined by XML Schema definition language (XSD) documents, enabling any system that understands XML to process the documents.</span></span> <span data-ttu-id="9ccc7-110">O contrato de mensagem define partes de mensagem específicas usando protocolos SOAP e permite um controle mais refinado sobre partes da mensagem, quando a interoperabilidade exige tal precisão.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-110">The message contract defines specific message parts using SOAP protocols, and allows finer-grained control over parts of the message, when interoperability demands such precision.</span></span> <span data-ttu-id="9ccc7-111">O contrato de serviço especifica as assinaturas de método real do serviço e é distribuído como uma interface em uma das linguagens de programação com suporte, como Visual Basic ou C#Visual.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-111">The service contract specifies the actual method signatures of the service, and is distributed as an interface in one of the supported programming languages, such as Visual Basic or Visual C#.</span></span>  
  
 <span data-ttu-id="9ccc7-112">Políticas e associações determinam as condições necessárias para se comunicar com um serviço.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-112">Policies and bindings stipulate the conditions required to communicate with a service.</span></span>  <span data-ttu-id="9ccc7-113">Por exemplo, a associação deve (no mínimo) especificar o transporte usado (por exemplo, HTTP ou TCP) e uma codificação.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-113">For example, the binding must (at a minimum) specify the transport used (for example, HTTP or TCP), and an encoding.</span></span> <span data-ttu-id="9ccc7-114">As políticas incluem requisitos de segurança e outras condições que devem ser atendidas para se comunicar com um serviço.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-114">Policies include security requirements and other conditions that must be met to communicate with a service.</span></span>  
  
### <a name="service-runtime"></a><span data-ttu-id="9ccc7-115">Tempo de execução do serviço</span><span class="sxs-lookup"><span data-stu-id="9ccc7-115">Service Runtime</span></span>  
 <span data-ttu-id="9ccc7-116">A camada de tempo de execução de serviço contém os comportamentos que ocorrem somente durante a operação real do serviço, ou seja, os comportamentos de tempo de execução do serviço.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-116">The service runtime layer contains the behaviors that occur only during the actual operation of the service, that is, the runtime behaviors of the service.</span></span> <span data-ttu-id="9ccc7-117">A limitação controla quantas mensagens são processadas, o que pode ser variado se a demanda do serviço aumentar para um limite predefinido.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-117">Throttling controls how many messages are processed, which can be varied if the demand for the service grows to a preset limit.</span></span> <span data-ttu-id="9ccc7-118">Um comportamento de erro especifica o que ocorre quando ocorre um erro interno no serviço, por exemplo, controlando quais informações são comunicadas ao cliente.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-118">An error behavior specifies what occurs when an internal error occurs on the service, for example, by controlling what information is communicated to the client.</span></span> <span data-ttu-id="9ccc7-119">(Muitas informações podem dar a um usuário mal-intencionado uma vantagem na montagem de um ataque.) O comportamento dos metadados controla como e se os metadados são disponibilizados para o mundo exterior.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-119">(Too much information can give a malicious user an advantage in mounting an attack.) Metadata behavior governs how and whether metadata is made available to the outside world.</span></span> <span data-ttu-id="9ccc7-120">Comportamento da instância especifica quantas instâncias do serviço podem ser executadas (por exemplo, um singleton especifica apenas uma instância para processar todas as mensagens).</span><span class="sxs-lookup"><span data-stu-id="9ccc7-120">Instance behavior specifies how many instances of the service can be run (for example, a singleton specifies only one instance to process all messages).</span></span> <span data-ttu-id="9ccc7-121">O comportamento da transação permite a reversão de operações transacionadas se ocorrer uma falha.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-121">Transaction behavior enables the rollback of transacted operations if a failure occurs.</span></span> <span data-ttu-id="9ccc7-122">O comportamento de expedição é o controle de como uma mensagem é processada pela infraestrutura do WCF.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-122">Dispatch behavior is the control of how a message is processed by the WCF infrastructure.</span></span>  
  
 <span data-ttu-id="9ccc7-123">A extensibilidade permite a personalização de processos de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-123">Extensibility enables customization of runtime processes.</span></span> <span data-ttu-id="9ccc7-124">Por exemplo, a inspeção de mensagem é o recurso para inspecionar partes de uma mensagem, e a filtragem de parâmetros permite que ações predefinidas ocorram com base em filtros que atuam em cabeçalhos de mensagens.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-124">For example, message inspection is the facility to inspect parts of a message, and parameter filtering enables preset actions to occur based on filters acting on message headers.</span></span>  
  
### <a name="messaging"></a><span data-ttu-id="9ccc7-125">Mensagens</span><span class="sxs-lookup"><span data-stu-id="9ccc7-125">Messaging</span></span>  
 <span data-ttu-id="9ccc7-126">A camada de mensagens é composta de *canais*.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-126">The messaging layer is composed of *channels*.</span></span> <span data-ttu-id="9ccc7-127">Um canal é um componente que processa uma mensagem de alguma forma, por exemplo, Autenticando uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-127">A channel is a component that processes a message in some way, for example, by authenticating a message.</span></span> <span data-ttu-id="9ccc7-128">Um conjunto de canais também é conhecido como uma *pilha de canais*.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-128">A set of channels is also known as a *channel stack*.</span></span> <span data-ttu-id="9ccc7-129">Os canais operam em mensagens e cabeçalhos de mensagens.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-129">Channels operate on messages and message headers.</span></span> <span data-ttu-id="9ccc7-130">Isso é diferente da camada de tempo de execução de serviço, que se preocupa principalmente com o processamento do conteúdo de corpos de mensagens.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-130">This is different from the service runtime layer, which is primarily concerned about processing the contents of message bodies.</span></span>  
  
 <span data-ttu-id="9ccc7-131">Há dois tipos de canais: canais de transporte e canais de protocolo.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-131">There are two types of channels: transport channels and protocol channels.</span></span>  
  
 <span data-ttu-id="9ccc7-132">Os canais de transporte lêem e gravam mensagens da rede (ou de algum outro ponto de comunicação com o mundo exterior).</span><span class="sxs-lookup"><span data-stu-id="9ccc7-132">Transport channels read and write messages from the network (or some other communication point with the outside world).</span></span> <span data-ttu-id="9ccc7-133">Alguns transportes usam um codificador para converter mensagens (que são representadas como XML InfoSets) de e para a representação de fluxo de bytes usada pela rede.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-133">Some transports use an encoder to convert messages (which are represented as XML Infosets) to and from the byte stream representation used by the network.</span></span> <span data-ttu-id="9ccc7-134">Exemplos de transportes são HTTP, pipes nomeados, TCP e MSMQ.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-134">Examples of transports are HTTP, named pipes, TCP, and MSMQ.</span></span> <span data-ttu-id="9ccc7-135">Exemplos de codificações são XML e binários otimizados.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-135">Examples of encodings are XML and optimized binary.</span></span>  
  
 <span data-ttu-id="9ccc7-136">Os canais de protocolo implementam protocolos de processamento de mensagens, muitas vezes lendo ou gravando cabeçalhos adicionais na mensagem.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-136">Protocol channels implement message processing protocols, often by reading or writing additional headers to the message.</span></span> <span data-ttu-id="9ccc7-137">Exemplos desses protocolos incluem WS-Security e WS-fiabilidade.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-137">Examples of such protocols include WS-Security and WS-Reliability.</span></span>  
  
 <span data-ttu-id="9ccc7-138">A camada de mensagens ilustra os formatos possíveis e os padrões de troca dos dados.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-138">The messaging layer illustrates the possible formats and exchange patterns of the data.</span></span> <span data-ttu-id="9ccc7-139">O WS-Security é uma implementação da especificação WS-Security que habilita a segurança na camada de mensagens.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-139">WS-Security is an implementation of the WS-Security specification enabling security at the message layer.</span></span> <span data-ttu-id="9ccc7-140">O canal de mensagens WS-Reliable permite a garantia de entrega de mensagens.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-140">The WS-Reliable Messaging channel enables the guarantee of message delivery.</span></span> <span data-ttu-id="9ccc7-141">Os codificadores apresentam uma variedade de codificações que podem ser usadas para atender às necessidades da mensagem.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-141">The encoders present a variety of encodings that can be used to suit the needs of the message.</span></span> <span data-ttu-id="9ccc7-142">O canal HTTP especifica que o protocolo de transporte de hipertexto é usado para entrega de mensagens.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-142">The HTTP channel specifies that the HyperText Transport Protocol is used for message delivery.</span></span> <span data-ttu-id="9ccc7-143">De modo semelhante, o canal TCP especifica o protocolo TCP.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-143">The TCP channel similarly specifies the TCP protocol.</span></span> <span data-ttu-id="9ccc7-144">O canal de fluxo de transações governa padrões de mensagens transacionadas.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-144">The Transaction Flow channel governs transacted message patterns.</span></span> <span data-ttu-id="9ccc7-145">O canal de pipe nomeado permite a comunicação entre processos.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-145">The Named Pipe channel enables interprocess communication.</span></span> <span data-ttu-id="9ccc7-146">O canal MSMQ permite a interoperação com aplicativos MSMQ.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-146">The MSMQ channel enables interoperation with MSMQ applications.</span></span>  
  
### <a name="hosting-and-activation"></a><span data-ttu-id="9ccc7-147">Hospedagem e ativação</span><span class="sxs-lookup"><span data-stu-id="9ccc7-147">Hosting and Activation</span></span>  
 <span data-ttu-id="9ccc7-148">Em sua forma final, um serviço é um programa.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-148">In its final form, a service is a program.</span></span> <span data-ttu-id="9ccc7-149">Assim como outros programas, um serviço deve ser executado em um executável.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-149">Like other programs, a service must be run in an executable.</span></span> <span data-ttu-id="9ccc7-150">Isso é conhecido como um serviço *hospedado internamente* .</span><span class="sxs-lookup"><span data-stu-id="9ccc7-150">This is known as a *self-hosted* service.</span></span>  
  
 <span data-ttu-id="9ccc7-151">Os serviços também podem ser *hospedados*ou executados em um executável gerenciado por um agente externo, como o WAS (serviço de ativação do Windows ou IIS).</span><span class="sxs-lookup"><span data-stu-id="9ccc7-151">Services can also be *hosted*, or run in an executable managed by an external agent, such as IIS or Windows Activation Service (WAS).</span></span> <span data-ttu-id="9ccc7-152">O WAS permite que aplicativos WCF sejam ativados automaticamente quando implantados em um computador que executa o WAS.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-152">WAS enables WCF applications to be activated automatically when deployed on a computer running WAS.</span></span> <span data-ttu-id="9ccc7-153">Os serviços também podem ser executados manualmente como executáveis (arquivos. exe).</span><span class="sxs-lookup"><span data-stu-id="9ccc7-153">Services can also be manually run as executables (.exe files).</span></span> <span data-ttu-id="9ccc7-154">Um serviço também pode ser executado automaticamente como um serviço do Windows.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-154">A service can also be run automatically as a Windows service.</span></span> <span data-ttu-id="9ccc7-155">Os componentes COM+ também podem ser hospedados como serviços WCF.</span><span class="sxs-lookup"><span data-stu-id="9ccc7-155">COM+ components can also be hosted as WCF services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9ccc7-156">Consulte também</span><span class="sxs-lookup"><span data-stu-id="9ccc7-156">See also</span></span>

- [<span data-ttu-id="9ccc7-157">O que é o Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="9ccc7-157">What Is Windows Communication Foundation</span></span>](whats-wcf.md)
- [<span data-ttu-id="9ccc7-158">Conceitos fundamentais do Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="9ccc7-158">Fundamental Windows Communication Foundation Concepts</span></span>](fundamental-concepts.md)
