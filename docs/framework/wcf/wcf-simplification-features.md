---
title: funcionalidades de simplificação do WCF
ms.date: 03/30/2017
ms.assetid: 4535a511-6064-4da0-b361-80262a891663
ms.openlocfilehash: 28a05053fda8380b55a1a9eee20119b8c4cfccfe
ms.sourcegitcommit: 700ea803fb06c5ce98de017c7f76463ba33ff4a9
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/19/2020
ms.locfileid: "77452650"
---
# <a name="wcf-simplification-features"></a><span data-ttu-id="b9dcc-102">funcionalidades de simplificação do WCF</span><span class="sxs-lookup"><span data-stu-id="b9dcc-102">WCF Simplification Features</span></span>

<span data-ttu-id="b9dcc-103">Este tópico discute os novos recursos que facilitam escrever aplicativos WCF.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-103">This topic discusses new features that make writing WCF applications simpler.</span></span>

## <a name="simplified-generated-configuration-files"></a><span data-ttu-id="b9dcc-104">Arquivos de configuração gerados simplificados</span><span class="sxs-lookup"><span data-stu-id="b9dcc-104">Simplified Generated Configuration Files</span></span>

<span data-ttu-id="b9dcc-105">Quando você adiciona uma referência de serviço no Visual Studio ou usa a ferramenta SvcUtil.exe, um arquivo de configuração de cliente é gerado.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-105">When you add a service reference in Visual Studio or use the SvcUtil.exe tool a client configuration file is generated.</span></span> <span data-ttu-id="b9dcc-106">Em versões anteriores do WCF, esses arquivos de configuração continham o valor de cada propriedade de associação mesmo se seu valor fosse o valor padrão.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-106">In previous versions of WCF these configuration files contained the value of every binding property even if its value is the default value.</span></span> <span data-ttu-id="b9dcc-107">No WCF 4.5, os arquivos de configuração gerados contêm apenas as propriedades de associação que são definidas com um valor não padrão.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-107">In WCF 4.5 the generated configuration files contain only those binding properties that are set to a non-default value.</span></span>

<span data-ttu-id="b9dcc-108">Veja a seguir um exemplo de um arquivo de configuração gerado por WCF 3.0.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-108">The following is an example of a configuration file generated by WCF 3.0.</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService1" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false"
                    hostNameComparisonMode="StrongWildcard" maxBufferSize="65536"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192"
                        maxArrayLength="16384" maxBytesPerRead="4096"
                        maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:36906/Service1.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService1" contract="IService1"
                name="BasicHttpBinding_IService1" />
        </client>
    </system.serviceModel>
</configuration>
```

<span data-ttu-id="b9dcc-109">Veja a seguir um exemplo do mesmo arquivo de configuração gerado por WCF 4.5.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-109">The following is an example of the same configuration file generated by WCF 4.5.</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService1" />
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:36906/Service1.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService1" contract="IService1"
                name="BasicHttpBinding_IService1" />
        </client>
    </system.serviceModel>
</configuration>
```

## <a name="contract-first-development"></a><span data-ttu-id="b9dcc-110">Desenvolvimento de primeiro contrato</span><span class="sxs-lookup"><span data-stu-id="b9dcc-110">Contract-First Development</span></span>

<span data-ttu-id="b9dcc-111">O WCF agora tem suporte para desenvolvimento do primeiro contrato.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-111">WCF now has support for contract-first development.</span></span> <span data-ttu-id="b9dcc-112">A ferramenta svcutil. exe tem um comutador/serviceContract que permite gerar contratos de serviço e de dados de um documento WSDL.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-112">The svcutil.exe tool has a /serviceContract switch which allows you to generate service and data contracts from a WSDL document.</span></span>

## <a name="add-service-reference-from-a-portable-subset-project"></a><span data-ttu-id="b9dcc-113">Adicione uma referência de serviço de um projeto de subconjunto portátil</span><span class="sxs-lookup"><span data-stu-id="b9dcc-113">Add Service Reference From a Portable Subset Project</span></span>

<span data-ttu-id="b9dcc-114">Os projetos de subconjuntos portáteis permitem que os programadores de assembly .NET mantenham uma única árvore de origem e um sistema de compilação enquanto ainda dão suporte a várias implementações do .NET (desktop, Silverlight, Windows Phone e Xbox).</span><span class="sxs-lookup"><span data-stu-id="b9dcc-114">Portable subset projects enable .NET assembly programmers to maintain a single source tree and build system while still supporting multiple .NET implementations (desktop, Silverlight, Windows Phone, and Xbox).</span></span> <span data-ttu-id="b9dcc-115">Os projetos de subconjuntos portáteis só fazem referência a bibliotecas portáteis .NET que são assemblies que podem ser usados em qualquer implementação do .NET.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-115">Portable subset projects only reference .NET portable libraries that are assemblies that can be used on any .NET implementation.</span></span> <span data-ttu-id="b9dcc-116">A experiência do desenvolvedor é a mesma que adicionar uma referência de serviço dentro de qualquer outro aplicativo cliente WCF.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-116">The developer experience is the same as adding a service reference within any other WCF client application.</span></span> <span data-ttu-id="b9dcc-117">Para obter mais informações, consulte [Adicionar referência de serviço em um projeto de subconjunto portátil](add-service-reference-in-a-portable-subset-project.md).</span><span class="sxs-lookup"><span data-stu-id="b9dcc-117">For more information, see [Add Service Reference in a Portable Subset Project](add-service-reference-in-a-portable-subset-project.md).</span></span>

## <a name="aspnet-compatibility-mode-default-changed"></a><span data-ttu-id="b9dcc-118">Padrão do modo de compatibilidade do ASP.NET alterado</span><span class="sxs-lookup"><span data-stu-id="b9dcc-118">ASP.NET Compatibility Mode Default Changed</span></span>

<span data-ttu-id="b9dcc-119">O WCF fornece o modo de compatibilidade do ASP.NET para conceder aos desenvolvedores acesso completo aos recursos no pipeline HTTP do ASP.NET ao escrever serviços do WCF.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-119">WCF provides ASP.NET compatibility mode to grant developers full access to the features in the ASP.NET HTTP pipeline when writing WCF services.</span></span> <span data-ttu-id="b9dcc-120">Para usar esse modo, você deve definir o atributo `aspNetCompatibilityEnabled` como true na seção [\<servicehostingenvironment >](../configure-apps/file-schema/wcf/servicehostingenvironment.md) do Web. config. Além disso, qualquer serviço nesse appDomain precisa ter a propriedade `RequirementsMode` em seu <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> definido como <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> ou <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-120">To use this mode, you must set the `aspNetCompatibilityEnabled` attribute to true in the [\<serviceHostingEnvironment>](../configure-apps/file-schema/wcf/servicehostingenvironment.md) section of web.config. Additionally, any service in this appDomain needs to have the `RequirementsMode` property on its <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> set to <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> or <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>.</span></span> <span data-ttu-id="b9dcc-121">Por padrão <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> agora está definido como <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> e o modelo de aplicativo de serviço WCF padrão define o atributo `aspNetCompatibilityEnabled` como `true`.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-121">By default <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> is now set to <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> and the default WCF service application template sets the `aspNetCompatibilityEnabled` attribute to `true`.</span></span> <span data-ttu-id="b9dcc-122">Para obter mais informações, consulte [What ' s New in Windows Communication Foundation 4,5](whats-new.md) and [WCF Services and ASP.net](./feature-details/wcf-services-and-aspnet.md).</span><span class="sxs-lookup"><span data-stu-id="b9dcc-122">For more information, see [What's New in Windows Communication Foundation 4.5](whats-new.md) and [WCF Services and ASP.NET](./feature-details/wcf-services-and-aspnet.md).</span></span>

## <a name="streaming-improvements"></a><span data-ttu-id="b9dcc-123">Melhorias de streaming</span><span class="sxs-lookup"><span data-stu-id="b9dcc-123">Streaming Improvements</span></span>

- <span data-ttu-id="b9dcc-124">Novo suporte para streaming assíncrono foi adicionado ao WCF.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-124">New support for asynchronous streaming has been added to WCF.</span></span> <span data-ttu-id="b9dcc-125">Para habilitar o streaming assíncrono, adicione o comportamento do ponto de extremidade <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> ao host de serviço e defina sua propriedade <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> como `true`.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-125">To enable asynchronous streaming, add the  <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> endpoint behavior to the service host and set its <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> property to `true`.</span></span> <span data-ttu-id="b9dcc-126">Isso pode beneficiar a escalabilidade quando um serviço está enviando mensagens transmitidas a vários clientes que estão lendo lentamente.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-126">This can benefit scalability when a service is sending streamed messages to multiple clients which are reading slowly.</span></span> <span data-ttu-id="b9dcc-127">O WCF não bloqueia mais um thread por cliente e liberará o thread para atender outro cliente.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-127">WCF does not block one thread per client anymore and will free up the thread to service another client.</span></span>

- <span data-ttu-id="b9dcc-128">Removeu limitações em torno do armazenamento em buffer de mensagens quando um serviço é hospedado no IIS.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-128">Removed limitations around buffering of messages when a service is IIS hosted.</span></span> <span data-ttu-id="b9dcc-129">Em versões anteriores do WCF, ao receber uma mensagem para um serviço hospedado no IIS que usa a transferência da mensagem por streaming, o ASP.NET armazenaria em buffer a mensagem inteira antes de enviar para o WCF.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-129">In previous versions of WCF when receiving a message for an IIS-hosted service that used streaming message transfer, ASP.NET would buffer the entire message before sending it to WCF.</span></span> <span data-ttu-id="b9dcc-130">Isso causaria um grande consumo de memória.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-130">This would cause large memory consumption.</span></span> <span data-ttu-id="b9dcc-131">Esse armazenamento em buffer foi removido no .NET 4.5 e os serviços do WCF hospedados no IIS podem começar a processar o fluxo de entrada antes que a mensagem inteira tenha sido recebida, habilitando o streaming verdadeiro.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-131">This buffering has been removed in .NET 4.5 and now IIS-hosted WCF services can start processing the incoming stream before the entire message has been received, thereby enabling true streaming.</span></span> <span data-ttu-id="b9dcc-132">Isso permite que o WCF responda imediatamente as mensagens e permite o desempenho aprimorado.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-132">This allows WCF to respond immediately to messages and allows improved performance.</span></span> <span data-ttu-id="b9dcc-133">Além disso, você não tem mais que especificar um valor para `maxRequestLength`, o limite de tamanho do ASP.NET sobre solicitações de entrada.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-133">In addition, you no longer have to specify a value for `maxRequestLength`, the ASP.NET size limit on incoming requests.</span></span> <span data-ttu-id="b9dcc-134">Se essa propriedade for definida, ela será ignorada.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-134">If this property is set, it is ignored.</span></span> <span data-ttu-id="b9dcc-135">Para obter mais informações sobre `maxRequestLength` consulte [\<elemento de configuração > httpRuntime](https://docs.microsoft.com/previous-versions/dotnet/netframework-1.1/e1f13641(v=vs.71)).</span><span class="sxs-lookup"><span data-stu-id="b9dcc-135">For more information about `maxRequestLength` see [\<httpRuntime> configuration element](https://docs.microsoft.com/previous-versions/dotnet/netframework-1.1/e1f13641(v=vs.71)).</span></span> <span data-ttu-id="b9dcc-136">Você ainda precisará configurar o maxAllowedContentLength para obter mais informações, consulte [limites de solicitação do IIS](https://docs.microsoft.com/previous-versions/iis/settings-schema/ms689462(v=vs.90)).</span><span class="sxs-lookup"><span data-stu-id="b9dcc-136">You will still need to configure the maxAllowedContentLength, For more information, see [IIS Request Limits](https://docs.microsoft.com/previous-versions/iis/settings-schema/ms689462(v=vs.90)).</span></span>

## <a name="new-transport-default-values"></a><span data-ttu-id="b9dcc-137">Novos valores padrão de transporte</span><span class="sxs-lookup"><span data-stu-id="b9dcc-137">New Transport Default Values</span></span>

<span data-ttu-id="b9dcc-138">A tabela a seguir descreve as configurações que foram alteradas e onde localizar informações adicionais.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-138">The following table describes the settings that have changed and where to find additional information.</span></span>

|<span data-ttu-id="b9dcc-139">Propriedade</span><span class="sxs-lookup"><span data-stu-id="b9dcc-139">Property</span></span>|<span data-ttu-id="b9dcc-140">Por</span><span class="sxs-lookup"><span data-stu-id="b9dcc-140">On</span></span>|<span data-ttu-id="b9dcc-141">Novo padrão</span><span class="sxs-lookup"><span data-stu-id="b9dcc-141">New Default</span></span>|<span data-ttu-id="b9dcc-142">Mais informações</span><span class="sxs-lookup"><span data-stu-id="b9dcc-142">More Information</span></span>|
|--------------|--------|-----------------|----------------------|
|<span data-ttu-id="b9dcc-143">channelInitializationTimeout</span><span class="sxs-lookup"><span data-stu-id="b9dcc-143">channelInitializationTimeout</span></span>|<xref:System.ServiceModel.NetTcpBinding>|<span data-ttu-id="b9dcc-144">30 segundos</span><span class="sxs-lookup"><span data-stu-id="b9dcc-144">30 seconds</span></span>|<span data-ttu-id="b9dcc-145">Essa propriedade determina quanto tempo uma conexão TCP pode tomar para se autenticar usando o protocolo de enquadramento .NET.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-145">This property determines how long a TCP connection can take to authenticate itself using the .NET Framing protocol.</span></span> <span data-ttu-id="b9dcc-146">Um cliente precisa enviar alguns dados iniciais antes que o servidor tenha informações suficientes para executar a autenticação.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-146">A client needs to send some initial data before the server has enough information to perform authentication.</span></span> <span data-ttu-id="b9dcc-147">Esse tempo limite é feito intencionalmente menor que o ReceiveTimeout (10 min) para que os clientes não autenticados mal-intencionados não mantenham as conexões vinculadas no servidor por muito tempo.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-147">This timeout is intentionally made smaller than the ReceiveTimeout (10 min) so that malicious unauthenticated clients do not keep the connections tied up to the server for long.</span></span> <span data-ttu-id="b9dcc-148">O valor padrão é 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-148">The default value is 30 seconds.</span></span> <span data-ttu-id="b9dcc-149">Para obter mais informações sobre <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.ChannelInitializationTimeout%2A></span><span class="sxs-lookup"><span data-stu-id="b9dcc-149">For more information about <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.ChannelInitializationTimeout%2A></span></span>|
|<span data-ttu-id="b9dcc-150">listenBacklog</span><span class="sxs-lookup"><span data-stu-id="b9dcc-150">listenBacklog</span></span>|<xref:System.ServiceModel.NetTcpBinding>|<span data-ttu-id="b9dcc-151">16 \* número de processadores</span><span class="sxs-lookup"><span data-stu-id="b9dcc-151">16 \* number of processors</span></span>|<span data-ttu-id="b9dcc-152">Esta propriedade de nível de soquete descreve o número de solicitações com aceitações pendentes a serem enfileiradas.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-152">This socket-level property describes the number of "pending accept" requests to be queued.</span></span> <span data-ttu-id="b9dcc-153">Se a fila de pendências de escuta for preenchida, as novas solicitações de soquete serão rejeitadas.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-153">If the listen backlog queue fills up, new socket requests will be rejected.</span></span> <span data-ttu-id="b9dcc-154">Para obter mais informações sobre <xref:System.ServiceModel.NetTcpBinding.ListenBacklog%2A></span><span class="sxs-lookup"><span data-stu-id="b9dcc-154">For more information about <xref:System.ServiceModel.NetTcpBinding.ListenBacklog%2A></span></span>|
|<span data-ttu-id="b9dcc-155">maxPendingAccepts</span><span class="sxs-lookup"><span data-stu-id="b9dcc-155">maxPendingAccepts</span></span>|<span data-ttu-id="b9dcc-156">ConnectionOrientedTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="b9dcc-156">ConnectionOrientedTransportBindingElement</span></span><br /><br /> <span data-ttu-id="b9dcc-157">SMSvcHost.exe</span><span class="sxs-lookup"><span data-stu-id="b9dcc-157">SMSvcHost.exe</span></span>|<span data-ttu-id="b9dcc-158">2 \* número de processadores para o transporte</span><span class="sxs-lookup"><span data-stu-id="b9dcc-158">2 \* number of processors for transport</span></span><br /><br /> <span data-ttu-id="b9dcc-159">4 \* número de processadores para SMSvcHost. exe</span><span class="sxs-lookup"><span data-stu-id="b9dcc-159">4 \* number of processors for SMSvcHost.exe</span></span>|<span data-ttu-id="b9dcc-160">Essa propriedade limita o número de canais que o servidor pode ter em espera em um ouvinte.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-160">This property limits the number of channels that the server can have waiting on a listener.</span></span> <span data-ttu-id="b9dcc-161">Quando MaxPendingAccepts for muito baixo, haverá um pequeno intervalo de tempo no qual todos os canais de espera terão ligado conexões de serviços, mas nenhum novo canal terá começado a escutar.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-161">When MaxPendingAccepts is too low, there will be a small interval of time in which all of the waiting channels have started servicing connections, but no new channels have begun listening.</span></span> <span data-ttu-id="b9dcc-162">Uma conexão poderá chegar durante esse intervalo e falhará porque nada o está aguardando no servidor.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-162">A connection can arrive during this interval and will fail because nothing is waiting for it on the server.</span></span> <span data-ttu-id="b9dcc-163">Essa propriedade pode ser configurada definindo a propriedade <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A> como um número maior.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-163">This property can be configured by setting the <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A> property to a larger number.</span></span> <span data-ttu-id="b9dcc-164">Para obter mais informações, consulte <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingAccepts%2A> e [Configurando o serviço de compartilhamento de porta Net. TCP](./feature-details/configuring-the-net-tcp-port-sharing-service.md)</span><span class="sxs-lookup"><span data-stu-id="b9dcc-164">For more information, see <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingAccepts%2A> and [Configuring the Net.TCP Port Sharing Service](./feature-details/configuring-the-net-tcp-port-sharing-service.md)</span></span>|
|<span data-ttu-id="b9dcc-165">maxPendingConnections</span><span class="sxs-lookup"><span data-stu-id="b9dcc-165">maxPendingConnections</span></span>|<span data-ttu-id="b9dcc-166">ConnectionOrientedTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="b9dcc-166">ConnectionOrientedTransportBindingElement</span></span>|<span data-ttu-id="b9dcc-167">12 \* número de processadores</span><span class="sxs-lookup"><span data-stu-id="b9dcc-167">12 \* number of processors</span></span>|<span data-ttu-id="b9dcc-168">Esta propriedade controla quantas conexões um transporte aceitou, mas não foram selecionadas pelo Dispatcher do ServiceModel.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-168">This property controls how many connections a transport has accepted but have not been picked up by the ServiceModel Dispatcher.</span></span> <span data-ttu-id="b9dcc-169">Para definir esse valor, use `MaxConnections` na associação ou `maxOutboundConnectionsPerEndpoint` no elemento de associação.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-169">To set this value, use `MaxConnections` on the binding or `maxOutboundConnectionsPerEndpoint` on the binding element.</span></span> <span data-ttu-id="b9dcc-170">Para obter mais informações sobre <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A></span><span class="sxs-lookup"><span data-stu-id="b9dcc-170">For more information about <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A></span></span>|
|<span data-ttu-id="b9dcc-171">receiveTimeout</span><span class="sxs-lookup"><span data-stu-id="b9dcc-171">receiveTimeout</span></span>|<span data-ttu-id="b9dcc-172">SMSvcHost.exe</span><span class="sxs-lookup"><span data-stu-id="b9dcc-172">SMSvcHost.exe</span></span>|<span data-ttu-id="b9dcc-173">30 segundos</span><span class="sxs-lookup"><span data-stu-id="b9dcc-173">30 seconds</span></span>|<span data-ttu-id="b9dcc-174">Esta propriedade especifica o tempo limite para ler os dados do enquadramento de TCP e executar a conexão que distribui de conexões subjacentes.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-174">This property specifies the timeout for reading the TCP framing data and performing connection dispatching from the underlying connections.</span></span> <span data-ttu-id="b9dcc-175">Isso existir para colocar um limite na quantidade de tempo que o serviço SMSvcHost.exe é mantido envolvido para ler os dados do preâmbulo de uma conexão de entrada.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-175">This exists to put a cap on the amount of time SMSvcHost.exe service is kept engaged to read the preamble data from an incoming connection.</span></span> <span data-ttu-id="b9dcc-176">Para obter mais informações, consulte [Configurando o serviço de compartilhamento de porta Net. TCP](./feature-details/configuring-the-net-tcp-port-sharing-service.md).</span><span class="sxs-lookup"><span data-stu-id="b9dcc-176">For more information, see [Configuring the Net.TCP Port Sharing Service](./feature-details/configuring-the-net-tcp-port-sharing-service.md).</span></span>|

> [!NOTE]
> <span data-ttu-id="b9dcc-177">Essas novas opções são usadas apenas se você implantar o serviço WCF em um computador com o .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-177">These new defaults are used only if you deploy the WCF service on a machine with .NET Framework 4.5.</span></span> <span data-ttu-id="b9dcc-178">Se você implantar o mesmo serviço em um computador com o .NET Framework 4.0, os padrões do .NET Framework 4.0 serão usados.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-178">If you deploy the same service on a machine with .NET Framework 4.0, then the .NET Framework 4.0 defaults are used.</span></span> <span data-ttu-id="b9dcc-179">Nesses casos, é recomendável configurar explicitamente esses parâmetros.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-179">In such cases it is recommended to configure these settings explicitly.</span></span>

## <a name="xmldictionaryreaderquotas"></a><span data-ttu-id="b9dcc-180">XmlDictionaryReaderQuotas</span><span class="sxs-lookup"><span data-stu-id="b9dcc-180">XmlDictionaryReaderQuotas</span></span>

<span data-ttu-id="b9dcc-181"><xref:System.Xml.XmlDictionaryReaderQuotas> contém valores de cota configuráveis para os leitores de dicionário de XML que limitam a quantidade de memória utilizada por um codificador ao criar uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-181"><xref:System.Xml.XmlDictionaryReaderQuotas> contains configurable quota values for XML dictionary readers which limit the amount of memory utilized by an encoder while creating a message.</span></span> <span data-ttu-id="b9dcc-182">Embora essas quotas sejam configuráveis, os valores padrão foram alterados para diminuir a possibilidade de um desenvolvedor precisar defini-las explicitamente.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-182">While these quotas are configurable, the default values have changed to lessen the possibility that a developer will need to set them explicitly.</span></span> <span data-ttu-id="b9dcc-183">A cota de `MaxReceivedMessageSize` não foi alterada para que ainda possa limitar o consumo de memória evitando a necessidade de você ter que lidar com a complexidade de <xref:System.Xml.XmlDictionaryReaderQuotas>.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-183">`MaxReceivedMessageSize` quota has not been changed so that it can still limit memory consumption preventing the need for you to deal with the complexity of the <xref:System.Xml.XmlDictionaryReaderQuotas>.</span></span> <span data-ttu-id="b9dcc-184">A tabela a seguir mostra as cotas, seus novos valores padrão e uma explicação breve do uso de cada cota.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-184">The following table shows the quotas, their new default values and a brief explanation of what each quota is used for.</span></span>

|<span data-ttu-id="b9dcc-185">Nome da Cota</span><span class="sxs-lookup"><span data-stu-id="b9dcc-185">Quota Name</span></span>|<span data-ttu-id="b9dcc-186">Valor Padrão</span><span class="sxs-lookup"><span data-stu-id="b9dcc-186">Default Value</span></span>|<span data-ttu-id="b9dcc-187">DESCRIÇÃO</span><span class="sxs-lookup"><span data-stu-id="b9dcc-187">Description</span></span>|
|----------------|-------------------|-----------------|
|<xref:System.Xml.XmlDictionaryReaderQuotas.MaxArrayLength%2A>|<span data-ttu-id="b9dcc-188">Int32.MaxValue</span><span class="sxs-lookup"><span data-stu-id="b9dcc-188">Int32.MaxValue</span></span>|<span data-ttu-id="b9dcc-189">Obtém e define a extensão máxima permitida da matriz.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-189">Gets and sets the maximum allowed array length.</span></span> <span data-ttu-id="b9dcc-190">Essa cota limita o tamanho máximo de uma matriz de primitivas que o leitor de XML retorna, inclusive matrizes de bytes.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-190">This quota limits the maximum size of an array of primitives that the XML reader returns, including byte arrays.</span></span> <span data-ttu-id="b9dcc-191">Essa cota não limita o consumo de memória no próprio leitor de XML, mas em qualquer componente que esteja usando o leitor.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-191">This quota does not limit memory consumption in the XML reader itself, but in whatever component that is using the reader.</span></span> <span data-ttu-id="b9dcc-192">Por exemplo, quando o <xref:System.Runtime.Serialization.DataContractSerializer> usa um leitor protegido com <xref:System.Xml.XmlDictionaryReaderQuotas.MaxArrayLength%2A>, ele não desserializa as matrizes de bytes maiores do que essa cota.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-192">For example, when the <xref:System.Runtime.Serialization.DataContractSerializer> uses a reader secured with <xref:System.Xml.XmlDictionaryReaderQuotas.MaxArrayLength%2A>, it does not deserialize byte arrays larger than this quota.</span></span>|
|<xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A>|<span data-ttu-id="b9dcc-193">Int32.MaxValue</span><span class="sxs-lookup"><span data-stu-id="b9dcc-193">Int32.MaxValue</span></span>|<span data-ttu-id="b9dcc-194">Obtém e define o máximo permitido de bytes retornados para cada leitura.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-194">Gets and sets the maximum allowed bytes returned for each read.</span></span> <span data-ttu-id="b9dcc-195">Essa cota limita o número de bytes que são lidos em uma única operação de leitura ao ler a marca inicial do elemento e seus atributos.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-195">This quota limits the number of bytes that are read in a single Read operation when reading the element start tag and its attributes.</span></span> <span data-ttu-id="b9dcc-196">(Em casos não transmitidos por streaming, o nome do elemento em si não é contado na cota.)</span><span class="sxs-lookup"><span data-stu-id="b9dcc-196">(In non-streamed cases, the element name itself is not counted against the quota).</span></span> <span data-ttu-id="b9dcc-197">Ter atributos XML demais pode consumir todo o tempo de processamento de maneira desproporcional porque a exclusividade dos nomes de atributo tem que ser verificada.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-197">Having too many XML attributes may use up disproportionate processing time because attribute names have to be checked for uniqueness.</span></span> <span data-ttu-id="b9dcc-198">O <xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A> atenua essa ameaça.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-198"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A> mitigates this threat.</span></span>|
|<xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A>|<span data-ttu-id="b9dcc-199">128 nós profundos</span><span class="sxs-lookup"><span data-stu-id="b9dcc-199">128 nodes deep</span></span>|<span data-ttu-id="b9dcc-200">Essa cota limita a profundidade máxima de aninhamento dos elementos XML.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-200">This quota limits the maximum nesting depth of XML elements.</span></span> <span data-ttu-id="b9dcc-201">O <xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A> interage com o <xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A>: o leitor sempre mantém dados na memória para o elemento atual e todos os seus ancestrais, para que o consumo máximo de memória do leitor seja proporcional ao produto dessas duas configurações.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-201"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A> interacts with <xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A>: the reader always keeps data in memory for the current element and all of its ancestors, so the maximum memory consumption of the reader is proportional to the product of these two settings.</span></span> <span data-ttu-id="b9dcc-202">Ao desserializar um grafo de objeto aninhado mais profundamente, o desserializador é forçado para acessar a pilha inteira e gerar um <xref:System.StackOverflowException> irrecuperável.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-202">When deserializing a deeply-nested object graph, the deserializer is forced to access the entire stack and throw an unrecoverable <xref:System.StackOverflowException>.</span></span> <span data-ttu-id="b9dcc-203">Uma correlação direta existe entre aninhamento de XML e aninhamento de objeto para <xref:System.Runtime.Serialization.DataContractSerializer> e <xref:System.Xml.Serialization.XmlSerializer>.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-203">A direct correlation exists between XML nesting and object nesting for both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer>.</span></span> <span data-ttu-id="b9dcc-204">O <xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A> é usado para atenuar essa ameaça.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-204"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A> is used to mitigate this threat.</span></span>|
|<xref:System.Xml.XmlDictionaryReaderQuotas.MaxNameTableCharCount%2A>|<span data-ttu-id="b9dcc-205">Int32.MaxValue</span><span class="sxs-lookup"><span data-stu-id="b9dcc-205">Int32.MaxValue</span></span>|<span data-ttu-id="b9dcc-206">Essa cota limita o número máximo de caracteres permitidos em um nametable.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-206">This quota limits the maximum number of characters allowed in a nametable.</span></span> <span data-ttu-id="b9dcc-207">O nametable contém algumas cadeias de caracteres (como namespaces e prefixos) que são encontrados ao processar um documento XML.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-207">The nametable contains certain strings (such as namespaces and prefixes) that are encountered when processing an XML document.</span></span> <span data-ttu-id="b9dcc-208">Como essas cadeias de caracteres são armazenadas em buffer na memória, essa cota é usada para evitar o armazenamento em buffer excessivo quando o streaming é esperado.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-208">As these strings are buffered in memory, this quota is used to prevent excessive buffering when streaming is expected.</span></span>|
|<xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>|<span data-ttu-id="b9dcc-209">Int32.MaxValue</span><span class="sxs-lookup"><span data-stu-id="b9dcc-209">Int32.MaxValue</span></span>|<span data-ttu-id="b9dcc-210">Essa cota limita o tamanho máximo da cadeia de caracteres que o leitor de XML retorna.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-210">This quota limits the maximum string size that the XML reader returns.</span></span> <span data-ttu-id="b9dcc-211">Essa cota não limita o consumo de memória no próprio leitor de XML, mas no componente que esteja usando o leitor.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-211">This quota does not limit memory consumption in the XML reader itself, but in the component that is using the reader.</span></span> <span data-ttu-id="b9dcc-212">Por exemplo, quando o <xref:System.Runtime.Serialization.DataContractSerializer> usa um leitor protegido com <xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>, ele não desserializa as cadeias de caracteres maiores do que essa cota.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-212">For example, when the <xref:System.Runtime.Serialization.DataContractSerializer> uses a reader secured with <xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>, it does not deserialize strings larger than this quota.</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="b9dcc-213">Consulte "usando o XML com segurança" em [considerações de segurança para dados](./feature-details/security-considerations-for-data.md) para obter mais informações sobre como proteger seus dados.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-213">Refer to "Using XML Safely" under [Security Considerations for Data](./feature-details/security-considerations-for-data.md) for more information about securing your data.</span></span>

> [!NOTE]
> <span data-ttu-id="b9dcc-214">Essas novas opções são usadas apenas se você implantar o serviço WCF em um computador com o .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-214">These new defaults are used only if you deploy the WCF service on a machine with .NET Framework 4.5.</span></span> <span data-ttu-id="b9dcc-215">Se você implantar o mesmo serviço em um computador com o .NET Framework 4.0, os padrões do .NET Framework 4.0 serão usados.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-215">If you deploy the same service on a machine with .NET Framework 4.0, then the .NET Framework 4.0 defaults are used.</span></span> <span data-ttu-id="b9dcc-216">Nesses casos, é recomendável configurar explicitamente esses parâmetros.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-216">In such cases it is recommended to configure these settings explicitly.</span></span>

## <a name="wcf-configuration-validation"></a><span data-ttu-id="b9dcc-217">Validação da instalação do WCF</span><span class="sxs-lookup"><span data-stu-id="b9dcc-217">WCF Configuration Validation</span></span>

<span data-ttu-id="b9dcc-218">Como parte do processo de compilação dentro do Visual Studio, os arquivos de configuração do WCF agora são validados.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-218">As part of the build process within Visual Studio, WCF configuration files are now validated.</span></span> <span data-ttu-id="b9dcc-219">Uma lista de erros de validação ou avisos serão exibidos no Visual Studio se a validação falhar.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-219">A list of validation errors or warnings are displayed in Visual Studio if the validation fails.</span></span>

## <a name="xml-editor-tooltips"></a><span data-ttu-id="b9dcc-220">Dicas do editor XML</span><span class="sxs-lookup"><span data-stu-id="b9dcc-220">XML Editor Tooltips</span></span>

<span data-ttu-id="b9dcc-221">Para ajudar os desenvolvedores novos e existentes do serviço WCF a configurarem os serviços, o editor de XML do Visual Studio agora fornece dicas de ferramenta para cada elemento de configuração e suas propriedades que fazem parte do arquivo de configuração do serviço.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-221">In order to help new and existing WCF service developers to configure their services, the Visual Studio XML editor now provides tooltips for every configuration element and its properties that is part of the service configuration file.</span></span>

## <a name="basichttpbinding-improvements"></a><span data-ttu-id="b9dcc-222">Melhorias de BasicHttpBinding</span><span class="sxs-lookup"><span data-stu-id="b9dcc-222">BasicHttpBinding Improvements</span></span>

1. <span data-ttu-id="b9dcc-223">Habilita um único ponto de extremidade do WCF para responder a diferentes modos de autenticação.</span><span class="sxs-lookup"><span data-stu-id="b9dcc-223">Enables a single WCF endpoint to respond to different authentication modes.</span></span>

2. <span data-ttu-id="b9dcc-224">Permite as configurações de segurança de um serviço WCF a serem controladas pelo IIS</span><span class="sxs-lookup"><span data-stu-id="b9dcc-224">Enables a WCF service’s security settings to be controlled by IIS</span></span>
