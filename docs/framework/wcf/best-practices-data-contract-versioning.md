---
title: 'Melhores práticas: Controle de versão de contrato de dados'
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
ms.openlocfilehash: 9f92e731132eb564b893e3d34ccd322fbcd66ea7
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/08/2019
ms.locfileid: "59118996"
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="85b5c-102">Melhores práticas: Controle de versão de contrato de dados</span><span class="sxs-lookup"><span data-stu-id="85b5c-102">Best Practices: Data Contract Versioning</span></span>
<span data-ttu-id="85b5c-103">Este tópico lista as práticas recomendadas para a criação de contratos de dados que podem evoluir facilmente ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="85b5c-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> <span data-ttu-id="85b5c-104">Para obter mais informações sobre contratos de dados, consulte os tópicos [contratos de dados usando](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="85b5c-104">For more information about data contracts, see the topics in [Using Data Contracts](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="85b5c-105">Observação sobre validação de esquema</span><span class="sxs-lookup"><span data-stu-id="85b5c-105">Note on Schema Validation</span></span>  
 <span data-ttu-id="85b5c-106">Ao discutir o controle de versão de contrato de dados, é importante observar que o esquema de contrato de dados exportado pelo Windows Communication Foundation (WCF) não tem nenhum suporte de controle de versão, além do fato de que os elementos são marcados como opcionais por padrão.</span><span class="sxs-lookup"><span data-stu-id="85b5c-106">In discussing data contract versioning, it is important to note that the data contract schema exported by Windows Communication Foundation (WCF) does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="85b5c-107">Isso significa que até mesmo o cenário controle de versão mais comuns, como adicionar um novo membro de dados, não pode ser implementado de forma coesa em relação a um determinado esquema.</span><span class="sxs-lookup"><span data-stu-id="85b5c-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="85b5c-108">As versões mais recentes de um contrato de dados (com um novo membro de dados, por exemplo) não validam usando o esquema antigo.</span><span class="sxs-lookup"><span data-stu-id="85b5c-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="85b5c-109">No entanto, há muitos cenários em que a conformidade de esquema estrita não é necessária.</span><span class="sxs-lookup"><span data-stu-id="85b5c-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="85b5c-110">Muitas plataformas de serviços da Web, incluindo o WCF e serviços Web XML criados usando ASP.NET, não realize a validação de esquema padrão e tolerar, portanto, os elementos adicionais que não são descritos no esquema.</span><span class="sxs-lookup"><span data-stu-id="85b5c-110">Many Web services platforms, including WCF and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="85b5c-111">Ao trabalhar com essas plataformas, muitos cenários de controle de versão são mais fáceis de implementar.</span><span class="sxs-lookup"><span data-stu-id="85b5c-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="85b5c-112">Portanto, há diretrizes de controle de versão de contrato de dois conjuntos de dados: um conjunto para cenários onde validade de esquema estrita é importante, e outro conjunto para cenários quando não for.</span><span class="sxs-lookup"><span data-stu-id="85b5c-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="85b5c-113">Controle de versão quando a validação de esquema é necessária</span><span class="sxs-lookup"><span data-stu-id="85b5c-113">Versioning When Schema Validation Is Required</span></span>  
 <span data-ttu-id="85b5c-114">Se a validade de esquema estrita é necessária em todas as direções (antigo novo e antigo em nova), contratos de dados devem ser considerados imutáveis.</span><span class="sxs-lookup"><span data-stu-id="85b5c-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="85b5c-115">Se for necessário o controle de versão, um novo contrato de dados deve ser criado, com um nome diferente ou namespace, e o contrato de serviço usando o tipo de dados deve ter uma versão adequadamente.</span><span class="sxs-lookup"><span data-stu-id="85b5c-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="85b5c-116">Por exemplo, uma ordem de compra contrato de serviço chamado de processamento `PoProcessing` com um `PostPurchaseOrder` operação leva um parâmetro que está em conformidade com um `PurchaseOrder` contrato de dados.</span><span class="sxs-lookup"><span data-stu-id="85b5c-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="85b5c-117">Se o `PurchaseOrder` contrato deve ser alterado, você deve criar um novo contrato de dados, ou seja, `PurchaseOrder2`, que inclui as alterações.</span><span class="sxs-lookup"><span data-stu-id="85b5c-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="85b5c-118">Em seguida, você deverá manipular o controle de versão no nível do contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="85b5c-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="85b5c-119">Por exemplo, ao criar uma `PostPurchaseOrder2` operação leva a `PurchaseOrder2` parâmetro, ou criando um `PoProcessing2` contrato de serviço onde o `PostPurchaseOrder` operação leva um `PurchaseOrder2` contrato de dados.</span><span class="sxs-lookup"><span data-stu-id="85b5c-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="85b5c-120">Observe que as alterações em contratos de dados que são referenciados por outros contratos de dados também estendem para a camada de modelo de serviço.</span><span class="sxs-lookup"><span data-stu-id="85b5c-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="85b5c-121">Por exemplo, no cenário anterior a `PurchaseOrder` contrato de dados não precisa alterar.</span><span class="sxs-lookup"><span data-stu-id="85b5c-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="85b5c-122">No entanto, ele contém um membro de dados de um `Customer` contrato de dados, que por sua vez, continha um membro de dados do `Address` contrato de dados, que precisam ser alteradas.</span><span class="sxs-lookup"><span data-stu-id="85b5c-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="85b5c-123">Nesse caso, você precisaria criar uma `Address2` contrato de dados com as alterações necessárias, uma `Customer2` contrato de dados que contém o `Address2` membro de dados e uma `PurchaseOrder2` contrato de dados que contém um `Customer2` membro de dados.</span><span class="sxs-lookup"><span data-stu-id="85b5c-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="85b5c-124">Como no caso anterior, o contrato de serviço tem que ter controle de versão também.</span><span class="sxs-lookup"><span data-stu-id="85b5c-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="85b5c-125">Embora esses exemplos nomes são alterados (por meio do acréscimo "2"), a recomendação é alterar os namespaces em vez de nomes por meio do acréscimo novos namespaces com um número de versão ou uma data.</span><span class="sxs-lookup"><span data-stu-id="85b5c-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="85b5c-126">Por exemplo, o `http://schemas.contoso.com/2005/05/21/PurchaseOrder` contrato de dados seria alteradas para o `http://schemas.contoso.com/2005/10/14/PurchaseOrder` contrato de dados.</span><span class="sxs-lookup"><span data-stu-id="85b5c-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="85b5c-127">Para obter mais informações, consulte as práticas recomendadas: [Controle de versão de serviço](../../../docs/framework/wcf/service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="85b5c-127">For more information, see Best Practices: [Service Versioning](../../../docs/framework/wcf/service-versioning.md).</span></span>  
  
 <span data-ttu-id="85b5c-128">Ocasionalmente, você deve garantir conformidade de esquema estrita para mensagens enviadas pelo seu aplicativo, mas não pode contar com as mensagens de entrada seja estritamente compatíveis com o esquema.</span><span class="sxs-lookup"><span data-stu-id="85b5c-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="85b5c-129">Nesse caso, há um risco de que uma mensagem de entrada pode conter dados estranhos.</span><span class="sxs-lookup"><span data-stu-id="85b5c-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="85b5c-130">Os valores desconhecidos são armazenados e retornados pelo WCF e, portanto, resulta em esquema inválido mensagens sendo enviadas.</span><span class="sxs-lookup"><span data-stu-id="85b5c-130">The extraneous values are stored and returned by WCF and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="85b5c-131">Para evitar esse problema, o recurso de ciclo completo deve ser desativado.</span><span class="sxs-lookup"><span data-stu-id="85b5c-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="85b5c-132">Há duas formas de fazer isso.</span><span class="sxs-lookup"><span data-stu-id="85b5c-132">There are two ways to do this.</span></span>  
  
-   <span data-ttu-id="85b5c-133">Não implementam a <xref:System.Runtime.Serialization.IExtensibleDataObject> interface em qualquer um dos seus tipos.</span><span class="sxs-lookup"><span data-stu-id="85b5c-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
-   <span data-ttu-id="85b5c-134">Aplicar uma <xref:System.ServiceModel.ServiceBehaviorAttribute> de atributo ao seu contrato de serviço com o <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> propriedade definida como `true`.</span><span class="sxs-lookup"><span data-stu-id="85b5c-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="85b5c-135">Para obter mais informações sobre o ciclo completo, consulte [contratos de dados compatíveis por encaminhamento](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="85b5c-135">For more information about round-tripping, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="85b5c-136">Controle de versão quando a validação de esquema não é necessária</span><span class="sxs-lookup"><span data-stu-id="85b5c-136">Versioning When Schema Validation Is Not Required</span></span>  
 <span data-ttu-id="85b5c-137">Conformidade de esquema estrita é raramente necessária.</span><span class="sxs-lookup"><span data-stu-id="85b5c-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="85b5c-138">Muitas plataformas toleram elementos adicionais não descritos por um esquema.</span><span class="sxs-lookup"><span data-stu-id="85b5c-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="85b5c-139">Isso é tolerado, desde que o conjunto completo de recursos descrito em [controle de versão de contrato de dados](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) e [contratos de dados compatíveis por encaminhamento](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) pode ser usado.</span><span class="sxs-lookup"><span data-stu-id="85b5c-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="85b5c-140">As diretrizes a seguir são recomendadas.</span><span class="sxs-lookup"><span data-stu-id="85b5c-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="85b5c-141">Algumas das diretrizes devem ser seguidas exatamente a fim de enviar novas versões de um tipo de onde se espera que mais antiga ou enviar uma antiga onde se espera que um novo.</span><span class="sxs-lookup"><span data-stu-id="85b5c-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="85b5c-142">Outras diretrizes não são estritamente necessárias, mas são listadas aqui porque eles podem ser afetados pelo futuro do controle de versão do esquema.</span><span class="sxs-lookup"><span data-stu-id="85b5c-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1.  <span data-ttu-id="85b5c-143">Não tente contratos de dados de versão por herança de tipo.</span><span class="sxs-lookup"><span data-stu-id="85b5c-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="85b5c-144">Para criar versões posteriores, altere o contrato de dados em um tipo existente ou criar um novo tipo de não relacionado.</span><span class="sxs-lookup"><span data-stu-id="85b5c-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2.  <span data-ttu-id="85b5c-145">O uso de herança junto com os contratos de dados é permitido, desde que a herança não é usada como um mecanismo de controle de versão e certas regras sejam seguidas.</span><span class="sxs-lookup"><span data-stu-id="85b5c-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="85b5c-146">Se um tipo derivado de um determinado tipo de base, não o tornará derivar de um tipo base diferente em uma versão futura (a menos que ele tenha os mesmos dados contrato).</span><span class="sxs-lookup"><span data-stu-id="85b5c-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="85b5c-147">Há uma exceção a isso: você pode inserir um tipo na hierarquia entre um tipo de contrato de dados e seu tipo base, mas somente se ele não contém membros de dados com os mesmos nomes que outros membros em todas as versões possíveis de outros tipos na hierarquia.</span><span class="sxs-lookup"><span data-stu-id="85b5c-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="85b5c-148">Em geral, usando membros de dados com os mesmos nomes em diferentes níveis da mesma hierarquia de herança pode causar problemas graves de controle de versão e deve ser evitada.</span><span class="sxs-lookup"><span data-stu-id="85b5c-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3.  <span data-ttu-id="85b5c-149">Começando com a primeira versão de um contrato de dados, sempre implementar <xref:System.Runtime.Serialization.IExtensibleDataObject> para habilitar o ciclo completo.</span><span class="sxs-lookup"><span data-stu-id="85b5c-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="85b5c-150">Para obter mais informações, consulte [Contratos de dados compatíveis por encaminhamento](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="85b5c-150">For more information, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="85b5c-151">Se você tiver lançado uma ou mais versões de um tipo sem implementar essa interface, você deve implementá-la na próxima versão do tipo.</span><span class="sxs-lookup"><span data-stu-id="85b5c-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4.  <span data-ttu-id="85b5c-152">Em versões posteriores, não altere o nome do contrato de dados ou um namespace.</span><span class="sxs-lookup"><span data-stu-id="85b5c-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="85b5c-153">Se alterar o nome ou namespace do tipo subjacente de contrato de dados, certifique-se preservar o namespace e nome do contrato de dados usando os mecanismos apropriados, como o <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> propriedade do <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="85b5c-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> <span data-ttu-id="85b5c-154">Para obter mais informações sobre como nomear, consulte [nomes de contrato de dados](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="85b5c-154">For more information about naming, see [Data Contract Names](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span></span>  
  
5.  <span data-ttu-id="85b5c-155">Em versões posteriores, não altere os nomes de todos os membros de dados.</span><span class="sxs-lookup"><span data-stu-id="85b5c-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="85b5c-156">Se alterar o nome do campo, propriedade ou evento subjacente o membro de dados, use o `Name` propriedade do <xref:System.Runtime.Serialization.DataMemberAttribute> para preservar o nome de membro de dados existente.</span><span class="sxs-lookup"><span data-stu-id="85b5c-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6.  <span data-ttu-id="85b5c-157">Em versões posteriores, não altere o tipo de qualquer campo, propriedade ou evento subjacente a um membro de dados, de modo que os dados resultantes de contrato que alterações de dados membro.</span><span class="sxs-lookup"><span data-stu-id="85b5c-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="85b5c-158">Tenha em mente que tipos de interface são equivalentes a <xref:System.Object> a fim de determinar o contrato de dados esperado.</span><span class="sxs-lookup"><span data-stu-id="85b5c-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7.  <span data-ttu-id="85b5c-159">Em versões posteriores, não altere a ordem dos membros de dados existente, ajustando a <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> propriedade do <xref:System.Runtime.Serialization.DataMemberAttribute> atributo.</span><span class="sxs-lookup"><span data-stu-id="85b5c-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8.  <span data-ttu-id="85b5c-160">Em versões posteriores, é possível adicionar novos membros de dados.</span><span class="sxs-lookup"><span data-stu-id="85b5c-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="85b5c-161">Eles sempre devem seguir estas regras:</span><span class="sxs-lookup"><span data-stu-id="85b5c-161">They should always follow these rules:</span></span>  
  
    1.  <span data-ttu-id="85b5c-162">O <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> propriedade sempre deve ser deixada com seu valor padrão de `false`.</span><span class="sxs-lookup"><span data-stu-id="85b5c-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2.  <span data-ttu-id="85b5c-163">Se o valor padrão de `null` ou zero para o membro for inaceitável, um método de retorno de chamada deve ser fornecido usando o <xref:System.Runtime.Serialization.OnDeserializingAttribute> para fornecer uma opção razoável, caso o membro não está presente no fluxo de entrada.</span><span class="sxs-lookup"><span data-stu-id="85b5c-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> <span data-ttu-id="85b5c-164">Para obter mais informações sobre o retorno de chamada, consulte [retornos de chamada de serialização tolerantes à versão](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="85b5c-164">For more information about the callback, see [Version-Tolerant Serialization Callbacks](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3.  <span data-ttu-id="85b5c-165">O <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> propriedade deve ser usada para certificar-se de que todos os membros de dados recém-adicionados aparecem após os membros de dados existente.</span><span class="sxs-lookup"><span data-stu-id="85b5c-165">The <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> property should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="85b5c-166">A maneira recomendada de fazer isso é da seguinte maneira: Nenhum dos membros de dados na primeira versão do contrato de dados deve ter suas `Order` conjunto de propriedades.</span><span class="sxs-lookup"><span data-stu-id="85b5c-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="85b5c-167">Todos os membros de dados adicionados na versão 2 do contrato de dados devem ter suas `Order` propriedade definida como 2.</span><span class="sxs-lookup"><span data-stu-id="85b5c-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="85b5c-168">Todos os membros de dados adicionados na versão 3 do contrato de dados devem ter suas `Order` definido como 3 e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="85b5c-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="85b5c-169">É permitido ter mais de um membro de dados definido para a mesma `Order` número.</span><span class="sxs-lookup"><span data-stu-id="85b5c-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="85b5c-170">Não remova os membros de dados em versões posteriores, mesmo se o <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> propriedade foi deixada com sua propriedade default de `false` em versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="85b5c-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="85b5c-171">Não altere o `IsRequired` propriedade em quaisquer membros de dados existente de versão para versão.</span><span class="sxs-lookup"><span data-stu-id="85b5c-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="85b5c-172">Para membros de dados necessários (onde `IsRequired` está `true`), não altere o `EmitDefaultValue` propriedade de versão para versão.</span><span class="sxs-lookup"><span data-stu-id="85b5c-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="85b5c-173">Não tente criar hierarquias de controle de versão ramificado.</span><span class="sxs-lookup"><span data-stu-id="85b5c-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="85b5c-174">Ou seja, deve sempre haver um caminho em pelo menos uma direção de qualquer versão para qualquer outra versão usando apenas as alterações permitidas por essas diretrizes.</span><span class="sxs-lookup"><span data-stu-id="85b5c-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="85b5c-175">Por exemplo, se a versão 1 de um contrato de dados de pessoa contém apenas o membro de dados de nome, você não deve criar 2a de versão do contrato adicionando somente a idade membro e a versão 2b adicionando apenas o membro de endereço.</span><span class="sxs-lookup"><span data-stu-id="85b5c-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="85b5c-176">Vai de 2a e 2b envolveria removendo idade e adicionando endereço; indo na outra direção envolveria a remoção de endereço e a idade de adição.</span><span class="sxs-lookup"><span data-stu-id="85b5c-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="85b5c-177">Removendo membros não é permitido por essas diretrizes.</span><span class="sxs-lookup"><span data-stu-id="85b5c-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="85b5c-178">Você geralmente não deve criar novos subtipos dos tipos de contrato de dados existente em uma nova versão do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="85b5c-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="85b5c-179">Da mesma forma, você não deve criar novos contratos de dados que são usados no lugar de dados membros declarados como objeto ou como tipos de interface.</span><span class="sxs-lookup"><span data-stu-id="85b5c-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="85b5c-180">Criação destas novas classes é permitida somente quando souber que você pode adicionar os novos tipos à lista de tipos conhecidos de todas as instâncias do seu aplicativo antigo.</span><span class="sxs-lookup"><span data-stu-id="85b5c-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="85b5c-181">Por exemplo, na versão 1 do seu aplicativo, você pode ter o tipo com o catálogo de contrato de dados de LibraryItem e os dados de jornal subtipos de contrato.</span><span class="sxs-lookup"><span data-stu-id="85b5c-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="85b5c-182">LibraryItem teria uma lista de tipos conhecidos que contém o catálogo e os jornais.</span><span class="sxs-lookup"><span data-stu-id="85b5c-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="85b5c-183">Suponha que agora você adicionar um tipo de revista na versão 2, que é um subtipo de LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="85b5c-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="85b5c-184">Se você enviar uma instância de revista da versão 2 para a versão 1, o contrato de dados da revista não for encontrado na lista de tipos conhecidos e uma exceção é lançada.</span><span class="sxs-lookup"><span data-stu-id="85b5c-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="85b5c-185">Você não deve adicionar ou remover membros de enumeração entre versões.</span><span class="sxs-lookup"><span data-stu-id="85b5c-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="85b5c-186">Você também não deve renomear os membros de enumeração, a menos que você use a propriedade de nome no `EnumMemberAttribute` atributo para manter seus nomes no modelo de contrato de dados o mesmo.</span><span class="sxs-lookup"><span data-stu-id="85b5c-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="85b5c-187">Coleções são intercambiáveis no modelo de contrato de dados, conforme descrito em [tipos de coleção em contratos de dados](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="85b5c-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="85b5c-188">Isso permite um alto grau de flexibilidade.</span><span class="sxs-lookup"><span data-stu-id="85b5c-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="85b5c-189">No entanto, certifique-se de que você altere inadvertidamente um tipo de coleção em uma não-intercambiáveis propósito de versão para versão.</span><span class="sxs-lookup"><span data-stu-id="85b5c-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="85b5c-190">Por exemplo, não são alterados de uma coleção não personalizado (ou seja, sem o `CollectionDataContractAttribute` atributo) a um personalizado ou um conjunto personalizado para um não personalizado.</span><span class="sxs-lookup"><span data-stu-id="85b5c-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="85b5c-191">Além disso, não altere as propriedades no `CollectionDataContractAttribute` de versão para versão.</span><span class="sxs-lookup"><span data-stu-id="85b5c-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="85b5c-192">A única alteração permitida é adicionar uma propriedade de nome ou Namespace se o namespace ou nome do tipo de coleção subjacente foi alterado e você precisa fazer seus dados de nome e namespace de contrato igual uma versão anterior.</span><span class="sxs-lookup"><span data-stu-id="85b5c-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="85b5c-193">Algumas das diretrizes listadas aqui podem ser ignoradas com segurança quando circunstâncias especiais se aplicam.</span><span class="sxs-lookup"><span data-stu-id="85b5c-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="85b5c-194">Certifique-se de que entender completamente a serialização, desserialização e mecanismos de esquema envolverem antes desviam-se das diretrizes.</span><span class="sxs-lookup"><span data-stu-id="85b5c-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="85b5c-195">Consulte também</span><span class="sxs-lookup"><span data-stu-id="85b5c-195">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>
- <xref:System.Runtime.Serialization.IExtensibleDataObject>
- <xref:System.ServiceModel.ServiceBehaviorAttribute>
- <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>
- <xref:System.Runtime.Serialization.ExtensionDataObject>
- <xref:System.Runtime.Serialization.OnDeserializingAttribute>
- [<span data-ttu-id="85b5c-196">Usando contratos de dados</span><span class="sxs-lookup"><span data-stu-id="85b5c-196">Using Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/using-data-contracts.md)
- [<span data-ttu-id="85b5c-197">Controle de versão de contrato de dados</span><span class="sxs-lookup"><span data-stu-id="85b5c-197">Data Contract Versioning</span></span>](../../../docs/framework/wcf/feature-details/data-contract-versioning.md)
- [<span data-ttu-id="85b5c-198">Nomes de contrato de dados</span><span class="sxs-lookup"><span data-stu-id="85b5c-198">Data Contract Names</span></span>](../../../docs/framework/wcf/feature-details/data-contract-names.md)
- [<span data-ttu-id="85b5c-199">Contratos de dados compatíveis por encaminhamento</span><span class="sxs-lookup"><span data-stu-id="85b5c-199">Forward-Compatible Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md)
- [<span data-ttu-id="85b5c-200">Retornos de chamada de serialização tolerantes à versão</span><span class="sxs-lookup"><span data-stu-id="85b5c-200">Version-Tolerant Serialization Callbacks</span></span>](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md)
