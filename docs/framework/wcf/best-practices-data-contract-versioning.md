---
title: 'Práticas recomendadas: controle de versão de contrato de dados'
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
ms.openlocfilehash: 4d500c37efa4a90e24b06cd2e886147e1f159d4e
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/15/2019
ms.locfileid: "72320788"
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="a3b05-102">Práticas recomendadas: controle de versão de contrato de dados</span><span class="sxs-lookup"><span data-stu-id="a3b05-102">Best Practices: Data Contract Versioning</span></span>
<span data-ttu-id="a3b05-103">Este tópico lista as práticas recomendadas para a criação de contratos de dados que podem evoluir facilmente ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="a3b05-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> <span data-ttu-id="a3b05-104">Para obter mais informações sobre contratos de dados, consulte os tópicos em [usando contratos de dados](./feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="a3b05-104">For more information about data contracts, see the topics in [Using Data Contracts](./feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="a3b05-105">Observação sobre a validação de esquema</span><span class="sxs-lookup"><span data-stu-id="a3b05-105">Note on Schema Validation</span></span>  
 <span data-ttu-id="a3b05-106">Ao discutir o controle de versão de contrato de dados, é importante observar que o esquema de contrato de dados exportado pelo Windows Communication Foundation (WCF) não tem nenhum suporte de controle de versão, além do fato de que os elementos são marcados como opcionais por padrão.</span><span class="sxs-lookup"><span data-stu-id="a3b05-106">In discussing data contract versioning, it is important to note that the data contract schema exported by Windows Communication Foundation (WCF) does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="a3b05-107">Isso significa que até mesmo o cenário de controle de versão mais comum, como adicionar um novo membro de dados, não pode ser implementado de forma direta em relação a um determinado esquema.</span><span class="sxs-lookup"><span data-stu-id="a3b05-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="a3b05-108">As versões mais recentes de um contrato de dados (com um novo membro de dados, por exemplo) não são validadas usando o esquema antigo.</span><span class="sxs-lookup"><span data-stu-id="a3b05-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="a3b05-109">No entanto, há muitos cenários em que a conformidade de esquema estrita não é necessária.</span><span class="sxs-lookup"><span data-stu-id="a3b05-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="a3b05-110">Muitas plataformas de serviços da Web, incluindo WCF e serviços Web XML criados usando ASP.NET, não executam a validação de esquema por padrão e, portanto, toleram elementos extras que não são descritos pelo esquema.</span><span class="sxs-lookup"><span data-stu-id="a3b05-110">Many Web services platforms, including WCF and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="a3b05-111">Ao trabalhar com essas plataformas, muitos cenários de controle de versão são mais fáceis de implementar.</span><span class="sxs-lookup"><span data-stu-id="a3b05-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="a3b05-112">Assim, há dois conjuntos de diretrizes de controle de versão de contrato de dados: um conjunto para cenários em que a validade de esquema estrita é importante e outro conjunto para cenários quando não está.</span><span class="sxs-lookup"><span data-stu-id="a3b05-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="a3b05-113">Controle de versão quando a validação de esquema é necessária</span><span class="sxs-lookup"><span data-stu-id="a3b05-113">Versioning When Schema Validation Is Required</span></span>  
 <span data-ttu-id="a3b05-114">Se a validade estrita do esquema for necessária em todas as direções (nova-para-antigo e antiga para a nova), os contratos de dados deverão ser considerados imutáveis.</span><span class="sxs-lookup"><span data-stu-id="a3b05-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="a3b05-115">Se o controle de versão for necessário, um novo contrato de dados deverá ser criado, com um nome ou namespace diferente, e o contrato de serviço que usa o tipo de dados deve ter a versão do respectivo controle.</span><span class="sxs-lookup"><span data-stu-id="a3b05-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="a3b05-116">Por exemplo, um contrato de serviço de processamento de ordem de compra chamado `PoProcessing` com uma operação `PostPurchaseOrder` usa um parâmetro que está em conformidade com um contrato de dados `PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="a3b05-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="a3b05-117">Se o contrato `PurchaseOrder` precisar ser alterado, você deverá criar um novo contrato de dados, ou seja, `PurchaseOrder2`, que inclui as alterações.</span><span class="sxs-lookup"><span data-stu-id="a3b05-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="a3b05-118">Em seguida, você deve manipular o controle de versão no nível do contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="a3b05-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="a3b05-119">Por exemplo, criando uma operação `PostPurchaseOrder2` que usa o parâmetro `PurchaseOrder2` ou criando um contrato de serviço `PoProcessing2` em que a operação `PostPurchaseOrder` usa um contrato de dados `PurchaseOrder2`.</span><span class="sxs-lookup"><span data-stu-id="a3b05-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="a3b05-120">Observe que as alterações em contratos de dados que são referenciadas por outros contratos de dados também se estendem para a camada de modelo de serviço.</span><span class="sxs-lookup"><span data-stu-id="a3b05-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="a3b05-121">Por exemplo, no cenário anterior, o contrato de dados `PurchaseOrder` não precisa ser alterado.</span><span class="sxs-lookup"><span data-stu-id="a3b05-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="a3b05-122">No entanto, ele contém um membro de dados de um contrato de dados `Customer` que, por sua vez, continha um membro de dados do contrato de dados `Address`, que precisa ser alterado.</span><span class="sxs-lookup"><span data-stu-id="a3b05-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="a3b05-123">Nesse caso, você precisaria criar um contrato de dados `Address2` com as alterações necessárias, um contrato de dados `Customer2` que contenha o membro de dados `Address2` e um contrato de dados `PurchaseOrder2` que contenha um membro de dados `Customer2`.</span><span class="sxs-lookup"><span data-stu-id="a3b05-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="a3b05-124">Como no caso anterior, o contrato de serviço teria de ter a versão também.</span><span class="sxs-lookup"><span data-stu-id="a3b05-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="a3b05-125">Embora esses nomes de exemplos sejam alterados (acrescentando um "2"), a recomendação é alterar namespaces em vez de nomes acrescentando novos namespaces com um número de versão ou uma data.</span><span class="sxs-lookup"><span data-stu-id="a3b05-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="a3b05-126">Por exemplo, o contrato de dados `http://schemas.contoso.com/2005/05/21/PurchaseOrder` mudaria para o contrato de dados `http://schemas.contoso.com/2005/10/14/PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="a3b05-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="a3b05-127">Para obter mais informações, consulte práticas recomendadas: [controle de versão de serviço](service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="a3b05-127">For more information, see Best Practices: [Service Versioning](service-versioning.md).</span></span>  
  
 <span data-ttu-id="a3b05-128">Ocasionalmente, você deve garantir a conformidade de esquema estrita para mensagens enviadas pelo seu aplicativo, mas não pode contar com as mensagens de entrada para serem estritamente compatíveis com o esquema.</span><span class="sxs-lookup"><span data-stu-id="a3b05-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="a3b05-129">Nesse caso, há um perigo de que uma mensagem de entrada possa conter dados estranhos.</span><span class="sxs-lookup"><span data-stu-id="a3b05-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="a3b05-130">Os valores estranhos são armazenados e retornados pelo WCF e, portanto, resultam no esquema-mensagens inválidas sendo enviadas.</span><span class="sxs-lookup"><span data-stu-id="a3b05-130">The extraneous values are stored and returned by WCF and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="a3b05-131">Para evitar esse problema, o recurso de ida e volta deve ser desativado.</span><span class="sxs-lookup"><span data-stu-id="a3b05-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="a3b05-132">Há duas formas de fazer isso.</span><span class="sxs-lookup"><span data-stu-id="a3b05-132">There are two ways to do this.</span></span>  
  
- <span data-ttu-id="a3b05-133">Não implemente a interface <xref:System.Runtime.Serialization.IExtensibleDataObject> em nenhum dos seus tipos.</span><span class="sxs-lookup"><span data-stu-id="a3b05-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
- <span data-ttu-id="a3b05-134">Aplique um atributo <xref:System.ServiceModel.ServiceBehaviorAttribute> ao seu contrato de serviço com a propriedade <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> definida como `true`.</span><span class="sxs-lookup"><span data-stu-id="a3b05-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="a3b05-135">Para obter mais informações sobre ida e volta, consulte [contratos de dados compatíveis com o encaminhamento](./feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="a3b05-135">For more information about round-tripping, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="a3b05-136">Controle de versão quando a validação de esquema não é necessária</span><span class="sxs-lookup"><span data-stu-id="a3b05-136">Versioning When Schema Validation Is Not Required</span></span>  
 <span data-ttu-id="a3b05-137">A conformidade de esquema estrita raramente é necessária.</span><span class="sxs-lookup"><span data-stu-id="a3b05-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="a3b05-138">Muitas plataformas toleram elementos adicionais não descritos por um esquema.</span><span class="sxs-lookup"><span data-stu-id="a3b05-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="a3b05-139">Desde que isso seja tolerado, o conjunto completo de recursos descritos em [controle de versão de contrato de dados](./feature-details/data-contract-versioning.md) e [contratos de dados compatíveis com encaminhamento](./feature-details/forward-compatible-data-contracts.md) pode ser usado.</span><span class="sxs-lookup"><span data-stu-id="a3b05-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](./feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="a3b05-140">As diretrizes a seguir são recomendadas.</span><span class="sxs-lookup"><span data-stu-id="a3b05-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="a3b05-141">Algumas das diretrizes devem ser seguidas exatamente para enviar novas versões de um tipo em que uma antiga é esperada ou enviar uma antiga em que a nova é esperada.</span><span class="sxs-lookup"><span data-stu-id="a3b05-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="a3b05-142">Outras diretrizes não são estritamente necessárias, mas são listadas aqui porque podem ser afetadas pelo futuro do controle de versão do esquema.</span><span class="sxs-lookup"><span data-stu-id="a3b05-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1. <span data-ttu-id="a3b05-143">Não tente a versão de contratos de dados por herança de tipo.</span><span class="sxs-lookup"><span data-stu-id="a3b05-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="a3b05-144">Para criar versões posteriores, altere o contrato de dados em um tipo existente ou crie um novo tipo não relacionado.</span><span class="sxs-lookup"><span data-stu-id="a3b05-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2. <span data-ttu-id="a3b05-145">O uso de herança junto com contratos de dados é permitido, desde que a herança não seja usada como um mecanismo de controle de versão e que determinadas regras sejam seguidas.</span><span class="sxs-lookup"><span data-stu-id="a3b05-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="a3b05-146">Se um tipo derivar de um determinado tipo base, não o tornará derivado de um tipo base diferente em uma versão futura (a menos que ele tenha o mesmo contrato de dados).</span><span class="sxs-lookup"><span data-stu-id="a3b05-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="a3b05-147">Há uma exceção a isso: você pode inserir um tipo na hierarquia entre um tipo de contrato de dados e seu tipo base, mas somente se ele não contiver membros de dados com os mesmos nomes de outros membros em qualquer uma das versões possíveis dos outros tipos na hierarquia.</span><span class="sxs-lookup"><span data-stu-id="a3b05-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="a3b05-148">Em geral, o uso de membros de dados com os mesmos nomes em diferentes níveis da mesma hierarquia de herança pode levar a problemas sérios de controle de versão e deve ser evitado.</span><span class="sxs-lookup"><span data-stu-id="a3b05-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3. <span data-ttu-id="a3b05-149">A partir da primeira versão de um contrato de dados, sempre implemente <xref:System.Runtime.Serialization.IExtensibleDataObject> para habilitar o ida e volta.</span><span class="sxs-lookup"><span data-stu-id="a3b05-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="a3b05-150">Para obter mais informações, consulte [Contratos de dados compatíveis por encaminhamento](./feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="a3b05-150">For more information, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="a3b05-151">Se você lançou uma ou mais versões de um tipo sem implementar essa interface, implemente-a na próxima versão do tipo.</span><span class="sxs-lookup"><span data-stu-id="a3b05-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4. <span data-ttu-id="a3b05-152">Em versões posteriores, não altere o namespace ou o nome do contrato de dados.</span><span class="sxs-lookup"><span data-stu-id="a3b05-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="a3b05-153">Se estiver alterando o nome ou o namespace do tipo subjacente ao contrato de dados, lembre-se de preservar o nome do contrato de dados e o namespace usando os mecanismos apropriados, como a propriedade <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> do <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="a3b05-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> <span data-ttu-id="a3b05-154">Para obter mais informações sobre Nomenclatura, consulte [nomes de contrato de dados](./feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="a3b05-154">For more information about naming, see [Data Contract Names](./feature-details/data-contract-names.md).</span></span>  
  
5. <span data-ttu-id="a3b05-155">Em versões posteriores, não altere os nomes de quaisquer membros de dados.</span><span class="sxs-lookup"><span data-stu-id="a3b05-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="a3b05-156">Se alterar o nome do campo, da propriedade ou do evento subjacente ao membro de dados, use a propriedade `Name` do <xref:System.Runtime.Serialization.DataMemberAttribute> para preservar o nome do membro de dados existente.</span><span class="sxs-lookup"><span data-stu-id="a3b05-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6. <span data-ttu-id="a3b05-157">Em versões posteriores, não altere o tipo de qualquer campo, propriedade ou evento subjacente a um membro de dados, de modo que o contrato de dados resultante para esse membro de dados seja alterado.</span><span class="sxs-lookup"><span data-stu-id="a3b05-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="a3b05-158">Tenha em mente que os tipos de interface são equivalentes a <xref:System.Object> para fins de determinação do contrato de dados esperado.</span><span class="sxs-lookup"><span data-stu-id="a3b05-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7. <span data-ttu-id="a3b05-159">Em versões posteriores, não altere a ordem dos membros de dados existentes ajustando a propriedade <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> do atributo <xref:System.Runtime.Serialization.DataMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="a3b05-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8. <span data-ttu-id="a3b05-160">Em versões posteriores, novos membros de dados podem ser adicionados.</span><span class="sxs-lookup"><span data-stu-id="a3b05-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="a3b05-161">Eles sempre devem seguir estas regras:</span><span class="sxs-lookup"><span data-stu-id="a3b05-161">They should always follow these rules:</span></span>  
  
    1. <span data-ttu-id="a3b05-162">A propriedade <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> sempre deve ser deixada com seu valor padrão de `false`.</span><span class="sxs-lookup"><span data-stu-id="a3b05-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2. <span data-ttu-id="a3b05-163">Se um valor padrão de `null` ou zero para o membro for inaceitável, um método de retorno de chamada deverá ser fornecido usando o <xref:System.Runtime.Serialization.OnDeserializingAttribute> para fornecer um padrão razoável caso o membro não esteja presente no fluxo de entrada.</span><span class="sxs-lookup"><span data-stu-id="a3b05-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> <span data-ttu-id="a3b05-164">Para obter mais informações sobre o retorno de chamada, consulte [retornos de chamada de serialização tolerantes à versão](./feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="a3b05-164">For more information about the callback, see [Version-Tolerant Serialization Callbacks](./feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3. <span data-ttu-id="a3b05-165">A propriedade <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> deve ser usada para garantir que todos os membros de dados adicionados recentemente apareçam após os membros de dados existentes.</span><span class="sxs-lookup"><span data-stu-id="a3b05-165">The <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> property should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="a3b05-166">A maneira recomendada de fazer isso é a seguinte: nenhum dos membros de dados na primeira versão do contrato de dados deve ter sua propriedade `Order` definida.</span><span class="sxs-lookup"><span data-stu-id="a3b05-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="a3b05-167">Todos os membros de dados adicionados na versão 2 do contrato de dados devem ter sua propriedade `Order` definida como 2.</span><span class="sxs-lookup"><span data-stu-id="a3b05-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="a3b05-168">Todos os membros de dados adicionados na versão 3 do contrato de dados devem ter seu `Order` definido como 3 e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="a3b05-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="a3b05-169">É permitido ter mais de um membro de dados definido com o mesmo número `Order`.</span><span class="sxs-lookup"><span data-stu-id="a3b05-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="a3b05-170">Não remova os membros de dados em versões posteriores, mesmo que a propriedade <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> tenha sido deixada em sua propriedade padrão de `false` em versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="a3b05-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="a3b05-171">Não altere a propriedade `IsRequired` em todos os membros de dados existentes da versão para a versão.</span><span class="sxs-lookup"><span data-stu-id="a3b05-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="a3b05-172">Para os membros de dados necessários (em que `IsRequired` é `true`), não altere a propriedade `EmitDefaultValue` de versão para versão.</span><span class="sxs-lookup"><span data-stu-id="a3b05-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="a3b05-173">Não tente criar hierarquias de controle de versão ramificadas.</span><span class="sxs-lookup"><span data-stu-id="a3b05-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="a3b05-174">Ou seja, sempre deve haver um caminho em pelo menos uma direção de qualquer versão para qualquer outra versão usando apenas as alterações permitidas por essas diretrizes.</span><span class="sxs-lookup"><span data-stu-id="a3b05-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="a3b05-175">Por exemplo, se a versão 1 de um contrato de dados de pessoa contiver apenas o nome membro de dados, você não deverá criar a versão 2A do contrato adicionando somente o membro age e a versão 2B adicionando apenas o membro de endereço.</span><span class="sxs-lookup"><span data-stu-id="a3b05-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="a3b05-176">Ir de 2a para 2B envolverá a remoção da idade e a adição de endereço; entrar na outra direção envolveria a remoção de endereço e a adição de idade.</span><span class="sxs-lookup"><span data-stu-id="a3b05-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="a3b05-177">A remoção de membros não é permitida por essas diretrizes.</span><span class="sxs-lookup"><span data-stu-id="a3b05-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="a3b05-178">Em geral, você não deve criar novos subtipos de tipos de contrato de dados existentes em uma nova versão do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a3b05-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="a3b05-179">Da mesma forma, você não deve criar novos contratos de dados que são usados no lugar de membros de dados declarados como objetos ou como tipos de interface.</span><span class="sxs-lookup"><span data-stu-id="a3b05-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="a3b05-180">A criação dessas novas classes é permitida somente quando você sabe que pode adicionar os novos tipos à lista de tipos conhecidos de todas as instâncias do aplicativo antigo.</span><span class="sxs-lookup"><span data-stu-id="a3b05-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="a3b05-181">Por exemplo, na versão 1 do seu aplicativo, você pode ter o tipo de contrato de dados LibraryItem com o livro e subtipos de contrato de dados de jornal.</span><span class="sxs-lookup"><span data-stu-id="a3b05-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="a3b05-182">O LibraryItem teria uma lista de tipos conhecidos que contém livros e jornal.</span><span class="sxs-lookup"><span data-stu-id="a3b05-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="a3b05-183">Suponha que agora você adicione um tipo de revista na versão 2, que é um subtipo de LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="a3b05-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="a3b05-184">Se você enviar uma instância da revista da versão 2 para a versão 1, o contrato de dados da revista não será encontrado na lista de tipos conhecidos e uma exceção será gerada.</span><span class="sxs-lookup"><span data-stu-id="a3b05-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="a3b05-185">Você não deve adicionar ou remover membros de enumeração entre versões.</span><span class="sxs-lookup"><span data-stu-id="a3b05-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="a3b05-186">Você também não deve renomear membros de enumeração, a menos que use a propriedade Name no atributo `EnumMemberAttribute` para manter seus nomes no modelo de contrato de dados o mesmo.</span><span class="sxs-lookup"><span data-stu-id="a3b05-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="a3b05-187">As coleções são intercambiáveis no modelo de contrato de dados, conforme descrito em [tipos de coleção em contratos de dados](./feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="a3b05-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](./feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="a3b05-188">Isso permite um grande grau de flexibilidade.</span><span class="sxs-lookup"><span data-stu-id="a3b05-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="a3b05-189">No entanto, certifique-se de que você não altere inadvertidamente um tipo de coleção de uma forma não intercambiável de versão para versão.</span><span class="sxs-lookup"><span data-stu-id="a3b05-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="a3b05-190">Por exemplo, não altere de uma coleção não personalizada (ou seja, sem o atributo `CollectionDataContractAttribute`) para uma coleção personalizada ou personalizada para um não personalizado.</span><span class="sxs-lookup"><span data-stu-id="a3b05-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="a3b05-191">Além disso, não altere as propriedades no `CollectionDataContractAttribute` da versão para a versão.</span><span class="sxs-lookup"><span data-stu-id="a3b05-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="a3b05-192">A única alteração permitida é adicionar um nome ou uma propriedade de namespace se o nome ou o namespace do tipo de coleção subjacente tiver sido alterado e você precisar tornar seu nome de contrato de dados e namespace o mesmo que em uma versão anterior.</span><span class="sxs-lookup"><span data-stu-id="a3b05-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="a3b05-193">Algumas das diretrizes listadas aqui podem ser ignoradas com segurança quando se aplicam circunstâncias especiais.</span><span class="sxs-lookup"><span data-stu-id="a3b05-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="a3b05-194">Certifique-se de compreender totalmente os mecanismos de serialização, desserialização e esquema envolvidos antes de deviating das diretrizes.</span><span class="sxs-lookup"><span data-stu-id="a3b05-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a3b05-195">Consulte também</span><span class="sxs-lookup"><span data-stu-id="a3b05-195">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>
- <xref:System.Runtime.Serialization.IExtensibleDataObject>
- <xref:System.ServiceModel.ServiceBehaviorAttribute>
- <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>
- <xref:System.Runtime.Serialization.ExtensionDataObject>
- <xref:System.Runtime.Serialization.OnDeserializingAttribute>
- [<span data-ttu-id="a3b05-196">Usando contratos de dados</span><span class="sxs-lookup"><span data-stu-id="a3b05-196">Using Data Contracts</span></span>](./feature-details/using-data-contracts.md)
- [<span data-ttu-id="a3b05-197">Controle de versão de contrato de dados</span><span class="sxs-lookup"><span data-stu-id="a3b05-197">Data Contract Versioning</span></span>](./feature-details/data-contract-versioning.md)
- [<span data-ttu-id="a3b05-198">Nomes de contrato de dados</span><span class="sxs-lookup"><span data-stu-id="a3b05-198">Data Contract Names</span></span>](./feature-details/data-contract-names.md)
- [<span data-ttu-id="a3b05-199">Contratos de dados compatíveis com encaminhamento</span><span class="sxs-lookup"><span data-stu-id="a3b05-199">Forward-Compatible Data Contracts</span></span>](./feature-details/forward-compatible-data-contracts.md)
- [<span data-ttu-id="a3b05-200">Retornos de chamada de serialização tolerantes à versão</span><span class="sxs-lookup"><span data-stu-id="a3b05-200">Version-Tolerant Serialization Callbacks</span></span>](./feature-details/version-tolerant-serialization-callbacks.md)
