---
title: 'Como: exportar declarações de política personalizadas'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 99030386-43b0-4f7b-866d-17ea307f5cbd
ms.openlocfilehash: b3d3afdd1e3fba2a77186d1cd644d723c445600c
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/09/2019
ms.locfileid: "59306216"
---
# <a name="how-to-export-custom-policy-assertions"></a><span data-ttu-id="4e8e5-102">Como: exportar declarações de política personalizadas</span><span class="sxs-lookup"><span data-stu-id="4e8e5-102">How to: Export Custom Policy Assertions</span></span>
<span data-ttu-id="4e8e5-103">Declarações de política descrevem os recursos e os requisitos de um ponto de extremidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-103">Policy assertions describe the capabilities and requirements of a service endpoint.</span></span> <span data-ttu-id="4e8e5-104">Aplicativos de serviço podem usar declarações de política personalizadas nos metadados de serviço para se comunicar o ponto de extremidade, contrato ou associação de informações de personalização para o aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-104">Service applications can use custom policy assertions in service metadata to communicate endpoint, binding or contract customization information to the client application.</span></span> <span data-ttu-id="4e8e5-105">Você pode usar o Windows Communication Foundation (WCF) para exportar declarações em expressões de política anexadas em associações WSDL no ponto de extremidade, operação ou entidades de mensagem, dependendo dos recursos ou requisitos que você está se comunicando.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-105">You can use Windows Communication Foundation (WCF) to export assertions in policy expressions attached in WSDL bindings at the endpoint, operation, or message subjects, depending upon the capabilities or requirements you are communicating.</span></span>  
  
 <span data-ttu-id="4e8e5-106">Declarações de política personalizadas são exportadas, Implementando a <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> da interface em um <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> e inserindo o elemento de associação diretamente para a associação do ponto de extremidade de serviço ou registrando-se o elemento de associação em seu aplicativo arquivo de configuração.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-106">Custom policy assertions are exported by implementing the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface on a <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> and either inserting the binding element directly into the binding of the service endpoint or by registering the binding element in your application configuration file.</span></span> <span data-ttu-id="4e8e5-107">Sua implementação de exportação de política deve adicionar sua declaração de política personalizada como um <xref:System.Xml.XmlElement?displayProperty=nameWithType> instância apropriado <xref:System.ServiceModel.Description.PolicyAssertionCollection?displayProperty=nameWithType> na <xref:System.ServiceModel.Description.PolicyConversionContext?displayProperty=nameWithType> passado para o <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> método.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-107">Your policy export implementation should add your custom policy assertion as a <xref:System.Xml.XmlElement?displayProperty=nameWithType> instance to the appropriate <xref:System.ServiceModel.Description.PolicyAssertionCollection?displayProperty=nameWithType> on the <xref:System.ServiceModel.Description.PolicyConversionContext?displayProperty=nameWithType> passed into the <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> method.</span></span>  
  
 <span data-ttu-id="4e8e5-108">Além disso, você deve verificar a <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> propriedade do <xref:System.ServiceModel.Description.WsdlExporter> de classe e exportar expressões de política aninhados e atributos da estrutura de política no namespace correto com base na versão de política especificada.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-108">In addition you must check the <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> property of the <xref:System.ServiceModel.Description.WsdlExporter> class and export nested policy expressions and policy framework attributes in the correct namespace based on the policy version specified.</span></span>  
  
 <span data-ttu-id="4e8e5-109">Para importar asserções de política personalizada, consulte <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType> e [como: Importar asserções de política personalizada](../../../../docs/framework/wcf/extending/how-to-import-custom-policy-assertions.md).</span><span class="sxs-lookup"><span data-stu-id="4e8e5-109">To import custom policy assertions, see <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType> and [How to: Import Custom Policy Assertions](../../../../docs/framework/wcf/extending/how-to-import-custom-policy-assertions.md).</span></span>  
  
### <a name="to-export-custom-policy-assertions"></a><span data-ttu-id="4e8e5-110">Para exportar as declarações de política personalizada</span><span class="sxs-lookup"><span data-stu-id="4e8e5-110">To export custom policy assertions</span></span>  
  
1. <span data-ttu-id="4e8e5-111">Implemente a <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> da interface em um <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-111">Implement the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface on a <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType>.</span></span> <span data-ttu-id="4e8e5-112">O exemplo de código a seguir mostra a implementação de uma asserção de política personalizada no nível da associação.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-112">The following code example shows the implementation of a custom policy assertion at the binding level.</span></span>  
  
     [!code-csharp[CustomPolicySample#14](../../../../samples/snippets/csharp/VS_Snippets_CFX/custompolicysample/cs/policyexporter.cs#14)]
     [!code-vb[CustomPolicySample#14](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/custompolicysample/vb/policyexporter.vb#14)]  
  
2. <span data-ttu-id="4e8e5-113">Inserir o elemento de associação para o ponto de extremidade de associação seja programaticamente ou usando um arquivo de configuração do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-113">Insert the binding element into the endpoint binding either programmatically or using an application configuration file.</span></span> <span data-ttu-id="4e8e5-114">Consulte os procedimentos a seguir.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-114">See the following procedures.</span></span>  
  
### <a name="to-insert-a-binding-element-using-an-application-configuration-file"></a><span data-ttu-id="4e8e5-115">Para inserir um elemento de associação usando um arquivo de configuração de aplicativo</span><span class="sxs-lookup"><span data-stu-id="4e8e5-115">To insert a binding element using an application configuration file</span></span>  
  
1. <span data-ttu-id="4e8e5-116">Implemente <xref:System.ServiceModel.Configuration.BindingElementExtensionElement?displayProperty=nameWithType> para seu elemento de associação de asserção de política personalizada.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-116">Implement <xref:System.ServiceModel.Configuration.BindingElementExtensionElement?displayProperty=nameWithType> for your custom policy assertion binding element.</span></span>  
  
2. <span data-ttu-id="4e8e5-117">Adicionar a extensão de elemento de associação para o arquivo de configuração usando o [ \<bindingElementExtensions >](../../../../docs/framework/configure-apps/file-schema/wcf/bindingelementextensions.md) elemento.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-117">Add the binding element extension to the configuration file using the [\<bindingElementExtensions>](../../../../docs/framework/configure-apps/file-schema/wcf/bindingelementextensions.md) element.</span></span>  
  
3. <span data-ttu-id="4e8e5-118">Criar uma ligação personalizada usando o <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-118">Build a custom binding using the <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span></span>  
  
### <a name="to-insert-a-binding-element-programmatically"></a><span data-ttu-id="4e8e5-119">Para inserir um elemento de associação de forma programática</span><span class="sxs-lookup"><span data-stu-id="4e8e5-119">To insert a binding element programmatically</span></span>  
  
1. <span data-ttu-id="4e8e5-120">Criar um novo <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> e adicione-o a um <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-120">Create a new <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> and add it to a <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span></span>  
  
2. <span data-ttu-id="4e8e5-121">Adicione a associação personalizada da etapa 1.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-121">Add the custom binding from step 1.</span></span> <span data-ttu-id="4e8e5-122">para um novo ponto de extremidade e adicionar esse novo ponto de extremidade de serviço para o <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> chamando o <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> método.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-122">to a new endpoint and add that new service endpoint to the <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> by calling the <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> method.</span></span>  
  
3. <span data-ttu-id="4e8e5-123">Abra o <xref:System.ServiceModel.ServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-123">Open the <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="4e8e5-124">O exemplo de código a seguir mostra a criação de uma ligação personalizada e a inserção de programação de elementos de associação.</span><span class="sxs-lookup"><span data-stu-id="4e8e5-124">The following code example shows the creation of a custom binding and the programmatic insertion of binding elements.</span></span>  
  
     [!code-csharp[s_imperative#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_imperative/cs/service.cs#1)]
     [!code-vb[s_imperative#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_imperative/vb/service.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="4e8e5-125">Consulte também</span><span class="sxs-lookup"><span data-stu-id="4e8e5-125">See also</span></span>

- <xref:System.ServiceModel.Description.IPolicyImportExtension>
- <xref:System.ServiceModel.Description.IPolicyExportExtension>
- [<span data-ttu-id="4e8e5-126">Como: importar declarações de política personalizadas</span><span class="sxs-lookup"><span data-stu-id="4e8e5-126">How to: Import Custom Policy Assertions</span></span>](../../../../docs/framework/wcf/extending/how-to-import-custom-policy-assertions.md)
