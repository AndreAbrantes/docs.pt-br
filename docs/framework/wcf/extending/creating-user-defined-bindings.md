---
title: Criando associações definidas pelo usuário
ms.date: 03/30/2017
helpviewer_keywords:
- user-defined bindings [WCF]
ms.assetid: c4960675-d701-4bc9-b400-36a752fdd08b
ms.openlocfilehash: 54a1c8e06991729ea8556d82d31897c522f6d173
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59188715"
---
# <a name="creating-user-defined-bindings"></a><span data-ttu-id="e5ae7-102">Criando associações definidas pelo usuário</span><span class="sxs-lookup"><span data-stu-id="e5ae7-102">Creating User-Defined Bindings</span></span>
<span data-ttu-id="e5ae7-103">Há várias maneiras de criar associações não são fornecidas pelo sistema:</span><span class="sxs-lookup"><span data-stu-id="e5ae7-103">There are several ways to create bindings not provided by the system:</span></span>  
  
-   <span data-ttu-id="e5ae7-104">Criar uma ligação personalizada, com base no <xref:System.ServiceModel.Channels.CustomBinding> classe, que é um contêiner que você preenche com elementos de associação.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-104">Create a custom binding, based on the <xref:System.ServiceModel.Channels.CustomBinding> class, which is a container that you fill with binding elements.</span></span> <span data-ttu-id="e5ae7-105">A associação personalizada é adicionada a um ponto de extremidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-105">The custom binding is then added to a service endpoint.</span></span> <span data-ttu-id="e5ae7-106">Você pode criar a associação personalizada de que um arquivo por meio de programação ou em uma configuração de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-106">You can create the custom binding either programmatically or in an application configuration file.</span></span> <span data-ttu-id="e5ae7-107">Para usar um elemento de associação de um arquivo de configuração de aplicativo, o elemento de associação deve estender <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-107">To use a binding element from an application configuration file, the binding element must extend <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span></span> <span data-ttu-id="e5ae7-108">Para obter mais informações sobre ligações personalizadas, consulte [ligações personalizadas](../../../../docs/framework/wcf/extending/custom-bindings.md) e <xref:System.ServiceModel.Channels.CustomBinding>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-108">For more information about custom bindings, see [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md) and <xref:System.ServiceModel.Channels.CustomBinding>.</span></span>  
  
-   <span data-ttu-id="e5ae7-109">Você pode criar uma classe que deriva de uma associação padrão.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-109">You can create a class that derives from a standard binding.</span></span> <span data-ttu-id="e5ae7-110">Por exemplo, você pode derivar uma classe de <xref:System.ServiceModel.WSHttpBinding> e substituir <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> método para obter os elementos de associação e inserir um elemento de associação personalizado ou estabelecer um valor específico para a segurança.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-110">For example, you can derive a class from <xref:System.ServiceModel.WSHttpBinding> and override <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> method to obtain the binding elements and insert a custom binding element or establish a particular value for security.</span></span>  
  
-   <span data-ttu-id="e5ae7-111">Você pode criar um novo <xref:System.ServiceModel.Channels.Binding> tipo para controlar completamente a implementação de associação inteira.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-111">You can create a new <xref:System.ServiceModel.Channels.Binding> type to completely control the entire binding implementation.</span></span>  
  
## <a name="the-order-of-binding-elements"></a><span data-ttu-id="e5ae7-112">A ordem dos elementos de associação</span><span class="sxs-lookup"><span data-stu-id="e5ae7-112">The Order of Binding Elements</span></span>  
 <span data-ttu-id="e5ae7-113">Cada elemento de associação representa uma etapa de processamento ao enviar ou receber mensagens.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-113">Each binding element represents a processing step when sending or receiving messages.</span></span> <span data-ttu-id="e5ae7-114">Em tempo de execução, elementos de associação de criam os canais e ouvintes necessárias para criar pilhas de canais de entrada e saída.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-114">At runtime, binding elements create the channels and listeners necessary to build outgoing and incoming channel stacks.</span></span>  
  
 <span data-ttu-id="e5ae7-115">Há três tipos principais de elementos de associação: Protocolo de associação de elementos, elementos de associação de codificação e elementos de associação de transporte.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-115">There are three main types of binding elements: Protocol Binding Elements, Encoding Binding Elements and Transport Binding Elements.</span></span>  
  
 <span data-ttu-id="e5ae7-116">Elementos de ligação de protocolo – esses elementos representam etapas de processamento de nível mais altos que atuam em mensagens.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-116">Protocol Binding Elements – These elements represent higher-level processing steps that act on messages.</span></span> <span data-ttu-id="e5ae7-117">Canais e ouvintes criados por esses elementos de associação podem adicionar, remover ou modificar o conteúdo da mensagem.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-117">Channels and listeners created by these binding elements can add, remove, or modify the message content.</span></span> <span data-ttu-id="e5ae7-118">Uma determinada vinculação pode ter um número arbitrário de elementos de ligação de protocolo, cada herdando <xref:System.ServiceModel.Channels.BindingElement>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-118">A given binding may have an arbitrary number of protocol binding elements, each inheriting from <xref:System.ServiceModel.Channels.BindingElement>.</span></span> <span data-ttu-id="e5ae7-119">Windows Communication Foundation (WCF) inclui vários elementos de associação de protocolo, incluindo o <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> e o <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-119">Windows Communication Foundation (WCF) includes several protocol binding elements, including the <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> and the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span></span>  
  
 <span data-ttu-id="e5ae7-120">Elemento de associação – esses representam elementos transformações entre uma mensagem e uma codificação prontos para transmissão de codificação.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-120">Encoding Binding Element – These elements represent transformations between a message and an encoding ready for transmission on the wire.</span></span> <span data-ttu-id="e5ae7-121">Associações do WCF típicas incluem exatamente um elemento de associação de codificação.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-121">Typical WCF bindings include exactly one encoding binding element.</span></span> <span data-ttu-id="e5ae7-122">Exemplos de codificação de elementos de associação a <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, o <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>e o <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-122">Examples of encoding binding elements include the <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, and the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span></span> <span data-ttu-id="e5ae7-123">Se um elemento de associação de codificação não for especificado para uma associação, uma codificação padrão é usada.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-123">If an encoding binding element is not specified for a binding, a default encoding is used.</span></span> <span data-ttu-id="e5ae7-124">O padrão é texto quando o transporte é HTTP e binários, caso contrário.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-124">The default is text when the transport is HTTP and binary otherwise.</span></span>  
  
 <span data-ttu-id="e5ae7-125">Elemento de associação de transporte esses elementos representam a transmissão de uma mensagem de codifica em um protocolo de transporte.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-125">Transport Binding Element – These elements represent the transmission of an encoding message on a transport protocol.</span></span> <span data-ttu-id="e5ae7-126">Associações do WCF típicas incluem exatamente um elemento de associação de transporte, que herda de <xref:System.ServiceModel.Channels.TransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-126">Typical WCF bindings include exactly one transport binding element, which inherits from <xref:System.ServiceModel.Channels.TransportBindingElement>.</span></span> <span data-ttu-id="e5ae7-127">Exemplos de elementos de associação de transporte a <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, o <xref:System.ServiceModel.Channels.HttpTransportBindingElement>e o <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-127">Examples of transport binding elements include the <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, the <xref:System.ServiceModel.Channels.HttpTransportBindingElement>, and the <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span></span>  
  
 <span data-ttu-id="e5ae7-128">Durante a criação de novas associações, a ordem dos elementos de associação adicionados é importante.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-128">When creating new bindings, the order of the added binding elements is important.</span></span> <span data-ttu-id="e5ae7-129">Sempre adicione elementos de associação na seguinte ordem:</span><span class="sxs-lookup"><span data-stu-id="e5ae7-129">Always add binding elements in the following order:</span></span>  
  
|<span data-ttu-id="e5ae7-130">Camada</span><span class="sxs-lookup"><span data-stu-id="e5ae7-130">Layer</span></span>|<span data-ttu-id="e5ae7-131">Opções</span><span class="sxs-lookup"><span data-stu-id="e5ae7-131">Options</span></span>|<span data-ttu-id="e5ae7-132">Necessária</span><span class="sxs-lookup"><span data-stu-id="e5ae7-132">Required</span></span>|  
|-----------|-------------|--------------|  
|<span data-ttu-id="e5ae7-133">Fluxo de transações</span><span class="sxs-lookup"><span data-stu-id="e5ae7-133">Transaction Flow</span></span>|<xref:System.ServiceModel.Channels.TransactionFlowBindingElement?displayProperty=nameWithType>|<span data-ttu-id="e5ae7-134">Não</span><span class="sxs-lookup"><span data-stu-id="e5ae7-134">No</span></span>|  
|<span data-ttu-id="e5ae7-135">Confiabilidade</span><span class="sxs-lookup"><span data-stu-id="e5ae7-135">Reliability</span></span>|<xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType>|<span data-ttu-id="e5ae7-136">Não</span><span class="sxs-lookup"><span data-stu-id="e5ae7-136">No</span></span>|  
|<span data-ttu-id="e5ae7-137">Segurança</span><span class="sxs-lookup"><span data-stu-id="e5ae7-137">Security</span></span>|<xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType>|<span data-ttu-id="e5ae7-138">Não</span><span class="sxs-lookup"><span data-stu-id="e5ae7-138">No</span></span>|  
|<span data-ttu-id="e5ae7-139">Duplex composto</span><span class="sxs-lookup"><span data-stu-id="e5ae7-139">Composite Duplex</span></span>|<xref:System.ServiceModel.Channels.CompositeDuplexBindingElement?displayProperty=nameWithType>|<span data-ttu-id="e5ae7-140">Não</span><span class="sxs-lookup"><span data-stu-id="e5ae7-140">No</span></span>|  
|<span data-ttu-id="e5ae7-141">Codificando</span><span class="sxs-lookup"><span data-stu-id="e5ae7-141">Encoding</span></span>|<span data-ttu-id="e5ae7-142">Texto, binário, MTOM, personalizado</span><span class="sxs-lookup"><span data-stu-id="e5ae7-142">Text, Binary, MTOM, Custom</span></span>|<span data-ttu-id="e5ae7-143">Sim\*</span><span class="sxs-lookup"><span data-stu-id="e5ae7-143">Yes\*</span></span>|  
|<span data-ttu-id="e5ae7-144">Transporte</span><span class="sxs-lookup"><span data-stu-id="e5ae7-144">Transport</span></span>|<span data-ttu-id="e5ae7-145">Nomeado por TCP, Pipes, HTTP, HTTPS, MSMQ, personalizado</span><span class="sxs-lookup"><span data-stu-id="e5ae7-145">TCP, Named Pipes, HTTP, HTTPS, MSMQ, Custom</span></span>|<span data-ttu-id="e5ae7-146">Sim</span><span class="sxs-lookup"><span data-stu-id="e5ae7-146">Yes</span></span>|  
  
 <span data-ttu-id="e5ae7-147">\* Porque uma codificação é necessária para cada associação, se uma codificação não for especificada, o WCF adicionará uma codificação padrão para você.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-147">\*Because an encoding is required for each binding, if an encoding is not specified, WCF adds a default encoding for you.</span></span> <span data-ttu-id="e5ae7-148">O padrão é Text/XML binária e para os transportes HTTP e HTTPS, caso contrário.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-148">The default is Text/XML for the HTTP and HTTPS transports, and Binary otherwise.</span></span>  
  
## <a name="creating-a-new-binding-element"></a><span data-ttu-id="e5ae7-149">Criando um novo elemento de associação</span><span class="sxs-lookup"><span data-stu-id="e5ae7-149">Creating a new Binding Element</span></span>  
 <span data-ttu-id="e5ae7-150">Além dos tipos derivados <xref:System.ServiceModel.Channels.BindingElement> que são fornecidos pelo WCF, você pode criar seus próprios elementos de associação.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-150">In addition to the types derived from <xref:System.ServiceModel.Channels.BindingElement> that are provided by WCF, you can create your own binding elements.</span></span> <span data-ttu-id="e5ae7-151">Isso permite que você personalize a maneira como a pilha de associações é criada e os componentes que entrar com a criação de seu próprio <xref:System.ServiceModel.Channels.BindingElement> que pode ser composto com os outros tipos fornecidos pelo sistema na pilha.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-151">This lets you customize the way the stack of bindings is created and the components that go in it by creating your own <xref:System.ServiceModel.Channels.BindingElement> that can be composed with the other system-provided types in the stack.</span></span>  
  
 <span data-ttu-id="e5ae7-152">Por exemplo, se você implementar um `LoggingBindingElement` que fornece a capacidade de registrar a mensagem para um banco de dados, você deve colocá-lo acima de um canal de transporte na pilha de canais.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-152">For example, if you implement a `LoggingBindingElement` that provides the ability to log the message to a database, you must place it above a transport channel in the channel stack.</span></span> <span data-ttu-id="e5ae7-153">Nesse caso, o aplicativo cria uma associação personalizada que é composta de `LoggingBindingElement` com `TcpTransportBindingElement`, conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-153">In this case, the application creates a custom binding that composed the `LoggingBindingElement` with `TcpTransportBindingElement`, as in the following example.</span></span>  
  
```csharp  
Binding customBinding = new CustomBinding(  
  new LoggingBindingElement(),   
  new TcpTransportBindingElement()  
);  
```  
  
 <span data-ttu-id="e5ae7-154">Como escrever o seu novo elemento de associação depende de sua funcionalidade exata.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-154">How you write your new binding element depends on its exact functionality.</span></span> <span data-ttu-id="e5ae7-155">Um dos exemplos de [transporte: UDP](../../../../docs/framework/wcf/samples/transport-udp.md), fornece uma descrição detalhada de como implementar um tipo de elemento de associação.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-155">One of the samples, [Transport: UDP](../../../../docs/framework/wcf/samples/transport-udp.md), provides a detailed description of how to implement one kind of binding element.</span></span>  
  
## <a name="creating-a-new-binding"></a><span data-ttu-id="e5ae7-156">Criar uma nova associação</span><span class="sxs-lookup"><span data-stu-id="e5ae7-156">Creating a New Binding</span></span>  
 <span data-ttu-id="e5ae7-157">Um elemento de associação criado pelo usuário pode ser usado de duas maneiras.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-157">A user-created binding element can be used in two ways.</span></span> <span data-ttu-id="e5ae7-158">A seção anterior ilustra a primeira maneira: por meio de uma associação personalizada.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-158">The previous section illustrates the first way: through a custom binding.</span></span> <span data-ttu-id="e5ae7-159">Uma associação personalizada permite ao usuário criar sua próprias associação com base em um conjunto arbitrário de elementos, incluindo aqueles criados pelo usuário de associação.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-159">A custom binding allows the user to create their own binding based on an arbitrary set of binding elements, including user-created ones.</span></span>  
  
 <span data-ttu-id="e5ae7-160">Se você usar a associação em mais de um aplicativo, criar sua própria associação e estender o <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-160">If you use the binding in more than one application, create your own binding and extend the <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="e5ae7-161">Isso evita a criação manual de uma ligação personalizada sempre que você deseja usá-lo.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-161">This avoids manually creating a custom binding every time you want to use it.</span></span> <span data-ttu-id="e5ae7-162">Uma associação definida pelo usuário permite que você definir o comportamento da associação e incluir elementos de associação definidas pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-162">A user-defined binding allows you to define the binding’s behavior and include user-defined binding elements.</span></span> <span data-ttu-id="e5ae7-163">E vale *pré-empacotado*: você não precisa recriar a associação, toda vez que você usá-lo.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-163">And it is *pre-packaged*: you do not have to rebuild the binding every time you use it.</span></span>  
  
 <span data-ttu-id="e5ae7-164">No mínimo, uma associação definida pelo usuário deve implementar o <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> método e o <xref:System.ServiceModel.Channels.Binding.Scheme%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-164">At a minimum, a user-defined binding must implement the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
 <span data-ttu-id="e5ae7-165">O <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> método retorna um novo <xref:System.ServiceModel.Channels.BindingElementCollection> que contém os elementos de associação para a associação.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-165">The <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method returns a new <xref:System.ServiceModel.Channels.BindingElementCollection> that contains the binding elements for the binding.</span></span> <span data-ttu-id="e5ae7-166">A coleção for ordenada e deve conter os elementos de associação de protocolo primeiro, seguido pelo elemento de associação de codificação, seguido pelo elemento de associação de transporte.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-166">The collection is ordered, and should contain the protocol binding elements first, followed by the encoding binding element, followed by the transport binding element.</span></span> <span data-ttu-id="e5ae7-167">Ao usar os elementos de associação fornecida pelo sistema do WCF, você deve seguir o elemento de associação ordenação regras especificadas na [ligações personalizadas](../../../../docs/framework/wcf/extending/custom-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="e5ae7-167">When using the WCF system-provided binding elements, you must follow the binding element ordering rules specified in [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md).</span></span> <span data-ttu-id="e5ae7-168">Esta coleção nunca deve fazer referência a objetos referenciados dentro da classe de associação definidas pelo usuário; Consequentemente, os autores de associação devem retornar um `Clone()` do <xref:System.ServiceModel.Channels.BindingElementCollection> em cada chamada para <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-168">This collection should never reference objects referenced within the user-defined binding class; consequently, binding authors must return a `Clone()` of the <xref:System.ServiceModel.Channels.BindingElementCollection> on each call to <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span></span>  
  
 <span data-ttu-id="e5ae7-169">O <xref:System.ServiceModel.Channels.Binding.Scheme%2A> propriedade representa o esquema de URI para o protocolo de transporte em uso na associação.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-169">The <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property represents the URI scheme for the transport protocol in use on the binding.</span></span> <span data-ttu-id="e5ae7-170">Por exemplo, o *WSHttpBinding* e o *NetTcpBinding* retornar "http" e "NET. TCP" de suas respectivas <xref:System.ServiceModel.Channels.Binding.Scheme%2A> propriedades.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-170">For example, the *WSHttpBinding* and the *NetTcpBinding* return "http" and "net.tcp" from their respective <xref:System.ServiceModel.Channels.Binding.Scheme%2A> properties.</span></span>  
  
 <span data-ttu-id="e5ae7-171">Para obter uma lista completa de métodos opcionais e propriedades para associações definidas pelo usuário, consulte <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-171">For a complete list of optional methods and properties for user-defined bindings, see <xref:System.ServiceModel.Channels.Binding>.</span></span>  
  
### <a name="example"></a><span data-ttu-id="e5ae7-172">Exemplo</span><span class="sxs-lookup"><span data-stu-id="e5ae7-172">Example</span></span>  
 <span data-ttu-id="e5ae7-173">Este exemplo implementa a associação de perfil em `SampleProfileUdpBinding`, que é derivada de <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-173">This example implements profile binding in `SampleProfileUdpBinding`, which derives from <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="e5ae7-174">O `SampleProfileUdpBinding` contém até quatro elementos de associação dentro dele: um usuário criado `UdpTransportBindingElement`; e três fornecido pelo sistema: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`, e `ReliableSessionBindingElement`.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-174">The `SampleProfileUdpBinding` contains up to four binding elements within it: one user-created `UdpTransportBindingElement`; and three system-provided: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`, and `ReliableSessionBindingElement`.</span></span>  
  
```csharp
public override BindingElementCollection CreateBindingElements()  
{     
    BindingElementCollection bindingElements = new BindingElementCollection();  
    if (ReliableSessionEnabled)  
    {  
        bindingElements.Add(session);  
        bindingElements.Add(compositeDuplex);  
    }  
    bindingElements.Add(encoding);  
    bindingElements.Add(transport);  
    return bindingElements.Clone();  
}  
```  
  
## <a name="security-restrictions-with-duplex-contracts"></a><span data-ttu-id="e5ae7-175">Restrições de segurança com contratos Duplex</span><span class="sxs-lookup"><span data-stu-id="e5ae7-175">Security Restrictions with Duplex Contracts</span></span>  
 <span data-ttu-id="e5ae7-176">Nem todos os elementos de associação são compatíveis entre si.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-176">Not all binding elements are compatible with each other.</span></span> <span data-ttu-id="e5ae7-177">Em particular, há algumas restrições sobre segurança elementos de associação quando usado com contratos duplex.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-177">In particular, there are some restrictions on security binding elements when used with duplex contracts.</span></span>  
  
### <a name="one-shot-security"></a><span data-ttu-id="e5ae7-178">Segurança propagandas</span><span class="sxs-lookup"><span data-stu-id="e5ae7-178">One-Shot Security</span></span>  
 <span data-ttu-id="e5ae7-179">Você pode implementar a segurança de "todos", onde todas as credenciais de segurança necessárias são enviadas em uma única mensagem, definindo o `negotiateServiceCredential` atributo o \<mensagem > elemento de configuração para `false`.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-179">You can implement "one-shot" security, where all the necessary security credentials are sent in a single message, by setting the `negotiateServiceCredential` attribute of the \<message> configuration element to `false`.</span></span>  
  
 <span data-ttu-id="e5ae7-180">Autenticação propagandas não funciona com contratos duplex.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-180">One-shot authentication does not work with duplex contracts.</span></span>  
  
 <span data-ttu-id="e5ae7-181">Para contratos de solicitação-resposta, autenticação propagandas só funcionará se a pilha de associação abaixo do elemento de associação de segurança dá suporte à criação <xref:System.ServiceModel.Channels.IRequestChannel> ou <xref:System.ServiceModel.Channels.IRequestSessionChannel> instâncias.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-181">For Request-Reply contracts, one-shot authentication works only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="e5ae7-182">Para contratos unidirecionais, propagandas funciona a autenticação se a pilha de associação abaixo do elemento de associação de segurança dá suporte à criação <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> ou <xref:System.ServiceModel.Channels.IOutputSessionChannel> instâncias.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-182">For one-way contracts, one-shot authentication works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> or <xref:System.ServiceModel.Channels.IOutputSessionChannel> instances.</span></span>  
  
### <a name="cookie-mode-security-context-tokens"></a><span data-ttu-id="e5ae7-183">Tokens de contexto de segurança do modo de cookie</span><span class="sxs-lookup"><span data-stu-id="e5ae7-183">Cookie-mode Security Context Tokens</span></span>  
 <span data-ttu-id="e5ae7-184">Tokens de contexto de segurança de modo de cookie não podem ser usadas com contratos duplex.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-184">Cookie mode security context tokens cannot be used with duplex contracts.</span></span>  
  
 <span data-ttu-id="e5ae7-185">Para contratos de solicitação-resposta, o contexto de segurança do modo de cookie tokens trabalho somente se a pilha de associação abaixo do elemento de associação de segurança dá suporte à criação <xref:System.ServiceModel.Channels.IRequestChannel> ou <xref:System.ServiceModel.Channels.IRequestSessionChannel> instâncias.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-185">For Request-Reply contracts, cookie-mode security context tokens work only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="e5ae7-186">Para contratos unidirecionais, o contexto de segurança do modo de cookie tokens funciona se a pilha de associação abaixo do elemento de associação de segurança dá suporte à criação <xref:System.ServiceModel.Channels.IRequestChannel> ou <xref:System.ServiceModel.Channels.IRequestSessionChannel> instâncias.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-186">For one-way contracts, cookie-mode security context tokens works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
### <a name="session-mode-security-context-tokens"></a><span data-ttu-id="e5ae7-187">Tokens de contexto de segurança do modo de sessão</span><span class="sxs-lookup"><span data-stu-id="e5ae7-187">Session-mode Security Context Tokens</span></span>  
 <span data-ttu-id="e5ae7-188">Modo de sessão SCT funciona para contratos duplex se a pilha de associação abaixo do elemento de associação de segurança dá suporte à criação <xref:System.ServiceModel.Channels.IDuplexChannel> ou <xref:System.ServiceModel.Channels.IDuplexSessionChannel> instâncias.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-188">Session mode SCT works for duplex contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel> or <xref:System.ServiceModel.Channels.IDuplexSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="e5ae7-189">Modo de sessão SCT funciona para se a pilha de associação abaixo do elemento de associação de segurança dá suporte à criação de contratos de solicitação-resposta <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> ou <xref:System.ServiceModel.Channels.IRequestSessionChannel>, instâncias.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-189">Session mode SCT works for Request-Reply contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel>, instances.</span></span>  
  
 <span data-ttu-id="e5ae7-190">Modo de sessão SCT funciona para contratos de maneira 1 se a pilha de associação abaixo do elemento de associação de segurança dá suporte à criação <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> ou <xref:System.ServiceModel.Channels.IRequestSessionChannel> instâncias.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-190">Session mode SCT works for 1-way contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
## <a name="deriving-from-a-standard-binding"></a><span data-ttu-id="e5ae7-191">Derivando de uma associação padrão</span><span class="sxs-lookup"><span data-stu-id="e5ae7-191">Deriving from a Standard Binding</span></span>  
 <span data-ttu-id="e5ae7-192">Em vez de criar uma classe de associação completamente nova, é possível estender uma das associações fornecidas pelo sistema existentes.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-192">Instead of creating an entirely new binding class, it may be possible for you to extend one of the existing system-provided bindings.</span></span> <span data-ttu-id="e5ae7-193">Muito, como no caso anterior, você deve substituir a <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> método e o <xref:System.ServiceModel.Channels.Binding.Scheme%2A> propriedade.</span><span class="sxs-lookup"><span data-stu-id="e5ae7-193">Much like the preceding case, you must override the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e5ae7-194">Consulte também</span><span class="sxs-lookup"><span data-stu-id="e5ae7-194">See also</span></span>

- <xref:System.ServiceModel.Channels.Binding>
- [<span data-ttu-id="e5ae7-195">Associações personalizadas</span><span class="sxs-lookup"><span data-stu-id="e5ae7-195">Custom Bindings</span></span>](../../../../docs/framework/wcf/extending/custom-bindings.md)
