---
title: Visão geral de modelo de canal
ms.date: 03/30/2017
helpviewer_keywords:
- channel model [WCF]
ms.assetid: 07a81e11-3911-4632-90d2-cca99825b5bd
ms.openlocfilehash: 13fe07d1521832ed12ba5770e0bd069ff9b917d2
ms.sourcegitcommit: 15109844229ade1c6449f48f3834db1b26907824
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/07/2018
ms.locfileid: "33804632"
---
# <a name="channel-model-overview"></a><span data-ttu-id="28c5d-102">Visão geral de modelo de canal</span><span class="sxs-lookup"><span data-stu-id="28c5d-102">Channel Model Overview</span></span>
<span data-ttu-id="28c5d-103">A pilha de canais do Windows Communication Foundation (WCF) é uma pilha de comunicação em camadas com um ou mais canais que processar mensagens.</span><span class="sxs-lookup"><span data-stu-id="28c5d-103">The Windows Communication Foundation (WCF) channel stack is a layered communication stack with one or more channels that process messages.</span></span> <span data-ttu-id="28c5d-104">Na parte inferior da pilha é um canal de transporte é responsável para adaptar a pilha de canais de transporte subjacente (por exemplo, TCP, HTTP, SMTP e outros tipos de transporte.).</span><span class="sxs-lookup"><span data-stu-id="28c5d-104">At the bottom of the stack is a transport channel that is responsible for adapting the channel stack to the underlying transport (for example, TCP, HTTP, SMTP and other types of transport.).</span></span> <span data-ttu-id="28c5d-105">Canais fornecem um modelo de programação de nível baixo para enviar e receber mensagens.</span><span class="sxs-lookup"><span data-stu-id="28c5d-105">Channels provide a low-level programming model for sending and receiving messages.</span></span> <span data-ttu-id="28c5d-106">Este modelo de programação se baseia em várias interfaces e outros tipos de coletivamente conhecidos como o modelo de canal WCF.</span><span class="sxs-lookup"><span data-stu-id="28c5d-106">This programming model relies on several interfaces and other types collectively known as the WCF channel model.</span></span> <span data-ttu-id="28c5d-107">Este tópico discute as formas de canal, a construção de um ouvinte de canal básica (no serviço) e a fábrica de canais (no cliente).</span><span class="sxs-lookup"><span data-stu-id="28c5d-107">This topic discusses channel shapes, the construction of a basic channel listener (on the service) and channel factory (on the client).</span></span>  
  
## <a name="channel-stack"></a><span data-ttu-id="28c5d-108">Pilha de canais</span><span class="sxs-lookup"><span data-stu-id="28c5d-108">Channel Stack</span></span>  
 <span data-ttu-id="28c5d-109">Pontos de extremidade WCF se comunicar com o mundo usando uma pilha de comunicação chamada a pilha de canais.</span><span class="sxs-lookup"><span data-stu-id="28c5d-109">WCF endpoints communicate with the world using a communication stack called the channel stack.</span></span> <span data-ttu-id="28c5d-110">O diagrama a seguir compara a pilha de canais com outros pilhas de comunicação, como TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="28c5d-110">The following diagram compares the channel stack with other communication stacks, for example TCP/IP.</span></span>  
  
 <span data-ttu-id="28c5d-111">![Modelo de canal](../../../../docs/framework/wcf/extending/media/wcfc-channelstackhighlevelc.gif "wcfc_ChannelStackHighLevelc")</span><span class="sxs-lookup"><span data-stu-id="28c5d-111">![Channel Model](../../../../docs/framework/wcf/extending/media/wcfc-channelstackhighlevelc.gif "wcfc_ChannelStackHighLevelc")</span></span>  
  
 <span data-ttu-id="28c5d-112">Primeiro, as semelhanças: em ambos os casos, cada camada da pilha fornece algumas abstração do mundo abaixo da camada e expostos essa abstração apenas para a camada imediatamente acima dela.</span><span class="sxs-lookup"><span data-stu-id="28c5d-112">First, the similarities: In both cases, each layer of the stack provides some abstraction of the world below that layer and exposed that abstraction only to the layer directly above it.</span></span> <span data-ttu-id="28c5d-113">Cada camada usa a abstração de apenas a camada diretamente abaixo dela.</span><span class="sxs-lookup"><span data-stu-id="28c5d-113">Each layer uses the abstraction of only the layer directly below it.</span></span> <span data-ttu-id="28c5d-114">Também em ambos os casos, quando duas pilhas se comunicam, cada camada se comunica com a camada correspondente da pilha, por exemplo, a camada IP se comunica com a camada IP e a camada TCP com a camada TCP e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="28c5d-114">Also in both cases, when two stacks communicate, each layer communicates with the corresponding layer in the other stack, for example, the IP layer communicates with the IP layer and the TCP layer with the TCP layer, and so on.</span></span>  
  
 <span data-ttu-id="28c5d-115">Agora, as diferenças: pilha TCP a enquanto foi projetada para fornecer uma abstração de rede física, a pilha de canais é projetada para fornecer uma abstração de não apenas como a mensagem é entregue, ou seja, o transporte, mas também outros recursos como o que está em a mensagem ou o protocolo que é usado para comunicação, incluindo o transporte mas muito mais.</span><span class="sxs-lookup"><span data-stu-id="28c5d-115">Now, the differences: While the TCP stack was designed to provide an abstraction of the physical network, the channel stack is designed to provide an abstraction of not only how the message is delivered, that is, the transport, but also other features such as what is in the message or what protocol is used for communication, including the transport but much more than that.</span></span> <span data-ttu-id="28c5d-116">Por exemplo, elemento de associação de sessão confiável é parte da pilha de canais, mas não está abaixo do transporte ou a própria.</span><span class="sxs-lookup"><span data-stu-id="28c5d-116">For example, reliable session binding element is part of the channel stack but is not below the transport or the transport itself.</span></span> <span data-ttu-id="28c5d-117">Essa abstração é obtida, exigindo o canal inferior na pilha de adaptar o protocolo de transporte subjacente para a arquitetura de pilha de canal e de, em seguida, contar com mais canais up na pilha para fornecer recursos de comunicação, como confiabilidade garantias e segurança.</span><span class="sxs-lookup"><span data-stu-id="28c5d-117">This abstraction is achieved by requiring the bottom channel in the stack to adapt the underlying transport protocol to the channel stack architecture and then relying on channels further up in the stack to provide communication features such as reliability guarantees and security.</span></span>  
  
 <span data-ttu-id="28c5d-118">Fluxo de mensagens passa a pilha de comunicação como <xref:System.ServiceModel.Channels.Message> objetos.</span><span class="sxs-lookup"><span data-stu-id="28c5d-118">Messages flow through the communication stack as <xref:System.ServiceModel.Channels.Message> objects.</span></span> <span data-ttu-id="28c5d-119">Conforme mostrado na figura acima, o canal inferior é chamado de um canal de transporte.</span><span class="sxs-lookup"><span data-stu-id="28c5d-119">As shown in figure above, the bottom channel is called a transport channel.</span></span> <span data-ttu-id="28c5d-120">É o canal que é responsável por enviar e receber mensagens para e de outras pessoas.</span><span class="sxs-lookup"><span data-stu-id="28c5d-120">It is the channel that is responsible for sending and receiving messages to and from other parties.</span></span> <span data-ttu-id="28c5d-121">Isso inclui a responsabilidade de transformar o <xref:System.ServiceModel.Channels.Message> objeto de e para o formato usado para se comunicar com outras pessoas.</span><span class="sxs-lookup"><span data-stu-id="28c5d-121">This includes the responsibility of transforming the <xref:System.ServiceModel.Channels.Message> object to and from the format used to communicate with other parties.</span></span> <span data-ttu-id="28c5d-122">Acima do canal de transporte pode haver qualquer número de canais de protocolo cada responsável por fornecer uma função de comunicação como garantias de entrega confiável.</span><span class="sxs-lookup"><span data-stu-id="28c5d-122">Above the transport channel there can be any number of protocol channels each responsible for providing a communication function such as reliable delivery guarantees.</span></span> <span data-ttu-id="28c5d-123">Canais de protocolo operam em mensagens que passam por-los na forma do <xref:System.ServiceModel.Channels.Message> objeto.</span><span class="sxs-lookup"><span data-stu-id="28c5d-123">Protocol channels operate on messages flowing through them in the form of the <xref:System.ServiceModel.Channels.Message> object.</span></span> <span data-ttu-id="28c5d-124">Eles normalmente a transform a mensagem, por exemplo, adicionando cabeçalhos ou criptografando o corpo, ou enviar e recebem suas próprias mensagens de controle de protocolo, por exemplo, as confirmações de recebimento.</span><span class="sxs-lookup"><span data-stu-id="28c5d-124">They typically either transform the message, for example, by adding headers or encrypting the body, or send and receive their own protocol control messages, for example, receipt acknowledgments.</span></span>  
  
## <a name="channel-shapes"></a><span data-ttu-id="28c5d-125">Formas de canal</span><span class="sxs-lookup"><span data-stu-id="28c5d-125">Channel Shapes</span></span>  
 <span data-ttu-id="28c5d-126">Cada canal implementa uma ou mais interfaces conhecidos como interfaces de forma de canal ou formas de canal.</span><span class="sxs-lookup"><span data-stu-id="28c5d-126">Each channel implements one or more interfaces known as channel shape interfaces or channel shapes.</span></span> <span data-ttu-id="28c5d-127">Essas formas de canal fornecem os métodos voltados para comunicações como enviar e recebem ou de solicitação e respondam que implementa o canal e chama o usuário do canal.</span><span class="sxs-lookup"><span data-stu-id="28c5d-127">Those channel shapes provide the communication-oriented methods such as send and receive or request and reply that the channel implements and the user of the channel calls.</span></span> <span data-ttu-id="28c5d-128">É a base das formas de canal de <xref:System.ServiceModel.Channels.IChannel> interface, que é uma interface que fornece um `GetProperty` \<T > método planejado como um mecanismo em camadas para acessar recursos arbitrários expostos pelos canais na pilha.</span><span class="sxs-lookup"><span data-stu-id="28c5d-128">At the base of the channel shapes is the <xref:System.ServiceModel.Channels.IChannel> interface, which is an interface that provides a `GetProperty`\<T> method intended as a layered mechanism to access arbitrary features exposed by channels in the stack.</span></span> <span data-ttu-id="28c5d-129">Os cinco formas que se estendem de canal <xref:System.ServiceModel.Channels.IChannel> são:</span><span class="sxs-lookup"><span data-stu-id="28c5d-129">The five channel shapes that extend <xref:System.ServiceModel.Channels.IChannel> are:</span></span>  
  
-   <xref:System.ServiceModel.Channels.IInputChannel>  
  
-   <xref:System.ServiceModel.Channels.IOutputChannel>  
  
-   <xref:System.ServiceModel.Channels.IRequestChannel>  
  
-   <xref:System.ServiceModel.Channels.IReplyChannel>  
  
-   <xref:System.ServiceModel.Channels.IDuplexChannel>  
  
 <span data-ttu-id="28c5d-130">Além disso, cada uma dessas formas tem um equivalente que estende o <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> para oferecer suporte a sessões.</span><span class="sxs-lookup"><span data-stu-id="28c5d-130">Further, each of these shapes has an equivalent that extends <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> to support sessions.</span></span> <span data-ttu-id="28c5d-131">Elas são:</span><span class="sxs-lookup"><span data-stu-id="28c5d-131">These are:</span></span>  
  
-   <xref:System.ServiceModel.Channels.IInputSessionChannel>  
  
-   <xref:System.ServiceModel.Channels.IOutputSessionChannel>  
  
-   <xref:System.ServiceModel.Channels.IRequestSessionChannel>  
  
-   <xref:System.ServiceModel.Channels.IReplySessionChannel>  
  
-   <xref:System.ServiceModel.Channels.IDuplexSessionChannel>  
  
 <span data-ttu-id="28c5d-132">As formas de canal são padronizadas depois de alguns a mensagem fundamental padrões com suporte pelos protocolos de transporte existente do exchange.</span><span class="sxs-lookup"><span data-stu-id="28c5d-132">The channel shapes are patterned after some of the fundamental message exchange patterns supported by existing transport protocols.</span></span> <span data-ttu-id="28c5d-133">Por exemplo, mensagens unidirecionais corresponde a um <xref:System.ServiceModel.Channels.IInputChannel> / <xref:System.ServiceModel.Channels.IOutputChannel> solicitação-resposta de par, corresponde ao <xref:System.ServiceModel.Channels.IRequestChannel> / <xref:System.ServiceModel.Channels.IReplyChannel> pares e comunicação duplex bidirecional corresponde ao <xref:System.ServiceModel.Channels.IDuplexChannel> (que estende ambos <xref:System.ServiceModel.Channels.IInputChannel> e <xref:System.ServiceModel.Channels.IOutputChannel>).</span><span class="sxs-lookup"><span data-stu-id="28c5d-133">For example, one-way messaging corresponds to an <xref:System.ServiceModel.Channels.IInputChannel>/<xref:System.ServiceModel.Channels.IOutputChannel> pair, request-reply corresponds to <xref:System.ServiceModel.Channels.IRequestChannel>/<xref:System.ServiceModel.Channels.IReplyChannel> pairs and two-way duplex communications corresponds to <xref:System.ServiceModel.Channels.IDuplexChannel> (which extends both <xref:System.ServiceModel.Channels.IInputChannel> and <xref:System.ServiceModel.Channels.IOutputChannel>).</span></span>  
  
## <a name="programming-with-the-channel-stack"></a><span data-ttu-id="28c5d-134">Programando com a pilha de canais</span><span class="sxs-lookup"><span data-stu-id="28c5d-134">Programming with the Channel Stack</span></span>  
 <span data-ttu-id="28c5d-135">Pilhas de canal são tipicamente criadas usando um padrão de fábrica em que uma associação cria a pilha de canais.</span><span class="sxs-lookup"><span data-stu-id="28c5d-135">Channel stacks are typically created using a factory pattern where a binding creates the channel stack.</span></span> <span data-ttu-id="28c5d-136">No lado de envio, uma associação é usada para criar um <xref:System.ServiceModel.ChannelFactory>, que por sua vez compilações um canal de pilha e retorna uma referência para a parte superior do canal na pilha.</span><span class="sxs-lookup"><span data-stu-id="28c5d-136">On the send side, a binding is used to build a <xref:System.ServiceModel.ChannelFactory>, which in turn builds a channel stack and returns a reference to the top channel in the stack.</span></span> <span data-ttu-id="28c5d-137">O aplicativo, em seguida, pode usar esse canal para enviar mensagens.</span><span class="sxs-lookup"><span data-stu-id="28c5d-137">The application can then use this channel to send messages.</span></span> <span data-ttu-id="28c5d-138">Para obter mais informações, consulte [programação de nível de canal cliente](../../../../docs/framework/wcf/extending/client-channel-level-programming.md).</span><span class="sxs-lookup"><span data-stu-id="28c5d-138">For more information, see [Client Channel-Level Programming](../../../../docs/framework/wcf/extending/client-channel-level-programming.md).</span></span>  
  
 <span data-ttu-id="28c5d-139">No lado de recebimento uma associação é usada para criar um <xref:System.ServiceModel.Channels.IChannelListener>, que verifica se há mensagens de entrada.</span><span class="sxs-lookup"><span data-stu-id="28c5d-139">On the receive side a binding is used to build a <xref:System.ServiceModel.Channels.IChannelListener>, which listens for incoming messages.</span></span> <span data-ttu-id="28c5d-140">O <xref:System.ServiceModel.Channels.IChannelListener> fornece mensagens para o aplicativo de escuta criando pilhas de canal e manipulação a referência do aplicativo para o canal superior.</span><span class="sxs-lookup"><span data-stu-id="28c5d-140">The <xref:System.ServiceModel.Channels.IChannelListener> provides messages to the listening application by creating channel stacks and handing the application reference to the top channel.</span></span> <span data-ttu-id="28c5d-141">Em seguida, o aplicativo usa esse canal para receber mensagens de entrada.</span><span class="sxs-lookup"><span data-stu-id="28c5d-141">The application then uses this channel to receive incoming messages.</span></span> <span data-ttu-id="28c5d-142">Para obter mais informações, consulte [programação de nível de serviço de canal](../../../../docs/framework/wcf/extending/service-channel-level-programming.md).</span><span class="sxs-lookup"><span data-stu-id="28c5d-142">For more information, see [Service Channel-Level Programming](../../../../docs/framework/wcf/extending/service-channel-level-programming.md).</span></span>  
  
## <a name="the-channel-object-model"></a><span data-ttu-id="28c5d-143">O modelo de objeto do canal</span><span class="sxs-lookup"><span data-stu-id="28c5d-143">The Channel Object Model</span></span>  
 <span data-ttu-id="28c5d-144">O modelo de objeto do canal é o conjunto principal de interfaces necessárias para implementar os canais, ouvintes de canais e fábricas de canais.</span><span class="sxs-lookup"><span data-stu-id="28c5d-144">The channel object model is the core set of interfaces required to implement channels, channel listeners and channel factories.</span></span> <span data-ttu-id="28c5d-145">Também há algumas classes base fornecidas para auxiliar em implementações personalizadas.</span><span class="sxs-lookup"><span data-stu-id="28c5d-145">There are also some base classes provided to assist in custom implementations.</span></span>  
  
 <span data-ttu-id="28c5d-146">Ouvintes de canais são responsáveis por escutar mensagens de entrada e entregá-los para a camada superior por meio de canais criados pelo ouvinte de canal.</span><span class="sxs-lookup"><span data-stu-id="28c5d-146">Channel listeners are responsible for listening for incoming messages, then delivering them to the layer above through channels created by the channel listener.</span></span>  
  
 <span data-ttu-id="28c5d-147">Fábricas de canais são responsáveis por criar canais que são usados para enviar mensagens e para fechar todos os canais criados quando a fábrica de canais é fechada.</span><span class="sxs-lookup"><span data-stu-id="28c5d-147">Channel factories are responsible for creating channels that are used for sending messages and for closing all channels they created when the channel factory is closed.</span></span>  
  
 <span data-ttu-id="28c5d-148"><xref:System.ServiceModel.ICommunicationObject> é a interface principal que define a máquina de estado básica que todos os objetos de comunicação implementar.</span><span class="sxs-lookup"><span data-stu-id="28c5d-148"><xref:System.ServiceModel.ICommunicationObject> is the core interface that defines the basic state machine that all communication objects implement.</span></span> <span data-ttu-id="28c5d-149"><xref:System.ServiceModel.Channels.CommunicationObject> Fornece uma implementação desta interface principal que outras classes de canal podem derivar em vez de re-implementar a interface.</span><span class="sxs-lookup"><span data-stu-id="28c5d-149"><xref:System.ServiceModel.Channels.CommunicationObject> provides an implementation of this core interface that other channel classes can derive from rather than re-implementing the interface.</span></span> <span data-ttu-id="28c5d-150">No entanto, isso não é obrigatório: um canal personalizado pode implementar <xref:System.ServiceModel.ICommunicationObject> diretamente e não herda de <xref:System.ServiceModel.Channels.CommunicationObject>.</span><span class="sxs-lookup"><span data-stu-id="28c5d-150">However, this is not required: a custom channel can implement <xref:System.ServiceModel.ICommunicationObject> directly and not inherit from <xref:System.ServiceModel.Channels.CommunicationObject>.</span></span> <span data-ttu-id="28c5d-151">Nenhuma das classes na Figura 3 são consideradas parte do modelo de canal. eles estão disponíveis para os implementadores de canal personalizado que desejam criar canais de auxiliares.</span><span class="sxs-lookup"><span data-stu-id="28c5d-151">None of the classes in Figure 3 are considered part of the channel model; they are helpers available to custom channel implementers who want to build channels.</span></span>  
  
 <span data-ttu-id="28c5d-152">![Modelo de canal](../../../../docs/framework/wcf/extending/media/wcfc-wcfcchannelsigure3omumtreec.gif "wcfc_WCFCChannelsigure3OMUMTreec")</span><span class="sxs-lookup"><span data-stu-id="28c5d-152">![Channel model](../../../../docs/framework/wcf/extending/media/wcfc-wcfcchannelsigure3omumtreec.gif "wcfc_WCFCChannelsigure3OMUMTreec")</span></span>  
  
 <span data-ttu-id="28c5d-153">Os tópicos a seguir descrevem o modelo de objeto do canal, bem como várias áreas de desenvolvimento que ajudam a criar canais personalizados.</span><span class="sxs-lookup"><span data-stu-id="28c5d-153">The following topics describe the channel object model as well as various development areas that help build custom channels.</span></span>  
  
|<span data-ttu-id="28c5d-154">Tópico</span><span class="sxs-lookup"><span data-stu-id="28c5d-154">Topic</span></span>|<span data-ttu-id="28c5d-155">Descrição</span><span class="sxs-lookup"><span data-stu-id="28c5d-155">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="28c5d-156">Serviço: ouvintes de canais e canais</span><span class="sxs-lookup"><span data-stu-id="28c5d-156">Service: Channel Listeners and Channels</span></span>](../../../../docs/framework/wcf/extending/service-channel-listeners-and-channels.md)|<span data-ttu-id="28c5d-157">Descreve os ouvintes de canais que escuta canais de entrada em um aplicativo de serviço.</span><span class="sxs-lookup"><span data-stu-id="28c5d-157">Describes channel listeners, which listen for incoming channels in a service application.</span></span>|  
|[<span data-ttu-id="28c5d-158">Cliente: fábricas de canais e canais</span><span class="sxs-lookup"><span data-stu-id="28c5d-158">Client: Channel Factories and Channels</span></span>](../../../../docs/framework/wcf/extending/client-channel-factories-and-channels.md)|<span data-ttu-id="28c5d-159">Descreve as fábricas de canais que criam canais para se conectar a um aplicativo de serviço.</span><span class="sxs-lookup"><span data-stu-id="28c5d-159">Describes channel factories, which create channels to connect to a service application.</span></span>|  
|[<span data-ttu-id="28c5d-160">Entendendo mudanças de estado</span><span class="sxs-lookup"><span data-stu-id="28c5d-160">Understanding State Changes</span></span>](../../../../docs/framework/wcf/extending/understanding-state-changes.md)|<span data-ttu-id="28c5d-161">Descreve como o <xref:System.ServiceModel.ICommunicationObject?displayProperty=nameWithType> alterações de estado em canais de modelos de interface.</span><span class="sxs-lookup"><span data-stu-id="28c5d-161">Describes how the <xref:System.ServiceModel.ICommunicationObject?displayProperty=nameWithType> interface models state changes in channels.</span></span>|  
|[<span data-ttu-id="28c5d-162">Escolhendo um padrão de troca de mensagem</span><span class="sxs-lookup"><span data-stu-id="28c5d-162">Choosing a Message Exchange Pattern</span></span>](../../../../docs/framework/wcf/extending/choosing-a-message-exchange-pattern.md)|<span data-ttu-id="28c5d-163">Descreve os seis padrões de troca de mensagem básica que podem dar suporte a canais.</span><span class="sxs-lookup"><span data-stu-id="28c5d-163">Describes the six basic message exchange patterns that channels can support.</span></span>|  
|[<span data-ttu-id="28c5d-164">Tratamento de exceções e falhas</span><span class="sxs-lookup"><span data-stu-id="28c5d-164">Handling Exceptions and Faults</span></span>](../../../../docs/framework/wcf/extending/handling-exceptions-and-faults.md)|<span data-ttu-id="28c5d-165">Descreve como lidar com falhas e exceções em canais personalizados.</span><span class="sxs-lookup"><span data-stu-id="28c5d-165">Describes how to handle faults and exceptions in custom channels.</span></span>|  
|[<span data-ttu-id="28c5d-166">Configuração e suporte a metadados</span><span class="sxs-lookup"><span data-stu-id="28c5d-166">Configuration and Metadata Support</span></span>](../../../../docs/framework/wcf/extending/configuration-and-metadata-support.md)|<span data-ttu-id="28c5d-167">Descreve como suporte ao uso de canais personalizados do modelo de aplicativo e como exportar e importar metadados usando associações e elementos de associação.</span><span class="sxs-lookup"><span data-stu-id="28c5d-167">Describes how to support the use of custom channels from the application model and how to export and import metadata using bindings and binding elements.</span></span>|
