---
title: Enviando e recebendo falhas
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: handling faults [WCF], sending
ms.assetid: 7be6fb96-ce2a-450b-aebe-f932c6a4bc5d
caps.latest.revision: "10"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 248202e07d3b74f5d71b40155ae8f617f7ed15ce
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/22/2017
---
# <a name="sending-and-receiving-faults"></a><span data-ttu-id="e1e10-102">Enviando e recebendo falhas</span><span class="sxs-lookup"><span data-stu-id="e1e10-102">Sending and Receiving Faults</span></span>
<span data-ttu-id="e1e10-103">Falhas de SOAP transmitem condição informações de erro de um serviço para um cliente e no caso de um cliente duplex para um serviço de forma interoperável.</span><span class="sxs-lookup"><span data-stu-id="e1e10-103">SOAP faults convey error condition information from a service to a client and in the duplex case from a client to a service in an interoperable way.</span></span> <span data-ttu-id="e1e10-104">Normalmente um serviço define o conteúdo de falhas personalizado e especifica quais operações podem retorná-los.</span><span class="sxs-lookup"><span data-stu-id="e1e10-104">Typically a service defines custom fault content and specifies which operations can return them.</span></span> <span data-ttu-id="e1e10-105">(Para obter mais informações, consulte [definindo e especificando falhas](../../../docs/framework/wcf/defining-and-specifying-faults.md).) Este tópico discute como um serviço ou cliente duplex pode enviar essas falhas quando a condição de erro correspondente e como um cliente ou aplicativo de serviço lida com essas falhas.</span><span class="sxs-lookup"><span data-stu-id="e1e10-105">(For more information, see [Defining and Specifying Faults](../../../docs/framework/wcf/defining-and-specifying-faults.md).) This topic discusses how a service or duplex client can send those faults when the corresponding error condition has occurred and how a client or service application handles these faults.</span></span> <span data-ttu-id="e1e10-106">Para obter uma visão geral de tratamento de erros em [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] aplicativos, consulte [especificando e tratamento de falhas em contratos e serviços](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="e1e10-106">For an overview of error handling in [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] applications, see [Specifying and Handling Faults in Contracts and Services](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span></span>  
  
## <a name="sending-soap-faults"></a><span data-ttu-id="e1e10-107">Envio de falhas de SOAP</span><span class="sxs-lookup"><span data-stu-id="e1e10-107">Sending SOAP Faults</span></span>  
 <span data-ttu-id="e1e10-108">Declarado falhas de SOAP são aquelas em que uma operação tem um <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> que especifica um tipo personalizado de falhas SOAP.</span><span class="sxs-lookup"><span data-stu-id="e1e10-108">Declared SOAP faults are those in which an operation has a <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> that specifies a custom SOAP fault type.</span></span> <span data-ttu-id="e1e10-109">Falhas de SOAP não declaradas são aqueles que não são especificados no contrato para uma operação.</span><span class="sxs-lookup"><span data-stu-id="e1e10-109">Undeclared SOAP faults are those that are not specified in the contract for an operation.</span></span>  
  
### <a name="sending-declared-faults"></a><span data-ttu-id="e1e10-110">Envio de falhas declaradas</span><span class="sxs-lookup"><span data-stu-id="e1e10-110">Sending Declared Faults</span></span>  
 <span data-ttu-id="e1e10-111">Para enviar uma falha SOAP declarada, detectar a condição de erro para o qual a falha SOAP é apropriada e gerar um novo <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> onde o parâmetro de tipo é um novo objeto do tipo especificado no <xref:System.ServiceModel.FaultContractAttribute> para essa operação.</span><span class="sxs-lookup"><span data-stu-id="e1e10-111">To send a declared SOAP fault, detect the error condition for which the SOAP fault is appropriate and throw a new <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> where the type parameter is a new object of the type specified in the <xref:System.ServiceModel.FaultContractAttribute> for that operation.</span></span> <span data-ttu-id="e1e10-112">O exemplo de código a seguir mostra o uso de <xref:System.ServiceModel.FaultContractAttribute> para especificar que o `SampleMethod` operação pode retornar uma falha SOAP com o tipo de detalhe de `GreetingFault`.</span><span class="sxs-lookup"><span data-stu-id="e1e10-112">The following code example shows the use of <xref:System.ServiceModel.FaultContractAttribute> to specify that the `SampleMethod` operation can return a SOAP fault with the detail type of `GreetingFault`.</span></span>  
  
 [!code-csharp[FaultContractAttribute#4](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/services.cs#4)]
 [!code-vb[FaultContractAttribute#4](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/services.vb#4)]  
  
 <span data-ttu-id="e1e10-113">Para transmitir o `GreetingFault` informações de erro para o cliente, capturar a condição de erro apropriado e lançar um novo <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> do tipo `GreetingFault` com um novo `GreetingFault` objeto como argumento, como no exemplo de código a seguir.</span><span class="sxs-lookup"><span data-stu-id="e1e10-113">To convey the `GreetingFault` error information to the client, catch the appropriate error condition and throw a new <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> of type `GreetingFault` with a new `GreetingFault` object as the argument, as in the following code example.</span></span> <span data-ttu-id="e1e10-114">Se o cliente é um [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplicativo cliente, ele passa por isso como uma exceção gerenciada em que o tipo é <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> do tipo `GreetingFault`.</span><span class="sxs-lookup"><span data-stu-id="e1e10-114">If the client is an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client application, it experiences this as a managed exception where the type is <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> of type `GreetingFault`.</span></span>  
  
 [!code-csharp[FaultContractAttribute#5](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/services.cs#5)]
 [!code-vb[FaultContractAttribute#5](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/services.vb#5)]  
  
### <a name="sending-undeclared-faults"></a><span data-ttu-id="e1e10-115">Envio de falhas não declaradas</span><span class="sxs-lookup"><span data-stu-id="e1e10-115">Sending Undeclared Faults</span></span>  
 <span data-ttu-id="e1e10-116">Pode ser muito útil para diagnosticar rapidamente e depurar problemas no envio de falhas não declaradas [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplicativos, mas sua utilidade como uma ferramenta de depuração é limitado.</span><span class="sxs-lookup"><span data-stu-id="e1e10-116">Sending undeclared faults can be very useful to quickly diagnose and debug problems in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] applications, but its usefulness as a debugging tool is limited.</span></span> <span data-ttu-id="e1e10-117">Geralmente, quando depurá-lo é recomendável que você use o <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> propriedade.</span><span class="sxs-lookup"><span data-stu-id="e1e10-117">More generally, when debugging it is recommended that you use the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="e1e10-118">Quando você definir esse valor como true, os clientes enfrentam tais falhas como <xref:System.ServiceModel.FaultException%601> exceções do tipo <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="e1e10-118">When you set this value to true, clients experience such faults as <xref:System.ServiceModel.FaultException%601> exceptions of type <xref:System.ServiceModel.ExceptionDetail>.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="e1e10-119">Definir como exceções gerenciadas podem expor informações do aplicativo interno, <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> ou <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> para `true` pode permitir [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clientes para obter informações sobre exceções de operação de serviço interno, incluindo informações confidenciais ou de identificação pessoal.</span><span class="sxs-lookup"><span data-stu-id="e1e10-119">Because managed exceptions can expose internal application information, setting <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> to `true` can permit [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clients to obtain information about internal service operation exceptions, including personally identifiable or other sensitive information.</span></span>  
>   
>  <span data-ttu-id="e1e10-120">Portanto, definir <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> ou <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> para `true` só é recomendado como um modo de depuração temporariamente um aplicativo de serviço.</span><span class="sxs-lookup"><span data-stu-id="e1e10-120">Therefore, setting <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> to `true` is only recommended as a way of temporarily debugging a service application.</span></span> <span data-ttu-id="e1e10-121">Além disso, o WSDL para um método que retorna sem tratamento gerenciados exceções dessa maneira não contém o contrato para o <xref:System.ServiceModel.FaultException%601> do tipo <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="e1e10-121">In addition, the WSDL for a method that returns unhandled managed exceptions in this way does not contain the contract for the <xref:System.ServiceModel.FaultException%601> of type <xref:System.ServiceModel.ExceptionDetail>.</span></span> <span data-ttu-id="e1e10-122">Os clientes devem esperar a possibilidade de uma falha de SOAP desconhecida (retornado para [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clientes como <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> objetos) para obter as informações de depuração corretamente.</span><span class="sxs-lookup"><span data-stu-id="e1e10-122">Clients must expect the possibility of an unknown SOAP fault (returned to [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clients as <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> objects) to obtain the debugging information properly.</span></span>  
  
 <span data-ttu-id="e1e10-123">Para enviar uma falha de SOAP não declarada, gerar um <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> objeto (ou seja, não o tipo genérico <xref:System.ServiceModel.FaultException%601>) e passe a cadeia de caracteres para o construtor.</span><span class="sxs-lookup"><span data-stu-id="e1e10-123">To send an undeclared SOAP fault, throw a <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> object (that is, not the generic type <xref:System.ServiceModel.FaultException%601>) and pass the string to the constructor.</span></span> <span data-ttu-id="e1e10-124">Isso é exposto para o [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplicativos cliente como um lançado <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> exceção onde a cadeia de caracteres está disponível por meio da chamada a <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="e1e10-124">This is exposed to the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client applications as a thrown <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> exception where the string is available by calling the <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e1e10-125">Se você declarar uma falha SOAP do tipo cadeia de caracteres e, em seguida, gerar isso em seu serviço como uma <xref:System.ServiceModel.FaultException%601> onde o parâmetro de tipo é um <xref:System.String?displayProperty=nameWithType> o valor de cadeia de caracteres é atribuído para o <xref:System.ServiceModel.FaultException%601.Detail%2A?displayProperty=nameWithType> propriedade e não está disponível no <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e1e10-125">If you declare a SOAP fault of type string, and then throw this in your service as a <xref:System.ServiceModel.FaultException%601> where the type parameter is a <xref:System.String?displayProperty=nameWithType> the string value is assigned to the <xref:System.ServiceModel.FaultException%601.Detail%2A?displayProperty=nameWithType> property, and is not available from <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType>.</span></span>  
  
## <a name="handling-faults"></a><span data-ttu-id="e1e10-126">Lidando com falhas</span><span class="sxs-lookup"><span data-stu-id="e1e10-126">Handling Faults</span></span>  
 <span data-ttu-id="e1e10-127">Em [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clientes, falhas de SOAP que ocorrem durante a comunicação que são de interesse para os aplicativos cliente são gerados como exceções gerenciadas.</span><span class="sxs-lookup"><span data-stu-id="e1e10-127">In [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clients, SOAP faults that occur during communication that are of interest to client applications are raised as managed exceptions.</span></span> <span data-ttu-id="e1e10-128">Embora existam muitas exceções que podem ocorrer durante a execução de qualquer programa, os aplicativos que usam o [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] modelo de programação do cliente pode esperar lidar com exceções de dois tipos a seguir como resultado de comunicação.</span><span class="sxs-lookup"><span data-stu-id="e1e10-128">While there are many exceptions that can occur during the execution of any program, applications using the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client programming model can expect to handle exceptions of the following two types as a result of communication.</span></span>  
  
-   <xref:System.TimeoutException>  
  
-   <xref:System.ServiceModel.CommunicationException>  
  
 <span data-ttu-id="e1e10-129"><xref:System.TimeoutException>objetos são gerados quando uma operação excede o período de tempo limite especificado.</span><span class="sxs-lookup"><span data-stu-id="e1e10-129"><xref:System.TimeoutException> objects are thrown when an operation exceeds the specified timeout period.</span></span>  
  
 <span data-ttu-id="e1e10-130"><xref:System.ServiceModel.CommunicationException>objetos são gerados quando há alguma condição de erro de comunicação recuperáveis no serviço ou cliente.</span><span class="sxs-lookup"><span data-stu-id="e1e10-130"><xref:System.ServiceModel.CommunicationException> objects are thrown when there is some recoverable communication error condition on either the service or the client.</span></span>  
  
 <span data-ttu-id="e1e10-131">O <xref:System.ServiceModel.CommunicationException> classe tem dois tipos derivados importantes <xref:System.ServiceModel.FaultException> e genérica <xref:System.ServiceModel.FaultException%601> tipo.</span><span class="sxs-lookup"><span data-stu-id="e1e10-131">The <xref:System.ServiceModel.CommunicationException> class has two important derived types, <xref:System.ServiceModel.FaultException> and the generic <xref:System.ServiceModel.FaultException%601> type.</span></span>  
  
 <span data-ttu-id="e1e10-132"><xref:System.ServiceModel.FaultException>exceções são geradas quando um ouvinte recebe uma falha que não é esperada ou especificada no contrato de operação; Normalmente isso ocorre quando o aplicativo está sendo depurado e o serviço tem o <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> propriedade definida como `true`.</span><span class="sxs-lookup"><span data-stu-id="e1e10-132"><xref:System.ServiceModel.FaultException> exceptions are thrown when a listener receives a fault that is not expected or specified in the operation contract; usually this occurs when the application is being debugged and the service has the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property set to `true`.</span></span>  
  
 <span data-ttu-id="e1e10-133"><xref:System.ServiceModel.FaultException%601>exceções são geradas no cliente quando uma falha que é especificada no contrato de operação é recebida em resposta a uma operação bidirecional (ou seja, um método com um <xref:System.ServiceModel.OperationContractAttribute> atributo com <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> definida como `false`).</span><span class="sxs-lookup"><span data-stu-id="e1e10-133"><xref:System.ServiceModel.FaultException%601> exceptions are thrown on the client when a fault that is specified in the operation contract is received in response to a two-way operation (that is, a method with an <xref:System.ServiceModel.OperationContractAttribute> attribute with <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> set to `false`).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e1e10-134">Quando um [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] serviço tem o <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> ou <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> propriedade definida como `true` o cliente apresenta isso como um não declarada <xref:System.ServiceModel.FaultException%601> do tipo <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="e1e10-134">When an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service has the <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property set to `true` the client experiences this as an undeclared <xref:System.ServiceModel.FaultException%601> of type <xref:System.ServiceModel.ExceptionDetail>.</span></span> <span data-ttu-id="e1e10-135">Os clientes podem detectar essa falha específica ou tratar a falha em um bloco catch para <xref:System.ServiceModel.FaultException>.</span><span class="sxs-lookup"><span data-stu-id="e1e10-135">Clients can either catch this specific fault or handle the fault in a catch block for <xref:System.ServiceModel.FaultException>.</span></span>  
  
 <span data-ttu-id="e1e10-136">Normalmente, apenas <xref:System.ServiceModel.FaultException%601>, <xref:System.TimeoutException>, e <xref:System.ServiceModel.CommunicationException> exceções são de interesse para os clientes e serviços.</span><span class="sxs-lookup"><span data-stu-id="e1e10-136">Typically, only <xref:System.ServiceModel.FaultException%601>, <xref:System.TimeoutException>, and <xref:System.ServiceModel.CommunicationException> exceptions are of interest to clients and services.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e1e10-137">Outras exceções, obviamente, ocorrer.</span><span class="sxs-lookup"><span data-stu-id="e1e10-137">Other exceptions, of course, do occur.</span></span> <span data-ttu-id="e1e10-138">Exceções inesperadas incluem falhas catastróficas como <xref:System.OutOfMemoryException?displayProperty=nameWithType>; normalmente aplicativos não devem capturar esses métodos.</span><span class="sxs-lookup"><span data-stu-id="e1e10-138">Unexpected exceptions include catastrophic failures like <xref:System.OutOfMemoryException?displayProperty=nameWithType>; typically applications should not catch such methods.</span></span>  
  
### <a name="catch-fault-exceptions-in-the-correct-order"></a><span data-ttu-id="e1e10-139">Capturar exceções de falha na ordem correta</span><span class="sxs-lookup"><span data-stu-id="e1e10-139">Catch Fault Exceptions in the Correct Order</span></span>  
 <span data-ttu-id="e1e10-140">Porque <xref:System.ServiceModel.FaultException%601> deriva <xref:System.ServiceModel.FaultException>, e <xref:System.ServiceModel.FaultException> deriva <xref:System.ServiceModel.CommunicationException>, é importante capturar essas exceções na ordem correta.</span><span class="sxs-lookup"><span data-stu-id="e1e10-140">Because <xref:System.ServiceModel.FaultException%601> derives from <xref:System.ServiceModel.FaultException>, and <xref:System.ServiceModel.FaultException> derives from <xref:System.ServiceModel.CommunicationException>, it is important to catch these exceptions in the proper order.</span></span> <span data-ttu-id="e1e10-141">Se, por exemplo, você tem um try/catch bloco no qual você primeiro captura <xref:System.ServiceModel.CommunicationException>, todos especificados e não especificado de falhas de SOAP são manipuladas há; todos os blocos catch subsequentes para manipular um personalizado <xref:System.ServiceModel.FaultException%601> exceção nunca sejam invocados.</span><span class="sxs-lookup"><span data-stu-id="e1e10-141">If, for example, you have a try/catch block in which you first catch <xref:System.ServiceModel.CommunicationException>, all specified and unspecified SOAP faults are handled there; any subsequent catch blocks to handle a custom <xref:System.ServiceModel.FaultException%601> exception are never invoked.</span></span>  
  
 <span data-ttu-id="e1e10-142">Lembre-se de que uma operação pode retornar qualquer número de falhas especificados.</span><span class="sxs-lookup"><span data-stu-id="e1e10-142">Remember that one operation can return any number of specified faults.</span></span> <span data-ttu-id="e1e10-143">Cada falha é um tipo exclusivo e deve ser tratada separadamente.</span><span class="sxs-lookup"><span data-stu-id="e1e10-143">Each fault is a unique type and must be handled separately.</span></span>  
  
### <a name="handle-exceptions-when-closing-the-channel"></a><span data-ttu-id="e1e10-144">Lidar com exceções ao fechar o canal</span><span class="sxs-lookup"><span data-stu-id="e1e10-144">Handle Exceptions When Closing the Channel</span></span>  
 <span data-ttu-id="e1e10-145">A maioria da discussão anterior tem a ver com falhas enviadas durante o processamento de mensagens do aplicativo, ou seja, as mensagens enviadas explicitamente pelo cliente quando o aplicativo cliente chama as operações na [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] objeto cliente.</span><span class="sxs-lookup"><span data-stu-id="e1e10-145">Most of the preceding discussion has to do with faults sent in the course of processing application messages, that is, messages explicitly sent by the client when the client application calls operations on the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object.</span></span>  
  
 <span data-ttu-id="e1e10-146">Mesmo com objetos locais descartar o objeto pode gerar ou mascarar exceções que ocorrem durante o processo de reciclagem.</span><span class="sxs-lookup"><span data-stu-id="e1e10-146">Even with local objects disposing the object can either raise or mask exceptions that occur during the recycling process.</span></span> <span data-ttu-id="e1e10-147">Algo semelhante pode ocorrer quando você usar [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] objetos do cliente.</span><span class="sxs-lookup"><span data-stu-id="e1e10-147">Something similar can occur when you use [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client objects.</span></span> <span data-ttu-id="e1e10-148">Quando você chamar operações está enviando mensagens sobre uma conexão estabelecida.</span><span class="sxs-lookup"><span data-stu-id="e1e10-148">When you call operations you are sending messages over an established connection.</span></span> <span data-ttu-id="e1e10-149">Fechar o canal pode gerar exceções se a conexão não pode ser fechada corretamente ou se já estiver fechado, mesmo se todas as operações retornadas corretamente.</span><span class="sxs-lookup"><span data-stu-id="e1e10-149">Closing the channel can throw exceptions if the connection cannot be cleanly closed or is already closed, even if all the operations returned properly.</span></span>  
  
 <span data-ttu-id="e1e10-150">Normalmente, canais de objeto do cliente são fechados em uma das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="e1e10-150">Typically, client object channels are closed in one of the following ways:</span></span>  
  
-   <span data-ttu-id="e1e10-151">Quando o [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] objeto do cliente é reciclado.</span><span class="sxs-lookup"><span data-stu-id="e1e10-151">When the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object is recycled.</span></span>  
  
-   <span data-ttu-id="e1e10-152">Quando o aplicativo cliente chama <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e1e10-152">When the client application calls <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="e1e10-153">Quando o aplicativo cliente chama <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e1e10-153">When the client application calls <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="e1e10-154">Quando o aplicativo cliente chama uma operação que é uma operação de encerramento de uma sessão.</span><span class="sxs-lookup"><span data-stu-id="e1e10-154">When the client application calls an operation that is a terminating operation for a session.</span></span>  
  
 <span data-ttu-id="e1e10-155">Em todos os casos, fechar o canal instrui o canal para começar a fechar todos os canais subjacentes que podem estar enviando mensagens para dar suporte a funcionalidades complexas no nível do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e1e10-155">In all cases, closing the channel instructs the channel to begin closing any underlying channels that may be sending messages to support complex functionality at the application level.</span></span> <span data-ttu-id="e1e10-156">Por exemplo, quando um contrato requer sessões uma associação tenta estabelecer uma sessão de troca de mensagens com o canal de serviço até que seja estabelecida uma sessão.</span><span class="sxs-lookup"><span data-stu-id="e1e10-156">For example, when a contract requires sessions a binding attempts to establish a session by exchanging messages with the service channel until a session is established.</span></span> <span data-ttu-id="e1e10-157">Quando o canal for fechado, o canal da sessão subjacente notifica o serviço que a sessão seja encerrada.</span><span class="sxs-lookup"><span data-stu-id="e1e10-157">When the channel is closed, the underlying session channel notifies the service that the session is terminated.</span></span> <span data-ttu-id="e1e10-158">Nesse caso, se o canal já foi anulada, fechado, ou caso contrário, será usado (por exemplo, quando um cabo de rede está desconectado), o canal do cliente não pode informar o canal de serviço que a sessão será encerrada e uma exceção pode ocorrer.</span><span class="sxs-lookup"><span data-stu-id="e1e10-158">In this case, if the channel has already aborted, closed, or is otherwise unusable (for example, when a network cable is unplugged), the client channel cannot inform the service channel that the session is terminated and an exception can result.</span></span>  
  
### <a name="abort-the-channel-if-necessary"></a><span data-ttu-id="e1e10-159">Anular o canal, se necessário</span><span class="sxs-lookup"><span data-stu-id="e1e10-159">Abort the Channel If Necessary</span></span>  
 <span data-ttu-id="e1e10-160">Porque o canal de fechamento, também pode lançar exceções, em seguida, é recomendável que além de capturar exceções de falha na ordem correta, é importante anular o canal que foi usado para fazer a chamada em um bloco catch.</span><span class="sxs-lookup"><span data-stu-id="e1e10-160">Because closing the channel can also throw exceptions, then, it is recommended that in addition to catching fault exceptions in the correct order, it is important to abort the channel that was used in making the call in the catch block.</span></span>  
  
 <span data-ttu-id="e1e10-161">Se a falha transmite informações de erro específicas para uma operação e continua sendo possível que outras pessoas podem usá-lo, não é necessário para anular o canal (embora nesses casos são raros).</span><span class="sxs-lookup"><span data-stu-id="e1e10-161">If the fault conveys error information specific to an operation and it remains possible that others can use it, there is no need to abort the channel (although these cases are rare).</span></span> <span data-ttu-id="e1e10-162">Em todos os outros casos, é recomendável que você anula o canal.</span><span class="sxs-lookup"><span data-stu-id="e1e10-162">In all other cases, it is recommended that you abort the channel.</span></span> <span data-ttu-id="e1e10-163">Para obter um exemplo que demonstra todos esses pontos, consulte [esperado exceções](../../../docs/framework/wcf/samples/expected-exceptions.md).</span><span class="sxs-lookup"><span data-stu-id="e1e10-163">For a sample that demonstrates all of these points, see [Expected Exceptions](../../../docs/framework/wcf/samples/expected-exceptions.md).</span></span>  
  
 <span data-ttu-id="e1e10-164">O exemplo de código a seguir mostra como tratar exceções de falha SOAP em um aplicativo cliente básico, incluindo uma falha declarada e uma falha não declarada.</span><span class="sxs-lookup"><span data-stu-id="e1e10-164">The following code example shows how to handle SOAP fault exceptions in a basic client application, including a declared fault and an undeclared fault.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e1e10-165">Esse código de exemplo não usa o `using` construir.</span><span class="sxs-lookup"><span data-stu-id="e1e10-165">This sample code does not use the `using` construct.</span></span> <span data-ttu-id="e1e10-166">Como fechar canais pode lançar exceções, é recomendável que criam aplicativos um [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] cliente primeiro e, em seguida, abrir, uso e fechar o [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] cliente no mesmo bloco try.</span><span class="sxs-lookup"><span data-stu-id="e1e10-166">Because closing channels can throw exceptions, it is recommended that applications create a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client first, and then open, use, and close the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client in the same try block.</span></span> <span data-ttu-id="e1e10-167">Para obter detalhes, consulte [visão geral do cliente WCF](../../../docs/framework/wcf/wcf-client-overview.md) e [evitando problemas com a instrução Using](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md).</span><span class="sxs-lookup"><span data-stu-id="e1e10-167">For details, see [WCF Client Overview](../../../docs/framework/wcf/wcf-client-overview.md) and [Avoiding Problems with the Using Statement](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md).</span></span>  
  
 [!code-csharp[FaultContractAttribute#3](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/client.cs#3)]
 [!code-vb[FaultContractAttribute#3](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/client.vb#3)]  
  
## <a name="see-also"></a><span data-ttu-id="e1e10-168">Consulte também</span><span class="sxs-lookup"><span data-stu-id="e1e10-168">See Also</span></span>  
 <xref:System.ServiceModel.FaultException>  
 <xref:System.ServiceModel.FaultException%601>  
 <xref:System.ServiceModel.CommunicationException?displayProperty=nameWithType>  
 [<span data-ttu-id="e1e10-169">Exceções esperadas</span><span class="sxs-lookup"><span data-stu-id="e1e10-169">Expected Exceptions</span></span>](../../../docs/framework/wcf/samples/expected-exceptions.md)  
 [<span data-ttu-id="e1e10-170">Evitando problemas com a instrução Using</span><span class="sxs-lookup"><span data-stu-id="e1e10-170">Avoiding Problems with the Using Statement</span></span>](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md)
