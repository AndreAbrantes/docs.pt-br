---
title: "Procedimento de configuração único para exemplos do Windows Communication Foundation"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a5848ffd-3eb5-432d-812e-bd948ccb6bca
caps.latest.revision: "83"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 7ffc74fdbec204b798ee93a8ee2c91db992a83cb
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/22/2017
---
# <a name="one-time-setup-procedure-for-the-windows-communication-foundation-samples"></a><span data-ttu-id="64597-102">Procedimento de configuração único para exemplos do Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="64597-102">One-Time Setup Procedure for the Windows Communication Foundation Samples</span></span>
<span data-ttu-id="64597-103">A maioria do [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] exemplos são hospedados em serviços de informações da Internet (IIS) e executar a partir de um diretório virtual comum.</span><span class="sxs-lookup"><span data-stu-id="64597-103">Most of the [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] samples are hosted in Internet Information Services (IIS) and run from a common virtual directory.</span></span> <span data-ttu-id="64597-104">Este procedimento de configuração única cria uma pasta no disco; Ele também adiciona um diretório virtual IIS chamado **ServiceModelSamples**.</span><span class="sxs-lookup"><span data-stu-id="64597-104">This one-time setup procedure creates a folder on the disk; it also adds a virtual directory to IIS named **ServiceModelSamples**.</span></span>  
  
 <span data-ttu-id="64597-105">O **ServiceModelSamples** diretório virtual é usado para criar e executar todas as amostras que usam um serviço hospedado no IIS.</span><span class="sxs-lookup"><span data-stu-id="64597-105">The **ServiceModelSamples** virtual directory is used for building and running all samples that use an IIS-hosted service.</span></span> <span data-ttu-id="64597-106">Este é o diretório virtual somente é necessário para executar os exemplos.</span><span class="sxs-lookup"><span data-stu-id="64597-106">This is the only virtual directory that is required to run the samples.</span></span> <span data-ttu-id="64597-107">Criar um exemplo substituirá qualquer serviço implantado anteriormente neste diretório virtual; somente o exemplo construído mais recentemente será implantado e disponíveis neste diretório virtual.</span><span class="sxs-lookup"><span data-stu-id="64597-107">Building a sample will replace any previously deployed service at this virtual directory; only the most recently built sample will be deployed and available in this virtual directory.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="64597-108">Você deve executar todos os comandos em uma conta de administrador local.</span><span class="sxs-lookup"><span data-stu-id="64597-108">You must run all commands under a local administrator account.</span></span> <span data-ttu-id="64597-109">Se você estiver usando o Windows 7, [!INCLUDE[windowsver](../../../../includes/windowsver-md.md)], ou Windows Server 2008 R2, você também deve executar o prompt de comando com privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="64597-109">If you are using Windows 7, [!INCLUDE[windowsver](../../../../includes/windowsver-md.md)], or Windows Server 2008 R2, you must also run the command prompt with elevated privileges.</span></span> <span data-ttu-id="64597-110">Para fazer isso, clique no ícone de prompt de comando e, em seguida, clique em **executar como administrador**.</span><span class="sxs-lookup"><span data-stu-id="64597-110">To do so, right-click the command prompt icon, and then click **Run as administrator**.</span></span> <span data-ttu-id="64597-111">Todos os comandos neste tópico devem ser executados em um prompt de comando com as configurações de caminho adequado.</span><span class="sxs-lookup"><span data-stu-id="64597-111">All commands in this topic must be run in a command prompt that has the appropriate path settings.</span></span>  <span data-ttu-id="64597-112">A maneira mais fácil de garantir que isso é usando o Prompt de comando do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="64597-112">The easiest way to ensure this is by using the Visual Studio Command Prompt.</span></span> <span data-ttu-id="64597-113">Para abrir este prompt, clique em **iniciar**, selecione **todos os programas**, role para baixo até **Visual Studio 2010**, selecione **ferramentas do Visual Studio**, Clique com botão direito **Prompt de comando do Visual Studio (2010)**e, em seguida, clique em **executar como administrador**.</span><span class="sxs-lookup"><span data-stu-id="64597-113">To open this prompt, click **Start**, select **All Programs**, scroll down to **Visual Studio 2010**, select **Visual Studio Tools**, right-click **Visual Studio Command Prompt (2010)**, and then click **Run as administrator**.</span></span> <span data-ttu-id="64597-114">Se você tiver uma das edições Express do Visual Studio instaladas, esse prompt de comando não está disponível e você terá que adicionar "C:\Windows\Microsoft.Net\Framework\v4.0" ao caminho do sistema.</span><span class="sxs-lookup"><span data-stu-id="64597-114">If you have one of the Visual Studio Express editions installed, this command prompt is not available, and you will have to add "C:\Windows\Microsoft.Net\Framework\v4.0" to the system path.</span></span>  
  
### <a name="one-time-setup-procedure-for-wcf-samples"></a><span data-ttu-id="64597-115">Procedimento de configuração única para obter exemplos do WCF</span><span class="sxs-lookup"><span data-stu-id="64597-115">One-time setup procedure for WCF samples</span></span>  
  
1.  <span data-ttu-id="64597-116">Certifique-se de que [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] está configurado.</span><span class="sxs-lookup"><span data-stu-id="64597-116">Ensure that [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] is set up.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="64597-117">como configurar o [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], consulte [instruções de hospedagem do serviço Internet informações](../../../../docs/framework/wcf/samples/internet-information-service-hosting-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="64597-117"> how to set up [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], see [Internet Information Service Hosting Instructions](../../../../docs/framework/wcf/samples/internet-information-service-hosting-instructions.md).</span></span>  
  
2.  <span data-ttu-id="64597-118">Certifique-se de que [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)] está instalado.</span><span class="sxs-lookup"><span data-stu-id="64597-118">Ensure that [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)] is installed.</span></span> <span data-ttu-id="64597-119">Procure o seguinte diretório para v 4.0 (ou posterior): **\Windows\Microsoft.NET\Framework**</span><span class="sxs-lookup"><span data-stu-id="64597-119">Search the following directory for v4.0 (or later): **\Windows\Microsoft.NET\Framework**</span></span>  
  
3.  <span data-ttu-id="64597-120">Se [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] não estiver instalado, e o sistema operacional não é Windows Server 2008 SP2 ou posterior, instalar [251798 Hotfix](http://go.microsoft.com/fwlink/?LinkId=184693).</span><span class="sxs-lookup"><span data-stu-id="64597-120">If [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] is not installed, and your operating system is not Windows Server 2008 SP2 or later, install [Hotfix 251798](http://go.microsoft.com/fwlink/?LinkId=184693).</span></span>  
  
4.  <span data-ttu-id="64597-121">Execute os seguintes comandos.</span><span class="sxs-lookup"><span data-stu-id="64597-121">Run the following commands.</span></span> <span data-ttu-id="64597-122">Para obter mais informações sobre por que esses comandos devem ser executados, consulte [IIS serviço hospedado não](http://msdn.microsoft.com/en-us/ee5499fc-1b10-4cda-a9b1-13dba70f05f8).</span><span class="sxs-lookup"><span data-stu-id="64597-122">For more information about why these commands must be run, see [IIS Hosted Service Fails](http://msdn.microsoft.com/en-us/ee5499fc-1b10-4cda-a9b1-13dba70f05f8).</span></span>  
  
    > [!WARNING]
    >  <span data-ttu-id="64597-123">Se o IIS for reinstalado, os comandos a seguir precisa ser executado novamente.</span><span class="sxs-lookup"><span data-stu-id="64597-123">If IIS is reinstalled, the following commands will need to be run again.</span></span>  
  
    ```  
    "%WINDIR%\Microsoft.Net\Framework\v4.0.30319\aspnet_regiis" –i –enable  
    "%WINDIR%\Microsoft.Net\Framework\v4.0.30319\ServiceModelReg.exe" -r  
    ```  
  
    > [!WARNING]
    >  <span data-ttu-id="64597-124">Executar o comando `aspnet_regiis –i –enable` fará com que o Pool de aplicativos padrão execução usando [!INCLUDE[netfx40_short](../../../../includes/netfx40-short-md.md)], que pode gerar problemas de incompatibilidade de outros aplicativos no mesmo computador.</span><span class="sxs-lookup"><span data-stu-id="64597-124">Running the command `aspnet_regiis –i –enable` will make the Default App Pool run using [!INCLUDE[netfx40_short](../../../../includes/netfx40-short-md.md)], which may produce incompatibility issues for other applications on the same computer.</span></span>  
  
5.  <span data-ttu-id="64597-125">Siga o [instruções do Firewall](../../../../docs/framework/wcf/samples/firewall-instructions.md) para habilitar as portas usadas pelos exemplos.</span><span class="sxs-lookup"><span data-stu-id="64597-125">Follow the [Firewall Instructions](../../../../docs/framework/wcf/samples/firewall-instructions.md) for enabling the ports used by the samples.</span></span>  
  
6.  <span data-ttu-id="64597-126">Verifique o seguinte diretório padrão: \<Unidade_de_instalação >:**\WF_WCF_Samples**.</span><span class="sxs-lookup"><span data-stu-id="64597-126">Check for the following default directory: \<InstallDrive>:**\WF_WCF_Samples**.</span></span> <span data-ttu-id="64597-127">Se os exemplos foram instalados anteriormente, isso é o diretório padrão.</span><span class="sxs-lookup"><span data-stu-id="64597-127">If the samples were previously installed, this is the default directory.</span></span>  
  
7.  <span data-ttu-id="64597-128">Se os exemplos não estão instalados, instalá-los do local de download de exemplos para [Visual C#](http://go.microsoft.com/fwlink/?LinkId=190939) ou [Visual Basic](http://go.microsoft.com/fwlink/?LinkID=193373).</span><span class="sxs-lookup"><span data-stu-id="64597-128">If the samples are not installed, install them from the samples download location for [Visual C#](http://go.microsoft.com/fwlink/?LinkId=190939) or [Visual Basic](http://go.microsoft.com/fwlink/?LinkID=193373).</span></span>  
  
8.  <span data-ttu-id="64597-129">Depois de instalar os exemplos, acesse: \<Unidade_de_instalação >:**\WF_WCF_Samples\WCF\Setup\\**</span><span class="sxs-lookup"><span data-stu-id="64597-129">After installing the samples, go to : \<InstallDrive>:**\WF_WCF_Samples\WCF\Setup\\**</span></span>  
  
9. <span data-ttu-id="64597-130">Execute o **Setupvroot.bat** arquivo em lotes.</span><span class="sxs-lookup"><span data-stu-id="64597-130">Run the **Setupvroot.bat** batch file.</span></span> <span data-ttu-id="64597-131">As etapas a seguir são executadas:</span><span class="sxs-lookup"><span data-stu-id="64597-131">The following steps are performed:</span></span>  
  
    -   <span data-ttu-id="64597-132">Um diretório virtual é criado em IIS chamado ServiceModelSamples.</span><span class="sxs-lookup"><span data-stu-id="64597-132">A virtual directory is created in IIS named ServiceModelSamples.</span></span>  
  
    -   <span data-ttu-id="64597-133">Novos diretórios de disco são criados %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples nomeado e % SystemDrive%\Inetpub\wwwroot\ServiceModelSamples\bin.</span><span class="sxs-lookup"><span data-stu-id="64597-133">New disk directories are created named %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples and %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples\bin.</span></span>  
  
     <span data-ttu-id="64597-134">Se você preferir configurar essas pastas manualmente, consulte o [as instruções de configuração do diretório Virtual](../../../../docs/framework/wcf/samples/virtual-directory-setup-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="64597-134">If you prefer to set up these directories manually, see the [Virtual Directory Setup Instructions](../../../../docs/framework/wcf/samples/virtual-directory-setup-instructions.md).</span></span> <span data-ttu-id="64597-135">Para reverter todas as alterações feitas nesta etapa, execute cleanupvroot.bat depois que você terminar de usar os exemplos.</span><span class="sxs-lookup"><span data-stu-id="64597-135">To revert all changes done in this step, run cleanupvroot.bat after you finish using the samples.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="64597-136">Esse procedimento deve ser executado apenas uma vez em um computador, a menos que cleanupvroot.bat é executado.</span><span class="sxs-lookup"><span data-stu-id="64597-136">This procedure must be performed only once on a computer, unless cleanupvroot.bat is run.</span></span>  
  
10. <span data-ttu-id="64597-137">Você deve conceder permissão para modificar para %SystemDrive%\inetpub\wwwroot para a conta sob a qual você está criando os exemplos e o usuário do serviço de rede.</span><span class="sxs-lookup"><span data-stu-id="64597-137">You must grant permission to modify for %SystemDrive%\inetpub\wwwroot to the account under which you are building the samples and the Network Service user.</span></span> <span data-ttu-id="64597-138">Durante a compilação, alguns exemplos de Web hospedada podem tentar copiar os binários compilados para o local mencionado anteriormente e, se você não tiver definido as permissões apropriadas, o build será interrompido.</span><span class="sxs-lookup"><span data-stu-id="64597-138">While building, some Web-hosted samples might attempt to copy the compiled binaries to the previously mentioned location, and if you have not set the appropriate permissions, the build will break.</span></span> <span data-ttu-id="64597-139">Como alternativa, você pode deixar as permissões e executar o prompt de comando do SDK ou o Prompt de comando do Visual Studio (2012) como administrador ou compilar os exemplos [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], também execute como administrador.</span><span class="sxs-lookup"><span data-stu-id="64597-139">Alternatively, you can leave the permissions as they are and run the SDK command prompt or Visual Studio Command Prompt (2012) as Administrator, or build the samples in [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], also run as Administrator.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="64597-140">Se essa etapa não for concluída, todos os exemplos hospedados no IIS falhará durante a compilação.</span><span class="sxs-lookup"><span data-stu-id="64597-140">If this step is not completed, all IIS-hosted samples will fail while building.</span></span> <span data-ttu-id="64597-141">Certifique-se de que você defina as permissões corretamente, ou executar o prompt de comando do SDK e o Prompt de comando do Visual Studio (2012) como administrador.</span><span class="sxs-lookup"><span data-stu-id="64597-141">Ensure that you set the permissions correctly, or run both the SDK command prompt and Visual Studio Command Prompt (2012) as Administrator.</span></span>  
  
11. <span data-ttu-id="64597-142">Criar um diretório c:\Logs. no computador. Alguns exemplos podem ser esperando que ela.</span><span class="sxs-lookup"><span data-stu-id="64597-142">Create a C:\logs directory on the computer; some samples might be expecting it.</span></span> <span data-ttu-id="64597-143">Certifique-se de que a conta apropriada tem acesso de gravação concedido para esta pasta.</span><span class="sxs-lookup"><span data-stu-id="64597-143">Make sure that the appropriate account has write access granted to this folder.</span></span> <span data-ttu-id="64597-144">Para o Windows 7, [!INCLUDE[wv](../../../../includes/wv-md.md)], e o Windows Server 2008 R2, essa conta é **serviço de rede**.</span><span class="sxs-lookup"><span data-stu-id="64597-144">For Windows 7, [!INCLUDE[wv](../../../../includes/wv-md.md)], and Windows Server 2008 R2, this account is **Network Service**.</span></span> <span data-ttu-id="64597-145">Para [!INCLUDE[lserver](../../../../includes/lserver-md.md)], a conta é NT Authority\Network Service.</span><span class="sxs-lookup"><span data-stu-id="64597-145">For  [!INCLUDE[lserver](../../../../includes/lserver-md.md)], the account is NT Authority\Network Service.</span></span> <span data-ttu-id="64597-146">Para [!INCLUDE[wxp](../../../../includes/wxp-md.md)] e [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], a conta é ASPNET.</span><span class="sxs-lookup"><span data-stu-id="64597-146">For [!INCLUDE[wxp](../../../../includes/wxp-md.md)] and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], the account is ASPNET.</span></span>  
  
12. <span data-ttu-id="64597-147">Execute o arquivo Setupcerttool.bat.</span><span class="sxs-lookup"><span data-stu-id="64597-147">Run the Setupcerttool.bat file.</span></span> <span data-ttu-id="64597-148">Esse arquivo está localizado no \<InstallPath > \WF_WCF_Samples\WCF\Setup\ pasta.</span><span class="sxs-lookup"><span data-stu-id="64597-148">This file is located in the  \<InstallPath>\WF_WCF_Samples\WCF\Setup\  folder.</span></span>  <span data-ttu-id="64597-149">Esse script executará as seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="64597-149">This script will perform the following tasks:</span></span>  
  
    -   <span data-ttu-id="64597-150">A ferramenta de FindPrivateKey de compilação.</span><span class="sxs-lookup"><span data-stu-id="64597-150">Build the FindPrivateKey tool.</span></span>  
  
    -   <span data-ttu-id="64597-151">Crie um diretório chamado % ProgramFiles%\ServiceModelSampleTools.</span><span class="sxs-lookup"><span data-stu-id="64597-151">Create a directory called %ProgramFiles%\ServiceModelSampleTools.</span></span>  
  
    -   <span data-ttu-id="64597-152">Copie a nova ferramenta FindPrivateKey neste diretório.</span><span class="sxs-lookup"><span data-stu-id="64597-152">Copy the new FindPrivateKey tool to this directory.</span></span>  
  
     <span data-ttu-id="64597-153">Essa ferramenta é exigida pelo exemplos que usam certificados e são hospedados no IIS.</span><span class="sxs-lookup"><span data-stu-id="64597-153">This tool is required by samples that use certificates and are hosted in IIS.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="64597-154">Para fins de segurança, lembre-se de remover a definição de diretório virtual e as permissões concedidas nas etapas de configuração acima, executando o arquivo em lotes chamado Cleanupvroot.bat depois de concluir os exemplos.</span><span class="sxs-lookup"><span data-stu-id="64597-154">For security purposes, remember to remove the virtual directory definition and permissions granted in the setup steps above by running the batch file named Cleanupvroot.bat after you are finished with the samples.</span></span>  
  
13. <span data-ttu-id="64597-155">Exemplos que são hospedados internamente (não é hospedados no IIS) exigem a permissão para registrar os endereços HTTP no computador para escuta.</span><span class="sxs-lookup"><span data-stu-id="64597-155">Samples that are self-hosted (not hosted in IIS) require permission to register HTTP addresses on the computer for listening.</span></span> <span data-ttu-id="64597-156">A permissão para uma reserva de espaço para nome HTTP vem da conta de usuário usada para executar o exemplo.</span><span class="sxs-lookup"><span data-stu-id="64597-156">The permission for an HTTP namespace reservation comes from the user account used to run the sample.</span></span> <span data-ttu-id="64597-157">Por padrão, as contas de administrador têm permissão para registrar qualquer endereço HTTP.</span><span class="sxs-lookup"><span data-stu-id="64597-157">By default, administrator accounts have the permission to register any HTTP address.</span></span> <span data-ttu-id="64597-158">Contas de administrador não devem ter permissão para os namespaces HTTP utilizados pelos exemplos.</span><span class="sxs-lookup"><span data-stu-id="64597-158">Non-administrator accounts must be granted permission for the HTTP namespaces used by the samples.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="64597-159">como definir reservas de namespace, consulte [Configurando HTTP e HTTPS](../../../../docs/framework/wcf/feature-details/configuring-http-and-https.md).</span><span class="sxs-lookup"><span data-stu-id="64597-159"> how to configure namespace reservations, see [Configuring HTTP and HTTPS](../../../../docs/framework/wcf/feature-details/configuring-http-and-https.md).</span></span>  
  
14. <span data-ttu-id="64597-160">Alguns exemplos exigem o enfileiramento de mensagens.</span><span class="sxs-lookup"><span data-stu-id="64597-160">Some samples require Message Queuing.</span></span> <span data-ttu-id="64597-161">Consulte [instalar o enfileiramento de mensagens (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md) para instruções de instalação.</span><span class="sxs-lookup"><span data-stu-id="64597-161">See [Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md) for installation instructions.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="64597-162">Certifique-se de que você iniciar o serviço MSMQ antes de executar qualquer exemplos que exigem o enfileiramento de mensagens.</span><span class="sxs-lookup"><span data-stu-id="64597-162">Ensure that you start the MSMQ service before you run any samples that require Message Queuing.</span></span>  
  
15. <span data-ttu-id="64597-163">Alguns exemplos exigem certificados.</span><span class="sxs-lookup"><span data-stu-id="64597-163">Some samples require certificates.</span></span> <span data-ttu-id="64597-164">Consulte [serviços de informações da Internet (IIS) Server Certificate Installation Instructions](../../../../docs/framework/wcf/samples/iis-server-certificate-installation-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="64597-164">See [Internet Information Services (IIS) Server Certificate Installation Instructions](../../../../docs/framework/wcf/samples/iis-server-certificate-installation-instructions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="64597-165">Consulte também</span><span class="sxs-lookup"><span data-stu-id="64597-165">See Also</span></span>
