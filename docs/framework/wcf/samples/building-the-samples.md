---
title: Compilando os exemplos do Windows Communication Foundation
ms.date: 03/30/2017
ms.assetid: 2899e7a5-9cb2-4e8d-b8d2-f31391549198
ms.openlocfilehash: ee1c8101e31464fa203341d53137525433782c18
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96253824"
---
# <a name="building-the-windows-communication-foundation-samples"></a><span data-ttu-id="59b19-102">Compilando os exemplos do Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="59b19-102">Building the Windows Communication Foundation Samples</span></span>

<span data-ttu-id="59b19-103">Os exemplos de Windows Communication Foundation (WCF) podem ser criados usando o IDE do Visual Studio ou usando o comando **MSBuild** da linha de comando.</span><span class="sxs-lookup"><span data-stu-id="59b19-103">The Windows Communication Foundation (WCF) samples can be built using the Visual Studio IDE or using the **msbuild** command from the command line.</span></span> <span data-ttu-id="59b19-104">Os dois procedimentos são descritos neste tópico.</span><span class="sxs-lookup"><span data-stu-id="59b19-104">Both procedures are described in this topic.</span></span>

> [!NOTE]
> <span data-ttu-id="59b19-105">Antes de criar ou executar qualquer um dos exemplos do WCF, verifique se você executou o [procedimento de configuração única para os exemplos de Windows Communication Foundation](one-time-setup-procedure-for-the-wcf-samples.md).</span><span class="sxs-lookup"><span data-stu-id="59b19-105">Before building or running any of the WCF samples, ensure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](one-time-setup-procedure-for-the-wcf-samples.md).</span></span>

## <a name="to-build-the-sample-using-a-command-prompt"></a><span data-ttu-id="59b19-106">Para criar o exemplo usando um prompt de comando</span><span class="sxs-lookup"><span data-stu-id="59b19-106">To build the sample using a command prompt</span></span>

1. <span data-ttu-id="59b19-107">Abra Prompt de Comando do Desenvolvedor para o Visual Studio e navegue até o subdiretório específico do idioma sob o local do diretório onde você instalou o exemplo.</span><span class="sxs-lookup"><span data-stu-id="59b19-107">Open Developer Command Prompt for Visual Studio and navigate to the language-specific subdirectory under the directory location where you installed the sample.</span></span>

2. <span data-ttu-id="59b19-108">Digite `msbuild` na linha de comando.</span><span class="sxs-lookup"><span data-stu-id="59b19-108">Type `msbuild` at the command line.</span></span> <span data-ttu-id="59b19-109">Os arquivos de programa do cliente são criados para o *client\bin* e os arquivos de programa do serviço são criados para o *create\bin*.</span><span class="sxs-lookup"><span data-stu-id="59b19-109">The client program files are built to *client\bin* and the service program files are built to *service\bin*.</span></span> <span data-ttu-id="59b19-110">Se o serviço for hospedado pelo Serviços de Informações da Internet (IIS), os arquivos de programa do serviço também serão copiados para o diretório *servicemodelsamples* e seu subdiretório *\Bin* .</span><span class="sxs-lookup"><span data-stu-id="59b19-110">If the service is hosted by Internet Information Services (IIS), the service program files are also copied to the *servicemodelsamples* directory and its *\bin* subdirectory.</span></span>

> [!NOTE]
> <span data-ttu-id="59b19-111">Você deve definir as ACLs em *%systemdrive%\inetpub\wwwroot* para conceder permissões de modificação para a conta sob a qual você está executando.</span><span class="sxs-lookup"><span data-stu-id="59b19-111">You must set the ACLs on *%systemdrive%\inetpub\wwwroot* to grant modify permissions to the account under which you are running.</span></span> <span data-ttu-id="59b19-112">Caso contrário, ocorrerá falha em alguns eventos de Build.</span><span class="sxs-lookup"><span data-stu-id="59b19-112">Otherwise some post build events fail.</span></span> <span data-ttu-id="59b19-113">Como alternativa, você pode deixar as ACLs como estão e executar o prompt de comando do SDK como administrador.</span><span class="sxs-lookup"><span data-stu-id="59b19-113">Alternatively, you can leave the ACLs as they are and run the SDK command prompt as administrator.</span></span>

## <a name="to-build-the-sample-using-visual-studio"></a><span data-ttu-id="59b19-114">Para criar o exemplo usando Visual Studio</span><span class="sxs-lookup"><span data-stu-id="59b19-114">To build the sample using Visual Studio</span></span>

1. <span data-ttu-id="59b19-115">No menu **arquivo** do Visual Studio, selecione **abrir**  >  **projeto/solução**.</span><span class="sxs-lookup"><span data-stu-id="59b19-115">From the **File** menu in Visual Studio, select **Open** > **Project/Solution**.</span></span> <span data-ttu-id="59b19-116">Navegue até o subdiretório específico do idioma no diretório no qual você instalou o exemplo e clique duas vezes no ícone do arquivo. sln para abrir a solução no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="59b19-116">Navigate to the language-specific subdirectory under the directory in which you installed the sample, and double-click the .sln file icon to open the solution in Visual Studio.</span></span>

1. <span data-ttu-id="59b19-117">No menu **Compilar** , selecione **Recompilar solução**.</span><span class="sxs-lookup"><span data-stu-id="59b19-117">From the **Build** menu, select **Rebuild Solution**.</span></span>

   <span data-ttu-id="59b19-118">Os arquivos de programas do cliente são criados no client\bin e os arquivos de programa do serviço são criados para o service\bin.</span><span class="sxs-lookup"><span data-stu-id="59b19-118">The client program files are built to client\bin and the service program files are built to service\bin.</span></span> <span data-ttu-id="59b19-119">Se o serviço estiver hospedado no IIS, os arquivos de programa do serviço também serão copiados para o diretório *servicemodelsamples* e seu subdiretório *\Bin* .</span><span class="sxs-lookup"><span data-stu-id="59b19-119">If the service is hosted in IIS, the service program files are also copied to the *servicemodelsamples* directory and its *\bin* subdirectory.</span></span>

> [!NOTE]
> <span data-ttu-id="59b19-120">Você deve definir as ACLs em%systemdrive%\inetpub\wwwroot para conceder permissões de modificação para a conta sob a qual você está executando.</span><span class="sxs-lookup"><span data-stu-id="59b19-120">You must set the ACLs on %systemdrive%\inetpub\wwwroot to grant modify permissions to the account under which you are running.</span></span> <span data-ttu-id="59b19-121">Caso contrário, ocorrerá falha em alguns eventos de Build.</span><span class="sxs-lookup"><span data-stu-id="59b19-121">Otherwise some post build events fail.</span></span> <span data-ttu-id="59b19-122">Como alternativa, você pode deixar as ACLs como estão e executar o prompt de comando do SDK ou o Visual Studio como administrador.</span><span class="sxs-lookup"><span data-stu-id="59b19-122">Alternatively, you can leave the ACLs as they are and run the SDK command prompt or Visual Studio as administrator.</span></span> <span data-ttu-id="59b19-123">Algumas ações do Visual Studio (como anexar um depurador ao processo de trabalho do ASP.NET) também exigem privilégios administrativos.</span><span class="sxs-lookup"><span data-stu-id="59b19-123">Some Visual Studio actions (such as attaching a debugger to the ASP.NET worker process) also require administrative privileges.</span></span>

## <a name="setup-batch-files-and-scripts"></a><span data-ttu-id="59b19-124">Arquivos e scripts em lotes de instalação</span><span class="sxs-lookup"><span data-stu-id="59b19-124">Setup Batch Files and Scripts</span></span>

 <span data-ttu-id="59b19-125">Setup.exe e Cleanup.exe arquivos e scripts em lote devem ser executados do Prompt de Comando do Desenvolvedor para o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="59b19-125">Setup.exe and Cleanup.exe batch files and scripts should be run from Developer Command Prompt for Visual Studio.</span></span> <span data-ttu-id="59b19-126">Vários arquivos de configuração e limpeza executam tarefas que exigem privilégios administrativos e devem ser iniciados com privilégios de administrador.</span><span class="sxs-lookup"><span data-stu-id="59b19-126">Several set up and clean up files perform tasks that require administrative privileges and should be launched with administrator privileges.</span></span>

## <a name="important-security-information-about-metadata-endpoints"></a><span data-ttu-id="59b19-127">Informações de segurança importantes sobre os pontos de extremidade de metadados</span><span class="sxs-lookup"><span data-stu-id="59b19-127">Important Security Information about Metadata Endpoints</span></span>

 <span data-ttu-id="59b19-128">Para evitar a divulgação não intencional de metadados de serviço potencialmente confidenciais, a configuração padrão para Windows Communication Foundation (WCF) Services desabilita a publicação de metadados.</span><span class="sxs-lookup"><span data-stu-id="59b19-128">To prevent unintentional disclosure of potentially sensitive service metadata, the default configuration for Windows Communication Foundation (WCF) services disables metadata publishing.</span></span> <span data-ttu-id="59b19-129">Esse comportamento é seguro por padrão, mas também significa que você não pode usar uma ferramenta de importação de metadados (como Svcutil.exe) para gerar o código do cliente necessário para chamar o serviço, a menos que o comportamento de publicação de metadados do serviço esteja explicitamente habilitado na configuração.</span><span class="sxs-lookup"><span data-stu-id="59b19-129">This behavior is secure by default, but also means that you cannot use a metadata import tool (such as Svcutil.exe) to generate the client code required to call the service unless the service’s metadata publishing behavior is explicitly enabled in configuration.</span></span> <span data-ttu-id="59b19-130">Para facilitar a experiência com os exemplos, quase todos os exemplos expõem um ponto de extremidade de publicação de metadados não seguro.</span><span class="sxs-lookup"><span data-stu-id="59b19-130">To make experimenting with the samples easier, almost all samples expose an unsecured metadata publishing endpoint.</span></span> <span data-ttu-id="59b19-131">Esses pontos de extremidade estão potencialmente disponíveis para consumidores anônimos não autenticados e devem ser levados em vida antes da implantação desses pontos de extremidade para garantir que os metadados de um serviço sejam desmarcados publicamente.</span><span class="sxs-lookup"><span data-stu-id="59b19-131">Such endpoints are potentially available to anonymous unauthenticated consumers and care must be taken before deploying such endpoints to ensure that publicly disclosing a service’s metadata is appropriate.</span></span> <span data-ttu-id="59b19-132">Para obter mais informações sobre como publicar metadados de serviço, consulte o exemplo de [comportamento de publicação de metadados](metadata-publishing-behavior.md) .</span><span class="sxs-lookup"><span data-stu-id="59b19-132">For more information about publishing service metadata, see the [Metadata Publishing Behavior](metadata-publishing-behavior.md) sample.</span></span> <span data-ttu-id="59b19-133">Consulte o exemplo de [ponto de extremidade de metadados seguro personalizado](custom-secure-metadata-endpoint.md) para obter um exemplo de proteção de um ponto de extremidade de metadados.</span><span class="sxs-lookup"><span data-stu-id="59b19-133">See the [Custom Secure Metadata Endpoint](custom-secure-metadata-endpoint.md) sample for a sample securing a metadata endpoint.</span></span>

## <a name="exception-handling"></a><span data-ttu-id="59b19-134">Tratamento de Exceção</span><span class="sxs-lookup"><span data-stu-id="59b19-134">Exception Handling</span></span>

 <span data-ttu-id="59b19-135">Em geral, falar com esses exemplos não inclui tratamento de exceções para manter o código focado no assunto do exemplo.</span><span class="sxs-lookup"><span data-stu-id="59b19-135">Generally speaking these samples do not include exception handling to keep the code focused on the subject of the sample.</span></span> <span data-ttu-id="59b19-136">Para obter mais informações sobre manipulação de exceção, consulte o exemplo de [exceções esperadas](expected-exceptions.md) .</span><span class="sxs-lookup"><span data-stu-id="59b19-136">For more information about exception handling, see the [Expected Exceptions](expected-exceptions.md) sample.</span></span>

## <a name="regenerating-clients-and-configuration-with-svcutil"></a><span data-ttu-id="59b19-137">Regenerando clientes e configuração com svcutil</span><span class="sxs-lookup"><span data-stu-id="59b19-137">Regenerating Clients and Configuration with Svcutil</span></span>

 <span data-ttu-id="59b19-138">Você pode usar a [ferramenta de utilitário de metadados ServiceModel (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) para regenerar o código do cliente e a configuração para a maioria dos exemplos.</span><span class="sxs-lookup"><span data-stu-id="59b19-138">You can use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) to regenerate client code and configuration for most of the samples.</span></span> <span data-ttu-id="59b19-139">Alguns exemplos exigem configuração editada manualmente.</span><span class="sxs-lookup"><span data-stu-id="59b19-139">Some samples require manually edited configuration.</span></span> <span data-ttu-id="59b19-140">Por exemplo, se você usar Svcutil.exe para regenerar a configuração de um exemplo que usa credenciais de certificado de cliente, você deverá especificar manualmente as credenciais configuradas anteriormente.</span><span class="sxs-lookup"><span data-stu-id="59b19-140">For example, if you use Svcutil.exe to regenerate the configuration for a sample that uses client certificate credentials, you must manually specify the credentials previously configured.</span></span> <span data-ttu-id="59b19-141">Alguns exemplos usam opções específicas de Svcutil.exe para afetar o código gerado, essas opções são especificadas nos tópicos de exemplo específicos.</span><span class="sxs-lookup"><span data-stu-id="59b19-141">Some samples use specific Svcutil.exe options to affect the generated code, these options are specified in the specific sample topics.</span></span>

### <a name="to-regenerate-the-client-and-configuration-files"></a><span data-ttu-id="59b19-142">Para regenerar os arquivos de configuração e de cliente</span><span class="sxs-lookup"><span data-stu-id="59b19-142">To regenerate the client and configuration files</span></span>

1. <span data-ttu-id="59b19-143">Abra um prompt de comando do SDK e navegue até o subdiretório específico do idioma no local do diretório onde você instalou o exemplo.</span><span class="sxs-lookup"><span data-stu-id="59b19-143">Open an SDK command prompt and navigate to the language-specific subdirectory under the directory location where you installed the sample.</span></span>

2. <span data-ttu-id="59b19-144">Se o serviço for um tipo hospedado na Web, use o comando a seguir.</span><span class="sxs-lookup"><span data-stu-id="59b19-144">If the service is a Web-hosted type, use the following command.</span></span>

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost/servicemodelsamples/service.svc/mex /out:generatedClient.cs
    ```

     <span data-ttu-id="59b19-145">Se o serviço for um tipo auto-hospedado, digite o comando a seguir.</span><span class="sxs-lookup"><span data-stu-id="59b19-145">If the service is a self-hosted type the following command.</span></span>

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost:8000/servicemodelsamples/service.svc/mex /out:generatedClient.cs
    ```

     <span data-ttu-id="59b19-146">Substitua `http://localhost:8000/ServiceModelSamples/service.svc/mex` pelo endereço do ponto de extremidade MEX do serviço de hospedagem própria.</span><span class="sxs-lookup"><span data-stu-id="59b19-146">Replace `http://localhost:8000/ServiceModelSamples/service.svc/mex` with the address of the self-hosted service's mex endpoint.</span></span>

     <span data-ttu-id="59b19-147">Para gerar o cliente em um tipo de Visual Basic, use o comando a seguir.</span><span class="sxs-lookup"><span data-stu-id="59b19-147">To generate the client in a Visual Basic type, use the following command.</span></span>

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb
    ```

     <span data-ttu-id="59b19-148">Se o serviço for um tipo auto-hospedado, use o comando a seguir.</span><span class="sxs-lookup"><span data-stu-id="59b19-148">If the service is a self-hosted type, use the following command.</span></span>

    ```console
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost:8000/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb
    ```

    > [!NOTE]
    > <span data-ttu-id="59b19-149">Para ignorar a geração de configuração de cliente, adicione a opção **/noconfig** .</span><span class="sxs-lookup"><span data-stu-id="59b19-149">To skip the generation of client configuration add the **/noConfig** option.</span></span>

## <a name="see-also"></a><span data-ttu-id="59b19-150">Veja também</span><span class="sxs-lookup"><span data-stu-id="59b19-150">See also</span></span>

- [<span data-ttu-id="59b19-151">Executando os exemplos do Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="59b19-151">Running the Windows Communication Foundation Samples</span></span>](running-the-samples.md)
- [<span data-ttu-id="59b19-152">Ferramenta Utilitário de Metadados ServiceModel (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="59b19-152">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../servicemodel-metadata-utility-tool-svcutil-exe.md)
