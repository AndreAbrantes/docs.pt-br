---
title: Canal de reconhecimento de HTTP
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 469f3056-5ef2-4753-8acf-b574d23d83cf
caps.latest.revision: "10"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: bf8e62d99ffc0a7296d83685dfeb15993afff934
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/18/2017
---
# <a name="http-acknowledgement-channel"></a><span data-ttu-id="bb563-102">Canal de reconhecimento de HTTP</span><span class="sxs-lookup"><span data-stu-id="bb563-102">HTTP Acknowledgement Channel</span></span>
<span data-ttu-id="bb563-103">O canal de reconhecimento de HTTP é um exemplo de um canal em camadas que altera o padrão de mensagens unidirecional, permitindo que um serviço para confirmar ou recusar as mensagens de entrada em vez de enviar automaticamente uma confirmação no recebimento.</span><span class="sxs-lookup"><span data-stu-id="bb563-103">The HTTP Acknowledgement Channel is an example of a layered channel that changes the one-way messaging pattern, allowing a service to acknowledge or refuse incoming messages rather than automatically sending an acknowledgement on receipt.</span></span> <span data-ttu-id="bb563-104">O canal de reconhecimento de HTTP também permite que o serviço de confirmação de atraso até que ele pode tornar uma garantia de nível de negócios que a mensagem seja processada.</span><span class="sxs-lookup"><span data-stu-id="bb563-104">The HTTP Acknowledgement Channel also allows the service to delay acknowledgement until it can make a business-level guarantee that the message will be processed.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="bb563-105">Demonstra</span><span class="sxs-lookup"><span data-stu-id="bb563-105">Demonstrates</span></span>  
 <span data-ttu-id="bb563-106"><xref:System.ServiceModel.Channels.ReceiveContext>, O exemplo de canal em camadas (canal de reconhecimento de HTTP).</span><span class="sxs-lookup"><span data-stu-id="bb563-106"><xref:System.ServiceModel.Channels.ReceiveContext>, Layered channel example (HTTP Acknowledgement channel).</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="bb563-107">Discussão</span><span class="sxs-lookup"><span data-stu-id="bb563-107">Discussion</span></span>  
 <span data-ttu-id="bb563-108">O canal de reconhecimento de HTTP implementa <xref:System.ServiceModel.Channels.ReceiveContext> alterar o padrão de mensagens de solicitação-resposta HTTP a um padrão unidirecional com confirmação atrasada.</span><span class="sxs-lookup"><span data-stu-id="bb563-108">The HTTP Acknowledgement Channel implements <xref:System.ServiceModel.Channels.ReceiveContext> to reshape the HTTP request-reply messaging pattern to a one-way pattern with delayed acknowledgement.</span></span> <span data-ttu-id="bb563-109">Usando esse novo padrão, um serviço pode garantir processamento de mensagens ao enviar uma confirmação na forma de um código de status HTTP Okey de 200 sem bloquear o cliente até que o processamento de mensagem concluído, ou pode enviar uma mensagem de falha para o cliente na forma de um HTTP Interno Server status código de erro 500.</span><span class="sxs-lookup"><span data-stu-id="bb563-109">Using this new pattern, a service can ensure message processing by sending an acknowledgement in the form of an HTTP OK status code of 200 without blocking the client until message processing completes or can send a failure message to the client in the form of an HTTP Internal Server error status code of 500.</span></span> <span data-ttu-id="bb563-110">Por exemplo, um serviço pode enviar uma confirmação depois de gravar uma mensagem para uma fila e, em seguida, continuar a processar a mensagem de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="bb563-110">For example, a service could send an acknowledgement after writing a message to a queue, and then continue processing the message asynchronously.</span></span> <span data-ttu-id="bb563-111">Nesse cenário, um cliente pode ter certeza de que suas mensagens foram processadas pelo menos uma vez pelo serviço, se ele enviado novamente cada mensagem até que ele recebeu uma confirmação do serviço.</span><span class="sxs-lookup"><span data-stu-id="bb563-111">In this scenario, a client could be assured its messages were processed at least once by the service, if it re-sent each message until it received an acknowledgement from the service.</span></span> <span data-ttu-id="bb563-112">Observe que, se um serviço requer processamento via HTTP sem qualquer garantia, de processamento de mensagem de mensagens assíncrona rápido o <xref:System.ServiceModel.Channels.OneWayBindingElement> é uma opção mais apropriada.</span><span class="sxs-lookup"><span data-stu-id="bb563-112">Note that, if a service requires fast asynchronous message processing over HTTP without any message processing guarantees, then the <xref:System.ServiceModel.Channels.OneWayBindingElement> is a more appropriate choice.</span></span>  
  
 <span data-ttu-id="bb563-113"><xref:System.ServiceModel.Channels.ReceiveContext>é usado para manter a mensagem em vigor enquanto isso será determinado se a mensagem pode ser processada no serviço.</span><span class="sxs-lookup"><span data-stu-id="bb563-113"><xref:System.ServiceModel.Channels.ReceiveContext> is used to hold the message in place while it is determined whether the message can be processed at the service.</span></span> <span data-ttu-id="bb563-114">A capacidade de processar a mensagem de um serviço é indicada por chamar Complete o <xref:System.ServiceModel.Channels.ReceiveContext> objeto que envia um código de status HTTP Okey e se o serviço pode processar a mensagem é indicado chamando <xref:System.ServiceModel.Channels.ReceiveContext>do `Abandon` método de <xref:System.ServiceModel.Channels.ReceiveContext> objeto, que envia um código de status de erro interno do servidor HTTP.</span><span class="sxs-lookup"><span data-stu-id="bb563-114">The ability of a service to successfully process the message is indicated by calling Complete on the <xref:System.ServiceModel.Channels.ReceiveContext> object that sends an HTTP OK status code and whether the service can process the message is indicated by calling <xref:System.ServiceModel.Channels.ReceiveContext>’s `Abandon` method on the <xref:System.ServiceModel.Channels.ReceiveContext> object, which sends an HTTP Internal Server error status code.</span></span>  
  
 <span data-ttu-id="bb563-115">Neste exemplo, o cliente solicita informações de processamento, enviando um ID de funcionário.</span><span class="sxs-lookup"><span data-stu-id="bb563-115">In this example, the client requests processing information by sending an employee ID.</span></span> <span data-ttu-id="bb563-116">No lado do serviço, se a ID de funcionário recebida é maior que 50, o serviço envia um código de HTTP Status 500 (erro interno do servidor) para o cliente, caso contrário, presume-se que o processamento pode ser feito com êxito e envia um código de HTTP Status de (200 Êxito) para o cliente.</span><span class="sxs-lookup"><span data-stu-id="bb563-116">On the service end, if the employee ID received is greater than 50, the service sends an HTTP Status code of 500 (Internal Server Error) back to the client, otherwise it is assumed that the processing can be successfully done and sends an HTTP Status code of 200 (Successful) to the client.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="bb563-117">Para configurar, compilar, e executar o exemplo</span><span class="sxs-lookup"><span data-stu-id="bb563-117">To set up, build, and run the sample</span></span>  
  
1.  <span data-ttu-id="bb563-118">Abra [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] com privilégios de administrador.</span><span class="sxs-lookup"><span data-stu-id="bb563-118">Open [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] with Administrator privileges.</span></span>  
  
2.  <span data-ttu-id="bb563-119">Abra o **HttpAckChannel** solução.</span><span class="sxs-lookup"><span data-stu-id="bb563-119">Open the **HttpAckChannel** solution.</span></span>  
  
3.  <span data-ttu-id="bb563-120">Iniciar uma nova instância do **Service** projeto com um clique direito no projeto no **Solution Explorer**e selecionando **depurar**, **iniciar nova instância** no menu de contexto.</span><span class="sxs-lookup"><span data-stu-id="bb563-120">Start a new instance of the **Service** project by right clicking the project in **Solution Explorer**, and selecting **Debug**, **Start new instance** from the context menu.</span></span>  
  
4.  <span data-ttu-id="bb563-121">Iniciar uma nova instância do **cliente** projeto com um clique direito no projeto no **Solution Explorer**e selecionando **depurar**, e **iniciar nova instância** no menu de contexto.</span><span class="sxs-lookup"><span data-stu-id="bb563-121">Start a new instance of the **Client** project by right clicking the project in **Solution Explorer**, and selecting **Debug**, and **Start new instance** from the context menu.</span></span>  
  
5.  <span data-ttu-id="bb563-122">Depois que o serviço foi iniciado, pressione ENTER na janela do cliente para permitir que o cliente enviar uma mensagem para o serviço.</span><span class="sxs-lookup"><span data-stu-id="bb563-122">Once the service has started, press ENTER in the client window to let the client send a message to the service.</span></span>  
  
6.  <span data-ttu-id="bb563-123">A primeira mensagem é processada no serviço e envia um código de status HTTP Okey volta ao cliente.</span><span class="sxs-lookup"><span data-stu-id="bb563-123">The first message is processed on the service, and it sends an HTTP OK status code back to the client.</span></span>  
  
7.  <span data-ttu-id="bb563-124">A segunda mensagem não for bem-sucedida e envia um código de status de erro de servidor interno HTTP para o cliente, que gera um <xref:System.ServiceModel.CommunicationException> no cliente.</span><span class="sxs-lookup"><span data-stu-id="bb563-124">The second message is unsuccessful, and it sends an HTTP Internal Server error status code back to the client, which raises a <xref:System.ServiceModel.CommunicationException> on the client.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="bb563-125">Os exemplos podem já estar instalados no seu computador.</span><span class="sxs-lookup"><span data-stu-id="bb563-125">The samples may already be installed on your machine.</span></span> <span data-ttu-id="bb563-126">Verifique o seguinte diretório (padrão) antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="bb563-126">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="bb563-127">Se este diretório não existir, vá para [Windows Communication Foundation (WCF) e exemplos do Windows Workflow Foundation (WF) para o .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) para baixar todos os [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] e [!INCLUDE[wf1](../../../../includes/wf1-md.md)] exemplos.</span><span class="sxs-lookup"><span data-stu-id="bb563-127">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="bb563-128">Este exemplo está localizado no seguinte diretório.</span><span class="sxs-lookup"><span data-stu-id="bb563-128">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Extensibility\Channels\HttpAckChannel`
