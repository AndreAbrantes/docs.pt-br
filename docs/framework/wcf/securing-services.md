---
title: Serviços de segurança
ms.date: 03/30/2017
helpviewer_keywords:
- configuration [WCF], securing services
- WCF security
- WCF, security
ms.assetid: f0ecc6f7-f4b5-42a4-9cb1-b02e28e26620
ms.openlocfilehash: c4ac823b5419d845437ef8e89f5123adafda0c5a
ms.sourcegitcommit: c4e9d05644c9cb89de5ce6002723de107ea2e2c4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/19/2019
ms.locfileid: "65881358"
---
# <a name="securing-services"></a><span data-ttu-id="4c8c0-102">Serviços de segurança</span><span class="sxs-lookup"><span data-stu-id="4c8c0-102">Securing Services</span></span>
<span data-ttu-id="4c8c0-103">Segurança de um serviço do Windows Communication Foundation (WCF) consiste em dois requisitos principais: segurança e autorização de transferência.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-103">Security of a Windows Communication Foundation (WCF) service consists of two primary requirements: transfer security and authorization.</span></span> <span data-ttu-id="4c8c0-104">(Um terceiro requisito, a auditoria de eventos de segurança, é descrito em [auditoria](../../../docs/framework/wcf/feature-details/auditing-security-events.md).) Em suma, a segurança de transferência inclui autenticação (verificar a identidade do serviço e o cliente), confidencialidade (criptografia de mensagens) e integridade (para detectar violação de assinatura digital).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-104">(A third requirement, auditing of security events, is described in [Auditing](../../../docs/framework/wcf/feature-details/auditing-security-events.md).) In brief, transfer security includes authentication (verifying the identity of both the service and the client), confidentiality (message encryption), and integrity (digital signing to detect tampering).</span></span> <span data-ttu-id="4c8c0-105">A autorização é o controle de acesso a recursos, por exemplo, permitindo que apenas usuários com privilégios ler um arquivo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-105">Authorization is the control of access to resources, for example, allowing only privileged users to read a file.</span></span> <span data-ttu-id="4c8c0-106">Usando recursos do WCF, os dois requisitos principais são implementados com facilidade.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-106">Using features of WCF, the two primary requirements are easily implemented.</span></span>  
  
 <span data-ttu-id="4c8c0-107">Com exceção do <xref:System.ServiceModel.BasicHttpBinding> classe (ou o [ \<basicHttpBinding >](../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) elemento na configuração), segurança de transferência está habilitada por padrão para todas as associações predefinidas.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-107">With the exception of the <xref:System.ServiceModel.BasicHttpBinding> class (or the [\<basicHttpBinding>](../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) element in configuration), transfer security is enabled by default for all of the predefined bindings.</span></span> <span data-ttu-id="4c8c0-108">Os tópicos nesta seção abordam os dois cenários básicos: Implementando a segurança de transferência e autorização em um serviço de intranet hospedado no Internet Information Services (IIS) e implementar a segurança de transferência e a autorização em um serviço hospedado no IIS.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-108">The topics in this section cover two basic scenarios: implementing transfer security and authorization on an intranet service hosted on Internet Information Services (IIS), and implementing transfer security and authorization on a service hosted on IIS.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4c8c0-109">Windows XP Home não dá suporte a autenticação do Windows.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-109">Windows XP Home does not support Windows authentication.</span></span> <span data-ttu-id="4c8c0-110">Portanto, você não deve executar um serviço no sistema.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-110">Therefore, you should not run a service on that system.</span></span>  
  
## <a name="security-basics"></a><span data-ttu-id="4c8c0-111">Noções básicas sobre segurança</span><span class="sxs-lookup"><span data-stu-id="4c8c0-111">Security Basics</span></span>  
 <span data-ttu-id="4c8c0-112">A segurança depende *credenciais*.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-112">Security relies on *credentials*.</span></span> <span data-ttu-id="4c8c0-113">Uma credencial de prova que uma entidade é quem diz ser.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-113">A credential proves that an entity is who it claims to be.</span></span> <span data-ttu-id="4c8c0-114">(Um *entidade* pode ser uma pessoa, um processo de software, uma empresa ou qualquer coisa que pode ser autorizado.) Por exemplo, um cliente de um serviço faz uma *declaração* dos *identidade*, e a credencial prova dessa declaração de alguma maneira.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-114">(An *entity* can be a person, a software process, a company, or anything that can be authorized.) For example, a client of a service makes a *claim* of *identity*, and the credential proves that claim in some manner.</span></span> <span data-ttu-id="4c8c0-115">Um cenário típico, ocorre uma troca de credenciais.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-115">In a typical scenario, an exchange of credentials occurs.</span></span> <span data-ttu-id="4c8c0-116">Primeiro, um serviço faz uma declaração de sua identidade e comprove sua identidade para o cliente com uma credencial.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-116">First, a service makes a claim of its identity and proves it to the client with a credential.</span></span> <span data-ttu-id="4c8c0-117">Por outro lado, o cliente faz uma declaração de identidade e apresenta uma credencial para o serviço.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-117">Conversely, the client makes a claim of identity and presents a credential to the service.</span></span> <span data-ttu-id="4c8c0-118">Se ambas as partes do outro as credenciais de confiança, em seguida, um *contexto seguro* podem ser estabelecidos no quais todas as mensagens são trocadas de confidencialidade, e todas as mensagens são assinadas para proteger sua integridade.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-118">If both parties trust the other's credentials, then a *secure context* can be established in which all messages are exchanged in confidentiality, and all messages are signed to protect their integrity.</span></span> <span data-ttu-id="4c8c0-119">Depois que o serviço estabelece a identidade do cliente, ele pode corresponder, em seguida, as declarações na credencial para um *função* ou *associação* em um grupo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-119">After the service establishes the client's identity, it can then match the claims in the credential to a *role* or *membership* in a group.</span></span> <span data-ttu-id="4c8c0-120">Em ambos os casos, usando a função ou o grupo ao qual o cliente pertence, o serviço *autoriza* o cliente a executar um conjunto limitado de operações com base nos privilégios de função ou grupo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-120">In either case, using the role or the group to which the client belongs, the service *authorizes* the client to perform a limited set of operations based on the role or group privileges.</span></span>  
  
## <a name="windows-security-mechanisms"></a><span data-ttu-id="4c8c0-121">Mecanismos de segurança do Windows</span><span class="sxs-lookup"><span data-stu-id="4c8c0-121">Windows Security Mechanisms</span></span>  
 <span data-ttu-id="4c8c0-122">Se o cliente e o computador de serviço estão em um domínio do Windows que requer dois para fazer logon rede, as credenciais são fornecidas pela infraestrutura do Windows.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-122">If the client and the service computer are both on a Windows domain that requires both to log on to the network, the credentials are provided by Windows infrastructure.</span></span> <span data-ttu-id="4c8c0-123">Nesse caso, as credenciais são estabelecidas quando um usuário fizer logon rede.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-123">In that case, the credentials are established when a computer user logs on to the network.</span></span> <span data-ttu-id="4c8c0-124">Todos os usuários e todos os computadores na rede devem ser validadas como pertencentes ao conjunto confiável de usuários e computadores.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-124">Every user and every computer on the network must be validated as belonging to the trusted set of users and computers.</span></span> <span data-ttu-id="4c8c0-125">Em um sistema Windows, o usuário existe e o computador também é conhecido como um *entidade de segurança*.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-125">On a Windows system, every such user and computer is also known as a *security principal*.</span></span>  
  
 <span data-ttu-id="4c8c0-126">Em um domínio do Windows apoiado por um *Kerberos* controlador, o controlador de Kerberos usa um esquema com base na concessão de tíquetes para cada entidade de segurança.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-126">On a Windows domain backed by a *Kerberos* controller, the Kerberos controller uses a scheme based on granting tickets to each security principal.</span></span> <span data-ttu-id="4c8c0-127">Os tíquetes as concessões de controlador são confiáveis por outros granters tíquete no sistema.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-127">The tickets the controller grants are trusted by other ticket granters in the system.</span></span> <span data-ttu-id="4c8c0-128">Sempre que uma entidade tenta realizar alguma operação ou acesso uma *recurso* (por exemplo, um arquivo ou diretório em um computador), o tíquete é examinado quanto a sua validade e, se ele for aprovado, a entidade de segurança é concedida a outro tíquete para a operação.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-128">Whenever an entity tries to perform some operation or access a *resource* (such as a file or directory on a machine), the ticket is examined for its validity and, if it passes, the principal is granted another ticket for the operation.</span></span> <span data-ttu-id="4c8c0-129">Esse método de concessão de tíquetes é mais eficiente do que a alternativa de tentar validar a entidade de segurança para cada operação.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-129">This method of granting tickets is more efficient than the alternative of trying to validate the principal for every operation.</span></span>  
  
 <span data-ttu-id="4c8c0-130">Um mecanismo mais antigo e menos seguras usado nos domínios do Windows é NT LAN Manager (NTLM).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-130">An older, less-secure mechanism used on Windows domains is NT LAN Manager (NTLM).</span></span> <span data-ttu-id="4c8c0-131">Em casos em que o Kerberos não pode ser usado (normalmente fora de um domínio do Windows, como em um grupo de trabalho), o NTLM pode ser usado como uma alternativa.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-131">In cases where Kerberos cannot be used (typically outside of a Windows domain, such as in a workgroup), NTLM can be used as an alternative.</span></span> <span data-ttu-id="4c8c0-132">NTLM também está disponível como uma opção de segurança para o IIS.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-132">NTLM is also available as a security option for IIS.</span></span>  
  
 <span data-ttu-id="4c8c0-133">Em um sistema Windows, a autorização funciona por meio da atribuição de cada computador e usuário para um conjunto de funções e grupos.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-133">On a Windows system, authorization works by assigning each computer and user to a set of roles and groups.</span></span> <span data-ttu-id="4c8c0-134">Por exemplo, todos os computadores Windows devem configurar e controlado por uma pessoa (ou grupo de pessoas) na função do *administrador*.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-134">For example, every Windows computer must be set up and controlled by a person (or group of people) in the role of the *administrator*.</span></span> <span data-ttu-id="4c8c0-135">Outra função é que o *usuário*, que tem um conjunto muito mais restrito de permissões.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-135">Another role is that of the *user*, which has a much more constrained set of permissions.</span></span> <span data-ttu-id="4c8c0-136">Além da função, os usuários são atribuídos a grupos.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-136">In addition to the role, users are assigned to groups.</span></span> <span data-ttu-id="4c8c0-137">Um grupo permite que vários usuários executar na mesma função.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-137">A group allows multiple users to perform in the same role.</span></span> <span data-ttu-id="4c8c0-138">Na prática, portanto, uma máquina Windows é administrada, atribuindo usuários a grupos.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-138">In practice, therefore, a Windows machine is administered by assigning users to groups.</span></span> <span data-ttu-id="4c8c0-139">Por exemplo, vários usuários podem ser atribuídos ao grupo de usuários de um computador e um conjunto muito mais restrito de usuários pode ser atribuído ao grupo de administradores.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-139">For example, several users can be assigned to the group of users of a computer, and a much more constrained set of users can be assigned to the group of administrators.</span></span> <span data-ttu-id="4c8c0-140">Em um computador local, um administrador também pode criar novos grupos e atribuir outros usuários (ou até mesmo outros grupos) ao grupo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-140">On a local machine, an administrator can also create new groups and assign other users (or even other groups) to the group.</span></span>  
  
 <span data-ttu-id="4c8c0-141">Em um computador executando o Windows, todas as pastas em um diretório podem ser protegida.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-141">On a computer running Windows, every folder in a directory can be protected.</span></span> <span data-ttu-id="4c8c0-142">Ou seja, você pode selecionar uma pasta e controlar quem pode acessar os arquivos, e se ou não pode copiar o arquivo ou (no caso mais privilegiado) alterar um arquivo, excluir um arquivo ou adicionar arquivos à pasta.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-142">That is, you can select a folder and control who can access the files, and whether or not they can copy the file, or (in the most privileged case) change a file, delete a file, or add files to the folder.</span></span> <span data-ttu-id="4c8c0-143">Isso é conhecido como controle de acesso e o mecanismo para que ele é conhecido como a lista de controle de acesso (ACL).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-143">This is known as access control, and the mechanism for it is known as the access control list (ACL).</span></span> <span data-ttu-id="4c8c0-144">Ao criar o ACL, você pode atribuir privilégios de acesso a qualquer grupo ou grupos, bem como os membros individuais de um domínio.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-144">When creating the ACL, you can assign access privileges to any group or groups, as well as individual members of a domain.</span></span>  
  
 <span data-ttu-id="4c8c0-145">A infraestrutura do WCF foi projetada para usar esses mecanismos de segurança do Windows.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-145">The WCF infrastructure is designed to use these Windows security mechanisms.</span></span> <span data-ttu-id="4c8c0-146">Portanto, se você estiver criando um serviço que é implantado em uma intranet, e cujos clientes são restringidos aos membros do domínio do Windows, a segurança é facilmente implementada.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-146">Therefore, if you are creating a service that is deployed on an intranet, and whose clients are restricted to members of the Windows domain, security is easily implemented.</span></span> <span data-ttu-id="4c8c0-147">Somente os usuários válidos podem fazer logon no domínio.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-147">Only valid users can log on to the domain.</span></span> <span data-ttu-id="4c8c0-148">Depois que os usuários fazem logon, o controlador de Kerberos permite que cada usuário estabelecer contextos seguros com qualquer outro computador ou aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-148">After users are logged on, the Kerberos controller enables each user to establish secure contexts with any other computer or application.</span></span> <span data-ttu-id="4c8c0-149">Em um computador local, grupos podem ser criados com facilidade e, ao proteger pastas específicas, esses grupos podem ser usados para atribuir privilégios de acesso no computador.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-149">On a local machine, groups can be easily created, and when protecting specific folders, those groups can be used to assign access privileges on the computer.</span></span>  
  
## <a name="implementing-windows-security-on-intranet-services"></a><span data-ttu-id="4c8c0-150">Implementar a segurança do Windows nos serviços da Intranet</span><span class="sxs-lookup"><span data-stu-id="4c8c0-150">Implementing Windows Security on Intranet Services</span></span>  
 <span data-ttu-id="4c8c0-151">Para proteger um aplicativo executado exclusivamente em um domínio do Windows, você pode usar as configurações de segurança padrão de qualquer um de <xref:System.ServiceModel.WSHttpBinding> ou o <xref:System.ServiceModel.NetTcpBinding> associação.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-151">To secure an application that runs exclusively on a Windows domain, you can use the default security settings of either the <xref:System.ServiceModel.WSHttpBinding> or the <xref:System.ServiceModel.NetTcpBinding> binding.</span></span> <span data-ttu-id="4c8c0-152">Por padrão, qualquer pessoa no mesmo domínio do Windows pode acessar os serviços WCF.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-152">By default, anyone on the same Windows domain can access WCF services.</span></span> <span data-ttu-id="4c8c0-153">Como esses usuários fazer logon na rede, eles são confiáveis.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-153">Because those users have logged on to the network, they are trusted.</span></span> <span data-ttu-id="4c8c0-154">As mensagens entre um serviço e um cliente são criptografadas para confidencialidade e integridade se inscreveu.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-154">The messages between a service and a client are encrypted for confidentiality and signed for integrity.</span></span> <span data-ttu-id="4c8c0-155">Para obter mais informações sobre como criar um serviço que usa a segurança do Windows, consulte [como: Proteger um serviço com credenciais do Windows](../../../docs/framework/wcf/how-to-secure-a-service-with-windows-credentials.md).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-155">For more information about how to create a service that uses Windows security, see [How to: Secure a Service with Windows Credentials](../../../docs/framework/wcf/how-to-secure-a-service-with-windows-credentials.md).</span></span>  
  
### <a name="authorization-using-the-principalpermissionattribute-class"></a><span data-ttu-id="4c8c0-156">Autorização usando a classe PrincipalPermissionAttribute</span><span class="sxs-lookup"><span data-stu-id="4c8c0-156">Authorization Using the PrincipalPermissionAttribute Class</span></span>  
 <span data-ttu-id="4c8c0-157">Se for necessário restringir o acesso de recursos em um computador, a maneira mais fácil é usar o <xref:System.Security.Permissions.PrincipalPermissionAttribute> classe.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-157">If you need to restrict the access of resources on a computer, the easiest way is to use the <xref:System.Security.Permissions.PrincipalPermissionAttribute> class.</span></span> <span data-ttu-id="4c8c0-158">Este atributo permite restringir a invocação de operações de serviço, exigindo que o usuário estar em um grupo do Windows especificado ou função, ou se um usuário específico.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-158">This attribute enables you to restrict the invocation of service operations by demanding that the user be in a specified Windows group or role, or to be a specific user.</span></span> <span data-ttu-id="4c8c0-159">Para obter mais informações, confira [Como: Restringir o acesso com a classe PrincipalPermissionAttribute](../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-159">For more information, see [How to: Restrict Access with the PrincipalPermissionAttribute Class](../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md).</span></span>  
  
### <a name="impersonation"></a><span data-ttu-id="4c8c0-160">Representação</span><span class="sxs-lookup"><span data-stu-id="4c8c0-160">Impersonation</span></span>  
 <span data-ttu-id="4c8c0-161">A representação é outro mecanismo que você pode usar para controlar o acesso aos recursos.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-161">Impersonation is another mechanism that you can use to control access to resources.</span></span> <span data-ttu-id="4c8c0-162">Por padrão, um serviço hospedado pelo IIS será executado sob a identidade da conta ASPNET.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-162">By default, a service hosted by IIS will run under the identity of the ASPNET account.</span></span> <span data-ttu-id="4c8c0-163">A conta ASPNET pode acessar somente os recursos para os quais ele tem permissão.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-163">The ASPNET account can access only the resources for which it has permission.</span></span> <span data-ttu-id="4c8c0-164">No entanto, é possível definir a ACL para uma pasta para excluir a conta de serviço do ASPNET, mas permitir que determinados outras identidades acessar a pasta.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-164">However, it is possible to set the ACL for a folder to exclude the ASPNET service account, but allow certain other identities to access the folder.</span></span> <span data-ttu-id="4c8c0-165">A pergunta, em seguida, torna-se como permitir que os usuários acessar a pasta se a conta ASPNET não tem permissão para fazer isso.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-165">The question then becomes how to allow those users to access the folder if the ASPNET account is not allowed to do so.</span></span> <span data-ttu-id="4c8c0-166">A resposta é usar a representação, na qual o serviço pode usar as credenciais do cliente para acessar um recurso específico.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-166">The answer is to use impersonation, whereby the service is allowed to use the credentials of the client to access a particular resource.</span></span> <span data-ttu-id="4c8c0-167">Outro exemplo é ao acessar um banco de dados do SQL Server para que somente determinados usuários tem permissão.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-167">Another example is when accessing a SQL Server database to which only certain users have permission.</span></span> <span data-ttu-id="4c8c0-168">Para obter mais informações sobre como usar a representação, consulte [como: Representar um cliente em um serviço](../../../docs/framework/wcf/how-to-impersonate-a-client-on-a-service.md) e [delegação e representação](../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-168">For more information about using impersonation, see [How to: Impersonate a Client on a Service](../../../docs/framework/wcf/how-to-impersonate-a-client-on-a-service.md) and [Delegation and Impersonation](../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="security-on-the-internet"></a><span data-ttu-id="4c8c0-169">Segurança na Internet</span><span class="sxs-lookup"><span data-stu-id="4c8c0-169">Security on the Internet</span></span>  
 <span data-ttu-id="4c8c0-170">Segurança na Internet consiste nos mesmos requisitos de segurança em uma intranet.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-170">Security on the Internet consists of the same requirements as security on an intranet.</span></span> <span data-ttu-id="4c8c0-171">Um serviço precisa apresentar suas credenciais para provar sua autenticidade e os clientes precisam provar sua identidade para o serviço.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-171">A service needs to present its credentials to prove its authenticity, and clients need to prove their identity to the service.</span></span> <span data-ttu-id="4c8c0-172">Depois que a identidade de um cliente está comprovada, o serviço pode controlar quanto o cliente tem a recursos de acesso.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-172">Once a client's identity is proven, the service can control how much access the client has to resources.</span></span> <span data-ttu-id="4c8c0-173">No entanto, devido à natureza heterogênea da Internet, as credenciais apresentadas são diferentes daqueles usados em um domínio do Windows.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-173">However, due to the heterogeneous nature of the Internet, the credentials presented differ from those used on a Windows domain.</span></span> <span data-ttu-id="4c8c0-174">Enquanto que um controlador de Kerberos lida com a autenticação de usuários em um domínio com permissões para as credenciais, na Internet, serviços e clientes contam com qualquer uma das várias maneiras diferentes para apresentar as credenciais.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-174">Whereas a Kerberos controller handles the authentication of users on a domain with tickets for credentials, on the Internet, services and clients rely on any one of several different ways to present credentials.</span></span> <span data-ttu-id="4c8c0-175">No entanto, o objetivo deste tópico é apresentar uma abordagem comum que permite que você crie um serviço WCF que está acessível na Internet.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-175">The objective of this topic, however, is to present a common approach that enables you to create a WCF service that is accessible on the Internet.</span></span>  
  
### <a name="using-iis-and-aspnet"></a><span data-ttu-id="4c8c0-176">Usando o IIS e ASP.NET</span><span class="sxs-lookup"><span data-stu-id="4c8c0-176">Using IIS and ASP.NET</span></span>  
 <span data-ttu-id="4c8c0-177">Os requisitos de segurança de Internet e os mecanismos para resolver esses problemas, não são novidade.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-177">The requirements of Internet security, and the mechanisms to solve those problems, are not new.</span></span> <span data-ttu-id="4c8c0-178">O IIS é o servidor da Web da Microsoft para a Internet e tem muitos recursos de segurança que resolvem esses problemas; Além disso, o ASP.NET inclui recursos de segurança que os serviços WCF podem usar.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-178">IIS is Microsoft's Web server for the Internet and has many security features that address those problems; in addition, ASP.NET includes security features that WCF services can use.</span></span> <span data-ttu-id="4c8c0-179">Para tirar proveito desses recursos de segurança, hospede um serviço WCF no IIS.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-179">To take advantage of these security features, host an WCF service on IIS.</span></span>  
  
#### <a name="using-aspnet-membership-and-role-providers"></a><span data-ttu-id="4c8c0-180">Usando provedores de função e associação do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="4c8c0-180">Using ASP.NET Membership and Role Providers</span></span>  
 <span data-ttu-id="4c8c0-181">O ASP.NET inclui um provedor de associação e funções.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-181">ASP.NET includes a membership and role provider.</span></span> <span data-ttu-id="4c8c0-182">O provedor é um banco de dados de pares de nome/senha de usuário para autenticar chamadores que também permite que você especifique os privilégios de acesso do cada chamador.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-182">The provider is a database of user name/password pairs for authenticating callers that also allows you to specify each caller's access privileges.</span></span> <span data-ttu-id="4c8c0-183">Com o WCF, você pode usar facilmente uma associação já existente e o provedor de função por meio da configuração.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-183">With WCF, you can easily use a pre-existing membership and role provider through configuration.</span></span> <span data-ttu-id="4c8c0-184">Para um aplicativo de exemplo que demonstra isso, consulte a [provedor de função e associação](../../../docs/framework/wcf/samples/membership-and-role-provider.md) exemplo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-184">For a sample application that demonstrates this, see the [Membership and Role Provider](../../../docs/framework/wcf/samples/membership-and-role-provider.md) sample.</span></span>  
  
### <a name="credentials-used-by-iis"></a><span data-ttu-id="4c8c0-185">Credenciais usadas pelo IIS</span><span class="sxs-lookup"><span data-stu-id="4c8c0-185">Credentials Used by IIS</span></span>  
 <span data-ttu-id="4c8c0-186">Ao contrário de um domínio do Windows apoiado por um controlador de Kerberos, a Internet é um ambiente sem um único controlador para gerenciar os milhões de usuários que fizerem logon qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-186">Unlike a Windows domain backed by a Kerberos controller, the Internet is an environment without a single controller to manage the millions of users logging on at any time.</span></span> <span data-ttu-id="4c8c0-187">Em vez disso, as credenciais na Internet são geralmente na forma de certificados x. 509 (também conhecidos como certificados SSL, ou Secure Sockets Layer).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-187">Instead, credentials on the Internet most often are in the form of X.509 certificates (also known as Secure Sockets Layer, or SSL, certificates).</span></span> <span data-ttu-id="4c8c0-188">Normalmente, esses certificados são emitidos por uma *autoridade de certificação*, que pode ser uma empresa de terceiros que atesta a autenticidade do certificado e a pessoa que ele tiver sido emitida para.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-188">These certificates are typically issued by a *certification authority*, which can be a third-party company that vouches for the authenticity of the certificate and the person it has been issued to.</span></span> <span data-ttu-id="4c8c0-189">Para expor seu serviço na Internet, você também deve fornecer um certificado confiável para autenticar seu serviço.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-189">To expose your service on the Internet, you must also supply such a trusted certificate to authenticate your service.</span></span>  
  
 <span data-ttu-id="4c8c0-190">Surge a questão: neste ponto, como você obtém esse certificado?</span><span class="sxs-lookup"><span data-stu-id="4c8c0-190">The question arises at this point, how do you get such a certificate?</span></span> <span data-ttu-id="4c8c0-191">Uma abordagem é ir para uma autoridade de certificação de terceiros, como VeriSign, ou de Authenticode quando estiver pronto para implantar seu serviço e comprar um certificado para seu serviço.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-191">One approach is to go to a third-party certification authority, such as Authenticode or VeriSign, when you are ready to deploy your service, and purchase a certificate for your service.</span></span> <span data-ttu-id="4c8c0-192">No entanto, se você estiver na fase de desenvolvimento com o WCF e ainda não está pronto para confirmar a compra de um certificado, ferramentas e técnicas existem para a criação de certificados X.509 que você pode usar para simular uma implantação de produção.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-192">However, if you are in the development phase with WCF and not yet ready to commit to purchasing a certificate, tools and techniques exist for creating X.509 certificates that you can use to simulate a production deployment.</span></span> <span data-ttu-id="4c8c0-193">Para obter mais informações, consulte [trabalhando com certificados](../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-193">For more information, see [Working with Certificates](../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span></span>  
  
## <a name="security-modes"></a><span data-ttu-id="4c8c0-194">Modos de segurança</span><span class="sxs-lookup"><span data-stu-id="4c8c0-194">Security Modes</span></span>  
 <span data-ttu-id="4c8c0-195">Programação de segurança do WCF envolve alguns pontos de decisão críticos.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-195">Programming WCF security entails a few critical decision points.</span></span> <span data-ttu-id="4c8c0-196">Um dos mais básica é a escolha da *modo de segurança*.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-196">One of the most basic is the choice of *security mode*.</span></span> <span data-ttu-id="4c8c0-197">Os dois modos de segurança principais são *modo de transporte* e *modo de mensagem*.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-197">The two major security modes are *transport mode* and *message mode*.</span></span>  
  
 <span data-ttu-id="4c8c0-198">Um modo de terceiro, que combina a semântica de ambos os modos principais, está *transporte com modo de credenciais de mensagem*.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-198">A third mode, which combines the semantics of both major modes, is *transport with message credentials mode*.</span></span>  
  
 <span data-ttu-id="4c8c0-199">O modo de segurança determina como as mensagens são protegidas, e cada opção tem vantagens e desvantagens, conforme explicado abaixo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-199">The security mode determines how messages are secured, and each choice has advantages and disadvantages, as explained below.</span></span> <span data-ttu-id="4c8c0-200">Para obter mais informações sobre como definir o modo de segurança, consulte [como: Definir o modo de segurança](../../../docs/framework/wcf/how-to-set-the-security-mode.md).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-200">For more information about setting the security mode, see [How to: Set the Security Mode](../../../docs/framework/wcf/how-to-set-the-security-mode.md).</span></span>  
  
#### <a name="transport-mode"></a><span data-ttu-id="4c8c0-201">Modo de transporte</span><span class="sxs-lookup"><span data-stu-id="4c8c0-201">Transport Mode</span></span>  
 <span data-ttu-id="4c8c0-202">Há várias camadas entre a rede e o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-202">There are several layers between the network and the application.</span></span> <span data-ttu-id="4c8c0-203">Um deles é o *transporte* camada *,* que gerencia a transferência de mensagens entre pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-203">One of these is the *transport* layer *,* which manages the transfer of messages between endpoints.</span></span> <span data-ttu-id="4c8c0-204">Para a finalidade de presente, ele só é necessário que você entenda que o WCF usa vários protocolos de transporte, cada um deles pode proteger a transferência de mensagens.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-204">For the present purpose, it is only required that you understand that WCF uses several transport protocols, each of which can secure the transfer of messages.</span></span> <span data-ttu-id="4c8c0-205">(Para obter mais informações sobre os transportes, consulte [transportes](../../../docs/framework/wcf/feature-details/transports.md).)</span><span class="sxs-lookup"><span data-stu-id="4c8c0-205">(For more information about transports, see [Transports](../../../docs/framework/wcf/feature-details/transports.md).)</span></span>  
  
 <span data-ttu-id="4c8c0-206">Um protocolo comumente usado é HTTP; outra é TCP.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-206">A commonly used protocol is HTTP; another is TCP.</span></span> <span data-ttu-id="4c8c0-207">Cada um desses protocolos pode proteger específica de transferência por um mecanismo (ou mecanismos) da mensagem para o protocolo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-207">Each of these protocols can secure message transfer by a mechanism (or mechanisms) particular to the protocol.</span></span> <span data-ttu-id="4c8c0-208">Por exemplo, o protocolo HTTP é protegido usando SSL sobre HTTP, frequentemente abreviado como "HTTPS".</span><span class="sxs-lookup"><span data-stu-id="4c8c0-208">For example, the HTTP protocol is secured using SSL over HTTP, commonly abbreviated as "HTTPS."</span></span> <span data-ttu-id="4c8c0-209">Assim, quando você seleciona o modo de transporte para segurança, você está escolhendo usar o mecanismo, conforme determinado pelo protocolo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-209">Thus, when you select the transport mode for security, you are choosing to use the mechanism as dictated by the protocol.</span></span> <span data-ttu-id="4c8c0-210">Por exemplo, se você selecionar o <xref:System.ServiceModel.WSHttpBinding> de classe e definir seu modo de segurança de transporte, você está selecionando SSL sobre HTTP (HTTPS) como mecanismo de segurança.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-210">For example, if you select the <xref:System.ServiceModel.WSHttpBinding> class and set its security mode to Transport, you are selecting SSL over HTTP (HTTPS) as the security mechanism.</span></span> <span data-ttu-id="4c8c0-211">A vantagem do modo de transporte é que ele é mais eficiente do que o modo de mensagem porque a segurança é integrada em um nível relativamente baixo.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-211">The advantage of the transport mode is that it is more efficient than message mode because security is integrated at a comparatively low level.</span></span> <span data-ttu-id="4c8c0-212">Ao usar o modo de transporte, o mecanismo de segurança deve ser implementado de acordo com a especificação para o transporte e, portanto, as mensagens podem fluir com segurança apenas de ponto a ponto por meio do transporte.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-212">When using transport mode, the security mechanism must be implemented according to the specification for the transport, and thus messages can flow securely only from point-to-point over the transport.</span></span>  
  
#### <a name="message-mode"></a><span data-ttu-id="4c8c0-213">Modo de mensagem</span><span class="sxs-lookup"><span data-stu-id="4c8c0-213">Message Mode</span></span>  
 <span data-ttu-id="4c8c0-214">Em contraste, o modo de mensagem fornece segurança, incluindo os dados de segurança como parte de cada mensagem.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-214">In contrast, message mode provides security by including the security data as part of every message.</span></span> <span data-ttu-id="4c8c0-215">Usando XML e cabeçalhos de segurança SOAP, as credenciais e outros dados necessários para garantir que a integridade e a confidencialidade da mensagem são incluídos com todas as mensagens.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-215">Using XML and SOAP security headers, the credentials and other data needed to ensure the integrity and confidentiality of the message are included with every message.</span></span> <span data-ttu-id="4c8c0-216">Cada mensagem inclui dados de segurança, portanto, ele resulta em um pedágio sobre o desempenho porque cada mensagem deve ser processada individualmente.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-216">Every message includes security data, so it results in a toll on performance because each message must be individually processed.</span></span> <span data-ttu-id="4c8c0-217">(No modo de transporte, depois que a camada de transporte é protegida, todas as mensagens de fluam livremente.) No entanto, a segurança de mensagem tem uma vantagem em relação a segurança de transporte: é mais flexível.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-217">(In transport mode, once the transport layer is secured, all messages flow freely.) However, message security has one advantage over transport security: it is more flexible.</span></span> <span data-ttu-id="4c8c0-218">Ou seja, os requisitos de segurança não são determinados pelo transporte.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-218">That is, the security requirements are not determined by the transport.</span></span> <span data-ttu-id="4c8c0-219">Você pode usar qualquer tipo de credencial de cliente para proteger a mensagem.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-219">You can use any type of client credential to secure the message.</span></span> <span data-ttu-id="4c8c0-220">(No modo de transporte, o protocolo de transporte determina o tipo de credencial de cliente que você pode usar).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-220">(In transport mode, the transport protocol determines the type of client credential that you can use.)</span></span>  
  
#### <a name="transport-with-message-credentials"></a><span data-ttu-id="4c8c0-221">Transporte com as credenciais de mensagem</span><span class="sxs-lookup"><span data-stu-id="4c8c0-221">Transport with Message Credentials</span></span>  
 <span data-ttu-id="4c8c0-222">O terceiro modo combina o melhor de segurança de transporte e de mensagem.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-222">The third mode combines the best of both transport and message security.</span></span> <span data-ttu-id="4c8c0-223">Nesse modo, a segurança de transporte é usada com eficiência, garantir a confidencialidade e integridade de cada mensagem.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-223">In this mode, transport security is used to efficiently ensure the confidentiality and integrity of every message.</span></span> <span data-ttu-id="4c8c0-224">Ao mesmo tempo, cada mensagem inclui seus dados de credencial, o que permite que a mensagem a ser autenticada.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-224">At the same time, every message includes its credential data, which allows the message to be authenticated.</span></span> <span data-ttu-id="4c8c0-225">Com a autenticação, autorização também pode ser implementada.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-225">With authentication, authorization can also be implemented.</span></span> <span data-ttu-id="4c8c0-226">Autenticando um remetente, acesso a recursos pode ser concedido (ou negado) de acordo com a identidade do remetente.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-226">By authenticating a sender, access to resources can be granted (or denied) according to the sender's identity.</span></span>  
  
## <a name="specifying-the-client-credential-type-and-credential-value"></a><span data-ttu-id="4c8c0-227">Especificando o tipo de credencial de cliente e o valor de credencial</span><span class="sxs-lookup"><span data-stu-id="4c8c0-227">Specifying the Client Credential Type and Credential Value</span></span>  
 <span data-ttu-id="4c8c0-228">Depois de selecionar um modo de segurança, você talvez queira especificar um tipo de credencial de cliente.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-228">After you have selected a security mode, you may also want to specify a client credential type.</span></span> <span data-ttu-id="4c8c0-229">O tipo de credencial de cliente especifica o tipo de um cliente deve usar para se autenticar no servidor.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-229">The client credential type specifies what type a client must use to authenticate itself to the server.</span></span>  
  
 <span data-ttu-id="4c8c0-230">Nem todos os cenários exigem um tipo de credencial de cliente, no entanto.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-230">Not all scenarios require a client credential type, however.</span></span> <span data-ttu-id="4c8c0-231">Usando SSL sobre HTTP (HTTPS), um serviço se autentica o cliente.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-231">Using SSL over HTTP (HTTPS), a service authenticates itself to the client.</span></span> <span data-ttu-id="4c8c0-232">Como parte desta autenticação, o certificado do serviço é enviado ao cliente em um processo chamado *negociação*.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-232">As part of this authentication, the service's certificate is sent to the client in a process called *negotiation*.</span></span> <span data-ttu-id="4c8c0-233">O transporte protegido por SSL garante que todas as mensagens são confidenciais.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-233">The SSL-secured transport ensures that all messages are confidential.</span></span>  
  
 <span data-ttu-id="4c8c0-234">Se você estiver criando um serviço que exige que o cliente seja autenticado, sua escolha de um tipo de credencial de cliente depende o transporte e o modo selecionado.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-234">If you are creating a service that requires that the client be authenticated, your choice of a client credential type depends on the transport and mode selected.</span></span> <span data-ttu-id="4c8c0-235">Por exemplo, usando o transporte HTTP e escolhendo o modo de transporte fornece várias opções, como Basic, Digest e outros.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-235">For example, using the HTTP transport and choosing transport mode gives you several choices, such as Basic, Digest, and others.</span></span> <span data-ttu-id="4c8c0-236">(Para obter mais informações sobre esses tipos de credenciais, consulte [Noções básicas sobre a autenticação HTTP](../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).)</span><span class="sxs-lookup"><span data-stu-id="4c8c0-236">(For more information about these credential types, see [Understanding HTTP Authentication](../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).)</span></span>  
  
 <span data-ttu-id="4c8c0-237">Se você estiver criando um serviço em um domínio do Windows que estará disponível somente para outros usuários da rede, mais fáceis de usar é o tipo de credencial de cliente do Windows.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-237">If you are creating a service on a Windows domain that will be available only to other users of the network, the easiest to use is the Windows client credential type.</span></span> <span data-ttu-id="4c8c0-238">No entanto, você também precisará fornecer um serviço com um certificado.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-238">However, you may also need to provide a service with a certificate.</span></span> <span data-ttu-id="4c8c0-239">Isso é mostrado no [como: Especificar valores de credenciais de cliente](../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-239">This is shown in [How to: Specify Client Credential Values](../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span></span>  
  
#### <a name="credential-values"></a><span data-ttu-id="4c8c0-240">Valores de credenciais</span><span class="sxs-lookup"><span data-stu-id="4c8c0-240">Credential Values</span></span>  
 <span data-ttu-id="4c8c0-241">Um *valor de credencial* é o serviço usa o valor real de credencial.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-241">A *credential value* is the actual credential the service uses.</span></span> <span data-ttu-id="4c8c0-242">Depois que você tiver especificado um tipo de credencial, você também precisará configurar seu serviço com as credenciais reais.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-242">Once you have specified a credential type, you may also need to configure your service with the actual credentials.</span></span> <span data-ttu-id="4c8c0-243">Se você selecionou Windows (e o serviço será executado em um domínio do Windows), em seguida, você não especificar um valor de credencial real.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-243">If you have selected Windows (and the service will run on a Windows domain), then you do not specify an actual credential value.</span></span>  
  
## <a name="identity"></a><span data-ttu-id="4c8c0-244">Identidade</span><span class="sxs-lookup"><span data-stu-id="4c8c0-244">Identity</span></span>  
 <span data-ttu-id="4c8c0-245">No WCF, o termo *identidade* tem significados diferentes para o servidor e o cliente.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-245">In WCF, the term *identity* has different meanings to the server and the client.</span></span> <span data-ttu-id="4c8c0-246">Em suma, ao executar um serviço, uma identidade é atribuída ao contexto de segurança após a autenticação.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-246">In brief, when running a service, an identity is assigned to the security context after authentication.</span></span> <span data-ttu-id="4c8c0-247">Para exibir a identidade real, verifique as <xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A> e <xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A> propriedades do <xref:System.ServiceModel.ServiceSecurityContext> classe.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-247">To view the actual identity, check the <xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A> and <xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A> properties of the <xref:System.ServiceModel.ServiceSecurityContext> class.</span></span> <span data-ttu-id="4c8c0-248">Para obter mais informações, confira [Como: Examine o contexto de segurança](../../../docs/framework/wcf/how-to-examine-the-security-context.md).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-248">For more information, see [How to: Examine the Security Context](../../../docs/framework/wcf/how-to-examine-the-security-context.md).</span></span>  
  
 <span data-ttu-id="4c8c0-249">Em contraste, no cliente, a identidade é usada para validar o serviço.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-249">In contrast, on the client, identity is used to validate the service.</span></span> <span data-ttu-id="4c8c0-250">Em tempo de design, um desenvolvedor cliente pode definir as [ \<identidade >](../../../docs/framework/configure-apps/file-schema/wcf/identity.md) elemento para um valor obtido do serviço.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-250">At design time, a client developer can set the [\<identity>](../../../docs/framework/configure-apps/file-schema/wcf/identity.md) element to a value obtained from the service.</span></span> <span data-ttu-id="4c8c0-251">Em tempo de execução, o cliente verifica o valor do elemento em relação a identidade real do serviço.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-251">At run time, the client checks the value of the element against the actual identity of the service.</span></span> <span data-ttu-id="4c8c0-252">Se a verificação falhar, o cliente encerra a comunicação.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-252">If the check fails, the client terminates the communication.</span></span> <span data-ttu-id="4c8c0-253">O valor pode ser um nome de usuário principal (UPN) se o serviço é executado sob a identidade de um usuário específico ou um nome de entidade de serviço (SPN) se o serviço é executado sob uma conta de computador.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-253">The value can be a user principal name (UPN) if the service runs under a particular user's identity or a service principal name (SPN) if the service runs under a machine account.</span></span> <span data-ttu-id="4c8c0-254">Para obter mais informações, consulte [identidade de serviço e autenticação](../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-254">For more information, see [Service Identity and Authentication](../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span> <span data-ttu-id="4c8c0-255">A credencial também pode ser um certificado ou um campo localizado em um certificado que identifica o certificado.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-255">The credential could also be a certificate, or a field found on a certificate that identifies the certificate.</span></span>  
  
## <a name="protection-levels"></a><span data-ttu-id="4c8c0-256">Níveis de proteção</span><span class="sxs-lookup"><span data-stu-id="4c8c0-256">Protection Levels</span></span>  
 <span data-ttu-id="4c8c0-257">O `ProtectionLevel` propriedade ocorre em várias classes de atributo (como o <xref:System.ServiceModel.ServiceContractAttribute> e o <xref:System.ServiceModel.OperationContractAttribute> classes).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-257">The `ProtectionLevel` property occurs on several attribute classes (such as the <xref:System.ServiceModel.ServiceContractAttribute> and the <xref:System.ServiceModel.OperationContractAttribute> classes).</span></span> <span data-ttu-id="4c8c0-258">O nível de proteção é um valor que especifica se as mensagens (ou partes da mensagem) que dão suporte a um serviço estiver conectado, assinado e criptografado ou enviados sem criptografia ou assinaturas.</span><span class="sxs-lookup"><span data-stu-id="4c8c0-258">The protection level is a value that specifies whether the messages (or message parts) that support a service are signed, signed and encrypted, or sent without signatures or encryption.</span></span> <span data-ttu-id="4c8c0-259">Para obter mais informações sobre a propriedade, consulte [Noções básicas sobre nível de proteção](../../../docs/framework/wcf/understanding-protection-level.md)e para exemplos de programação, consulte [como: Defina a propriedade ProtectionLevel](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-259">For more information about the property, see [Understanding Protection Level](../../../docs/framework/wcf/understanding-protection-level.md), and for programming examples, see [How to: Set the ProtectionLevel Property](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span></span> <span data-ttu-id="4c8c0-260">Para obter mais informações sobre como projetar um contrato de serviço com o `ProtectionLevel` no contexto, consulte [Criando contratos de serviço](../../../docs/framework/wcf/designing-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="4c8c0-260">For more information about designing a service contract with the `ProtectionLevel` in context, see [Designing Service Contracts](../../../docs/framework/wcf/designing-service-contracts.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4c8c0-261">Consulte também</span><span class="sxs-lookup"><span data-stu-id="4c8c0-261">See also</span></span>

- <xref:System.ServiceModel>
- <xref:System.ServiceModel.Description.ServiceCredentials>
- <xref:System.ServiceModel.ServiceContractAttribute>
- <xref:System.ServiceModel.OperationContractAttribute>
- [<span data-ttu-id="4c8c0-262">Autenticação e identidade de serviço</span><span class="sxs-lookup"><span data-stu-id="4c8c0-262">Service Identity and Authentication</span></span>](../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md)
- [<span data-ttu-id="4c8c0-263">Noções básicas de nível de proteção</span><span class="sxs-lookup"><span data-stu-id="4c8c0-263">Understanding Protection Level</span></span>](../../../docs/framework/wcf/understanding-protection-level.md)
- [<span data-ttu-id="4c8c0-264">Delegação e representação</span><span class="sxs-lookup"><span data-stu-id="4c8c0-264">Delegation and Impersonation</span></span>](../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)
- [<span data-ttu-id="4c8c0-265">Criando contratos de serviço</span><span class="sxs-lookup"><span data-stu-id="4c8c0-265">Designing Service Contracts</span></span>](../../../docs/framework/wcf/designing-service-contracts.md)
- [<span data-ttu-id="4c8c0-266">Segurança</span><span class="sxs-lookup"><span data-stu-id="4c8c0-266">Security</span></span>](../../../docs/framework/wcf/feature-details/security.md)
- [<span data-ttu-id="4c8c0-267">Visão geral de segurança</span><span class="sxs-lookup"><span data-stu-id="4c8c0-267">Security Overview</span></span>](../../../docs/framework/wcf/feature-details/security-overview.md)
- [<span data-ttu-id="4c8c0-268">Como: Defina a propriedade ProtectionLevel</span><span class="sxs-lookup"><span data-stu-id="4c8c0-268">How to: Set the ProtectionLevel Property</span></span>](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md)
- [<span data-ttu-id="4c8c0-269">Como: Proteger um serviço com credenciais do Windows</span><span class="sxs-lookup"><span data-stu-id="4c8c0-269">How to: Secure a Service with Windows Credentials</span></span>](../../../docs/framework/wcf/how-to-secure-a-service-with-windows-credentials.md)
- [<span data-ttu-id="4c8c0-270">Como: Definir o modo de segurança</span><span class="sxs-lookup"><span data-stu-id="4c8c0-270">How to: Set the Security Mode</span></span>](../../../docs/framework/wcf/how-to-set-the-security-mode.md)
- [<span data-ttu-id="4c8c0-271">Como: Especificar o tipo de credencial de cliente</span><span class="sxs-lookup"><span data-stu-id="4c8c0-271">How to: Specify the Client Credential Type</span></span>](../../../docs/framework/wcf/how-to-specify-the-client-credential-type.md)
- [<span data-ttu-id="4c8c0-272">Como: Restringir o acesso com a PrincipalPermissionAttribute Class</span><span class="sxs-lookup"><span data-stu-id="4c8c0-272">How to: Restrict Access with the PrincipalPermissionAttribute Class</span></span>](../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md)
- [<span data-ttu-id="4c8c0-273">Como: Representar um cliente em um serviço</span><span class="sxs-lookup"><span data-stu-id="4c8c0-273">How to: Impersonate a Client on a Service</span></span>](../../../docs/framework/wcf/how-to-impersonate-a-client-on-a-service.md)
- [<span data-ttu-id="4c8c0-274">Como: Examine o contexto de segurança</span><span class="sxs-lookup"><span data-stu-id="4c8c0-274">How to: Examine the Security Context</span></span>](../../../docs/framework/wcf/how-to-examine-the-security-context.md)
