---
title: Criando contratos de serviço
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- service contracts [WCF]
ms.assetid: 8e89cbb9-ac84-4f0d-85ef-0eb6be0022fd
caps.latest.revision: 34
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 14973d3612eb5739e0dfcd7b50409904ab5d6844
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/30/2018
---
# <a name="designing-service-contracts"></a><span data-ttu-id="0e5a0-102">Criando contratos de serviço</span><span class="sxs-lookup"><span data-stu-id="0e5a0-102">Designing Service Contracts</span></span>
<span data-ttu-id="0e5a0-103">Este tópico descreve qual serviço os contratos são, como elas são definidas, as operações que estão disponíveis (e as implicações para as trocas de mensagens subjacente), quais tipos de dados são usados e outros problemas que ajudarão a criar operações que atendem a requisitos do seu cenário.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-103">This topic describes what service contracts are, how they are defined, what operations are available (and the implications for the underlying message exchanges), what data types are used, and other issues that help you design operations that satisfy the requirements of your scenario.</span></span>  
  
## <a name="creating-a-service-contract"></a><span data-ttu-id="0e5a0-104">Criar um contrato de serviço</span><span class="sxs-lookup"><span data-stu-id="0e5a0-104">Creating a Service Contract</span></span>  
 <span data-ttu-id="0e5a0-105">Serviços de expõem um número de operações.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-105">Services expose a number of operations.</span></span> <span data-ttu-id="0e5a0-106">Em [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] aplicativos, define as operações de criação de um método e marcá-lo com o <xref:System.ServiceModel.OperationContractAttribute> atributo.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-106">In [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] applications, define the operations by creating a method and marking it with the <xref:System.ServiceModel.OperationContractAttribute> attribute.</span></span> <span data-ttu-id="0e5a0-107">Em seguida, para criar um contrato de serviço, agrupar suas operações, por declará-los dentro de uma interface marcada com o <xref:System.ServiceModel.ServiceContractAttribute> de atributo ou pelo definindo-os em uma classe marcada com o mesmo atributo.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-107">Then, to create a service contract, group together your operations, either by declaring them within an interface marked with the <xref:System.ServiceModel.ServiceContractAttribute> attribute, or by defining them in a class marked with the same attribute.</span></span> <span data-ttu-id="0e5a0-108">(Para obter um exemplo básico, consulte [como: definir um contrato de serviço](../../../docs/framework/wcf/how-to-define-a-wcf-service-contract.md).)</span><span class="sxs-lookup"><span data-stu-id="0e5a0-108">(For a basic example, see [How to: Define a Service Contract](../../../docs/framework/wcf/how-to-define-a-wcf-service-contract.md).)</span></span>  
  
 <span data-ttu-id="0e5a0-109">Todos os métodos que não têm um <xref:System.ServiceModel.OperationContractAttribute> atributo não são operações de serviço e não são expostos por [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] serviços.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-109">Any methods that do not have a <xref:System.ServiceModel.OperationContractAttribute> attribute are not service operations and are not exposed by [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] services.</span></span>  
  
 <span data-ttu-id="0e5a0-110">Este tópico descreve os seguintes pontos de decisão ao projetar um contrato de serviço:</span><span class="sxs-lookup"><span data-stu-id="0e5a0-110">This topic describes the following decision points when designing a service contract:</span></span>  
  
-   <span data-ttu-id="0e5a0-111">Se deseja usar interfaces ou classes.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-111">Whether to use classes or interfaces.</span></span>  
  
-   <span data-ttu-id="0e5a0-112">Como especificar os tipos de dados que você deseja que o exchange.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-112">How to specify the data types you want to exchange.</span></span>  
  
-   <span data-ttu-id="0e5a0-113">Os tipos de padrões de troca, que você pode usar.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-113">The types of exchange patterns you can use.</span></span>  
  
-   <span data-ttu-id="0e5a0-114">Se você pode fazer parte de requisitos de segurança explícita do contrato.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-114">Whether you can make explicit security requirements part of the contract.</span></span>  
  
-   <span data-ttu-id="0e5a0-115">As restrições para operação entradas e saídas.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-115">The restrictions for operation inputs and outputs.</span></span>  
  
## <a name="classes-or-interfaces"></a><span data-ttu-id="0e5a0-116">Interfaces ou classes</span><span class="sxs-lookup"><span data-stu-id="0e5a0-116">Classes or Interfaces</span></span>  
 <span data-ttu-id="0e5a0-117">Classes e interfaces representam um agrupamento de funcionalidade e, portanto, ambos podem ser usados para definir um [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-117">Both classes and interfaces represent a grouping of functionality and, therefore, both can be used to define a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service contract.</span></span> <span data-ttu-id="0e5a0-118">No entanto, é recomendável que você use interfaces porque eles diretamente modelo contratos de serviço.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-118">However, it is recommended that you use interfaces because they directly model service contracts.</span></span> <span data-ttu-id="0e5a0-119">Sem uma implementação interfaces não mais do que definem um agrupamento de métodos com determinadas assinaturas.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-119">Without an implementation, interfaces do no more than define a grouping of methods with certain signatures.</span></span> <span data-ttu-id="0e5a0-120">Implementar uma interface de contrato de serviço e você tiver implementado um [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] serviço.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-120">Implement a service contract interface and you have implemented a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service.</span></span>  
  
 <span data-ttu-id="0e5a0-121">Todos os benefícios de interfaces gerenciadas se aplicam a interfaces de contrato de serviço:</span><span class="sxs-lookup"><span data-stu-id="0e5a0-121">All the benefits of managed interfaces apply to service contract interfaces:</span></span>  
  
-   <span data-ttu-id="0e5a0-122">Interfaces de contrato de serviço podem estender qualquer número de outras interfaces de contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-122">Service contract interfaces can extend any number of other service contract interfaces.</span></span>  
  
-   <span data-ttu-id="0e5a0-123">Uma única classe pode implementar qualquer número de contratos de serviço com a implementação dessas interfaces de contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-123">A single class can implement any number of service contracts by implementing those service contract interfaces.</span></span>  
  
-   <span data-ttu-id="0e5a0-124">Você pode modificar a implementação de um contrato de serviço, alterando a implementação da interface, enquanto o contrato de serviço permanece o mesmo.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-124">You can modify the implementation of a service contract by changing the interface implementation, while the service contract remains the same.</span></span>  
  
-   <span data-ttu-id="0e5a0-125">Você pode versão seu serviço implementando a interface antiga e nova.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-125">You can version your service by implementing the old interface and the new one.</span></span> <span data-ttu-id="0e5a0-126">Clientes antigos se conectar à versão original, enquanto os clientes mais recentes podem conectar-se para a versão mais recente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-126">Old clients connect to the original version, while newer clients can connect to the newer version.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0e5a0-127">Ao herdar de outras interfaces de contrato de serviço, você não pode substituir as propriedades de operação, como o nome ou namespace.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-127">When inheriting from other service contract interfaces, you cannot override operation properties, such as the name or namespace.</span></span> <span data-ttu-id="0e5a0-128">Se você tentar fazer isso, você cria uma nova operação no contrato de serviço atual.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-128">If you attempt to do so, you create a new operation in the current service contract.</span></span>  
  
 <span data-ttu-id="0e5a0-129">Para obter um exemplo do uso de uma interface para criar um contrato de serviço, consulte [como: criar um serviço com uma Interface de contrato](../../../docs/framework/wcf/feature-details/how-to-create-a-service-with-a-contract-interface.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-129">For an example of using an interface to create a service contract, see [How to: Create a Service with a Contract Interface](../../../docs/framework/wcf/feature-details/how-to-create-a-service-with-a-contract-interface.md).</span></span>  
  
 <span data-ttu-id="0e5a0-130">No entanto, você pode usar uma classe para definir um contrato de serviço e implementar o contrato ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-130">You can, however, use a class to define a service contract and implement that contract at the same time.</span></span> <span data-ttu-id="0e5a0-131">A vantagem de criar seus serviços aplicando <xref:System.ServiceModel.ServiceContractAttribute> e <xref:System.ServiceModel.OperationContractAttribute> diretamente para a classe e os métodos na classe, respectivamente, é velocidade e simplicidade.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-131">The advantage of creating your services by applying <xref:System.ServiceModel.ServiceContractAttribute> and <xref:System.ServiceModel.OperationContractAttribute> directly to the class and the methods on the class, respectively, is speed and simplicity.</span></span> <span data-ttu-id="0e5a0-132">As desvantagens são que classes gerenciadas não oferecem suporte a várias heranças, e assim eles somente podem implementar um contrato de serviço por vez.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-132">The disadvantages are that managed classes do not support multiple inheritance, and as a result they can only implement one service contract at a time.</span></span> <span data-ttu-id="0e5a0-133">Além disso, qualquer modificação para as assinaturas de método ou classe modifica o contrato público para esse serviço, o que pode impedir que clientes sem modificações usando seu serviço.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-133">In addition, any modification to the class or method signatures modifies the public contract for that service, which can prevent unmodified clients from using your service.</span></span> <span data-ttu-id="0e5a0-134">Para obter mais informações, consulte [implementando contratos de serviço](../../../docs/framework/wcf/implementing-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-134">For more information, see [Implementing Service Contracts](../../../docs/framework/wcf/implementing-service-contracts.md).</span></span>  
  
 <span data-ttu-id="0e5a0-135">Para obter um exemplo que usa uma classe para criar um contrato de serviço e implementa ao mesmo tempo, consulte [como: criar um serviço com uma classe de contrato](../../../docs/framework/wcf/feature-details/how-to-create-a-wcf-contract-with-a-class.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-135">For an example that uses a class to create a service contract and implements it at the same time, see [How to: Create a Service with a Contract Class](../../../docs/framework/wcf/feature-details/how-to-create-a-wcf-contract-with-a-class.md).</span></span>  
  
 <span data-ttu-id="0e5a0-136">Neste ponto, você deve compreender a diferença entre a definição de seu contrato de serviço usando uma interface e usando uma classe.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-136">At this point, you should understand the difference between defining your service contract by using an interface and by using a class.</span></span> <span data-ttu-id="0e5a0-137">A próxima etapa é decidir quais dados podem ser passados bidirecionalmente entre um serviço e seus clientes.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-137">The next step is deciding what data can be passed back and forth between a service and its clients.</span></span>  
  
## <a name="parameters-and-return-values"></a><span data-ttu-id="0e5a0-138">Parâmetros e valores de retorno</span><span class="sxs-lookup"><span data-stu-id="0e5a0-138">Parameters and Return Values</span></span>  
 <span data-ttu-id="0e5a0-139">Cada operação tem um valor de retorno e um parâmetro, mesmo se eles forem `void`.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-139">Each operation has a return value and a parameter, even if these are `void`.</span></span> <span data-ttu-id="0e5a0-140">No entanto, ao contrário de um método de local, no qual você pode passar as referências a objetos de um objeto para outro, operações de serviço não passa as referências a objetos.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-140">However, unlike a local method, in which you can pass references to objects from one object to another, service operations do not pass references to objects.</span></span> <span data-ttu-id="0e5a0-141">Em vez disso, eles passam cópias dos objetos.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-141">Instead, they pass copies of the objects.</span></span>  
  
 <span data-ttu-id="0e5a0-142">Isso é significativo porque cada tipo usado em um parâmetro ou retornar o valor deve ser serializável; ou seja, deve ser possível converter um objeto do tipo em um fluxo de bytes em um fluxo de bytes em um objeto.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-142">This is significant because each type used in a parameter or return value must be serializable; that is, it must be possible to convert an object of that type into a stream of bytes and from a stream of bytes into an object.</span></span>  
  
 <span data-ttu-id="0e5a0-143">Tipos primitivos são serializáveis por padrão, assim como muitos tipos do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-143">Primitive types are serializable by default, as are many types in the .NET Framework.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0e5a0-144">O valor dos nomes de parâmetro na assinatura de operação são parte do contrato e diferenciam maiusculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-144">The value of the parameter names in the operation signature are part of the contract and are case sensitive.</span></span> <span data-ttu-id="0e5a0-145">Se você quiser usar o mesmo nome de parâmetro localmente mas modificar o nome nos metadados publicados, consulte o <xref:System.ServiceModel.MessageParameterAttribute?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-145">If you want to use the same parameter name locally but modify the name in the published metadata, see the <xref:System.ServiceModel.MessageParameterAttribute?displayProperty=nameWithType>.</span></span>  
  
#### <a name="data-contracts"></a><span data-ttu-id="0e5a0-146">Contratos de dados</span><span class="sxs-lookup"><span data-stu-id="0e5a0-146">Data Contracts</span></span>  
 <span data-ttu-id="0e5a0-147">Aplicativos orientados a serviços como [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] aplicativos são criados para interoperar com o maior número possível de aplicativos de cliente no Microsoft e plataformas da Microsoft não.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-147">Service-oriented applications like [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] applications are designed to interoperate with the widest possible number of client applications on both Microsoft and non-Microsoft platforms.</span></span> <span data-ttu-id="0e5a0-148">Para a mais ampla interoperabilidade possível, é recomendável que você marca seus tipos com o <xref:System.Runtime.Serialization.DataContractAttribute> e <xref:System.Runtime.Serialization.DataMemberAttribute> atributos para criar um contrato de dados, que é a parte do contrato de serviço que descreve os dados que suas operações de serviço Exchange.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-148">For the widest possible interoperability, it is recommended that you mark your types with the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes to create a data contract, which is the portion of the service contract that describes the data that your service operations exchange.</span></span>  
  
 <span data-ttu-id="0e5a0-149">Contratos de dados são contratos de estilo de aceitar: nenhum tipo ou membro de dados é serializado, a menos que você explicitamente aplique o atributo de contrato de dados.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-149">Data contracts are opt-in style contracts: No type or data member is serialized unless you explicitly apply the data contract attribute.</span></span> <span data-ttu-id="0e5a0-150">Contratos de dados não estão relacionados ao escopo de acesso do código gerenciado: membros de dados particular podem ser serializados e enviados em qualquer lugar para ser acessados publicamente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-150">Data contracts are unrelated to the access scope of the managed code: Private data members can be serialized and sent elsewhere to be accessed publicly.</span></span> <span data-ttu-id="0e5a0-151">(Para obter um exemplo básico de um contrato de dados, consulte [como: criar um contrato de dados básico para uma classe ou estrutura](../../../docs/framework/wcf/feature-details/how-to-create-a-basic-data-contract-for-a-class-or-structure.md).) [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] lida com a definição das mensagens SOAP subjacentes que habilitar a funcionalidade da operação, bem como a serialização dos seus tipos de dados dentro e fora do corpo das mensagens.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-151">(For a basic example of a data contract, see [How to: Create a Basic Data Contract for a Class or Structure](../../../docs/framework/wcf/feature-details/how-to-create-a-basic-data-contract-for-a-class-or-structure.md).) [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] handles the definition of the underlying SOAP messages that enable the operation's functionality as well as the serialization of your data types into and out of the body of the messages.</span></span> <span data-ttu-id="0e5a0-152">Como seus tipos de dados são serializáveis, você não precisa pensar sobre a infraestrutura de troca de mensagem subjacente ao projetar suas operações.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-152">As long as your data types are serializable, you do not need to think about the underlying message exchange infrastructure when designing your operations.</span></span>  
  
 <span data-ttu-id="0e5a0-153">Embora o típico [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplicativo usa o <xref:System.Runtime.Serialization.DataContractAttribute> e <xref:System.Runtime.Serialization.DataMemberAttribute> atributos para criar contratos de dados para operações, você pode usar outros mecanismos de serialização.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-153">Although the typical [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] application uses the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes to create data contracts for operations, you can use other serialization mechanisms.</span></span> <span data-ttu-id="0e5a0-154">O padrão <xref:System.Runtime.Serialization.ISerializable>, <xref:System.SerializableAttribute> e <xref:System.Xml.Serialization.IXmlSerializable> todos os mecanismos de trabalham para lidar com a serialização dos seus tipos de dados para as mensagens SOAP subjacentes que executá-las a partir de um aplicativo para outro.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-154">The standard <xref:System.Runtime.Serialization.ISerializable>, <xref:System.SerializableAttribute> and <xref:System.Xml.Serialization.IXmlSerializable> mechanisms all work to handle the serialization of your data types into the underlying SOAP messages that carry them from one application to another.</span></span> <span data-ttu-id="0e5a0-155">Se os tipos de dados requerem suporte especial, você pode usar mais estratégias de serialização.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-155">You can employ more serialization strategies if your data types require special support.</span></span> <span data-ttu-id="0e5a0-156">Para obter mais informações sobre as opções para a serialização de tipos de dados em [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplicativos, consulte [especificando a transferência de dados em contratos de serviço](../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-156">For more information about the choices for serialization of data types in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] applications, see [Specifying Data Transfer in Service Contracts](../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md).</span></span>  
  
#### <a name="mapping-parameters-and-return-values-to-message-exchanges"></a><span data-ttu-id="0e5a0-157">Mapeando parâmetros e valores de retorno para as trocas de mensagens</span><span class="sxs-lookup"><span data-stu-id="0e5a0-157">Mapping Parameters and Return Values to Message Exchanges</span></span>  
 <span data-ttu-id="0e5a0-158">Operações de serviço são suportadas por uma troca de base de mensagens SOAP que transferem dados de aplicativo e para trás, além dos dados requeridos pelo aplicativo para oferecer suporte a determinados segurança padrão, transações e recursos relacionados à sessão.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-158">Service operations are supported by an underlying exchange of SOAP messages that transfer application data back and forth, in addition to the data required by the application to support certain standard security, transaction, and session-related features.</span></span> <span data-ttu-id="0e5a0-159">Como esse é o caso, a assinatura de uma operação de serviço determina um determinado subjacente *padrão de troca de mensagem* (MEPS) que pode dar suporte a transferência de dados e os recursos que requer uma operação.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-159">Because this is the case, the signature of a service operation dictates a certain underlying *message exchange pattern* (MEP) that can support the data transfer and the features an operation requires.</span></span> <span data-ttu-id="0e5a0-160">Você pode especificar três padrões no [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] modelo de programação: solicitação/resposta, unidirecional e padrões de mensagens duplex.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-160">You can specify three patterns in the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] programming model: request/reply, one-way, and duplex message patterns.</span></span>  
  
##### <a name="requestreply"></a><span data-ttu-id="0e5a0-161">Solicitação/resposta</span><span class="sxs-lookup"><span data-stu-id="0e5a0-161">Request/Reply</span></span>  
 <span data-ttu-id="0e5a0-162">Um padrão de solicitação/resposta é um no qual um remetente da solicitação (um aplicativo cliente) recebe uma resposta correlacionada com a qual a solicitação.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-162">A request/reply pattern is one in which a request sender (a client application) receives a reply with which the request is correlated.</span></span> <span data-ttu-id="0e5a0-163">Esse é o padrão MEPS porque ele oferece suporte a uma operação em que um ou mais parâmetros são passados para a operação e um valor de retorno é passado de volta para o chamador.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-163">This is the default MEP because it supports an operation in which one or more parameters are passed to the operation and a return value is passed back to the caller.</span></span> <span data-ttu-id="0e5a0-164">Por exemplo, o seguinte exemplo de código em c# mostra uma operação de serviço básico que utiliza uma cadeia de caracteres e retorna uma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-164">For example, the following C# code example shows a basic service operation that takes one string and returns a string.</span></span>  
  
```csharp  
[OperationContractAttribute]  
string Hello(string greeting);  
```  
  
 <span data-ttu-id="0e5a0-165">Este é o código do Visual Basic equivalente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-165">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute()>  
Function Hello (ByVal greeting As String) As String  
```  
  
 <span data-ttu-id="0e5a0-166">Essa assinatura de operação determina a forma de troca de mensagens subjacente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-166">This operation signature dictates the form of underlying message exchange.</span></span> <span data-ttu-id="0e5a0-167">Se nenhuma correlação existia, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] não é possível determinar qual operação destina-se o valor de retorno.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-167">If no correlation existed, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] cannot determine for which operation the return value is intended.</span></span>  
  
 <span data-ttu-id="0e5a0-168">Observe que, a menos que você especificar um padrão de mensagem subjacente diferente, até mesmo as operações de serviço que retornam `void` (`Nothing` no Visual Basic) são trocas de mensagens de solicitação/resposta.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-168">Note that unless you specify a different underlying message pattern, even service operations that return `void` (`Nothing` in Visual Basic) are request/reply message exchanges.</span></span> <span data-ttu-id="0e5a0-169">O resultado para a operação é que, a menos que um cliente invoca a operação de forma assíncrona, o cliente para o processamento até que a mensagem de retorno é recebida, mesmo que essa mensagem está vazia no caso normal.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-169">The result for your operation is that unless a client invokes the operation asynchronously, the client stops processing until the return message is received, even though that message is empty in the normal case.</span></span> <span data-ttu-id="0e5a0-170">O seguinte exemplo de código em c# mostra uma operação que não retorna até que o cliente recebeu uma mensagem vazia em resposta.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-170">The following C# code example shows an operation that does not return until the client has received an empty message in response.</span></span>  
  
```csharp  
[OperationContractAttribute]  
void Hello(string greeting);  
```  
  
 <span data-ttu-id="0e5a0-171">Este é o código do Visual Basic equivalente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-171">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute()>  
Sub Hello (ByVal greeting As String)  
```  
  
 <span data-ttu-id="0e5a0-172">O exemplo anterior pode diminuir o desempenho de cliente e a capacidade de resposta se a operação leva muito tempo para executar, mas há vantagens em operações de solicitação/resposta mesmo quando eles retornarem `void`.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-172">The preceding example can slow client performance and responsiveness if the operation takes a long time to perform, but there are advantages to request/reply operations even when they return `void`.</span></span> <span data-ttu-id="0e5a0-173">O mais óbvio é que as falhas de SOAP podem ser retornadas na mensagem de resposta, que indica que alguma condição de erro relacionados ao serviço ocorreu na comunicação ou processamento.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-173">The most obvious one is that SOAP faults can be returned in the response message, which indicates that some service-related error condition has occurred, whether in communication or processing.</span></span> <span data-ttu-id="0e5a0-174">Falhas de SOAP que são especificadas em um contrato de serviço são passadas para o aplicativo cliente como um <xref:System.ServiceModel.FaultException%601> objeto, onde o parâmetro de tipo é o tipo especificado no contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-174">SOAP faults that are specified in a service contract are passed to the client application as a <xref:System.ServiceModel.FaultException%601> object, where the type parameter is the type specified in the service contract.</span></span> <span data-ttu-id="0e5a0-175">Isso faz com que os clientes de notificação sobre condições de erro no [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] fácil de serviços.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-175">This makes notifying clients about error conditions in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] services easy.</span></span> <span data-ttu-id="0e5a0-176">Para obter mais informações sobre exceções, falhas de SOAP e tratamento de erros, consulte [especificando e tratamento de falhas em contratos e serviços](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-176">For more information about exceptions, SOAP faults, and error handling, see [Specifying and Handling Faults in Contracts and Services](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span></span> <span data-ttu-id="0e5a0-177">Para ver um exemplo de um serviço de solicitação/resposta e um cliente, consulte [como: criar um contrato de solicitação-resposta](../../../docs/framework/wcf/feature-details/how-to-create-a-request-reply-contract.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-177">To see an example of a request/reply service and client, see [How to: Create a Request-Reply Contract](../../../docs/framework/wcf/feature-details/how-to-create-a-request-reply-contract.md).</span></span> <span data-ttu-id="0e5a0-178">Para obter mais informações sobre problemas com o padrão de solicitação-resposta, consulte [serviços de solicitação-resposta](../../../docs/framework/wcf/feature-details/request-reply-services.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-178">For more information about issues with the request-reply pattern, see [Request-Reply Services](../../../docs/framework/wcf/feature-details/request-reply-services.md).</span></span>  
  
##### <a name="one-way"></a><span data-ttu-id="0e5a0-179">Unidirecional</span><span class="sxs-lookup"><span data-stu-id="0e5a0-179">One-way</span></span>  
 <span data-ttu-id="0e5a0-180">Se o cliente de um [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplicativo de serviço não deve aguardar a conclusão da operação e não processa falhas de SOAP, a operação pode especificar um padrão de mensagem unidirecional.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-180">If the client of a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service application should not wait for the operation to complete and does not process SOAP faults, the operation can specify a one-way message pattern.</span></span> <span data-ttu-id="0e5a0-181">Uma operação unidirecional é um no qual um cliente invoca uma operação e continua o processamento após [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] grava a mensagem para a rede.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-181">A one-way operation is one in which a client invokes an operation and continues processing after [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] writes the message to the network.</span></span> <span data-ttu-id="0e5a0-182">Normalmente, isso significa que, a menos que os dados que está sendo enviados na mensagem de saída são muito grandes o cliente continua executando quase imediatamente (a menos que haja um erro ao enviar os dados).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-182">Typically this means that unless the data being sent in the outbound message is extremely large the client continues running almost immediately (unless there is an error sending the data).</span></span> <span data-ttu-id="0e5a0-183">Esse tipo de padrão de troca de mensagens dá suporte ao comportamento do tipo de evento de um cliente para um aplicativo de serviço.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-183">This type of message exchange pattern supports event-like behavior from a client to a service application.</span></span>  
  
 <span data-ttu-id="0e5a0-184">Uma troca de mensagens no qual uma mensagem é enviada e nenhum são recebidas não oferece suporte a uma operação de serviço que especifica um valor de retorno diferente de `void`; nesse caso um <xref:System.InvalidOperationException> exceção será lançada.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-184">A message exchange in which one message is sent and none are received cannot support a service operation that specifies a return value other than `void`; in this case an <xref:System.InvalidOperationException> exception is thrown.</span></span>  
  
 <span data-ttu-id="0e5a0-185">Nenhuma mensagem de retorno também significa que não pode haver nenhuma falha SOAP retornada para indicar erros em processamento ou a comunicação.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-185">No return message also means that there can be no SOAP fault returned to indicate any errors in processing or communication.</span></span> <span data-ttu-id="0e5a0-186">(Comunicação de informações de erro quando as operações estão operações unidirecionais requer um padrão de troca de mensagens duplex).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-186">(Communicating error information when operations are one-way operations requires a duplex message exchange pattern.)</span></span>  
  
 <span data-ttu-id="0e5a0-187">Para especificar uma troca de mensagens unidirecionais para uma operação que retorna `void`, defina o <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> propriedade `true`, conforme mostrado no seguinte exemplo de código c#.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-187">To specify a one-way message exchange for an operation that returns `void`, set the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true`, as in the following C# code example.</span></span>  
  
```csharp  
[OperationContractAttribute(IsOneWay=true)]  
void Hello(string greeting);  
```  
  
 <span data-ttu-id="0e5a0-188">Este é o código do Visual Basic equivalente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-188">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute(IsOneWay := True)>  
Sub Hello (ByVal greeting As String)  
```  
  
 <span data-ttu-id="0e5a0-189">Este método é idêntico para exemplo de solicitação/resposta anterior, mas configuração o <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> propriedade `true` significa que, embora o método é idêntico, a operação de serviço não envia uma mensagem de retorno e os clientes retornarão imediatamente quando o mensagem de saída foi passada para a camada do canal.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-189">This method is identical to the preceding request/reply example, but setting the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true` means that although the method is identical, the service operation does not send a return message and clients return immediately once the outbound message has been handed to the channel layer.</span></span> <span data-ttu-id="0e5a0-190">Para obter um exemplo, consulte [como: criar um contrato unidirecional](../../../docs/framework/wcf/feature-details/how-to-create-a-one-way-contract.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-190">For an example, see [How to: Create a One-Way Contract](../../../docs/framework/wcf/feature-details/how-to-create-a-one-way-contract.md).</span></span> <span data-ttu-id="0e5a0-191">Para obter mais informações sobre o padrão unidirecional, consulte [unidirecional serviços](../../../docs/framework/wcf/feature-details/one-way-services.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-191">For more information about the one-way pattern, see [One-Way Services](../../../docs/framework/wcf/feature-details/one-way-services.md).</span></span>  
  
##### <a name="duplex"></a><span data-ttu-id="0e5a0-192">Duplex</span><span class="sxs-lookup"><span data-stu-id="0e5a0-192">Duplex</span></span>  
 <span data-ttu-id="0e5a0-193">Um padrão de duplex é caracterizada pela capacidade do serviço e o cliente para enviar mensagens ao outro independentemente se usando unidirecional ou mensagens de solicitação/resposta.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-193">A duplex pattern is characterized by the ability of both the service and the client to send messages to each other independently whether using one-way or request/reply messaging.</span></span> <span data-ttu-id="0e5a0-194">Essa forma de comunicação bidirecional é útil para os serviços que devem se comunicar diretamente com o cliente ou para fornecer uma experiência assíncrona para nenhum dos lados de uma troca de mensagens, incluindo o comportamento do tipo de evento.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-194">This form of two-way communication is useful for services that must communicate directly to the client or for providing an asynchronous experience to either side of a message exchange, including event-like behavior.</span></span>  
  
 <span data-ttu-id="0e5a0-195">O padrão de duplex é um pouco mais complexo do que a solicitação/resposta ou unidirecionais padrões devido o mecanismo adicional para se comunicar com o cliente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-195">The duplex pattern is slightly more complex than the request/reply or one-way patterns because of the additional mechanism for communicating with the client.</span></span>  
  
 <span data-ttu-id="0e5a0-196">Para criar um contrato duplex, você também deve criar um contrato de retorno de chamada e atribuir o tipo de contrato de retorno de chamada para o <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A> propriedade o <xref:System.ServiceModel.ServiceContractAttribute> atributo que marca o contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-196">To design a duplex contract, you must also design a callback contract and assign the type of that callback contract to the <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A> property of the <xref:System.ServiceModel.ServiceContractAttribute> attribute that marks your service contract.</span></span>  
  
 <span data-ttu-id="0e5a0-197">Para implementar um padrão de duplex, você deve criar uma segunda interface que contém as declarações de método são chamadas no cliente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-197">To implement a duplex pattern, you must create a second interface that contains the method declarations that are called on the client.</span></span>  
  
 <span data-ttu-id="0e5a0-198">Para obter um exemplo de criação de um serviço e um cliente que acessa o serviço, consulte [como: criar um contrato Duplex](../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md) e [como: serviços do Access com um contrato Duplex](../../../docs/framework/wcf/feature-details/how-to-access-services-with-a-duplex-contract.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-198">For an example of creating a service, and a client that accesses that service, see [How to: Create a Duplex Contract](../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md) and [How to: Access Services with a Duplex Contract](../../../docs/framework/wcf/feature-details/how-to-access-services-with-a-duplex-contract.md).</span></span> <span data-ttu-id="0e5a0-199">Para obter um exemplo de funcionamento, consulte [Duplex](../../../docs/framework/wcf/samples/duplex.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-199">For a working sample, see [Duplex](../../../docs/framework/wcf/samples/duplex.md).</span></span> <span data-ttu-id="0e5a0-200">Para obter mais informações sobre como usar contratos duplex, consulte [serviços Duplex](../../../docs/framework/wcf/feature-details/duplex-services.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-200">For more information about issues using duplex contracts, see [Duplex Services](../../../docs/framework/wcf/feature-details/duplex-services.md).</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="0e5a0-201">Quando um serviço recebe uma mensagem duplex, ele examina o `ReplyTo` elemento nessa mensagem de entrada para determinar para onde enviar a resposta.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-201">When a service receives a duplex message, it looks at the `ReplyTo` element in that incoming message to determine where to send the reply.</span></span> <span data-ttu-id="0e5a0-202">Se o canal que é usado para receber a mensagem não for protegido, um cliente não confiável pode enviar uma mensagem mal-intencionado com um computador de destino `ReplyTo`, causando uma negação de serviço (DOS) da máquina de destino.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-202">If the channel that is used to receive the message is not secured, then an untrusted client could send a malicious message with a target machine's `ReplyTo`, leading to a denial of service (DOS) of that target machine.</span></span>  
  
##### <a name="out-and-ref-parameters"></a><span data-ttu-id="0e5a0-203">Parâmetros de Ref e out</span><span class="sxs-lookup"><span data-stu-id="0e5a0-203">Out and Ref Parameters</span></span>  
 <span data-ttu-id="0e5a0-204">Na maioria dos casos, você pode usar `in` parâmetros (`ByVal` no Visual Basic) e `out` e `ref` parâmetros (`ByRef` no Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-204">In most cases, you can use `in` parameters (`ByVal` in Visual Basic) and `out` and `ref` parameters (`ByRef` in Visual Basic).</span></span> <span data-ttu-id="0e5a0-205">Porque ambos `out` e `ref` parâmetros indicam que dados são retornados de uma operação, uma assinatura de operação, como a seguir especifica que uma operação de solicitação/resposta for necessária, embora a assinatura da operação retorna `void`.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-205">Because both `out` and `ref` parameters indicate that data is returned from an operation, an operation signature such as the following specifies that a request/reply operation is required even though the operation signature returns `void`.</span></span>  
  
```csharp  
[ServiceContractAttribute]  
public interface IMyContract  
{  
  [OperationContractAttribute]  
  public void PopulateData(ref CustomDataType data);  
}  
```  
  
 <span data-ttu-id="0e5a0-206">Este é o código do Visual Basic equivalente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-206">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContractAttribute()> _  
Public Interface IMyContract  
  <OperationContractAttribute()> _  
  Public Sub PopulateData(ByRef data As CustomDataType)  
End Interface  
```  
  
 <span data-ttu-id="0e5a0-207">As únicas exceções são os casos em que a sua assinatura tem uma estrutura específica.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-207">The only exceptions are those cases in which your signature has a particular structure.</span></span> <span data-ttu-id="0e5a0-208">Por exemplo, você pode usar o <xref:System.ServiceModel.NetMsmqBinding> de associação para se comunicar com se apenas os clientes, o método usado para declarar uma operação retorna `void`; não pode haver nenhum valor de saída, se ele é um valor de retorno, `ref`, ou `out` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-208">For example, you can use the <xref:System.ServiceModel.NetMsmqBinding> binding to communicate with clients only if the method used to declare an operation returns `void`; there can be no output value, whether it is a return value, `ref`, or `out` parameter.</span></span>  
  
 <span data-ttu-id="0e5a0-209">Além disso, usando `out` ou `ref` parâmetros requer que a operação tenha uma mensagem de resposta subjacente para executar novamente o objeto modificado.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-209">In addition, using `out` or `ref` parameters requires that the operation have an underlying response message to carry back the modified object.</span></span> <span data-ttu-id="0e5a0-210">Se a operação é uma operação unidirecional, um <xref:System.InvalidOperationException> exceção em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-210">If your operation is a one-way operation, an <xref:System.InvalidOperationException> exception is thrown at runtime.</span></span>  
  
### <a name="specify-message-protection-level-on-the-contract"></a><span data-ttu-id="0e5a0-211">Especificar o nível de proteção de mensagem do contrato</span><span class="sxs-lookup"><span data-stu-id="0e5a0-211">Specify Message Protection Level on the Contract</span></span>  
 <span data-ttu-id="0e5a0-212">Ao criar o contrato, você também deve decidir o nível de proteção de mensagem de serviços que implemente o contrato.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-212">When designing your contract, you must also decide the message protection level of services that implement your contract.</span></span> <span data-ttu-id="0e5a0-213">Isso é necessário apenas se a segurança de mensagem é aplicada para a associação no ponto de extremidade do contrato.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-213">This is necessary only if message security is applied to the binding in the contract's endpoint.</span></span> <span data-ttu-id="0e5a0-214">Se a associação de segurança desativada (ou seja, se a associação fornecida pelo sistema define o <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> para o valor <xref:System.ServiceModel.SecurityMode.None?displayProperty=nameWithType>), em seguida, você não precisa decidir sobre o nível de proteção de mensagem para o contrato.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-214">If the binding has security turned off (that is, if the system-provided binding sets the <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> to the value <xref:System.ServiceModel.SecurityMode.None?displayProperty=nameWithType>) then you do not have to decide on the message protection level for the contract.</span></span> <span data-ttu-id="0e5a0-215">Na maioria dos casos, as associações fornecidas pelo sistema com segurança em nível de mensagem aplicada fornecem um nível de proteção suficiente e você não deve considerar o nível de proteção para cada operação, ou para cada mensagem.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-215">In most cases, system-provided bindings with message-level security applied provide a sufficient protection level and you do not have to consider the protection level for each operation or for each message.</span></span>  
  
 <span data-ttu-id="0e5a0-216">O nível de proteção é um valor que especifica se as mensagens (ou partes da mensagem) que dão suporte a um serviço são assinados, assinado e criptografado ou enviados sem criptografia ou assinaturas.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-216">The protection level is a value that specifies whether the messages (or message parts) that support a service are signed, signed and encrypted, or sent without signatures or encryption.</span></span> <span data-ttu-id="0e5a0-217">O nível de proteção pode ser definido em vários escopos: no nível de serviço, para uma operação específica, para uma mensagem em que a operação ou uma parte da mensagem.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-217">The protection level can be set at various scopes: At the service level, for a particular operation, for a message within that operation, or a message part.</span></span> <span data-ttu-id="0e5a0-218">Os valores definidos em um escopo tornam-se o valor padrão para escopos menores, a menos que explicitamente substituído.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-218">Values set at one scope become the default value for smaller scopes unless explicitly overridden.</span></span> <span data-ttu-id="0e5a0-219">Se uma configuração de associação não pode fornecer o nível de proteção mínima necessária para o contrato, uma exceção será lançada.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-219">If a binding configuration cannot provide the required minimum protection level for the contract, an exception is thrown.</span></span> <span data-ttu-id="0e5a0-220">E, quando nenhum valor de nível de proteção é definidos explicitamente o contrato, a configuração de associação controla o nível de proteção para todas as mensagens se a associação de segurança de mensagem.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-220">And when no protection level values are explicitly set on the contract, the binding configuration controls the protection level for all messages if the binding has message security.</span></span> <span data-ttu-id="0e5a0-221">Este é o comportamento padrão.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-221">This is the default behavior.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="0e5a0-222">Decidir se deseja definir explicitamente vários escopos de um contrato para menor que o nível de proteção completa de <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType> geralmente é uma decisão que lida com algum nível de segurança para melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-222">Deciding whether to explicitly set various scopes of a contract to less than the full protection level of <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType> is generally a decision that trades some degree of security for increased performance.</span></span> <span data-ttu-id="0e5a0-223">Nesses casos, as decisões devem giram em torno de suas operações e o valor dos dados que eles do exchange.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-223">In these cases, your decisions must revolve around your operations and the value of the data they exchange.</span></span> <span data-ttu-id="0e5a0-224">Para obter mais informações, consulte [protegendo serviços](../../../docs/framework/wcf/securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-224">For more information, see [Securing Services](../../../docs/framework/wcf/securing-services.md).</span></span>  
  
 <span data-ttu-id="0e5a0-225">Por exemplo, o exemplo de código a seguir não definido o <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> ou <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> propriedade no contrato.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-225">For example, the following code example does not set either the <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> or the <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> property on the contract.</span></span>  
  
```csharp  
[ServiceContract]  
public interface ISampleService  
{  
  [OperationContractAttribute]  
  public string GetString();  
  
  [OperationContractAttribute]  
  public int GetInt();    
}  
```  
  
 <span data-ttu-id="0e5a0-226">Este é o código do Visual Basic equivalente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-226">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContractAttribute()> _  
Public Interface ISampleService  
  
  <OperationContractAttribute()> _  
  Public Function GetString()As String  
  
  <OperationContractAttribute()> _  
  Public Function GetData() As Integer  
  
End Interface  
```  
  
 <span data-ttu-id="0e5a0-227">Ao interagir com um `ISampleService` implementação em um ponto de extremidade com um padrão <xref:System.ServiceModel.WSHttpBinding> (o padrão <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>, que é <xref:System.ServiceModel.SecurityMode.Message>), todas as mensagens são criptografadas e assinadas porque este é o nível de proteção padrão.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-227">When interacting with an `ISampleService` implementation in an endpoint with a default <xref:System.ServiceModel.WSHttpBinding> (the default <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>, which is <xref:System.ServiceModel.SecurityMode.Message>), all messages are encrypted and signed because this is the default protection level.</span></span> <span data-ttu-id="0e5a0-228">No entanto, quando um `ISampleService` serviço é usado com um padrão <xref:System.ServiceModel.BasicHttpBinding> (o padrão <xref:System.ServiceModel.SecurityMode>, que é <xref:System.ServiceModel.SecurityMode.None>), todas as mensagens são enviadas como texto porque não há nenhuma segurança para esta associação e, portanto, o nível de proteção é ignorado (ou seja, o as mensagens não são criptografadas nem assinadas).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-228">However, when an `ISampleService` service is used with a default <xref:System.ServiceModel.BasicHttpBinding> (the default <xref:System.ServiceModel.SecurityMode>, which is <xref:System.ServiceModel.SecurityMode.None>), all messages are sent as text because there is no security for this binding and so the protection level is ignored (that is, the messages are neither encrypted nor signed).</span></span> <span data-ttu-id="0e5a0-229">Se o <xref:System.ServiceModel.SecurityMode> foi alterado para <xref:System.ServiceModel.SecurityMode.Message>, em seguida, essas mensagens deve ser criptografadas e assinadas (porque agora que seria o nível de proteção da associação padrão).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-229">If the <xref:System.ServiceModel.SecurityMode> was changed to <xref:System.ServiceModel.SecurityMode.Message>, then these messages would be encrypted and signed (because that would now be the binding's default protection level).</span></span>  
  
 <span data-ttu-id="0e5a0-230">Se você deseja especificar explicitamente ou ajustar os requisitos de proteção para o contrato, defina o <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> propriedade (ou qualquer uma da `ProtectionLevel` propriedades em um escopo menor) para o nível de seu contrato de serviço exige.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-230">If you want to explicitly specify or adjust the protection requirements for your contract, set the <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> property (or any of the `ProtectionLevel` properties at a smaller scope) to the level your service contract requires.</span></span> <span data-ttu-id="0e5a0-231">Nesse caso, usar uma configuração explícita exige a associação dar suporte a essa configuração, no mínimo para o escopo usado.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-231">In this case, using an explicit setting requires the binding to support that setting at a minimum for the scope used.</span></span> <span data-ttu-id="0e5a0-232">Por exemplo, o exemplo de código a seguir especifica um <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> valor explicitamente, para o `GetGuid` operação.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-232">For example, the following code example specifies one <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> value explicitly, for the `GetGuid` operation.</span></span>  
  
```csharp  
[ServiceContract]  
public interface IExplicitProtectionLevelSampleService  
{  
  [OperationContractAttribute]  
  public string GetString();  
  
  [OperationContractAttribute(ProtectionLevel=ProtectionLevel.None)]  
  public int GetInt();    
  [OperationContractAttribute(ProtectionLevel=ProtectionLevel.EncryptAndSign)]  
  public int GetGuid();    
}  
```  
  
 <span data-ttu-id="0e5a0-233">Este é o código do Visual Basic equivalente.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-233">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContract()> _   
Public Interface IExplicitProtectionLevelSampleService   
    <OperationContract()> _   
    Public Function GetString() As String   
    End Function   
  
    <OperationContract(ProtectionLevel := ProtectionLevel.None)> _   
    Public Function GetInt() As Integer   
    End Function   
  
    <OperationContractAttribute(ProtectionLevel := ProtectionLevel.EncryptAndSign)> _   
    Public Function GetGuid() As Integer   
    End Function   
  
End Interface  
```  
  
 <span data-ttu-id="0e5a0-234">Um serviço que implementa `IExplicitProtectionLevelSampleService` contrato e tem um ponto de extremidade que usa o padrão <xref:System.ServiceModel.WSHttpBinding> (o padrão <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>, que é <xref:System.ServiceModel.SecurityMode.Message>) tem o seguinte comportamento:</span><span class="sxs-lookup"><span data-stu-id="0e5a0-234">A service that implements this `IExplicitProtectionLevelSampleService` contract and has an endpoint that uses the default <xref:System.ServiceModel.WSHttpBinding> (the default <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>, which is <xref:System.ServiceModel.SecurityMode.Message>) has the following behavior:</span></span>  
  
-   <span data-ttu-id="0e5a0-235">O `GetString` mensagens de operação são criptografadas e assinadas.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-235">The `GetString` operation messages are encrypted and signed.</span></span>  
  
-   <span data-ttu-id="0e5a0-236">O `GetInt` assinados (ou seja, simples) e descriptografados de operação são enviadas como texto.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-236">The `GetInt` operation messages are sent as unencrypted and unsigned (that is, plain) text.</span></span>  
  
-   <span data-ttu-id="0e5a0-237">O `GetGuid` operação <xref:System.Guid?displayProperty=nameWithType> é retornado em uma mensagem que é criptografada e assinada.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-237">The `GetGuid` operation <xref:System.Guid?displayProperty=nameWithType> is returned in a message that is encrypted and signed.</span></span>  
  
 <span data-ttu-id="0e5a0-238">Para obter mais informações sobre níveis de proteção e como usá-los, consulte [Noções básicas sobre nível de proteção](../../../docs/framework/wcf/understanding-protection-level.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-238">For more information about protection levels and how to use them, see [Understanding Protection Level](../../../docs/framework/wcf/understanding-protection-level.md).</span></span> <span data-ttu-id="0e5a0-239">Para obter mais informações sobre segurança, consulte [protegendo serviços](../../../docs/framework/wcf/securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-239">For more information about security, see [Securing Services](../../../docs/framework/wcf/securing-services.md).</span></span>  
  
##### <a name="other-operation-signature-requirements"></a><span data-ttu-id="0e5a0-240">Outros requisitos de assinatura de operação</span><span class="sxs-lookup"><span data-stu-id="0e5a0-240">Other Operation Signature Requirements</span></span>  
 <span data-ttu-id="0e5a0-241">Alguns recursos de aplicativo exigir um determinado tipo de assinatura da operação.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-241">Some application features require a particular kind of operation signature.</span></span> <span data-ttu-id="0e5a0-242">Por exemplo, o <xref:System.ServiceModel.NetMsmqBinding> associação oferece suporte a clientes, em que um aplicativo pode reiniciar no meio de comunicação e continuar onde ela parou sem perder todas as mensagens e serviços duráveis.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-242">For example, the <xref:System.ServiceModel.NetMsmqBinding> binding supports durable services and clients, in which an application can restart in the middle of communication and pick up where it left off without missing any messages.</span></span> <span data-ttu-id="0e5a0-243">(Para obter mais informações, consulte [filas no WCF](../../../docs/framework/wcf/feature-details/queues-in-wcf.md).) No entanto, operações duráveis devem levar apenas um `in` parâmetro e não têm nenhum valor de retorno.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-243">(For more information, see [Queues in WCF](../../../docs/framework/wcf/feature-details/queues-in-wcf.md).) However, durable operations must take only one `in` parameter and have no return value.</span></span>  
  
 <span data-ttu-id="0e5a0-244">Outro exemplo é o uso de <xref:System.IO.Stream> tipos de operações.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-244">Another example is the use of <xref:System.IO.Stream> types in operations.</span></span> <span data-ttu-id="0e5a0-245">Porque o <xref:System.IO.Stream> parâmetro inclui o corpo da mensagem inteira, se uma entrada ou uma saída (ou seja, `ref` parâmetro `out` parâmetro ou valor de retorno) é do tipo <xref:System.IO.Stream>, em seguida, ele deve ser a única entrada ou saída especificada no seu operação.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-245">Because the <xref:System.IO.Stream> parameter includes the entire message body, if an input or an output (that is, `ref` parameter, `out` parameter, or return value) is of type <xref:System.IO.Stream>, then it must be the only input or output specified in your operation.</span></span> <span data-ttu-id="0e5a0-246">Além disso, o tipo de retorno ou parâmetro deve ser <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType>, ou <xref:System.Xml.Serialization.IXmlSerializable?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-246">In addition, the parameter or return type must be either <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType>, or <xref:System.Xml.Serialization.IXmlSerializable?displayProperty=nameWithType>.</span></span> <span data-ttu-id="0e5a0-247">Para obter mais informações sobre fluxos, consulte [dados grandes e Streaming](../../../docs/framework/wcf/feature-details/large-data-and-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="0e5a0-247">For more information about streams, see [Large Data and Streaming](../../../docs/framework/wcf/feature-details/large-data-and-streaming.md).</span></span>  
  
##### <a name="names-namespaces-and-obfuscation"></a><span data-ttu-id="0e5a0-248">Nomes de Namespaces e ofuscação</span><span class="sxs-lookup"><span data-stu-id="0e5a0-248">Names, Namespaces, and Obfuscation</span></span>  
 <span data-ttu-id="0e5a0-249">Os nomes e os namespaces, os tipos do .NET na definição de contratos e operações são significativos quando contratos são convertidos em WSDL e quando as mensagens de contrato são criadas e enviadas.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-249">The names and namespaces of the .NET types in the definition of contracts and operations are significant when contracts are converted into WSDL and when contract messages are created and sent.</span></span> <span data-ttu-id="0e5a0-250">Portanto, é altamente recomendável que os nomes de contrato de serviço e namespaces são definidos explicitamente usando o `Name` e `Namespace` propriedades de dar suporte a todos os atributos de contrato, como o <xref:System.ServiceModel.ServiceContractAttribute>, <xref:System.ServiceModel.OperationContractAttribute>, <xref:System.Runtime.Serialization.DataContractAttribute>,  <xref:System.Runtime.Serialization.DataMemberAttribute>e outros atributos do contrato.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-250">Therefore, it is strongly recommended that service contract names and namespaces are explicitly set using the `Name` and `Namespace` properties of all supporting contract attributes such as the <xref:System.ServiceModel.ServiceContractAttribute>, <xref:System.ServiceModel.OperationContractAttribute>, <xref:System.Runtime.Serialization.DataContractAttribute>,  <xref:System.Runtime.Serialization.DataMemberAttribute>, and other contract attributes.</span></span>  
  
 <span data-ttu-id="0e5a0-251">Um resultado é que, se os nomes e os namespaces não são explicitamente definidas, o uso de ofuscação de IL no assembly altera os nomes de tipo de contrato e namespaces e resultados de WSDL modificado e trocas de transmissão que normalmente não.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-251">One result of this is that if the names and namespaces are not explicitly set, the use of IL obfuscation on the assembly alters the contract type names and namespaces and results in modified WSDL and wire exchanges that typically fail.</span></span> <span data-ttu-id="0e5a0-252">Se você não definir os nomes de contrato e os namespaces explicitamente, mas pretende usar ofuscamento, use o <xref:System.Reflection.ObfuscationAttribute> e <xref:System.Reflection.ObfuscateAssemblyAttribute> namespaces e nomes de tipo de atributos para impedir a modificação do contrato.</span><span class="sxs-lookup"><span data-stu-id="0e5a0-252">If you do not set the contract names and namespaces explicitly but do intend to use obfuscation, use the <xref:System.Reflection.ObfuscationAttribute> and <xref:System.Reflection.ObfuscateAssemblyAttribute> attributes to prevent the modification of the contract type names and namespaces.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0e5a0-253">Consulte também</span><span class="sxs-lookup"><span data-stu-id="0e5a0-253">See Also</span></span>  
 [<span data-ttu-id="0e5a0-254">Como criar um contrato de solicitação-resposta</span><span class="sxs-lookup"><span data-stu-id="0e5a0-254">How to: Create a Request-Reply Contract</span></span>](../../../docs/framework/wcf/feature-details/how-to-create-a-request-reply-contract.md)  
 [<span data-ttu-id="0e5a0-255">Como criar um contrato unidirecional</span><span class="sxs-lookup"><span data-stu-id="0e5a0-255">How to: Create a One-Way Contract</span></span>](../../../docs/framework/wcf/feature-details/how-to-create-a-one-way-contract.md)  
 [<span data-ttu-id="0e5a0-256">Como criar um contrato duplex</span><span class="sxs-lookup"><span data-stu-id="0e5a0-256">How to: Create a Duplex Contract</span></span>](../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md)  
 [<span data-ttu-id="0e5a0-257">Especificando transferência de dados em contratos de serviço</span><span class="sxs-lookup"><span data-stu-id="0e5a0-257">Specifying Data Transfer in Service Contracts</span></span>](../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md)  
 [<span data-ttu-id="0e5a0-258">Especificando e lidando com falhas em contratos e serviços</span><span class="sxs-lookup"><span data-stu-id="0e5a0-258">Specifying and Handling Faults in Contracts and Services</span></span>](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md)  
 [<span data-ttu-id="0e5a0-259">Usando sessões</span><span class="sxs-lookup"><span data-stu-id="0e5a0-259">Using Sessions</span></span>](../../../docs/framework/wcf/using-sessions.md)  
 [<span data-ttu-id="0e5a0-260">Operações síncronas e assíncronas</span><span class="sxs-lookup"><span data-stu-id="0e5a0-260">Synchronous and Asynchronous Operations</span></span>](../../../docs/framework/wcf/synchronous-and-asynchronous-operations.md)  
 [<span data-ttu-id="0e5a0-261">Serviços confiáveis</span><span class="sxs-lookup"><span data-stu-id="0e5a0-261">Reliable Services</span></span>](../../../docs/framework/wcf/reliable-services.md)  
 [<span data-ttu-id="0e5a0-262">Serviços e transações</span><span class="sxs-lookup"><span data-stu-id="0e5a0-262">Services and Transactions</span></span>](../../../docs/framework/wcf/services-and-transactions.md)
