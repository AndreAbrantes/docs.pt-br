---
title: 'Tutorial: classificar violações de integridade com o construtor de modelos'
description: Este tutorial ilustra como criar um modelo de classificação multiclasse usando o ML.NET Model Builder para classificar a severidade de violação de integridade de restaurante em São Francisco.
author: luisquintanilla
ms.author: luquinta
ms.date: 11/21/2019
ms.topic: tutorial
ms.custom: mvc
ms.openlocfilehash: 90abbc9ffe5765880d18d0d29c8e13bc1330ddc3
ms.sourcegitcommit: 30a558d23e3ac5a52071121a52c305c85fe15726
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/25/2019
ms.locfileid: "75341561"
---
# <a name="tutorial-classify-the-severity-of-restaurant-health-violations-with-model-builder"></a><span data-ttu-id="c07d0-103">Tutorial: classificar a gravidade das violações de integridade do restaurante com o construtor de modelos</span><span class="sxs-lookup"><span data-stu-id="c07d0-103">Tutorial: Classify the severity of restaurant health violations with Model Builder</span></span>

<span data-ttu-id="c07d0-104">Saiba como criar um modelo de classificação multiclasse usando o construtor de modelos para categorizar o nível de risco de violações de restaurante encontradas durante as inspeções de integridade.</span><span class="sxs-lookup"><span data-stu-id="c07d0-104">Learn how to build a multiclass classification model using Model Builder to categorize the risk level of restaurant violations found during health inspections.</span></span>

<span data-ttu-id="c07d0-105">Neste tutorial, você aprenderá como:</span><span class="sxs-lookup"><span data-stu-id="c07d0-105">In this tutorial, you learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="c07d0-106">Preparar e compreender os dados</span><span class="sxs-lookup"><span data-stu-id="c07d0-106">Prepare and understand the data</span></span>
> - <span data-ttu-id="c07d0-107">Escolha um cenário</span><span class="sxs-lookup"><span data-stu-id="c07d0-107">Choose a scenario</span></span>
> - <span data-ttu-id="c07d0-108">Carregar dados de um banco</span><span class="sxs-lookup"><span data-stu-id="c07d0-108">Load data from a database</span></span>
> - <span data-ttu-id="c07d0-109">Treinar o modelo</span><span class="sxs-lookup"><span data-stu-id="c07d0-109">Train the model</span></span>
> - <span data-ttu-id="c07d0-110">Avaliar o modelo</span><span class="sxs-lookup"><span data-stu-id="c07d0-110">Evaluate the model</span></span>
> - <span data-ttu-id="c07d0-111">Usar o modelo para previsões</span><span class="sxs-lookup"><span data-stu-id="c07d0-111">Use the model for predictions</span></span>

> [!NOTE]
> <span data-ttu-id="c07d0-112">O Construtor de Modelo está atualmente na Versão Prévia.</span><span class="sxs-lookup"><span data-stu-id="c07d0-112">Model Builder is currently in Preview.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="c07d0-113">{1&gt;{2&gt;Pré-requisitos&lt;2}&lt;1}</span><span class="sxs-lookup"><span data-stu-id="c07d0-113">Prerequisites</span></span>

<span data-ttu-id="c07d0-114">Para obter uma lista de pré-requisitos e instruções de instalação, visite o [Guia de instalação do Model Builder](../how-to-guides/install-model-builder.md).</span><span class="sxs-lookup"><span data-stu-id="c07d0-114">For a list of prerequisites and installation instructions, visit the [Model Builder installation guide](../how-to-guides/install-model-builder.md).</span></span>

## <a name="model-builder-multiclass-classification-overview"></a><span data-ttu-id="c07d0-115">Visão geral da classificação multiclasse do construtor de modelos</span><span class="sxs-lookup"><span data-stu-id="c07d0-115">Model Builder multiclass classification overview</span></span>

<span data-ttu-id="c07d0-116">Este exemplo cria um C# aplicativo de console .NET Core que categoriza o risco de violações de integridade usando um modelo de aprendizado de máquina criado com o construtor de modelos.</span><span class="sxs-lookup"><span data-stu-id="c07d0-116">This sample creates a C# .NET Core console application that categorizes the risk of health violations using a machine learning model built with Model Builder.</span></span> <span data-ttu-id="c07d0-117">Você pode encontrar o código-fonte deste tutorial no repositório do GitHub [dotnet/MachineLearning-Samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) .</span><span class="sxs-lookup"><span data-stu-id="c07d0-117">You can find the source code for this tutorial at the [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) GitHub repository.</span></span>

## <a name="create-a-console-application"></a><span data-ttu-id="c07d0-118">Criar um aplicativo de console</span><span class="sxs-lookup"><span data-stu-id="c07d0-118">Create a console application</span></span>

1. <span data-ttu-id="c07d0-119">Crie um  **C# aplicativo de console do .NET Core** chamado "RestaurantViolations".</span><span class="sxs-lookup"><span data-stu-id="c07d0-119">Create a **C# .NET Core console application** called "RestaurantViolations".</span></span> <span data-ttu-id="c07d0-120">Verifique se a opção **Colocar solução e projeto no mesmo diretório** está **desmarcada** (vs 2019) ou **criar diretório para solução** está **marcado** (vs 2017).</span><span class="sxs-lookup"><span data-stu-id="c07d0-120">Make sure **Place solution and project in the same directory** is **unchecked** (VS 2019), or **Create directory for solution** is **checked** (VS 2017).</span></span>

## <a name="prepare-and-understand-the-data"></a><span data-ttu-id="c07d0-121">Preparar e compreender os dados</span><span class="sxs-lookup"><span data-stu-id="c07d0-121">Prepare and understand the data</span></span>

> <span data-ttu-id="c07d0-122">O conjunto de dados usado para treinar e avaliar o modelo de aprendizado de máquina é originalmente da [Pontuação de segurança de restaurantes do departamento de saúde pública de San Francisco](https://www.sfdph.org/dph/EH/Food/score/default.asp).</span><span class="sxs-lookup"><span data-stu-id="c07d0-122">The data set used to train and evaluate the machine learning model is originally from the [San Francisco Department of Public Health Restaurant Safety Scores](https://www.sfdph.org/dph/EH/Food/score/default.asp).</span></span> <span data-ttu-id="c07d0-123">Para sua conveniência, o conjunto de linhas foi condensado para incluir apenas as colunas relevantes para treinar o modelo e fazer previsões.</span><span class="sxs-lookup"><span data-stu-id="c07d0-123">For convenience, the dataset has been condensed to only include the columns relevant to train the model and make predictions.</span></span> <span data-ttu-id="c07d0-124">Visite o site a seguir para saber mais sobre o [conjunto](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i?row_index=0)de informações.</span><span class="sxs-lookup"><span data-stu-id="c07d0-124">Visit the following website to learn more about the [dataset](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i?row_index=0).</span></span>

<span data-ttu-id="c07d0-125">[Baixe o conjunto de resultados de pontos de segurança do restaurante](https://github.com/luisquintanilla/machinelearning-samples/raw/AB1608219/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantScores.zip) e descompacte-o.</span><span class="sxs-lookup"><span data-stu-id="c07d0-125">[Download the Restaurant Safety Scores dataset](https://github.com/luisquintanilla/machinelearning-samples/raw/AB1608219/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantScores.zip) and unzip it.</span></span>

<span data-ttu-id="c07d0-126">Cada linha no conjunto de dados contém informações sobre violações observadas durante uma inspeção do departamento de integridade e uma avaliação de risco da ameaça que essas violações apresentam à integridade pública e à segurança.</span><span class="sxs-lookup"><span data-stu-id="c07d0-126">Each row in the dataset contains information regarding violations observed during an inspection from the Health Department and a risk assessment of the threat those violations present to public health and safety.</span></span>

| <span data-ttu-id="c07d0-127">De inspeção</span><span class="sxs-lookup"><span data-stu-id="c07d0-127">InspectionType</span></span> | <span data-ttu-id="c07d0-128">ViolationDescription</span><span class="sxs-lookup"><span data-stu-id="c07d0-128">ViolationDescription</span></span> | <span data-ttu-id="c07d0-129">RiskCategory</span><span class="sxs-lookup"><span data-stu-id="c07d0-129">RiskCategory</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c07d0-130">Rotina-não agendada</span><span class="sxs-lookup"><span data-stu-id="c07d0-130">Routine - Unscheduled</span></span> | <span data-ttu-id="c07d0-131">Superfícies de contato de alimentos desfeitas ou limpas inadequadamente</span><span class="sxs-lookup"><span data-stu-id="c07d0-131">Inadequately cleaned or sanitized food contact surfaces</span></span> | <span data-ttu-id="c07d0-132">Risco moderado</span><span class="sxs-lookup"><span data-stu-id="c07d0-132">Moderate Risk</span></span> |
| <span data-ttu-id="c07d0-133">Nova Propriedade</span><span class="sxs-lookup"><span data-stu-id="c07d0-133">New Ownership</span></span> | <span data-ttu-id="c07d0-134">Infestação Vermin de alto risco</span><span class="sxs-lookup"><span data-stu-id="c07d0-134">High risk vermin infestation</span></span> | <span data-ttu-id="c07d0-135">Alto risco</span><span class="sxs-lookup"><span data-stu-id="c07d0-135">High Risk</span></span> |
| <span data-ttu-id="c07d0-136">Rotina-não agendada</span><span class="sxs-lookup"><span data-stu-id="c07d0-136">Routine - Unscheduled</span></span> | <span data-ttu-id="c07d0-137">Limpando os panons não limpos ou corretamente armazenados ou inadequados</span><span class="sxs-lookup"><span data-stu-id="c07d0-137">Wiping cloths not clean or properly stored or inadequate sanitizer</span></span> | <span data-ttu-id="c07d0-138">Baixo risco</span><span class="sxs-lookup"><span data-stu-id="c07d0-138">Low Risk</span></span> |

- <span data-ttu-id="c07d0-139">**Inspeçãotype**: o tipo de inspeção.</span><span class="sxs-lookup"><span data-stu-id="c07d0-139">**InspectionType**: the type of inspection.</span></span> <span data-ttu-id="c07d0-140">Isso pode ser uma inspeção pela primeira vez para um novo estabelecimento, uma inspeção de rotina, uma inspeção de reclamação e muitos outros tipos.</span><span class="sxs-lookup"><span data-stu-id="c07d0-140">This can either be a first-time inspection for a new establishment, a routine inspection, a complaint inspection, and many other types.</span></span>
- <span data-ttu-id="c07d0-141">**ViolationDescription**: uma descrição da violação encontrada durante a inspeção.</span><span class="sxs-lookup"><span data-stu-id="c07d0-141">**ViolationDescription**: a description of the violation found during inspection.</span></span>
- <span data-ttu-id="c07d0-142">**RiskCategory**: a severidade de risco uma violação representa a integridade pública e a segurança.</span><span class="sxs-lookup"><span data-stu-id="c07d0-142">**RiskCategory**: the risk severity a violation poses to public health and safety.</span></span>

<span data-ttu-id="c07d0-143">O `label` é a coluna que você deseja prever.</span><span class="sxs-lookup"><span data-stu-id="c07d0-143">The `label` is the column you want to predict.</span></span> <span data-ttu-id="c07d0-144">Ao executar uma tarefa de classificação, o objetivo é atribuir uma categoria (texto ou numérico).</span><span class="sxs-lookup"><span data-stu-id="c07d0-144">When performing a classification task, the goal is to assign a category (text or numerical).</span></span> <span data-ttu-id="c07d0-145">Nesse cenário de classificação, a severidade da violação é atribuída ao valor baixo, moderado ou alto risco.</span><span class="sxs-lookup"><span data-stu-id="c07d0-145">In this classification scenario, the severity of the violation is assigned the value of low, moderate, or high risk.</span></span> <span data-ttu-id="c07d0-146">Portanto, o **RiskCategory** é o rótulo.</span><span class="sxs-lookup"><span data-stu-id="c07d0-146">Therefore, the **RiskCategory** is the label.</span></span> <span data-ttu-id="c07d0-147">As `features` são as entradas que você fornece ao modelo para prever o `label`.</span><span class="sxs-lookup"><span data-stu-id="c07d0-147">The `features` are the inputs you give the model to predict the `label`.</span></span> <span data-ttu-id="c07d0-148">Nesse caso, o **inspeções de inspeção** e **ViolationDescription** são usados como recursos ou entradas para prever o **RiskCategory**.</span><span class="sxs-lookup"><span data-stu-id="c07d0-148">In this case, the **InspectionType** and **ViolationDescription** are used as features or inputs to predict the **RiskCategory**.</span></span>

## <a name="choose-a-scenario"></a><span data-ttu-id="c07d0-149">Escolha um cenário</span><span class="sxs-lookup"><span data-stu-id="c07d0-149">Choose a scenario</span></span>

![Assistente do construtor de modelos no Visual Studio](./media/sentiment-analysis-model-builder/model-builder-screen.png)

<span data-ttu-id="c07d0-151">Para treinar seu modelo, selecione na lista de cenários de aprendizado de máquina disponíveis fornecidos pelo construtor de modelos.</span><span class="sxs-lookup"><span data-stu-id="c07d0-151">To train your model, select from the list of available machine learning scenarios provided by Model Builder.</span></span> <span data-ttu-id="c07d0-152">Nesse caso, o cenário é a *classificação do problema*.</span><span class="sxs-lookup"><span data-stu-id="c07d0-152">In this case, the scenario is *Issue Classification*.</span></span>

1. <span data-ttu-id="c07d0-153">Em **Gerenciador de soluções**, clique com o botão direito do mouse no projeto *RestaurantViolations* e selecione **Adicionar** > **Machine Learning**.</span><span class="sxs-lookup"><span data-stu-id="c07d0-153">In **Solution Explorer**, right-click the *RestaurantViolations* project, and select **Add** > **Machine Learning**.</span></span>
1. <span data-ttu-id="c07d0-154">Para este exemplo, o cenário é classificação multiclasse.</span><span class="sxs-lookup"><span data-stu-id="c07d0-154">For this sample, the scenario is multiclass classification.</span></span> <span data-ttu-id="c07d0-155">Na etapa *cenário* do construtor de modelos, selecione o cenário de **classificação do problema** .</span><span class="sxs-lookup"><span data-stu-id="c07d0-155">In the *Scenario* step of Model Builder, select the **Issue Classification** scenario.</span></span>

## <a name="load-the-data"></a><span data-ttu-id="c07d0-156">Carregar os dados</span><span class="sxs-lookup"><span data-stu-id="c07d0-156">Load the data</span></span>

<span data-ttu-id="c07d0-157">O construtor de modelos aceita dados de um banco de SQL Server ou de um arquivo local no formato `csv` ou `tsv`.</span><span class="sxs-lookup"><span data-stu-id="c07d0-157">Model Builder accepts data from a SQL Server database or a local file in `csv` or `tsv` format.</span></span>

1. <span data-ttu-id="c07d0-158">Na etapa dados da ferramenta Construtor de modelos, selecione **SQL Server** na lista suspensa fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="c07d0-158">In the data step of the Model Builder tool, select **SQL Server** from the data source dropdown.</span></span>
1. <span data-ttu-id="c07d0-159">Selecione o botão ao lado da caixa de texto **conectar ao SQL Server banco de dados** .</span><span class="sxs-lookup"><span data-stu-id="c07d0-159">Select the button next to the **Connect to SQL Server database** text box.</span></span>
    1. <span data-ttu-id="c07d0-160">Na caixa de diálogo **escolher dados** , selecione **Microsoft SQL Server arquivo de banco**.</span><span class="sxs-lookup"><span data-stu-id="c07d0-160">In the **Choose Data** dialog, select **Microsoft SQL Server Database File**.</span></span>
    1. <span data-ttu-id="c07d0-161">Desmarque a caixa de seleção **sempre usar esta seleção** e selecione **continuar**.</span><span class="sxs-lookup"><span data-stu-id="c07d0-161">Uncheck the **Always use this selection** checkbox and select **Continue**.</span></span>
    1. <span data-ttu-id="c07d0-162">Na caixa de diálogo **Propriedades da conexão** , selecione **procurar** e selecione o arquivo *RestaurantScores. MDF* baixado.</span><span class="sxs-lookup"><span data-stu-id="c07d0-162">In the **Connection Properties** dialog, select **Browse** and select the downloaded *RestaurantScores.mdf* file.</span></span>
    1. <span data-ttu-id="c07d0-163">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="c07d0-163">Select **OK**.</span></span>
1. <span data-ttu-id="c07d0-164">Escolha **violações** na lista suspensa **nome da tabela** .</span><span class="sxs-lookup"><span data-stu-id="c07d0-164">Choose **Violations** from the **Table Name** dropdown.</span></span>
1. <span data-ttu-id="c07d0-165">Escolha **RiskCategory** na **coluna para prever (rótulo)** DropDown.</span><span class="sxs-lookup"><span data-stu-id="c07d0-165">Choose **RiskCategory** in the **Column to Predict (Label)** dropdown.</span></span>
1. <span data-ttu-id="c07d0-166">Deixe as seleções de coluna padrão, **inspeções de inspeção** e **ViolationDescription**, marcadas na lista suspensa **colunas de entrada (recursos)** .</span><span class="sxs-lookup"><span data-stu-id="c07d0-166">Leave the default column selections, **InspectionType** and **ViolationDescription**, checked in the **Input Columns (Features)** dropdown.</span></span>
1. <span data-ttu-id="c07d0-167">Selecione o link **treinar** para mover para a próxima etapa no construtor de modelos.</span><span class="sxs-lookup"><span data-stu-id="c07d0-167">Select the **Train** link to move to the next step in Model Builder.</span></span>

## <a name="train-the-model"></a><span data-ttu-id="c07d0-168">Treinar o modelo</span><span class="sxs-lookup"><span data-stu-id="c07d0-168">Train the model</span></span>

<span data-ttu-id="c07d0-169">A tarefa de aprendizado de máquina usada para treinar o modelo de classificação de problemas neste tutorial é classificação multiclasse.</span><span class="sxs-lookup"><span data-stu-id="c07d0-169">The machine learning task used to train the issue classification model in this tutorial is multiclass classification.</span></span> <span data-ttu-id="c07d0-170">Durante o processo de treinamento do modelo, o construtor de modelos treina modelos separados usando diferentes algoritmos de classificação multiclasse e configurações para encontrar o melhor modelo de desempenho para seu conjunto de seus.</span><span class="sxs-lookup"><span data-stu-id="c07d0-170">During the model training process, Model Builder trains separate models using different multiclass classification algorithms and settings to find the best performing model for your dataset.</span></span>

<span data-ttu-id="c07d0-171">O tempo necessário para o modelo treinar é proporcional à quantidade de dados.</span><span class="sxs-lookup"><span data-stu-id="c07d0-171">The time required for the model to train is proportional to the amount of data.</span></span> <span data-ttu-id="c07d0-172">O construtor de modelos seleciona automaticamente um valor padrão para o **tempo de treinamento (segundos)** com base no tamanho da fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="c07d0-172">Model Builder automatically selects a default value for **Time to train (seconds)** based on the size of your data source.</span></span>

1. <span data-ttu-id="c07d0-173">Embora o construtor de modelos defina o valor de **tempo para treinar (segundos)** como 10 segundos, aumente-o para 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="c07d0-173">Although Model Builder sets the value of **Time to train (seconds)** to 10 seconds, increase it to 30 seconds.</span></span> <span data-ttu-id="c07d0-174">O treinamento para um período de tempo maior permite que o construtor de modelos Explore um número maior de algoritmos e uma combinação de parâmetros na pesquisa do melhor modelo.</span><span class="sxs-lookup"><span data-stu-id="c07d0-174">Training for a longer period of time allows Model Builder to explore a larger number of algorithms and combination of parameters in search of the best model.</span></span>
1. <span data-ttu-id="c07d0-175">Selecione **Iniciar Treinamento**.</span><span class="sxs-lookup"><span data-stu-id="c07d0-175">Select **Start Training**.</span></span>

    <span data-ttu-id="c07d0-176">Durante o processo de treinamento, os dados de progresso são exibidos na seção `Progress` da etapa de treinamento.</span><span class="sxs-lookup"><span data-stu-id="c07d0-176">Throughout the training process, progress data is displayed in the `Progress` section of the train step.</span></span>

    - <span data-ttu-id="c07d0-177">**Status** exibe o status de conclusão do processo de treinamento.</span><span class="sxs-lookup"><span data-stu-id="c07d0-177">**Status** displays the completion status of the training process.</span></span>
    - <span data-ttu-id="c07d0-178">A **melhor precisão** exibe a precisão do melhor modelo de desempenho encontrado pelo construtor de modelos até o momento.</span><span class="sxs-lookup"><span data-stu-id="c07d0-178">**Best accuracy** displays the accuracy of the best performing model found by Model Builder so far.</span></span> <span data-ttu-id="c07d0-179">Maior precisão significa que o modelo é previsto mais corretamente nos dados de teste.</span><span class="sxs-lookup"><span data-stu-id="c07d0-179">Higher accuracy means the model predicted more correctly on test data.</span></span>
    - <span data-ttu-id="c07d0-180">**Melhor algoritmo** exibe o nome do algoritmo de melhor desempenho encontrado pelo construtor de modelos até o momento.</span><span class="sxs-lookup"><span data-stu-id="c07d0-180">**Best algorithm** displays the name of the best-performing algorithm found by Model Builder so far.</span></span>
    - <span data-ttu-id="c07d0-181">**Último algoritmo** exibe o nome do algoritmo usado mais recentemente pelo construtor de modelos para treinar o modelo.</span><span class="sxs-lookup"><span data-stu-id="c07d0-181">**Last algorithm** displays the name of the algorithm most recently used by Model Builder to train the model.</span></span>

1. <span data-ttu-id="c07d0-182">Quando o treinamento estiver concluído, selecione o link **avaliar** para passar para a próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="c07d0-182">Once training is complete, select the **Evaluate** link to move to the next step.</span></span>

## <a name="evaluate-the-model"></a><span data-ttu-id="c07d0-183">Avaliar o modelo</span><span class="sxs-lookup"><span data-stu-id="c07d0-183">Evaluate the model</span></span>

<span data-ttu-id="c07d0-184">O resultado da etapa de treinamento é um modelo que tinha o melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="c07d0-184">The result of the training step is the one model that had the best performance.</span></span> <span data-ttu-id="c07d0-185">Na etapa avaliar do construtor de modelos, a seção saída contém o algoritmo usado pelo melhor modelo de desempenho na melhor entrada de **modelo** , juntamente com as métricas na **melhor precisão do modelo**.</span><span class="sxs-lookup"><span data-stu-id="c07d0-185">In the evaluate step of Model Builder, the output section contains the algorithm used by the best performing model in the **Best Model** entry along with metrics in **Best Model Accuracy**.</span></span> <span data-ttu-id="c07d0-186">Além disso, uma tabela de resumo que contém até cinco modelos que foram explorados e suas métricas são exibidas.</span><span class="sxs-lookup"><span data-stu-id="c07d0-186">Additionally, a summary table containing up to five models that were explored and their metrics is displayed.</span></span>

<span data-ttu-id="c07d0-187">Se você não estiver satisfeito com suas métricas de precisão, algumas maneiras fáceis de tentar melhorar a precisão do modelo são aumentar a quantidade de tempo para treinar o modelo ou usar mais dados.</span><span class="sxs-lookup"><span data-stu-id="c07d0-187">If you're not satisfied with your accuracy metrics, some easy ways to try to improve model accuracy are to increase the amount of time to train the model or use more data.</span></span> <span data-ttu-id="c07d0-188">Caso contrário, selecione o link de **código** para mover para a etapa final no construtor de modelos.</span><span class="sxs-lookup"><span data-stu-id="c07d0-188">Otherwise, select the **code** link to move to the final step in Model Builder.</span></span>

## <a name="add-the-code-to-make-predictions"></a><span data-ttu-id="c07d0-189">Adicionar o código para fazer previsões</span><span class="sxs-lookup"><span data-stu-id="c07d0-189">Add the code to make predictions</span></span>

<span data-ttu-id="c07d0-190">Dois projetos são criados como resultado do processo de treinamento.</span><span class="sxs-lookup"><span data-stu-id="c07d0-190">Two projects are created as a result of the training process.</span></span>

- <span data-ttu-id="c07d0-191">RestaurantViolationsML. ConsoleApp: um C# aplicativo de console do .NET Core que contém o treinamento do modelo e o código de consumo de exemplo.</span><span class="sxs-lookup"><span data-stu-id="c07d0-191">RestaurantViolationsML.ConsoleApp: A C# .NET Core Console application that contains the model training and sample consumption code.</span></span>
- <span data-ttu-id="c07d0-192">RestaurantViolationsML. Model: um .NET Standard biblioteca de classes que contém os modelos de dados que definem o esquema de dados de modelo de entrada e saída, a versão salva do modelo de melhor desempenho durante o treinamento e uma classe auxiliar chamada `ConsumeModel` para fazer previsões.</span><span class="sxs-lookup"><span data-stu-id="c07d0-192">RestaurantViolationsML.Model: A .NET Standard class library containing the data models that define the schema of input and output model data, the saved version of the best performing model during training, and a helper class called `ConsumeModel` to make predictions.</span></span>

1. <span data-ttu-id="c07d0-193">Na etapa de código do construtor de modelos, selecione **adicionar projetos** para adicionar os projetos gerados automaticamente à solução.</span><span class="sxs-lookup"><span data-stu-id="c07d0-193">In the code step of Model Builder, select **Add Projects** to add the autogenerated projects to the solution.</span></span>
1. <span data-ttu-id="c07d0-194">Abra o arquivo *Program.cs* no projeto *RestaurantViolations* .</span><span class="sxs-lookup"><span data-stu-id="c07d0-194">Open the *Program.cs* file in the *RestaurantViolations* project.</span></span>
1. <span data-ttu-id="c07d0-195">Adicione a seguinte instrução using para fazer referência ao projeto *RestaurantViolationsML. Model* :</span><span class="sxs-lookup"><span data-stu-id="c07d0-195">Add the following using statement to reference the *RestaurantViolationsML.Model* project:</span></span>

    [!code-csharp [ProgramUsings](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L2)]

1. <span data-ttu-id="c07d0-196">Para fazer uma previsão sobre novos dados usando o modelo, crie uma nova instância da classe `ModelInput` dentro do método `Main` do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c07d0-196">To make a prediction on new data using the model, create a new instance of the `ModelInput` class inside the `Main` method of your application.</span></span> <span data-ttu-id="c07d0-197">Observe que a categoria de risco não faz parte da entrada.</span><span class="sxs-lookup"><span data-stu-id="c07d0-197">Notice that the risk category is not part of the input.</span></span> <span data-ttu-id="c07d0-198">Isso ocorre porque o modelo gera a previsão para ela.</span><span class="sxs-lookup"><span data-stu-id="c07d0-198">This is because the model generates the prediction for it.</span></span>

    [!code-csharp [TestData](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L11-L15)]

1. <span data-ttu-id="c07d0-199">Use o método `Predict` da classe `ConsumeModel`.</span><span class="sxs-lookup"><span data-stu-id="c07d0-199">Use the `Predict` method from the `ConsumeModel` class.</span></span> <span data-ttu-id="c07d0-200">O método `Predict` carrega o modelo treinado, cria um [`PredictionEngine`](xref:Microsoft.ML.PredictionEngine%602) para o modelo e o usa para fazer previsões sobre novos dados.</span><span class="sxs-lookup"><span data-stu-id="c07d0-200">The `Predict` method loads the trained model, creates a [`PredictionEngine`](xref:Microsoft.ML.PredictionEngine%602) for the model, and uses it to make predictions on new data.</span></span>

    [!code-csharp [Prediction](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L17-L24)]

1. <span data-ttu-id="c07d0-201">Execute o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c07d0-201">Run the application.</span></span>

    <span data-ttu-id="c07d0-202">A saída gerada pelo programa deve ser semelhante ao snippet a seguir:</span><span class="sxs-lookup"><span data-stu-id="c07d0-202">The output generated by the program should look similar to the snippet below:</span></span>

    ```bash
    Inspection Type: Complaint
    Violation Description: Inadequate sewage or wastewater disposal
    Risk Category: Moderate Risk
    ```

<span data-ttu-id="c07d0-203">Se precisar fazer referência aos projetos gerados em um momento posterior dentro de outra solução, você poderá encontrá-los no diretório `C:\Users\%USERNAME%\AppData\Local\Temp\MLVSTools`.</span><span class="sxs-lookup"><span data-stu-id="c07d0-203">If you need to reference the generated projects at a later time inside of another solution, you can find them inside the `C:\Users\%USERNAME%\AppData\Local\Temp\MLVSTools` directory.</span></span>

<span data-ttu-id="c07d0-204">Parabéns!</span><span class="sxs-lookup"><span data-stu-id="c07d0-204">Congratulations!</span></span> <span data-ttu-id="c07d0-205">Você criou com êxito um modelo de aprendizado de máquina para categorizar o risco de violações de integridade usando o construtor de modelos.</span><span class="sxs-lookup"><span data-stu-id="c07d0-205">You've successfully built a machine learning model to categorize the risk of health violations using Model Builder.</span></span> <span data-ttu-id="c07d0-206">Você pode encontrar o código-fonte deste tutorial no repositório do GitHub [dotnet/MachineLearning-Samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) .</span><span class="sxs-lookup"><span data-stu-id="c07d0-206">You can find the source code for this tutorial at the [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) GitHub repository.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="c07d0-207">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="c07d0-207">Additional resources</span></span>

<span data-ttu-id="c07d0-208">Para saber mais sobre os tópicos mencionados neste tutorial, visite os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="c07d0-208">To learn more about topics mentioned in this tutorial, visit the following resources:</span></span>

- [<span data-ttu-id="c07d0-209">Cenários do Construtor de Modelo</span><span class="sxs-lookup"><span data-stu-id="c07d0-209">Model Builder Scenarios</span></span>](../automate-training-with-model-builder.md#scenarios)
- [<span data-ttu-id="c07d0-210">Classificação Multiclasse</span><span class="sxs-lookup"><span data-stu-id="c07d0-210">Multiclass Classification</span></span>](../resources/glossary.md#multiclass-classification)
- [<span data-ttu-id="c07d0-211">Métricas do modelo de classificação multiclasse</span><span class="sxs-lookup"><span data-stu-id="c07d0-211">Multiclass Classification Model Metrics</span></span>](../resources/metrics.md#evaluation-metrics-for-multi-class-classification)
