---
title: 'Tutorial: Classificar violações de saúde com Model Builder'
description: Este tutorial ilustra como construir um modelo de classificação multiclasse usando ML.NET Model Builder para classificar a gravidade da violação da saúde do restaurante em São Francisco.
author: luisquintanilla
ms.author: luquinta
ms.date: 11/21/2019
ms.topic: tutorial
ms.custom: mvc,mlnet-tooling
ms.openlocfilehash: 6a36989f9453208e436ef8a4db2d4440aa0a1382
ms.sourcegitcommit: 2ff49dcf9ddf107d139b4055534681052febad62
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/31/2020
ms.locfileid: "80438186"
---
# <a name="tutorial-classify-the-severity-of-restaurant-health-violations-with-model-builder"></a><span data-ttu-id="00214-103">Tutorial: Classifique a gravidade das violações à saúde do restaurante com o Model Builder</span><span class="sxs-lookup"><span data-stu-id="00214-103">Tutorial: Classify the severity of restaurant health violations with Model Builder</span></span>

<span data-ttu-id="00214-104">Aprenda a construir um modelo de classificação multiclasse usando o Model Builder para categorizar o nível de risco de violações de restaurantes encontrados durante inspeções de saúde.</span><span class="sxs-lookup"><span data-stu-id="00214-104">Learn how to build a multiclass classification model using Model Builder to categorize the risk level of restaurant violations found during health inspections.</span></span>

<span data-ttu-id="00214-105">Neste tutorial, você aprenderá como:</span><span class="sxs-lookup"><span data-stu-id="00214-105">In this tutorial, you learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="00214-106">Preparar e compreender os dados</span><span class="sxs-lookup"><span data-stu-id="00214-106">Prepare and understand the data</span></span>
> - <span data-ttu-id="00214-107">Escolha um cenário</span><span class="sxs-lookup"><span data-stu-id="00214-107">Choose a scenario</span></span>
> - <span data-ttu-id="00214-108">Carregar dados de um banco de dados</span><span class="sxs-lookup"><span data-stu-id="00214-108">Load data from a database</span></span>
> - <span data-ttu-id="00214-109">Treinar o modelo</span><span class="sxs-lookup"><span data-stu-id="00214-109">Train the model</span></span>
> - <span data-ttu-id="00214-110">Avalie o modelo</span><span class="sxs-lookup"><span data-stu-id="00214-110">Evaluate the model</span></span>
> - <span data-ttu-id="00214-111">Usar o modelo para previsões</span><span class="sxs-lookup"><span data-stu-id="00214-111">Use the model for predictions</span></span>

> [!NOTE]
> <span data-ttu-id="00214-112">O Construtor de Modelo está atualmente na Versão Prévia.</span><span class="sxs-lookup"><span data-stu-id="00214-112">Model Builder is currently in Preview.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="00214-113">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="00214-113">Prerequisites</span></span>

<span data-ttu-id="00214-114">Para obter uma lista de pré-requisitos e instruções de instalação, visite o [guia de instalação do Model Builder](../how-to-guides/install-model-builder.md).</span><span class="sxs-lookup"><span data-stu-id="00214-114">For a list of prerequisites and installation instructions, visit the [Model Builder installation guide](../how-to-guides/install-model-builder.md).</span></span>

## <a name="model-builder-multiclass-classification-overview"></a><span data-ttu-id="00214-115">Visão geral da classificação multiclasse do Model Builder</span><span class="sxs-lookup"><span data-stu-id="00214-115">Model Builder multiclass classification overview</span></span>

<span data-ttu-id="00214-116">Esta amostra cria um aplicativo de console C# .NET Core que categoriza o risco de violações à saúde usando um modelo de aprendizado de máquina construído com o Model Builder.</span><span class="sxs-lookup"><span data-stu-id="00214-116">This sample creates a C# .NET Core console application that categorizes the risk of health violations using a machine learning model built with Model Builder.</span></span> <span data-ttu-id="00214-117">Você pode encontrar o código fonte para este tutorial no repositório GitHub [dotnet/machinelearning-samples.](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations)</span><span class="sxs-lookup"><span data-stu-id="00214-117">You can find the source code for this tutorial at the [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) GitHub repository.</span></span>

## <a name="create-a-console-application"></a><span data-ttu-id="00214-118">Criar um aplicativo de console</span><span class="sxs-lookup"><span data-stu-id="00214-118">Create a console application</span></span>

1. <span data-ttu-id="00214-119">Crie um **aplicativo de console C# .NET Core** chamado "RestaurantViolations".</span><span class="sxs-lookup"><span data-stu-id="00214-119">Create a **C# .NET Core console application** called "RestaurantViolations".</span></span> <span data-ttu-id="00214-120">Certifique-se de que **a solução e o projeto place no mesmo diretório** não são **controlados** (VS 2019), ou **Criar diretório para solução** é **verificado** (VS 2017).</span><span class="sxs-lookup"><span data-stu-id="00214-120">Make sure **Place solution and project in the same directory** is **unchecked** (VS 2019), or **Create directory for solution** is **checked** (VS 2017).</span></span>

## <a name="prepare-and-understand-the-data"></a><span data-ttu-id="00214-121">Preparar e compreender os dados</span><span class="sxs-lookup"><span data-stu-id="00214-121">Prepare and understand the data</span></span>

> <span data-ttu-id="00214-122">O conjunto de dados usado para treinar e avaliar o modelo de aprendizagem de máquina é originalmente do [Departamento de Saúde Pública de São Francisco.](https://www.sfdph.org/dph/EH/Food/score/default.asp)</span><span class="sxs-lookup"><span data-stu-id="00214-122">The data set used to train and evaluate the machine learning model is originally from the [San Francisco Department of Public Health Restaurant Safety Scores](https://www.sfdph.org/dph/EH/Food/score/default.asp).</span></span> <span data-ttu-id="00214-123">Por conveniência, o conjunto de dados foi condensado para incluir apenas as colunas relevantes para treinar o modelo e fazer previsões.</span><span class="sxs-lookup"><span data-stu-id="00214-123">For convenience, the dataset has been condensed to only include the columns relevant to train the model and make predictions.</span></span> <span data-ttu-id="00214-124">Visite o site a seguir para saber mais sobre o [conjunto de dados](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i?row_index=0).</span><span class="sxs-lookup"><span data-stu-id="00214-124">Visit the following website to learn more about the [dataset](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i?row_index=0).</span></span>

<span data-ttu-id="00214-125">[Baixe o conjunto de dados Restaurant Safety Scores](https://github.com/luisquintanilla/machinelearning-samples/raw/AB1608219/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantScores.zip) e descompacte-o.</span><span class="sxs-lookup"><span data-stu-id="00214-125">[Download the Restaurant Safety Scores dataset](https://github.com/luisquintanilla/machinelearning-samples/raw/AB1608219/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantScores.zip) and unzip it.</span></span>

<span data-ttu-id="00214-126">Cada linha do conjunto de dados contém informações sobre violações observadas durante uma inspeção do Departamento de Saúde e uma avaliação de risco da ameaça que essas violações apresentam à saúde e segurança pública.</span><span class="sxs-lookup"><span data-stu-id="00214-126">Each row in the dataset contains information regarding violations observed during an inspection from the Health Department and a risk assessment of the threat those violations present to public health and safety.</span></span>

| <span data-ttu-id="00214-127">Tipo de inspeção</span><span class="sxs-lookup"><span data-stu-id="00214-127">InspectionType</span></span> | <span data-ttu-id="00214-128">ViolaçãoDescriçãoDescrição</span><span class="sxs-lookup"><span data-stu-id="00214-128">ViolationDescription</span></span> | <span data-ttu-id="00214-129">Categoria de Risco</span><span class="sxs-lookup"><span data-stu-id="00214-129">RiskCategory</span></span> |
| --- | --- | --- |
| <span data-ttu-id="00214-130">Rotina - Não programada</span><span class="sxs-lookup"><span data-stu-id="00214-130">Routine - Unscheduled</span></span> | <span data-ttu-id="00214-131">Superfícies de contato com alimentos inadequadamente limpos ou higienizados</span><span class="sxs-lookup"><span data-stu-id="00214-131">Inadequately cleaned or sanitized food contact surfaces</span></span> | <span data-ttu-id="00214-132">Risco Moderado</span><span class="sxs-lookup"><span data-stu-id="00214-132">Moderate Risk</span></span> |
| <span data-ttu-id="00214-133">Nova Propriedade</span><span class="sxs-lookup"><span data-stu-id="00214-133">New Ownership</span></span> | <span data-ttu-id="00214-134">Infestação de vermes de alto risco</span><span class="sxs-lookup"><span data-stu-id="00214-134">High risk vermin infestation</span></span> | <span data-ttu-id="00214-135">Alto Risco</span><span class="sxs-lookup"><span data-stu-id="00214-135">High Risk</span></span> |
| <span data-ttu-id="00214-136">Rotina - Não programada</span><span class="sxs-lookup"><span data-stu-id="00214-136">Routine - Unscheduled</span></span> | <span data-ttu-id="00214-137">Enxugando panos não limpos ou armazenados corretamente ou desinfetante inadequado</span><span class="sxs-lookup"><span data-stu-id="00214-137">Wiping cloths not clean or properly stored or inadequate sanitizer</span></span> | <span data-ttu-id="00214-138">Baixo Risco</span><span class="sxs-lookup"><span data-stu-id="00214-138">Low Risk</span></span> |

- <span data-ttu-id="00214-139">**Tipo de inspeção**: o tipo de inspeção.</span><span class="sxs-lookup"><span data-stu-id="00214-139">**InspectionType**: the type of inspection.</span></span> <span data-ttu-id="00214-140">Isso pode ser uma inspeção pela primeira vez para um novo estabelecimento, uma inspeção de rotina, uma inspeção de reclamações e muitos outros tipos.</span><span class="sxs-lookup"><span data-stu-id="00214-140">This can either be a first-time inspection for a new establishment, a routine inspection, a complaint inspection, and many other types.</span></span>
- <span data-ttu-id="00214-141">**Descrição da violação:** uma descrição da violação encontrada durante a inspeção.</span><span class="sxs-lookup"><span data-stu-id="00214-141">**ViolationDescription**: a description of the violation found during inspection.</span></span>
- <span data-ttu-id="00214-142">**Categoria de Risco**: a gravidade do risco que uma violação representa para a saúde pública e a segurança.</span><span class="sxs-lookup"><span data-stu-id="00214-142">**RiskCategory**: the risk severity a violation poses to public health and safety.</span></span>

<span data-ttu-id="00214-143">O `label` é a coluna que você deseja prever.</span><span class="sxs-lookup"><span data-stu-id="00214-143">The `label` is the column you want to predict.</span></span> <span data-ttu-id="00214-144">Ao executar uma tarefa de classificação, o objetivo é atribuir uma categoria (texto ou numérico).</span><span class="sxs-lookup"><span data-stu-id="00214-144">When performing a classification task, the goal is to assign a category (text or numerical).</span></span> <span data-ttu-id="00214-145">Nesse cenário de classificação, a gravidade da violação é atribuída ao valor de baixo, moderado ou alto risco.</span><span class="sxs-lookup"><span data-stu-id="00214-145">In this classification scenario, the severity of the violation is assigned the value of low, moderate, or high risk.</span></span> <span data-ttu-id="00214-146">Portanto, a **Categoria de Risco** é o rótulo.</span><span class="sxs-lookup"><span data-stu-id="00214-146">Therefore, the **RiskCategory** is the label.</span></span> <span data-ttu-id="00214-147">São `features` as entradas que você dá `label`ao modelo para prever o .</span><span class="sxs-lookup"><span data-stu-id="00214-147">The `features` are the inputs you give the model to predict the `label`.</span></span> <span data-ttu-id="00214-148">Neste caso, o **InspectionType** e **o ViolationDescription** são usados como recursos ou entradas para prever a **Categoria de Risco**.</span><span class="sxs-lookup"><span data-stu-id="00214-148">In this case, the **InspectionType** and **ViolationDescription** are used as features or inputs to predict the **RiskCategory**.</span></span>

## <a name="choose-a-scenario"></a><span data-ttu-id="00214-149">Escolha um cenário</span><span class="sxs-lookup"><span data-stu-id="00214-149">Choose a scenario</span></span>

![Assistente do Construtor de Modelos no Visual Studio](./media/sentiment-analysis-model-builder/model-builder-screen.png)

<span data-ttu-id="00214-151">Para treinar seu modelo, selecione na lista de cenários de aprendizado de máquina disponíveis fornecidos pelo Model Builder.</span><span class="sxs-lookup"><span data-stu-id="00214-151">To train your model, select from the list of available machine learning scenarios provided by Model Builder.</span></span> <span data-ttu-id="00214-152">Neste caso, o cenário é *Classificação de Problemas*.</span><span class="sxs-lookup"><span data-stu-id="00214-152">In this case, the scenario is *Issue Classification*.</span></span>

1. <span data-ttu-id="00214-153">No **Solution Explorer,** clique com o botão direito do mouse no projeto *RestaurantViolações* e selecione **Adicionar** > **aprendizado de máquina**.</span><span class="sxs-lookup"><span data-stu-id="00214-153">In **Solution Explorer**, right-click the *RestaurantViolations* project, and select **Add** > **Machine Learning**.</span></span>
1. <span data-ttu-id="00214-154">Para esta amostra, o cenário é a classificação multiclasse.</span><span class="sxs-lookup"><span data-stu-id="00214-154">For this sample, the scenario is multiclass classification.</span></span> <span data-ttu-id="00214-155">Na etapa *de cenário* do Model Builder, selecione o cenário **classificação de** problemas.</span><span class="sxs-lookup"><span data-stu-id="00214-155">In the *Scenario* step of Model Builder, select the **Issue Classification** scenario.</span></span>

## <a name="load-the-data"></a><span data-ttu-id="00214-156">Carregar os dados</span><span class="sxs-lookup"><span data-stu-id="00214-156">Load the data</span></span>

<span data-ttu-id="00214-157">O Model Builder aceita dados de um banco de `csv` `tsv` dados SQL Server ou de um arquivo local dentro ou em formato.</span><span class="sxs-lookup"><span data-stu-id="00214-157">Model Builder accepts data from a SQL Server database or a local file in `csv` or `tsv` format.</span></span>

1. <span data-ttu-id="00214-158">Na etapa de dados da ferramenta Model Builder, selecione **SQL Server** a partir da gota de origem de dados.</span><span class="sxs-lookup"><span data-stu-id="00214-158">In the data step of the Model Builder tool, select **SQL Server** from the data source dropdown.</span></span>
1. <span data-ttu-id="00214-159">Selecione o botão ao lado da caixa de texto **do banco de dados Connect to SQL Server.**</span><span class="sxs-lookup"><span data-stu-id="00214-159">Select the button next to the **Connect to SQL Server database** text box.</span></span>
    1. <span data-ttu-id="00214-160">Na caixa de diálogo **Escolher dados,** selecione **O arquivo de banco de dados do Microsoft SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="00214-160">In the **Choose Data** dialog, select **Microsoft SQL Server Database File**.</span></span>
    1. <span data-ttu-id="00214-161">Desmarque o Use sempre esta caixa **de seleção** e selecione **Continuar**.</span><span class="sxs-lookup"><span data-stu-id="00214-161">Uncheck the **Always use this selection** checkbox and select **Continue**.</span></span>
    1. <span data-ttu-id="00214-162">Na caixa de diálogo Propriedades de **conexão,** **selecione Procurar** e selecione o arquivo *RestaurantScores.mdf* baixado.</span><span class="sxs-lookup"><span data-stu-id="00214-162">In the **Connection Properties** dialog, select **Browse** and select the downloaded *RestaurantScores.mdf* file.</span></span>
    1. <span data-ttu-id="00214-163">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="00214-163">Select **OK**.</span></span>
1. <span data-ttu-id="00214-164">Escolha **Violações** na estada **nome da tabela.**</span><span class="sxs-lookup"><span data-stu-id="00214-164">Choose **Violations** from the **Table Name** dropdown.</span></span>
1. <span data-ttu-id="00214-165">Escolha **RiscoCategoria** na **coluna para prever (rótulo)** a gota.</span><span class="sxs-lookup"><span data-stu-id="00214-165">Choose **RiskCategory** in the **Column to Predict (Label)** dropdown.</span></span>
1. <span data-ttu-id="00214-166">Deixe as seleções de coluna padrão, **InspectionType** e **ViolationDescription**, verificadas na parada **Colunas de entrada (Recursos).**</span><span class="sxs-lookup"><span data-stu-id="00214-166">Leave the default column selections, **InspectionType** and **ViolationDescription**, checked in the **Input Columns (Features)** dropdown.</span></span>
1. <span data-ttu-id="00214-167">Selecione o link **Trem** para passar para a próxima etapa do Model Builder.</span><span class="sxs-lookup"><span data-stu-id="00214-167">Select the **Train** link to move to the next step in Model Builder.</span></span>

## <a name="train-the-model"></a><span data-ttu-id="00214-168">Treinar o modelo</span><span class="sxs-lookup"><span data-stu-id="00214-168">Train the model</span></span>

<span data-ttu-id="00214-169">A tarefa de aprendizado de máquina usada para treinar o modelo de classificação de problemas neste tutorial é a classificação multiclasse.</span><span class="sxs-lookup"><span data-stu-id="00214-169">The machine learning task used to train the issue classification model in this tutorial is multiclass classification.</span></span> <span data-ttu-id="00214-170">Durante o processo de treinamento do modelo, o Model Builder treina modelos separados usando diferentes algoritmos de classificação multiclasse e configurações para encontrar o modelo de melhor desempenho para o seu conjunto de dados.</span><span class="sxs-lookup"><span data-stu-id="00214-170">During the model training process, Model Builder trains separate models using different multiclass classification algorithms and settings to find the best performing model for your dataset.</span></span>

<span data-ttu-id="00214-171">O tempo necessário para o modelo treinar é proporcional à quantidade de dados.</span><span class="sxs-lookup"><span data-stu-id="00214-171">The time required for the model to train is proportional to the amount of data.</span></span> <span data-ttu-id="00214-172">O Model Builder seleciona automaticamente um valor padrão para **tempo de treinar (segundos)** com base no tamanho da fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="00214-172">Model Builder automatically selects a default value for **Time to train (seconds)** based on the size of your data source.</span></span>

1. <span data-ttu-id="00214-173">Embora o Model Builder defina o valor do **Tempo para treinar (segundos)** para 10 segundos, aumente-o para 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="00214-173">Although Model Builder sets the value of **Time to train (seconds)** to 10 seconds, increase it to 30 seconds.</span></span> <span data-ttu-id="00214-174">O treinamento por um período maior de tempo permite ao Model Builder explorar um número maior de algoritmos e combinação de parâmetros em busca do melhor modelo.</span><span class="sxs-lookup"><span data-stu-id="00214-174">Training for a longer period of time allows Model Builder to explore a larger number of algorithms and combination of parameters in search of the best model.</span></span>
1. <span data-ttu-id="00214-175">Selecione **Iniciar Treinamento**.</span><span class="sxs-lookup"><span data-stu-id="00214-175">Select **Start Training**.</span></span>

    <span data-ttu-id="00214-176">Durante o processo de treinamento, os dados de progresso são exibidos na seção `Progress` da etapa de treinamento.</span><span class="sxs-lookup"><span data-stu-id="00214-176">Throughout the training process, progress data is displayed in the `Progress` section of the train step.</span></span>

    - <span data-ttu-id="00214-177">**O status** exibe o status de conclusão do processo de treinamento.</span><span class="sxs-lookup"><span data-stu-id="00214-177">**Status** displays the completion status of the training process.</span></span>
    - <span data-ttu-id="00214-178">**A melhor precisão** mostra a precisão do modelo de melhor desempenho encontrado pelo Model Builder até agora.</span><span class="sxs-lookup"><span data-stu-id="00214-178">**Best accuracy** displays the accuracy of the best performing model found by Model Builder so far.</span></span> <span data-ttu-id="00214-179">Maior precisão significa que o modelo é previsto mais corretamente nos dados de teste.</span><span class="sxs-lookup"><span data-stu-id="00214-179">Higher accuracy means the model predicted more correctly on test data.</span></span>
    - <span data-ttu-id="00214-180">**O melhor algoritmo** exibe o nome do algoritmo de melhor desempenho encontrado pelo Model Builder até agora.</span><span class="sxs-lookup"><span data-stu-id="00214-180">**Best algorithm** displays the name of the best-performing algorithm found by Model Builder so far.</span></span>
    - <span data-ttu-id="00214-181">**O último algoritmo** exibe o nome do algoritmo mais recentemente usado pelo Model Builder para treinar o modelo.</span><span class="sxs-lookup"><span data-stu-id="00214-181">**Last algorithm** displays the name of the algorithm most recently used by Model Builder to train the model.</span></span>

1. <span data-ttu-id="00214-182">Uma vez que o treinamento esteja concluído, selecione o link **Avaliar** para passar para a próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="00214-182">Once training is complete, select the **Evaluate** link to move to the next step.</span></span>

## <a name="evaluate-the-model"></a><span data-ttu-id="00214-183">Avalie o modelo</span><span class="sxs-lookup"><span data-stu-id="00214-183">Evaluate the model</span></span>

<span data-ttu-id="00214-184">O resultado da etapa de treinamento é o modelo que teve o melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="00214-184">The result of the training step is the one model that had the best performance.</span></span> <span data-ttu-id="00214-185">Na etapa de avaliação do Model Builder, a seção de saída contém o algoritmo usado pelo modelo de melhor desempenho na entrada **Do Melhor Modelo,** juntamente com as métricas em **Melhor Precisão de Modelo**.</span><span class="sxs-lookup"><span data-stu-id="00214-185">In the evaluate step of Model Builder, the output section contains the algorithm used by the best performing model in the **Best Model** entry along with metrics in **Best Model Accuracy**.</span></span> <span data-ttu-id="00214-186">Além disso, uma tabela de resumo contendo até cinco modelos que foram explorados e suas métricas é exibida.</span><span class="sxs-lookup"><span data-stu-id="00214-186">Additionally, a summary table containing up to five models that were explored and their metrics is displayed.</span></span>

<span data-ttu-id="00214-187">Se você não está satisfeito com suas métricas de precisão, algumas maneiras fáceis de tentar melhorar a precisão do modelo são aumentar o tempo para treinar o modelo ou usar mais dados.</span><span class="sxs-lookup"><span data-stu-id="00214-187">If you're not satisfied with your accuracy metrics, some easy ways to try to improve model accuracy are to increase the amount of time to train the model or use more data.</span></span> <span data-ttu-id="00214-188">Caso contrário, selecione o link **de código** para passar para a etapa final do Model Builder.</span><span class="sxs-lookup"><span data-stu-id="00214-188">Otherwise, select the **code** link to move to the final step in Model Builder.</span></span>

## <a name="add-the-code-to-make-predictions"></a><span data-ttu-id="00214-189">Adicionar o código para fazer previsões</span><span class="sxs-lookup"><span data-stu-id="00214-189">Add the code to make predictions</span></span>

<span data-ttu-id="00214-190">Dois projetos são criados como resultado do processo de treinamento.</span><span class="sxs-lookup"><span data-stu-id="00214-190">Two projects are created as a result of the training process.</span></span>

- <span data-ttu-id="00214-191">RestaurantViolaçõesML.ConsoleApp: Um aplicativo C# .NET Core Console que contém o código de treinamento do modelo e o código de consumo de amostras.</span><span class="sxs-lookup"><span data-stu-id="00214-191">RestaurantViolationsML.ConsoleApp: A C# .NET Core Console application that contains the model training and sample consumption code.</span></span>
- <span data-ttu-id="00214-192">RestaurantViolationsML.Model: Uma biblioteca de classe .NET Standard contendo os modelos de dados que definem o esquema de dados do modelo `ConsumeModel` de entrada e saída, a versão salva do modelo de melhor desempenho durante o treinamento e uma classe auxiliar chamada para fazer previsões.</span><span class="sxs-lookup"><span data-stu-id="00214-192">RestaurantViolationsML.Model: A .NET Standard class library containing the data models that define the schema of input and output model data, the saved version of the best performing model during training, and a helper class called `ConsumeModel` to make predictions.</span></span>

1. <span data-ttu-id="00214-193">Na etapa de código do Model Builder, selecione **Adicionar projetos** para adicionar os projetos gerados automaticamente à solução.</span><span class="sxs-lookup"><span data-stu-id="00214-193">In the code step of Model Builder, select **Add Projects** to add the autogenerated projects to the solution.</span></span>
1. <span data-ttu-id="00214-194">Abra o arquivo *Program.cs* no projeto *RestaurantViolations.*</span><span class="sxs-lookup"><span data-stu-id="00214-194">Open the *Program.cs* file in the *RestaurantViolations* project.</span></span>
1. <span data-ttu-id="00214-195">Adicione a seguinte declaração usando para referenciar o projeto *RestaurantViolationsML.Model:*</span><span class="sxs-lookup"><span data-stu-id="00214-195">Add the following using statement to reference the *RestaurantViolationsML.Model* project:</span></span>

    [!code-csharp [ProgramUsings](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L2)]

1. <span data-ttu-id="00214-196">Para fazer uma previsão sobre novos dados usando o `ModelInput` modelo, `Main` crie uma nova instância da classe dentro do método de sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="00214-196">To make a prediction on new data using the model, create a new instance of the `ModelInput` class inside the `Main` method of your application.</span></span> <span data-ttu-id="00214-197">Observe que a categoria de risco não faz parte da entrada.</span><span class="sxs-lookup"><span data-stu-id="00214-197">Notice that the risk category is not part of the input.</span></span> <span data-ttu-id="00214-198">Isso porque o modelo gera a previsão para ele.</span><span class="sxs-lookup"><span data-stu-id="00214-198">This is because the model generates the prediction for it.</span></span>

    [!code-csharp [TestData](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L11-L15)]

1. <span data-ttu-id="00214-199">Use `Predict` o método `ConsumeModel` da classe.</span><span class="sxs-lookup"><span data-stu-id="00214-199">Use the `Predict` method from the `ConsumeModel` class.</span></span> <span data-ttu-id="00214-200">O `Predict` método carrega o modelo [`PredictionEngine`](xref:Microsoft.ML.PredictionEngine%602) treinado, cria um para o modelo e o usa para fazer previsões sobre novos dados.</span><span class="sxs-lookup"><span data-stu-id="00214-200">The `Predict` method loads the trained model, creates a [`PredictionEngine`](xref:Microsoft.ML.PredictionEngine%602) for the model, and uses it to make predictions on new data.</span></span>

    [!code-csharp [Prediction](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L17-L24)]

1. <span data-ttu-id="00214-201">Execute o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="00214-201">Run the application.</span></span>

    <span data-ttu-id="00214-202">A saída gerada pelo programa deve ser semelhante ao snippet a seguir:</span><span class="sxs-lookup"><span data-stu-id="00214-202">The output generated by the program should look similar to the snippet below:</span></span>

    ```bash
    Inspection Type: Complaint
    Violation Description: Inadequate sewage or wastewater disposal
    Risk Category: Moderate Risk
    ```

<span data-ttu-id="00214-203">Se precisar fazer referência aos projetos gerados em um momento posterior dentro de outra solução, você poderá encontrá-los no diretório `C:\Users\%USERNAME%\AppData\Local\Temp\MLVSTools`.</span><span class="sxs-lookup"><span data-stu-id="00214-203">If you need to reference the generated projects at a later time inside of another solution, you can find them inside the `C:\Users\%USERNAME%\AppData\Local\Temp\MLVSTools` directory.</span></span>

<span data-ttu-id="00214-204">Parabéns!</span><span class="sxs-lookup"><span data-stu-id="00214-204">Congratulations!</span></span> <span data-ttu-id="00214-205">Você construiu com sucesso um modelo de aprendizado de máquina para categorizar o risco de violações à saúde usando o Model Builder.</span><span class="sxs-lookup"><span data-stu-id="00214-205">You've successfully built a machine learning model to categorize the risk of health violations using Model Builder.</span></span> <span data-ttu-id="00214-206">Você pode encontrar o código fonte para este tutorial no repositório GitHub [dotnet/machinelearning-samples.](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations)</span><span class="sxs-lookup"><span data-stu-id="00214-206">You can find the source code for this tutorial at the [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) GitHub repository.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="00214-207">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="00214-207">Additional resources</span></span>

<span data-ttu-id="00214-208">Para saber mais sobre os tópicos mencionados neste tutorial, visite os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="00214-208">To learn more about topics mentioned in this tutorial, visit the following resources:</span></span>

- [<span data-ttu-id="00214-209">Cenários do Construtor de Modelo</span><span class="sxs-lookup"><span data-stu-id="00214-209">Model Builder Scenarios</span></span>](../automate-training-with-model-builder.md#scenario)
- [<span data-ttu-id="00214-210">Classificação multiclasse</span><span class="sxs-lookup"><span data-stu-id="00214-210">Multiclass Classification</span></span>](../resources/glossary.md#multiclass-classification)
- [<span data-ttu-id="00214-211">Métricas do modelo de classificação multiclasse</span><span class="sxs-lookup"><span data-stu-id="00214-211">Multiclass Classification Model Metrics</span></span>](../resources/metrics.md#evaluation-metrics-for-multi-class-classification)
