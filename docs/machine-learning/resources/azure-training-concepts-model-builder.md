---
title: Recursos de treinamento do Azure do Model Builder
description: Um guia de recursos para Azure Machine Learning
ms.topic: reference
ms.date: 06/01/2020
ms.author: luquinta
author: luisquintanilla
ms.openlocfilehash: d9eb5560ef33f8f80dbe53e17087c606a8697378
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/02/2020
ms.locfileid: "84289467"
---
# <a name="model-builder-azure-training-resources"></a><span data-ttu-id="0c3d0-103">Recursos de treinamento do Azure do Model Builder</span><span class="sxs-lookup"><span data-stu-id="0c3d0-103">Model Builder Azure Training Resources</span></span>

<span data-ttu-id="0c3d0-104">Veja a seguir um guia para ajudá-lo a saber mais sobre os recursos usados para treinar modelos no Azure com o construtor de modelos.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-104">The following is a guide to help you learn more about resources used to train models in Azure with Model Builder.</span></span>

## <a name="what-is-an-azure-machine-learning-experiment"></a><span data-ttu-id="0c3d0-105">O que é um experimento Azure Machine Learning?</span><span class="sxs-lookup"><span data-stu-id="0c3d0-105">What is an Azure Machine Learning experiment?</span></span>

<span data-ttu-id="0c3d0-106">Um experimento de Azure Machine Learning é um recurso que precisa ser criado antes de executar o treinamento do construtor de modelos no Azure.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-106">An Azure Machine Learning experiment is a resource that needs to be created before running Model Builder training on Azure.</span></span>

<span data-ttu-id="0c3d0-107">O experimento encapsula a configuração e os resultados de uma ou mais execuções de treinamento do Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-107">The experiment encapsulates the configuration and results for one or more machine learning training runs.</span></span> <span data-ttu-id="0c3d0-108">Os experimentos pertencem a um espaço de trabalho específico.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-108">Experiments belong to a specific workspace.</span></span> <span data-ttu-id="0c3d0-109">Na primeira vez que um experimento é criado, seu nome é registrado no espaço de trabalho.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-109">The first time an experiment is created, its name is registered in the workspace.</span></span> <span data-ttu-id="0c3d0-110">Qualquer execução subsequente – se o mesmo nome de experimento for usado-são registrados como parte do mesmo experimento.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-110">Any subsequent runs - if the same experiment name is used - are logged as part of the same experiment.</span></span> <span data-ttu-id="0c3d0-111">Caso contrário, um novo experimento será criado.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-111">Otherwise, a new experiment is created.</span></span>

## <a name="what-is-an-azure-machine-learning-workspace"></a><span data-ttu-id="0c3d0-112">O que é um espaço de trabalho Azure Machine Learning?</span><span class="sxs-lookup"><span data-stu-id="0c3d0-112">What is an Azure Machine Learning workspace?</span></span>

<span data-ttu-id="0c3d0-113">Um espaço de trabalho é um recurso Azure Machine Learning que fornece um local central para todos os Azure Machine Learning recursos e artefatos criados como parte da execução do treinamento.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-113">A workspace is an Azure Machine Learning resource that provides a central place for all Azure Machine Learning resources and artifacts created as part of training run.</span></span>

<span data-ttu-id="0c3d0-114">Para criar um espaço de trabalho Azure Machine Learning, são necessários os seguintes:</span><span class="sxs-lookup"><span data-stu-id="0c3d0-114">To create an Azure Machine Learning workspace, the following are required:</span></span>

- <span data-ttu-id="0c3d0-115">Nome: um nome para seu espaço de trabalho entre 3-33 caracteres.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-115">Name: A name for your workspace between 3-33 characters.</span></span> <span data-ttu-id="0c3d0-116">Os nomes só podem conter caracteres alfanuméricos e hifens.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-116">Names may only contain alphanumeric characters and hyphens.</span></span>
- <span data-ttu-id="0c3d0-117">Região: a localização geográfica do data center em que o espaço de trabalho e os recursos são implantados.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-117">Region: The geographic location of the data center where your workspace and resources are deployed to.</span></span> <span data-ttu-id="0c3d0-118">É recomendável que você escolha um local perto de onde você ou seus clientes estão.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-118">It is recommended that you choose a location close to where you or your customers are.</span></span>
- <span data-ttu-id="0c3d0-119">Grupo de recursos: um contêiner que contém todos os recursos relacionados para uma solução do Azure.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-119">Resource group: A container that contains all related resources for an Azure solution.</span></span>

## <a name="what-is-an-azure-machine-learning-compute"></a><span data-ttu-id="0c3d0-120">O que é uma computação Azure Machine Learning?</span><span class="sxs-lookup"><span data-stu-id="0c3d0-120">What is an Azure Machine Learning compute?</span></span>

<span data-ttu-id="0c3d0-121">Um Azure Machine Learning computação é uma VM Linux baseada em nuvem usada para treinamento.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-121">An Azure Machine Learning compute is a cloud-based Linux VM used for training.</span></span>

<span data-ttu-id="0c3d0-122">Para criar um espaço de trabalho Azure Machine Learning, são necessários os seguintes:</span><span class="sxs-lookup"><span data-stu-id="0c3d0-122">To create an Azure Machine Learning workspace, the following are required:</span></span>

- <span data-ttu-id="0c3d0-123">Nome: um nome para seu espaço de trabalho entre 2-16 caracteres.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-123">Name: A name for your workspace between 2-16 characters.</span></span> <span data-ttu-id="0c3d0-124">Os nomes só podem conter caracteres alfanuméricos e hifens.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-124">Names may only contain alphanumeric characters and hyphens.</span></span>
- <span data-ttu-id="0c3d0-125">Tamanho da computação</span><span class="sxs-lookup"><span data-stu-id="0c3d0-125">Compute size</span></span>

    <span data-ttu-id="0c3d0-126">O construtor de modelos pode usar um dos seguintes tipos de computação otimizados para GPU:</span><span class="sxs-lookup"><span data-stu-id="0c3d0-126">Model Builder can use one of the following GPU-optimized compute types:</span></span>

    | <span data-ttu-id="0c3d0-127">Tamanho</span><span class="sxs-lookup"><span data-stu-id="0c3d0-127">Size</span></span> | <span data-ttu-id="0c3d0-128">vCPU</span><span class="sxs-lookup"><span data-stu-id="0c3d0-128">vCPU</span></span> | <span data-ttu-id="0c3d0-129">Memória: GiB</span><span class="sxs-lookup"><span data-stu-id="0c3d0-129">Memory: GiB</span></span> | <span data-ttu-id="0c3d0-130">Armazenamento temporário (SSD) GiB</span><span class="sxs-lookup"><span data-stu-id="0c3d0-130">Temp storage (SSD) GiB</span></span> | <span data-ttu-id="0c3d0-131">GPU</span><span class="sxs-lookup"><span data-stu-id="0c3d0-131">GPU</span></span> | <span data-ttu-id="0c3d0-132">Memória da GPU: GiB</span><span class="sxs-lookup"><span data-stu-id="0c3d0-132">GPU memory: GiB</span></span> | <span data-ttu-id="0c3d0-133">Discos de dados máximos</span><span class="sxs-lookup"><span data-stu-id="0c3d0-133">Max data disks</span></span> | <span data-ttu-id="0c3d0-134">Máximo de NICs</span><span class="sxs-lookup"><span data-stu-id="0c3d0-134">Max NICs</span></span> |
    |---|---|---|---|---|---|---|---|
    | <span data-ttu-id="0c3d0-135">Standard_NC12</span><span class="sxs-lookup"><span data-stu-id="0c3d0-135">Standard_NC12</span></span>   | <span data-ttu-id="0c3d0-136">12</span><span class="sxs-lookup"><span data-stu-id="0c3d0-136">12</span></span> | <span data-ttu-id="0c3d0-137">112</span><span class="sxs-lookup"><span data-stu-id="0c3d0-137">112</span></span> | <span data-ttu-id="0c3d0-138">680</span><span class="sxs-lookup"><span data-stu-id="0c3d0-138">680</span></span>  | <span data-ttu-id="0c3d0-139">2</span><span class="sxs-lookup"><span data-stu-id="0c3d0-139">2</span></span> | <span data-ttu-id="0c3d0-140">24</span><span class="sxs-lookup"><span data-stu-id="0c3d0-140">24</span></span> | <span data-ttu-id="0c3d0-141">48</span><span class="sxs-lookup"><span data-stu-id="0c3d0-141">48</span></span> | <span data-ttu-id="0c3d0-142">2</span><span class="sxs-lookup"><span data-stu-id="0c3d0-142">2</span></span> |
    | <span data-ttu-id="0c3d0-143">Standard_NC24</span><span class="sxs-lookup"><span data-stu-id="0c3d0-143">Standard_NC24</span></span>   | <span data-ttu-id="0c3d0-144">24</span><span class="sxs-lookup"><span data-stu-id="0c3d0-144">24</span></span> | <span data-ttu-id="0c3d0-145">224</span><span class="sxs-lookup"><span data-stu-id="0c3d0-145">224</span></span> | <span data-ttu-id="0c3d0-146">1440</span><span class="sxs-lookup"><span data-stu-id="0c3d0-146">1440</span></span> | <span data-ttu-id="0c3d0-147">4</span><span class="sxs-lookup"><span data-stu-id="0c3d0-147">4</span></span> | <span data-ttu-id="0c3d0-148">48</span><span class="sxs-lookup"><span data-stu-id="0c3d0-148">48</span></span> | <span data-ttu-id="0c3d0-149">64</span><span class="sxs-lookup"><span data-stu-id="0c3d0-149">64</span></span> | <span data-ttu-id="0c3d0-150">4</span><span class="sxs-lookup"><span data-stu-id="0c3d0-150">4</span></span> |

    <span data-ttu-id="0c3d0-151">Visite a [documentação da VM do Linux da série NC](https://docs.microsoft.com/azure/virtual-machines/nc-series?toc=/azure/virtual-machines/linux/toc.json&bc=/azure/virtual-machines/linux/breadcrumb/toc.json) para obter mais detalhes sobre tipos de computação otimizados para GPU.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-151">Visit the [NC-series Linux VM documentation](https://docs.microsoft.com/azure/virtual-machines/nc-series?toc=/azure/virtual-machines/linux/toc.json&bc=/azure/virtual-machines/linux/breadcrumb/toc.json) for more details on GPU optimized compute types.</span></span>
- <span data-ttu-id="0c3d0-152">Prioridade de computação</span><span class="sxs-lookup"><span data-stu-id="0c3d0-152">Compute priority</span></span>

  - <span data-ttu-id="0c3d0-153">Baixa prioridade: adequada para tarefas com tempos de execução mais curtos.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-153">Low-priority: Suited for tasks with shorter execution times.</span></span> <span data-ttu-id="0c3d0-154">Pode ser afetado por interrupções e falta de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-154">May be impacted by interruptions and lack of availability.</span></span> <span data-ttu-id="0c3d0-155">Geralmente custa menos, pois aproveita a capacidade excedente no Azure.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-155">Usually costs less because it takes advantage of surplus capacity in Azure.</span></span>
  - <span data-ttu-id="0c3d0-156">Dedicado: adequado para tarefas de qualquer duração, mas especialmente trabalhos de execução longa.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-156">Dedicated: Suited for tasks of any duration, but especially long-running jobs.</span></span> <span data-ttu-id="0c3d0-157">Não impactado por interrupções ou falta de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-157">Not impacted by interruptions or lack of availability.</span></span> <span data-ttu-id="0c3d0-158">Geralmente, custa mais porque ele reserva um conjunto dedicado de recursos de computação no Azure para suas tarefas.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-158">Usually costs more because it reserves a dedicated set of compute resources in Azure for your tasks.</span></span>

## <a name="training"></a><span data-ttu-id="0c3d0-159">Treinamento</span><span class="sxs-lookup"><span data-stu-id="0c3d0-159">Training</span></span>

<span data-ttu-id="0c3d0-160">O treinamento no Azure só está disponível para o cenário de classificação de imagem do construtor de modelos.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-160">Training on Azure is only available for the Model Builder image classification scenario.</span></span> <span data-ttu-id="0c3d0-161">O algoritmo usado para treinar esses modelos é uma rede neural profunda baseada na arquitetura ResNet50.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-161">The algorithm used to train these models is a Deep Neural Network based on the ResNet50 architecture.</span></span> <span data-ttu-id="0c3d0-162">O processo de treinamento leva algum tempo e a quantidade de tempo pode variar dependendo do tamanho da computação selecionada, bem como da quantidade de dados.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-162">The training process takes some time and the amount of time may vary depending on the size of compute selected as well as amount of data.</span></span> <span data-ttu-id="0c3d0-163">Na primeira vez que um modelo é treinado, você pode esperar um tempo de treinamento um pouco maior, pois os recursos precisam ser provisionados.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-163">The first time a model is trained, you can expect a slightly longer training time because resources have to be provisioned.</span></span> <span data-ttu-id="0c3d0-164">Você pode acompanhar o progresso de suas execuções selecionando o link "monitorar a execução atual no portal do Azure" no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-164">You can track the progress of your runs by selecting the "Monitor current run in Azure portal" link in Visual Studio.</span></span>

## <a name="results"></a><span data-ttu-id="0c3d0-165">Resultados</span><span class="sxs-lookup"><span data-stu-id="0c3d0-165">Results</span></span>

<span data-ttu-id="0c3d0-166">Quando o treinamento for concluído, dois projetos serão adicionados à sua solução com os seguintes sufixos:</span><span class="sxs-lookup"><span data-stu-id="0c3d0-166">Once training is complete, two projects are added to your solution with the following suffixes:</span></span>

- <span data-ttu-id="0c3d0-167">*ConsoleApp*: um aplicativo de console C# .NET Core que fornece código inicial para criar o pipeline de previsão e fazer previsões.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-167">*ConsoleApp*: A C# .NET Core console application that provides starter code to build the prediction pipeline and make predictions.</span></span>
- <span data-ttu-id="0c3d0-168">*Modelo*: um aplicativo de .net Standard C# que contém os modelos de dados que definem o esquema de dados de modelo de entrada e saída, bem como os seguintes ativos:</span><span class="sxs-lookup"><span data-stu-id="0c3d0-168">*Model*: A C# .NET Standard application that contains the data models that define the schema of input and output model data as well as the following assets:</span></span>

  - <span data-ttu-id="0c3d0-169">bestModel. onnx: uma versão serializada do modelo em formato de intercâmbio de rede neural aberto (ONNX).</span><span class="sxs-lookup"><span data-stu-id="0c3d0-169">bestModel.onnx: A serialized version of the model in Open Neural Network Exchange (ONNX) format.</span></span> <span data-ttu-id="0c3d0-170">ONNX é um formato de software livre para modelos de ia que oferece suporte à interoperabilidade entre estruturas como ML.NET, PyTorch e TensorFlow.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-170">ONNX is an open source format for AI models that supports interoperability between frameworks like ML.NET, PyTorch and TensorFlow.</span></span>
  - <span data-ttu-id="0c3d0-171">bestModelMap. JSON: uma lista de categorias usadas ao fazer previsões para mapear a saída do modelo para uma categoria de texto.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-171">bestModelMap.json: A list of categories used when making predictions to map the model output to a text category.</span></span>
  - <span data-ttu-id="0c3d0-172">MLModel. zip: uma versão serializada do pipeline de previsão ML.NET que usa a versão serializada do modelo *bestModel. onnx* para fazer previsões e mapeia saídas usando o `bestModelMap.json` arquivo.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-172">MLModel.zip: A serialized version of the ML.NET prediction pipeline that uses the serialized version of the model *bestModel.onnx* to make predictions and maps outputs using the `bestModelMap.json` file.</span></span>

## <a name="use-the-machine-learning-model"></a><span data-ttu-id="0c3d0-173">Usar o modelo de Machine Learning</span><span class="sxs-lookup"><span data-stu-id="0c3d0-173">Use the machine learning model</span></span>

<span data-ttu-id="0c3d0-174">As `ModelInput` `ModelOutput` classes e no projeto de *modelo* definem o esquema da entrada e saída esperada do modelo, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-174">The `ModelInput` and `ModelOutput` classes in the *Model* project define the schema of the model's expected input and output respectively.</span></span>

<span data-ttu-id="0c3d0-175">Em um cenário de classificação de imagem, o `ModelInput` contém duas colunas:</span><span class="sxs-lookup"><span data-stu-id="0c3d0-175">In an image classification scenario, the `ModelInput` contains two columns:</span></span>

- <span data-ttu-id="0c3d0-176">`ImageSource`: O caminho da cadeia de caracteres do local da imagem.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-176">`ImageSource`: The string path of the image location.</span></span>
- <span data-ttu-id="0c3d0-177">`Label`: A categoria real à qual a imagem pertence.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-177">`Label`: The actual category the image belongs to.</span></span> <span data-ttu-id="0c3d0-178">`Label`é usado apenas como uma entrada quando o treinamento e não precisa ser fornecido ao fazer previsões.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-178">`Label` is only used as an input when training and does not need to be provided when making predictions.</span></span>

<span data-ttu-id="0c3d0-179">O `ModelOutput` contém duas colunas:</span><span class="sxs-lookup"><span data-stu-id="0c3d0-179">The `ModelOutput` contains two columns:</span></span>

- <span data-ttu-id="0c3d0-180">`Prediction`: A categoria prevista da imagem.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-180">`Prediction`: The image's predicted category.</span></span>
- <span data-ttu-id="0c3d0-181">`Score`: A lista de probabilidades para todas as categorias (a maior pertence ao `Prediction` ).</span><span class="sxs-lookup"><span data-stu-id="0c3d0-181">`Score`: The list of probabilities for all categories (the highest belongs to the `Prediction`).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="0c3d0-182">Solução de problemas</span><span class="sxs-lookup"><span data-stu-id="0c3d0-182">Troubleshooting</span></span>

### <a name="cannot-create-compute"></a><span data-ttu-id="0c3d0-183">Não é possível criar computação</span><span class="sxs-lookup"><span data-stu-id="0c3d0-183">Cannot create compute</span></span>

<span data-ttu-id="0c3d0-184">Se ocorrer um erro durante a criação de computação Azure Machine Learning, o recurso de computação ainda poderá existir, em um estado com erros.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-184">If an error occurs during Azure Machine Learning compute creation, the compute resource may still exist, in an errored state.</span></span> <span data-ttu-id="0c3d0-185">Se você tentar recriar o recurso de computação com o mesmo nome, a operação falhará.</span><span class="sxs-lookup"><span data-stu-id="0c3d0-185">If you try to re-create the compute resource with the same name, the operation fails.</span></span> <span data-ttu-id="0c3d0-186">Para corrigir esse erro:</span><span class="sxs-lookup"><span data-stu-id="0c3d0-186">To fix this error, either:</span></span>

- <span data-ttu-id="0c3d0-187">Criar a nova computação com um nome diferente</span><span class="sxs-lookup"><span data-stu-id="0c3d0-187">Create the new compute with a different name</span></span>
- <span data-ttu-id="0c3d0-188">Vá para a portal do Azure e remova o recurso de computação original</span><span class="sxs-lookup"><span data-stu-id="0c3d0-188">Go to the Azure portal, and remove the original compute resource</span></span>
