---
title: Criar e usar assemblies com nome forte
description: Este artigo mostra o processo de assinatura de um assembly no .NET com um nome forte e mais tarde referenciando-o por esse nome.
ms.date: 08/19/2019
helpviewer_keywords:
- strong-name bypass feature
- strong-named assemblies, about strong-named assemblies
- strong-named assemblies
- signing assemblies
- assemblies [.NET Framework], signing
- strong-named assemblies, scenarios
- assemblies [.NET Framework], strong-named
- strong-named assemblies, loading into trusted application domains
- assembly binding, strong-named
ms.assetid: ffbf6d9e-4a88-4a8a-9645-4ce0ee1ee5f9
ms.openlocfilehash: 79c8cf2c21210fd80392a8aacf92840c11a36e43
ms.sourcegitcommit: d6bd7903d7d46698e9d89d3725f3bb4876891aa3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/13/2020
ms.locfileid: "83378526"
---
# <a name="create-and-use-strong-named-assemblies"></a><span data-ttu-id="6e2d2-103">Criar e usar assemblies com nome forte</span><span class="sxs-lookup"><span data-stu-id="6e2d2-103">Create and use strong-named assemblies</span></span>

<span data-ttu-id="6e2d2-104">Um nome forte consiste na identidade do assembly — seu nome de texto simples, número de versão e informações de cultura (se fornecidas) — mais uma chave pública e uma assinatura digital.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-104">A strong name consists of the assembly's identity—its simple text name, version number, and culture information (if provided)—plus a public key and a digital signature.</span></span> <span data-ttu-id="6e2d2-105">Ela é gerada de um arquivo do assembly usando a chave privada correspondente.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-105">It is generated from an assembly file using the corresponding private key.</span></span> <span data-ttu-id="6e2d2-106">(O arquivo do assembly inclui o manifesto do assembly, que contém os nomes e os hashes de todos os arquivos que compõem o assembly.)</span><span class="sxs-lookup"><span data-stu-id="6e2d2-106">(The assembly file contains the assembly manifest, which contains the names and hashes of all the files that make up the assembly.)</span></span>

> [!WARNING]
> <span data-ttu-id="6e2d2-107">Por segurança, não confie em nomes fortes.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-107">Do not rely on strong names for security.</span></span> <span data-ttu-id="6e2d2-108">Eles apenas fornecem uma identidade exclusiva.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-108">They provide a unique identity only.</span></span>

<span data-ttu-id="6e2d2-109">Assembly de nome forte só pode usar tipos de outros assemblies de nome forte.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-109">A strong-named assembly can only use types from other strong-named assemblies.</span></span> <span data-ttu-id="6e2d2-110">Caso contrário, a integridade do assembly de nome forte estaria comprometida.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-110">Otherwise, the integrity of the strong-named assembly would be compromised.</span></span>

> [!NOTE]
> <span data-ttu-id="6e2d2-111">Embora o .NET Core dê suporte a assemblies de nome forte e todos os assemblies na biblioteca do .NET Core sejam assinados, a maioria dos assemblies de terceiros não precisa de nomes fortes.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-111">Although .NET Core supports strong-named assemblies, and all assemblies in the .NET Core library are signed, the majority of third-party assemblies do not need strong names.</span></span> <span data-ttu-id="6e2d2-112">Para obter mais informações, consulte [assinatura de nome forte](https://github.com/dotnet/runtime/blob/master/docs/project/strong-name-signing.md) no github.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-112">For more information, see [Strong Name Signing](https://github.com/dotnet/runtime/blob/master/docs/project/strong-name-signing.md) on GitHub.</span></span>

## <a name="strong-name-scenario"></a><span data-ttu-id="6e2d2-113">Cenário de nome forte</span><span class="sxs-lookup"><span data-stu-id="6e2d2-113">Strong name scenario</span></span>

<span data-ttu-id="6e2d2-114">O cenário a seguir descreve o processo de assinar um assembly com um nome forte e posteriormente referencia-lo por esse nome.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-114">The following scenario outlines the process of signing an assembly with a strong name and later referencing it by that name.</span></span>

1. <span data-ttu-id="6e2d2-115">O Assembly A é criado com um nome forte usando um dos seguintes métodos:</span><span class="sxs-lookup"><span data-stu-id="6e2d2-115">Assembly A is created with a strong name using one of the following methods:</span></span>

    - <span data-ttu-id="6e2d2-116">Usando um ambiente de desenvolvimento que dá suporte à criação de nomes fortes, tal como o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-116">Using a development environment that supports creating strong names, such as Visual Studio.</span></span>

    - <span data-ttu-id="6e2d2-117">Criando um par de chaves de criptografia usando a [ferramenta Nome Forte (Sn.exe)](../../framework/tools/sn-exe-strong-name-tool.md) e atribuindo esse par de chaves ao assembly usando um compilador de linha de comando ou o [Assembly Linker (Al.exe)](../../framework/tools/al-exe-assembly-linker.md).</span><span class="sxs-lookup"><span data-stu-id="6e2d2-117">Creating a cryptographic key pair using the [Strong Name tool (Sn.exe)](../../framework/tools/sn-exe-strong-name-tool.md) and assigning that key pair to the assembly using either a command-line compiler or the [Assembly Linker (Al.exe)](../../framework/tools/al-exe-assembly-linker.md).</span></span> <span data-ttu-id="6e2d2-118">O SDK do Windows fornece o Sn.exe e o Al.exe.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-118">The Windows SDK provides both Sn.exe and Al.exe.</span></span>

2. <span data-ttu-id="6e2d2-119">O ambiente de desenvolvimento ou a ferramenta assina o hash do arquivo que contém o manifesto do assembly com a chave privada do desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-119">The development environment or tool signs the hash of the file containing the assembly's manifest with the developer's private key.</span></span> <span data-ttu-id="6e2d2-120">Esta assinatura digital é armazenada no arquivo PE que contém o manifesto do Assembly A.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-120">This digital signature is stored in the portable executable (PE) file that contains Assembly A's manifest.</span></span>

3. <span data-ttu-id="6e2d2-121">O Assembly B é um consumidor do Assembly A. A seção de referência do manifesto do Assembly B inclui um token que representa a chave pública do Assembly A.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-121">Assembly B is a consumer of Assembly A. The reference section of Assembly B's manifest includes a token that represents Assembly A's public key.</span></span> <span data-ttu-id="6e2d2-122">Um token é uma parte da chave pública completa e é usado em vez da chave em si para economizar espaço.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-122">A token is a portion of the full public key and is used rather than the key itself to save space.</span></span>

4. <span data-ttu-id="6e2d2-123">O Common Language Runtime verifica a assinatura do nome forte quando o assembly é colocado no cache de assembly global.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-123">The common language runtime verifies the strong name signature when the assembly is placed in the global assembly cache.</span></span> <span data-ttu-id="6e2d2-124">Ao associar por nome forte no tempo de execução, o Common Language Runtime compara a chave armazenada no manifesto do Assembly B com a chave usada para gerar o nome forte do Assembly A. Se as verificações de segurança do .NET Framework e a associação forem bem-sucedidas, o Assembly B terá uma garantia de que os bits do Assembly A não foram violados e que esses bits na verdade vêm dos desenvolvedores do Assembly A.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-124">When binding by strong name at run time, the common language runtime compares the key stored in Assembly B's manifest with the key used to generate the strong name for Assembly A. If the .NET Framework security checks pass and the bind succeeds, Assembly B has a guarantee that Assembly A's bits have not been tampered with and that these bits actually come from the developers of Assembly A.</span></span>

> [!NOTE]
> <span data-ttu-id="6e2d2-125">Este cenário não aborda problemas de confiança.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-125">This scenario doesn't address trust issues.</span></span> <span data-ttu-id="6e2d2-126">Os assemblies podem carregar assinaturas Microsoft Authenticode completas além de um nome forte.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-126">Assemblies can carry full Microsoft Authenticode signatures in addition to a strong name.</span></span> <span data-ttu-id="6e2d2-127">As assinaturas Authenticode incluem um certificado que estabelece a relação de confiança.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-127">Authenticode signatures include a certificate that establishes trust.</span></span> <span data-ttu-id="6e2d2-128">É importante observar que os nomes fortes não exigem que o código esteja assinado dessa maneira.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-128">It's important to note that strong names don't require code to be signed in this way.</span></span> <span data-ttu-id="6e2d2-129">Os nomes fortes apenas fornecem uma identidade exclusiva.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-129">Strong names only provide a unique identity.</span></span>

## <a name="bypass-signature-verification-of-trusted-assemblies"></a><span data-ttu-id="6e2d2-130">Ignorar a verificação de assinatura de assemblies confiáveis</span><span class="sxs-lookup"><span data-stu-id="6e2d2-130">Bypass signature verification of trusted assemblies</span></span>

<span data-ttu-id="6e2d2-131">A partir do .NET Framework 3.5 Service Pack 1, as assinaturas de nome forte não são validadas quando um assembly é carregado em um domínio do aplicativo de confiança total, como o domínio do aplicativo padrão para a zona `MyComputer`.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-131">Starting with the .NET Framework 3.5 Service Pack 1, strong-name signatures are not validated when an assembly is loaded into a full-trust application domain, such as the default application domain for the `MyComputer` zone.</span></span> <span data-ttu-id="6e2d2-132">Isso é conhecido como o recurso de desvio de nome forte.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-132">This is referred to as the strong-name bypass feature.</span></span> <span data-ttu-id="6e2d2-133">Em um ambiente de confiança total, as exigências de <xref:System.Security.Permissions.StrongNameIdentityPermission> sempre têm êxito para assemblies assinados de confiança total, independentemente de sua assinatura.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-133">In a full-trust environment, demands for <xref:System.Security.Permissions.StrongNameIdentityPermission> always succeed for signed, full-trust assemblies, regardless of their signature.</span></span> <span data-ttu-id="6e2d2-134">O recurso de desvio de nome forte evita a sobrecarga desnecessária de verificação de assinatura de nome forte dos assemblies de confiança total nessa situação, permitindo que os assemblies carreguem mais rapidamente.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-134">The strong-name bypass feature avoids the unnecessary overhead of strong-name signature verification of full-trust assemblies in this situation, allowing the assemblies to load faster.</span></span>

<span data-ttu-id="6e2d2-135">O recurso de desvio se aplica a qualquer assembly que está assinado com um nome forte e que tem as seguintes características:</span><span class="sxs-lookup"><span data-stu-id="6e2d2-135">The bypass feature applies to any assembly that is signed with a strong name and that has the following characteristics:</span></span>

- <span data-ttu-id="6e2d2-136">Totalmente confiável sem a evidência <xref:System.Security.Policy.StrongName> (por exemplo, tem a evidência de zona `MyComputer`).</span><span class="sxs-lookup"><span data-stu-id="6e2d2-136">Fully trusted without <xref:System.Security.Policy.StrongName> evidence (for example, has `MyComputer` zone evidence).</span></span>

- <span data-ttu-id="6e2d2-137">Carregado em um <xref:System.AppDomain> totalmente confiável.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-137">Loaded into a fully trusted <xref:System.AppDomain>.</span></span>

- <span data-ttu-id="6e2d2-138">Carregado de um local sob a propriedade <xref:System.AppDomainSetup.ApplicationBase%2A> desse <xref:System.AppDomain>.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-138">Loaded from a location under the <xref:System.AppDomainSetup.ApplicationBase%2A> property of that <xref:System.AppDomain>.</span></span>

- <span data-ttu-id="6e2d2-139">Não assinado com atraso.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-139">Not delay-signed.</span></span>

<span data-ttu-id="6e2d2-140">Esse recurso pode ser desabilitado para aplicativos individuais ou para um computador.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-140">This feature can be disabled for individual applications or for a computer.</span></span> <span data-ttu-id="6e2d2-141">Consulte [como desabilitar o recurso de bypass de nome forte](disable-strong-name-bypass-feature.md).</span><span class="sxs-lookup"><span data-stu-id="6e2d2-141">See [How to: Disable the strong-name bypass feature](disable-strong-name-bypass-feature.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="6e2d2-142">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="6e2d2-142">Related topics</span></span>

|<span data-ttu-id="6e2d2-143">Title</span><span class="sxs-lookup"><span data-stu-id="6e2d2-143">Title</span></span>|<span data-ttu-id="6e2d2-144">Descrição</span><span class="sxs-lookup"><span data-stu-id="6e2d2-144">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="6e2d2-145">Como criar um par de chaves pública/privada</span><span class="sxs-lookup"><span data-stu-id="6e2d2-145">How to: Create a public-private key pair</span></span>](create-public-private-key-pair.md)|<span data-ttu-id="6e2d2-146">Descreve como criar um par de chaves de criptografia para assinar um assembly.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-146">Describes how to create a cryptographic key pair for signing an assembly.</span></span>|
|[<span data-ttu-id="6e2d2-147">Como assinar um assembly com um nome forte</span><span class="sxs-lookup"><span data-stu-id="6e2d2-147">How to: Sign an assembly with a strong name</span></span>](sign-strong-name.md)|<span data-ttu-id="6e2d2-148">Descreve como criar um assembly de nome forte.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-148">Describes how to create a strong-named assembly.</span></span>|
|[<span data-ttu-id="6e2d2-149">Nomenclatura forte aprimorada</span><span class="sxs-lookup"><span data-stu-id="6e2d2-149">Enhanced strong naming</span></span>](enhanced-strong-naming.md)|<span data-ttu-id="6e2d2-150">Descreve aprimoramentos para nomes fortes no .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-150">Describes enhancements to strong-names in the .NET Framework 4.5.</span></span>|
|[<span data-ttu-id="6e2d2-151">Como referenciar um assembly de nome forte</span><span class="sxs-lookup"><span data-stu-id="6e2d2-151">How to: Reference a strong-named assembly</span></span>](reference-strong-named.md)|<span data-ttu-id="6e2d2-152">Descreve como referenciar tipos ou recursos em um assembly de nome forte no tempo de compilação ou no tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-152">Describes how to reference types or resources in a strong-named assembly at compile time or run time.</span></span>|
|[<span data-ttu-id="6e2d2-153">Como desabilitar o recurso de bypass de nome forte</span><span class="sxs-lookup"><span data-stu-id="6e2d2-153">How to: Disable the strong-name bypass feature</span></span>](disable-strong-name-bypass-feature.md)|<span data-ttu-id="6e2d2-154">Descreve como desabilitar o recurso que ignora a validação de assinaturas de nome forte.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-154">Describes how to disable the feature that bypasses the validation of strong-name signatures.</span></span> <span data-ttu-id="6e2d2-155">Esse recurso pode ser desabilitado para todos ou para aplicativos específicos.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-155">This feature can be disabled for all or for specific applications.</span></span>|
|[<span data-ttu-id="6e2d2-156">Criar assemblies</span><span class="sxs-lookup"><span data-stu-id="6e2d2-156">Create assemblies</span></span>](create.md)|<span data-ttu-id="6e2d2-157">Fornece uma visão geral dos assemblies de arquivo único e vários arquivos.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-157">Provides an overview of single-file and multifile assemblies.</span></span>|
|[<span data-ttu-id="6e2d2-158">Como atrasar a assinatura de um assembly no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="6e2d2-158">How to delay sign an assembly in Visual Studio</span></span>](/visualstudio/ide/managing-assembly-and-manifest-signing#how-to-sign-an-assembly-in-visual-studio)|<span data-ttu-id="6e2d2-159">Explica como assinar um assembly com um nome forte, depois que o assembly foi criado.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-159">Explains how to sign an assembly with a strong name after the assembly has been created.</span></span>|
|[<span data-ttu-id="6e2d2-160">Sn. exe (ferramenta Strong Name)</span><span class="sxs-lookup"><span data-stu-id="6e2d2-160">Sn.exe (Strong Name tool)</span></span>](../../framework/tools/sn-exe-strong-name-tool.md)|<span data-ttu-id="6e2d2-161">Descreve a ferramenta incluída no .NET Framework que ajuda a criar assemblies com nomes fortes.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-161">Describes the tool included in the .NET Framework that helps create assemblies with strong names.</span></span> <span data-ttu-id="6e2d2-162">Esta ferramenta oferece opções para o gerenciamento de chaves, geração de assinaturas e verificação de assinaturas.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-162">This tool provides options for key management, signature generation, and signature verification.</span></span>|
|[<span data-ttu-id="6e2d2-163">Al.exe (Assembly linker)</span><span class="sxs-lookup"><span data-stu-id="6e2d2-163">Al.exe (Assembly linker)</span></span>](../../framework/tools/al-exe-assembly-linker.md)|<span data-ttu-id="6e2d2-164">Descreve a ferramenta incluída no .NET Framework que gera um arquivo que tem um manifesto do assembly de módulos ou arquivos de recurso.</span><span class="sxs-lookup"><span data-stu-id="6e2d2-164">Describes the tool included in the .NET Framework that generates a file that has an assembly manifest from modules or resource files.</span></span>|
