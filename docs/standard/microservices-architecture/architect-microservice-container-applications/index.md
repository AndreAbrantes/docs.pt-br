---
title: Arquitetando aplicativos baseados em contêineres e em microsserviços
description: Arquitetura de microsserviços do .NET para aplicativos .NET em contêineres | Arquitetando aplicativos baseados em contêineres e em microsserviços
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.openlocfilehash: f7933cc25a5fde13113d0c9c278e9bd1730d4f9d
ms.sourcegitcommit: 2eb5ca4956231c1a0efd34b6a9cab6153a5438af
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/11/2018
ms.locfileid: "49085966"
---
# <a name="architecting-container--and-microservice-based-applications"></a><span data-ttu-id="11cee-103">Arquitetando aplicativos baseados em contêineres e em microsserviços</span><span class="sxs-lookup"><span data-stu-id="11cee-103">Architecting Container- and Microservice-Based Applications</span></span>

<span data-ttu-id="11cee-104">*Os microsserviços oferecem grandes benefícios, mas também geram novos grandes desafios. Os padrões da arquitetura de microsserviços são pilares fundamentais durante a criação de um aplicativo baseado em microsserviço.*</span><span class="sxs-lookup"><span data-stu-id="11cee-104">*Microservices offer great benefits but also raise huge new challenges. Microservice architecture patterns are fundamental pillars when creating a microservice-based application.*</span></span>

<span data-ttu-id="11cee-105">Antes neste guia, você aprendeu os conceitos básicos sobre contêineres e sobre o Docker.</span><span class="sxs-lookup"><span data-stu-id="11cee-105">Earlier in this guide, you learned basic concepts about containers and Docker.</span></span> <span data-ttu-id="11cee-106">Esse é o mínimo de informações necessárias para a introdução aos contêineres.</span><span class="sxs-lookup"><span data-stu-id="11cee-106">That was the minimum information you need in order to get started with containers.</span></span> <span data-ttu-id="11cee-107">Embora os contêineres habilitem os microsserviços e sejam muito adequados para isso, eles não são obrigatórios para uma arquitetura de microsserviço e muitos conceitos de arquitetura nesta seção de arquitetura também podem ser aplicados sem contêineres.</span><span class="sxs-lookup"><span data-stu-id="11cee-107">Although, even when containers are enablers and a great fit for microservices, they are not mandatory for a microservice architecture and many architectural concepts in this architecture section could be applied without containers, too.</span></span> <span data-ttu-id="11cee-108">No entanto, este guia concentra-se na interseção de ambos devido a importância dos contêineres que já foi apresentada.</span><span class="sxs-lookup"><span data-stu-id="11cee-108">However, this guidance focuses on the intersection of both due to the already introduced importance of containers.</span></span>

<span data-ttu-id="11cee-109">Os aplicativos corporativos podem ser complexos e geralmente são compostos de vários serviços e não em um único serviço.</span><span class="sxs-lookup"><span data-stu-id="11cee-109">Enterprise applications can be complex and are often composed of multiple services instead of a single service-based application.</span></span> <span data-ttu-id="11cee-110">Para esses casos, você precisa entender as abordagens de arquitetura adicionais, como os microsserviços e certos padrões de DDD (design controlado por domínio) além de conceitos de orquestração de contêiner.</span><span class="sxs-lookup"><span data-stu-id="11cee-110">For those cases, you need to understand additional architectural approaches, such as the microservices and certain Domain-Driven Design (DDD) patterns plus container orchestration concepts.</span></span> <span data-ttu-id="11cee-111">Observe que este capítulo não descreve apenas microsserviços em contêineres, mas também qualquer aplicativo em contêiner.</span><span class="sxs-lookup"><span data-stu-id="11cee-111">Note that this chapter describes not just microservices on containers, but any containerized application, as well.</span></span>

## <a name="container-design-principles"></a><span data-ttu-id="11cee-112">Princípios de design de contêiner</span><span class="sxs-lookup"><span data-stu-id="11cee-112">Container design principles</span></span>

<span data-ttu-id="11cee-113">No modelo de contêiner, uma instância de imagem de contêiner representa um único processo.</span><span class="sxs-lookup"><span data-stu-id="11cee-113">In the container model, a container image instance represents a single process.</span></span> <span data-ttu-id="11cee-114">Definindo uma imagem de contêiner como um limite de processo, você pode criar primitivas que podem ser usadas para dimensionar o processo ou criar um lote.</span><span class="sxs-lookup"><span data-stu-id="11cee-114">By defining a container image as a process boundary, you can create primitives that can be used to scale the process or to batch it.</span></span>

<span data-ttu-id="11cee-115">Ao criar uma imagem de contêiner, você verá uma definição [ENTRYPOINT](https://docs.docker.com/engine/reference/builder/) no Dockerfile.</span><span class="sxs-lookup"><span data-stu-id="11cee-115">When you design a container image, you will see an [ENTRYPOINT](https://docs.docker.com/engine/reference/builder/) definition in the Dockerfile.</span></span> <span data-ttu-id="11cee-116">Ela define o processo cujo tempo de vida controla o tempo de vida do contêiner.</span><span class="sxs-lookup"><span data-stu-id="11cee-116">This defines the process whose lifetime controls the lifetime of the container.</span></span> <span data-ttu-id="11cee-117">Quando o processo for concluído, o ciclo de vida do contêiner será encerrado.</span><span class="sxs-lookup"><span data-stu-id="11cee-117">When the process completes, the container lifecycle ends.</span></span> <span data-ttu-id="11cee-118">Os contêineres podem representar processos de longa execução como servidores Web, mas também podem representar processos de curta duração, como trabalhos em lotes, que anteriormente talvez eram implementados como Azure [WebJobs](https://docs.microsoft.com/azure/app-service-web/websites-webjobs-resources).</span><span class="sxs-lookup"><span data-stu-id="11cee-118">Containers might represent long-running processes like web servers, but can also represent short-lived processes like batch jobs, which formerly might have been implemented as Azure [WebJobs](https://docs.microsoft.com/azure/app-service-web/websites-webjobs-resources).</span></span>

<span data-ttu-id="11cee-119">Se o processo falhar, o contêiner é encerrado e o orquestrador assume.</span><span class="sxs-lookup"><span data-stu-id="11cee-119">If the process fails, the container ends, and the orchestrator takes over.</span></span> <span data-ttu-id="11cee-120">Se o orquestrador foi configurado para manter cinco instâncias em execução e uma falhar, ele criará outra instância de contêiner para substituir o processo com falha.</span><span class="sxs-lookup"><span data-stu-id="11cee-120">If the orchestrator was configured to keep five instances running and one fails, the orchestrator will create another container instance to replace the failed process.</span></span> <span data-ttu-id="11cee-121">Em um trabalho em lotes, o processo é iniciado com parâmetros.</span><span class="sxs-lookup"><span data-stu-id="11cee-121">In a batch job, the process is started with parameters.</span></span> <span data-ttu-id="11cee-122">Quando o processo é concluído, o trabalho é concluído.</span><span class="sxs-lookup"><span data-stu-id="11cee-122">When the process completes, the work is complete.</span></span> <span data-ttu-id="11cee-123">Mais tarde, este guia faz drill-down em orquestradores.</span><span class="sxs-lookup"><span data-stu-id="11cee-123">This guidance drills-down on orchestrators, later on.</span></span>

<span data-ttu-id="11cee-124">Você pode encontrar um cenário em que deseje vários processos em execução em um único contêiner.</span><span class="sxs-lookup"><span data-stu-id="11cee-124">You might find a scenario where you want multiple processes running in a single container.</span></span> <span data-ttu-id="11cee-125">Para esse cenário, como pode haver apenas um ponto de entrada por contêiner, você poderá executar um script dentro do contêiner para iniciar quantos programas forem necessários.</span><span class="sxs-lookup"><span data-stu-id="11cee-125">For that scenario, since there can be only one entry point per container, you could run a script within the container that launches as many programs as needed.</span></span> <span data-ttu-id="11cee-126">Por exemplo, você pode usar o [Supervisor](http://supervisord.org/) ou uma ferramenta semelhante para cuidar da inicialização de vários processos dentro de um único contêiner.</span><span class="sxs-lookup"><span data-stu-id="11cee-126">For example, you can use [Supervisor](http://supervisord.org/) or a similar tool to take care of launching multiple processes inside a single container.</span></span> <span data-ttu-id="11cee-127">No entanto, mesmo que seja possível encontrar arquiteturas com vários processos por contêiner, essa abordagem não é muito comum.</span><span class="sxs-lookup"><span data-stu-id="11cee-127">However, even though you can find architectures that hold multiple processes per container, that approach is not very common.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="11cee-128">[Anterior](../net-core-net-framework-containers/official-net-docker-images.md)
[Próximo](containerize-monolithic-applications.md)</span><span class="sxs-lookup"><span data-stu-id="11cee-128">[Previous](../net-core-net-framework-containers/official-net-docker-images.md)
[Next](containerize-monolithic-applications.md)</span></span>
