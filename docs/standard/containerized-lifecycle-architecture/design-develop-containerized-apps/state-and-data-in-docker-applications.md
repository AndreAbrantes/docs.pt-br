---
title: Estado e dados em aplicativos do Docker
description: Containerized Docker Application Lifecycle with Microsoft Platform and Tools (Ciclo de vida de aplicativo do Docker em contêineres com a plataforma e as ferramentas da Microsoft)
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: 78db191bdec4c25c11728d819d89eaaaff4bd7da
ms.sourcegitcommit: a885cc8c3e444ca6471348893d5373c6e9e49a47
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/07/2018
ms.locfileid: "44070258"
---
# <a name="state-and-data-in-docker-applications"></a><span data-ttu-id="45b4e-103">Estado e dados em aplicativos do Docker</span><span class="sxs-lookup"><span data-stu-id="45b4e-103">State and data in Docker applications</span></span>

<span data-ttu-id="45b4e-104">Um primitivo de contêineres é imutabilidade.</span><span class="sxs-lookup"><span data-stu-id="45b4e-104">A primitive of containers is immutability.</span></span> <span data-ttu-id="45b4e-105">Quando comparado a uma VM, os contêineres não desaparecerem como uma ocorrência comum.</span><span class="sxs-lookup"><span data-stu-id="45b4e-105">When compared to a VM, containers don't disappear as a common occurrence.</span></span> <span data-ttu-id="45b4e-106">Uma VM pode falhar em várias formas de processos inativos, sobrecarga da CPU ou um disco cheio ou com falha.</span><span class="sxs-lookup"><span data-stu-id="45b4e-106">A VM might fail in various forms from dead processes, overloaded CPU, or a full or failed disk.</span></span> <span data-ttu-id="45b4e-107">Ainda assim, esperamos que a VM esteja disponível e unidades RAID são comuns para garantir que falhas de unidade mantêm os dados.</span><span class="sxs-lookup"><span data-stu-id="45b4e-107">Yet, we expect the VM to be available and RAID drives are commonplace to assure drive failures maintain data.</span></span>

<span data-ttu-id="45b4e-108">No entanto, contêineres forem considerados instâncias dos processos.</span><span class="sxs-lookup"><span data-stu-id="45b4e-108">However, containers are thought to be instances of processes.</span></span> <span data-ttu-id="45b4e-109">Um processo não mantém o estado durável.</span><span class="sxs-lookup"><span data-stu-id="45b4e-109">A process doesn't maintain durable state.</span></span> <span data-ttu-id="45b4e-110">Mesmo que um contêiner pode gravar em seu armazenamento local, supondo que essa instância permanecerá indefinidamente seria equivalente a supondo que uma cópia única de memória será durável.</span><span class="sxs-lookup"><span data-stu-id="45b4e-110">Even though a container can write to its local storage, assuming that that instance will be around indefinitely would be equivalent to assuming a single-copy memory will be durable.</span></span> <span data-ttu-id="45b4e-111">Você deve presumir que os contêineres, como processos, são duplicados, eliminado, ou, quando gerenciados com um orquestrador de contêiner, eles podem ser movidos.</span><span class="sxs-lookup"><span data-stu-id="45b4e-111">You should assume that containers, like processes, are duplicated, killed, or, when managed with a container orchestrator, they might be moved.</span></span>

<span data-ttu-id="45b4e-112">Docker usa um recurso conhecido como um *sistema de arquivos de sobreposição* implementar um processo de cópia na gravação que armazena qualquer informações atualizadas sobre o sistema de arquivos raiz de um contêiner, em comparação comparado a imagem original na qual ele se baseia.</span><span class="sxs-lookup"><span data-stu-id="45b4e-112">Docker uses a feature known as an *overlay file system* to implement a copy-on-write process that stores any updated information to the root file system of a container, compared to the original image on which it is based.</span></span> <span data-ttu-id="45b4e-113">Essas alterações serão perdidas se o contêiner for excluído posteriormente do sistema.</span><span class="sxs-lookup"><span data-stu-id="45b4e-113">These changes are lost if the container is subsequently deleted from the system.</span></span> <span data-ttu-id="45b4e-114">Um contêiner, portanto, não tem armazenamento persistente por padrão.</span><span class="sxs-lookup"><span data-stu-id="45b4e-114">A container, therefore, does not have persistent storage by default.</span></span> <span data-ttu-id="45b4e-115">Embora seja possível salvar o estado de um contêiner, criação de um sistema em torno disso seria em conflito com o princípio de arquitetura do contêiner.</span><span class="sxs-lookup"><span data-stu-id="45b4e-115">Although it's possible to save the state of a container, designing a system around this would be in conflict with the principle of container architecture.</span></span>

<span data-ttu-id="45b4e-116">Para gerenciar dados persistentes em aplicativos do Docker, há soluções comuns:</span><span class="sxs-lookup"><span data-stu-id="45b4e-116">To manage persistent data in Docker applications, there are common solutions:</span></span>

-   <span data-ttu-id="45b4e-117">[**Volumes de dados**](https://docs.docker.com/engine/tutorials/dockervolumes/) esses remontam ao host, conforme observado apenas.</span><span class="sxs-lookup"><span data-stu-id="45b4e-117">[**Data volumes**](https://docs.docker.com/engine/tutorials/dockervolumes/) These mount to the host, as just noted.</span></span>

-   <span data-ttu-id="45b4e-118">[**Contêineres de volume de dados**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) eles fornecem armazenamento compartilhado em vários contêineres, usando um contêiner externo que pode ciclo.</span><span class="sxs-lookup"><span data-stu-id="45b4e-118">[**Data volume containers**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) These provide shared storage across containers, using an external container that can cycle.</span></span>

-   <span data-ttu-id="45b4e-119">[**Plug-ins de volume**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) esses montagem volumes em locais remotos, fornecendo a persistência de longo prazo.</span><span class="sxs-lookup"><span data-stu-id="45b4e-119">[**Volume Plugins**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) These mount volumes to remote locations, providing long-term persistence.</span></span>

-   <span data-ttu-id="45b4e-120">**Fontes de dados remotas** exemplos incluem bancos de dados SQL e não-SQL ou armazenar em cache serviços, como o Redis.</span><span class="sxs-lookup"><span data-stu-id="45b4e-120">**Remote data sources** Examples include SQL and NO-SQL databases or cache services like Redis.</span></span>

-   <span data-ttu-id="45b4e-121">[**O armazenamento do Azure**](https://docs.microsoft.com/azure/storage/) isso fornece a plataforma de distribuição geográfica como um armazenamento de serviço (PaaS), fornecendo o melhor dos contêineres de persistência de longo prazo como.</span><span class="sxs-lookup"><span data-stu-id="45b4e-121">[**Azure Storage**](https://docs.microsoft.com/azure/storage/) This provides geo distributable platform as a service (PaaS) storage, providing the best of containers as long-term persistence.</span></span>

<span data-ttu-id="45b4e-122">Volumes de dados são especialmente designados diretórios dentro de um ou mais contêineres que ignoram o [sistema de arquivos de união](https://docs.docker.com/glossary/?term=Union%20file%20system).</span><span class="sxs-lookup"><span data-stu-id="45b4e-122">Data volumes are specially designated directories within one or more containers that bypass the [Union File System](https://docs.docker.com/glossary/?term=Union%20file%20system).</span></span> <span data-ttu-id="45b4e-123">Volumes de dados são projetados para manter os dados, independentemente do ciclo de vida do contêiner.</span><span class="sxs-lookup"><span data-stu-id="45b4e-123">Data volumes are designed to maintain data, independent of the container's life cycle.</span></span> <span data-ttu-id="45b4e-124">Docker, portanto, nunca exclui automaticamente volumes quando você remove um contêiner, nem será volumes "coleta de lixo" que não são mais referenciados por um contêiner ele.</span><span class="sxs-lookup"><span data-stu-id="45b4e-124">Docker therefore never automatically deletes volumes when you remove a container, nor will it "garbage collect" volumes that are no longer referenced by a container.</span></span> <span data-ttu-id="45b4e-125">Sistema operacional do host pode procurar e editar os dados em qualquer volume livremente, que é apenas outro motivo para usar volumes de dados com moderação.</span><span class="sxs-lookup"><span data-stu-id="45b4e-125">The host operating system can browse and edit the data in any volume freely, which is just another reason to use data volumes sparingly.</span></span>

<span data-ttu-id="45b4e-126">Um [contêiner de volume de dados](https://docs.docker.com/glossary/?term=volume) é uma melhoria em relação a volumes de dados regulares.</span><span class="sxs-lookup"><span data-stu-id="45b4e-126">A [data volume container](https://docs.docker.com/glossary/?term=volume) is an improvement over regular data volumes.</span></span> <span data-ttu-id="45b4e-127">Ele é essencialmente um contêiner inativo que tem um ou mais volumes de dados criados dentro dele (conforme descrito anteriormente).</span><span class="sxs-lookup"><span data-stu-id="45b4e-127">It is essentially a dormant container that has one or more data volumes created within it (as described earlier).</span></span> <span data-ttu-id="45b4e-128">O contêiner de volume de dados dá acesso aos contêineres de um ponto de montagem central.</span><span class="sxs-lookup"><span data-stu-id="45b4e-128">The data volume container provides access to containers from a central mount point.</span></span> <span data-ttu-id="45b4e-129">A vantagem desse método de acesso é que abstrai o local dos dados originais, tornando o contêiner de dados de um ponto de montagem lógico.</span><span class="sxs-lookup"><span data-stu-id="45b4e-129">The benefit of this method of access is that it abstracts the location of the original data, making the data container a logical mount point.</span></span> <span data-ttu-id="45b4e-130">Ele também permite acessar os volumes de contêiner de dados para serem criados e destruídos, mantendo os dados persistentes em um contêiner dedicado de contêineres de "aplicativo".</span><span class="sxs-lookup"><span data-stu-id="45b4e-130">It also allows "application" containers accessing the data container volumes to be created and destroyed while keeping the data persistent in a dedicated container.</span></span>

<span data-ttu-id="45b4e-131">Figura 4-5 mostra que os volumes Docker regulares podem ser colocados em armazenamento fora dos contêineres de si, mas dentro dos limites físicos de servidor/VM do host.</span><span class="sxs-lookup"><span data-stu-id="45b4e-131">Figure 4-5 shows that regular Docker volumes can be placed on storage out of the containers themselves but within the host server/VM physical boundaries.</span></span> <span data-ttu-id="45b4e-132">*Volumes docker não tem a capacidade de usar um volume de um host de servidor/VM para outro*.</span><span class="sxs-lookup"><span data-stu-id="45b4e-132">*Docker volumes don't have the ability to use a volume from one host server/VM to another*.</span></span>

![](./media/image5.png)

<span data-ttu-id="45b4e-133">Figura 4-5: volumes de dados e fontes de dados externas para aplicativos de contêineres/contêineres</span><span class="sxs-lookup"><span data-stu-id="45b4e-133">Figure 4-5: Data volumes and external data sources for containers apps/containers</span></span>

<span data-ttu-id="45b4e-134">Devido à incapacidade de gerenciar dados compartilhados entre contêineres executados em hosts físicos separados, é recomendável que você não use volumes para dados de negócios, a menos que o host do Docker é uma host fixa/VM, porque ao usar contêineres do Docker em um orquestrador, contêineres devem ser movidos de um para outro host, dependendo das otimizações a ser executada pelo cluster.</span><span class="sxs-lookup"><span data-stu-id="45b4e-134">Due to the inability to manage data shared between containers that run on separate physical hosts, it is recommended that you not use volumes for business data unless the Docker host is a fixed host/VM, because when using Docker containers in an orchestrator, containers are expected to be moved from one to another host, depending on the optimizations to be performed by the cluster.</span></span>

<span data-ttu-id="45b4e-135">Portanto, os volumes de dados regulares são um bom mecanismo para trabalhar com arquivos de rastreamento, arquivos temporais ou qualquer conceito semelhante que não afetarão a consistência dos dados de negócios se ou quando seus contêineres são movidos entre vários hosts.</span><span class="sxs-lookup"><span data-stu-id="45b4e-135">Therefore, regular data volumes are a good mechanism to work with trace files, temporal files, or any similar concept that won't affect the business data consistency if or when your containers are moved across multiple hosts.</span></span>

<span data-ttu-id="45b4e-136">[Plug-ins de volume](https://docs.docker.com/engine/extend/plugins_volume/) fornecem dados em todos os hosts em um cluster.</span><span class="sxs-lookup"><span data-stu-id="45b4e-136">[Volume plug-ins](https://docs.docker.com/engine/extend/plugins_volume/) provide data across all hosts in a cluster.</span></span> <span data-ttu-id="45b4e-137">Embora nem todos os plug-ins de volume sejam criados igualmente, o plug-ins de volume normalmente fornecem armazenamento externo persistente confiável externalizado dos contêineres imutáveis.</span><span class="sxs-lookup"><span data-stu-id="45b4e-137">Although not all volume plug-ins are created equally, volume plug-ins typically provide externalized persistent reliable storage from the immutable containers.</span></span>

<span data-ttu-id="45b4e-138">Fontes de dados remotas e caches, como banco de dados SQL, DocumentDB ou um cache remoto como o Redis seria o mesmo que o desenvolvimento sem contêineres.</span><span class="sxs-lookup"><span data-stu-id="45b4e-138">Remote data sources and caches like SQL Database, DocumentDB, or a remote cache like Redis would be the same as developing without containers.</span></span> <span data-ttu-id="45b4e-139">Essa é uma das maneiras preferenciais e comprovadas, para armazenar dados de aplicativo de negócios.</span><span class="sxs-lookup"><span data-stu-id="45b4e-139">This is one of the preferred, and proven, ways to store business application data.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="45b4e-140">[Anterior](monolithic-applications.md)
[Próximo](soa-applications.md)</span><span class="sxs-lookup"><span data-stu-id="45b4e-140">[Previous](monolithic-applications.md)
[Next](soa-applications.md)</span></span>
