---
title: Aplicativos monolíticos
description: Containerized Docker Application Lifecycle with Microsoft Platform and Tools (Ciclo de vida de aplicativo do Docker em contêineres com a plataforma e as ferramentas da Microsoft)
ms.prod: .net
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 9be0ac088a90bd34bb93550925d2e0aee5b91a21
ms.sourcegitcommit: 9a4fe1a1c37b26532654b4bbe22d702237950009
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/16/2018
---
# <a name="monolithic-applications"></a><span data-ttu-id="d1c43-103">Aplicativos monolíticos</span><span class="sxs-lookup"><span data-stu-id="d1c43-103">Monolithic applications</span></span>

<span data-ttu-id="d1c43-104">Nesse cenário, você está criando um aplicativo da web simples e monolítico ou serviço e implantá-lo como um contêiner.</span><span class="sxs-lookup"><span data-stu-id="d1c43-104">In this scenario, you are building a single and monolithic web application or service and deploying it as a container.</span></span> <span data-ttu-id="d1c43-105">Dentro do aplicativo, a estrutura pode não ser monolítica; ele pode abranger vários componentes, bibliotecas ou até mesmo camadas (camada de aplicativo, camada de domínio, camada de acesso a dados, etc.).</span><span class="sxs-lookup"><span data-stu-id="d1c43-105">Within the application, the structure might not be monolithic; it might comprise several libraries, components, or even layers (application layer, domain layer, data access layer, etc.).</span></span> <span data-ttu-id="d1c43-106">Externamente, é um único contêiner, como um único processo, um único aplicativo web ou um único serviço.</span><span class="sxs-lookup"><span data-stu-id="d1c43-106">Externally, it is a single container, like a single process, single web application, or single service.</span></span>

<span data-ttu-id="d1c43-107">Para gerenciar esse modelo, implante um contêiner único para representar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1c43-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="d1c43-108">Para dimensioná-lo, basta Adicione algumas cópias mais com um balanceador de carga na frente.</span><span class="sxs-lookup"><span data-stu-id="d1c43-108">To scale it, just add a few more copies with a load balancer in front.</span></span> <span data-ttu-id="d1c43-109">A simplicidade é proveniente do gerenciamento de uma única implantação em um único contêiner ou a máquina virtual (VM).</span><span class="sxs-lookup"><span data-stu-id="d1c43-109">The simplicity comes from managing a single deployment in a single container or virtual machine (VM).</span></span>

<span data-ttu-id="d1c43-110">A entidade de segurança que um contêiner não apenas uma coisa e faz isso em um processo, a seguir o padrão monolítico está em conflito.</span><span class="sxs-lookup"><span data-stu-id="d1c43-110">Following the principal that a container does one thing only, and does it in one process, the monolithic pattern is in conflict.</span></span> <span data-ttu-id="d1c43-111">Você pode incluir vários componentes/bibliotecas ou camadas internas dentro de cada contêiner, conforme ilustrado na Figura 4-1.</span><span class="sxs-lookup"><span data-stu-id="d1c43-111">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 4-1.</span></span>

![](./media/image1.png)

<span data-ttu-id="d1c43-112">Figura 4-1: um exemplo de arquitetura do aplicativo monolítico</span><span class="sxs-lookup"><span data-stu-id="d1c43-112">Figure 4-1: An example of monolithic application architecture</span></span>

<span data-ttu-id="d1c43-113">A desvantagem dessa abordagem é fornecido se ou quando o aplicativo cresce, solicitá-la para dimensionar.</span><span class="sxs-lookup"><span data-stu-id="d1c43-113">The downside to this approach comes if or when the application grows, requiring it to scale.</span></span> <span data-ttu-id="d1c43-114">Se o aplicativo inteiro for dimensionado, isso não será realmente um problema.</span><span class="sxs-lookup"><span data-stu-id="d1c43-114">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="d1c43-115">No entanto, na maioria dos casos, algumas partes do aplicativo são os pontos de restrição que exigem o dimensionamento, enquanto que outros componentes são usados com menor.</span><span class="sxs-lookup"><span data-stu-id="d1c43-115">However, in most cases, a few parts of the application are the choke points that require scaling, whereas other components are used less.</span></span>

<span data-ttu-id="d1c43-116">Usando o exemplo de comércio eletrônico típico, você provavelmente precisa é de dimensionar o componente de informações do produto.</span><span class="sxs-lookup"><span data-stu-id="d1c43-116">Using the typical e-commerce example, what you likely need is to scale the product information component.</span></span> <span data-ttu-id="d1c43-117">Uma quantidade muito maior de clientes procura produtos em vez de comprá-los.</span><span class="sxs-lookup"><span data-stu-id="d1c43-117">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="d1c43-118">Mais clientes usam o carrinho em vez do pipeline de pagamento.</span><span class="sxs-lookup"><span data-stu-id="d1c43-118">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="d1c43-119">Menos clientes fazem comentários ou exibem o histórico de compras.</span><span class="sxs-lookup"><span data-stu-id="d1c43-119">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="d1c43-120">E você provavelmente tem apenas uma série de funcionários, em uma única região, o que precisa para gerenciar o conteúdo e campanhas de marketing.</span><span class="sxs-lookup"><span data-stu-id="d1c43-120">And you likely have only a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="d1c43-121">Dimensionando o design monolítico, todo o código é implantado várias vezes.</span><span class="sxs-lookup"><span data-stu-id="d1c43-121">By scaling the monolithic design, all of the code is deployed multiple times.</span></span>

<span data-ttu-id="d1c43-122">Além de "escala-tudo" problema, alterações em um único componente exigem que o teste completo de todo o aplicativo, bem como uma reimplantação completa de todas as instâncias.</span><span class="sxs-lookup"><span data-stu-id="d1c43-122">In addition to the "scale-everything" problem, changes to a single component require complete retesting of the entire application as well as a complete redeployment of all the instances.</span></span>

<span data-ttu-id="d1c43-123">A abordagem monolítica é comum, e muitas organizações estão desenvolvendo com esse método de arquitetura.</span><span class="sxs-lookup"><span data-stu-id="d1c43-123">The monolithic approach is common, and many organizations are developing with this architectural method.</span></span> <span data-ttu-id="d1c43-124">Muitos bom desfrutam resultados suficientes, enquanto outros encontram limites.</span><span class="sxs-lookup"><span data-stu-id="d1c43-124">Many enjoy good enough results, whereas others encounter limits.</span></span> <span data-ttu-id="d1c43-125">Muitos criados seus aplicativos no modelo porque as ferramentas e infraestrutura foram muito difícil criar SOAs, e eles não verão a necessidade, até que o aplicativo aumentou.</span><span class="sxs-lookup"><span data-stu-id="d1c43-125">Many designed their applications in this model because the tools and infrastructure were too difficult to build SOAs, and they didn't see the need—until the app grew.</span></span>

<span data-ttu-id="d1c43-126">De uma perspectiva de infraestrutura, cada servidor pode executar muitos aplicativos dentro do mesmo host e tiver uma taxa aceitável de eficiência em seu uso de recursos, como mostrado na Figura 4-2.</span><span class="sxs-lookup"><span data-stu-id="d1c43-126">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in your resources usage, as shown in Figure 4-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="d1c43-127">Figura 4-2: um host executando vários aplicativos/contêineres</span><span class="sxs-lookup"><span data-stu-id="d1c43-127">Figure 4-2: A host running multiple apps/containers</span></span>

<span data-ttu-id="d1c43-128">Você pode implantar aplicativos monolíticos no Azure usando VMs dedicadas para cada instância.</span><span class="sxs-lookup"><span data-stu-id="d1c43-128">You can deploy monolithic applications in Azure by using dedicated VMs for each instance.</span></span> <span data-ttu-id="d1c43-129">Usando [conjuntos de escala de VM do Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), você pode dimensionar as VMs facilmente.</span><span class="sxs-lookup"><span data-stu-id="d1c43-129">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can scale the VMs easily.</span></span> <span data-ttu-id="d1c43-130">Os [Serviços de Aplicativos do Azure](https://azure.microsoft.com/en-us/services/app-service/) podem executar aplicativos monolíticos e dimensionar instâncias com facilidade, sem a necessidade de gerenciar as VMs.</span><span class="sxs-lookup"><span data-stu-id="d1c43-130">[Azure App Services](https://azure.microsoft.com/en-us/services/app-service/) can run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="d1c43-131">Desde 2016, serviços de aplicativo do Azure pode executar instâncias únicas de contêineres do Docker, também, simplificando a implantação.</span><span class="sxs-lookup"><span data-stu-id="d1c43-131">Since 2016, Azure App Services can run single instances of Docker containers, as well, simplifying the deployment.</span></span> <span data-ttu-id="d1c43-132">E, usando o Docker, você pode implantar uma única VM como um host Docker e executar várias instâncias.</span><span class="sxs-lookup"><span data-stu-id="d1c43-132">And, using Docker, you can deploy a single VM as a Docker host and run multiple instances.</span></span> <span data-ttu-id="d1c43-133">Usando o balanceador do Azure, conforme ilustrado na Figura 4-3, você pode gerenciar a escala.</span><span class="sxs-lookup"><span data-stu-id="d1c43-133">Using the Azure balancer, as illustrated in the Figure 4-3, you can manage scaling.</span></span>

![](./media/image3.png)

<span data-ttu-id="d1c43-134">Figura 4-3: vários hosts expansão um único aplicativo aplicativos/contêineres do Docker</span><span class="sxs-lookup"><span data-stu-id="d1c43-134">Figure 4-3: Multiple hosts scaling-out a single Docker application apps/containers</span></span>

<span data-ttu-id="d1c43-135">Você pode gerenciar a implantação em vários hosts por meio de técnicas tradicionais de implantação.</span><span class="sxs-lookup"><span data-stu-id="d1c43-135">You can manage the deployment to the various hosts via traditional deployment techniques.</span></span> <span data-ttu-id="d1c43-136">Você pode gerenciar os hosts de Docker usando comandos como `docker run` manualmente, por meio de automação, como os pipelines de entrega contínua (CD), que explicaremos mais tarde neste livro eletrônico.</span><span class="sxs-lookup"><span data-stu-id="d1c43-136">You can manage Docker hosts by using commands like `docker run` manually, through automation such as Continuous Delivery (CD) pipelines, which we explain later in this e-book.</span></span>

## <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="d1c43-137">Aplicativo monolítico implantado como um contêiner</span><span class="sxs-lookup"><span data-stu-id="d1c43-137">Monolithic application deployed as a container</span></span>

<span data-ttu-id="d1c43-138">Há benefícios de usar contêineres para gerenciar implantações monolíticos.</span><span class="sxs-lookup"><span data-stu-id="d1c43-138">There are benefits to using containers to manage monolithic deployments.</span></span> <span data-ttu-id="d1c43-139">O dimensionamento das instâncias de contêineres é muito mais rápido e fácil do que a implantação de VMs adicionais.</span><span class="sxs-lookup"><span data-stu-id="d1c43-139">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="d1c43-140">Embora os conjuntos de escala de VM são um ótimo recurso para dimensionar VMs, que são necessários para hospedar seus contêineres do Docker, eles têm tempo para configurar.</span><span class="sxs-lookup"><span data-stu-id="d1c43-140">Although VM Scale Sets are a great feature to scale VMs, which are required to host your Docker containers, they take time to set up.</span></span> <span data-ttu-id="d1c43-141">Quando implantada como instâncias de aplicativo, a configuração do aplicativo é gerenciada como parte da VM.</span><span class="sxs-lookup"><span data-stu-id="d1c43-141">When deployed as app instances, the configuration of the app is managed as part of the VM.</span></span>

<span data-ttu-id="d1c43-142">Implantar atualizações como imagens do Docker é muito mais rápido e eficiente em termos de rede.</span><span class="sxs-lookup"><span data-stu-id="d1c43-142">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="d1c43-143">As instâncias de Vn podem ser configuradas nos mesmos hosts que suas instâncias Vn-1, eliminando custos adicionais resultantes de VMs adicionais.</span><span class="sxs-lookup"><span data-stu-id="d1c43-143">The Vn instances can be set up on the same hosts as your Vn-1 instances, eliminating added costs resulting from additional VMs.</span></span> <span data-ttu-id="d1c43-144">Imagens do docker geralmente iniciam em segundos, acelerando distribuições.</span><span class="sxs-lookup"><span data-stu-id="d1c43-144">Docker images typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="d1c43-145">Subdividir uma instância de Docker é tão fácil quanto invocando o `docker stop` comando, normalmente Concluindo em menos de um segundo.</span><span class="sxs-lookup"><span data-stu-id="d1c43-145">Tearing down a Docker instance is as easy as invoking the `docker stop` command, typically completing in less than a second.</span></span>

<span data-ttu-id="d1c43-146">Como os contêineres são inerentemente imutáveis, por design, você nunca precisa se preocupar sobre VMs corrompidas porque esqueceu de um script de atualização de conta para alguma configuração específica ou o arquivo deixado no disco.</span><span class="sxs-lookup"><span data-stu-id="d1c43-146">Because containers are inherently immutable, by design, you never need to worry about corrupted VMs because an update script forgot to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="d1c43-147">Embora monolíticos aplicativos podem se beneficiar do Docker, estejamos tocando em apenas as dicas de benefícios.</span><span class="sxs-lookup"><span data-stu-id="d1c43-147">Although monolithic apps can benefit from Docker, we're touching on only the tips of the benefits.</span></span> <span data-ttu-id="d1c43-148">Os maiores benefícios de gerenciar contêineres vem da implantação de orchestrators de contêiner que gerenciam a várias instâncias e ciclo de vida de cada instância de contêiner.</span><span class="sxs-lookup"><span data-stu-id="d1c43-148">The larger benefits of managing containers comes from deploying with container orchestrators that manage the various instances and life cycle of each container instance.</span></span> <span data-ttu-id="d1c43-149">Dividir o aplicativo monolítico em subsistemas que podem ser dimensionados, desenvolvidos e implantados individualmente é o ponto de entrada no universo dos microsserviços.</span><span class="sxs-lookup"><span data-stu-id="d1c43-149">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

## <a name="publishing-a-single-docker-container-app-to-azure-app-service"></a><span data-ttu-id="d1c43-150">Publicar um único aplicativo de contêiner do Docker do serviço de aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="d1c43-150">Publishing a single Docker container app to Azure App Service</span></span>

<span data-ttu-id="d1c43-151">Ou porque você deseja obter uma validação rápida de um contêiner implantado no Azure ou porque o aplicativo é simplesmente um aplicativo único contêiner, serviços de aplicativo do Azure fornece uma ótima maneira de fornecer serviços de contêiner único escalonáveis.</span><span class="sxs-lookup"><span data-stu-id="d1c43-151">Either because you want to get a quick validation of a container deployed to Azure or because the app is simply a single-container app, Azure App Services provides a great way to provide scalable single-container services.</span></span>

<span data-ttu-id="d1c43-152">Usar o serviço de aplicativo do Azure é intuitiva e você pode obter e em execução rapidamente, porque ele fornece excelente Git integração entrem em seu código, compile-o no Microsoft Visual Studio e implantá-la diretamente do Azure.</span><span class="sxs-lookup"><span data-stu-id="d1c43-152">Using Azure App Service is intuitive and you can get up and running quickly because it provides great Git integration to take your code, build it in Microsoft Visual Studio, and directly deploy it to Azure.</span></span> <span data-ttu-id="d1c43-153">Mas, tradicionalmente (com nenhuma Docker), se precisar de outros recursos, estruturas ou dependências que não têm suporte nos serviços de aplicativo, é necessário aguardar até que a equipe do Azure atualiza essas dependências no serviço de aplicativo ou alternado para outros serviços, como Service Fabric, serviços de nuvem ou até mesmo simples VMs, para que você tenha mais controle e pode instalar um componente necessário ou a estrutura do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1c43-153">But, traditionally (with no Docker), if you needed other capabilities, frameworks, or dependencies that aren't supported in App Services, you needed to wait for it until the Azure team updates those dependencies in App Service or switched to other services like Service Fabric, Cloud Services, or even plain VMs, for which you have further control and can install a required component or framework for your application.</span></span>

<span data-ttu-id="d1c43-154">Agora, no entanto, (anunciadas no Microsoft Connect 2016 em novembro de 2016) e conforme mostrado na Figura 4‑4, ao usar o Visual Studio de 2017, o suporte de contêiner no serviço de aplicativo do Azure oferece a capacidade de incluir tudo o que você deseja em seu ambiente de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1c43-154">Now, however, (announced at Microsoft Connect 2016 in November 2016) and as shown in Figure 4‑4, when using Visual Studio 2017, container support in Azure App Service gives you the ability to include whatever you want in your app environment.</span></span> <span data-ttu-id="d1c43-155">Se você adicionou uma dependência ao seu aplicativo, como você o está executando em um contêiner, você receberá a capacidade de incluir essas dependências em sua imagem Dockerfile ou Docker.</span><span class="sxs-lookup"><span data-stu-id="d1c43-155">If you added a dependency to your app, because you are running it in a container, you get the capability of including those dependencies in your Dockerfile or Docker image.</span></span>

![](./media/image4.png)

<span data-ttu-id="d1c43-156">Figura 4-4: publicar um contêiner para o serviço de aplicativo do Azure de aplicativos do Visual Studio/contêineres</span><span class="sxs-lookup"><span data-stu-id="d1c43-156">Figure 4-4: Publishing a container to Azure App Service from Visual Studio apps/containers</span></span>

<span data-ttu-id="d1c43-157">Figura 4-4 também mostra o fluxo de publicação envia uma imagem por meio de um registro de contêiner, que pode ser o registro de contêiner do Azure (um registro de perto para suas implantações no Azure e protegido por contas e grupos do Active Directory do Azure) ou qualquer outro registro de Docker como os registros de Hub do Docker ou local.</span><span class="sxs-lookup"><span data-stu-id="d1c43-157">Figure 4-4 also shows that the publish flow pushes an image through a Container Registry, which can be the Azure Container Registry (a registry near to your deployments in Azure and secured by Azure Active Directory groups and accounts) or any other Docker Registry like Docker Hub or on-premises registries.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="d1c43-158">[Anterior] (comum-contêiner-design-principles.md) [Avançar] (state-and-data-in-docker-applications.md)</span><span class="sxs-lookup"><span data-stu-id="d1c43-158">[Previous] (common-container-design-principles.md) [Next] (state-and-data-in-docker-applications.md)</span></span>
