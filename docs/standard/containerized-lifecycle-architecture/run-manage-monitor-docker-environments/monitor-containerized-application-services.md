---
title: Monitorar serviços de aplicativos em contêineres
description: Containerized Docker Application Lifecycle with Microsoft Platform and Tools (Ciclo de vida de aplicativo do Docker em contêineres com a plataforma e as ferramentas da Microsoft)
ms.prod: .net
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: b3ffa6c230176e1de6269ed0b30d05711ff78704
ms.sourcegitcommit: 9a4fe1a1c37b26532654b4bbe22d702237950009
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/16/2018
---
# <a name="monitor-containerized-application-services"></a><span data-ttu-id="a64f8-103">Monitorar serviços de aplicativos em contêineres</span><span class="sxs-lookup"><span data-stu-id="a64f8-103">Monitor containerized application services</span></span>

<span data-ttu-id="a64f8-104">É importante para aplicativos dividido em vários contêineres e microservices para ter uma maneira de monitorar e analisar o comportamento do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a64f8-104">It is critical for applications split into multiple containers and microservices to have a way to monitor and analyze the behavior of the application.</span></span>

## <a name="microsoft-application-insights"></a><span data-ttu-id="a64f8-105">Microsoft Application Insights</span><span class="sxs-lookup"><span data-stu-id="a64f8-105">Microsoft Application Insights</span></span>

<span data-ttu-id="a64f8-106">[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) é um serviço de análise extensível que monitora seus aplicativos em tempo real.</span><span class="sxs-lookup"><span data-stu-id="a64f8-106">[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) is an extensible analytics service that monitors your live application.</span></span> <span data-ttu-id="a64f8-107">Ele ajuda a detectar e diagnosticar problemas de desempenho e a entender o que os usuários, na verdade, fazem com seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a64f8-107">It helps you to detect and diagnose performance issues and to understand what users actually do with your app.</span></span> <span data-ttu-id="a64f8-108">Ele foi projetado para desenvolvedores, com a intenção de ajudá-lo a melhorar continuamente o desempenho e a usabilidade dos seus serviços ou aplicativos.</span><span class="sxs-lookup"><span data-stu-id="a64f8-108">It's designed for developers, with the intent of helping you to continuously improve the performance and usability of your services or applications.</span></span> <span data-ttu-id="a64f8-109">Application Insights trabalha com web/serviços e autônomo aplicativos em uma ampla variedade de plataformas, como .NET, Java, Node. js e muitas outras plataformas, hospedado no local ou na nuvem.</span><span class="sxs-lookup"><span data-stu-id="a64f8-109">Application Insights works with both web/services and standalone apps on a wide variety of platforms like .NET, Java, Node.js and many other platforms, hosted on-premises or in the cloud.</span></span>

### <a name="analyzing-docker-apps-in-qa-environments-using-application-insights"></a><span data-ttu-id="a64f8-110">Analisando Docker aplicativos em ambientes de controle de qualidade usando o Application Insights</span><span class="sxs-lookup"><span data-stu-id="a64f8-110">Analyzing Docker apps in QA environments using Application Insights</span></span>

<span data-ttu-id="a64f8-111">Relacionada com o Docker, você pode listar os eventos de ciclo de vida e contadores de desempenho de contêineres do Docker no Application Insights.</span><span class="sxs-lookup"><span data-stu-id="a64f8-111">As it pertains to Docker, you can chart life-cycle events and performance counters from Docker containers on Application Insights.</span></span> <span data-ttu-id="a64f8-112">Você só precisa executar o [imagem Application Insights Docker](https://hub.docker.com/r/microsoft/applicationinsights/) como um contêiner no seu host e será exibir contadores de desempenho para o host, bem como para as outras imagens do Docker.</span><span class="sxs-lookup"><span data-stu-id="a64f8-112">You just need to run the [Application Insights Docker image](https://hub.docker.com/r/microsoft/applicationinsights/) as a container in your host, and it will display performance counters for the host as well as for the other Docker images.</span></span> <span data-ttu-id="a64f8-113">Esta imagem de aplicativo Insights Docker (Figura 6 - 1) ajuda você a monitorar os aplicativos em contêineres por coletar telemetria sobre o desempenho e a atividade do seu host (ou seja, suas VMs do Linux) do Docker, contêineres do Docker e os aplicativos em execução dentro deles.</span><span class="sxs-lookup"><span data-stu-id="a64f8-113">This Application Insights Docker image (Figure 6-1) helps you to monitor your containerized applications by collecting telemetry about the performance and activity of your Docker host (that is, your Linux VMs), Docker containers and the applications running within them.</span></span>

![exemplo](./media/image1.png)

<span data-ttu-id="a64f8-115">Figura 6-1: Application Insights monitoramento contêineres e hosts de Docker</span><span class="sxs-lookup"><span data-stu-id="a64f8-115">Figure 6-1: Application Insights monitoring Docker hosts and containers</span></span>

<span data-ttu-id="a64f8-116">Quando você executa o [imagem Application Insights Docker](https://hub.docker.com/r/microsoft/applicationinsights/) no host do Docker, você se beneficiar com o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a64f8-116">When you run the [Application Insights Docker image](https://hub.docker.com/r/microsoft/applicationinsights/) on your Docker host, you benefit from the following:</span></span>

-   <span data-ttu-id="a64f8-117">Telemetria sobre todos os contêineres em execução no host de ciclo de vida – Iniciar, parar e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="a64f8-117">Life-cycle telemetry about all the containers running on the host—start, stop, and so on.</span></span>

-   <span data-ttu-id="a64f8-118">Contadores de desempenho para todos os contêineres: CPU, memória, o uso de rede e muito mais.</span><span class="sxs-lookup"><span data-stu-id="a64f8-118">Performance counters for all the containers: CPU, memory, network usage, and more.</span></span>

-   <span data-ttu-id="a64f8-119">Se você instalou o também [SDK do Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-asp-net) dos aplicativos em execução nos contêineres, telemetria desses aplicativos terão propriedades adicionais que identifica a máquina host e o contêiner.</span><span class="sxs-lookup"><span data-stu-id="a64f8-119">If you also installed [Application Insights SDK](https://docs.microsoft.com/azure/application-insights/app-insights-asp-net) in the apps running in the containers, all the telemetry of those apps will have additional properties identifying the container and host machine.</span></span> <span data-ttu-id="a64f8-120">Portanto, por exemplo, se você tiver instâncias de um aplicativo em execução em mais de um host, você facilmente poderá filtrar a telemetria do seu aplicativo pelo host.</span><span class="sxs-lookup"><span data-stu-id="a64f8-120">So, for example, if you have instances of an app running in more than one host, you'll easily be able to filter your app telemetry by host.</span></span>

### <a name="setting-up-application-insights-to-monitor-docker-applications-and-docker-hosts"></a><span data-ttu-id="a64f8-121">Configurar o Application Insights para monitorar aplicativos do Docker e hosts de Docker</span><span class="sxs-lookup"><span data-stu-id="a64f8-121">Setting up Application Insights to monitor Docker applications and Docker hosts</span></span>

<span data-ttu-id="a64f8-122">Para criar um recurso do Application Insights, siga as instruções nos artigos apresentados na lista a seguir.</span><span class="sxs-lookup"><span data-stu-id="a64f8-122">To create an Application Insights resource, follow the instructions in the articles presented in the list that follows.</span></span> <span data-ttu-id="a64f8-123">Portal do Azure criará o script necessário para você.</span><span class="sxs-lookup"><span data-stu-id="a64f8-123">Azure Portal will create the necessary script for you.</span></span>

-   <span data-ttu-id="a64f8-124">**Monitore aplicativos de Docker no Application Insights:**  [https://docs.microsoft.com/azure/application-insights/app-insights-docker](https://docs.microsoft.com/azure/application-insights/app-insights-docker)</span><span class="sxs-lookup"><span data-stu-id="a64f8-124">**Monitor Docker applications in Application Insights:**  [https://docs.microsoft.com/azure/application-insights/app-insights-docker](https://docs.microsoft.com/azure/application-insights/app-insights-docker)</span></span>

-   <span data-ttu-id="a64f8-125">**Imagem de Docker Insights do aplicativo no Hub do Docker e Github:**</span><span class="sxs-lookup"><span data-stu-id="a64f8-125">**Application Insights Docker image at Docker Hub and Github:**</span></span>  
<span data-ttu-id="a64f8-126">[https://hub.docker.com/r/microsoft/applicationinsights/](https://hub.docker.com/r/microsoft/applicationinsights/) e <https://github.com/Microsoft/ApplicationInsights-Docker></span><span class="sxs-lookup"><span data-stu-id="a64f8-126">[https://hub.docker.com/r/microsoft/applicationinsights/](https://hub.docker.com/r/microsoft/applicationinsights/) and <https://github.com/Microsoft/ApplicationInsights-Docker></span></span>

-   <span data-ttu-id="a64f8-127">**Configure o Application Insights para ASP.NET:**</span><span class="sxs-lookup"><span data-stu-id="a64f8-127">**Set up Application Insights for ASP.NET:**</span></span>  
[https://docs.microsoft.com/azure/application-insights/app-insights-asp-net](https://docs.microsoft.com/azure/application-insights/app-insights-asp-net)

-   <span data-ttu-id="a64f8-128">**Application Insights para páginas da web:**</span><span class="sxs-lookup"><span data-stu-id="a64f8-128">**Application Insights for web pages:**</span></span>  
<https://docs.microsoft.com/azure/application-insights/app-insights-javascript>

## <a name="microsoft-operations-management-suite"></a><span data-ttu-id="a64f8-129">Microsoft Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="a64f8-129">Microsoft Operations Management Suite</span></span>

<span data-ttu-id="a64f8-130">[Operations Management Suite](http://microsoft.com/oms) é uma solução de gerenciamento de TI simplificada que fornece análise de logs, automação, backup e recuperação de site.</span><span class="sxs-lookup"><span data-stu-id="a64f8-130">[Operations Management Suite](http://microsoft.com/oms) is a simplified IT management solution that provides log analytics, automation, backup, and site recovery.</span></span> <span data-ttu-id="a64f8-131">Com base em [consultas](https://blogs.technet.microsoft.com/msoms/2016/01/21/easy-microsoft-operations-management-suite-search-queries/) no Operations Management Suite, você pode gerar [alertas](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-monitoring-alerts) e defina correção via [automação do Azure](https://docs.microsoft.com/azure/automation/).</span><span class="sxs-lookup"><span data-stu-id="a64f8-131">Based on [queries](https://blogs.technet.microsoft.com/msoms/2016/01/21/easy-microsoft-operations-management-suite-search-queries/) in Operations Management Suite, you can raise [alerts](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-monitoring-alerts) and set remediation via [Azure Automation](https://docs.microsoft.com/azure/automation/).</span></span> <span data-ttu-id="a64f8-132">Ele também integra-se perfeitamente com suas soluções existentes de gerenciamento para fornecer uma única exibição de painel de controle.</span><span class="sxs-lookup"><span data-stu-id="a64f8-132">It also seamlessly integrates with your existing management solutions to provide a single pane-of-glass view.</span></span> <span data-ttu-id="a64f8-133">Operations Management Suite ajuda você a gerenciar e proteger seus locais e infraestrutura de nuvem.</span><span class="sxs-lookup"><span data-stu-id="a64f8-133">Operations Management Suite helps you to manage and protect your on-premises and cloud infrastructure.</span></span>

### <a name="operations-management-suitehttpmicrosoftcomoms-container-solution-for-docker"></a><span data-ttu-id="a64f8-134">[Operations Management Suite](http://microsoft.com/oms) solução de contêiner para Docker</span><span class="sxs-lookup"><span data-stu-id="a64f8-134">[Operations Management Suite](http://microsoft.com/oms) Container Solution for Docker</span></span>

<span data-ttu-id="a64f8-135">Além de fornecer serviços importantes por conta própria, a solução de contêiner do Operations Management Suite pode gerenciar e monitorar o hosts de Docker e contêineres, mostrando informações sobre onde seus contêineres e hosts de contêiner são, quais contêineres estão em execução ou com falha e logs de daemon e o contêiner do Docker enviado ao *stdout* e *stderr*.</span><span class="sxs-lookup"><span data-stu-id="a64f8-135">In addition to providing valuable services on its own, the Operations Management Suite Container Solution can manage and monitor Docker hosts and containers by showing information about where your containers and container hosts are, which containers are running or failed, and Docker daemon and container logs sent to *stdout* and *stderr*.</span></span> <span data-ttu-id="a64f8-136">Ele também mostra as métricas de desempenho como CPU, memória, rede e armazenamento para o contêiner e os hosts para ajudar você a solucionar problemas e encontrar os contêineres vizinhos barulhentos.</span><span class="sxs-lookup"><span data-stu-id="a64f8-136">It also shows performance metrics such as CPU, memory, network, and storage for the container and hosts to help you troubleshoot and find noisy neighbor containers.</span></span>

![](./media/image2.png)

<span data-ttu-id="a64f8-137">Figura 6-2: informações sobre contêineres do Docker mostrado pelo Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="a64f8-137">Figure 6-2: Information about Docker containers shown by Operations Management Suite</span></span>

<span data-ttu-id="a64f8-138">Application Insights e Operations Management Suite se concentrar no monitoramento de atividades; No entanto, Application Insights concentra-se mais sobre como monitorar os próprios aplicativos graças ao seu SDK em execução dentro do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a64f8-138">Application Insights and Operations Management Suite both focus on monitoring activities; however, Application Insights focuses more on monitoring the apps themselves thanks to its SDK running within the app.</span></span> <span data-ttu-id="a64f8-139">No entanto, Operations Management Suite enfoca muito mais a infraestrutura de hosts, além de oferecer uma análise detalhada em logs em escala, proporcionando um sistema muito flexível de pesquisa/consulta controlada por dados.</span><span class="sxs-lookup"><span data-stu-id="a64f8-139">However, Operations Management Suite focuses much more on the infrastructure around the hosts, plus it offers deep analysis on logs at scale while providing a very flexible data-driven search/query system.</span></span>

<span data-ttu-id="a64f8-140">Como o Operations Management Suite é implementado como um serviço baseado em nuvem, você pode colocá-lo em funcionamento rapidamente com investimento mínimo nos serviços de infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="a64f8-140">Because Operations Management Suite is implemented as a cloud-based service, you can have it up and running quickly with minimal investment in infrastructure services.</span></span> <span data-ttu-id="a64f8-141">Novos recursos são entregues automaticamente, economizando de manutenção contínua e custos de atualização.</span><span class="sxs-lookup"><span data-stu-id="a64f8-141">New features are delivered automatically, saving you from ongoing maintenance and upgrade costs.</span></span>

<span data-ttu-id="a64f8-142">Usando a solução de contêiner do Operations Management Suite, você pode fazer o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a64f8-142">Using Operations Management Suite Container Solution, you can do the following:</span></span>

-   <span data-ttu-id="a64f8-143">Centralizar e correlacionar milhões de registros de contêineres do Docker em escala</span><span class="sxs-lookup"><span data-stu-id="a64f8-143">Centralize and correlate millions of logs from Docker containers at scale</span></span>

-   <span data-ttu-id="a64f8-144">Ver informações sobre todos os hosts de contêiner em um único local</span><span class="sxs-lookup"><span data-stu-id="a64f8-144">See information about all container hosts in a single location</span></span>

-   <span data-ttu-id="a64f8-145">Saber quais contêineres estão em execução, que imagem que está sendo executado e onde eles estão executando</span><span class="sxs-lookup"><span data-stu-id="a64f8-145">Know which containers are running, what image they're running, and where they're running</span></span>

-   <span data-ttu-id="a64f8-146">Diagnosticar rapidamente os contêineres de "vizinho barulhento" que podem causar problemas em hosts de contêiner</span><span class="sxs-lookup"><span data-stu-id="a64f8-146">Quickly diagnose "noisy neighbor" containers that can cause problems on container hosts</span></span>

-   <span data-ttu-id="a64f8-147">Consulte uma trilha de auditoria para ações em contêineres</span><span class="sxs-lookup"><span data-stu-id="a64f8-147">See an audit trail for actions on containers</span></span>

-   <span data-ttu-id="a64f8-148">Solucionar problemas exibindo e pesquisando logs centralizados sem remoto para os hosts de Docker</span><span class="sxs-lookup"><span data-stu-id="a64f8-148">Troubleshoot by viewing and searching centralized logs without remoting to the Docker hosts</span></span>

-   <span data-ttu-id="a64f8-149">Localizar contêineres que podem ser "vizinhos ruídos" e o consumo de recursos em excesso em um host</span><span class="sxs-lookup"><span data-stu-id="a64f8-149">Find containers that might be "noisy neighbors" and consuming excess resources on a host</span></span>

-   <span data-ttu-id="a64f8-150">Exibir centralizado de CPU, memória, armazenamento e informações de uso e desempenho de rede para contêineres</span><span class="sxs-lookup"><span data-stu-id="a64f8-150">View centralized CPU, memory, storage, and network usage and performance information for containers</span></span>

-   <span data-ttu-id="a64f8-151">Gerar testar contêineres do Docker com automação do Azure</span><span class="sxs-lookup"><span data-stu-id="a64f8-151">Generate test Docker containers with Azure Automation</span></span>

<span data-ttu-id="a64f8-152">Você pode ver informações sobre o desempenho executando consultas como tipo = Perf, conforme mostrado na Figura 6-3.</span><span class="sxs-lookup"><span data-stu-id="a64f8-152">You can see performance information by running queries like Type=Perf, as shown in Figure 6-3.</span></span>

![DockerPerfMetricsView](./media/image3.png)<span data-ttu-id="a64f8-154">{width="5.78625in" height="3.25in"}</span><span class="sxs-lookup"><span data-stu-id="a64f8-154">{width="5.78625in" height="3.25in"}</span></span>

<span data-ttu-id="a64f8-155">Figura 6-3: métricas de desempenho dos hosts de Docker mostrados pelo Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="a64f8-155">Figure 6-3: Performance metrics of Docker hosts shown by Operations Management Suite</span></span>

<span data-ttu-id="a64f8-156">Salvar consultas também é um recurso padrão do Operations Management Suite e pode ajudar a manter as consultas que você tenha achado útil e descobre tendências em seu sistema.</span><span class="sxs-lookup"><span data-stu-id="a64f8-156">Saving queries is also a standard feature in Operations Management Suite and can help you keep queries you've found useful and discover trends in your system.</span></span>

<span data-ttu-id="a64f8-157">**Obter mais informações** para encontrar informações sobre como instalar e configurar o Docker solução contêiner [Operations Management Suite](http://microsoft.com/oms), vá para <https://docs.microsoft.com/azure/log-analytics/log-analytics-containers>.</span><span class="sxs-lookup"><span data-stu-id="a64f8-157">**More info** To find information on installing and configuring the Docker container solution in [Operations Management Suite](http://microsoft.com/oms), go to <https://docs.microsoft.com/azure/log-analytics/log-analytics-containers>.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="a64f8-158">[Anterior] (gerenciar-produção-docker-environments.md) [Avançar] (... /Key-takeaways/index.MD)</span><span class="sxs-lookup"><span data-stu-id="a64f8-158">[Previous] (manage-production-docker-environments.md) [Next] (../key-takeaways/index.md)</span></span>
