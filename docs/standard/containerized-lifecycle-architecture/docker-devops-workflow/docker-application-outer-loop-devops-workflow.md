---
title: Etapas no fluxo de trabalho de DevOps loop externo para um aplicativo de Docker
description: Containerized Docker Application Lifecycle with Microsoft Platform and Tools (Ciclo de vida de aplicativo do Docker em contêineres com a plataforma e as ferramentas da Microsoft)
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: b88eb5637bf266ab2e0a6d255f2e83f6aadc8af2
ms.sourcegitcommit: 979597cd8055534b63d2c6ee8322938a27d0c87b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/29/2018
ms.locfileid: "37106156"
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="2432e-103">Etapas no fluxo de trabalho de DevOps loop externo para um aplicativo de Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-103">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="2432e-104">Figura 5-1 apresenta uma representação de ponta a ponta das etapas que compõem o fluxo de trabalho do DevOps loop externo.</span><span class="sxs-lookup"><span data-stu-id="2432e-104">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="2432e-105">Figura 5-1: DevOps loop externo fluxo de trabalho para aplicativos de Docker com as ferramentas da Microsoft</span><span class="sxs-lookup"><span data-stu-id="2432e-105">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="2432e-106">Agora, vamos examinar cada uma dessas etapas mais detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="2432e-106">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="2432e-107">Etapa 1: Fluxo de trabalho de desenvolvimento de loop interno</span><span class="sxs-lookup"><span data-stu-id="2432e-107">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="2432e-108">Esta etapa é explicada em detalhes no capítulo 4, mas, para recapitular, aqui é onde o loop externo começa, o momento em que um desenvolvedor envia o código para o sistema de gerenciamento de controle de origem (como o Git) Iniciando ações de pipeline de CI.</span><span class="sxs-lookup"><span data-stu-id="2432e-108">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-visual-studio-team-services-and-git"></a><span data-ttu-id="2432e-109">Etapa 2: Integração de controle do código-fonte e gerenciamento com o Visual Studio Team Services e o Git</span><span class="sxs-lookup"><span data-stu-id="2432e-109">Step 2: Source-Code Control integration and management with Visual Studio Team Services and Git</span></span>

<span data-ttu-id="2432e-110">Nesta etapa, você precisa ter um sistema de controle de versão para obter uma versão consolidada de todo o código provenientes de diferentes desenvolvedores na equipe.</span><span class="sxs-lookup"><span data-stu-id="2432e-110">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="2432e-111">Mesmo que o controle do código-fonte (SCC) e o gerenciamento de código-fonte podem parecer natureza de segundo ciclo à maioria dos desenvolvedores, ao criar aplicativos de Docker em uma duração de DevOps, é essencial para enfatizar que você não deve enviar as imagens do Docker com o aplicativo diretamente para o Docker registro global (como o registro de contêiner do Azure ou o Hub do Docker) da máquina do desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="2432e-111">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="2432e-112">Ao contrário, as imagens do Docker para ser liberado e implantado em ambientes de produção devem ser criadas apenas em código-fonte que está sendo integrado no build global ou CI pipeline com base em seu repositório de código-fonte (como o Git).</span><span class="sxs-lookup"><span data-stu-id="2432e-112">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="2432e-113">As imagens de locais geradas pelos desenvolvedores se devem ser usadas apenas pelos desenvolvedores durante o teste em seu próprio computador.</span><span class="sxs-lookup"><span data-stu-id="2432e-113">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="2432e-114">É por isso é essencial para que o pipeline de DevOps ativado do código de SCC.</span><span class="sxs-lookup"><span data-stu-id="2432e-114">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="2432e-115">Visual Studio Team Services e o Team Foundation Server suportam a controle de versão do Team Foundation e Git.</span><span class="sxs-lookup"><span data-stu-id="2432e-115">Visual Studio Team Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="2432e-116">Você pode escolher entre eles e usá-lo para uma experiência da Microsoft de ponta a ponta.</span><span class="sxs-lookup"><span data-stu-id="2432e-116">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="2432e-117">No entanto, você também pode gerenciar seu código em repositórios externos (como GitHub, repositórios do Git local ou Subversão) e ainda poderá se conectar a ele e obter o código como o ponto de partida para o pipeline de CI DevOps.</span><span class="sxs-lookup"><span data-stu-id="2432e-117">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-visual-studio-team-services-and-docker"></a><span data-ttu-id="2432e-118">Etapa 3: Compilação CI, integrar e teste com o Visual Studio Team Services e o Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-118">Step 3: Build, CI, Integrate, and Test with Visual Studio Team Services and Docker</span></span>

<span data-ttu-id="2432e-119">CI surgiu como um padrão para testes de software moderno e entrega.</span><span class="sxs-lookup"><span data-stu-id="2432e-119">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="2432e-120">A solução de Docker mantém uma clara separação de preocupações entre as equipes de desenvolvimento e operações.</span><span class="sxs-lookup"><span data-stu-id="2432e-120">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="2432e-121">A imutabilidade de imagens do Docker garante uma implantação repetível entre o que tem desenvolvidos, testados por meio de CI e executar em produção.</span><span class="sxs-lookup"><span data-stu-id="2432e-121">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="2432e-122">Mecanismo do docker implantadas em laptops developer e infraestrutura de teste torna os contêineres portátil em ambientes.</span><span class="sxs-lookup"><span data-stu-id="2432e-122">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="2432e-123">Neste ponto, após você ter um sistema de controle de versão com o código correto enviado, é necessário um *criar serviço* para acompanhar o código e execute o build global e testes.</span><span class="sxs-lookup"><span data-stu-id="2432e-123">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="2432e-124">O fluxo de trabalho interno para esta etapa (CI, compilação, teste) é sobre a construção de um pipeline de CI consiste em seu repositório de código (Git, etc.), o servidor de compilação (Visual Studio Team Services), o mecanismo do Docker e um registro de Docker.</span><span class="sxs-lookup"><span data-stu-id="2432e-124">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Visual Studio Team Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="2432e-125">Você pode usar Visual Studio Team Services como base para criação de seus aplicativos e definir seu pipeline de CI e para a publicação criados "artefatos" um "repositório de artefatos", que é explicada na próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="2432e-125">You can use Visual Studio Team Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="2432e-126">Ao usar o Docker para a implantação, os "artefatos finais" para ser implantado são imagens do Docker com os aplicativos ou serviços inseridas dentro deles.</span><span class="sxs-lookup"><span data-stu-id="2432e-126">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="2432e-127">Essas imagens são enviados por push ou publicadas em um *Docker registro* (um repositório privado como aquelas que no registro de contêiner do Azure ou um público como registro de Hub do Docker, que é normalmente usada para imagens de base oficiais).</span><span class="sxs-lookup"><span data-stu-id="2432e-127">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="2432e-128">Aqui está o conceito básico: CI o pipeline será iniciado-desligado por uma confirmação a um repositório do SCC como o Git.</span><span class="sxs-lookup"><span data-stu-id="2432e-128">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="2432e-129">A confirmação fará com que o Visual Studio Team Services executar um trabalho de compilação em um contêiner do Docker e, após a conclusão bem-sucedida do trabalho, enviar por push uma imagem do Docker no registro do Docker, conforme ilustrado na Figura 5-2.</span><span class="sxs-lookup"><span data-stu-id="2432e-129">The commit will cause Visual Studio Team Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="2432e-130">Figura 5-2: as etapas envolvidas no CI</span><span class="sxs-lookup"><span data-stu-id="2432e-130">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="2432e-131">Aqui estão as etapas básicas de fluxo de trabalho de CI com o Docker e o Visual Studio Team Services:</span><span class="sxs-lookup"><span data-stu-id="2432e-131">Here are the basic CI workflow steps with Docker and Visual Studio Team Services:</span></span>

1.  <span data-ttu-id="2432e-132">O desenvolvedor envia uma confirmação para um repositório de SCC (Git/Visual Studio Team Services, GitHub, etc.).</span><span class="sxs-lookup"><span data-stu-id="2432e-132">The developer pushes a commit to an SCC repository (Git/Visual Studio Team Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="2432e-133">Se você estiver usando o Visual Studio Team Services ou Git, CI incorporada, que significa que ele é tão simples quanto selecionar uma caixa de seleção no Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="2432e-133">If you're using Visual Studio Team Services or Git, CI is built in, which means that it is as simple as selecting a check box in Visual Studio Team Services.</span></span> <span data-ttu-id="2432e-134">Se você estiver usando um SCC externo (como GitHub), um *webhook* serão notifique Visual Studio Team Services da atualização ou enviar por push para Git/GitHub.</span><span class="sxs-lookup"><span data-stu-id="2432e-134">If you're using an external SCC (like GitHub), a *webhook* will notify Visual Studio Team Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="2432e-135">Visual Studio Team Services recebe o repositório do SCC, incluindo o DockerFile que descrevem a imagem, bem como o código do aplicativo e teste.</span><span class="sxs-lookup"><span data-stu-id="2432e-135">Visual Studio Team Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="2432e-136">Visual Studio Team Services cria uma imagem do Docker e rótulos-lo com um número de compilação.</span><span class="sxs-lookup"><span data-stu-id="2432e-136">Visual Studio Team Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="2432e-137">Visual Studio Team Services instancia o contêiner de Docker dentro do Host do Docker provisionados e executa os testes apropriados.</span><span class="sxs-lookup"><span data-stu-id="2432e-137">Visual Studio Team Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="2432e-138">Se os testes forem bem-sucedidas, a imagem é primeiro novamente rotulada para um nome significativo para que você sabe que é um "build blessed" (como "/ 1.0.0" ou qualquer outro rótulo) e, em seguida, passado para o registro de Docker (Hub do Docker, o registro de contêiner do Azure, DTR, etc.)</span><span class="sxs-lookup"><span data-stu-id="2432e-138">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-visual-studio-team-services-and-the-docker-extension-for-visual-studio-team-services"></a><span data-ttu-id="2432e-139">Implementando o pipeline de CI com o Visual Studio Team Services e a extensão de Docker para Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="2432e-139">Implementing the CI pipeline with Visual Studio Team Services and the Docker extension for Visual Studio Team Services</span></span>

<span data-ttu-id="2432e-140">O [extensão do Visual Studio Team Services Docker](https://aka.ms/vstsdockerextension) adiciona uma tarefa ao seu pipeline de CI com a qual você pode criar imagens do Docker, enviar imagens do Docker para um registro de Docker autenticado, executar imagens do Docker ou executar outras operações oferecidas pelo CLI do docker.</span><span class="sxs-lookup"><span data-stu-id="2432e-140">The [Visual Studio Team Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="2432e-141">Ele também adiciona uma tarefa Docker Compose que você pode usar para criar, enviar por push e executar aplicativos de Docker multicontainer ou executar outras operações oferecidas pela CLI compor Docker, conforme mostrado na Figura 5-3.</span><span class="sxs-lookup"><span data-stu-id="2432e-141">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="2432e-142">Figura 5-3: O pipeline de CI do Docker no Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="2432e-142">Figure 5-3: The Docker CI pipeline in Visual Studio Team Services</span></span>

<span data-ttu-id="2432e-143">A extensão do Docker pode usar pontos de extremidade de serviço para os hosts de Docker e para registros de imagem ou contêiner.</span><span class="sxs-lookup"><span data-stu-id="2432e-143">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="2432e-144">Padrão de tarefas usando um host Docker local se disponível (atualmente requer um agente personalizado do Visual Studio Team Services); Caso contrário, eles exigem que você forneça uma conexão de host do Docker.</span><span class="sxs-lookup"><span data-stu-id="2432e-144">The tasks default to using a local Docker host if available (this currently requires a custom Visual Studio Team Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="2432e-145">Ações que dependem de que está sendo autenticado com um registro de Docker, como enviar por push uma imagem, exigem que você forneça um Docker conexão do registro.</span><span class="sxs-lookup"><span data-stu-id="2432e-145">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="2432e-146">A extensão do Visual Studio Team Services Docker instala os seguintes componentes em sua conta do Visual Studio Team Services:</span><span class="sxs-lookup"><span data-stu-id="2432e-146">The Visual Studio Team Services Docker extension installs the following components in your Visual Studio Team Services account:</span></span>

-   <span data-ttu-id="2432e-147">Um ponto de extremidade de serviço para se conectar a um registro de Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-147">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="2432e-148">Um ponto de extremidade de serviço para se conectar a um Host do contêiner Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-148">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="2432e-149">Uma tarefa de Docker para fazer o seguinte:</span><span class="sxs-lookup"><span data-stu-id="2432e-149">A Docker task to do the following:</span></span>

-   <span data-ttu-id="2432e-150">Criar uma imagem</span><span class="sxs-lookup"><span data-stu-id="2432e-150">Build an image</span></span>

-   <span data-ttu-id="2432e-151">Enviar por push uma imagem ou um repositório para um registro</span><span class="sxs-lookup"><span data-stu-id="2432e-151">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="2432e-152">Executar uma imagem em um contêiner</span><span class="sxs-lookup"><span data-stu-id="2432e-152">Run an image in a container</span></span>

-   <span data-ttu-id="2432e-153">Executar um comando do Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-153">Run a Docker command</span></span>

-   <span data-ttu-id="2432e-154">Uma tarefa de Docker Compose para executar um comando Docker Compose</span><span class="sxs-lookup"><span data-stu-id="2432e-154">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="2432e-155">Essas tarefas do Visual Studio Team Services, uma compilação Host VM Linux Docker provisionado no Azure e o registro de Docker preferencial (registro de contêiner do Azure, Hub do Docker, privada DTR de Docker ou qualquer outro registro Docker), você pode montar seu pipeline de CI do Docker em um maneira muito consistente.</span><span class="sxs-lookup"><span data-stu-id="2432e-155">With these Visual Studio Team Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="2432e-156">***Requisitos:***</span><span class="sxs-lookup"><span data-stu-id="2432e-156">***Requirements:***</span></span>

-   <span data-ttu-id="2432e-157">Visual Studio Team Services, ou para instalações locais, o Team Foundation Server 2015 atualização 3 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="2432e-157">Visual Studio Team Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="2432e-158">Um agente do Visual Studio Team Services com os binários do Docker.</span><span class="sxs-lookup"><span data-stu-id="2432e-158">A Visual Studio Team Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="2432e-159">Uma maneira fácil de criar um desses é usar o Docker para executar um contêiner com base na imagem do Docker de agente do Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="2432e-159">An easy way to create one of these is to use Docker to run a container based on the Visual Studio Team Services agent Docker image.</span></span>

<span data-ttu-id="2432e-160">**Obter mais informações** para ler mais sobre como montar um CI de Docker de serviços do Visual Studio Team pipeline e para exibir explicações passo a passo, consulte os seguintes sites:</span><span class="sxs-lookup"><span data-stu-id="2432e-160">**More info** To read more about assembling a Visual Studio Team Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="2432e-161">Executando um agente do Visual Studio Team Services como um contêiner do Docker: [ https://hub.docker.com/r/\ vsts/microsoft-agente /](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="2432e-161">Running a Visual Studio Team Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="2432e-162">Extensão de Docker VSTS: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="2432e-162">VSTS Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="2432e-163">Criando imagens de .NET Core Linux Docker com o Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="2432e-163">Building .NET Core Linux Docker images with Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="2432e-164">Criando uma máquina de compilação com base em Linux o serviço do Visual Studio Team com suporte de Docker: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="2432e-164">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="2432e-165">Integrar, testar e validar multicontainer aplicativos de Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-165">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="2432e-166">Normalmente, a maioria dos aplicativos de Docker são compostos de vários contêineres em vez de um único contêiner.</span><span class="sxs-lookup"><span data-stu-id="2432e-166">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="2432e-167">Um bom exemplo é um aplicativo orientado a microservices para os quais você teria um contêiner por microsserviço.</span><span class="sxs-lookup"><span data-stu-id="2432e-167">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="2432e-168">Mas, mesmo sem seguir estritamente os padrões de abordagem microservices, é muito provável que o aplicativo de Docker deve ser composto de vários contêineres ou serviços.</span><span class="sxs-lookup"><span data-stu-id="2432e-168">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="2432e-169">Portanto, depois de criar os contêineres de aplicativo no pipeline de CI, você também precisa implantar, integrar e testar o aplicativo como um todo, com todos os seus contêineres dentro de um host Docker de integração ou até mesmo em um cluster de teste para que os contêineres são distribuído.</span><span class="sxs-lookup"><span data-stu-id="2432e-169">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="2432e-170">Se você estiver usando um único host, você pode usar comandos do Docker como o docker-compor para compilar e implantar contêineres relacionados para testar e validar o ambiente de Docker em uma única VM.</span><span class="sxs-lookup"><span data-stu-id="2432e-170">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="2432e-171">Mas, se você estiver trabalhando com um cluster orchestrator como Docker Swarm, Kubernetes ou SO/controlador de domínio, você precisa implantar seus contêineres por meio de um mecanismo diferente ou orchestrator, dependendo de seu cluster/Agendador selecionado.</span><span class="sxs-lookup"><span data-stu-id="2432e-171">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="2432e-172">A seguir estão os vários tipos de testes que podem ser executados em contêineres do Docker:</span><span class="sxs-lookup"><span data-stu-id="2432e-172">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="2432e-173">Testes de unidade para contêineres do Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-173">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="2432e-174">Grupos de teste de aplicativos inter-relacionados ou microservices</span><span class="sxs-lookup"><span data-stu-id="2432e-174">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="2432e-175">Testar em versões de produção e "canary"</span><span class="sxs-lookup"><span data-stu-id="2432e-175">Test in production and "canary" releases</span></span>

<span data-ttu-id="2432e-176">O ponto importante é que, ao executar testes funcionais e integração, você deve executar esses testes de fora os contêineres.</span><span class="sxs-lookup"><span data-stu-id="2432e-176">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="2432e-177">Testes não devem definidos e execute dentro dos contêineres que você está implantando, porque os contêineres são baseados em imagens estáticas que devem ser exatamente como os que você estiver implantando em produção.</span><span class="sxs-lookup"><span data-stu-id="2432e-177">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="2432e-178">É uma opção muito viável ao testar os cenários mais avançados como testar vários clusters (cluster, a preparação do cluster e o cluster de produção de teste) publicar as imagens de um registro para testar em vários clusters.</span><span class="sxs-lookup"><span data-stu-id="2432e-178">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="2432e-179">Enviar por push a imagem do Docker de aplicativo personalizado para o registro global de Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-179">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="2432e-180">Depois que as imagens do Docker foram testadas e validadas, convém marcar e publicá-los no registro do Docker.</span><span class="sxs-lookup"><span data-stu-id="2432e-180">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="2432e-181">O registro de Docker é uma parte crítica do ciclo de vida do aplicativo Docker porque é o local central onde você armazena seu teste personalizado (também conhecido como "blessed imagens") para ser implantado em ambientes de produção e controle de qualidade.</span><span class="sxs-lookup"><span data-stu-id="2432e-181">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="2432e-182">Semelhante a como o código do aplicativo armazenado no repositório SCC (Git, etc.) é o "fonte da verdade", o registro de Docker é o "fonte da verdade" para seu aplicativo binário ou bits a ser implantado em ambientes de produção ou de controle de qualidade.</span><span class="sxs-lookup"><span data-stu-id="2432e-182">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="2432e-183">Normalmente, talvez você queira ter seus repositórios particulares para as imagens personalizadas em um repositório privado de registro de contêiner do Azure ou em um registro local como registro confiável do Docker ou em um registro de nuvem pública com acesso restrito (como Hub do docker), embora no último caso se seu código não é o código-fonte aberto, você deve confiar segurança do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="2432e-183">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="2432e-184">De qualquer forma, o método pelo qual você fazer isso é bastante semelhante e, por fim, com base no comando docker push, conforme ilustrado na Figura 5-4.</span><span class="sxs-lookup"><span data-stu-id="2432e-184">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="2432e-185">Figura 5-4: publicar imagens personalizadas do registro de Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-185">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="2432e-186">Há várias ofertas de registros de Docker de fornecedores de nuvem como o registro de contêiner do Azure, registro de contêiner do Amazon Web Services, registro de contêiner do Google, Quay registro e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="2432e-186">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="2432e-187">Usando a extensão do Visual Studio Team Services Docker, você pode enviar um conjunto de imagens de serviço definidas por um arquivo compose.yml docker, com várias marcas, um registro de Docker autenticado (como o registro de contêiner do Azure), conforme mostrado na Figura 5-5.</span><span class="sxs-lookup"><span data-stu-id="2432e-187">Using the Visual Studio Team Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="2432e-188">Figura 5-5: usando o Visual Studio Team Services para publicação imagens personalizadas a um registro de Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-188">Figure 5-5: Using Visual Studio Team Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="2432e-189">**Obter mais informações** para saber mais sobre a extensão de Docker para Visual Studio Team Services, acesse <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="2432e-189">**More info** To read more about the Docker extension for Visual Studio Team Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="2432e-190">Para saber mais sobre o registro de contêiner do Azure, vá para <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="2432e-190">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="2432e-191">Etapa 4: CD, implantar</span><span class="sxs-lookup"><span data-stu-id="2432e-191">Step 4: CD, Deploy</span></span>

<span data-ttu-id="2432e-192">A imutabilidade de imagens do Docker garante uma implantação repetível com o que tem desenvolvidos, testados por meio de CI e executar em produção.</span><span class="sxs-lookup"><span data-stu-id="2432e-192">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="2432e-193">Depois de instalar as imagens do Docker aplicativo publicadas no registro do Docker (privado ou público), implantá-los para vários ambientes em que você pode ter (produção, QA, preparo, etc.) do seu pipeline de CD usando o Visual Studio Team Services pipeline de tarefas ou o Visual Studio Team Services Release Management.</span><span class="sxs-lookup"><span data-stu-id="2432e-193">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Visual Studio Team Services pipeline tasks or Visual Studio Team Services Release Management.</span></span>

<span data-ttu-id="2432e-194">No entanto, neste momento ele depende que tipo de aplicativo do Docker que você está implantando.</span><span class="sxs-lookup"><span data-stu-id="2432e-194">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="2432e-195">Implantar um aplicativo simples (de composição e implantação de uma perspectiva) como um monolítico aplicativo que inclui alguns contêineres ou serviços e implantado para alguns servidores ou máquinas virtuais é muito diferente da implantação de um aplicativo mais complexo como um aplicativos orientados a microservices com recursos de hiperescala.</span><span class="sxs-lookup"><span data-stu-id="2432e-195">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="2432e-196">Esses dois cenários descritos nas seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="2432e-196">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="2432e-197">Implantando composto por aplicativos de Docker em vários ambientes de Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-197">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="2432e-198">Vamos ver primeiro o cenário menos complexas: Implantando simples hosts de Docker (máquinas virtuais ou servidores) em um único ambiente ou em vários ambientes (QA, preparo e produção).</span><span class="sxs-lookup"><span data-stu-id="2432e-198">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="2432e-199">Nesse cenário, internamente o pipeline de CD pode usar docker-compor (de suas tarefas de implantação do Visual Studio Team Services) para implantar os aplicativos do Docker com seu conjunto relacionado de contêineres ou serviços, conforme ilustrado na Figura 5-6.</span><span class="sxs-lookup"><span data-stu-id="2432e-199">In this scenario, internally your CD pipeline can use docker-compose (from your Visual Studio Team Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="2432e-200">Figura 5-6: implantar os contêineres de aplicativos para registro simple de ambientes de host do Docker</span><span class="sxs-lookup"><span data-stu-id="2432e-200">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="2432e-201">Figura 5-7 destaca como você pode conectar o CI de compilação para ambientes de teste/QA por meio do Visual Studio Team Services clicando Docker compor na caixa de diálogo Adicionar tarefa.</span><span class="sxs-lookup"><span data-stu-id="2432e-201">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Visual Studio Team Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="2432e-202">No entanto, ao implantar em ambientes de preparo ou de produção, você normalmente usaria vários ambientes de tratamento de recursos de gerenciamento de versão (como QA, preparo e produção).</span><span class="sxs-lookup"><span data-stu-id="2432e-202">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="2432e-203">Se você estiver implantando em hosts de Docker único, ele está usando o Visual Studio Team Services tarefa "Docker Compose" (que está invocando o docker-compor o comando nos bastidores).</span><span class="sxs-lookup"><span data-stu-id="2432e-203">If you're deploying to single Docker hosts, it is using the Visual Studio Team Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="2432e-204">Se você estiver implantando o serviço de contêiner do Azure, ele usa a tarefa de implantação do Docker, conforme explicado na seção a seguir.</span><span class="sxs-lookup"><span data-stu-id="2432e-204">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="2432e-205">Figura 5-7: adicionando uma tarefa de Docker Compose em um pipeline do Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="2432e-205">Figure 5-7: Adding a Docker Compose task in a Visual Studio Team Services pipeline</span></span>

<span data-ttu-id="2432e-206">Quando você cria uma versão no Visual Studio Team Services, ele usa um conjunto de artefatos de entrada.</span><span class="sxs-lookup"><span data-stu-id="2432e-206">When you create a release in Visual Studio Team Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="2432e-207">Eles devem ser imutável durante o tempo de vida da versão em vários ambientes.</span><span class="sxs-lookup"><span data-stu-id="2432e-207">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="2432e-208">Quando você introduz contêineres, os artefatos de entrada identificam imagens em um registro para implantar.</span><span class="sxs-lookup"><span data-stu-id="2432e-208">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="2432e-209">Dependendo de como eles são identificados, eles não são garantia permanecem os mesmos em toda a duração da versão, o caso mais óbvio sendo quando você faz referência a "myimage:latest" de um arquivo de docker-compose.</span><span class="sxs-lookup"><span data-stu-id="2432e-209">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="2432e-210">A extensão de Docker para Visual Studio Team Services fornece a capacidade de gerar artefatos de compilação que contém a imagem de registro específicos resumos garantidos para identificar exclusivamente a mesma imagem binária.</span><span class="sxs-lookup"><span data-stu-id="2432e-210">The Docker extension for Visual Studio Team Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="2432e-211">Esses são o que você realmente deseja usar como entrada para uma versão.</span><span class="sxs-lookup"><span data-stu-id="2432e-211">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-visual-studio-team-services-release-management"></a><span data-ttu-id="2432e-212">Gerenciando versões para ambientes de Docker usando o Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="2432e-212">Managing releases to Docker environments by using Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="2432e-213">Por meio de extensões do Visual Studio Team Services, você pode criar uma nova imagem, publicá-lo em um registro de Docker, executá-lo em hosts do Windows ou do Linux e usar comandos como docker-compor para implantar vários contêineres como um aplicativo inteiro, tudo isso por meio do Visual Recursos de gerenciamento de versão do Team Services Studio destinados a vários ambientes, como mostrado na Figura 5-8.</span><span class="sxs-lookup"><span data-stu-id="2432e-213">Through the Visual Studio Team Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Visual Studio Team Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="2432e-214">Figura 5-8: Configurando o Visual Studio Team Services Docker Compose tarefas do Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="2432e-214">Figure 5-8: Configuring Visual Studio Team Services Docker Compose tasks from Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="2432e-215">No entanto, tenha em mente que o cenário mostrado na Figura 5-6 e implementado na Figura 5-8 é bem básico (ele está implantando VMs e hosts de Docker simples, e haverá uma instância por imagem ou um único contêiner) e provavelmente deve ser usado somente para teste ou desenvolvimento sc enarios.</span><span class="sxs-lookup"><span data-stu-id="2432e-215">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="2432e-216">Na maioria dos cenários de produção corporativa, você deseja ter alta disponibilidade (HA) e fácil de gerenciar escalabilidade pelo balanceamento de carga entre vários nós, servidores e VMs, além de "failovers inteligente" assim que se um servidor ou o nó falhar, seus serviços e contêineres serão movidos para outro servidor de host ou máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="2432e-216">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="2432e-217">Nesse caso, você precisa de tecnologias mais avançadas, como clusters de contêiner, orchestrators e agendadores.</span><span class="sxs-lookup"><span data-stu-id="2432e-217">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="2432e-218">Assim, a maneira de implantar os clusters é precisamente por meio de cenários avançados explicados na próxima seção.</span><span class="sxs-lookup"><span data-stu-id="2432e-218">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="2432e-219">Implantando aplicativos complexos de Docker para clusters de Docker (controlador de domínio/OS, Kubernetes e Docker Swarm)</span><span class="sxs-lookup"><span data-stu-id="2432e-219">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="2432e-220">A natureza de aplicativos distribuídos requer recursos de computação que também são distribuídos.</span><span class="sxs-lookup"><span data-stu-id="2432e-220">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="2432e-221">Para que os recursos de escala de produção, você precisa ter recursos que fornecem alta escalabilidade de clustering e alta disponibilidade com base nos recursos em pool.</span><span class="sxs-lookup"><span data-stu-id="2432e-221">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="2432e-222">Você pode implantar contêineres manualmente para os clusters de uma ferramenta de CLI como Docker Swarm (como usar [criar serviço do docker](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) ou uma interface do usuário da web, como [Mesosphere maratona](https://mesosphere.github.io/marathon/docs/marathon-ui.html) para DC/OS clusters, mas você deve Reserve que somente para teste de implantação punctual ou para fins de gerenciamento como expansão ou fins de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="2432e-222">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="2432e-223">De um ponto de vista do CD e o Visual Studio Team Services especificamente, pode executar tarefas de implantação especialmente feitas de seus ambientes do Visual Studio Team Services Release Management qual irá implantar seus aplicativos em contêineres para clusters distribuídos em Serviço de contêiner, conforme ilustrado na Figura 5-9.</span><span class="sxs-lookup"><span data-stu-id="2432e-223">From a CD point of view, and Visual Studio Team Services specifically, you can run specially made deployment tasks from your Visual Studio Team Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="2432e-224">Figura 5-9: implantação de aplicativos distribuídos para o serviço de contêiner</span><span class="sxs-lookup"><span data-stu-id="2432e-224">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="2432e-225">Inicialmente, ao implantar determinados clusters ou orchestrators, você normalmente usaria scripts de implantação específica e mecanismos de por cada orchestrator (ou seja, Mesosphere DC/sistema operacional ou Kubernetes possuem mecanismos de implantação diferentes que o Docker e o Docker Swarm) em vez do mais simples e fácil de usar docker-compõem ferramenta com base no arquivo de definição de docker compose.yml.</span><span class="sxs-lookup"><span data-stu-id="2432e-225">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="2432e-226">No entanto, graças a tarefa do Microsoft Visual Studio Team Services Docker implantar, mostrada na Figura 5-10, agora você também pode implantar para DC/OS usando apenas o arquivo de docker-compose.yml familiar porque a Microsoft executa essa conversão de"" para você (do seu arquivo compose.yml docker para outros formatos necessários ao controlador de domínio/OS).</span><span class="sxs-lookup"><span data-stu-id="2432e-226">However, thanks to the Microsoft Visual Studio Team Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="2432e-227">Figura 5-10: adicionando a tarefa de implantar o Docker para seu ambiente RM</span><span class="sxs-lookup"><span data-stu-id="2432e-227">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="2432e-228">Figura 5-11 demonstra como você pode editar a tarefa de implantar o Docker e especificar o tipo de destino (contêiner serviço DC/sistema operacional do Azure, neste caso), o arquivo compor do Docker e a conexão do Docker registro (como o registro de contêiner do Azure ou o Hub do Docker).</span><span class="sxs-lookup"><span data-stu-id="2432e-228">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="2432e-229">Isso é onde a tarefa irá recuperar as imagens do Docker personalizadas prontos para uso para ser implantado como contêineres no cluster DC/OS.</span><span class="sxs-lookup"><span data-stu-id="2432e-229">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="2432e-230">Implantação da definição de tarefa do Figura 5-11: implantar Docker para serviço de contêiner do Azure DC/OS</span><span class="sxs-lookup"><span data-stu-id="2432e-230">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="2432e-231">**Obter mais informações** para saber mais sobre o pipeline do CD com o Visual Studio Team Services e o Docker, visite os seguintes sites:</span><span class="sxs-lookup"><span data-stu-id="2432e-231">**More info** To read more about the CD pipeline with Visual Studio Team Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="2432e-232">Extensão do Visual Studio Team Services para o Docker e o serviço de contêiner do Azure: [ https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="2432e-232">Visual Studio Team Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="2432e-233">Serviço de contêiner do Azure: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="2432e-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="2432e-234">Mesosphere DC/sistema operacional: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="2432e-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="2432e-235">Etapa 5: Executar e gerenciar</span><span class="sxs-lookup"><span data-stu-id="2432e-235">Step 5: Run and manage</span></span>

<span data-ttu-id="2432e-236">Como executar e gerenciar aplicativos em produção enterprise nível é uma entidade principal e de si mesma e devido ao tipo de operações e pessoas trabalhando nesse nível (operações de TI), bem como o grande escopo dessa área, podemos ter dedicada a todo o lado capítulo para explicar.</span><span class="sxs-lookup"><span data-stu-id="2432e-236">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="2432e-237">Etapa 6: Monitorar e diagnosticar</span><span class="sxs-lookup"><span data-stu-id="2432e-237">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="2432e-238">Este tópico também é abordado no próximo capítulo como parte das tarefas que executa operações de TI em sistemas de produção. No entanto, é importante destacar que as informações obtidas nesta etapa devem feed volta para a equipe de desenvolvimento para que o aplicativo é aprimorado constantemente.</span><span class="sxs-lookup"><span data-stu-id="2432e-238">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="2432e-239">Esse ponto de vista do também é parte do DevOps, embora as tarefas e operações são normalmente executadas por IT.</span><span class="sxs-lookup"><span data-stu-id="2432e-239">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="2432e-240">Somente quando o monitoramento e diagnóstico é 100 por cento no território de DevOps são os processos de monitoramento e análise realizada pela equipe de desenvolvimento em ambientes de teste ou beta.</span><span class="sxs-lookup"><span data-stu-id="2432e-240">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="2432e-241">Isso é feito executando o teste de carga ou simplesmente monitorando beta ou ambientes de controle de qualidade, onde os testadores beta estão tentando as novas versões.</span><span class="sxs-lookup"><span data-stu-id="2432e-241">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="2432e-242">[Anterior](index.md)
[Próximo](../run-manage-monitor-docker-environments/index.md)</span><span class="sxs-lookup"><span data-stu-id="2432e-242">[Previous](index.md)
[Next](../run-manage-monitor-docker-environments/index.md)</span></span>
