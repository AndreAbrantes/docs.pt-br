---
title: Visão geral do padrão assíncrono baseado em evento
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Event-based Asynchronous Pattern
- ProgressChangedEventArgs class
- BackgroundWorker component
- events [.NET Framework], asynchronous
- Asynchronous Pattern
- AsyncOperationManager class
- threading [.NET Framework], asynchronous features
- AsyncOperation class
- AsyncCompletedEventArgs class
ms.assetid: 792aa8da-918b-458e-b154-9836b97735f3
ms.openlocfilehash: cce01a7c87f6f20b5e6c46881b8c863bb5a72a88
ms.sourcegitcommit: 00aa62e2f469c2272a457b04e66b4cc3c97a800b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/28/2020
ms.locfileid: "78160060"
---
# <a name="event-based-asynchronous-pattern-overview"></a><span data-ttu-id="e6d5a-102">Visão geral do padrão assíncrono baseado em evento</span><span class="sxs-lookup"><span data-stu-id="e6d5a-102">Event-based Asynchronous Pattern Overview</span></span>
<span data-ttu-id="e6d5a-103">Aplicativos que realizam várias tarefas simultaneamente, mas que ainda permanecem responsivos para interação com o usuário, geralmente exigem um projeto que utilize vários threads.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-103">Applications that perform many tasks simultaneously, yet remain responsive to user interaction, often require a design that uses multiple threads.</span></span> <span data-ttu-id="e6d5a-104">O namespace <xref:System.Threading> oferece todas as ferramentas necessárias para criar aplicativos commulti-thread de alto desempenho. No entanto, usar essas ferramentas de maneira eficaz requer um nível de experiência significativo com engenharia de software com multi-thread.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-104">The <xref:System.Threading> namespace provides all the tools necessary to create high-performance multithreaded applications, but using these tools effectively requires significant experience with multithreaded software engineering.</span></span> <span data-ttu-id="e6d5a-105">Para aplicativos com multi-thread relativamente simples, o componente <xref:System.ComponentModel.BackgroundWorker> oferece uma solução direta.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-105">For relatively simple multithreaded applications, the <xref:System.ComponentModel.BackgroundWorker> component provides a straightforward solution.</span></span> <span data-ttu-id="e6d5a-106">Para aplicativos assíncronos mais sofisticados, considere implementar uma classe que adere ao Padrão Assíncrono baseado em Evento.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-106">For more sophisticated asynchronous applications, consider implementing a class that adheres to the Event-based Asynchronous Pattern.</span></span>  
  
 <span data-ttu-id="e6d5a-107">O Padrão Assíncrono baseado em Evento oferece as vantagens de aplicativos com multi-threaded e, ao mesmo tempo, não apresenta muitos dos problemas complexos inerentes em projetos com multi-thread.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-107">The Event-based Asynchronous Pattern makes available the advantages of multithreaded applications while hiding many of the complex issues inherent in multithreaded design.</span></span> <span data-ttu-id="e6d5a-108">Usar uma classe com suporte a esse padrão pode permitir que você:</span><span class="sxs-lookup"><span data-stu-id="e6d5a-108">Using a class that supports this pattern can allow you to:</span></span>  
  
- <span data-ttu-id="e6d5a-109">Realize tarefas que consomem tempo, como downloads e operações do banco de dados, "em segundo plano", sem interromper o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-109">Perform time-consuming tasks, such as downloads and database operations, "in the background," without interrupting your application.</span></span>  
  
- <span data-ttu-id="e6d5a-110">Execute várias operações simultaneamente, recebendo notificações quando cada uma delas for concluída.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-110">Execute multiple operations simultaneously, receiving notifications when each completes.</span></span>  
  
- <span data-ttu-id="e6d5a-111">Espere até que recursos sejam disponibilizados sem interromper ("bloquear") seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-111">Wait for resources to become available without stopping ("blocking") your application.</span></span>  
  
- <span data-ttu-id="e6d5a-112">Comunicar-se com operações assíncronas pendentes usando o modelo familiar de eventos e representantes.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-112">Communicate with pending asynchronous operations using the familiar events-and-delegates model.</span></span> <span data-ttu-id="e6d5a-113">Para saber mais sobre como usar manipuladores e representantes de eventos, confira [Eventos](../../../docs/standard/events/index.md).</span><span class="sxs-lookup"><span data-stu-id="e6d5a-113">For more information on using event handlers and delegates, see [Events](../../../docs/standard/events/index.md).</span></span>  
  
 <span data-ttu-id="e6d5a-114">Uma classe compatível com o Padrão Assíncrono baseado em Evento terá um ou mais métodos denominados _MethodName_**Async**.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-114">A class that supports the Event-based Asynchronous Pattern will have one or more methods named _MethodName_**Async**.</span></span> <span data-ttu-id="e6d5a-115">Esses métodos podem espelhar versões síncronas, que realizam a mesma operação no thread atual.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-115">These methods may mirror synchronous versions, which perform the same operation on the current thread.</span></span> <span data-ttu-id="e6d5a-116">A classe também pode ter um evento _MethodName_**Completed** e pode ter um método _MethodName_**AsyncCancel** (ou simplesmente **CancelAsync**).</span><span class="sxs-lookup"><span data-stu-id="e6d5a-116">The class may also have a _MethodName_**Completed** event and it may have a _MethodName_**AsyncCancel** (or simply **CancelAsync**) method.</span></span>  
  
 <span data-ttu-id="e6d5a-117"><xref:System.Windows.Forms.PictureBox> é um componente típico que oferece suporte ao Padrão Assíncrono baseado em Evento.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-117"><xref:System.Windows.Forms.PictureBox> is a typical component that supports the Event-based Asynchronous Pattern.</span></span> <span data-ttu-id="e6d5a-118">Você pode baixar uma imagem de maneira síncrona chamando seu método <xref:System.Windows.Forms.PictureBox.Load%2A>, mas se a imagem for grande, ou se a conexão de rede estiver lenta, seu aplicativo deixará de responder até que a operação de download seja concluída e a chamada para <xref:System.Windows.Forms.PictureBox.Load%2A> retorne.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-118">You can download an image synchronously by calling its <xref:System.Windows.Forms.PictureBox.Load%2A> method, but if the image is large, or if the network connection is slow, your application will stop responding until the download operation is completed and the call to <xref:System.Windows.Forms.PictureBox.Load%2A> returns.</span></span>  
  
 <span data-ttu-id="e6d5a-119">Se quiser que seu aplicativo continue em execução enquanto a imagem estiver carregando, você pode chamar o método <xref:System.Windows.Forms.PictureBox.LoadAsync%2A> e lidar com o evento <xref:System.Windows.Forms.PictureBox.LoadCompleted>, assim como lidaria com qualquer outro evento.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-119">If you want your application to keep running while the image is loading, you can call the <xref:System.Windows.Forms.PictureBox.LoadAsync%2A> method and handle the <xref:System.Windows.Forms.PictureBox.LoadCompleted> event, just as you would handle any other event.</span></span> <span data-ttu-id="e6d5a-120">Ao chamar o método <xref:System.Windows.Forms.PictureBox.LoadAsync%2A>, se aplicativo continuará a ser executado enquanto o download continua em um thread separado ("em segundo plano").</span><span class="sxs-lookup"><span data-stu-id="e6d5a-120">When you call the <xref:System.Windows.Forms.PictureBox.LoadAsync%2A> method, your application will continue to run while the download proceeds on a separate thread ("in the background").</span></span> <span data-ttu-id="e6d5a-121">Seu manipulador de evento será chamado quando a operação de carregamento da imagem estiver concluída e o manipulador de evento puder examinar o parâmetro <xref:System.ComponentModel.AsyncCompletedEventArgs> para determinar se o download foi concluído com sucesso.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-121">Your event handler will be called when the image-loading operation is complete, and your event handler can examine the <xref:System.ComponentModel.AsyncCompletedEventArgs> parameter to determine if the download completed successfully.</span></span>  
  
 <span data-ttu-id="e6d5a-122">O Padrão Assíncrono baseado em Evento requer que uma operação assíncrona possa ser cancelada, e o controle <xref:System.Windows.Forms.PictureBox> oferece suporte a esse requisito com seu método <xref:System.Windows.Forms.PictureBox.CancelAsync%2A>.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-122">The Event-based Asynchronous Pattern requires that an asynchronous operation can be canceled, and the <xref:System.Windows.Forms.PictureBox> control supports this requirement with its <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> method.</span></span> <span data-ttu-id="e6d5a-123">Chamar <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> envia uma solicitação para interromper o download pendente e, quando a tarefa é cancelada, o evento <xref:System.Windows.Forms.PictureBox.LoadCompleted> é elevado.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-123">Calling <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> submits a request to stop the pending download, and when the task is canceled, the <xref:System.Windows.Forms.PictureBox.LoadCompleted> event is raised.</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="e6d5a-124">É possível que o download termine assim que a solicitação <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> seja enviada, por isso, <xref:System.ComponentModel.AsyncCompletedEventArgs.Cancelled%2A> pode não refletir a solicitação de cancelamento.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-124">It is possible that the download will finish just as the <xref:System.Windows.Forms.PictureBox.CancelAsync%2A> request is made, so <xref:System.ComponentModel.AsyncCompletedEventArgs.Cancelled%2A> may not reflect the request to cancel.</span></span> <span data-ttu-id="e6d5a-125">Isso é chamado de *condição de corrida* e é um problema comum na programação com multi-thread.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-125">This is called a *race condition* and is a common issue in multithreaded programming.</span></span> <span data-ttu-id="e6d5a-126">Para saber mais sobre problemas de programação multi-thread, confira [Práticas recomendadas de threading gerenciado](../../../docs/standard/threading/managed-threading-best-practices.md).</span><span class="sxs-lookup"><span data-stu-id="e6d5a-126">For more information on issues in multithreaded programming, see [Managed Threading Best Practices](../../../docs/standard/threading/managed-threading-best-practices.md).</span></span>  
  
## <a name="characteristics-of-the-event-based-asynchronous-pattern"></a><span data-ttu-id="e6d5a-127">Características do Padrão Assíncrono baseado em Evento</span><span class="sxs-lookup"><span data-stu-id="e6d5a-127">Characteristics of the Event-based Asynchronous Pattern</span></span>  
 <span data-ttu-id="e6d5a-128">O Padrão Assíncrono baseado em Evento pode assumir diversos formatos, dependendo da complexidade das operações compatíveis com uma classe específica.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-128">The Event-based Asynchronous Pattern may take several forms, depending on the complexity of the operations supported by a particular class.</span></span> <span data-ttu-id="e6d5a-129">As classes mais simples podem ter um único método _MethodName_**Async** e um evento _MethodName_**Completed** correspondente.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-129">The simplest classes may have a single _MethodName_**Async** method and a corresponding _MethodName_**Completed** event.</span></span> <span data-ttu-id="e6d5a-130">Classes mais complexas podem ter vários métodos _MethodName_**Async**, cada um com um evento _MethodName_**Completed** correspondente, bem como versões síncronas desses métodos.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-130">More complex classes may have several _MethodName_**Async** methods, each with a corresponding _MethodName_**Completed** event, as well as synchronous versions of these methods.</span></span> <span data-ttu-id="e6d5a-131">As classes podem opcionalmente oferecer suporte a cancelamento, relatórios de progresso e resultados incrementais para cada método assíncrono.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-131">Classes can optionally support cancellation, progress reporting, and incremental results for each asynchronous method.</span></span>  
  
 <span data-ttu-id="e6d5a-132">Um método assíncrono também pode oferecer suporte a várias chamadas pendentes (várias invocações simultâneas), permitindo que seu código o chame quantas vezes desejar antes de concluir outras operações pendentes.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-132">An asynchronous method may also support multiple pending calls (multiple concurrent invocations), allowing your code to call it any number of times before it completes other pending operations.</span></span> <span data-ttu-id="e6d5a-133">Lidar da maneira correta com essa situação pode exigir que seu aplicativo acompanhe a conclusão de cada operação.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-133">Correctly handling this situation may require your application to track the completion of each operation.</span></span>  
  
### <a name="examples-of-the-event-based-asynchronous-pattern"></a><span data-ttu-id="e6d5a-134">Exemplos do Padrão Assíncrono baseado em Evento</span><span class="sxs-lookup"><span data-stu-id="e6d5a-134">Examples of the Event-based Asynchronous Pattern</span></span>  
 <span data-ttu-id="e6d5a-135">Os componentes <xref:System.Media.SoundPlayer> e <xref:System.Windows.Forms.PictureBox> representam implementações simples do Padrão Assíncrono baseado em Evento.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-135">The <xref:System.Media.SoundPlayer> and <xref:System.Windows.Forms.PictureBox> components represent simple implementations of the Event-based Asynchronous Pattern.</span></span> <span data-ttu-id="e6d5a-136">Os componentes <xref:System.Net.WebClient> e <xref:System.ComponentModel.BackgroundWorker> representam implementações mais complexas do Padrão Assíncrono baseado em Evento.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-136">The <xref:System.Net.WebClient> and <xref:System.ComponentModel.BackgroundWorker> components represent more complex implementations of the Event-based Asynchronous Pattern.</span></span>  
  
 <span data-ttu-id="e6d5a-137">Abaixo está uma declaração de classe de exemplo que está em conformidade com o padrão:</span><span class="sxs-lookup"><span data-stu-id="e6d5a-137">Below is an example class declaration that conforms to the pattern:</span></span>  
  
```vb  
Public Class AsyncExample  
    ' Synchronous methods.  
    Public Function Method1(ByVal param As String) As Integer
    Public Sub Method2(ByVal param As Double)
  
    ' Asynchronous methods.  
    Overloads Public Sub Method1Async(ByVal param As String)
    Overloads Public Sub Method1Async(ByVal param As String, ByVal userState As Object)
    Public Event Method1Completed As Method1CompletedEventHandler  
  
    Overloads Public Sub Method2Async(ByVal param As Double)
    Overloads Public Sub Method2Async(ByVal param As Double, ByVal userState As Object)
    Public Event Method2Completed As Method2CompletedEventHandler  
  
    Public Sub CancelAsync(ByVal userState As Object)
  
    Public ReadOnly Property IsBusy () As Boolean  
  
    ' Class implementation not shown.  
End Class  
```  
  
```csharp  
public class AsyncExample  
{  
    // Synchronous methods.  
    public int Method1(string param);  
    public void Method2(double param);  
  
    // Asynchronous methods.  
    public void Method1Async(string param);  
    public void Method1Async(string param, object userState);  
    public event Method1CompletedEventHandler Method1Completed;  
  
    public void Method2Async(double param);  
    public void Method2Async(double param, object userState);  
    public event Method2CompletedEventHandler Method2Completed;  
  
    public void CancelAsync(object userState);  
  
    public bool IsBusy { get; }  
  
    // Class implementation not shown.  
}  
```  
  
 <span data-ttu-id="e6d5a-138">A classe fictícia `AsyncExample` possui dois métodos, ambos com suporte a invocações síncronas e assíncronas.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-138">The fictitious `AsyncExample` class has two methods, both of which support synchronous and asynchronous invocations.</span></span> <span data-ttu-id="e6d5a-139">As sobrecargas síncronas se comportam como qualquer chamada de método e executam a operação no thread de chamada; se a operação consumir tempo, pode haver um atrasa notável antes de a chamada retornar.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-139">The synchronous overloads behave like any method call and execute the operation on the calling thread; if the operation is time-consuming, there may be a noticeable delay before the call returns.</span></span> <span data-ttu-id="e6d5a-140">As sobrecargas assíncronas iniciarão a operação em outro thread e depois retornarão imediatamente, permitindo que o thread de chamada prossiga enquanto a operação é executada "em segundo plano".</span><span class="sxs-lookup"><span data-stu-id="e6d5a-140">The asynchronous overloads will start the operation on another thread and then return immediately, allowing the calling thread to continue while the operation executes "in the background."</span></span>  
  
### <a name="asynchronous-method-overloads"></a><span data-ttu-id="e6d5a-141">Sobrecargas de Método Assíncronas</span><span class="sxs-lookup"><span data-stu-id="e6d5a-141">Asynchronous Method Overloads</span></span>  
 <span data-ttu-id="e6d5a-142">Há possivelmente duas sobrecargas para as operações assíncronas: invocação simples e invocação múltipla.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-142">There are potentially two overloads for the asynchronous operations: single-invocation and multiple-invocation.</span></span> <span data-ttu-id="e6d5a-143">Você pode distinguir essas duas formas por suas assinaturas de método: a forma de invocação múltipla tem um parâmetro extra chamado `userState`.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-143">You can distinguish these two forms by their method signatures: the multiple-invocation form has an extra parameter called `userState`.</span></span> <span data-ttu-id="e6d5a-144">Essa forma faz com que seja possível para seu código chama `Method1Async(string param, object userState)` diversas vezes sem esperar até que qualquer operação assíncrona pendente seja concluída.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-144">This form makes it possible for your code to call `Method1Async(string param, object userState)` multiple times without waiting for any pending asynchronous operations to finish.</span></span> <span data-ttu-id="e6d5a-145">Se, por outro lado, você tentar chamar `Method1Async(string param)` antes de uma invocação anterior tiver sido concluída, o método eleva um <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-145">If, on the other hand, you try to call `Method1Async(string param)` before a previous invocation has completed, the method raises an <xref:System.InvalidOperationException>.</span></span>  
  
 <span data-ttu-id="e6d5a-146">O parâmetro `userState` para as sobrecargas de invocação múltipla permite que você faça a distinção entre as operações assíncronas.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-146">The `userState` parameter for the multiple-invocation overloads allows you to distinguish among asynchronous operations.</span></span> <span data-ttu-id="e6d5a-147">Você fornece um valor exclusivo (por exemplo, um GUID ou código hash) para cada chamada para `Method1Async(string param, object userState)`, e quando cada operação for concluída, seu manipulador de evento poderá determinar qual instância da operação elevou o evento de conclusão.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-147">You provide a unique value (for example, a GUID or hash code) for each call to `Method1Async(string param, object userState)`, and when each operation is completed, your event handler can determine which instance of the operation raised the completion event.</span></span>  
  
### <a name="tracking-pending-operations"></a><span data-ttu-id="e6d5a-148">Acompanhando Operações Pendentes</span><span class="sxs-lookup"><span data-stu-id="e6d5a-148">Tracking Pending Operations</span></span>  
 <span data-ttu-id="e6d5a-149">Se você usar as sobrecargas de invocação múltipla, seu código precisará monitorar os objetos `userState` (IDs de tarefa) para as tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-149">If you use the multiple-invocation overloads, your code will need to keep track of the `userState` objects (task IDs) for pending tasks.</span></span> <span data-ttu-id="e6d5a-150">Para cada chamada para `Method1Async(string param, object userState)`, você geralmente gera um novo objeto `userState` exclusivo e o adiciona a uma coleção.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-150">For each call to `Method1Async(string param, object userState)`, you will typically generate a new, unique `userState` object and add it to a collection.</span></span> <span data-ttu-id="e6d5a-151">Quando a tarefa correspondente a esse objeto `userState` eleva o evento de conclusão, sua implementação do método de conclusão irá examinar <xref:System.ComponentModel.AsyncCompletedEventArgs.UserState%2A?displayProperty=nameWithType> e removê-lo da coleção.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-151">When the task corresponding to this `userState` object raises the completion event, your completion method implementation will examine <xref:System.ComponentModel.AsyncCompletedEventArgs.UserState%2A?displayProperty=nameWithType> and remove it from your collection.</span></span> <span data-ttu-id="e6d5a-152">Usado dessa forma, o parâmetro `userState` assume a função de uma ID de tarefa.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-152">Used this way, the `userState` parameter takes the role of a task ID.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e6d5a-153">Você deve ter o cuidado de fornecer um valor exclusivo para `userState` em suas chamadas para sobrecargas de invocação múltipla.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-153">You must be careful to provide a unique value for `userState` in your calls to multiple-invocation overloads.</span></span> <span data-ttu-id="e6d5a-154">IDs de tarefa não exclusivos farão com que a classe assíncrona lance um <xref:System.ArgumentException>.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-154">Non-unique task IDs will cause the asynchronous class throw an <xref:System.ArgumentException>.</span></span>  
  
### <a name="canceling-pending-operations"></a><span data-ttu-id="e6d5a-155">Cancelando Operações Pendentes</span><span class="sxs-lookup"><span data-stu-id="e6d5a-155">Canceling Pending Operations</span></span>  
 <span data-ttu-id="e6d5a-156">É importante poder cancelar operações assíncronas a qualquer momento antes de sua conclusão.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-156">It is important to be able to cancel asynchronous operations at any time before their completion.</span></span> <span data-ttu-id="e6d5a-157">Classes que implementam o Padrão Assíncrono baseado em Evento terão um método `CancelAsync` (se houver somente um método assíncrono) ou um método _MethodName_**AsyncCancel** (se houver vários métodos assíncronos).</span><span class="sxs-lookup"><span data-stu-id="e6d5a-157">Classes that implement the Event-based Asynchronous Pattern will have a `CancelAsync` method (if there is only one asynchronous method) or a _MethodName_**AsyncCancel** method (if there are multiple asynchronous methods).</span></span>  
  
 <span data-ttu-id="e6d5a-158">Métodos que permitem várias invocações assumem um parâmetro `userState`, que pode ser usado para acompanhar o tempo de vida de cada tarefa.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-158">Methods that allow multiple invocations take a `userState` parameter, which can be used to track the lifetime of each task.</span></span> <span data-ttu-id="e6d5a-159">`CancelAsync` utiliza um parâmetro `userState`, que permite o cancelamento de tarefas pendentes específicas.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-159">`CancelAsync` takes a `userState` parameter, which allows you to cancel particular pending tasks.</span></span>  
  
 <span data-ttu-id="e6d5a-160">Métodos com suporte a somente uma única operação pendente por vez, como `Method1Async(string param)`, não podem ser cancelados.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-160">Methods that support only a single pending operation at a time, like `Method1Async(string param)`, are not cancelable.</span></span>  
  
### <a name="receiving-progress-updates-and-incremental-results"></a><span data-ttu-id="e6d5a-161">Recebendo Atualizações de Andamento e Resultados Incrementais</span><span class="sxs-lookup"><span data-stu-id="e6d5a-161">Receiving Progress Updates and Incremental Results</span></span>  
 <span data-ttu-id="e6d5a-162">Uma classe que adere ao Padrão Assíncrono baseado em Evento pode opcionalmente oferecer um evento para acompanhar o andamento e os resultados incrementais.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-162">A class that adheres to the Event-based Asynchronous Pattern may optionally provide an event for tracking progress and incremental results.</span></span> <span data-ttu-id="e6d5a-163">Ele geralmente será denominado `ProgressChanged` ou _MethodName_**ProgressChanged** e seu manipulador de evento correspondente assumirá um parâmetro <xref:System.ComponentModel.ProgressChangedEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-163">This will typically be named `ProgressChanged` or _MethodName_**ProgressChanged**, and its corresponding event handler will take a <xref:System.ComponentModel.ProgressChangedEventArgs> parameter.</span></span>  
  
 <span data-ttu-id="e6d5a-164">O manipulador de evento para o evento `ProgressChanged` pode examinar a propriedade <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A?displayProperty=nameWithType> para determinar qual porcentagem de uma tarefa assíncrona foi concluída.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-164">The event handler for the `ProgressChanged` event can examine the <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A?displayProperty=nameWithType> property to determine what percentage of an asynchronous task has been completed.</span></span> <span data-ttu-id="e6d5a-165">Essa propriedade estará entre 0 e 100, e pode ser usada para atualizar a propriedade <xref:System.Windows.Forms.ProgressBar.Value%2A> de um <xref:System.Windows.Forms.ProgressBar>.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-165">This property will range from 0 to 100, and it can be used to update the <xref:System.Windows.Forms.ProgressBar.Value%2A> property of a <xref:System.Windows.Forms.ProgressBar>.</span></span> <span data-ttu-id="e6d5a-166">Se várias operações assíncronas estiverem pendentes, você poderá usar a propriedade <xref:System.ComponentModel.ProgressChangedEventArgs.UserState%2A?displayProperty=nameWithType> para distinguir qual operação está relatando o andamento.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-166">If multiple asynchronous operations are pending, you can use the <xref:System.ComponentModel.ProgressChangedEventArgs.UserState%2A?displayProperty=nameWithType> property to distinguish which operation is reporting progress.</span></span>  
  
 <span data-ttu-id="e6d5a-167">Algumas classes podem relatar resultados incrementais conforme as operações assíncronas prosseguem.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-167">Some classes may report incremental results as asynchronous operations proceed.</span></span> <span data-ttu-id="e6d5a-168">Esses resultados serão armazenados em uma classe derivada de <xref:System.ComponentModel.ProgressChangedEventArgs> e aparecerão como propriedades na classe derivada.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-168">These results will be stored in a class that derives from <xref:System.ComponentModel.ProgressChangedEventArgs> and they will appear as properties in the derived class.</span></span> <span data-ttu-id="e6d5a-169">Você pode acessar esses resultados no manipulador de eventos para o evento `ProgressChanged`, assim como acessaria a propriedade <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A>.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-169">You can access these results in the event handler for the `ProgressChanged` event, just as you would access the <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> property.</span></span> <span data-ttu-id="e6d5a-170">Se várias operações assíncronas estiverem pendentes, você poderá usar a propriedade <xref:System.ComponentModel.ProgressChangedEventArgs.UserState%2A> para distinguir qual operação está relatando resultados incrementais.</span><span class="sxs-lookup"><span data-stu-id="e6d5a-170">If multiple asynchronous operations are pending, you can use the <xref:System.ComponentModel.ProgressChangedEventArgs.UserState%2A> property to distinguish which operation is reporting incremental results.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e6d5a-171">Confira também</span><span class="sxs-lookup"><span data-stu-id="e6d5a-171">See also</span></span>

- <xref:System.ComponentModel.ProgressChangedEventArgs>
- <xref:System.ComponentModel.BackgroundWorker>
- <xref:System.ComponentModel.AsyncCompletedEventArgs>
- [<span data-ttu-id="e6d5a-172">Como usar componentes compatíveis com o Padrão Assíncrono baseado em Evento</span><span class="sxs-lookup"><span data-stu-id="e6d5a-172">How to: Use Components That Support the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/how-to-use-components-that-support-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="e6d5a-173">Como executar uma operação em segundo plano</span><span class="sxs-lookup"><span data-stu-id="e6d5a-173">How to: Run an Operation in the Background</span></span>](../../../docs/framework/winforms/controls/how-to-run-an-operation-in-the-background.md)
- [<span data-ttu-id="e6d5a-174">Como implementar um formulário que usa uma operação em segundo plano</span><span class="sxs-lookup"><span data-stu-id="e6d5a-174">How to: Implement a Form That Uses a Background Operation</span></span>](../../../docs/framework/winforms/controls/how-to-implement-a-form-that-uses-a-background-operation.md)
- [<span data-ttu-id="e6d5a-175">EAP (Padrão Assíncrono baseado em Evento)</span><span class="sxs-lookup"><span data-stu-id="e6d5a-175">Event-based Asynchronous Pattern (EAP)</span></span>](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md)
- [<span data-ttu-id="e6d5a-176">Práticas recomendadas para a implementação do Padrão Assíncrono baseado em Evento</span><span class="sxs-lookup"><span data-stu-id="e6d5a-176">Best Practices for Implementing the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/best-practices-for-implementing-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="e6d5a-177">Decidindo quando implementar o Padrão Assíncrono baseado em Evento</span><span class="sxs-lookup"><span data-stu-id="e6d5a-177">Deciding When to Implement the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/deciding-when-to-implement-the-event-based-asynchronous-pattern.md)
