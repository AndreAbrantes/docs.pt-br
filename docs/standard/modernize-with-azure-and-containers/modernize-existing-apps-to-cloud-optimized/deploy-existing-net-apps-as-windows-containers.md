---
title: Implantar aplicativos .NET existentes como contêineres do Windows
description: Modernizar aplicativos .NET existentes com contêineres do Windows e de nuvem do Azure | Implantar aplicativos .NET existentes como contêineres do Windows
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 04/29/2018
ms.openlocfilehash: 646acc6fd14c1ff85593dbf6074f0d03d86f04bd
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/10/2018
ms.locfileid: "53143738"
---
# <a name="deploy-existing-net-apps-as-windows-containers"></a><span data-ttu-id="0e911-103">Implantar aplicativos .NET existentes como contêineres do Windows</span><span class="sxs-lookup"><span data-stu-id="0e911-103">Deploy existing .NET apps as Windows containers</span></span>

<span data-ttu-id="0e911-104">Implantações baseadas em contêineres do Windows são aplicáveis aos aplicativos otimizados para a nuvem e aplicativos nativos de nuvem.</span><span class="sxs-lookup"><span data-stu-id="0e911-104">Deployments that are based on Windows Containers are applicable to Cloud-Optimized applications and Cloud-Native applications.</span></span>

<span data-ttu-id="0e911-105">No entanto, neste guia e especialmente nas seções a seguir, ele principalmente se concentra no uso dos contêineres do Windows para *otimizada para a nuvem* aplicativos em que você não precisará refazer a arquitetura de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0e911-105">However, in this guide and especially in the following sections, it mostly focuses on using Windows Containers for *Cloud-Optimized* applications where you don’t need to rearchitect your application.</span></span>

## <a name="what-are-containers-linux-or-windows"></a><span data-ttu-id="0e911-106">O que são contêineres?</span><span class="sxs-lookup"><span data-stu-id="0e911-106">What are containers?</span></span> <span data-ttu-id="0e911-107">(Linux ou Windows)</span><span class="sxs-lookup"><span data-stu-id="0e911-107">(Linux or Windows)</span></span>

<span data-ttu-id="0e911-108">Contêineres são uma maneira para empacotar um aplicativo em seu próprio pacote isolado.</span><span class="sxs-lookup"><span data-stu-id="0e911-108">Containers are a way to wrap up an application into its own isolated package.</span></span> <span data-ttu-id="0e911-109">Em seu contêiner, o aplicativo não é afetado por aplicativos ou processos que existem fora do contêiner.</span><span class="sxs-lookup"><span data-stu-id="0e911-109">In its container, the application is not affected by applications or processes that exist outside of the container.</span></span> <span data-ttu-id="0e911-110">Tudo o que o aplicativo depende a execução com êxito como um processo é dentro do contêiner.</span><span class="sxs-lookup"><span data-stu-id="0e911-110">Everything the application depends on to run successfully as a process is inside the container.</span></span> <span data-ttu-id="0e911-111">Onde quer que o contêiner pode mover, os requisitos do aplicativo sempre serão atendidos, em termos de dependências diretas, pois ele é fornecido com tudo o que ele precisa ser executado (dependências de biblioteca, tempos de execução e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="0e911-111">Wherever the container might move, the requirements of the application will always be met, in terms of direct dependencies, because it is bundled with everything that it needs to run (library dependencies, runtimes, and so on).</span></span>

<span data-ttu-id="0e911-112">A principal característica de um contêiner é que ele faz o ambiente o mesmo entre diferentes implantações como o contêiner em si é fornecido com todas as dependências necessárias.</span><span class="sxs-lookup"><span data-stu-id="0e911-112">The main characteristic of a container is that it makes the environment the same across different deployments because the container itself comes with all the dependencies it needs.</span></span> <span data-ttu-id="0e911-113">Você pode depurar o aplicativo em seu computador e, em seguida, implantá-lo em outro computador, com o mesmo ambiente garantido.</span><span class="sxs-lookup"><span data-stu-id="0e911-113">You can debug the application on your machine, and then deploy it to another machine, with the same environment guaranteed.</span></span>

<span data-ttu-id="0e911-114">Um contêiner é uma instância de uma imagem de contêiner.</span><span class="sxs-lookup"><span data-stu-id="0e911-114">A container is an instance of a container image.</span></span> <span data-ttu-id="0e911-115">Uma imagem de contêiner é uma maneira de empacotar um aplicativo ou serviço (como um instantâneo) e, em seguida, implantá-lo de forma confiável e reproduzível.</span><span class="sxs-lookup"><span data-stu-id="0e911-115">A container image is a way to package an app or service (like a snapshot), and then deploy it in a reliable and reproducible way.</span></span> <span data-ttu-id="0e911-116">Você poderia dizer que o Docker não é que apenas uma tecnologia-it da também uma filosofia e um processo.</span><span class="sxs-lookup"><span data-stu-id="0e911-116">You could say that Docker is not only a technology-it's also a philosophy and a process.</span></span>

<span data-ttu-id="0e911-117">Como contêineres diariamente se tornado mais comuns, eles estão se tornando todo o setor um "unidade de implantação".</span><span class="sxs-lookup"><span data-stu-id="0e911-117">As containers daily become more common, they are becoming an industry-wide "unit of deployment."</span></span>

## <a name="benefits-of-containers-docker-engine-on-linux-or-windows"></a><span data-ttu-id="0e911-118">Benefícios de contêineres (mecanismo do Docker no Linux ou Windows)</span><span class="sxs-lookup"><span data-stu-id="0e911-118">Benefits of containers (Docker Engine on Linux or Windows)</span></span>

<span data-ttu-id="0e911-119">Também criando aplicativos usando contêineres, o que pode ser definido como ofertas de blocos de construção leves um aumento significativo na agilidade para compilar, enviar e executar qualquer aplicativo, em qualquer infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="0e911-119">Building applications by using containers-which also might be defined as lightweight building blocks-offers a significant increase in agility for building, shipping, and running any application, across any infrastructure.</span></span>

<span data-ttu-id="0e911-120">Com os contêineres, você pode aproveitar qualquer aplicativo do desenvolvimento à produção com pouca ou nenhuma alteração de código, graças à integração de Docker em ferramentas de desenvolvedor da Microsoft, de sistemas operacionais e de nuvem.</span><span class="sxs-lookup"><span data-stu-id="0e911-120">With containers, you can take any app from development to production with little or no code change, thanks to Docker integration across Microsoft developer tools, operating systems, and cloud.</span></span>

<span data-ttu-id="0e911-121">Quando você implanta em VMs sem formatação, você provavelmente já tem um método em vigor para a implantação de aplicativos do ASP.NET para suas VMs.</span><span class="sxs-lookup"><span data-stu-id="0e911-121">When you deploy to plain VMs, you probably already have a method in place for deploying ASP.NET apps to your VMs.</span></span> <span data-ttu-id="0e911-122">No entanto, é provável, que o seu método envolve várias etapas manuais ou automatizados de processos complexos usando uma ferramenta de implantação como o Puppet, ou uma ferramenta semelhante.</span><span class="sxs-lookup"><span data-stu-id="0e911-122">It's likely, though, that your method involves multiple manual steps or complex automated processes by using a deployment tool like Puppet, or a similar tool.</span></span> <span data-ttu-id="0e911-123">Você talvez precise executar tarefas como modificar itens de configuração, copiar o conteúdo do aplicativo entre os servidores e execução de programas de instalação interativa, com base em configurações. msi, seguidas pelo teste.</span><span class="sxs-lookup"><span data-stu-id="0e911-123">You might need to perform tasks like modifying configuration items, copying application content between servers, and running interactive setup programs based on .msi setups, followed by testing.</span></span> <span data-ttu-id="0e911-124">Todas essas etapas na implantação adicionam tempo e o risco em implantações.</span><span class="sxs-lookup"><span data-stu-id="0e911-124">All those steps in the deployment add time and risk to deployments.</span></span> <span data-ttu-id="0e911-125">Você receberá falhas sempre que uma dependência não está presente no ambiente de destino.</span><span class="sxs-lookup"><span data-stu-id="0e911-125">You will get failures whenever a dependency is not present in the target environment.</span></span>

<span data-ttu-id="0e911-126">Em contêineres do Windows, o processo de empacotamento de aplicativos é totalmente automatizado.</span><span class="sxs-lookup"><span data-stu-id="0e911-126">In Windows Containers, the process of packaging applications is fully automated.</span></span> <span data-ttu-id="0e911-127">Contêineres do Windows se baseia na plataforma do Docker, que oferece as atualizações automáticas e reversões para implantações de contêiner.</span><span class="sxs-lookup"><span data-stu-id="0e911-127">Windows Containers is based on the Docker platform, which offers automatic updates and rollbacks for container deployments.</span></span> <span data-ttu-id="0e911-128">O principal aprimoramento obtidos ao usar o mecanismo do Docker é que você crie imagens, que são como os instantâneos do seu aplicativo, com todas as suas dependências.</span><span class="sxs-lookup"><span data-stu-id="0e911-128">The main improvement you get from using the Docker engine is that you create images, which are like snapshots of your application, with all its dependencies.</span></span> <span data-ttu-id="0e911-129">As imagens são imagens do Docker (uma Windows imagem de contêiner, neste caso).</span><span class="sxs-lookup"><span data-stu-id="0e911-129">The images are Docker images (a Windows container image, in this case).</span></span> <span data-ttu-id="0e911-130">As imagens de executar aplicativos ASP.NET em contêineres, sem precisar voltar ao código-fonte.</span><span class="sxs-lookup"><span data-stu-id="0e911-130">The images run ASP.NET apps in containers, without going back to source code.</span></span> <span data-ttu-id="0e911-131">O instantâneo do contêiner torna-se a unidade de implantação.</span><span class="sxs-lookup"><span data-stu-id="0e911-131">The container snapshot becomes the unit of deployment.</span></span>

<span data-ttu-id="0e911-132">Muitas organizações estão colocar em contêineres aplicativos monolíticos existentes pelos seguintes motivos:</span><span class="sxs-lookup"><span data-stu-id="0e911-132">Many organizations are containerizing existing monolithic applications for the following reasons:</span></span>

-   <span data-ttu-id="0e911-133">**Versão maior agilidade por meio de implantação aprimoradas**.</span><span class="sxs-lookup"><span data-stu-id="0e911-133">**Release agility through improved deployment**.</span></span> <span data-ttu-id="0e911-134">Os contêineres oferecem um contrato de implantação consistente entre o desenvolvimento e operações.</span><span class="sxs-lookup"><span data-stu-id="0e911-134">Containers offer a consistent deployment contract between development and operations.</span></span> <span data-ttu-id="0e911-135">Quando você usa contêineres, você não ouvirá os desenvolvedores dizem, "Funciona no meu computador, por que não em produção?"</span><span class="sxs-lookup"><span data-stu-id="0e911-135">When you use containers, you won't hear developers say, "It works on my machine, why not in production?"</span></span> <span data-ttu-id="0e911-136">Pode dizer: "Ele é executado como um contêiner, ele será executado na produção."</span><span class="sxs-lookup"><span data-stu-id="0e911-136">They can say, "It runs as a container, so it will run in production."</span></span> <span data-ttu-id="0e911-137">O aplicativo empacotado, com todas as suas dependências, pode ser executado em qualquer ambiente compatível com base em contêiner.</span><span class="sxs-lookup"><span data-stu-id="0e911-137">The packaged application, with all its dependencies, can be executed in any supported container-based environment.</span></span> <span data-ttu-id="0e911-138">Ela será executada da maneira que ele deve ser executado em todos os destinos de implantação (desenvolvimento, QA, preparo e produção).</span><span class="sxs-lookup"><span data-stu-id="0e911-138">It will run the way it was intended to run in all deployment targets (dev, QA, staging, production).</span></span> <span data-ttu-id="0e911-139">Contêineres eliminam a maioria dos fricções quando eles se movem de um estágio para o próximo, o que melhora significativamente a implantação, e você pode enviar mais rápido.</span><span class="sxs-lookup"><span data-stu-id="0e911-139">Containers eliminate most frictions when they move from one stage to the next, which greatly improves deployment, and you can ship faster.</span></span>

-   <span data-ttu-id="0e911-140">**Reduções de custos**.</span><span class="sxs-lookup"><span data-stu-id="0e911-140">**Cost reductions**.</span></span> <span data-ttu-id="0e911-141">Contêineres de levam a reduzir os custos, pela consolidação e a remoção de hardware existente ou de aplicativos em execução em uma densidade mais alta por unidade de hardware.</span><span class="sxs-lookup"><span data-stu-id="0e911-141">Containers lead to lower costs, either by the consolidation and removal of existing hardware, or from running applications at a higher density per unit of hardware.</span></span>

-   <span data-ttu-id="0e911-142">**Portabilidade**.</span><span class="sxs-lookup"><span data-stu-id="0e911-142">**Portability**.</span></span> <span data-ttu-id="0e911-143">Contêineres são modulares e portátil.</span><span class="sxs-lookup"><span data-stu-id="0e911-143">Containers are modular and portable.</span></span> <span data-ttu-id="0e911-144">Contêineres do docker têm suporte em qualquer sistema operacional (Linux e Windows), em qualquer nuvem pública principais (Microsoft Azure, Amazon AWS, Google e IBM) e no local e privado ou ambientes de nuvem híbrida.</span><span class="sxs-lookup"><span data-stu-id="0e911-144">Docker containers are supported on any server operating system (Linux and Windows), in any major public cloud (Microsoft Azure, Amazon AWS, Google, IBM), and in on-premises and private or hybrid cloud environments.</span></span>

-   <span data-ttu-id="0e911-145">**Controle**.</span><span class="sxs-lookup"><span data-stu-id="0e911-145">**Control**.</span></span> <span data-ttu-id="0e911-146">Os contêineres oferecem um ambiente flexível e seguro que é controlado no nível do contêiner.</span><span class="sxs-lookup"><span data-stu-id="0e911-146">Containers offer a flexible and secure environment that's controlled at the container level.</span></span> <span data-ttu-id="0e911-147">Um contêiner pode ser protegido, isolado e limitado até mesmo, definindo políticas de restrição de execução no contêiner.</span><span class="sxs-lookup"><span data-stu-id="0e911-147">A container can be secured, isolated, and even limited by setting execution constraint policies on the container.</span></span> <span data-ttu-id="0e911-148">Conforme detalhado na seção sobre contêineres do Windows, contêineres do Hyper-V e do Windows Server 2016 oferecem opções de suporte da empresa adicionais.</span><span class="sxs-lookup"><span data-stu-id="0e911-148">As detailed in the section about Windows Containers, Windows Server 2016 and Hyper-V containers offer additional enterprise support options.</span></span>

<span data-ttu-id="0e911-149">Aprimoramentos significativos na agilidade, portabilidade e controle acabar levam para reduções significativas nos custos ao usar contêineres para desenvolver e manter aplicativos.</span><span class="sxs-lookup"><span data-stu-id="0e911-149">Significant improvements in agility, portability, and control ultimately lead to significant cost reductions when you use containers to develop and maintain applications.</span></span>

## <a name="what-is-docker"></a><span data-ttu-id="0e911-150">O que é o Docker?</span><span class="sxs-lookup"><span data-stu-id="0e911-150">What is Docker?</span></span>

<span data-ttu-id="0e911-151">[Docker](https://www.docker.com/) é um [projeto de código-fonte aberto](https://github.com/docker/docker) que automatiza a implantação de aplicativos como contêineres autossuficientes portáteis que podem ser executados na nuvem ou local.</span><span class="sxs-lookup"><span data-stu-id="0e911-151">[Docker](https://www.docker.com/) is an [open-source project](https://github.com/docker/docker) that automates the deployment of applications as portable, self-sufficient containers that can run in the cloud or on-premises.</span></span> <span data-ttu-id="0e911-152">O Docker é também um [empresa](https://www.docker.com/) que promove e evolui essa tecnologia.</span><span class="sxs-lookup"><span data-stu-id="0e911-152">Docker is also a [company](https://www.docker.com/) that promotes and evolves this technology.</span></span> <span data-ttu-id="0e911-153">A empresa funciona em colaboração com fornecedores do Windows, incluindo a Microsoft e de nuvem, o Linux.</span><span class="sxs-lookup"><span data-stu-id="0e911-153">The company works in collaboration with cloud, Linux, and Windows vendors, including Microsoft.</span></span>

![](./media/image6.png)

> <span data-ttu-id="0e911-154">**Figura 4 a 6.**</span><span class="sxs-lookup"><span data-stu-id="0e911-154">**Figure 4-6.**</span></span> <span data-ttu-id="0e911-155">O Docker implanta contêineres em todas as camadas da nuvem híbrida</span><span class="sxs-lookup"><span data-stu-id="0e911-155">Docker deploys containers at all layers of the hybrid cloud</span></span>

<span data-ttu-id="0e911-156">Para alguém familiarizado com as máquinas virtuais, contêineres podem parecer muito semelhante.</span><span class="sxs-lookup"><span data-stu-id="0e911-156">To someone familiar with virtual machines, containers might appear to be remarkably similar.</span></span> <span data-ttu-id="0e911-157">Um contêiner executa um sistema operacional, tem um sistema de arquivos e pode ser acessado em uma rede, assim como um sistema de computador físico ou virtual.</span><span class="sxs-lookup"><span data-stu-id="0e911-157">A container runs an operating system, has a file system, and can be accessed over a network, just like a physical or virtual computer system.</span></span> <span data-ttu-id="0e911-158">No entanto, a tecnologia e os conceitos por trás de contêineres são muito diferentes das máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="0e911-158">However, the technology and concepts behind containers are vastly different from virtual machines.</span></span> <span data-ttu-id="0e911-159">Do ponto de vista do desenvolvedor, um contêiner deve ser tratado mais como um único processo.</span><span class="sxs-lookup"><span data-stu-id="0e911-159">From a developer point of view, a container must be treated more like a single process.</span></span> <span data-ttu-id="0e911-160">Na verdade, um contêiner tem um único ponto de entrada para um processo.</span><span class="sxs-lookup"><span data-stu-id="0e911-160">In fact, a container has a single entry point for one process.</span></span>

<span data-ttu-id="0e911-161">Contêineres do docker (para manter a simplicidade, *contêineres*) podem ser executados nativamente no Linux e Windows.</span><span class="sxs-lookup"><span data-stu-id="0e911-161">Docker containers (for simplicity, *containers*) can run natively on Linux and Windows.</span></span> <span data-ttu-id="0e911-162">Ao executar contêineres regulares, os contêineres do Windows podem executar somente em hosts do Windows (um servidor de host ou uma máquina virtual) e contêineres do Linux podem ser executado somente em hosts Linux.</span><span class="sxs-lookup"><span data-stu-id="0e911-162">When running regular containers, Windows containers can run only on Windows hosts (a host server or a VM), and Linux containers can run only on Linux hosts.</span></span> <span data-ttu-id="0e911-163">No entanto, em versões recentes do Windows Server e Hyper-V contêineres, um contêiner do Linux também pode executar nativamente no Windows Server usando a tecnologia de isolamento do Hyper-V que está atualmente disponível apenas em contêineres do Windows Server.</span><span class="sxs-lookup"><span data-stu-id="0e911-163">However, in recent versions of Windows Server and Hyper-V containers, a Linux container also can run natively on Windows Server by using the Hyper-V isolation technology that currently is available only in Windows Server Containers.</span></span>

<span data-ttu-id="0e911-164">Em um futuro próximo, ambientes mistos que tenham contêineres do Linux e Windows será possível e até mesmo comum.</span><span class="sxs-lookup"><span data-stu-id="0e911-164">In the near future, mixed environments that have both Linux and Windows containers will be possible and even common.</span></span>

## <a name="benefits-of-windows-containers-for-your-existing-net-applications"></a><span data-ttu-id="0e911-165">Benefícios dos contêineres do Windows para seus aplicativos .NET existentes</span><span class="sxs-lookup"><span data-stu-id="0e911-165">Benefits of Windows Containers for your existing .NET applications</span></span>

<span data-ttu-id="0e911-166">Os benefícios do uso de contêineres do Windows são basicamente os mesmos benefícios que você obtém de contêineres em geral.</span><span class="sxs-lookup"><span data-stu-id="0e911-166">The benefits of using Windows Containers are fundamentally the same benefits you get from containers in general.</span></span> <span data-ttu-id="0e911-167">Usando contêineres do Windows é sobre como melhorar bastante a agilidade, portabilidade e controle.</span><span class="sxs-lookup"><span data-stu-id="0e911-167">Using Windows Containers is about greatly improving agility, portability, and control.</span></span>

<span data-ttu-id="0e911-168">Aplicativos .NET existentes se referem a esses aplicativos que foram criados usando o .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="0e911-168">Existing .NET applications refer to those applications that were created using the .NET Framework.</span></span> <span data-ttu-id="0e911-169">Por exemplo, eles podem ser tradicionais aplicativos de web do ASP.NET-eles não usam o .NET Core, que é mais recente e é executado entre plataformas no Linux, Windows e MacOS.</span><span class="sxs-lookup"><span data-stu-id="0e911-169">For example, they might be traditional ASP.NET web applications-they don't use .NET Core, which is newer and runs cross-platform on Linux, Windows, and MacOS.</span></span>

<span data-ttu-id="0e911-170">A principal dependência no .NET Framework é Windows.</span><span class="sxs-lookup"><span data-stu-id="0e911-170">The main dependency in the .NET Framework is Windows.</span></span> <span data-ttu-id="0e911-171">Ele também tem dependências secundárias, como IIS e System. Web no ASP.NET tradicional.</span><span class="sxs-lookup"><span data-stu-id="0e911-171">It also has secondary dependencies, like IIS, and System.Web in traditional ASP.NET.</span></span>

<span data-ttu-id="0e911-172">Um aplicativo do .NET Framework deve ser executado no Windows, período.</span><span class="sxs-lookup"><span data-stu-id="0e911-172">A .NET Framework application must run on Windows, period.</span></span> <span data-ttu-id="0e911-173">Se você deseja colocar em contêineres de aplicativos .NET Framework existentes e você não pode ou não quiser investir em uma migração para o .NET Core ("se ele está funcionando corretamente, não migrá-la"), a única opção que você tem para contêineres é usar contêineres do Windows.</span><span class="sxs-lookup"><span data-stu-id="0e911-173">If you want to containerize existing .NET Framework applications and you can't or don't want to invest in a migration to .NET Core ("If it works properly, don't migrate it"), the only choice you have for containers is to use Windows Containers.</span></span>

<span data-ttu-id="0e911-174">Portanto, um dos principais benefícios dos contêineres do Windows é que eles oferecem uma maneira para modernizar seus aplicativos existentes do .NET Framework que são executados em contêineres por meio do Windows.</span><span class="sxs-lookup"><span data-stu-id="0e911-174">So, one of the main benefits of Windows Containers is that they offer you a way to modernize your existing .NET Framework applications that are running on Windows-through containerization.</span></span> <span data-ttu-id="0e911-175">Por fim, contêineres do Windows obtém os benefícios que você está procurando usando contêineres de agilidade, portabilidade e um melhor controle.</span><span class="sxs-lookup"><span data-stu-id="0e911-175">Ultimately, Windows Containers gets you the benefits that you are looking for by using containers-agility, portability, and better control.</span></span>

## <a name="choose-an-os-to-target-with-net-based-containers"></a><span data-ttu-id="0e911-176">Escolha um sistema operacional direcionar com. Contêineres baseados em NET</span><span class="sxs-lookup"><span data-stu-id="0e911-176">Choose an OS to target with .NET-based containers</span></span>

<span data-ttu-id="0e911-177">Dada a diversidade de sistemas operacionais que são compatíveis com o Docker, bem como as diferenças entre o .NET Framework e .NET Core, você deve ter como destino um sistema operacional específico e em versões específicas com base na estrutura que você está usando.</span><span class="sxs-lookup"><span data-stu-id="0e911-177">Given the diversity of operating systems that are supported by Docker, as well as the differences between .NET Framework and .NET Core, you should target a specific OS and specific versions based on the framework you are using.</span></span>

<span data-ttu-id="0e911-178">Para o Windows, é possível usar o Windows Server Core ou o Windows Nano Server.</span><span class="sxs-lookup"><span data-stu-id="0e911-178">For Windows, you can use Windows Server Core or Windows Nano Server.</span></span> <span data-ttu-id="0e911-179">Essas versões do Windows oferecem características diferentes (como o IIS em vez de um servidor web auto-hospedado como Kestrel) que podem ser necessários para aplicativos do .NET Framework ou .NET Core.</span><span class="sxs-lookup"><span data-stu-id="0e911-179">These Windows versions provide different characteristics (like IIS versus a self-hosted web server like Kestrel) that might be needed by .NET Framework or .NET Core applications.</span></span>

<span data-ttu-id="0e911-180">Para Linux, várias distribuições estão disponíveis e há compatibilidade com elas nas imagens oficiais do .NET Docker (como Debian).</span><span class="sxs-lookup"><span data-stu-id="0e911-180">For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).</span></span>

<span data-ttu-id="0e911-181">Figura 4 a 7 mostra as versões do sistema operacional que você pode direcionar, dependendo da versão do aplicativo do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="0e911-181">Figure 4-7 shows OS versions that you can target, depending on the app's version of the .NET Framework.</span></span>

![](./media/image7.png)

> <span data-ttu-id="0e911-182">**Figura 4 a 7.**</span><span class="sxs-lookup"><span data-stu-id="0e911-182">**Figure 4-7.**</span></span> <span data-ttu-id="0e911-183">Sistemas operacionais de destino com base na versão do .NET Framework</span><span class="sxs-lookup"><span data-stu-id="0e911-183">Operating systems to target based on .NET Framework version</span></span>

<span data-ttu-id="0e911-184">Em cenários de migração para aplicativos existentes ou herdados que se baseiam em aplicativos do .NET Framework, as dependências principais são no Windows e no IIS.</span><span class="sxs-lookup"><span data-stu-id="0e911-184">In migration scenarios for existing or legacy applications that are based on .NET Framework applications, the main dependencies are on Windows and IIS.</span></span> <span data-ttu-id="0e911-185">Sua única opção é usar imagens do Docker com base no Windows Server Core e o .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="0e911-185">Your only option is to use Docker images based on Windows Server Core and the .NET Framework.</span></span>

<span data-ttu-id="0e911-186">Quando você adiciona o nome da imagem ao seu arquivo Dockerfile, você pode selecionar o sistema operacional e a versão por meio de uma marca, como nos exemplos a seguir para imagens de contêiner do Windows com base no .NET Framework:</span><span class="sxs-lookup"><span data-stu-id="0e911-186">When you add the image name to your Dockerfile file, you can select the operating system and version by using a tag, as in the following examples for .NET Framework-based Windows container images:</span></span>

> | <span data-ttu-id="0e911-187">**Marca**</span><span class="sxs-lookup"><span data-stu-id="0e911-187">**Tag**</span></span> | <span data-ttu-id="0e911-188">**Versão e sistema**</span><span class="sxs-lookup"><span data-stu-id="0e911-188">**System and version**</span></span> |
> |---|---|
> | <span data-ttu-id="0e911-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="0e911-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span></span> | <span data-ttu-id="0e911-190">.NET framework 4.x no Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="0e911-190">.NET Framework 4.x on Windows Server Core</span></span> |
> | <span data-ttu-id="0e911-191">**microsoft/aspnet:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="0e911-191">**microsoft/aspnet:4.x-windowsservercore**</span></span> | <span data-ttu-id="0e911-192">.NET framework 4.x com personalização adicional do ASP.NET, no Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="0e911-192">.NET Framework 4.x with additional ASP.NET customization, on Windows Server Core</span></span> |

<span data-ttu-id="0e911-193">Para o .NET Core (plataforma cruzada para Linux e Windows), as marcas teriam a seguinte aparência:</span><span class="sxs-lookup"><span data-stu-id="0e911-193">For .NET Core (cross-platform for Linux and Windows), the tags would look like the following:</span></span>

> | <span data-ttu-id="0e911-194">**Marca**</span><span class="sxs-lookup"><span data-stu-id="0e911-194">**Tag**</span></span> | <span data-ttu-id="0e911-195">**Versão e sistema**</span><span class="sxs-lookup"><span data-stu-id="0e911-195">**System and version**</span></span>
> |---|---|
> | <span data-ttu-id="0e911-196">**microsoft/dotnet:2.0.0-runtime**</span><span class="sxs-lookup"><span data-stu-id="0e911-196">**microsoft/dotnet:2.0.0-runtime**</span></span> | <span data-ttu-id="0e911-197">.NET core 2.0 em tempo de execução somente no Linux</span><span class="sxs-lookup"><span data-stu-id="0e911-197">.NET Core 2.0 runtime-only on Linux</span></span> |
> | <span data-ttu-id="0e911-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span><span class="sxs-lookup"><span data-stu-id="0e911-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span></span> | <span data-ttu-id="0e911-199">Tempo de execução somente no Windows Nano Server do .NET core 2.0</span><span class="sxs-lookup"><span data-stu-id="0e911-199">.NET Core 2.0 runtime-only on Windows Nano Server</span></span> |

### <a name="multi-arch-images"></a><span data-ttu-id="0e911-200">Imagens de várias arquiteturas</span><span class="sxs-lookup"><span data-stu-id="0e911-200">Multi-arch images</span></span>

<span data-ttu-id="0e911-201">A partir de meados de 2017, você também pode usar um novo recurso no Docker chamado [várias arquiteturas](https://github.com/moby/moby/issues/15866) imagens.</span><span class="sxs-lookup"><span data-stu-id="0e911-201">Beginning in mid-2017, you also can use a new feature in Docker called [multi-arch](https://github.com/moby/moby/issues/15866) images.</span></span> <span data-ttu-id="0e911-202">Imagens do Docker no .NET core podem usar marcas para várias arquiteturas.</span><span class="sxs-lookup"><span data-stu-id="0e911-202">.NET Core Docker images can use multi-arch tags.</span></span> <span data-ttu-id="0e911-203">Arquivos de seu Dockerfile não há mais necessidade de definir o sistema operacional de destino.</span><span class="sxs-lookup"><span data-stu-id="0e911-203">Your Dockerfile files no longer need to define the operating system that you are targeting.</span></span> <span data-ttu-id="0e911-204">O recurso para várias arquiteturas permite uma única marca a ser usado em várias configurações de máquina.</span><span class="sxs-lookup"><span data-stu-id="0e911-204">The multi-arch feature allows a single tag to be used across multiple machine configurations.</span></span> <span data-ttu-id="0e911-205">Por exemplo, com várias arquiteturas, você pode usar uma marca comuns: **microsoft/dotnet:2.0.0-runtime**.</span><span class="sxs-lookup"><span data-stu-id="0e911-205">For instance, with multi-arch, you can use one common tag: **microsoft/dotnet:2.0.0-runtime**.</span></span> <span data-ttu-id="0e911-206">Se você puxar a marca de um ambiente de contêiner do Linux, você obtém a imagem com base em Debian.</span><span class="sxs-lookup"><span data-stu-id="0e911-206">If you pull that tag from a Linux container environment, you get the Debian-based image.</span></span> <span data-ttu-id="0e911-207">Se você puxar a marca de um ambiente de contêiner do Windows, você obtém a imagem baseada em Nano Server.</span><span class="sxs-lookup"><span data-stu-id="0e911-207">If you pull that tag from a Windows container environment, you get the Nano Server-based image.</span></span>

<span data-ttu-id="0e911-208">Para imagens do .NET Framework, como o .NET Framework tradicional oferece suporte somente a Windows, é possível usar o recurso para várias arquiteturas.</span><span class="sxs-lookup"><span data-stu-id="0e911-208">For .NET Framework images, because the traditional .NET Framework supports only Windows, you cannot use the multi-arch feature.</span></span>

## <a name="windows-container-types"></a><span data-ttu-id="0e911-209">Tipos de contêineres do Windows</span><span class="sxs-lookup"><span data-stu-id="0e911-209">Windows container types</span></span>

<span data-ttu-id="0e911-210">Como contêineres do Linux, contêineres do Windows Server são gerenciados usando o mecanismo do Docker.</span><span class="sxs-lookup"><span data-stu-id="0e911-210">Like Linux containers, Windows Server containers are managed by using Docker Engine.</span></span> <span data-ttu-id="0e911-211">Ao contrário de contêineres do Linux, contêineres do Windows incluem dois tipos de contêiner diferente, ou executam contêineres do Windows vezes Server e o isolamento do Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="0e911-211">Unlike Linux containers, Windows containers include two different container types, or run times-Windows Server containers and Hyper-V isolation.</span></span>

<span data-ttu-id="0e911-212">**Contêineres do Windows Server**: Fornece isolamento de aplicativo por meio da tecnologia de isolamento de processo e de namespace.</span><span class="sxs-lookup"><span data-stu-id="0e911-212">**Windows Server containers**: Provides application isolation through process and namespace isolation technology.</span></span> <span data-ttu-id="0e911-213">Um contêiner do Windows Server compartilha um kernel com o host do contêiner e todos os contêineres que estão em execução no host.</span><span class="sxs-lookup"><span data-stu-id="0e911-213">A Windows Server container shares a kernel with the container host and all containers that are running on the host.</span></span> <span data-ttu-id="0e911-214">Esses contêineres não fornecem um limite de segurança hostil e não devem ser usados para isolar o código não confiável.</span><span class="sxs-lookup"><span data-stu-id="0e911-214">These containers do not provide a hostile security boundary and should not be used to isolate untrusted code.</span></span> <span data-ttu-id="0e911-215">Por causa do espaço de kernel compartilhado, esses contêineres exigem a mesma versão do kernel e a configuração.</span><span class="sxs-lookup"><span data-stu-id="0e911-215">Because of the shared kernel space, these containers require the same kernel version and configuration.</span></span>

<span data-ttu-id="0e911-216">**Isolamento do Hyper-V**: Expande o isolamento fornecido pelos contêineres do Windows Server, executando cada contêiner em uma máquina virtual altamente otimizada.</span><span class="sxs-lookup"><span data-stu-id="0e911-216">**Hyper-V isolation**: Expands on the isolation provided by Windows Server Containers by running each container on a highly optimized VM.</span></span> <span data-ttu-id="0e911-217">Nessa configuração, o kernel do host do contêiner não é compartilhado com outros contêineres no mesmo host.</span><span class="sxs-lookup"><span data-stu-id="0e911-217">In this configuration, the kernel of the container host is not shared with other containers on the same host.</span></span> <span data-ttu-id="0e911-218">Esses contêineres são projetados para hospedar vários locatários hostis, a com as mesmas garantias de segurança de uma VM.</span><span class="sxs-lookup"><span data-stu-id="0e911-218">These containers are designed for hostile multitenant hosting, with the same security assurances of a VM.</span></span> <span data-ttu-id="0e911-219">Como esses contêineres não compartilham o kernel com o host ou outros contêineres no host, eles podem executar kernels com diferentes versões e configurações (com as versões com suporte).</span><span class="sxs-lookup"><span data-stu-id="0e911-219">Because these containers don't share the kernel with the host or other containers on the host, they can run kernels with different versions and configurations (with supported versions).</span></span> <span data-ttu-id="0e911-220">Por exemplo, todos os contêineres do Windows no Windows 10 usam isolamento do Hyper-V para utilizar a versão do kernel do Windows Server e a configuração.</span><span class="sxs-lookup"><span data-stu-id="0e911-220">For example, all Windows containers on Windows 10 use Hyper-V isolation to utilize the Windows Server kernel version and configuration.</span></span>

<span data-ttu-id="0e911-221">Executar um contêiner no Windows, com ou sem o isolamento do Hyper-V é uma decisão de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="0e911-221">Running a container on Windows with or without Hyper-V isolation is a run-time decision.</span></span> <span data-ttu-id="0e911-222">Você pode optar por criar o contêiner com o isolamento do Hyper-V inicialmente e, em tempo de execução, optar por executá-lo como um contêiner do Windows Server.</span><span class="sxs-lookup"><span data-stu-id="0e911-222">You might choose to create the container with Hyper-V isolation initially, and at run time, choose to run it as a Windows Server container instead.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="0e911-223">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="0e911-223">Additional resources</span></span>

-   <span data-ttu-id="0e911-224">**Documentação de contêineres do Windows**</span><span class="sxs-lookup"><span data-stu-id="0e911-224">**Windows Containers documentation**</span></span>

    [https://docs.microsoft.com/virtualization/windowscontainers/](https://docs.microsoft.com/virtualization/windowscontainers/)

-   <span data-ttu-id="0e911-225">**Conceitos básicos de contêineres do Windows**</span><span class="sxs-lookup"><span data-stu-id="0e911-225">**Windows Containers fundamentals**</span></span>

    [https://docs.microsoft.com/virtualization/windowscontainers/about/](https://docs.microsoft.com/virtualization/windowscontainers/about/)

-   <span data-ttu-id="0e911-226">**Infográfico: A Microsoft e contêineres**</span><span class="sxs-lookup"><span data-stu-id="0e911-226">**Infographic: Microsoft and containers**</span></span>

    [https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf](https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf)


## <a name="the-container-ecosystem-in-azure"></a><span data-ttu-id="0e911-227">O ecossistema de contêiner no Azure</span><span class="sxs-lookup"><span data-stu-id="0e911-227">The container ecosystem in Azure</span></span>

<span data-ttu-id="0e911-228">Nas seções anteriores, ele tem sido explicado quais são os benefícios de contêineres do Docker, bem como detalhes sobre as imagens de contêiner específico para aplicativos .NET.</span><span class="sxs-lookup"><span data-stu-id="0e911-228">In previous sections, it’s been explained what the benefits of Docker containers are as well as details on the specific container images for .NET applications.</span></span> <span data-ttu-id="0e911-229">Obter informações genéricas tudo o que são fundamentais para desenvolver ou colocar em contêiner um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0e911-229">All that generic information is fundamental in order to develop or containerize an application.</span></span>
<span data-ttu-id="0e911-230">No entanto, ao pensar sobre o ambiente de implantação de produção ou até mesmo os ambientes de desenvolvimento/teste e controle de qualidade, o Microsoft Azure fornece uma aberta e ampla variedade de opções, um ecossistema de contêiner completa na nuvem (mostrado no diagrama abaixo).</span><span class="sxs-lookup"><span data-stu-id="0e911-230">However, when thinking about the production deployment environment or even QA and Dev/Test environments, Microsoft Azure provides an open and broad variety of choices, a full container ecosystem in the cloud (shown in the diagram below).</span></span> <span data-ttu-id="0e911-231">Dependendo das necessidades do seu aplicativo específico, você deve escolher um ou outro produto do Azure.</span><span class="sxs-lookup"><span data-stu-id="0e911-231">Depending on your specific application’s needs, you should choose one or another Azure product.</span></span>

![](./media/image7.5.png)

> <span data-ttu-id="0e911-232">**Figura 4-7.5.**</span><span class="sxs-lookup"><span data-stu-id="0e911-232">**Figure 4-7.5.**</span></span> <span data-ttu-id="0e911-233">O ecossistema de contêiner no Azure</span><span class="sxs-lookup"><span data-stu-id="0e911-233">The container ecosystem in Azure</span></span>

<span data-ttu-id="0e911-234">No ecossistema do contêiner no Azure, os seguintes produtos que dão suporte a contêineres que são considerados infraestrutura:</span><span class="sxs-lookup"><span data-stu-id="0e911-234">From the container ecosystem in Azure, the following products supporting containers that are considered infrastructure:</span></span>
-   <span data-ttu-id="0e911-235">**Instâncias de contêiner do Azure (ACI)**</span><span class="sxs-lookup"><span data-stu-id="0e911-235">**Azure Container Instances (ACI)**</span></span>
-   <span data-ttu-id="0e911-236">**Máquinas virtuais do Azure** (com suporte do contêiner)</span><span class="sxs-lookup"><span data-stu-id="0e911-236">**Azure Virtual Machines** (With container's support)</span></span>
-   <span data-ttu-id="0e911-237">**Conjuntos de dimensionamento de máquina Virtual do Azure** (com suporte do contêiner)</span><span class="sxs-lookup"><span data-stu-id="0e911-237">**Azure Virtual Machine Scale Sets** (With container's support)</span></span>

<span data-ttu-id="0e911-238">De um desses três, a ACI oferece um grande benefício é o fato de que você não precisa manter o sistema operacional subjacente, você não precisa atualizar/aplicar patch, etc., mas ainda ACI é posicionado no nível de infraestrutura, como melhor explicado nas próximas seções deste livro.</span><span class="sxs-lookup"><span data-stu-id="0e911-238">From those three, ACI provides a great benefit, which is the fact that you don't need to maintain the underlying OS, no need for you to upgrade/patch, etc. but ACI still is positioned in the infrastructure level, as better explained in the upcoming sections of this book.</span></span>

<span data-ttu-id="0e911-239">Os produtos em contêineres de suporte do Azure que estão ao mesmo tempo mais posicionado na PaaS (plataforma como serviço) níveis são:</span><span class="sxs-lookup"><span data-stu-id="0e911-239">The products in Azure supporting containers that are at the same time positioned more in the PaaS (Platform as a Service) level are:</span></span>

-   <span data-ttu-id="0e911-240">**Serviço de Aplicativo do Azure**</span><span class="sxs-lookup"><span data-stu-id="0e911-240">**Azure App Service**</span></span>
-   <span data-ttu-id="0e911-241">**Serviço Kubernetes do Azure (AKS e ACS)**</span><span class="sxs-lookup"><span data-stu-id="0e911-241">**Azure Kubernetes Service (AKS and ACS)**</span></span>
-   <span data-ttu-id="0e911-242">**Azure Service Fabric**</span><span class="sxs-lookup"><span data-stu-id="0e911-242">**Azure Service Fabric**</span></span> 
-   <span data-ttu-id="0e911-243">**Lote do Azure**</span><span class="sxs-lookup"><span data-stu-id="0e911-243">**Azure Batch**</span></span> 

<span data-ttu-id="0e911-244">Em seguida, o registro de contêiner do Azure é um registro de contêiner escalonável alta hospedado no Azure que você pode usar de todos os produtos anteriores durante o registro e implantar suas imagens de contêiner personalizado.</span><span class="sxs-lookup"><span data-stu-id="0e911-244">Then, Azure Container Registry is a high scalable container registry hosted in Azure that you can use from all the previous products when registering and deploying your custom container images.</span></span>

<span data-ttu-id="0e911-245">Além disso, de seus contêineres, você pode consumir outros serviços gerenciados no Azure como o banco de dados SQL, cache Redis do Azure, Azure Cosmos DB, etc.</span><span class="sxs-lookup"><span data-stu-id="0e911-245">In addition, from your containers, you can consume other managed services in Azure like Azure SQL Database, Azure Redis cache, Azure Cosmos DB, etc.</span></span> <span data-ttu-id="0e911-246">Além disso, há plataformas/soluções de terceiros disponíveis no Azure Marketplace, como o Cloud Foundry e OpenShift em que você também pode usar contêineres dentro do Azure.</span><span class="sxs-lookup"><span data-stu-id="0e911-246">plus there are third-party solutions/platforms available in Azure Marketplace like Cloud Foundry and OpenShift where you can also use containers within Azure.</span></span> 

<span data-ttu-id="0e911-247">Nas próximas seções, você pode explorar as recomendações da Microsoft sobre quando usar cada um desses produtos do Azure e soluções especificamente ao direcionar a contêineres do Windows.</span><span class="sxs-lookup"><span data-stu-id="0e911-247">In the next sections, you can explore Microsoft's recommendations on when to use each of those Azure products and solutions specifically when targeting Windows Containers.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="0e911-248">[Anterior](what-about-cloud-native-applications.md)
>[Próximo](when-not-to-deploy-to-windows-containers.md)</span><span class="sxs-lookup"><span data-stu-id="0e911-248">[Previous](what-about-cloud-native-applications.md)
[Next](when-not-to-deploy-to-windows-containers.md)</span></span>