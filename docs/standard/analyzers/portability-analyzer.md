---
title: O .NET Portability Analyzer – .NET
description: Saiba como usar a ferramenta .NET Portability Analyzer para avaliar a portabilidade do seu código entre as várias implementações de .NET, incluindo .NET Core, .NET Standard, UWP e Xamarin.
ms.date: 09/13/2019
ms.technology: dotnet-standard
ms.assetid: 0375250f-5704-4993-a6d5-e21c499cea1e
ms.openlocfilehash: d61dd9ebe744686885dad41ef700caaea9853f85
ms.sourcegitcommit: b1f4756120deaecb8b554477bb040620f69a4209
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/03/2020
ms.locfileid: "89414793"
---
# <a name="the-net-portability-analyzer"></a><span data-ttu-id="b4b18-103">O .NET Portability Analyzer</span><span class="sxs-lookup"><span data-stu-id="b4b18-103">The .NET Portability Analyzer</span></span>

<span data-ttu-id="b4b18-104">Deseja fazer suas bibliotecas serem compatíveis com multiplataforma?</span><span class="sxs-lookup"><span data-stu-id="b4b18-104">Want to make your libraries support multi-platform?</span></span> <span data-ttu-id="b4b18-105">Deseja ver quanto trabalho é necessário para fazer seu .NET Framework aplicativo ser executado no .NET Core?</span><span class="sxs-lookup"><span data-stu-id="b4b18-105">Want to see how much work is required to make your .NET Framework application run on .NET Core?</span></span> <span data-ttu-id="b4b18-106">O [.net Portability Analyzer](https://github.com/microsoft/dotnet-apiport) é uma ferramenta que analisa os assemblies e fornece um relatório detalhado sobre as APIs do .NET que estão faltando para que os aplicativos ou bibliotecas sejam portáteis em suas plataformas .net de destino especificadas.</span><span class="sxs-lookup"><span data-stu-id="b4b18-106">The [.NET Portability Analyzer](https://github.com/microsoft/dotnet-apiport) is a tool that analyzes assemblies and provides a detailed report on .NET APIs that are missing for the applications or libraries to be portable on your specified targeted .NET platforms.</span></span> <span data-ttu-id="b4b18-107">O analisador de portabilidade é oferecido como uma [extensão do Visual Studio](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer), que analisa um assembly por projeto e como um [aplicativo de console ApiPort](https://aka.ms/apiportdownload), que analisa os assemblies por arquivos ou diretórios especificados.</span><span class="sxs-lookup"><span data-stu-id="b4b18-107">The Portability Analyzer is offered as a [Visual Studio Extension](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer), which analyzes one assembly per project, and as a [ApiPort console app](https://aka.ms/apiportdownload), which analyzes assemblies by specified files or directory.</span></span>

<span data-ttu-id="b4b18-108">Depois de converter seu projeto para direcionar a nova plataforma, como o .NET Core, você pode usar a [ferramenta Analisador de API](api-analyzer.md) baseada em Roslyn para identificar as APIs que geram <xref:System.PlatformNotSupportedException> exceções e outros problemas de compatibilidade.</span><span class="sxs-lookup"><span data-stu-id="b4b18-108">Once you've converted your project to target the new platform, like .NET Core, you can use the Roslyn-based [API Analyzer tool](api-analyzer.md) to identify APIs throwing <xref:System.PlatformNotSupportedException> exceptions and other compatibility issues.</span></span>

## <a name="common-targets"></a><span data-ttu-id="b4b18-109">Destinos comuns</span><span class="sxs-lookup"><span data-stu-id="b4b18-109">Common targets</span></span>

- <span data-ttu-id="b4b18-110">[.NET Core](../../core/introduction.md): tem um design modular, dá suporte à instalação lado a lado e tem como alvo cenários de plataforma cruzada.</span><span class="sxs-lookup"><span data-stu-id="b4b18-110">[.NET Core](../../core/introduction.md): Has a modular design, supports side-by-side installation, and targets cross-platform scenarios.</span></span> <span data-ttu-id="b4b18-111">A instalação lado a lado permite que você adote novas versões do .NET Core sem interromper outros aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b4b18-111">Side-by-side installation allows you to adopt new .NET Core versions without breaking other apps.</span></span> <span data-ttu-id="b4b18-112">Se seu objetivo é portar seu aplicativo para o .NET Core e oferecer suporte a várias plataformas, esse é o destino recomendado.</span><span class="sxs-lookup"><span data-stu-id="b4b18-112">If your goal is to port your app to .NET Core and support multiple platforms, this is the recommended target.</span></span>
- <span data-ttu-id="b4b18-113">. [Net Standard](../net-standard.md): inclui as APIs de .net Standard disponíveis em todas as implementações do .net.</span><span class="sxs-lookup"><span data-stu-id="b4b18-113">.[NET Standard](../net-standard.md): Includes the .NET Standard APIs available on all .NET implementations.</span></span> <span data-ttu-id="b4b18-114">Se seu objetivo é fazer com que sua biblioteca seja executada em todas as plataformas com suporte do .NET, esse é o destino recomendado.</span><span class="sxs-lookup"><span data-stu-id="b4b18-114">If your goal is to make your library run on all .NET supported platforms, this is recommended target.</span></span>
- <span data-ttu-id="b4b18-115">[ASP.NET Core](/aspnet/core): uma estrutura da Web moderna criada no .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b4b18-115">[ASP.NET Core](/aspnet/core): A modern web-framework built on .NET Core.</span></span> <span data-ttu-id="b4b18-116">Se sua meta é portar seu aplicativo Web para o .NET Core para dar suporte a várias plataformas, esse é o destino recomendado.</span><span class="sxs-lookup"><span data-stu-id="b4b18-116">If your goal is to port your web app to .NET Core to support multiple platforms, this is the recommended target.</span></span>
- <span data-ttu-id="b4b18-117">[Extensões de plataforma](../../core/porting/windows-compat-pack.md).NET Core +: inclui as APIs do .NET Core, além do pacote de compatibilidade do Windows, que fornece muitas das .NET Framework tecnologias disponíveis.</span><span class="sxs-lookup"><span data-stu-id="b4b18-117">.NET Core + [Platform Extensions](../../core/porting/windows-compat-pack.md): Includes the .NET Core APIs in addition to the Windows Compatibility Pack, which provides many of the .NET Framework available technologies.</span></span> <span data-ttu-id="b4b18-118">Esse é um destino recomendado para portar seu aplicativo do .NET Framework para o .NET Core no Windows.</span><span class="sxs-lookup"><span data-stu-id="b4b18-118">This is a recommended target for porting your app from .NET Framework to .NET Core on Windows.</span></span>
- <span data-ttu-id="b4b18-119">.NET Standard + [extensões de plataforma](../../core/porting/windows-compat-pack.md): inclui as APIs de .net Standard além do pacote de compatibilidade do Windows, que fornece muitas das .NET Framework tecnologias disponíveis.</span><span class="sxs-lookup"><span data-stu-id="b4b18-119">.NET Standard + [Platform Extensions](../../core/porting/windows-compat-pack.md): Includes the .NET Standard APIs in addition to the Windows Compatibility Pack, which provides many of the .NET Framework available technologies.</span></span> <span data-ttu-id="b4b18-120">Esse é um destino recomendado para portar sua biblioteca do .NET Framework para o .NET Core no Windows.</span><span class="sxs-lookup"><span data-stu-id="b4b18-120">This is a recommended target for porting your library from .NET Framework to .NET Core on Windows.</span></span>

## <a name="how-to-use-the-net-portability-analyzer"></a><span data-ttu-id="b4b18-121">Como usar o Analisador de Portabilidade do .NET</span><span class="sxs-lookup"><span data-stu-id="b4b18-121">How to use the .NET Portability Analyzer</span></span>

<span data-ttu-id="b4b18-122">Para começar a usar o Analisador de Portabilidade do .NET no Visual Studio, primeiro é necessário baixar e instalar a extensão do [Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer).</span><span class="sxs-lookup"><span data-stu-id="b4b18-122">To begin using the .NET Portability Analyzer in Visual Studio, you first need to download and install the extension from the [Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer).</span></span> <span data-ttu-id="b4b18-123">Ele funciona no Visual Studio 2017 e versões posteriores.</span><span class="sxs-lookup"><span data-stu-id="b4b18-123">It works on Visual Studio 2017 and later versions.</span></span> <span data-ttu-id="b4b18-124">Configure-o no Visual Studio **usando**  >  **as configurações** do analisador de portabilidade e selecione suas plataformas de destino, que são as plataformas .net/versões que você deseja avaliar as lacunas de portabilidade que são comparadas com a plataforma/versão com a qual seu assembly atual foi criado.</span><span class="sxs-lookup"><span data-stu-id="b4b18-124">Configure it in Visual Studio via **Analyze** > **Portability Analyzer Settings** and select your Target Platforms, which are the .NET platforms/versions that you want to evaluate the portability gaps comparing with the platform/version that your current assembly is built with.</span></span>

![Captura de tela do analisador de portabilidade.](./media/portability-analyzer/portability-screenshot.png)

<span data-ttu-id="b4b18-126">Também é possível usar o aplicativo de console ApiPort, baixando-o do [repositório ApiPort](https://aka.ms/apiportdownload).</span><span class="sxs-lookup"><span data-stu-id="b4b18-126">You can also use the ApiPort console application, download it from [ApiPort repository](https://aka.ms/apiportdownload).</span></span> <span data-ttu-id="b4b18-127">É possível usar a opção de comando `listTargets` para exibir a lista de destino disponível e escolher as plataformas de destino especificando a opção de comando `-t` ou `--target`.</span><span class="sxs-lookup"><span data-stu-id="b4b18-127">You can use `listTargets` command option to display the available target list, then pick target platforms by specifying `-t` or `--target` command option.</span></span>

### <a name="solution-wide-view"></a><span data-ttu-id="b4b18-128">Visão ampla da solução</span><span class="sxs-lookup"><span data-stu-id="b4b18-128">Solution wide view</span></span>

<span data-ttu-id="b4b18-129">Uma etapa útil na análise de uma solução com muitos projetos seria Visualizar as dependências para entender qual subconjunto de assemblies dependem do que.</span><span class="sxs-lookup"><span data-stu-id="b4b18-129">A useful step in analyzing a solution with many projects would be to visualize the dependencies to understand which subset of assemblies depend on what.</span></span> <span data-ttu-id="b4b18-130">A recomendação geral é aplicar os resultados da análise em uma abordagem de baixo para cima, começando com os nós folha em um grafo de dependência.</span><span class="sxs-lookup"><span data-stu-id="b4b18-130">The general recommendation is to apply the results of the analysis in a bottom-up approach starting with the leaf nodes in a dependency graph.</span></span>

<span data-ttu-id="b4b18-131">Para recuperar isso, você pode executar o seguinte comando:</span><span class="sxs-lookup"><span data-stu-id="b4b18-131">To retrieve this, you may run the following command:</span></span>

```console
ApiPort.exe analyze -r DGML -f [directory or file]
```

<span data-ttu-id="b4b18-132">Um resultado disso seria semelhante ao seguinte quando aberto no Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="b4b18-132">A result of this would look like the following when opened in Visual Studio:</span></span>

![Captura de tela da análise de DGML.](./media/portability-analyzer/dgml-example.png)

### <a name="analyze-portability"></a><span data-ttu-id="b4b18-134">Analisar portabilidade</span><span class="sxs-lookup"><span data-stu-id="b4b18-134">Analyze portability</span></span>
<span data-ttu-id="b4b18-135">Para analisar todo o projeto no Visual Studio, clique com o botão direito do mouse no projeto no **Gerenciador de Soluções** e selecione **Analisar Portabilidade do Assembly**.</span><span class="sxs-lookup"><span data-stu-id="b4b18-135">To analyze your entire project in Visual Studio, right-click on your project in **Solution Explorer** and select **Analyze Assembly Portability**.</span></span> <span data-ttu-id="b4b18-136">Caso contrário, acesse o menu **Analyze** e selecione **Analisar Portabilidade do Assembly**.</span><span class="sxs-lookup"><span data-stu-id="b4b18-136">Otherwise, go to the **Analyze** menu and select **Analyze Assembly Portability**.</span></span> <span data-ttu-id="b4b18-137">A partir daí, selecione o executável ou a DLL do seu projeto.</span><span class="sxs-lookup"><span data-stu-id="b4b18-137">From there, select your project's executable or DLL.</span></span>

![Captura de tela do analisador de portabilidade do Gerenciador de Soluções.](./media/portability-analyzer/portability-solution-explorer.png)

<span data-ttu-id="b4b18-139">Também é possível usar o [aplicativo de console ApiPort](https://aka.ms/apiportdownload).</span><span class="sxs-lookup"><span data-stu-id="b4b18-139">You can also use the [ApiPort console app](https://aka.ms/apiportdownload).</span></span>

- <span data-ttu-id="b4b18-140">Digite o seguinte comando para analisar o diretório atual: `ApiPort.exe analyze -f .`</span><span class="sxs-lookup"><span data-stu-id="b4b18-140">Type the following command to analyze the current directory: `ApiPort.exe analyze -f .`</span></span>
- <span data-ttu-id="b4b18-141">Para analisar uma lista específica de arquivos. dll, digite o seguinte comando: `ApiPort.exe analyze -f first.dll -f second.dll -f third.dll`</span><span class="sxs-lookup"><span data-stu-id="b4b18-141">To analyze a specific list of .dll files, type the following command: `ApiPort.exe analyze -f first.dll -f second.dll -f third.dll`</span></span>
- <span data-ttu-id="b4b18-142">Execute `ApiPort.exe -?` para obter mais ajuda</span><span class="sxs-lookup"><span data-stu-id="b4b18-142">Run `ApiPort.exe -?` to get more help</span></span>

<span data-ttu-id="b4b18-143">É recomendável que você inclua todos os arquivos exe e dll relacionados que você tem e que deseje portar e exclua os arquivos do qual seu aplicativo depende, mas que você não tem e não pode portar.</span><span class="sxs-lookup"><span data-stu-id="b4b18-143">It is recommended that you include all the related exe and dll files that you own and want to port, and exclude the files that your app depends on, but you don't own and can't port.</span></span> <span data-ttu-id="b4b18-144">Isso fará com que o relatório de portabilidade seja o mais relevante.</span><span class="sxs-lookup"><span data-stu-id="b4b18-144">This will give you most relevant portability report.</span></span>

### <a name="view-and-interpret-portability-result"></a><span data-ttu-id="b4b18-145">Exibir e interpretar o resultado da portabilidade</span><span class="sxs-lookup"><span data-stu-id="b4b18-145">View and interpret portability result</span></span>

<span data-ttu-id="b4b18-146">Apenas as APIs que não são compatíveis com uma Plataforma de Destino são exibidas no relatório.</span><span class="sxs-lookup"><span data-stu-id="b4b18-146">Only APIs that are unsupported by a Target Platform appear in the report.</span></span>
<span data-ttu-id="b4b18-147">Após executar a análise no Visual Studio, você verá o link do arquivo do relatório de portabilidade do .NET aparecer.</span><span class="sxs-lookup"><span data-stu-id="b4b18-147">After running the analysis in Visual Studio, you'll see your .NET Portability report file link pops up.</span></span> <span data-ttu-id="b4b18-148">Se você usou o [aplicativo de console ApiPort](https://aka.ms/apiportdownload), o relatório de portabilidade do .NET é salvo como um arquivo no formato especificado.</span><span class="sxs-lookup"><span data-stu-id="b4b18-148">If you used the [ApiPort console app](https://aka.ms/apiportdownload), your .NET Portability report is saved as a file in the format you specified.</span></span> <span data-ttu-id="b4b18-149">O padrão está em um arquivo Excel (*.xlsx*) em seu diretório atual.</span><span class="sxs-lookup"><span data-stu-id="b4b18-149">The default is in an Excel file (*.xlsx*) in your current directory.</span></span>

#### <a name="portability-summary"></a><span data-ttu-id="b4b18-150">Resumo de Portabilidade</span><span class="sxs-lookup"><span data-stu-id="b4b18-150">Portability Summary</span></span>

![Captura de tela do Resumo de portabilidade.](./media/portability-analyzer/api-catalog-portablility-summary.png)

<span data-ttu-id="b4b18-152">A seção Resumo de Portabilidade do relatório mostra o percentual de portabilidade para cada assembly incluído na execução.</span><span class="sxs-lookup"><span data-stu-id="b4b18-152">The Portability Summary section of the report shows the portability percentage for each assembly included in the run.</span></span> <span data-ttu-id="b4b18-153">No exemplo anterior, 71,24% das APIs do .NET Framework usadas no aplicativo `svcutil` estão disponíveis no .NET Core + Extensões de plataforma.</span><span class="sxs-lookup"><span data-stu-id="b4b18-153">In the previous example, 71.24% of the .NET Framework APIs used in the `svcutil` app are available in .NET Core + Platform Extensions.</span></span> <span data-ttu-id="b4b18-154">Se você executar a ferramenta Analisador de Portabilidade do .NET em vários assemblies, cada um deles deverá ter uma linha no relatório Resumo de Portabilidade.</span><span class="sxs-lookup"><span data-stu-id="b4b18-154">If you run the .NET Portability Analyzer tool against multiple assemblies, each assembly should have a row in the Portability Summary report.</span></span>

#### <a name="details"></a><span data-ttu-id="b4b18-155">Detalhes</span><span class="sxs-lookup"><span data-stu-id="b4b18-155">Details</span></span>

![Captura de tela dos detalhes de portabilidade.](./media/portability-analyzer/api-catalog-portablility-details.png)

<span data-ttu-id="b4b18-157">A seção de **detalhes** do relatório lista as APIs ausentes em qualquer uma das **plataformas de destino**selecionadas.</span><span class="sxs-lookup"><span data-stu-id="b4b18-157">The **Details** section of the report lists the APIs missing from any of the selected **Targeted Platforms**.</span></span>

- <span data-ttu-id="b4b18-158">Tipo de destino: o tipo tem uma API ausente de uma Plataforma de Destino</span><span class="sxs-lookup"><span data-stu-id="b4b18-158">Target type: the type has missing API from a Target Platform</span></span>
- <span data-ttu-id="b4b18-159">Membro de destino: o método está ausente de uma Plataforma de Destino</span><span class="sxs-lookup"><span data-stu-id="b4b18-159">Target member: the method is missing from a Target Platform</span></span>
- <span data-ttu-id="b4b18-160">Nome do assembly: o assembly do .NET Framework no qual a API ausente reside.</span><span class="sxs-lookup"><span data-stu-id="b4b18-160">Assembly name: the .NET Framework assembly that the missing API lives in.</span></span>
- <span data-ttu-id="b4b18-161">Cada uma das plataformas de destino selecionadas é uma coluna, como ".NET Core": o valor "sem suporte" significa que a API não tem suporte nesta plataforma de destino.</span><span class="sxs-lookup"><span data-stu-id="b4b18-161">Each of the selected Target Platforms is one column, such as ".NET Core": "Not supported" value means the API is not supported on this Target Platform.</span></span>
- <span data-ttu-id="b4b18-162">Alterações recomendadas: a API ou a tecnologia recomendada para alterar.</span><span class="sxs-lookup"><span data-stu-id="b4b18-162">Recommended Changes: the recommended API or technology to change to.</span></span> <span data-ttu-id="b4b18-163">Atualmente, esse campo está vazio ou desatualizado para muitas APIs.</span><span class="sxs-lookup"><span data-stu-id="b4b18-163">Currently, this field is empty or out of date for many APIs.</span></span> <span data-ttu-id="b4b18-164">Devido ao grande número de APIs, temos um desafio significativo para mantê-lo atualizado.</span><span class="sxs-lookup"><span data-stu-id="b4b18-164">Due to the large number of APIs, we have a significant challenge to keep it up to date.</span></span> <span data-ttu-id="b4b18-165">Estamos examinando soluções alternativas para fornecer informações úteis aos clientes.</span><span class="sxs-lookup"><span data-stu-id="b4b18-165">We're looking at alternative solutions to provide helpful information to customers.</span></span>

#### <a name="missing-assemblies"></a><span data-ttu-id="b4b18-166">Assemblies Ausentes</span><span class="sxs-lookup"><span data-stu-id="b4b18-166">Missing Assemblies</span></span>

![Captura de tela de assemblies ausentes.](./media/portability-analyzer/api-catalog-missing-assemblies.png)

<span data-ttu-id="b4b18-168">Você pode encontrar uma seção Assemblies Ausentes em seu relatório.</span><span class="sxs-lookup"><span data-stu-id="b4b18-168">You may find a Missing Assemblies section in your report.</span></span> <span data-ttu-id="b4b18-169">Esta seção contém uma lista de assemblies que são referenciados por seus assemblies analisados e não foram analisados.</span><span class="sxs-lookup"><span data-stu-id="b4b18-169">This section contains a list of assemblies that are referenced by your analyzed assemblies and were not analyzed.</span></span> <span data-ttu-id="b4b18-170">Se for um assembly que você possui, inclua-o na execução do analisador de portabilidade de API para que você possa obter um relatório detalhado de portabilidade no nível de API para ele.</span><span class="sxs-lookup"><span data-stu-id="b4b18-170">If it's an assembly that you own, include it in the API portability analyzer run so that you can get a detailed, API-level portability report for it.</span></span> <span data-ttu-id="b4b18-171">Se for uma biblioteca de terceiros, verifique se há uma versão mais recente que dê suporte à sua plataforma de destino e considere mover para a versão mais recente.</span><span class="sxs-lookup"><span data-stu-id="b4b18-171">If it's a third-party library, check if there is a newer version that supports your target platform, and consider moving to the newer version.</span></span> <span data-ttu-id="b4b18-172">Eventualmente, a lista deve incluir todos os assemblies de terceiros dos quais seu aplicativo depende que tenham uma versão que dê suporte à sua plataforma de destino.</span><span class="sxs-lookup"><span data-stu-id="b4b18-172">Eventually, the list should include all the third-party assemblies that your app depends on that have a version supporting your target platform.</span></span>

<span data-ttu-id="b4b18-173">Para obter mais informações sobre o Analisador de Portabilidade do .NET, acesse a [documentação do GitHub](https://github.com/Microsoft/dotnet-apiport#documentation) e assista ao vídeo [A Brief Look at the .NET Portability Analyzer](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer) (Uma análise breve do Analisador de Portabilidade do .NET) do Channel 9.</span><span class="sxs-lookup"><span data-stu-id="b4b18-173">For more information on the .NET Portability Analyzer, visit the [GitHub documentation](https://github.com/Microsoft/dotnet-apiport#documentation) and [A Brief Look at the .NET Portability Analyzer](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer) Channel 9 video.</span></span>
