---
title: Conceitos principais de segurança
ms.date: 07/15/2020
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- unauthorized access
- permissions [.NET]
- security [.NET], about security
ms.assetid: 3cfced4f-ea02-4e66-ae98-d69286363e98
ms.openlocfilehash: a9f0703217b55c90c4e98503402d3fbf60a45ea7
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/18/2020
ms.locfileid: "94831059"
---
# <a name="key-security-concepts"></a><span data-ttu-id="a12d6-102">Conceitos principais de segurança</span><span class="sxs-lookup"><span data-stu-id="a12d6-102">Key Security Concepts</span></span>

> [!NOTE]
> <span data-ttu-id="a12d6-103">Este artigo aplica-se ao Windows.</span><span class="sxs-lookup"><span data-stu-id="a12d6-103">This article applies to Windows.</span></span>
>
> <span data-ttu-id="a12d6-104">Para obter informações sobre ASP.NET Core, consulte [visão geral da segurança do ASP.NET Core](/aspnet/core/security/).</span><span class="sxs-lookup"><span data-stu-id="a12d6-104">For information about ASP.NET Core, see [Overview of ASP.NET Core Security](/aspnet/core/security/).</span></span>

<span data-ttu-id="a12d6-105">O .NET oferece segurança baseada em função para ajudar a resolver questões de segurança sobre o código móvel e fornecer suporte que permite que os componentes determinem o que os usuários estão autorizados a fazer.</span><span class="sxs-lookup"><span data-stu-id="a12d6-105">.NET offers role-based security to help address security concerns about mobile code and to provide support that enables components to determine what users are authorized to do.</span></span>  
  
## <a name="type-safety-and-security"></a><span data-ttu-id="a12d6-106">Proteção de tipo e segurança</span><span class="sxs-lookup"><span data-stu-id="a12d6-106">Type safety and security</span></span>  

<span data-ttu-id="a12d6-107">O código de tipo seguro acessa apenas os locais de memória que ele está autorizado a acessar.</span><span class="sxs-lookup"><span data-stu-id="a12d6-107">Type-safe code accesses only the memory locations it is authorized to access.</span></span> <span data-ttu-id="a12d6-108">(Para essa discussão, a segurança de tipo se refere especificamente à segurança do tipo de memória e não deve ser confundida com a segurança de tipo em um aspecto mais amplo.) Por exemplo, o código de tipo seguro não pode ler valores dos campos particulares de outro objeto.</span><span class="sxs-lookup"><span data-stu-id="a12d6-108">(For this discussion, type safety specifically refers to memory type safety and should not be confused with type safety in a broader respect.) For example, type-safe code cannot read values from another object's private fields.</span></span> <span data-ttu-id="a12d6-109">Ele acessa tipos apenas de maneiras bem definidas e permitidas.</span><span class="sxs-lookup"><span data-stu-id="a12d6-109">It accesses types only in well-defined, allowable ways.</span></span>  
  
<span data-ttu-id="a12d6-110">Durante a compilação JIT (just-in-time), um processo de verificação opcional examina os metadados e a MSIL (Microsoft Intermediate Language) de um método para ser compilado por JIT no código do computador nativo para verificar se eles são de tipo seguro.</span><span class="sxs-lookup"><span data-stu-id="a12d6-110">During just-in-time (JIT) compilation, an optional verification process examines the metadata and Microsoft intermediate language (MSIL) of a method to be JIT-compiled into native machine code to verify that they are type safe.</span></span> <span data-ttu-id="a12d6-111">Esse processo será ignorado se o código tiver permissão para ignorar a verificação.</span><span class="sxs-lookup"><span data-stu-id="a12d6-111">This process is skipped if the code has permission to bypass verification.</span></span> <span data-ttu-id="a12d6-112">Para obter mais informações sobre a verificação, consulte [processo de execução gerenciada](../managed-execution-process.md).</span><span class="sxs-lookup"><span data-stu-id="a12d6-112">For more information about verification, see [Managed Execution Process](../managed-execution-process.md).</span></span>  
  
<span data-ttu-id="a12d6-113">Embora a verificação da segurança de tipo não seja obrigatória para executar código gerenciado, o tipo de segurança desempenha uma função crucial no isolamento de assembly e na imposição de segurança.</span><span class="sxs-lookup"><span data-stu-id="a12d6-113">Although verification of type safety is not mandatory to run managed code, type safety plays a crucial role in assembly isolation and security enforcement.</span></span> <span data-ttu-id="a12d6-114">Quando o código é de tipo seguro, o Common Language Runtime pode isolar completamente os assemblies uns dos outros.</span><span class="sxs-lookup"><span data-stu-id="a12d6-114">When code is type safe, the common language runtime can completely isolate assemblies from each other.</span></span> <span data-ttu-id="a12d6-115">Esse isolamento ajuda a garantir que os assemblies não possam afetar negativamente uns aos outros e aumenta a confiabilidade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a12d6-115">This isolation helps ensure that assemblies cannot adversely affect each other and it increases application reliability.</span></span> <span data-ttu-id="a12d6-116">Os componentes de tipo seguro podem ser executados com segurança no mesmo processo, mesmo se forem confiáveis em diferentes níveis.</span><span class="sxs-lookup"><span data-stu-id="a12d6-116">Type-safe components can execute safely in the same process even if they are trusted at different levels.</span></span> <span data-ttu-id="a12d6-117">Quando o código não é de tipo seguro, podem ocorrer efeitos colaterais indesejados.</span><span class="sxs-lookup"><span data-stu-id="a12d6-117">When code is not type safe, unwanted side effects can occur.</span></span> <span data-ttu-id="a12d6-118">Por exemplo, o tempo de execução não pode impedir que o código gerenciado chame em código nativo (não gerenciado) e execute operações mal-intencionadas.</span><span class="sxs-lookup"><span data-stu-id="a12d6-118">For example, the runtime cannot prevent managed code from calling into native (unmanaged) code and performing malicious operations.</span></span> <span data-ttu-id="a12d6-119">Quando o código é de tipo seguro, o mecanismo de imposição de segurança do tempo de execução garante que ele não acesse o código nativo, a menos que tenha permissão para fazer isso.</span><span class="sxs-lookup"><span data-stu-id="a12d6-119">When code is type safe, the runtime's security enforcement mechanism ensures that it does not access native code unless it has permission to do so.</span></span> <span data-ttu-id="a12d6-120">Todo o código que não é de tipo seguro deve ter sido concedido <xref:System.Security.Permissions.SecurityPermission> com o membro de enumeração passado <xref:System.Security.Permissions.SecurityPermissionAttribute.SkipVerification%2A> para ser executado.</span><span class="sxs-lookup"><span data-stu-id="a12d6-120">All code that is not type safe must have been granted <xref:System.Security.Permissions.SecurityPermission> with the passed enum member <xref:System.Security.Permissions.SecurityPermissionAttribute.SkipVerification%2A> to run.</span></span>  
  
<span data-ttu-id="a12d6-121">Para obter mais informações, consulte [Noções Básicas da Segurança de Acesso do Código](../../framework/misc/code-access-security-basics.md).</span><span class="sxs-lookup"><span data-stu-id="a12d6-121">For more information, see [Code Access Security Basics](../../framework/misc/code-access-security-basics.md).</span></span>  
  
## <a name="principal"></a><span data-ttu-id="a12d6-122">Principal</span><span class="sxs-lookup"><span data-stu-id="a12d6-122">Principal</span></span>  

<span data-ttu-id="a12d6-123">Uma entidade de segurança representa a identidade e a função de um usuário e age em nome do usuário.</span><span class="sxs-lookup"><span data-stu-id="a12d6-123">A principal represents the identity and role of a user and acts on the user's behalf.</span></span> <span data-ttu-id="a12d6-124">A segurança baseada em função no .NET dá suporte a três tipos de entidades:</span><span class="sxs-lookup"><span data-stu-id="a12d6-124">Role-based security in .NET supports three kinds of principals:</span></span>  
  
- <span data-ttu-id="a12d6-125">As entidades de segurança genéricas representam usuários e funções que existem independentemente de usuários e funções do Windows.</span><span class="sxs-lookup"><span data-stu-id="a12d6-125">Generic principals represent users and roles that exist independent of Windows users and roles.</span></span>  
  
- <span data-ttu-id="a12d6-126">As entidades de segurança do Windows representam usuários do Windows e suas funções (ou seus grupos do Windows).</span><span class="sxs-lookup"><span data-stu-id="a12d6-126">Windows principals represent Windows users and their roles (or their Windows groups).</span></span> <span data-ttu-id="a12d6-127">Uma entidade de segurança do Windows pode representar outro usuário, o que significa que a entidade de segurança pode acessar um recurso em nome de um usuário ao apresentar a identidade que pertence a esse usuário.</span><span class="sxs-lookup"><span data-stu-id="a12d6-127">A Windows principal can impersonate another user, which means that the principal can access a resource on a user's behalf while presenting the identity that belongs to that user.</span></span>  
  
- <span data-ttu-id="a12d6-128">Entidades personalizadas podem ser definidas por um aplicativo de qualquer forma que seja necessária para esse aplicativo específico.</span><span class="sxs-lookup"><span data-stu-id="a12d6-128">Custom principals can be defined by an application in any way that is needed for that particular application.</span></span> <span data-ttu-id="a12d6-129">Eles podem estender a noção básica da identidade e das funções da entidade de segurança.</span><span class="sxs-lookup"><span data-stu-id="a12d6-129">They can extend the basic notion of the principal's identity and roles.</span></span>  
  
<span data-ttu-id="a12d6-130">Para obter mais informações, consulte [objetos principal e de identidade](principal-and-identity-objects.md).</span><span class="sxs-lookup"><span data-stu-id="a12d6-130">For more information, see [Principal and Identity Objects](principal-and-identity-objects.md).</span></span>  
  
## <a name="authentication"></a><span data-ttu-id="a12d6-131">Autenticação</span><span class="sxs-lookup"><span data-stu-id="a12d6-131">Authentication</span></span>  
<span data-ttu-id="a12d6-132">A autenticação é o processo de descoberta e verificação da identidade de uma entidade de segurança examinando as credenciais do usuário e validando essas credenciais em alguma autoridade.</span><span class="sxs-lookup"><span data-stu-id="a12d6-132">Authentication is the process of discovering and verifying the identity of a principal by examining the user's credentials and validating those credentials against some authority.</span></span> <span data-ttu-id="a12d6-133">As informações obtidas durante a autenticação do são diretamente utilizáveis pelo seu código.</span><span class="sxs-lookup"><span data-stu-id="a12d6-133">The information obtained during authentication is directly usable by your code.</span></span> <span data-ttu-id="a12d6-134">Você também pode usar a segurança baseada em função do .NET para autenticar o usuário atual e para determinar se deve permitir que essa entidade acesse seu código.</span><span class="sxs-lookup"><span data-stu-id="a12d6-134">You can also use .NET role-based security to authenticate the current user and to determine whether to allow that principal to access your code.</span></span> <span data-ttu-id="a12d6-135">Consulte as sobrecargas do <xref:System.Security.Principal.WindowsPrincipal.IsInRole%2A?displayProperty=nameWithType> método para obter exemplos de como autenticar a entidade de segurança para funções específicas.</span><span class="sxs-lookup"><span data-stu-id="a12d6-135">See the overloads of the <xref:System.Security.Principal.WindowsPrincipal.IsInRole%2A?displayProperty=nameWithType> method for examples of how to authenticate the principal for specific roles.</span></span> <span data-ttu-id="a12d6-136">Por exemplo, você pode usar a <xref:System.Security.Principal.WindowsPrincipal.IsInRole%28System.String%29?displayProperty=nameWithType> sobrecarga para determinar se o usuário atual é membro do grupo Administradores.</span><span class="sxs-lookup"><span data-stu-id="a12d6-136">For example, you can use the <xref:System.Security.Principal.WindowsPrincipal.IsInRole%28System.String%29?displayProperty=nameWithType> overload to determine if the current user is a member of the Administrators group.</span></span>  
  
<span data-ttu-id="a12d6-137">Uma variedade de mecanismos de autenticação são usados hoje, muitos dos quais podem ser usados com a segurança baseada em função do .NET.</span><span class="sxs-lookup"><span data-stu-id="a12d6-137">A variety of authentication mechanisms are used today, many of which can be used with .NET role-based security.</span></span> <span data-ttu-id="a12d6-138">Alguns dos mecanismos mais comumente usados são Basic, Digest, Passport, sistema operacional (como NTLM ou Kerberos) ou mecanismos definidos pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a12d6-138">Some of the most commonly used mechanisms are basic, digest, Passport, operating system (such as NTLM or Kerberos), or application-defined mechanisms.</span></span>  
  
### <a name="example"></a><span data-ttu-id="a12d6-139">Exemplo</span><span class="sxs-lookup"><span data-stu-id="a12d6-139">Example</span></span>  

<span data-ttu-id="a12d6-140">O exemplo a seguir requer que a entidade de segurança ativa seja um administrador.</span><span class="sxs-lookup"><span data-stu-id="a12d6-140">The following example requires that the active principal be an administrator.</span></span> <span data-ttu-id="a12d6-141">O `name` parâmetro é `null` , que permite que qualquer usuário que seja um administrador passe a demanda.</span><span class="sxs-lookup"><span data-stu-id="a12d6-141">The `name` parameter is `null`, which allows any user who is an administrator to pass the demand.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a12d6-142">No Windows Vista, o UAC (controle de conta de usuário) determina os privilégios de um usuário.</span><span class="sxs-lookup"><span data-stu-id="a12d6-142">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="a12d6-143">Se for um membro do grupo Administradores Internos, você receberá dois tokens de acesso do tempo de execução: um token de acesso do usuário padrão e um token de acesso do administrador.</span><span class="sxs-lookup"><span data-stu-id="a12d6-143">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="a12d6-144">Por padrão, você está na função de usuário padrão.</span><span class="sxs-lookup"><span data-stu-id="a12d6-144">By default, you are in the standard user role.</span></span> <span data-ttu-id="a12d6-145">Para executar o código que exige que você seja um administrador, você deve primeiro elevar seus privilégios do usuário padrão para o administrador.</span><span class="sxs-lookup"><span data-stu-id="a12d6-145">To execute the code that requires you to be an administrator, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="a12d6-146">Você pode fazer isso ao iniciar um aplicativo clicando com o botão direito do mouse no ícone do aplicativo e indicando que deseja executar como administrador.</span><span class="sxs-lookup"><span data-stu-id="a12d6-146">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 [!code-cpp[Classic PrincipalPermission Example#1](../../../samples/snippets/cpp/VS_Snippets_CLR_Classic/classic PrincipalPermission Example/CPP/source.cpp#1)]
 [!code-csharp[Classic PrincipalPermission Example#1](../../../samples/snippets/csharp/VS_Snippets_CLR_Classic/classic PrincipalPermission Example/CS/source.cs#1)]
 [!code-vb[Classic PrincipalPermission Example#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_Classic/classic PrincipalPermission Example/VB/source.vb#1)]  
  
 <span data-ttu-id="a12d6-147">O exemplo a seguir demonstra como determinar a identidade da entidade de segurança e as funções disponíveis para a entidade de segurança.</span><span class="sxs-lookup"><span data-stu-id="a12d6-147">The following example demonstrates how to determine the identity of the principal and the roles available to the principal.</span></span> <span data-ttu-id="a12d6-148">Um aplicativo deste exemplo pode ser para confirmar se o usuário atual está em uma função que você permite para usar seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a12d6-148">An application of this example might be to confirm that the current user is in a role you allow for using your application.</span></span>  
  
 [!code-cpp[System.Security.Principal.WindowsBuiltInRole Example#1](../../../samples/snippets/cpp/VS_Snippets_CLR_System/system.Security.Principal.WindowsBuiltInRole Example/CPP/source.cpp#1)]
 [!code-csharp[System.Security.Principal.WindowsBuiltInRole Example#1](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.Security.Principal.WindowsBuiltInRole Example/CS/source.cs#1)]
 [!code-vb[System.Security.Principal.WindowsBuiltInRole Example#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.Security.Principal.WindowsBuiltInRole Example/VB/source.vb#1)]  
  
## <a name="authorization"></a><span data-ttu-id="a12d6-149">Autorização</span><span class="sxs-lookup"><span data-stu-id="a12d6-149">Authorization</span></span>  

<span data-ttu-id="a12d6-150">A autorização é o processo de determinar se uma entidade de segurança tem permissão para executar uma ação solicitada.</span><span class="sxs-lookup"><span data-stu-id="a12d6-150">Authorization is the process of determining whether a principal is allowed to perform a requested action.</span></span> <span data-ttu-id="a12d6-151">A autorização ocorre após a autenticação e usa informações sobre a identidade e as funções da entidade de segurança para determinar quais recursos a entidade de segurança pode acessar.</span><span class="sxs-lookup"><span data-stu-id="a12d6-151">Authorization occurs after authentication and uses information about the principal's identity and roles to determine what resources the principal can access.</span></span> <span data-ttu-id="a12d6-152">Você pode usar a segurança baseada em função do .NET para implementar a autorização.</span><span class="sxs-lookup"><span data-stu-id="a12d6-152">You can use .NET role-based security to implement authorization.</span></span>

## <a name="see-also"></a><span data-ttu-id="a12d6-153">Confira também</span><span class="sxs-lookup"><span data-stu-id="a12d6-153">See also</span></span>

- [<span data-ttu-id="a12d6-154">Segurança de ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="a12d6-154">ASP.NET Core Security</span></span>](/aspnet/core/security/)
