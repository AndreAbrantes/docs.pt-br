---
title: O pool de threads gerenciados
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- thread pooling [.NET Framework]
- thread pools [.NET Framework]
- threading [.NET Framework], thread pool
- threading [.NET Framework], pooling
ms.assetid: 2be05b06-a42e-4c9d-a739-96c21d673927
caps.latest.revision: "24"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: 38032fccce1a8f6f7cbcb3bbd3d3f9d008a74141
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/21/2017
---
# <a name="the-managed-thread-pool"></a><span data-ttu-id="ea871-102">O pool de threads gerenciados</span><span class="sxs-lookup"><span data-stu-id="ea871-102">The Managed Thread Pool</span></span>
<span data-ttu-id="ea871-103">O <xref:System.Threading.ThreadPool> fornece a classe de seu aplicativo com um pool de threads de trabalho que são gerenciados pelo sistema, permitindo que você se concentrar em tarefas de aplicativo em vez de gerenciamento de threads.</span><span class="sxs-lookup"><span data-stu-id="ea871-103">The <xref:System.Threading.ThreadPool> class provides your application with a pool of worker threads that are managed by the system, allowing you to concentrate on application tasks rather than thread management.</span></span> <span data-ttu-id="ea871-104">Se você tiver tarefas curtas que exigem processamento em segundo plano, o pool de threads gerenciados é uma maneira fácil para tirar proveito de vários threads.</span><span class="sxs-lookup"><span data-stu-id="ea871-104">If you have short tasks that require background processing, the managed thread pool is an easy way to take advantage of multiple threads.</span></span> <span data-ttu-id="ea871-105">Por exemplo, começando com o [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] você pode criar <xref:System.Threading.Tasks.Task> e <xref:System.Threading.Tasks.Task%601> objetos, que executam tarefas assíncronas em threads de pool.</span><span class="sxs-lookup"><span data-stu-id="ea871-105">For example, beginning with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] you can create <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> objects, which perform asynchronous tasks on thread pool threads.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ea871-106">Começando com o [!INCLUDE[net_v20SP1_long](../../../includes/net-v20sp1-long-md.md)], a taxa de transferência do pool de threads é significativamente aprimorada em três áreas principais que foram identificadas como afunilamentos em versões anteriores do [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]: tarefas de enfileiramento de mensagens, despacho de threads de pool e despacho de e/s threads de conclusão.</span><span class="sxs-lookup"><span data-stu-id="ea871-106">Starting with the [!INCLUDE[net_v20SP1_long](../../../includes/net-v20sp1-long-md.md)], the throughput of the thread pool is significantly improved in three key areas that were identified as bottlenecks in previous releases of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]: queuing tasks, dispatching thread pool threads, and dispatching I/O completion threads.</span></span> <span data-ttu-id="ea871-107">Para usar essa funcionalidade, seu aplicativo deve ter como destino o [!INCLUDE[net_v35_long](../../../includes/net-v35-long-md.md)] ou posterior.</span><span class="sxs-lookup"><span data-stu-id="ea871-107">To use this functionality, your application should target the [!INCLUDE[net_v35_long](../../../includes/net-v35-long-md.md)] or later.</span></span>  
  
 <span data-ttu-id="ea871-108">Para tarefas em segundo plano que interagem com a interface do usuário, o .NET Framework versão 2.0 fornece também a <xref:System.ComponentModel.BackgroundWorker> classe, que se comunicam por meio de eventos gerados no thread de interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="ea871-108">For background tasks that interact with the user interface, the .NET Framework version 2.0 also provides the <xref:System.ComponentModel.BackgroundWorker> class, which communicates using events raised on the user interface thread.</span></span>  
  
 <span data-ttu-id="ea871-109">O .NET Framework usa threads do pool para muitos propósitos, incluindo a conclusão de e/s assíncrona, retornos de chamada do timer, registrados aguarde as operações, chamadas de método assíncrono usando delegados, e <xref:System.Net> conexões de soquete.</span><span class="sxs-lookup"><span data-stu-id="ea871-109">The .NET Framework uses thread pool threads for many purposes, including asynchronous I/O completion, timer callbacks, registered wait operations, asynchronous method calls using delegates, and <xref:System.Net> socket connections.</span></span>  
  
## <a name="when-not-to-use-thread-pool-threads"></a><span data-ttu-id="ea871-110">Quando não usar o Thread do Pool de Threads</span><span class="sxs-lookup"><span data-stu-id="ea871-110">When Not to Use Thread Pool Threads</span></span>  
 <span data-ttu-id="ea871-111">Há várias situações em que é apropriado criar e gerenciar seus próprios threads em vez de usar os threads do pool:</span><span class="sxs-lookup"><span data-stu-id="ea871-111">There are several scenarios in which it is appropriate to create and manage your own threads instead of using thread pool threads:</span></span>  
  
-   <span data-ttu-id="ea871-112">Você precisa de um thread em primeiro plano.</span><span class="sxs-lookup"><span data-stu-id="ea871-112">You require a foreground thread.</span></span>  
  
-   <span data-ttu-id="ea871-113">Você precisa de um thread para ter uma prioridade específica.</span><span class="sxs-lookup"><span data-stu-id="ea871-113">You require a thread to have a particular priority.</span></span>  
  
-   <span data-ttu-id="ea871-114">Você tem que fazer com que o thread bloquear por longos períodos de tempo de tarefas.</span><span class="sxs-lookup"><span data-stu-id="ea871-114">You have tasks that cause the thread to block for long periods of time.</span></span> <span data-ttu-id="ea871-115">O pool de threads tem um número máximo de threads, para que um grande número de threads de pool de threads bloqueados pode impedir tarefas de inicialização.</span><span class="sxs-lookup"><span data-stu-id="ea871-115">The thread pool has a maximum number of threads, so a large number of blocked thread pool threads might prevent tasks from starting.</span></span>  
  
-   <span data-ttu-id="ea871-116">Você precisa colocar os threads em um single-threaded apartment.</span><span class="sxs-lookup"><span data-stu-id="ea871-116">You need to place threads into a single-threaded apartment.</span></span> <span data-ttu-id="ea871-117">Todos os <xref:System.Threading.ThreadPool> threads estão no multi-threaded apartment.</span><span class="sxs-lookup"><span data-stu-id="ea871-117">All <xref:System.Threading.ThreadPool> threads are in the multithreaded apartment.</span></span>  
  
-   <span data-ttu-id="ea871-118">Você precisa ter uma identidade estável associada ao segmento ou dedicar um thread a uma tarefa.</span><span class="sxs-lookup"><span data-stu-id="ea871-118">You need to have a stable identity associated with the thread, or to dedicate a thread to a task.</span></span>  
  
## <a name="thread-pool-characteristics"></a><span data-ttu-id="ea871-119">Características do Pool de thread</span><span class="sxs-lookup"><span data-stu-id="ea871-119">Thread Pool Characteristics</span></span>  
 <span data-ttu-id="ea871-120">Threads de pool são threads em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="ea871-120">Thread pool threads are background threads.</span></span> <span data-ttu-id="ea871-121">Consulte [Threads primeiro plano e plano de fundo](../../../docs/standard/threading/foreground-and-background-threads.md).</span><span class="sxs-lookup"><span data-stu-id="ea871-121">See [Foreground and Background Threads](../../../docs/standard/threading/foreground-and-background-threads.md).</span></span> <span data-ttu-id="ea871-122">Cada thread usa o tamanho da pilha padrão, é executado com a prioridade padrão e está no multi-threaded apartment.</span><span class="sxs-lookup"><span data-stu-id="ea871-122">Each thread uses the default stack size, runs at the default priority, and is in the multithreaded apartment.</span></span>  
  
 <span data-ttu-id="ea871-123">Há apenas um pool de threads por processo.</span><span class="sxs-lookup"><span data-stu-id="ea871-123">There is only one thread pool per process.</span></span>  
  
### <a name="exceptions-in-thread-pool-threads"></a><span data-ttu-id="ea871-124">Exceções em Threads de Pool</span><span class="sxs-lookup"><span data-stu-id="ea871-124">Exceptions in Thread Pool Threads</span></span>  
 <span data-ttu-id="ea871-125">Exceções sem tratamento em threads de pool encerrar o processo.</span><span class="sxs-lookup"><span data-stu-id="ea871-125">Unhandled exceptions on thread pool threads terminate the process.</span></span> <span data-ttu-id="ea871-126">Há três exceções a essa regra:</span><span class="sxs-lookup"><span data-stu-id="ea871-126">There are three exceptions to this rule:</span></span>  
  
-   <span data-ttu-id="ea871-127">Um <xref:System.Threading.ThreadAbortException> é gerada em um pool de threads, porque <xref:System.Threading.Thread.Abort%2A> foi chamado.</span><span class="sxs-lookup"><span data-stu-id="ea871-127">A <xref:System.Threading.ThreadAbortException> is thrown in a thread pool thread, because <xref:System.Threading.Thread.Abort%2A> was called.</span></span>  
  
-   <span data-ttu-id="ea871-128">Um <xref:System.AppDomainUnloadedException> é gerada em um pool de threads, porque o domínio de aplicativo está sendo descarregado.</span><span class="sxs-lookup"><span data-stu-id="ea871-128">An <xref:System.AppDomainUnloadedException> is thrown in a thread pool thread, because the application domain is being unloaded.</span></span>  
  
-   <span data-ttu-id="ea871-129">O common language runtime ou um processo de host encerra o thread.</span><span class="sxs-lookup"><span data-stu-id="ea871-129">The common language runtime or a host process terminates the thread.</span></span>  
  
 <span data-ttu-id="ea871-130">Para obter mais informações, consulte [exceções em Threads gerenciados](../../../docs/standard/threading/exceptions-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="ea871-130">For more information, see [Exceptions in Managed Threads](../../../docs/standard/threading/exceptions-in-managed-threads.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ea871-131">Nas versões do .NET Framework 1.0 e 1.1, o common language runtime silenciosamente intercepta exceções sem tratamento em threads de pool.</span><span class="sxs-lookup"><span data-stu-id="ea871-131">In the .NET Framework versions 1.0 and 1.1, the common language runtime silently traps unhandled exceptions in thread pool threads.</span></span> <span data-ttu-id="ea871-132">Isso pode corromper o estado do aplicativo e, eventualmente, fazer com que aplicativos de suspensão, que podem ser muito difícil de depurar.</span><span class="sxs-lookup"><span data-stu-id="ea871-132">This might corrupt application state and eventually cause applications to hang, which might be very difficult to debug.</span></span>  
  
### <a name="maximum-number-of-thread-pool-threads"></a><span data-ttu-id="ea871-133">Número máximo de Threads de Pool</span><span class="sxs-lookup"><span data-stu-id="ea871-133">Maximum Number of Thread Pool Threads</span></span>  
 <span data-ttu-id="ea871-134">O número de operações que podem ser enfileiradas para o pool de threads é limitado apenas pela memória disponível; No entanto, o pool de threads limita o número de threads que podem estar ativas no processo de simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="ea871-134">The number of operations that can be queued to the thread pool is limited only by available memory; however, the thread pool limits the number of threads that can be active in the process simultaneously.</span></span> <span data-ttu-id="ea871-135">Começando com o [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], o tamanho padrão do pool de threads para um processo depende de vários fatores, como o tamanho do espaço de endereço virtual.</span><span class="sxs-lookup"><span data-stu-id="ea871-135">Beginning with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], the default size of the thread pool for a process depends on several factors, such as the size of the virtual address space.</span></span> <span data-ttu-id="ea871-136">Um processo pode chamar o <xref:System.Threading.ThreadPool.GetMaxThreads%2A> método para determinar o número de threads.</span><span class="sxs-lookup"><span data-stu-id="ea871-136">A process can call the <xref:System.Threading.ThreadPool.GetMaxThreads%2A> method to determine the number of threads.</span></span>  
  
 <span data-ttu-id="ea871-137">Você pode controlar o número máximo de threads, usando o <xref:System.Threading.ThreadPool.GetMaxThreads%2A> e <xref:System.Threading.ThreadPool.SetMaxThreads%2A> métodos.</span><span class="sxs-lookup"><span data-stu-id="ea871-137">You can control the maximum number of threads by using the <xref:System.Threading.ThreadPool.GetMaxThreads%2A> and <xref:System.Threading.ThreadPool.SetMaxThreads%2A> methods.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ea871-138">Nas versões do .NET Framework 1.0 e 1.1, o tamanho do pool de threads não pode ser definido no código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="ea871-138">In the .NET Framework versions 1.0 and 1.1, the size of the thread pool cannot be set from managed code.</span></span> <span data-ttu-id="ea871-139">Código que hospeda o common language runtime pode definir o tamanho usando `CorSetMaxThreads`, definido em mscoree.h.</span><span class="sxs-lookup"><span data-stu-id="ea871-139">Code that hosts the common language runtime can set the size using `CorSetMaxThreads`, defined in mscoree.h.</span></span>  
  
### <a name="thread-pool-minimums"></a><span data-ttu-id="ea871-140">Mínimo de Pool de thread</span><span class="sxs-lookup"><span data-stu-id="ea871-140">Thread Pool Minimums</span></span>  
 <span data-ttu-id="ea871-141">O pool de threads fornece novos threads de trabalho ou threads de conclusão de e/s sob demanda até atingir um mínimo especificado para cada categoria.</span><span class="sxs-lookup"><span data-stu-id="ea871-141">The thread pool provides new worker threads or I/O completion threads on demand until it reaches a specified minimum for each category.</span></span> <span data-ttu-id="ea871-142">Você pode usar o <xref:System.Threading.ThreadPool.GetMinThreads%2A> método para obter esses valores mínimos.</span><span class="sxs-lookup"><span data-stu-id="ea871-142">You can use the <xref:System.Threading.ThreadPool.GetMinThreads%2A> method to obtain these minimum values.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ea871-143">Quando a demanda for baixa, o número real de threads de pool pode ficar abaixo os valores mínimos.</span><span class="sxs-lookup"><span data-stu-id="ea871-143">When demand is low, the actual number of thread pool threads can fall below the minimum values.</span></span>  
  
 <span data-ttu-id="ea871-144">Quando um mínimo for atingido, o pool de threads pode criar threads adicionais ou aguarde até que algumas tarefas são concluídas.</span><span class="sxs-lookup"><span data-stu-id="ea871-144">When a minimum is reached, the thread pool can create additional threads or wait until some tasks complete.</span></span> <span data-ttu-id="ea871-145">Começando com o [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], o pool de threads cria e destrói threads de trabalho para otimizar a taxa de transferência, que é definida como o número de tarefas que são concluídas por unidade de tempo.</span><span class="sxs-lookup"><span data-stu-id="ea871-145">Beginning with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], the thread pool creates and destroys worker threads in order to optimize throughput, which is defined as the number of tasks that complete per unit of time.</span></span> <span data-ttu-id="ea871-146">Há muito poucos threads não podem fazer uso ideal dos recursos disponíveis, enquanto muitos threads podem aumentar a contenção de recursos.</span><span class="sxs-lookup"><span data-stu-id="ea871-146">Too few threads might not make optimal use of available resources, whereas too many threads could increase resource contention.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="ea871-147">Você pode usar o <xref:System.Threading.ThreadPool.SetMinThreads%2A> método para aumentar o número mínimo de threads ociosos.</span><span class="sxs-lookup"><span data-stu-id="ea871-147">You can use the <xref:System.Threading.ThreadPool.SetMinThreads%2A> method to increase the minimum number of idle threads.</span></span> <span data-ttu-id="ea871-148">No entanto, esses valores de aumento desnecessariamente podem causar problemas de desempenho.</span><span class="sxs-lookup"><span data-stu-id="ea871-148">However, unnecessarily increasing these values can cause performance problems.</span></span> <span data-ttu-id="ea871-149">Se iniciam muitas tarefas ao mesmo tempo, todos eles podem parecer ser lenta.</span><span class="sxs-lookup"><span data-stu-id="ea871-149">If too many tasks start at the same time, all of them might appear to be slow.</span></span> <span data-ttu-id="ea871-150">Na maioria dos casos o pool de threads terão um desempenho melhor com seu próprio algoritmo para alocar threads.</span><span class="sxs-lookup"><span data-stu-id="ea871-150">In most cases the thread pool will perform better with its own algorithm for allocating threads.</span></span>  
  
## <a name="skipping-security-checks"></a><span data-ttu-id="ea871-151">Ignorar verificações de segurança</span><span class="sxs-lookup"><span data-stu-id="ea871-151">Skipping Security Checks</span></span>  
 <span data-ttu-id="ea871-152">O pool de threads também fornece o <xref:System.Threading.ThreadPool.UnsafeQueueUserWorkItem%2A?displayProperty=nameWithType> e <xref:System.Threading.ThreadPool.UnsafeRegisterWaitForSingleObject%2A?displayProperty=nameWithType> métodos.</span><span class="sxs-lookup"><span data-stu-id="ea871-152">The thread pool also provides the <xref:System.Threading.ThreadPool.UnsafeQueueUserWorkItem%2A?displayProperty=nameWithType> and <xref:System.Threading.ThreadPool.UnsafeRegisterWaitForSingleObject%2A?displayProperty=nameWithType> methods.</span></span> <span data-ttu-id="ea871-153">Use estes métodos somente quando você tiver certeza de que a pilha do chamador é irrelevante para qualquer verificação de segurança executada durante a execução da tarefa em fila.</span><span class="sxs-lookup"><span data-stu-id="ea871-153">Use these methods only when you are certain that the caller's stack is irrelevant to any security checks performed during the execution of the queued task.</span></span> <span data-ttu-id="ea871-154"><xref:System.Threading.ThreadPool.QueueUserWorkItem%2A>e <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> ambos capturar a pilha do chamador, que é mesclada na pilha do thread do pool quando o thread começa a executar uma tarefa.</span><span class="sxs-lookup"><span data-stu-id="ea871-154"><xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> and <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> both capture the caller's stack, which is merged into the stack of the thread pool thread when the thread begins to execute a task.</span></span> <span data-ttu-id="ea871-155">Se é necessária uma verificação de segurança, toda a pilha deve ser verificada.</span><span class="sxs-lookup"><span data-stu-id="ea871-155">If a security check is required, the entire stack must be checked.</span></span> <span data-ttu-id="ea871-156">Embora a verificação fornece segurança, ele também tem um custo de desempenho.</span><span class="sxs-lookup"><span data-stu-id="ea871-156">Although the check provides safety, it also has a performance cost.</span></span>  
  
## <a name="using-the-thread-pool"></a><span data-ttu-id="ea871-157">Usando o Pool de threads</span><span class="sxs-lookup"><span data-stu-id="ea871-157">Using the Thread Pool</span></span>  
 <span data-ttu-id="ea871-158">Começando com o [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], a maneira mais fácil de usar o pool de threads é usar o [tarefa TPL (biblioteca paralela)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="ea871-158">Beginning with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], the easiest way to use the thread pool is to use the [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md).</span></span> <span data-ttu-id="ea871-159">Por padrão, os tipos de biblioteca paralela como <xref:System.Threading.Tasks.Task> e <xref:System.Threading.Tasks.Task%601> use threads do pool para executar tarefas.</span><span class="sxs-lookup"><span data-stu-id="ea871-159">By default, parallel library types like <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> use thread pool threads to run tasks.</span></span> <span data-ttu-id="ea871-160">Você também pode usar o pool de threads chamando <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> de código gerenciado (ou `CorQueueUserWorkItem` código não gerenciado) e passando um <xref:System.Threading.WaitCallback> delegado que representa o método que executa a tarefa.</span><span class="sxs-lookup"><span data-stu-id="ea871-160">You can also use the thread pool by calling <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> from managed code (or `CorQueueUserWorkItem` from unmanaged code) and passing a <xref:System.Threading.WaitCallback> delegate representing the method that performs the task.</span></span> <span data-ttu-id="ea871-161">É outra maneira de usar o pool de threads para a fila de itens de trabalho que estão relacionados a uma operação de espera usando o <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> método e passando um <xref:System.Threading.WaitHandle> que, quando sinalizado ou quando o tempo limite, chama o método representado pelo <xref:System.Threading.WaitOrTimerCallback> delegar.</span><span class="sxs-lookup"><span data-stu-id="ea871-161">Another way to use the thread pool is to queue work items that are related to a wait operation by using the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> method and passing a <xref:System.Threading.WaitHandle> that, when signaled or when timed out, calls the method represented by the <xref:System.Threading.WaitOrTimerCallback> delegate.</span></span> <span data-ttu-id="ea871-162">Threads de pool é usado para invocar métodos de retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="ea871-162">Thread pool threads are used to invoke callback methods.</span></span>  
  
## <a name="threadpool-examples"></a><span data-ttu-id="ea871-163">Exemplos de ThreadPool</span><span class="sxs-lookup"><span data-stu-id="ea871-163">ThreadPool Examples</span></span>  
 <span data-ttu-id="ea871-164">Os exemplos de código nesta seção demonstram o pool de threads, usando o <xref:System.Threading.Tasks.Task> classe, o <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> método e o <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="ea871-164">The code examples in this section demonstrate the thread pool by using the <xref:System.Threading.Tasks.Task> class, the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> method, and the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> method.</span></span>  
  
-   [<span data-ttu-id="ea871-165">Executando tarefas assíncronas com a biblioteca paralela de tarefas</span><span class="sxs-lookup"><span data-stu-id="ea871-165">Executing Asynchronous Tasks with the Task Parallel Library</span></span>](#TaskParallelLibrary)  
  
-   [<span data-ttu-id="ea871-166">Executando o código de maneira assíncrona com QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="ea871-166">Executing Code Asynchronously with QueueUserWorkItem</span></span>](#ExecuteCodeWithQUWI)  
  
-   [<span data-ttu-id="ea871-167">Fornece dados de tarefa para QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="ea871-167">Supplying Task Data for QueueUserWorkItem</span></span>](#TaskDataForQUWI)  
  
-   [<span data-ttu-id="ea871-168">Usando RegisterWaitForSingleObject</span><span class="sxs-lookup"><span data-stu-id="ea871-168">Using RegisterWaitForSingleObject</span></span>](#RegisterWaitForSingleObject)  
  
<a name="TaskParallelLibrary"></a>   
### <a name="executing-asynchronous-tasks-with-the-task-parallel-library"></a><span data-ttu-id="ea871-169">Executando tarefas assíncronas com a biblioteca paralela de tarefas</span><span class="sxs-lookup"><span data-stu-id="ea871-169">Executing Asynchronous Tasks with the Task Parallel Library</span></span>  
 <span data-ttu-id="ea871-170">O exemplo a seguir mostra como criar e usar um <xref:System.Threading.Tasks.Task> objeto chamando o <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="ea871-170">The following example shows how to create and use a <xref:System.Threading.Tasks.Task> object by calling the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="ea871-171">Para obter um exemplo que usa o <xref:System.Threading.Tasks.Task%601> classe para retornar um valor de uma tarefa assíncrona, consulte [como: retornar um valor de uma tarefa](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md).</span><span class="sxs-lookup"><span data-stu-id="ea871-171">For an example that uses the <xref:System.Threading.Tasks.Task%601> class to return a value from an asynchronous task, see [How to: Return a Value from a Task](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md).</span></span>  
  
 [!code-csharp[System.Threading.Tasks.Task#01](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.threading.tasks.task/cs/startnew.cs#01)]
 [!code-vb[System.Threading.Tasks.Task#01](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.threading.tasks.task/vb/startnew.vb#01)]  
  
<a name="ExecuteCodeWithQUWI"></a>   
### <a name="executing-code-asynchronously-with-queueuserworkitem"></a><span data-ttu-id="ea871-172">Executando o código de maneira assíncrona com QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="ea871-172">Executing Code Asynchronously with QueueUserWorkItem</span></span>  
 <span data-ttu-id="ea871-173">O exemplo a seguir coloca uma tarefa muito simple, representada pelo `ThreadProc` método, usando o <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> método.</span><span class="sxs-lookup"><span data-stu-id="ea871-173">The following example queues a very simple task, represented by the `ThreadProc` method, using the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> method.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#1](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source1.cpp#1)]
 [!code-csharp[Conceptual.ThreadPool#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source1.cs#1)]
 [!code-vb[Conceptual.ThreadPool#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source1.vb#1)]  
  
<a name="TaskDataForQUWI"></a>   
### <a name="supplying-task-data-for-queueuserworkitem"></a><span data-ttu-id="ea871-174">Fornece dados de tarefa para QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="ea871-174">Supplying Task Data for QueueUserWorkItem</span></span>  
 <span data-ttu-id="ea871-175">O seguinte exemplo de código usa o <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> método para enfileirar uma tarefa e fornecer os dados para a tarefa.</span><span class="sxs-lookup"><span data-stu-id="ea871-175">The following code example uses the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> method to queue a task and supply the data for the task.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#2](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source2.cpp#2)]
 [!code-csharp[Conceptual.ThreadPool#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source2.cs#2)]
 [!code-vb[Conceptual.ThreadPool#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source2.vb#2)]  
  
<a name="RegisterWaitForSingleObject"></a>   
### <a name="using-registerwaitforsingleobject"></a><span data-ttu-id="ea871-176">Usando RegisterWaitForSingleObject</span><span class="sxs-lookup"><span data-stu-id="ea871-176">Using RegisterWaitForSingleObject</span></span>  
 <span data-ttu-id="ea871-177">O exemplo a seguir demonstra vários recursos de threads.</span><span class="sxs-lookup"><span data-stu-id="ea871-177">The following example demonstrates several threading features.</span></span>  
  
-   <span data-ttu-id="ea871-178">Uma tarefa para execução pelo enfileiramento de mensagens <xref:System.Threading.ThreadPool> segmentos, com o <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> método.</span><span class="sxs-lookup"><span data-stu-id="ea871-178">Queuing a task for execution by <xref:System.Threading.ThreadPool> threads, with the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> method.</span></span>  
  
-   <span data-ttu-id="ea871-179">Sinalização de uma tarefa a ser executada com <xref:System.Threading.AutoResetEvent>.</span><span class="sxs-lookup"><span data-stu-id="ea871-179">Signaling a task to execute, with <xref:System.Threading.AutoResetEvent>.</span></span> <span data-ttu-id="ea871-180">Consulte [EventWaitHandle, AutoResetEvent, CountdownEvent, ManualResetEvent](../../../docs/standard/threading/eventwaithandle-autoresetevent-countdownevent-manualresetevent.md).</span><span class="sxs-lookup"><span data-stu-id="ea871-180">See [EventWaitHandle, AutoResetEvent, CountdownEvent, ManualResetEvent](../../../docs/standard/threading/eventwaithandle-autoresetevent-countdownevent-manualresetevent.md).</span></span>  
  
-   <span data-ttu-id="ea871-181">Tratamento de tempos limite e sinais com um <xref:System.Threading.WaitOrTimerCallback> delegate.</span><span class="sxs-lookup"><span data-stu-id="ea871-181">Handling both time-outs and signals with a <xref:System.Threading.WaitOrTimerCallback> delegate.</span></span>  
  
-   <span data-ttu-id="ea871-182">Cancelando uma tarefa em fila com <xref:System.Threading.RegisteredWaitHandle>.</span><span class="sxs-lookup"><span data-stu-id="ea871-182">Canceling a queued task with <xref:System.Threading.RegisteredWaitHandle>.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#3](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source3.cpp#3)]
 [!code-csharp[Conceptual.ThreadPool#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source3.cs#3)]
 [!code-vb[Conceptual.ThreadPool#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source3.vb#3)]  
  
## <a name="see-also"></a><span data-ttu-id="ea871-183">Consulte também</span><span class="sxs-lookup"><span data-stu-id="ea871-183">See Also</span></span>  
 <xref:System.Threading.ThreadPool>  
 <xref:System.Threading.Tasks.Task>  
 <xref:System.Threading.Tasks.Task%601>  
 [<span data-ttu-id="ea871-184">TPL (Biblioteca de Paralelismo de Tarefas)</span><span class="sxs-lookup"><span data-stu-id="ea871-184">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)  
 [<span data-ttu-id="ea871-185">TPL (Biblioteca de Paralelismo de Tarefas)</span><span class="sxs-lookup"><span data-stu-id="ea871-185">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)  
 [<span data-ttu-id="ea871-186">Como retornar um valor de uma tarefa</span><span class="sxs-lookup"><span data-stu-id="ea871-186">How to: Return a Value from a Task</span></span>](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md)  
 [<span data-ttu-id="ea871-187">Objetos e recursos de threading</span><span class="sxs-lookup"><span data-stu-id="ea871-187">Threading Objects and Features</span></span>](../../../docs/standard/threading/threading-objects-and-features.md)  
 [<span data-ttu-id="ea871-188">Threads e threading</span><span class="sxs-lookup"><span data-stu-id="ea871-188">Threads and Threading</span></span>](../../../docs/standard/threading/threads-and-threading.md)  
 [<span data-ttu-id="ea871-189">E/S de arquivo assíncrona</span><span class="sxs-lookup"><span data-stu-id="ea871-189">Asynchronous File I/O</span></span>](../../../docs/standard/io/asynchronous-file-i-o.md)  
 [<span data-ttu-id="ea871-190">Temporizadores</span><span class="sxs-lookup"><span data-stu-id="ea871-190">Timers</span></span>](../../../docs/standard/threading/timers.md)
