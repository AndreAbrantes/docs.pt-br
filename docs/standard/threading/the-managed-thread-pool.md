---
title: O pool de threads gerenciados
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- thread pooling [.NET Framework]
- thread pools [.NET Framework]
- threading [.NET Framework], thread pool
- threading [.NET Framework], pooling
ms.assetid: 2be05b06-a42e-4c9d-a739-96c21d673927
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 3894229ff5561e50d42a36f576a89ee7bf01c067
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33592412"
---
# <a name="the-managed-thread-pool"></a><span data-ttu-id="476c4-102">O pool de threads gerenciados</span><span class="sxs-lookup"><span data-stu-id="476c4-102">The Managed Thread Pool</span></span>
<span data-ttu-id="476c4-103">A classe <xref:System.Threading.ThreadPool> fornece ao seu aplicativo um pool de threads de trabalho gerenciados pelo sistema, permitindo que você se concentre em tarefas de aplicativo, e não no gerenciamento de threads.</span><span class="sxs-lookup"><span data-stu-id="476c4-103">The <xref:System.Threading.ThreadPool> class provides your application with a pool of worker threads that are managed by the system, allowing you to concentrate on application tasks rather than thread management.</span></span> <span data-ttu-id="476c4-104">Se você tiver tarefas curtas que exigem processamento em segundo plano, o pool de threads gerenciados será uma maneira fácil de aproveitar os vários threads.</span><span class="sxs-lookup"><span data-stu-id="476c4-104">If you have short tasks that require background processing, the managed thread pool is an easy way to take advantage of multiple threads.</span></span> <span data-ttu-id="476c4-105">Por exemplo, a partir do [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], você pode criar objetos <xref:System.Threading.Tasks.Task> e <xref:System.Threading.Tasks.Task%601> que executam tarefas assíncronas em threads do pool de threads.</span><span class="sxs-lookup"><span data-stu-id="476c4-105">For example, beginning with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] you can create <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> objects, which perform asynchronous tasks on thread pool threads.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="476c4-106">A partir do [!INCLUDE[net_v20SP1_long](../../../includes/net-v20sp1-long-md.md)], a taxa de transferência do pool de threads melhora consideravelmente em três áreas importantes, as quais foram identificadas como afunilamentos em versões anteriores do [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]: tarefas de enfileiramento, expedição de threads do pool de threads e expedição de threads de conclusão de E/S.</span><span class="sxs-lookup"><span data-stu-id="476c4-106">Starting with the [!INCLUDE[net_v20SP1_long](../../../includes/net-v20sp1-long-md.md)], the throughput of the thread pool is significantly improved in three key areas that were identified as bottlenecks in previous releases of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]: queuing tasks, dispatching thread pool threads, and dispatching I/O completion threads.</span></span> <span data-ttu-id="476c4-107">Para usar essa funcionalidade, seu aplicativo deve ser direcionado ao [!INCLUDE[net_v35_long](../../../includes/net-v35-long-md.md)] ou posterior.</span><span class="sxs-lookup"><span data-stu-id="476c4-107">To use this functionality, your application should target the [!INCLUDE[net_v35_long](../../../includes/net-v35-long-md.md)] or later.</span></span>  
  
 <span data-ttu-id="476c4-108">Para tarefas em segundo plano que interagem com a interface do usuário, o .NET Framework versão 2.0 fornece também a classe <xref:System.ComponentModel.BackgroundWorker>, que se comunicam por meio de eventos gerados no thread da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="476c4-108">For background tasks that interact with the user interface, the .NET Framework version 2.0 also provides the <xref:System.ComponentModel.BackgroundWorker> class, which communicates using events raised on the user interface thread.</span></span>  
  
 <span data-ttu-id="476c4-109">O .NET Framework usa threads do pool de threads para muitos fins, incluindo a conclusão de E/S assíncrona, retornos de chamada do timer, operações de espera registradas, chamadas de método assíncrono usando delegados e conexões de soquete <xref:System.Net>.</span><span class="sxs-lookup"><span data-stu-id="476c4-109">The .NET Framework uses thread pool threads for many purposes, including asynchronous I/O completion, timer callbacks, registered wait operations, asynchronous method calls using delegates, and <xref:System.Net> socket connections.</span></span>  
  
## <a name="when-not-to-use-thread-pool-threads"></a><span data-ttu-id="476c4-110">Quando não usar o thread do pool de threads</span><span class="sxs-lookup"><span data-stu-id="476c4-110">When Not to Use Thread Pool Threads</span></span>  
 <span data-ttu-id="476c4-111">Há várias situações nas quais é apropriado criar e gerenciar seus próprios threads em vez de usar os threads do pool de threads:</span><span class="sxs-lookup"><span data-stu-id="476c4-111">There are several scenarios in which it is appropriate to create and manage your own threads instead of using thread pool threads:</span></span>  
  
-   <span data-ttu-id="476c4-112">Você precisa de um thread em primeiro plano.</span><span class="sxs-lookup"><span data-stu-id="476c4-112">You require a foreground thread.</span></span>  
  
-   <span data-ttu-id="476c4-113">Você precisa que um thread tenha uma prioridade específica.</span><span class="sxs-lookup"><span data-stu-id="476c4-113">You require a thread to have a particular priority.</span></span>  
  
-   <span data-ttu-id="476c4-114">Há tarefas que causam o bloqueio do thread por longos períodos.</span><span class="sxs-lookup"><span data-stu-id="476c4-114">You have tasks that cause the thread to block for long periods of time.</span></span> <span data-ttu-id="476c4-115">O pool de threads tem um número máximo de threads, portanto, a existência de muitos threads do pool de threads bloqueados pode impedir a inicialização das tarefas.</span><span class="sxs-lookup"><span data-stu-id="476c4-115">The thread pool has a maximum number of threads, so a large number of blocked thread pool threads might prevent tasks from starting.</span></span>  
  
-   <span data-ttu-id="476c4-116">Você precisa colocar os threads em um apartamento de thread único.</span><span class="sxs-lookup"><span data-stu-id="476c4-116">You need to place threads into a single-threaded apartment.</span></span> <span data-ttu-id="476c4-117">Todos os threads <xref:System.Threading.ThreadPool> estão no apartamento de vários threads.</span><span class="sxs-lookup"><span data-stu-id="476c4-117">All <xref:System.Threading.ThreadPool> threads are in the multithreaded apartment.</span></span>  
  
-   <span data-ttu-id="476c4-118">Você precisa ter uma identidade estável associada ao thread, ou dedicar um thread a uma tarefa.</span><span class="sxs-lookup"><span data-stu-id="476c4-118">You need to have a stable identity associated with the thread, or to dedicate a thread to a task.</span></span>  
  
## <a name="thread-pool-characteristics"></a><span data-ttu-id="476c4-119">Características do pool de threads</span><span class="sxs-lookup"><span data-stu-id="476c4-119">Thread Pool Characteristics</span></span>  
 <span data-ttu-id="476c4-120">Threads do pool de threads existem em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="476c4-120">Thread pool threads are background threads.</span></span> <span data-ttu-id="476c4-121">Confira [Threads em primeiro plano e em segundo plano](../../../docs/standard/threading/foreground-and-background-threads.md).</span><span class="sxs-lookup"><span data-stu-id="476c4-121">See [Foreground and Background Threads](../../../docs/standard/threading/foreground-and-background-threads.md).</span></span> <span data-ttu-id="476c4-122">Cada thread usa o tamanho da pilha padrão, é executado com prioridade padrão e está no apartamento de vários threads.</span><span class="sxs-lookup"><span data-stu-id="476c4-122">Each thread uses the default stack size, runs at the default priority, and is in the multithreaded apartment.</span></span>  
  
 <span data-ttu-id="476c4-123">Há apenas um pool de threads por processo.</span><span class="sxs-lookup"><span data-stu-id="476c4-123">There is only one thread pool per process.</span></span>  
  
### <a name="exceptions-in-thread-pool-threads"></a><span data-ttu-id="476c4-124">Exceções em threads do pool de threads</span><span class="sxs-lookup"><span data-stu-id="476c4-124">Exceptions in Thread Pool Threads</span></span>  
 <span data-ttu-id="476c4-125">Exceções sem tratamento nos threads do pool de threads encerram o processo.</span><span class="sxs-lookup"><span data-stu-id="476c4-125">Unhandled exceptions on thread pool threads terminate the process.</span></span> <span data-ttu-id="476c4-126">Há três exceções a essa regra:</span><span class="sxs-lookup"><span data-stu-id="476c4-126">There are three exceptions to this rule:</span></span>  
  
-   <span data-ttu-id="476c4-127">Um <xref:System.Threading.ThreadAbortException> é gerado em um thread do pool de threads porque <xref:System.Threading.Thread.Abort%2A> foi chamado.</span><span class="sxs-lookup"><span data-stu-id="476c4-127">A <xref:System.Threading.ThreadAbortException> is thrown in a thread pool thread, because <xref:System.Threading.Thread.Abort%2A> was called.</span></span>  
  
-   <span data-ttu-id="476c4-128">Um <xref:System.AppDomainUnloadedException> é gerado em um thread do pool de threads porque o domínio do aplicativo está sendo descarregado.</span><span class="sxs-lookup"><span data-stu-id="476c4-128">An <xref:System.AppDomainUnloadedException> is thrown in a thread pool thread, because the application domain is being unloaded.</span></span>  
  
-   <span data-ttu-id="476c4-129">O CLR ou um processo de host encerra o thread.</span><span class="sxs-lookup"><span data-stu-id="476c4-129">The common language runtime or a host process terminates the thread.</span></span>  
  
 <span data-ttu-id="476c4-130">Para saber mais, veja [Exceções em threads gerenciados](../../../docs/standard/threading/exceptions-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="476c4-130">For more information, see [Exceptions in Managed Threads](../../../docs/standard/threading/exceptions-in-managed-threads.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="476c4-131">Nas versões do .NET Framework 1.0 e 1.1, o CLR intercepta silenciosamente algumas exceções sem tratamento nos threads do pool de threads.</span><span class="sxs-lookup"><span data-stu-id="476c4-131">In the .NET Framework versions 1.0 and 1.1, the common language runtime silently traps unhandled exceptions in thread pool threads.</span></span> <span data-ttu-id="476c4-132">Isso pode corromper o estado do aplicativo e, eventualmente, fazer com que aplicativos sejam suspensos, o que pode ser muito difícil de depurar.</span><span class="sxs-lookup"><span data-stu-id="476c4-132">This might corrupt application state and eventually cause applications to hang, which might be very difficult to debug.</span></span>  
  
### <a name="maximum-number-of-thread-pool-threads"></a><span data-ttu-id="476c4-133">Número máximo de threads do pool de threads</span><span class="sxs-lookup"><span data-stu-id="476c4-133">Maximum Number of Thread Pool Threads</span></span>  
 <span data-ttu-id="476c4-134">O número de operações que podem ser enfileiradas para o pool de threads é limitado apenas pela memória disponível; no entanto, o pool de threads limita o número de threads que podem estar ativos simultaneamente no processo.</span><span class="sxs-lookup"><span data-stu-id="476c4-134">The number of operations that can be queued to the thread pool is limited only by available memory; however, the thread pool limits the number of threads that can be active in the process simultaneously.</span></span> <span data-ttu-id="476c4-135">A partir do [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], o tamanho padrão do pool de threads de um processo depende de vários fatores, como o tamanho do espaço de endereço virtual.</span><span class="sxs-lookup"><span data-stu-id="476c4-135">Beginning with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], the default size of the thread pool for a process depends on several factors, such as the size of the virtual address space.</span></span> <span data-ttu-id="476c4-136">Um processo pode chamar o método <xref:System.Threading.ThreadPool.GetMaxThreads%2A> para determinar o número de threads.</span><span class="sxs-lookup"><span data-stu-id="476c4-136">A process can call the <xref:System.Threading.ThreadPool.GetMaxThreads%2A> method to determine the number of threads.</span></span>  
  
 <span data-ttu-id="476c4-137">Você pode controlar o número máximo de threads usando os métodos <xref:System.Threading.ThreadPool.GetMaxThreads%2A> e <xref:System.Threading.ThreadPool.SetMaxThreads%2A>.</span><span class="sxs-lookup"><span data-stu-id="476c4-137">You can control the maximum number of threads by using the <xref:System.Threading.ThreadPool.GetMaxThreads%2A> and <xref:System.Threading.ThreadPool.SetMaxThreads%2A> methods.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="476c4-138">Nas versões 1.0 e 1.1 do .NET Framework, o tamanho do pool de threads não pode ser definido no código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="476c4-138">In the .NET Framework versions 1.0 and 1.1, the size of the thread pool cannot be set from managed code.</span></span> <span data-ttu-id="476c4-139">O código que hospeda o CLR pode definir o tamanho usando `CorSetMaxThreads`, definido em mscoree.h.</span><span class="sxs-lookup"><span data-stu-id="476c4-139">Code that hosts the common language runtime can set the size using `CorSetMaxThreads`, defined in mscoree.h.</span></span>  
  
### <a name="thread-pool-minimums"></a><span data-ttu-id="476c4-140">Mínimo de pool de threads</span><span class="sxs-lookup"><span data-stu-id="476c4-140">Thread Pool Minimums</span></span>  
 <span data-ttu-id="476c4-141">O pool de threads fornece novos threads de trabalho ou threads de conclusão de E/S sob demanda, até atingir um mínimo especificado para cada categoria.</span><span class="sxs-lookup"><span data-stu-id="476c4-141">The thread pool provides new worker threads or I/O completion threads on demand until it reaches a specified minimum for each category.</span></span> <span data-ttu-id="476c4-142">Você pode usar o método <xref:System.Threading.ThreadPool.GetMinThreads%2A> para obter esses valores mínimos.</span><span class="sxs-lookup"><span data-stu-id="476c4-142">You can use the <xref:System.Threading.ThreadPool.GetMinThreads%2A> method to obtain these minimum values.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="476c4-143">Quando a demanda é baixa, o número real de threads do pool de threads pode ficar abaixo dos valores mínimos.</span><span class="sxs-lookup"><span data-stu-id="476c4-143">When demand is low, the actual number of thread pool threads can fall below the minimum values.</span></span>  
  
 <span data-ttu-id="476c4-144">Quando o mínimo é atingido, o pool de threads pode criar threads adicionais ou aguardar a conclusão de algumas tarefas.</span><span class="sxs-lookup"><span data-stu-id="476c4-144">When a minimum is reached, the thread pool can create additional threads or wait until some tasks complete.</span></span> <span data-ttu-id="476c4-145">A partir do [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], o pool de threads cria e destrói threads de trabalho a fim de otimizar a taxa de transferência, que é definida como o número de tarefas concluídas por unidade de tempo.</span><span class="sxs-lookup"><span data-stu-id="476c4-145">Beginning with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], the thread pool creates and destroys worker threads in order to optimize throughput, which is defined as the number of tasks that complete per unit of time.</span></span> <span data-ttu-id="476c4-146">Pouquíssimos threads podem não fazer um uso ideal dos recursos disponíveis, enquanto muitos threads podem aumentar a contenção de recursos.</span><span class="sxs-lookup"><span data-stu-id="476c4-146">Too few threads might not make optimal use of available resources, whereas too many threads could increase resource contention.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="476c4-147">Use o método <xref:System.Threading.ThreadPool.SetMinThreads%2A> para aumentar o número mínimo de threads ociosos.</span><span class="sxs-lookup"><span data-stu-id="476c4-147">You can use the <xref:System.Threading.ThreadPool.SetMinThreads%2A> method to increase the minimum number of idle threads.</span></span> <span data-ttu-id="476c4-148">No entanto, o aumento desnecessário desses valores pode causar problemas de desempenho.</span><span class="sxs-lookup"><span data-stu-id="476c4-148">However, unnecessarily increasing these values can cause performance problems.</span></span> <span data-ttu-id="476c4-149">Se muitas tarefas começarem ao mesmo tempo, todas elas podem parecer lentas.</span><span class="sxs-lookup"><span data-stu-id="476c4-149">If too many tasks start at the same time, all of them might appear to be slow.</span></span> <span data-ttu-id="476c4-150">Na maioria dos casos, o pool de threads terá um desempenho melhor com seu próprio algoritmo de alocação de threads.</span><span class="sxs-lookup"><span data-stu-id="476c4-150">In most cases the thread pool will perform better with its own algorithm for allocating threads.</span></span>  
  
## <a name="skipping-security-checks"></a><span data-ttu-id="476c4-151">Ignorar as verificações de segurança</span><span class="sxs-lookup"><span data-stu-id="476c4-151">Skipping Security Checks</span></span>  
 <span data-ttu-id="476c4-152">O pool de threads também fornece os métodos <xref:System.Threading.ThreadPool.UnsafeQueueUserWorkItem%2A?displayProperty=nameWithType> e <xref:System.Threading.ThreadPool.UnsafeRegisterWaitForSingleObject%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="476c4-152">The thread pool also provides the <xref:System.Threading.ThreadPool.UnsafeQueueUserWorkItem%2A?displayProperty=nameWithType> and <xref:System.Threading.ThreadPool.UnsafeRegisterWaitForSingleObject%2A?displayProperty=nameWithType> methods.</span></span> <span data-ttu-id="476c4-153">Use estes métodos somente quando você tiver certeza de que a pilha do chamador é irrelevante a qualquer verificação de segurança executada durante a execução da tarefa em fila.</span><span class="sxs-lookup"><span data-stu-id="476c4-153">Use these methods only when you are certain that the caller's stack is irrelevant to any security checks performed during the execution of the queued task.</span></span> <span data-ttu-id="476c4-154"><xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> e <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> capturam a pilha do chamador, que é mesclada na pilha do thread do pool de threads quando o thread começa a executar uma tarefa.</span><span class="sxs-lookup"><span data-stu-id="476c4-154"><xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> and <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> both capture the caller's stack, which is merged into the stack of the thread pool thread when the thread begins to execute a task.</span></span> <span data-ttu-id="476c4-155">Se uma verificação de segurança for necessária, toda a pilha deverá ser verificada.</span><span class="sxs-lookup"><span data-stu-id="476c4-155">If a security check is required, the entire stack must be checked.</span></span> <span data-ttu-id="476c4-156">Embora a verificação forneça segurança, também tem um custo de desempenho.</span><span class="sxs-lookup"><span data-stu-id="476c4-156">Although the check provides safety, it also has a performance cost.</span></span>  
  
## <a name="using-the-thread-pool"></a><span data-ttu-id="476c4-157">Usar o pool de threads</span><span class="sxs-lookup"><span data-stu-id="476c4-157">Using the Thread Pool</span></span>  
 <span data-ttu-id="476c4-158">A partir do [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], a maneira mais fácil de usar o pool de threads é usando a [TPL (Biblioteca de paralelismo de tarefas)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="476c4-158">Beginning with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], the easiest way to use the thread pool is to use the [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md).</span></span> <span data-ttu-id="476c4-159">Por padrão, tipos de biblioteca de paralelismo como <xref:System.Threading.Tasks.Task> e <xref:System.Threading.Tasks.Task%601> use threads do pool de threads para executar tarefas.</span><span class="sxs-lookup"><span data-stu-id="476c4-159">By default, parallel library types like <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> use thread pool threads to run tasks.</span></span> <span data-ttu-id="476c4-160">Você também pode usar o pool de threads chamando <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> no código gerenciado (ou `CorQueueUserWorkItem` no código não gerenciado) e passando um delegado <xref:System.Threading.WaitCallback> que representa o método que executa a tarefa.</span><span class="sxs-lookup"><span data-stu-id="476c4-160">You can also use the thread pool by calling <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> from managed code (or `CorQueueUserWorkItem` from unmanaged code) and passing a <xref:System.Threading.WaitCallback> delegate representing the method that performs the task.</span></span> <span data-ttu-id="476c4-161">Outra maneira de usar o pool de threads é enfileirando itens de trabalho relacionados a uma operação de espera usando o método <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> e passando um <xref:System.Threading.WaitHandle> que, quando sinalizado ou após tempo limite, chama o método representado pelo delegado <xref:System.Threading.WaitOrTimerCallback>.</span><span class="sxs-lookup"><span data-stu-id="476c4-161">Another way to use the thread pool is to queue work items that are related to a wait operation by using the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> method and passing a <xref:System.Threading.WaitHandle> that, when signaled or when timed out, calls the method represented by the <xref:System.Threading.WaitOrTimerCallback> delegate.</span></span> <span data-ttu-id="476c4-162">Os threads do pool de thread são usados para invocar métodos de retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="476c4-162">Thread pool threads are used to invoke callback methods.</span></span>  
  
## <a name="threadpool-examples"></a><span data-ttu-id="476c4-163">Exemplos de ThreadPool</span><span class="sxs-lookup"><span data-stu-id="476c4-163">ThreadPool Examples</span></span>  
 <span data-ttu-id="476c4-164">Os exemplos de código nesta seção demonstram o pool de threads usando a classe <xref:System.Threading.Tasks.Task>, o método <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> e o método <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="476c4-164">The code examples in this section demonstrate the thread pool by using the <xref:System.Threading.Tasks.Task> class, the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> method, and the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> method.</span></span>  
  
-   [<span data-ttu-id="476c4-165">Executar tarefas assíncronas com a Biblioteca de paralelismo de tarefas</span><span class="sxs-lookup"><span data-stu-id="476c4-165">Executing Asynchronous Tasks with the Task Parallel Library</span></span>](#TaskParallelLibrary)  
  
-   [<span data-ttu-id="476c4-166">Executar o código de maneira assíncrona com QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="476c4-166">Executing Code Asynchronously with QueueUserWorkItem</span></span>](#ExecuteCodeWithQUWI)  
  
-   [<span data-ttu-id="476c4-167">Fornecer dados de tarefa para QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="476c4-167">Supplying Task Data for QueueUserWorkItem</span></span>](#TaskDataForQUWI)  
  
-   [<span data-ttu-id="476c4-168">Usar RegisterWaitForSingleObject</span><span class="sxs-lookup"><span data-stu-id="476c4-168">Using RegisterWaitForSingleObject</span></span>](#RegisterWaitForSingleObject)  
  
<a name="TaskParallelLibrary"></a>   
### <a name="executing-asynchronous-tasks-with-the-task-parallel-library"></a><span data-ttu-id="476c4-169">Executar tarefas assíncronas com a Biblioteca de paralelismo de tarefas</span><span class="sxs-lookup"><span data-stu-id="476c4-169">Executing Asynchronous Tasks with the Task Parallel Library</span></span>  
 <span data-ttu-id="476c4-170">O exemplo a seguir mostra como criar e usar um objeto <xref:System.Threading.Tasks.Task> chamando o método <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="476c4-170">The following example shows how to create and use a <xref:System.Threading.Tasks.Task> object by calling the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="476c4-171">Para obter um exemplo que usa a classe <xref:System.Threading.Tasks.Task%601> para retornar um valor de uma tarefa assíncrona, consulte [Como retornar um valor de uma tarefa](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md).</span><span class="sxs-lookup"><span data-stu-id="476c4-171">For an example that uses the <xref:System.Threading.Tasks.Task%601> class to return a value from an asynchronous task, see [How to: Return a Value from a Task](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md).</span></span>  
  
 [!code-csharp[System.Threading.Tasks.Task#01](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.threading.tasks.task/cs/startnew.cs#01)]
 [!code-vb[System.Threading.Tasks.Task#01](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.threading.tasks.task/vb/startnew.vb#01)]  
  
<a name="ExecuteCodeWithQUWI"></a>   
### <a name="executing-code-asynchronously-with-queueuserworkitem"></a><span data-ttu-id="476c4-172">Executar o código de maneira assíncrona com QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="476c4-172">Executing Code Asynchronously with QueueUserWorkItem</span></span>  
 <span data-ttu-id="476c4-173">O exemplo a seguir enfileira uma tarefa muito simples, representada pelo método `ThreadProc`, usando o método <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A>.</span><span class="sxs-lookup"><span data-stu-id="476c4-173">The following example queues a very simple task, represented by the `ThreadProc` method, using the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> method.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#1](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source1.cpp#1)]
 [!code-csharp[Conceptual.ThreadPool#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source1.cs#1)]
 [!code-vb[Conceptual.ThreadPool#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source1.vb#1)]  
  
<a name="TaskDataForQUWI"></a>   
### <a name="supplying-task-data-for-queueuserworkitem"></a><span data-ttu-id="476c4-174">Fornecer dados de tarefa para QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="476c4-174">Supplying Task Data for QueueUserWorkItem</span></span>  
 <span data-ttu-id="476c4-175">O exemplo de código a seguir usa o método <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> para enfileirar uma tarefa e fornecer os dados para a tarefa.</span><span class="sxs-lookup"><span data-stu-id="476c4-175">The following code example uses the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> method to queue a task and supply the data for the task.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#2](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source2.cpp#2)]
 [!code-csharp[Conceptual.ThreadPool#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source2.cs#2)]
 [!code-vb[Conceptual.ThreadPool#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source2.vb#2)]  
  
<a name="RegisterWaitForSingleObject"></a>   
### <a name="using-registerwaitforsingleobject"></a><span data-ttu-id="476c4-176">Usar RegisterWaitForSingleObject</span><span class="sxs-lookup"><span data-stu-id="476c4-176">Using RegisterWaitForSingleObject</span></span>  
 <span data-ttu-id="476c4-177">O exemplo a seguir demonstra vários recursos de threading.</span><span class="sxs-lookup"><span data-stu-id="476c4-177">The following example demonstrates several threading features.</span></span>  
  
-   <span data-ttu-id="476c4-178">Enfileiramento de uma tarefa para execução pelos threads <xref:System.Threading.ThreadPool>, com o método <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A>.</span><span class="sxs-lookup"><span data-stu-id="476c4-178">Queuing a task for execution by <xref:System.Threading.ThreadPool> threads, with the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> method.</span></span>  
  
-   <span data-ttu-id="476c4-179">Sinalização de uma tarefa a ser executada, com <xref:System.Threading.AutoResetEvent>.</span><span class="sxs-lookup"><span data-stu-id="476c4-179">Signaling a task to execute, with <xref:System.Threading.AutoResetEvent>.</span></span> <span data-ttu-id="476c4-180">Confira [EventWaitHandle, AutoResetEvent, CountdownEvent, ManualResetEvent](../../../docs/standard/threading/eventwaithandle-autoresetevent-countdownevent-manualresetevent.md).</span><span class="sxs-lookup"><span data-stu-id="476c4-180">See [EventWaitHandle, AutoResetEvent, CountdownEvent, ManualResetEvent](../../../docs/standard/threading/eventwaithandle-autoresetevent-countdownevent-manualresetevent.md).</span></span>  
  
-   <span data-ttu-id="476c4-181">Tratamento de tempos limite e sinalizações com um delegado <xref:System.Threading.WaitOrTimerCallback>.</span><span class="sxs-lookup"><span data-stu-id="476c4-181">Handling both time-outs and signals with a <xref:System.Threading.WaitOrTimerCallback> delegate.</span></span>  
  
-   <span data-ttu-id="476c4-182">Cancelamento de uma tarefa em fila com <xref:System.Threading.RegisteredWaitHandle>.</span><span class="sxs-lookup"><span data-stu-id="476c4-182">Canceling a queued task with <xref:System.Threading.RegisteredWaitHandle>.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#3](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source3.cpp#3)]
 [!code-csharp[Conceptual.ThreadPool#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source3.cs#3)]
 [!code-vb[Conceptual.ThreadPool#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source3.vb#3)]  
  
## <a name="see-also"></a><span data-ttu-id="476c4-183">Consulte também</span><span class="sxs-lookup"><span data-stu-id="476c4-183">See Also</span></span>  
 <xref:System.Threading.ThreadPool>  
 <xref:System.Threading.Tasks.Task>  
 <xref:System.Threading.Tasks.Task%601>  
 [<span data-ttu-id="476c4-184">TPL (Biblioteca de Paralelismo de Tarefas)</span><span class="sxs-lookup"><span data-stu-id="476c4-184">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)  
 [<span data-ttu-id="476c4-185">TPL (Biblioteca de Paralelismo de Tarefas)</span><span class="sxs-lookup"><span data-stu-id="476c4-185">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)  
 [<span data-ttu-id="476c4-186">Como retornar um valor de uma tarefa</span><span class="sxs-lookup"><span data-stu-id="476c4-186">How to: Return a Value from a Task</span></span>](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md)  
 [<span data-ttu-id="476c4-187">Objetos e recursos de threading</span><span class="sxs-lookup"><span data-stu-id="476c4-187">Threading Objects and Features</span></span>](../../../docs/standard/threading/threading-objects-and-features.md)  
 [<span data-ttu-id="476c4-188">Threads e threading</span><span class="sxs-lookup"><span data-stu-id="476c4-188">Threads and Threading</span></span>](../../../docs/standard/threading/threads-and-threading.md)  
 [<span data-ttu-id="476c4-189">E/S de arquivo assíncrona</span><span class="sxs-lookup"><span data-stu-id="476c4-189">Asynchronous File I/O</span></span>](../../../docs/standard/io/asynchronous-file-i-o.md)  
 [<span data-ttu-id="476c4-190">Temporizadores</span><span class="sxs-lookup"><span data-stu-id="476c4-190">Timers</span></span>](../../../docs/standard/threading/timers.md)
