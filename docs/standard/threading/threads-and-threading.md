---
title: Threads e threading
description: Saiba mais sobre Threading, como processos & threads, quando usar vários threads, & como usar multithread para aumentar a capacidade de resposta ou a taxa de transferência no .NET.
ms.date: 11/08/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- multiple threads
- threading [.NET]
- threading [.NET], multiple threads
ms.assetid: 5baac3aa-e603-4fa6-9f89-0f2c1084e6b1
ms.openlocfilehash: b332db80069e18d3b52cd03eef4995eaad3fda7b
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84583395"
---
# <a name="threads-and-threading"></a><span data-ttu-id="c9c5a-103">Threads e threading</span><span class="sxs-lookup"><span data-stu-id="c9c5a-103">Threads and threading</span></span>

<span data-ttu-id="c9c5a-104">O multithreading permite aumentar a capacidade de resposta do seu aplicativo e, se esse aplicativo é executado em um sistema com vários processadores ou vários núcleos, permite também aumentar sua taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-104">Multithreading allows you to increase the responsiveness of your application and, if your application runs on a multiprocessor or multi-core system, increase its throughput.</span></span>

## <a name="processes-and-threads"></a><span data-ttu-id="c9c5a-105">Processos e threads</span><span class="sxs-lookup"><span data-stu-id="c9c5a-105">Processes and threads</span></span>

<span data-ttu-id="c9c5a-106">Um *processo* é um programa em execução.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-106">A *process* is an executing program.</span></span> <span data-ttu-id="c9c5a-107">Um sistema operacional usa processos para separar os aplicativos que estão sendo executados.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-107">An operating system uses processes to separate the applications that are being executed.</span></span> <span data-ttu-id="c9c5a-108">Um *thread* é a unidade básica para a qual um sistema operacional aloca tempo do processador.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-108">A *thread* is the basic unit to which an operating system allocates processor time.</span></span> <span data-ttu-id="c9c5a-109">Cada thread tem uma [prioridade de agendamento](scheduling-threads.md) e mantém um conjunto de estruturas que o sistema usa para salvar o contexto do thread quando a execução do thread é colocada em pausa.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-109">Each thread has a [scheduling priority](scheduling-threads.md) and maintains a set of structures the system uses to save the thread context when the thread's execution is paused.</span></span> <span data-ttu-id="c9c5a-110">O contexto de thread inclui todas as informações que o thread precisa para continuar a execução sem interrupções, incluindo o conjunto de registros de CPU e pilha do thread.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-110">The thread context includes all the information the thread needs to seamlessly resume execution, including the thread's set of CPU registers and stack.</span></span> <span data-ttu-id="c9c5a-111">Vários threads podem ser executados no contexto de um processo.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-111">Multiple threads can run in the context of a process.</span></span> <span data-ttu-id="c9c5a-112">Todos os threads de um processo compartilham seu espaço de endereço virtual.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-112">All threads of a process share its virtual address space.</span></span> <span data-ttu-id="c9c5a-113">Um thread pode executar qualquer parte do código do programa, incluindo partes que estão sendo executadas no momento por outro thread.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-113">A thread can execute any part of the program code, including parts currently being executed by another thread.</span></span>

> [!NOTE]
> <span data-ttu-id="c9c5a-114">O .NET Framework fornece uma maneira de isolar aplicativos em um processo com o uso de *domínios de aplicativo*.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-114">The .NET Framework provides a way to isolate applications within a process with the use of *application domains*.</span></span> <span data-ttu-id="c9c5a-115">(Os domínios de aplicativo não estão disponíveis no .NET Core.) Para obter mais informações, consulte a seção [domínios e threads do aplicativo](../../framework/app-domains/application-domains.md#application-domains-and-threads) do artigo [domínios de aplicativo](../../framework/app-domains/application-domains.md) .</span><span class="sxs-lookup"><span data-stu-id="c9c5a-115">(Application domains are not available on .NET Core.) For more information, see the [Application domains and threads](../../framework/app-domains/application-domains.md#application-domains-and-threads) section of the [Application domains](../../framework/app-domains/application-domains.md) article.</span></span>

<span data-ttu-id="c9c5a-116">Por padrão, um programa .NET é iniciado com um único thread, geralmente chamado de thread *primário*.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-116">By default, a .NET program is started with a single thread, often called the *primary* thread.</span></span> <span data-ttu-id="c9c5a-117">No entanto, ele pode criar threads adicionais para executar código em paralelo ou simultaneamente com o thread primário.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-117">However, it can create additional threads to execute code in parallel or concurrently with the primary thread.</span></span> <span data-ttu-id="c9c5a-118">Esses threads costumam ser chamados de threads de *trabalho* .</span><span class="sxs-lookup"><span data-stu-id="c9c5a-118">These threads are often called *worker* threads.</span></span>

## <a name="when-to-use-multiple-threads"></a><span data-ttu-id="c9c5a-119">Quando usar vários threads</span><span class="sxs-lookup"><span data-stu-id="c9c5a-119">When to use multiple threads</span></span>

<span data-ttu-id="c9c5a-120">Você usa vários threads para aumentar a capacidade de resposta do seu aplicativo e para aproveitar um sistema com vários processadores ou vários núcleos para aumentar a taxa de transferência do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-120">You use multiple threads to increase the responsiveness of your application and to take advantage of a multiprocessor or multi-core system to increase the application's throughput.</span></span>

<span data-ttu-id="c9c5a-121">Considere um aplicativo da área de trabalho em que o thread primário é responsável por elementos da interface do usuário e responde às ações do usuário.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-121">Consider a desktop application, in which the primary thread is responsible for user interface elements and responds to user actions.</span></span> <span data-ttu-id="c9c5a-122">Use threads de trabalho para executar operações demoradas que, caso contrário, ocupariam o thread primário e fariam com que a interface do usuário parasse de responder.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-122">Use worker threads to perform time-consuming operations that, otherwise, would occupy the primary thread and make the user interface non-responsive.</span></span> <span data-ttu-id="c9c5a-123">Você também pode usar um thread dedicado para comunicação de rede ou dispositivo para ser mais responsivo a mensagens ou eventos de entrada.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-123">You can also use a dedicated thread for network or device communication to be more responsive to incoming messages or events.</span></span>

<span data-ttu-id="c9c5a-124">Se o programa realiza operações que podem ser executadas em paralelo, o tempo de execução total pode ser diminuído executando essas operações em threads separados e executando o programa em um sistema com vários processadores ou vários núcleos.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-124">If your program performs operations that can be done in parallel, the total execution time can be decreased by performing those operations in separate threads and running the program on a multiprocessor or multi-core system.</span></span> <span data-ttu-id="c9c5a-125">Em um sistema desse tipo, o uso de multithreading pode resultar aumentar a taxa de transferência, além de uma maior capacidade de resposta.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-125">On such a system, use of multithreading might increase throughput along with the increased responsiveness.</span></span>

## <a name="how-to-use-multithreading-in-net"></a><span data-ttu-id="c9c5a-126">Como usar multithreading em .NET</span><span class="sxs-lookup"><span data-stu-id="c9c5a-126">How to use multithreading in .NET</span></span>

<span data-ttu-id="c9c5a-127">Começando com o .NET Framework 4, a maneira recomendada para utilizar o multithreading é usar [TPL (biblioteca de paralelismo de tarefas)](../parallel-programming/task-parallel-library-tpl.md) e [PLINQ (Parallel LINQ)](../parallel-programming/introduction-to-plinq.md).</span><span class="sxs-lookup"><span data-stu-id="c9c5a-127">Starting with the .NET Framework 4, the recommended way to utilize multithreading is to use [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md) and [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md).</span></span> <span data-ttu-id="c9c5a-128">Para obter mais informações, veja [Programação paralela](../parallel-programming/index.md).</span><span class="sxs-lookup"><span data-stu-id="c9c5a-128">For more information, see [Parallel programming](../parallel-programming/index.md).</span></span>

<span data-ttu-id="c9c5a-129">Tanto TPL quanto PLINQ contam com os threads <xref:System.Threading.ThreadPool>.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-129">Both TPL and PLINQ rely on the <xref:System.Threading.ThreadPool> threads.</span></span> <span data-ttu-id="c9c5a-130">A classe <xref:System.Threading.ThreadPool?displayProperty=nameWithType> fornece um pool de threads de trabalho a um aplicativo .NET.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-130">The <xref:System.Threading.ThreadPool?displayProperty=nameWithType> class provides a .NET application with a pool of worker threads.</span></span> <span data-ttu-id="c9c5a-131">Você também pode usar threads de pool de threads.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-131">You can also use thread pool threads.</span></span> <span data-ttu-id="c9c5a-132">Para obter mais informações, veja [O pool de threads gerenciados](the-managed-thread-pool.md).</span><span class="sxs-lookup"><span data-stu-id="c9c5a-132">For more information, see [The managed thread pool](the-managed-thread-pool.md).</span></span>

<span data-ttu-id="c9c5a-133">Por fim, você pode usar a classe <xref:System.Threading.Thread?displayProperty=nameWithType>, que representa um thread gerenciado.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-133">At last, you can use the <xref:System.Threading.Thread?displayProperty=nameWithType> class that represents a managed thread.</span></span> <span data-ttu-id="c9c5a-134">Para obter mais informações, veja [Usando threads e threading](using-threads-and-threading.md).</span><span class="sxs-lookup"><span data-stu-id="c9c5a-134">For more information, see [Using threads and threading](using-threads-and-threading.md).</span></span>

<span data-ttu-id="c9c5a-135">É possível que vários threads precisem acessar um recurso compartilhado.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-135">Multiple threads might need to access a shared resource.</span></span> <span data-ttu-id="c9c5a-136">Para manter o recurso em um estado não corrompido e evitar condições de corrida, você precisa sincronizar o acesso dos threads a ele.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-136">To keep the resource in a uncorrupted state and avoid race conditions, you must synchronize the thread access to it.</span></span> <span data-ttu-id="c9c5a-137">Também pode ser conveniente coordenar a interação de vários threads.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-137">You also might want to coordinate the interaction of multiple threads.</span></span> <span data-ttu-id="c9c5a-138">O .NET fornece uma variedade de tipos que você pode usar para sincronizar o acesso a um recurso compartilhado ou coordenar a interação de thread.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-138">.NET provides a range of types that you can use to synchronize access to a shared resource or coordinate thread interaction.</span></span> <span data-ttu-id="c9c5a-139">Para obter mais informações, veja [Visão geral dos primitivos de sincronização](overview-of-synchronization-primitives.md).</span><span class="sxs-lookup"><span data-stu-id="c9c5a-139">For more information, see [Overview of synchronization primitives](overview-of-synchronization-primitives.md).</span></span>

<span data-ttu-id="c9c5a-140">Não se esqueça de tratar as exceções nos threads.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-140">Do handle exceptions in threads.</span></span> <span data-ttu-id="c9c5a-141">Exceções sem tratamento nos threads geralmente encerram o processo.</span><span class="sxs-lookup"><span data-stu-id="c9c5a-141">Unhandled exceptions in threads generally terminate the process.</span></span> <span data-ttu-id="c9c5a-142">Para obter mais informações, veja [Exceções em threads gerenciados](exceptions-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="c9c5a-142">For more information, see [Exceptions in managed threads](exceptions-in-managed-threads.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="c9c5a-143">Consulte também</span><span class="sxs-lookup"><span data-stu-id="c9c5a-143">See also</span></span>

- [<span data-ttu-id="c9c5a-144">Objetos e recursos de threading</span><span class="sxs-lookup"><span data-stu-id="c9c5a-144">Threading objects and features</span></span>](threading-objects-and-features.md)
- [<span data-ttu-id="c9c5a-145">Práticas recomendadas de threading gerenciado</span><span class="sxs-lookup"><span data-stu-id="c9c5a-145">Managed threading best practices</span></span>](managed-threading-best-practices.md)
- [<span data-ttu-id="c9c5a-146">Processamento paralelo, simultaneidade e programação assíncrona no .NET</span><span class="sxs-lookup"><span data-stu-id="c9c5a-146">Parallel Processing, Concurrency, and Async Programming in .NET</span></span>](../parallel-processing-and-concurrency.md)
- [<span data-ttu-id="c9c5a-147">Sobre Processos e Threads</span><span class="sxs-lookup"><span data-stu-id="c9c5a-147">About Processes and Threads</span></span>](/windows/desktop/procthread/about-processes-and-threads)
