---
title: "Modos de latência"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- garbage collection, intrusiveness
- garbage collection, latency modes
ms.assetid: 96278bb7-6eab-4612-8594-ceebfc887d81
caps.latest.revision: "41"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: 439fdd8fe78a0c0f0fda4ac7e759a4a780bb9b58
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/21/2017
---
# <a name="latency-modes"></a><span data-ttu-id="79bce-102">Modos de latência</span><span class="sxs-lookup"><span data-stu-id="79bce-102">Latency Modes</span></span>
<span data-ttu-id="79bce-103">Para recuperar objetos, o coletor de lixo deve interromper todos os threads em execução em um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="79bce-103">To reclaim objects, the garbage collector must stop all the executing threads in an application.</span></span> <span data-ttu-id="79bce-104">Em algumas situações, como quando um aplicativo recupera dados ou exibe conteúdo, uma coleta de lixo completa pode ocorrer em um momento crítico e impedir o desempenho.</span><span class="sxs-lookup"><span data-stu-id="79bce-104">In some situations, such as when an application retrieves data or displays content, a full garbage collection can occur at a critical time and impede performance.</span></span> <span data-ttu-id="79bce-105">Você pode ajustar o risco de invasão do coletor de lixo, definindo o <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> propriedade para um do <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> valores.</span><span class="sxs-lookup"><span data-stu-id="79bce-105">You can adjust the intrusiveness of the garbage collector by setting the <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> property to one of the <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> values.</span></span>  
  
 <span data-ttu-id="79bce-106">A latência refere-se à hora em que o coletor de lixo invade seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="79bce-106">Latency refers to the time that the garbage collector intrudes in your application.</span></span> <span data-ttu-id="79bce-107">Durante períodos de baixa latência, o coletor de lixo é mais conservador e menos intrusivo na recuperação de objetos.</span><span class="sxs-lookup"><span data-stu-id="79bce-107">During low latency periods, the garbage collector is more conservative and less intrusive in reclaiming objects.</span></span> <span data-ttu-id="79bce-108">O <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> enumeração fornece duas configurações de baixa latência:</span><span class="sxs-lookup"><span data-stu-id="79bce-108">The <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> enumeration provides two low latency settings:</span></span>  
  
-   <span data-ttu-id="79bce-109"><xref:System.Runtime.GCLatencyMode.LowLatency>Suprime a coleções de geração 2 e executa somente as coleções de geração 0 e 1.</span><span class="sxs-lookup"><span data-stu-id="79bce-109"><xref:System.Runtime.GCLatencyMode.LowLatency> suppresses generation 2 collections and performs only generation 0 and 1 collections.</span></span> <span data-ttu-id="79bce-110">Ela pode ser usada somente por curtos períodos.</span><span class="sxs-lookup"><span data-stu-id="79bce-110">It can be used only for short periods of time.</span></span> <span data-ttu-id="79bce-111">Em períodos mais longos, se o sistema estiver sob pressão de memória, o coletor de lixo disparará uma coleção, que pode pausar o aplicativo rapidamente e interromper uma operação de tempo crítico.</span><span class="sxs-lookup"><span data-stu-id="79bce-111">Over longer periods, if the system is under memory pressure, the garbage collector will trigger a collection, which can briefly pause the application and disrupt a time-critical operation.</span></span> <span data-ttu-id="79bce-112">Essa configuração está disponível somente para coleta de lixo de estação de trabalho.</span><span class="sxs-lookup"><span data-stu-id="79bce-112">This setting is available only for workstation garbage collection.</span></span>  
  
-   <span data-ttu-id="79bce-113"><xref:System.Runtime.GCLatencyMode.SustainedLowLatency>Suprime a coleções de geração 2 em primeiro plano e executa somente a primeira geração 0, 1 e coleções de 2ª geração de plano de fundo.</span><span class="sxs-lookup"><span data-stu-id="79bce-113"><xref:System.Runtime.GCLatencyMode.SustainedLowLatency> suppresses foreground generation 2 collections and performs only generation 0, 1, and background generation 2 collections.</span></span> <span data-ttu-id="79bce-114">Ela pode ser usada por longos períodos e está disponível para coleta de lixo de estação de trabalho e servidor.</span><span class="sxs-lookup"><span data-stu-id="79bce-114">It can be used for longer periods of time, and is available for both workstation and server garbage collection.</span></span> <span data-ttu-id="79bce-115">Essa configuração não poderá ser usada se a [coleta de lixo simultânea](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) estiver desabilitada.</span><span class="sxs-lookup"><span data-stu-id="79bce-115">This setting cannot be used if [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is disabled.</span></span>  
  
 <span data-ttu-id="79bce-116">Durante períodos de baixa latência, coletas da geração 2 são suprimidas, a menos que ocorra o seguinte:</span><span class="sxs-lookup"><span data-stu-id="79bce-116">During low latency periods, generation 2 collections are suppressed unless the following occurs:</span></span>  
  
-   <span data-ttu-id="79bce-117">O sistema recebe uma notificação de falta de memória do sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="79bce-117">The system receives a low memory notification from the operating system.</span></span>  
  
-   <span data-ttu-id="79bce-118">O código do aplicativo induzir a uma coleção, chamando o <xref:System.GC.Collect%2A?displayProperty=nameWithType> método e especificar 2 para o `generation` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="79bce-118">Your application code induces a collection by calling the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method and specifying 2 for the `generation` parameter.</span></span>  
  
 <span data-ttu-id="79bce-119">A tabela a seguir lista os cenários de aplicativo para usar o <xref:System.Runtime.GCLatencyMode> valores.</span><span class="sxs-lookup"><span data-stu-id="79bce-119">The following table lists the application scenarios for using the <xref:System.Runtime.GCLatencyMode> values.</span></span>  
  
|<span data-ttu-id="79bce-120">Modo de latência</span><span class="sxs-lookup"><span data-stu-id="79bce-120">Latency mode</span></span>|<span data-ttu-id="79bce-121">Cenários de aplicativo</span><span class="sxs-lookup"><span data-stu-id="79bce-121">Application scenarios</span></span>|  
|------------------|---------------------------|  
|<xref:System.Runtime.GCLatencyMode.Batch>|<span data-ttu-id="79bce-122">Para aplicativos que não têm operações de interface do usuário ou do servidor.</span><span class="sxs-lookup"><span data-stu-id="79bce-122">For applications that have no UI or server-side operations.</span></span><br /><br /> <span data-ttu-id="79bce-123">Este é o modo padrão quando a [coleta de lixo simultânea](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) está desabilitada.</span><span class="sxs-lookup"><span data-stu-id="79bce-123">This is the default mode when [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is disabled.</span></span>|  
|<xref:System.Runtime.GCLatencyMode.Interactive>|<span data-ttu-id="79bce-124">Para a maioria dos aplicativos que têm uma interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="79bce-124">For most applications that have a UI.</span></span><br /><br /> <span data-ttu-id="79bce-125">Este é o modo padrão quando a [coleta de lixo simultânea](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) está habilitada.</span><span class="sxs-lookup"><span data-stu-id="79bce-125">This is the default mode when [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is enabled.</span></span>|  
|<xref:System.Runtime.GCLatencyMode.LowLatency>|<span data-ttu-id="79bce-126">Para aplicativos que têm operações de curto prazo, sensíveis ao tempo, durante o qual as interrupções do coletor de lixo podem ser prejudiciais.</span><span class="sxs-lookup"><span data-stu-id="79bce-126">For applications that have short-term, time-sensitive operations during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="79bce-127">Por exemplo, os aplicativos com funções de aquisição de dados ou renderização de animação.</span><span class="sxs-lookup"><span data-stu-id="79bce-127">For example, applications that do animation rendering or data acquisition functions.</span></span>|  
|<xref:System.Runtime.GCLatencyMode.SustainedLowLatency>|<span data-ttu-id="79bce-128">Para aplicativos que têm operações sensíveis ao tempo, por uma duração contida, mas potencialmente maior, durante a qual as interrupções do coletor de lixo poderiam ser prejudiciais.</span><span class="sxs-lookup"><span data-stu-id="79bce-128">For applications that have time-sensitive operations for a contained but potentially longer duration of time during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="79bce-129">Por exemplo, aplicativos que precisam de tempos de resposta rápidos, como alterações de dados de mercado durante o horário comercial.</span><span class="sxs-lookup"><span data-stu-id="79bce-129">For example, applications that need quick response times as market data changes during trading hours.</span></span><br /><br /> <span data-ttu-id="79bce-130">Esse modo resulta em um tamanho maior do heap gerenciado do que outros modos.</span><span class="sxs-lookup"><span data-stu-id="79bce-130">This mode results in a larger managed heap size than other modes.</span></span> <span data-ttu-id="79bce-131">Como ele não compacta o heap gerenciado, é possível maior fragmentação.</span><span class="sxs-lookup"><span data-stu-id="79bce-131">Because it does not compact the managed heap, higher fragmentation is possible.</span></span> <span data-ttu-id="79bce-132">Verifique se há memória suficiente disponível.</span><span class="sxs-lookup"><span data-stu-id="79bce-132">Ensure that sufficient memory is available.</span></span>|  
  
## <a name="guidelines-for-using-low-latency"></a><span data-ttu-id="79bce-133">Diretrizes para uso de baixa latência</span><span class="sxs-lookup"><span data-stu-id="79bce-133">Guidelines for Using Low Latency</span></span>  
 <span data-ttu-id="79bce-134">Quando você usa <xref:System.Runtime.GCLatencyMode.LowLatency> modo, considere as seguintes diretrizes:</span><span class="sxs-lookup"><span data-stu-id="79bce-134">When you use <xref:System.Runtime.GCLatencyMode.LowLatency> mode, consider the following guidelines:</span></span>  
  
-   <span data-ttu-id="79bce-135">Mantenha o período de baixa latência o mais curto possível.</span><span class="sxs-lookup"><span data-stu-id="79bce-135">Keep the period of time in low latency as short as possible.</span></span>  
  
-   <span data-ttu-id="79bce-136">Evite a alocação de grande quantidade de memória durante períodos de baixa latência.</span><span class="sxs-lookup"><span data-stu-id="79bce-136">Avoid allocating high amounts of memory during low latency periods.</span></span> <span data-ttu-id="79bce-137">Notificações de memória insuficiente podem ocorrer porque a coleta de lixo recupera menos objetos.</span><span class="sxs-lookup"><span data-stu-id="79bce-137">Low memory notifications can occur because garbage collection reclaims fewer objects.</span></span>  
  
-   <span data-ttu-id="79bce-138">No modo de baixa latência, minimize o número de alocações feitas, principalmente alocações em heap de objetos grandes e objetos fixados.</span><span class="sxs-lookup"><span data-stu-id="79bce-138">While in the low latency mode, minimize the number of allocations you make, in particular allocations onto the Large Object Heap and pinned objects.</span></span>  
  
-   <span data-ttu-id="79bce-139">Esteja atento a ameaças que possam ser alocadas.</span><span class="sxs-lookup"><span data-stu-id="79bce-139">Be aware of threads that could be allocating.</span></span> <span data-ttu-id="79bce-140">Porque o <xref:System.Runtime.GCSettings.LatencyMode%2A> configuração da propriedade é todo o processo, você pode gerar um <xref:System.OutOfMemoryException> em qualquer thread que pode ser alocar.</span><span class="sxs-lookup"><span data-stu-id="79bce-140">Because the <xref:System.Runtime.GCSettings.LatencyMode%2A> property setting is process-wide, you could generate an <xref:System.OutOfMemoryException> on any thread that may be allocating.</span></span>  
  
-   <span data-ttu-id="79bce-141">Encapsular o código de baixa latência em regiões de execução restrita (para obter mais informações, consulte [regiões de execução restrita](../../../docs/framework/performance/constrained-execution-regions.md)).</span><span class="sxs-lookup"><span data-stu-id="79bce-141">Wrap the low latency code in constrained execution regions (for more information, see [Constrained Execution Regions](../../../docs/framework/performance/constrained-execution-regions.md)).</span></span>  
  
-   <span data-ttu-id="79bce-142">Você pode forçar a coleções de geração 2 durante um período de baixa latência ao chamar o <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="79bce-142">You can force generation 2 collections during a low latency period by calling the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> method.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="79bce-143">Consulte também</span><span class="sxs-lookup"><span data-stu-id="79bce-143">See Also</span></span>  
 <xref:System.GC?displayProperty=nameWithType>  
 [<span data-ttu-id="79bce-144">Coletas Induzidas</span><span class="sxs-lookup"><span data-stu-id="79bce-144">Induced Collections</span></span>](../../../docs/standard/garbage-collection/induced.md)  
 [<span data-ttu-id="79bce-145">Coleta de lixo</span><span class="sxs-lookup"><span data-stu-id="79bce-145">Garbage Collection</span></span>](../../../docs/standard/garbage-collection/index.md)
