---
title: "Caractere de codificação no .NET"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- encoding, understanding
- encoding, choosing
- encoding, fallback strategy
ms.assetid: bf6d9823-4c2d-48af-b280-919c5af66ae9
caps.latest.revision: "33"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: ce7c8ff2154b8503b0ef73954464f380f520c3f9
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/21/2017
---
# <a name="character-encoding-in-net"></a><span data-ttu-id="397b5-102">Caractere de codificação no .NET</span><span class="sxs-lookup"><span data-stu-id="397b5-102">Character Encoding in .NET</span></span>
<span data-ttu-id="397b5-103">Os caracteres são entidades abstratas que podem ser representadas de muitas maneiras diferentes.</span><span class="sxs-lookup"><span data-stu-id="397b5-103">Characters are abstract entities that can be represented in many different ways.</span></span> <span data-ttu-id="397b5-104">Uma codificação de caracteres é um sistema que emparelha cada caractere em um conjunto de caracteres com suporte com algum valor que representa esse caractere.</span><span class="sxs-lookup"><span data-stu-id="397b5-104">A character encoding is a system that pairs each character in a supported character set with some value that represents that character.</span></span> <span data-ttu-id="397b5-105">Por exemplo, o código Morse é uma codificação de caracteres que emparelha cada caractere do alfabeto romano com um padrão de pontos e traços adequados para transmissão por linhas telegráficas.</span><span class="sxs-lookup"><span data-stu-id="397b5-105">For example, Morse code is a character encoding that pairs each character in the Roman alphabet with a pattern of dots and dashes that are suitable for transmission over telegraph lines.</span></span> <span data-ttu-id="397b5-106">Uma codificação de caracteres para computadores emparelha cada caractere em um conjunto de caracteres com suporte com um valor numérico que representa esse caractere.</span><span class="sxs-lookup"><span data-stu-id="397b5-106">A character encoding for computers pairs each character in a supported character set with a numeric value that represents that character.</span></span> <span data-ttu-id="397b5-107">Uma codificação de caracteres tem dois componentes distintos:</span><span class="sxs-lookup"><span data-stu-id="397b5-107">A character encoding has two distinct components:</span></span>  
  
-   <span data-ttu-id="397b5-108">Um codificador, que converte uma sequência de caracteres em uma sequência de valores numéricos (bytes).</span><span class="sxs-lookup"><span data-stu-id="397b5-108">An encoder, which translates a sequence of characters into a sequence of numeric values (bytes).</span></span>  
  
-   <span data-ttu-id="397b5-109">Um decodificador, que converte uma sequência de bytes em uma sequência de caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-109">A decoder, which translates a sequence of bytes into a sequence of characters.</span></span>  
  
 <span data-ttu-id="397b5-110">A codificação de caracteres descreve as regras por meio das quais um codificador e um decodificador são operados.</span><span class="sxs-lookup"><span data-stu-id="397b5-110">Character encoding describes the rules by which an encoder and a decoder operate.</span></span> <span data-ttu-id="397b5-111">Por exemplo, a <xref:System.Text.UTF8Encoding> classe descreve as regras de codificação e decodificação de formato de transformação de 8 bits Unicode (UTF-8), que usa um a quatro bytes para representar um único caractere Unicode.</span><span class="sxs-lookup"><span data-stu-id="397b5-111">For example, the <xref:System.Text.UTF8Encoding> class describes the rules for encoding to, and decoding from, 8-bit Unicode Transformation Format (UTF-8), which uses one to four bytes to represent a single Unicode character.</span></span> <span data-ttu-id="397b5-112">Codificar e decodificar também podem incluir a validação.</span><span class="sxs-lookup"><span data-stu-id="397b5-112">Encoding and decoding can also include validation.</span></span> <span data-ttu-id="397b5-113">Por exemplo, a <xref:System.Text.UnicodeEncoding> classe verifica todos os substitutos para certificar-se de que constituem os pares substitutos válido.</span><span class="sxs-lookup"><span data-stu-id="397b5-113">For example, the <xref:System.Text.UnicodeEncoding> class checks all surrogates  to make sure they constitute valid surrogate pairs.</span></span> <span data-ttu-id="397b5-114">(Um par alternativo consiste em um caractere com um ponto de código que varia de U+D800 a U+DBFF seguido por um caractere com um ponto de código que varia de U+DC00 a U+DFFF.)  Uma estratégia de fallback determina como um codificador lida com caracteres inválidos ou como um decodificador lida com bytes inválidos.</span><span class="sxs-lookup"><span data-stu-id="397b5-114">(A surrogate pair consists of a character with a code point that ranges from U+D800 to U+DBFF followed by a character with a code point that ranges from U+DC00 to U+DFFF.)  A fallback strategy determines how an encoder handles invalid characters or how a decoder handles invalid bytes.</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="397b5-115">Classes de codificação do .NET fornecem uma maneira de armazenar e converter dados de caractere.</span><span class="sxs-lookup"><span data-stu-id="397b5-115">.NET encoding classes provide a way to store and convert character data.</span></span> <span data-ttu-id="397b5-116">Elas não devem ser usadas para armazenar dados binários no formato de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-116">They should not be used to store binary data in string form.</span></span> <span data-ttu-id="397b5-117">Dependendo da codificação usada, a conversão de dados binários em formato de cadeia de caracteres com classes de codificação pode introduzir um comportamento inesperado e produzir dados imprecisos ou corrompidos.</span><span class="sxs-lookup"><span data-stu-id="397b5-117">Depending on the encoding used, converting binary data to string format with the encoding classes can introduce unexpected behavior and produce inaccurate or corrupted data.</span></span> <span data-ttu-id="397b5-118">Para converter dados binários em um formulário de cadeia de caracteres, use o <xref:System.Convert.ToBase64String%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-118">To convert binary data to a string form, use the <xref:System.Convert.ToBase64String%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="397b5-119">.NET usa a codificação UTF-16 (representado pela <xref:System.Text.UnicodeEncoding> classe) para representar caracteres e cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-119">.NET uses the UTF-16 encoding (represented by the <xref:System.Text.UnicodeEncoding> class) to represent characters and strings.</span></span> <span data-ttu-id="397b5-120">Aplicativos que segmentam o Common Language Runtime e usam codificadores para mapear representações de caracteres Unicode com suporte pelo common language runtime para outros esquemas de codificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-120">Applications that target the common language runtime use encoders to map Unicode character representations supported by the common language runtime to other encoding schemes.</span></span> <span data-ttu-id="397b5-121">Eles usam decodificadores para mapear caracteres de codificações não Unicode para Unicode.</span><span class="sxs-lookup"><span data-stu-id="397b5-121">They use decoders to map characters from non-Unicode encodings to Unicode.</span></span>  
  
 <span data-ttu-id="397b5-122">Este tópico é composto pelas seguintes seções:</span><span class="sxs-lookup"><span data-stu-id="397b5-122">This topic consists of the following sections:</span></span>  
  
-   [<span data-ttu-id="397b5-123">Codificações no .NET</span><span class="sxs-lookup"><span data-stu-id="397b5-123">Encodings in .NET</span></span>](../../../docs/standard/base-types/character-encoding.md#Encodings)  
  
-   [<span data-ttu-id="397b5-124">Selecionando uma classe de codificação</span><span class="sxs-lookup"><span data-stu-id="397b5-124">Selecting an Encoding Class</span></span>](../../../docs/standard/base-types/character-encoding.md#Selecting)  
  
-   [<span data-ttu-id="397b5-125">Usando um objeto de codificação</span><span class="sxs-lookup"><span data-stu-id="397b5-125">Using an Encoding Object</span></span>](../../../docs/standard/base-types/character-encoding.md#Using)  
  
-   [<span data-ttu-id="397b5-126">Escolhendo uma estratégia de fallback</span><span class="sxs-lookup"><span data-stu-id="397b5-126">Choosing a Fallback Strategy</span></span>](../../../docs/standard/base-types/character-encoding.md#FallbackStrategy)  
  
-   [<span data-ttu-id="397b5-127">Implementando uma estratégia de fallback personalizada</span><span class="sxs-lookup"><span data-stu-id="397b5-127">Implementing a Custom Fallback Strategy</span></span>](../../../docs/standard/base-types/character-encoding.md#Custom)  
  
<a name="Encodings"></a>   
## <a name="encodings-in-net"></a><span data-ttu-id="397b5-128">Codificações no .NET</span><span class="sxs-lookup"><span data-stu-id="397b5-128">Encodings in .NET</span></span>  
 <span data-ttu-id="397b5-129">Todos os caracteres codificação classes no .NET herdam o <xref:System.Text.Encoding?displayProperty=nameWithType> classe, que é uma classe abstrata que define a funcionalidade comum para todas as codificações de caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-129">All character encoding classes in .NET inherit from the <xref:System.Text.Encoding?displayProperty=nameWithType> class, which is an abstract class that defines the functionality common to all character encodings.</span></span> <span data-ttu-id="397b5-130">Para acessar os objetos de codificação individuais implementados no .NET, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="397b5-130">To access the individual encoding objects implemented in .NET, do the following:</span></span>  
  
-   <span data-ttu-id="397b5-131">Use as propriedades estáticas do <xref:System.Text.Encoding> classe, que retornam objetos que representam as codificações de caractere padrão disponíveis no .NET (ASCII, UTF-7, UTF-8, UTF-16 e UTF-32).</span><span class="sxs-lookup"><span data-stu-id="397b5-131">Use the static properties of the <xref:System.Text.Encoding> class, which return objects that represent the standard character encodings available in .NET (ASCII, UTF-7, UTF-8, UTF-16, and UTF-32).</span></span> <span data-ttu-id="397b5-132">Por exemplo, o <xref:System.Text.Encoding.Unicode%2A?displayProperty=nameWithType> propriedade retorna um <xref:System.Text.UnicodeEncoding> objeto.</span><span class="sxs-lookup"><span data-stu-id="397b5-132">For example, the <xref:System.Text.Encoding.Unicode%2A?displayProperty=nameWithType> property returns a <xref:System.Text.UnicodeEncoding> object.</span></span> <span data-ttu-id="397b5-133">Cada objeto usa o fallback de substituição para lidar com cadeias de caracteres que ele não consegue codificar e bytes que ele não consegue decodificar.</span><span class="sxs-lookup"><span data-stu-id="397b5-133">Each object uses replacement fallback to handle strings that it cannot encode and bytes that it cannot decode.</span></span> <span data-ttu-id="397b5-134">(Para obter mais informações, consulte a seção [Replacement Fallback (Fallback de substituição)](../../../docs/standard/base-types/character-encoding.md#Replacement).)</span><span class="sxs-lookup"><span data-stu-id="397b5-134">(For more information, see the [Replacement Fallback](../../../docs/standard/base-types/character-encoding.md#Replacement) section.)</span></span>  
  
-   <span data-ttu-id="397b5-135">Chame o construtor de classe da codificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-135">Call the encoding's class constructor.</span></span> <span data-ttu-id="397b5-136">A instância de objetos para as codificações ASCII, UTF-7, UTF-8, UTF-16 e UTF-32 podem ser criadas dessa forma.</span><span class="sxs-lookup"><span data-stu-id="397b5-136">Objects for the ASCII, UTF-7, UTF-8, UTF-16, and UTF-32 encodings can be instantiated in this way.</span></span> <span data-ttu-id="397b5-137">Por padrão, cada objeto usa fallback de substituição para manipular as cadeias de caracteres que ele não consegue codificar e bytes que ele não consegue decodificar, mas, em vez disso, você pode especificar que uma exceção seja gerada.</span><span class="sxs-lookup"><span data-stu-id="397b5-137">By default, each object uses replacement fallback to handle strings that it cannot encode and bytes that it cannot decode, but you can specify that an exception should be thrown instead.</span></span> <span data-ttu-id="397b5-138">(Para obter mais informações, consulte as seções [Fallback de substituição](../../../docs/standard/base-types/character-encoding.md#Replacement) e [Fallback de exceção](../../../docs/standard/base-types/character-encoding.md#Exception).)</span><span class="sxs-lookup"><span data-stu-id="397b5-138">(For more information, see the [Replacement Fallback](../../../docs/standard/base-types/character-encoding.md#Replacement) and [Exception Fallback](../../../docs/standard/base-types/character-encoding.md#Exception) sections.)</span></span>  
  
-   <span data-ttu-id="397b5-139">Chamar o <xref:System.Text.Encoding.%23ctor%28System.Int32%29?displayProperty=nameWithType> construtor e passá-lo em um inteiro que representa a codificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-139">Call the <xref:System.Text.Encoding.%23ctor%28System.Int32%29?displayProperty=nameWithType> constructor and pass it an integer that represents the encoding.</span></span> <span data-ttu-id="397b5-140">Os objetos de codificação padrão usam o fallback de substituição e a página de código e o DBCS (conjunto de caracteres de dois bytes) que codificam objetos usam o fallback que melhor se ajusta para manipular cadeias de caracteres que eles não conseguem codificar e bytes que eles não conseguem decodificar.</span><span class="sxs-lookup"><span data-stu-id="397b5-140">Standard encoding objects use replacement fallback, and code page and double-byte character set (DBCS) encoding objects use best-fit fallback to handle strings that they cannot encode and bytes that they cannot decode.</span></span> <span data-ttu-id="397b5-141">(Para obter mais informações, consulte a seção [Best-Fit Fallback (Fallback de melhor ajuste)](../../../docs/standard/base-types/character-encoding.md#BestFit).)</span><span class="sxs-lookup"><span data-stu-id="397b5-141">(For more information, see the [Best-Fit Fallback](../../../docs/standard/base-types/character-encoding.md#BestFit) section.)</span></span>  
  
-   <span data-ttu-id="397b5-142">Chamar o <xref:System.Text.Encoding.GetEncoding%2A?displayProperty=nameWithType> método, que retorna qualquer padrão, página de código ou DBCS codificação disponível no .NET.</span><span class="sxs-lookup"><span data-stu-id="397b5-142">Call the <xref:System.Text.Encoding.GetEncoding%2A?displayProperty=nameWithType> method, which returns any standard, code page, or DBCS encoding available in .NET.</span></span> <span data-ttu-id="397b5-143">As sobrecargas permitem especificar um objeto de fallback para o codificador e o decodificador.</span><span class="sxs-lookup"><span data-stu-id="397b5-143">Overloads let you specify a fallback object for both the encoder and the decoder.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="397b5-144">O padrão Unicode atribui um ponto de código (um número) e um nome a cada caractere em todos os scripts com suporte.</span><span class="sxs-lookup"><span data-stu-id="397b5-144">The Unicode Standard assigns a code point (a number) and a name to each character in every supported script.</span></span> <span data-ttu-id="397b5-145">Por exemplo, o caractere "A" é representado pelo ponto de código de U+0041 e o nome "LETRA MAIÚSCULA LATINA A".</span><span class="sxs-lookup"><span data-stu-id="397b5-145">For example, the character "A" is represented by the code point U+0041 and the name "LATIN CAPITAL LETTER A".</span></span> <span data-ttu-id="397b5-146">As codificações UTF (Unicode Transformation Format) definem maneiras de codificar esse ponto de código em uma sequência de um ou mais bytes.</span><span class="sxs-lookup"><span data-stu-id="397b5-146">The Unicode Transformation Format (UTF) encodings define ways to encode that code point into a sequence of one or more bytes.</span></span> <span data-ttu-id="397b5-147">Um esquema de codificação Unicode simplifica o desenvolvimento de aplicativos prontos para o mundo, porque ele permite que qualquer conjunto de caracteres sejam representados em uma única codificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-147">A Unicode encoding scheme simplifies world-ready application development because it allows characters from any character set to be represented in a single encoding.</span></span> <span data-ttu-id="397b5-148">Os desenvolvedores de aplicativos não precisam mais controlar o esquema de codificação usado para gerar caracteres para um idioma específico ou sistema de gravação e os dados podem ser compartilhados entre sistemas internacionalmente sem serem corrompidos.</span><span class="sxs-lookup"><span data-stu-id="397b5-148">Application developers no longer have to keep track of the encoding scheme that was used to produce characters for a specific language or writing system, and data can be shared among systems internationally without being corrupted.</span></span>  
>   
>  <span data-ttu-id="397b5-149">O .NET dá suporte a três codificações definidas pelo padrão Unicode: UTF-8, UTF-16 e UTF-32.</span><span class="sxs-lookup"><span data-stu-id="397b5-149">.NET supports three encodings defined by the Unicode standard: UTF-8, UTF-16, and UTF-32.</span></span> <span data-ttu-id="397b5-150">Para obter mais informações, consulte Padrão Unicode na [página inicial do Unicode](http://go.microsoft.com/fwlink/?LinkId=37123).</span><span class="sxs-lookup"><span data-stu-id="397b5-150">For more information, see The Unicode Standard at the [Unicode home page](http://go.microsoft.com/fwlink/?LinkId=37123).</span></span>  
  
 <span data-ttu-id="397b5-151">Você pode recuperar informações sobre todas as codificações disponíveis no .NET chamando o <xref:System.Text.Encoding.GetEncodings%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-151">You can retrieve information about all the encodings available in .NET by calling the <xref:System.Text.Encoding.GetEncodings%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="397b5-152">O .NET dá suporte aos sistemas de codificação de caracteres listados na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="397b5-152">.NET supports the character encoding systems listed in the following table.</span></span>  
  
|<span data-ttu-id="397b5-153">Codificando</span><span class="sxs-lookup"><span data-stu-id="397b5-153">Encoding</span></span>|<span data-ttu-id="397b5-154">Classe</span><span class="sxs-lookup"><span data-stu-id="397b5-154">Class</span></span>|<span data-ttu-id="397b5-155">Descrição</span><span class="sxs-lookup"><span data-stu-id="397b5-155">Description</span></span>|<span data-ttu-id="397b5-156">Vantagens/desvantagens</span><span class="sxs-lookup"><span data-stu-id="397b5-156">Advantages/disadvantages</span></span>|  
|--------------|-----------|-----------------|-------------------------------|  
|<span data-ttu-id="397b5-157">ASCII</span><span class="sxs-lookup"><span data-stu-id="397b5-157">ASCII</span></span>|<xref:System.Text.ASCIIEncoding>|<span data-ttu-id="397b5-158">Codifica um intervalo limitado de caracteres usando os menores sete bits de um byte.</span><span class="sxs-lookup"><span data-stu-id="397b5-158">Encodes a limited range of characters by using the lower seven bits of a byte.</span></span>|<span data-ttu-id="397b5-159">Como essa codificação só dá suporte a valores de caracteres de U+0000 a U+007F, na maioria dos casos, ela é inadequada para aplicativos internacionalizados.</span><span class="sxs-lookup"><span data-stu-id="397b5-159">Because this encoding only supports character values from U+0000 through U+007F, in most cases it is inadequate for internationalized applications.</span></span>|  
|<span data-ttu-id="397b5-160">UTF-7</span><span class="sxs-lookup"><span data-stu-id="397b5-160">UTF-7</span></span>|<xref:System.Text.UTF7Encoding>|<span data-ttu-id="397b5-161">Representa caracteres como sequências de caracteres ASCII de 7 bits.</span><span class="sxs-lookup"><span data-stu-id="397b5-161">Represents characters as sequences of 7-bit ASCII characters.</span></span> <span data-ttu-id="397b5-162">Caracteres Unicode não ASCII são representados por uma sequência de escape de caracteres ASCII.</span><span class="sxs-lookup"><span data-stu-id="397b5-162">Non-ASCII Unicode characters are represented by an escape sequence of ASCII characters.</span></span>|<span data-ttu-id="397b5-163">O UTF-7 dá suporte a protocolos como email e protocolos de grupos de notícias.</span><span class="sxs-lookup"><span data-stu-id="397b5-163">UTF-7 supports protocols such as e-mail and newsgroup protocols.</span></span> <span data-ttu-id="397b5-164">No entanto, o UTF-7 não é particularmente seguro ou robusto.</span><span class="sxs-lookup"><span data-stu-id="397b5-164">However, UTF-7 is not particularly secure or robust.</span></span> <span data-ttu-id="397b5-165">Em alguns casos, alterar um bit pode alterar radicalmente a interpretação de toda uma cadeia de caracteres UTF-7.</span><span class="sxs-lookup"><span data-stu-id="397b5-165">In some cases, changing one bit can radically alter the interpretation of an entire UTF-7 string.</span></span> <span data-ttu-id="397b5-166">Em outros casos, diferentes cadeias de caracteres UTF-7 podem codificar o mesmo texto.</span><span class="sxs-lookup"><span data-stu-id="397b5-166">In other cases, different UTF-7 strings can encode the same text.</span></span> <span data-ttu-id="397b5-167">Para as sequências que incluem caracteres não ASCII, o UTF-7 requer mais espaço do que o UTF-8 e a codificação/decodificação é mais lenta.</span><span class="sxs-lookup"><span data-stu-id="397b5-167">For sequences that include non-ASCII characters, UTF-7 requires more space than UTF-8, and encoding/decoding is slower.</span></span> <span data-ttu-id="397b5-168">Consequentemente, você deve usar o UTF-8 em vez do UTF-7, se possível.</span><span class="sxs-lookup"><span data-stu-id="397b5-168">Consequently, you should use UTF-8 instead of UTF-7 if possible.</span></span>|  
|<span data-ttu-id="397b5-169">UTF-8</span><span class="sxs-lookup"><span data-stu-id="397b5-169">UTF-8</span></span>|<xref:System.Text.UTF8Encoding>|<span data-ttu-id="397b5-170">Representa cada ponto de código Unicode como uma sequência de um a quatro bytes.</span><span class="sxs-lookup"><span data-stu-id="397b5-170">Represents each Unicode code point as a sequence of one to four bytes.</span></span>|<span data-ttu-id="397b5-171">O UTF-8 dá suporte a tamanhos de dados de 8 bits e funciona bem com muitos sistemas operacionais existentes.</span><span class="sxs-lookup"><span data-stu-id="397b5-171">UTF-8 supports 8-bit data sizes and works well with many existing operating systems.</span></span> <span data-ttu-id="397b5-172">Para o intervalo de caracteres ASCII, o UTF-8 é idêntico à codificação ASCII e permite um conjunto mais amplo de caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-172">For the ASCII range of characters, UTF-8 is identical to ASCII encoding and allows a broader set of characters.</span></span> <span data-ttu-id="397b5-173">No entanto, para scripts CJK (chinês-japonês-coreano), o UTF-8 pode exigir três bytes para cada caractere e pode eventualmente gerar tamanhos de dados maiores do que o UTF-16.</span><span class="sxs-lookup"><span data-stu-id="397b5-173">However, for Chinese-Japanese-Korean (CJK) scripts, UTF-8 can require three bytes for each character, and can potentially cause larger data sizes than UTF-16.</span></span> <span data-ttu-id="397b5-174">Observe que, às vezes, a quantidade de dados ASCII, como tags HTML, justifica o tamanho maior do intervalo CJK.</span><span class="sxs-lookup"><span data-stu-id="397b5-174">Note that sometimes the amount of ASCII data, such as HTML tags, justifies the increased size for the CJK range.</span></span>|  
|<span data-ttu-id="397b5-175">UTF-16</span><span class="sxs-lookup"><span data-stu-id="397b5-175">UTF-16</span></span>|<xref:System.Text.UnicodeEncoding>|<span data-ttu-id="397b5-176">Representa cada ponto de código Unicode como uma sequência de um a dois inteiros de 16 bits.</span><span class="sxs-lookup"><span data-stu-id="397b5-176">Represents each Unicode code point as a sequence of one or two 16-bit integers.</span></span> <span data-ttu-id="397b5-177">Os caracteres Unicode mais comuns exigem apenas um ponto de código UTF-16, embora os caracteres suplementares Unicode (U+10000 e maiores) exigem dois pontos de código UTF-16 alternativos.</span><span class="sxs-lookup"><span data-stu-id="397b5-177">Most common Unicode characters require only one UTF-16 code point, although Unicode supplementary characters (U+10000 and greater) require two UTF-16 surrogate code points.</span></span> <span data-ttu-id="397b5-178">Há suporte para as ordens de byte little endian e big endian.</span><span class="sxs-lookup"><span data-stu-id="397b5-178">Both little-endian and big-endian byte orders are supported.</span></span>|<span data-ttu-id="397b5-179">Codificação UTF-16 é usada pelo common language runtime para representar <xref:System.Char> e <xref:System.String> valores e ele é usado pelo sistema operacional Windows para representar `WCHAR` valores.</span><span class="sxs-lookup"><span data-stu-id="397b5-179">UTF-16 encoding is used by the common language runtime to represent <xref:System.Char> and <xref:System.String> values, and it is used by the Windows operating system to represent `WCHAR` values.</span></span>|  
|<span data-ttu-id="397b5-180">UTF-32</span><span class="sxs-lookup"><span data-stu-id="397b5-180">UTF-32</span></span>|<xref:System.Text.UTF32Encoding>|<span data-ttu-id="397b5-181">Representa cada ponto de código Unicode como um inteiro de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="397b5-181">Represents each Unicode code point as a 32-bit integer.</span></span> <span data-ttu-id="397b5-182">Há suporte para as ordens de byte little endian e big endian.</span><span class="sxs-lookup"><span data-stu-id="397b5-182">Both little-endian and big-endian byte orders are supported.</span></span>|<span data-ttu-id="397b5-183">A codificação UTF-32 é usada quando aplicativos desejam evitar o comportamento do ponto de código alternativo de codificação UTF-16 em sistemas operacionais para os quais o espaço codificado é muito importante.</span><span class="sxs-lookup"><span data-stu-id="397b5-183">UTF-32 encoding is used when applications want to avoid the surrogate code point behavior of UTF-16 encoding on operating systems for which encoded space is too important.</span></span> <span data-ttu-id="397b5-184">Glifos únicos renderizados em uma tela ainda podem ser codificados com mais de um caractere UTF-32.</span><span class="sxs-lookup"><span data-stu-id="397b5-184">Single glyphs rendered on a display can still be encoded with more than one UTF-32 character.</span></span>|  
|<span data-ttu-id="397b5-185">Codificações ANSI/ISO</span><span class="sxs-lookup"><span data-stu-id="397b5-185">ANSI/ISO encodings</span></span>||<span data-ttu-id="397b5-186">Fornece suporte a uma variedade de páginas de código.</span><span class="sxs-lookup"><span data-stu-id="397b5-186">Provides support for a variety of code pages.</span></span> <span data-ttu-id="397b5-187">Em sistemas operacionais Windows, páginas de código são usadas para oferecer suporte a um idioma específico ou a um grupo de idiomas.</span><span class="sxs-lookup"><span data-stu-id="397b5-187">On Windows operating systems, code pages are used to support a specific language or group of languages.</span></span> <span data-ttu-id="397b5-188">Para uma tabela que lista as páginas de código com suporte pelo .NET, consulte o <xref:System.Text.Encoding> classe.</span><span class="sxs-lookup"><span data-stu-id="397b5-188">For a table that lists the code pages supported by .NET, see the <xref:System.Text.Encoding> class.</span></span> <span data-ttu-id="397b5-189">Você pode recuperar um objeto de codificação para uma página de código específico ao chamar o <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-189">You can retrieve an encoding object for a particular code page by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method.</span></span>|<span data-ttu-id="397b5-190">Uma página de código contém 256 pontos de código e é baseada em zero.</span><span class="sxs-lookup"><span data-stu-id="397b5-190">A code page contains 256 code points and is zero-based.</span></span> <span data-ttu-id="397b5-191">Na maioria das páginas de código, os pontos de código de 0 a 127 representam o conjunto de caracteres ASCII e pontos de código de 128 a 255 diferem significativamente entre páginas de código.</span><span class="sxs-lookup"><span data-stu-id="397b5-191">In most code pages, code points 0 through 127 represent the ASCII character set, and code points 128 through 255 differ significantly between code pages.</span></span> <span data-ttu-id="397b5-192">Por exemplo, a página de código 1252 fornece os caracteres para sistemas com alfabeto latino, incluindo inglês, alemão e francês.</span><span class="sxs-lookup"><span data-stu-id="397b5-192">For example, code page 1252 provides the characters for Latin writing systems, including English, German, and French.</span></span> <span data-ttu-id="397b5-193">Os últimos 128 pontos de código na página de código 1252 contêm os caracteres de acentuação.</span><span class="sxs-lookup"><span data-stu-id="397b5-193">The last 128 code points in code page 1252 contain the accent characters.</span></span> <span data-ttu-id="397b5-194">A página de código 1253 fornece códigos de caracteres que são necessários no sistema alfabético grego.</span><span class="sxs-lookup"><span data-stu-id="397b5-194">Code page 1253 provides character codes that are required in the Greek writing system.</span></span> <span data-ttu-id="397b5-195">Os últimos 128 pontos de código na página de código 1253 contêm os caracteres gregos.</span><span class="sxs-lookup"><span data-stu-id="397b5-195">The last 128 code points in code page 1253 contain the Greek characters.</span></span> <span data-ttu-id="397b5-196">Como resultado, um aplicativo que se baseia em páginas de código ANSI não pode armazenar grego e alemão no mesmo fluxo de texto, a menos que inclua um identificador que indique a página de código referenciada.</span><span class="sxs-lookup"><span data-stu-id="397b5-196">As a result, an application that relies on ANSI code pages cannot store Greek and German in the same text stream unless it includes an identifier that indicates the referenced code page.</span></span>|  
|<span data-ttu-id="397b5-197">Codificações de conjunto de caracteres de byte duplo (DBCS)</span><span class="sxs-lookup"><span data-stu-id="397b5-197">Double-byte character set (DBCS) encodings</span></span>||<span data-ttu-id="397b5-198">Oferece suporte a idiomas, como chinês, japonês e coreano, que contêm mais de 256 caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-198">Supports languages, such as Chinese, Japanese, and Korean, that contain more than 256 characters.</span></span> <span data-ttu-id="397b5-199">Um DBCS, um par de pontos de código (de byte duplo) representa cada caractere.</span><span class="sxs-lookup"><span data-stu-id="397b5-199">In a DBCS, a pair of code points (a double byte) represents each character.</span></span> <span data-ttu-id="397b5-200">O <xref:System.Text.Encoding.IsSingleByte%2A?displayProperty=nameWithType> propriedade retorna `false` para codificações DBCS.</span><span class="sxs-lookup"><span data-stu-id="397b5-200">The <xref:System.Text.Encoding.IsSingleByte%2A?displayProperty=nameWithType> property returns `false` for DBCS encodings.</span></span> <span data-ttu-id="397b5-201">Você pode recuperar um objeto de codificação para um determinado DBCS chamando o <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-201">You can retrieve an encoding object for a particular DBCS by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method.</span></span>|<span data-ttu-id="397b5-202">Um DBCS, um par de pontos de código (de byte duplo) representa cada caractere.</span><span class="sxs-lookup"><span data-stu-id="397b5-202">In a DBCS, a pair of code points (a double byte) represents each character.</span></span> <span data-ttu-id="397b5-203">Quando um aplicativo manipula dados DBCS, o primeiro byte de um caractere DBCS (o byte inicial) é processado em combinação com o byte final que vem imediatamente a seguir.</span><span class="sxs-lookup"><span data-stu-id="397b5-203">When an application handles DBCS data, the first byte of a DBCS character (the lead byte) is processed in combination with the trail byte that immediately follows it.</span></span> <span data-ttu-id="397b5-204">Como um único par de pontos de código de byte duplo pode representar caracteres diferentes dependendo da página de código, esse esquema ainda não permite a combinação dos dois idiomas, como japonês e chinês no mesmo fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="397b5-204">Because a single pair of double-byte code points can represent different characters depending on the code page, this scheme still does not allow for the combination of two languages, such as Japanese and Chinese, in the same data stream.</span></span>|  
  
 <span data-ttu-id="397b5-205">Essas codificações permitem que você trabalhe com caracteres Unicode, bem como com codificações mais comumente usadas em aplicativos herdados.</span><span class="sxs-lookup"><span data-stu-id="397b5-205">These encodings enable you to work with Unicode characters as well as with encodings that are most commonly used in legacy applications.</span></span> <span data-ttu-id="397b5-206">Além disso, você pode criar uma codificação personalizada definindo uma classe que deriva de <xref:System.Text.Encoding> e substituindo a seus membros.</span><span class="sxs-lookup"><span data-stu-id="397b5-206">In addition, you can create a custom encoding by defining a class that derives from <xref:System.Text.Encoding> and overriding its members.</span></span>  
  
### <a name="platform-notes-includenetcoreincludesnet-core-mdmd"></a><span data-ttu-id="397b5-207">Notas de plataforma: [!INCLUDE[net_core](../../../includes/net-core-md.md)]</span><span class="sxs-lookup"><span data-stu-id="397b5-207">Platform Notes: [!INCLUDE[net_core](../../../includes/net-core-md.md)]</span></span>  
 <span data-ttu-id="397b5-208">Por padrão, o [!INCLUDE[net_core](../../../includes/net-core-md.md)] não disponibiliza nenhuma codificação de página de código diferente da página de código 28591 e das codificações Unicode, como UTF-8 e UTF-16.</span><span class="sxs-lookup"><span data-stu-id="397b5-208">By default, [!INCLUDE[net_core](../../../includes/net-core-md.md)] does not make available any code page encodings other than code page 28591 and the Unicode encodings, such as UTF-8 and UTF-16.</span></span> <span data-ttu-id="397b5-209">No entanto, você pode adicionar as codificações de página de código encontradas em aplicativos do Windows padrão que visam .NET ao seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="397b5-209">However, you can add the code page encodings found in standard Windows apps that target .NET to your app.</span></span> <span data-ttu-id="397b5-210">Para obter mais informações, consulte o <xref:System.Text.CodePagesEncodingProvider> tópico.</span><span class="sxs-lookup"><span data-stu-id="397b5-210">For complete information, see the <xref:System.Text.CodePagesEncodingProvider> topic.</span></span>  
  
<a name="Selecting"></a>   
## <a name="selecting-an-encoding-class"></a><span data-ttu-id="397b5-211">Selecionando uma classe de codificação</span><span class="sxs-lookup"><span data-stu-id="397b5-211">Selecting an Encoding Class</span></span>  
 <span data-ttu-id="397b5-212">Se você tem a oportunidade de escolher a codificação a ser usada pelo seu aplicativo, você deve usar um Unicode codificação, preferencialmente o <xref:System.Text.UTF8Encoding> ou <xref:System.Text.UnicodeEncoding>.</span><span class="sxs-lookup"><span data-stu-id="397b5-212">If you have the opportunity to choose the encoding to be used by your application, you should use a Unicode encoding, preferably either <xref:System.Text.UTF8Encoding> or <xref:System.Text.UnicodeEncoding>.</span></span> <span data-ttu-id="397b5-213">(.NET também oferece suporte a uma terceira codificação Unicode, <xref:System.Text.UTF32Encoding>.)</span><span class="sxs-lookup"><span data-stu-id="397b5-213">(.NET also supports a third Unicode encoding, <xref:System.Text.UTF32Encoding>.)</span></span>  
  
 <span data-ttu-id="397b5-214">Se você estiver planejando usar uma codificação ASCII (<xref:System.Text.ASCIIEncoding>), escolha <xref:System.Text.UTF8Encoding> em vez disso.</span><span class="sxs-lookup"><span data-stu-id="397b5-214">If you are planning to use an ASCII encoding (<xref:System.Text.ASCIIEncoding>), choose <xref:System.Text.UTF8Encoding> instead.</span></span> <span data-ttu-id="397b5-215">As duas codificações são idênticas para o conjunto de caracteres ASCII, mas <xref:System.Text.UTF8Encoding> tem as seguintes vantagens:</span><span class="sxs-lookup"><span data-stu-id="397b5-215">The two encodings are identical for the ASCII character set, but <xref:System.Text.UTF8Encoding> has the following advantages:</span></span>  
  
-   <span data-ttu-id="397b5-216">Ele pode representar cada caractere Unicode, enquanto <xref:System.Text.ASCIIEncoding> dá suporte apenas a valores de caractere Unicode entre U + 0000 e U + 007F.</span><span class="sxs-lookup"><span data-stu-id="397b5-216">It can represent every Unicode character, whereas <xref:System.Text.ASCIIEncoding> supports only the Unicode character values between U+0000 and U+007F.</span></span>  
  
-   <span data-ttu-id="397b5-217">Ele fornece detecção de erros e melhor segurança.</span><span class="sxs-lookup"><span data-stu-id="397b5-217">It provides error detection and better security.</span></span>  
  
-   <span data-ttu-id="397b5-218">Ele foi ajustado para ser o mais rápido possível e deve ser mais rápido do que qualquer outra codificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-218">It has been tuned to be as fast as possible and should be faster than any other encoding.</span></span> <span data-ttu-id="397b5-219">Mesmo para conteúdo que é totalmente ASCII, operações realizadas com <xref:System.Text.UTF8Encoding> são mais rápidos que as operações realizadas com <xref:System.Text.ASCIIEncoding>.</span><span class="sxs-lookup"><span data-stu-id="397b5-219">Even for content that is entirely ASCII, operations performed with <xref:System.Text.UTF8Encoding> are faster than operations performed with <xref:System.Text.ASCIIEncoding>.</span></span>  
  
 <span data-ttu-id="397b5-220">Você deve considerar o uso <xref:System.Text.ASCIIEncoding> apenas para aplicativos herdados.</span><span class="sxs-lookup"><span data-stu-id="397b5-220">You should consider using <xref:System.Text.ASCIIEncoding> only for legacy applications.</span></span> <span data-ttu-id="397b5-221">No entanto, até mesmo para aplicativos herdados, <xref:System.Text.UTF8Encoding> pode ser uma escolha melhor pelos seguintes motivos (supondo que as configurações padrão):</span><span class="sxs-lookup"><span data-stu-id="397b5-221">However, even for legacy applications, <xref:System.Text.UTF8Encoding> might be a better choice for the following reasons (assuming default settings):</span></span>  
  
-   <span data-ttu-id="397b5-222">Se seu aplicativo tem conteúdo que não é estritamente ASCII e codifica com <xref:System.Text.ASCIIEncoding>, todos os caracteres não ASCII codifica como um ponto de interrogação (?).</span><span class="sxs-lookup"><span data-stu-id="397b5-222">If your application has content that is not strictly ASCII and encodes it with <xref:System.Text.ASCIIEncoding>, each non-ASCII character encodes as a question mark (?).</span></span> <span data-ttu-id="397b5-223">Se o aplicativo decodificar esses dados, as informações serão perdidas.</span><span class="sxs-lookup"><span data-stu-id="397b5-223">If the application then decodes this data, the information is lost.</span></span>  
  
-   <span data-ttu-id="397b5-224">Se seu aplicativo tem conteúdo que não é estritamente ASCII e codifica com <xref:System.Text.UTF8Encoding>, o resultado parece ininteligível se interpretado como ASCII.</span><span class="sxs-lookup"><span data-stu-id="397b5-224">If your application has content that is not strictly ASCII and encodes it with <xref:System.Text.UTF8Encoding>, the result seems unintelligible if interpreted as ASCII.</span></span> <span data-ttu-id="397b5-225">No entanto, se o aplicativo usar um decodificador de UTF-8 para decodificar esses dados, os dados executarão uma viagem de ida e volta com êxito.</span><span class="sxs-lookup"><span data-stu-id="397b5-225">However, if the application then uses a UTF-8 decoder to decode this data, the data performs a round trip successfully.</span></span>  
  
 <span data-ttu-id="397b5-226">Em um aplicativo Web, os caracteres enviados ao cliente em resposta a uma solicitação da Web devem refletir a codificação usada no cliente.</span><span class="sxs-lookup"><span data-stu-id="397b5-226">In a web application, characters sent to the client in response to a web request should reflect the encoding used on the client.</span></span> <span data-ttu-id="397b5-227">Na maioria dos casos, você deve definir o <xref:System.Web.HttpResponse.ContentEncoding%2A?displayProperty=nameWithType> o valor retornado pela propriedade de <xref:System.Web.HttpRequest.ContentEncoding%2A?displayProperty=nameWithType> propriedade para exibir o texto na codificação que espera que o usuário.</span><span class="sxs-lookup"><span data-stu-id="397b5-227">In most cases, you should set the <xref:System.Web.HttpResponse.ContentEncoding%2A?displayProperty=nameWithType> property to the value returned by the <xref:System.Web.HttpRequest.ContentEncoding%2A?displayProperty=nameWithType> property to display text in the encoding that the user expects.</span></span>  
  
<a name="Using"></a>   
## <a name="using-an-encoding-object"></a><span data-ttu-id="397b5-228">Usando um objeto de codificação</span><span class="sxs-lookup"><span data-stu-id="397b5-228">Using an Encoding Object</span></span>  
 <span data-ttu-id="397b5-229">Um codificador converte uma cadeia de caracteres (mais comumente, caracteres Unicode) em seu equivalente numérico (byte).</span><span class="sxs-lookup"><span data-stu-id="397b5-229">An encoder converts a string of characters (most commonly, Unicode characters) to its numeric (byte) equivalent.</span></span> <span data-ttu-id="397b5-230">Por exemplo, você pode usar um codificador ASCII para converter caracteres Unicode em ASCII para que eles possam ser exibidos no console.</span><span class="sxs-lookup"><span data-stu-id="397b5-230">For example, you might use an ASCII encoder to convert Unicode characters to ASCII so that they can be displayed at the console.</span></span> <span data-ttu-id="397b5-231">Para executar a conversão, você deve chamar o <xref:System.Text.Encoding.GetBytes%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-231">To perform the conversion, you call the <xref:System.Text.Encoding.GetBytes%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="397b5-232">Se você quiser determinar o número de bytes necessários para armazenar os caracteres codificados antes de executar a codificação, você pode chamar o <xref:System.Text.Encoding.GetByteCount%2A> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-232">If you want to determine how many bytes are needed to store the encoded characters before performing the encoding, you can call the <xref:System.Text.Encoding.GetByteCount%2A> method.</span></span>  
  
 <span data-ttu-id="397b5-233">O exemplo a seguir usa uma matriz de byte único para codificar cadeias de caracteres em duas operações separadas.</span><span class="sxs-lookup"><span data-stu-id="397b5-233">The following example uses a single byte array to encode strings in two separate operations.</span></span> <span data-ttu-id="397b5-234">Ela mantém um índice que indica a posição inicial na matriz de bytes para o próximo conjunto de bytes codificados em ASCII.</span><span class="sxs-lookup"><span data-stu-id="397b5-234">It maintains an index that indicates the starting position in the byte array for the next set of ASCII-encoded bytes.</span></span> <span data-ttu-id="397b5-235">Ele chama o <xref:System.Text.ASCIIEncoding.GetByteCount%28System.String%29?displayProperty=nameWithType> método para garantir que a matriz de bytes é grande o suficiente para acomodar a cadeia de caracteres codificada.</span><span class="sxs-lookup"><span data-stu-id="397b5-235">It calls the <xref:System.Text.ASCIIEncoding.GetByteCount%28System.String%29?displayProperty=nameWithType> method to ensure that the byte array is large enough to accommodate the encoded string.</span></span> <span data-ttu-id="397b5-236">Depois, ele chama o <xref:System.Text.ASCIIEncoding.GetBytes%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.Byte%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> método para codificar os caracteres na cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-236">It then calls the <xref:System.Text.ASCIIEncoding.GetBytes%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.Byte%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> method to encode the characters in the string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/getbytes1.cs#8)]
 [!code-vb[Conceptual.Encoding#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/getbytes1.vb#8)]  
  
 <span data-ttu-id="397b5-237">Um decodificador converte uma matriz de bytes que reflete uma codificação de caracteres específica em um conjunto de caracteres, seja em uma matriz de caracteres ou em uma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-237">A decoder converts a byte array that reflects a particular character encoding into a set of characters, either in a character array or in a string.</span></span> <span data-ttu-id="397b5-238">Para decodificar uma matriz de bytes em uma matriz de caracteres, você deve chamar o <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-238">To decode a byte array into a character array, you call the <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="397b5-239">Para decodificar uma matriz de bytes em uma cadeia de caracteres, você deve chamar o <xref:System.Text.Encoding.GetString%2A> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-239">To decode a byte array into a string, you call the <xref:System.Text.Encoding.GetString%2A> method.</span></span> <span data-ttu-id="397b5-240">Se você quiser determinar o número de caracteres é necessários para armazenar os bytes decodificados antes de executar a decodificação, você pode chamar o <xref:System.Text.Encoding.GetCharCount%2A> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-240">If you want to determine how many characters are needed to store the decoded bytes before performing the decoding, you can call the <xref:System.Text.Encoding.GetCharCount%2A> method.</span></span>  
  
 <span data-ttu-id="397b5-241">O exemplo a seguir codifica três cadeias de caracteres e, em seguida, as decodifica em uma única matriz de caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-241">The following example encodes three strings and then decodes them into a single array of characters.</span></span> <span data-ttu-id="397b5-242">Ela mantém um índice que indica a posição inicial na matriz de bytes para o próximo conjunto de caracteres codificados.</span><span class="sxs-lookup"><span data-stu-id="397b5-242">It maintains an index that indicates the starting position in the character array for the next set of decoded characters.</span></span> <span data-ttu-id="397b5-243">Ele chama o <xref:System.Text.ASCIIEncoding.GetCharCount%2A> método para garantir que a matriz de caracteres é grande o suficiente para acomodar todos os caracteres decodificados.</span><span class="sxs-lookup"><span data-stu-id="397b5-243">It calls the <xref:System.Text.ASCIIEncoding.GetCharCount%2A> method to ensure that the character array is large enough to accommodate all the decoded characters.</span></span> <span data-ttu-id="397b5-244">Depois, ele chama o <xref:System.Text.ASCIIEncoding.GetChars%28System.Byte%5B%5D%2CSystem.Int32%2CSystem.Int32%2CSystem.Char%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> método decodificar a matriz de bytes.</span><span class="sxs-lookup"><span data-stu-id="397b5-244">It then calls the <xref:System.Text.ASCIIEncoding.GetChars%28System.Byte%5B%5D%2CSystem.Int32%2CSystem.Int32%2CSystem.Char%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> method to decode the byte array.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#9](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/getchars1.cs#9)]
 [!code-vb[Conceptual.Encoding#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/getchars1.vb#9)]  
  
 <span data-ttu-id="397b5-245">A codificação e decodificação de métodos de uma classe derivam de <xref:System.Text.Encoding> são projetados para trabalhar em um conjunto completo de dados; ou seja, todos os dados a ser codificada ou decodificada é fornecido em uma única chamada de método.</span><span class="sxs-lookup"><span data-stu-id="397b5-245">The encoding and decoding methods of a class derived from <xref:System.Text.Encoding> are designed to work on a complete set of data; that is, all the data to be encoded or decoded is supplied in a single method call.</span></span> <span data-ttu-id="397b5-246">No entanto, em alguns casos, os dados estão disponíveis em um fluxo e os dados a serem codificados ou decodificados podem estar disponíveis somente em operações de leitura separadas.</span><span class="sxs-lookup"><span data-stu-id="397b5-246">However, in some cases, data is available in a stream, and the data to be encoded or decoded may be available only from separate read operations.</span></span> <span data-ttu-id="397b5-247">Isso requer a operação de codificação ou decodificação para lembrar qualquer estado salvo em sua invocação anterior.</span><span class="sxs-lookup"><span data-stu-id="397b5-247">This requires the encoding or decoding operation to remember any saved state from its previous invocation.</span></span> <span data-ttu-id="397b5-248">Métodos de classes derivam de <xref:System.Text.Encoder> e <xref:System.Text.Decoder> são capazes de lidar com a codificação e decodificação de operações que abrangem várias chamadas de método.</span><span class="sxs-lookup"><span data-stu-id="397b5-248">Methods of classes derived from <xref:System.Text.Encoder> and <xref:System.Text.Decoder> are able to handle encoding and decoding operations that span multiple method calls.</span></span>  
  
 <span data-ttu-id="397b5-249">Um <xref:System.Text.Encoder> do objeto para uma codificação específica está disponível de codificação <xref:System.Text.Encoding.GetEncoder%2A?displayProperty=nameWithType> propriedade.</span><span class="sxs-lookup"><span data-stu-id="397b5-249">An <xref:System.Text.Encoder> object for a particular encoding is available from that encoding's <xref:System.Text.Encoding.GetEncoder%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="397b5-250">Um <xref:System.Text.Decoder> do objeto para uma codificação específica está disponível de codificação <xref:System.Text.Encoding.GetDecoder%2A?displayProperty=nameWithType> propriedade.</span><span class="sxs-lookup"><span data-stu-id="397b5-250">A <xref:System.Text.Decoder> object for a particular encoding is available from that encoding's <xref:System.Text.Encoding.GetDecoder%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="397b5-251">Para operações de decodificação, observe que as classes derivadas de <xref:System.Text.Decoder> incluem um <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> método, mas eles não têm um método que corresponde à <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="397b5-251">For decoding operations, note that classes derived from <xref:System.Text.Decoder> include a <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> method, but they do not have a method that corresponds to <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="397b5-252">O exemplo a seguir ilustra a diferença entre usar o <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> e <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> métodos para decodificação de uma matriz de byte Unicode.</span><span class="sxs-lookup"><span data-stu-id="397b5-252">The following example illustrates the difference between using the <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> and <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> methods for decoding a Unicode byte array.</span></span> <span data-ttu-id="397b5-253">O exemplo codifica uma cadeia de caracteres que contém alguns caracteres Unicode em um arquivo e, em seguida, usa os dois métodos de decodificação para decodificá-los dez bytes por vez.</span><span class="sxs-lookup"><span data-stu-id="397b5-253">The example encodes a string that contains some Unicode characters to a file, and then uses the two decoding methods to decode them ten bytes at a time.</span></span> <span data-ttu-id="397b5-254">Como um par alternativo ocorre nos bytes décimo e décimo primeiro, ele é decodificado em chamadas de método separadas.</span><span class="sxs-lookup"><span data-stu-id="397b5-254">Because a surrogate pair occurs in the tenth and eleventh bytes, it is decoded in separate method calls.</span></span> <span data-ttu-id="397b5-255">Como mostra a saída, o <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> método não é capaz de decodificar corretamente os bytes e em vez disso, substituí-los por U + FFFD (CARACTERE de substituição).</span><span class="sxs-lookup"><span data-stu-id="397b5-255">As the output shows, the <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> method is not able to correctly decode the bytes and instead replaces them with U+FFFD (REPLACEMENT CHARACTER).</span></span> <span data-ttu-id="397b5-256">Por outro lado, o <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> método é capaz de decodificar com êxito a matriz de bytes para obter a cadeia de caracteres original.</span><span class="sxs-lookup"><span data-stu-id="397b5-256">On the other hand, the <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> method is able to successfully decode the byte array to get the original string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#10](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/stream1.cs#10)]
 [!code-vb[Conceptual.Encoding#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/stream1.vb#10)]  
  
<a name="FallbackStrategy"></a>   
## <a name="choosing-a-fallback-strategy"></a><span data-ttu-id="397b5-257">Escolhendo uma estratégia de fallback</span><span class="sxs-lookup"><span data-stu-id="397b5-257">Choosing a Fallback Strategy</span></span>  
 <span data-ttu-id="397b5-258">Quando um método tenta codificar ou decodificar um caractere, mas não existe nenhum mapeamento, ele deve implementar uma estratégia de fallback que determine como o mapeamento com falha deva ser tratado.</span><span class="sxs-lookup"><span data-stu-id="397b5-258">When a method tries to encode or decode a character but no mapping exists, it must implement a fallback strategy that determines how the failed mapping should be handled.</span></span> <span data-ttu-id="397b5-259">Há três tipos de estratégias de fallback:</span><span class="sxs-lookup"><span data-stu-id="397b5-259">There are three types of fallback strategies:</span></span>  
  
-   <span data-ttu-id="397b5-260">Fallback de melhor ajuste</span><span class="sxs-lookup"><span data-stu-id="397b5-260">Best-fit fallback</span></span>  
  
-   <span data-ttu-id="397b5-261">Fallback de substituição</span><span class="sxs-lookup"><span data-stu-id="397b5-261">Replacement fallback</span></span>  
  
-   <span data-ttu-id="397b5-262">Fallback de exceção</span><span class="sxs-lookup"><span data-stu-id="397b5-262">Exception fallback</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="397b5-263">Os problemas mais comuns em operações de codificação ocorrem quando um caractere Unicode não pode ser mapeado para uma determinada codificação de página de código.</span><span class="sxs-lookup"><span data-stu-id="397b5-263">The most common problems in encoding operations occur when a Unicode character cannot be mapped to a particular code page encoding.</span></span> <span data-ttu-id="397b5-264">Os problemas mais comuns em operações de decodificação ocorrem quando sequências de bytes inválidas não podem ser convertidas em caracteres Unicode válidos.</span><span class="sxs-lookup"><span data-stu-id="397b5-264">The most common problems in decoding operations occur when invalid byte sequences cannot be translated into valid Unicode characters.</span></span> <span data-ttu-id="397b5-265">Por esses motivos, você deve saber qual estratégia de fallback um objeto de codificação específico usa.</span><span class="sxs-lookup"><span data-stu-id="397b5-265">For these reasons, you should know which fallback strategy a particular encoding object uses.</span></span> <span data-ttu-id="397b5-266">Sempre que possível, você deve especificar a estratégia de fallback usada por um objeto de codificação quando você criar uma instância do objeto.</span><span class="sxs-lookup"><span data-stu-id="397b5-266">Whenever possible, you should specify the fallback strategy used by an encoding object when you instantiate the object.</span></span>  
  
<a name="BestFit"></a>   
### <a name="best-fit-fallback"></a><span data-ttu-id="397b5-267">Fallback de melhor ajuste</span><span class="sxs-lookup"><span data-stu-id="397b5-267">Best-Fit Fallback</span></span>  
 <span data-ttu-id="397b5-268">Quando um caractere não tiver uma correspondência exata na codificação de destino, o codificador pode tentar mapeá-lo para um caractere semelhante.</span><span class="sxs-lookup"><span data-stu-id="397b5-268">When a character does not have an exact match in the target encoding, the encoder can try to map it to a similar character.</span></span> <span data-ttu-id="397b5-269">(O fallback de melhor ajuste é sobretudo uma codificação em vez de um problema de decodificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-269">(Best-fit fallback is mostly an encoding rather than a decoding issue.</span></span> <span data-ttu-id="397b5-270">Há poucas páginas de código que contêm caracteres que não podem ser mapeados com êxito para Unicode.) Melhor ajuste de fallback é o padrão para a página de código e conjunto de caracteres de byte duplo codificações que são recuperadas pelo <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> e <xref:System.Text.Encoding.GetEncoding%28System.String%29?displayProperty=nameWithType> sobrecargas.</span><span class="sxs-lookup"><span data-stu-id="397b5-270">There are very few code pages that contain characters that cannot be successfully mapped to Unicode.) Best-fit fallback is the default for code page and double-byte character set encodings that are retrieved by the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> and <xref:System.Text.Encoding.GetEncoding%28System.String%29?displayProperty=nameWithType> overloads.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="397b5-271">Em teoria, a codificação Unicode classes fornecidas no .NET (<xref:System.Text.UTF8Encoding>, <xref:System.Text.UnicodeEncoding>, e <xref:System.Text.UTF32Encoding>) dão suporte a cada caractere em cada conjunto de caracteres, para que possam ser usados para eliminar problemas de fallbacks de melhor ajuste.</span><span class="sxs-lookup"><span data-stu-id="397b5-271">In theory, the Unicode encoding classes provided in .NET (<xref:System.Text.UTF8Encoding>, <xref:System.Text.UnicodeEncoding>, and <xref:System.Text.UTF32Encoding>) support every character in every character set, so they can be used to eliminate best-fit fallback issues.</span></span>  
  
 <span data-ttu-id="397b5-272">As estratégias de melhor ajuste variam de acordo com as diferentes páginas de código e não são documentadas detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="397b5-272">Best-fit strategies vary for different code pages, and they are not documented in detail.</span></span> <span data-ttu-id="397b5-273">Por exemplo, para algumas páginas de código, caracteres latinos de largura inteira mapeiam para os caracteres latinos de meia largura mais comuns.</span><span class="sxs-lookup"><span data-stu-id="397b5-273">For example, for some code pages, full-width Latin characters map to the more common half-width Latin characters.</span></span> <span data-ttu-id="397b5-274">Para outras páginas de código, esse mapeamento não é feito.</span><span class="sxs-lookup"><span data-stu-id="397b5-274">For other code pages, this mapping is not made.</span></span> <span data-ttu-id="397b5-275">Mesmo em uma estratégia de melhor ajuste agressiva, não há nenhum ajuste imaginável para alguns caracteres em algumas codificações.</span><span class="sxs-lookup"><span data-stu-id="397b5-275">Even under an aggressive best-fit strategy, there is no imaginable fit for some characters in some encodings.</span></span> <span data-ttu-id="397b5-276">Por exemplo, um ideograma chinês tem nenhum mapeamento razoável para a página de código 1252.</span><span class="sxs-lookup"><span data-stu-id="397b5-276">For example, a Chinese ideograph has no reasonable mapping to code page 1252.</span></span> <span data-ttu-id="397b5-277">Nesse caso, é usada uma cadeia de caracteres de substituição.</span><span class="sxs-lookup"><span data-stu-id="397b5-277">In this case, a replacement string is used.</span></span> <span data-ttu-id="397b5-278">Por padrão, essa cadeia de caracteres é apenas um PONTO DE INTERROGAÇÃO (U+003F).</span><span class="sxs-lookup"><span data-stu-id="397b5-278">By default, this string is just a single QUESTION MARK (U+003F).</span></span>  
  
 <span data-ttu-id="397b5-279">O exemplo a seguir usa a página de código 1252 (a página de código do Windows para idiomas da Europa Ocidental) para ilustrar o mapeamento de melhor ajuste e suas desvantagens.</span><span class="sxs-lookup"><span data-stu-id="397b5-279">The following example uses code page 1252 (the Windows code page for Western European languages) to illustrate best-fit mapping and its drawbacks.</span></span> <span data-ttu-id="397b5-280">O <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> método é usado para recuperar um objeto de codificação de página de código 1252.</span><span class="sxs-lookup"><span data-stu-id="397b5-280">The <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method is used to retrieve an encoding object for code page 1252.</span></span> <span data-ttu-id="397b5-281">Por padrão, ele usa um mapeamento de melhor ajuste para caracteres Unicode aos quais ele não dá suporte.</span><span class="sxs-lookup"><span data-stu-id="397b5-281">By default, it uses a best-fit mapping for Unicode characters that it does not support.</span></span> <span data-ttu-id="397b5-282">O exemplo cria uma instância de uma cadeia de caracteres que contém três caracteres não ASCII – LETRA MAIÚSCULA LATINA S CIRCULADA (U+24C8), CINCO SOBRESCRITO (U+2075) e INFINITO (U+221E) – separados por espaços.</span><span class="sxs-lookup"><span data-stu-id="397b5-282">The example instantiates a string that contains three non-ASCII characters - CIRCLED LATIN CAPITAL LETTER S (U+24C8), SUPERSCRIPT FIVE (U+2075), and INFINITY (U+221E) - separated by spaces.</span></span> <span data-ttu-id="397b5-283">Como mostra a saída de exemplo, quando a cadeia de caracteres é codificada, os três caracteres originais sem espaço são substituídos pelo PONTO DE INTERROGAÇÃO (U+003F), DÍGITO CINCO (U+0035) e DÍGITO OITO (U+0038).</span><span class="sxs-lookup"><span data-stu-id="397b5-283">As the output from the example shows, when the string is encoded, the three original non-space characters are replaced by QUESTION MARK (U+003F), DIGIT FIVE (U+0035), and DIGIT EIGHT (U+0038).</span></span> <span data-ttu-id="397b5-284">DÍGITO OITO é um substituto especialmente ruim para o caractere INFINITO sem suporte e o PONTO DE INTERROGAÇÃO indica que nenhum mapeamento estava disponível para o caractere original.</span><span class="sxs-lookup"><span data-stu-id="397b5-284">DIGIT EIGHT is a particularly poor replacement for the unsupported INFINITY character, and QUESTION MARK indicates that no mapping was available for the original character.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1.cs#1)]
 [!code-vb[Conceptual.Encoding#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1.vb#1)]  
  
 <span data-ttu-id="397b5-285">Mapeamento de melhor ajuste é o comportamento padrão para um <xref:System.Text.Encoding> objeto que codifica dados Unicode em dados de página de código e aplicativos herdados que contam com esse comportamento.</span><span class="sxs-lookup"><span data-stu-id="397b5-285">Best-fit mapping is the default behavior for an <xref:System.Text.Encoding> object that encodes Unicode data into code page data, and there are legacy applications that rely on this behavior.</span></span> <span data-ttu-id="397b5-286">No entanto, a maioria dos novos aplicativos devem evitar o comportamento de melhor ajuste por motivos de segurança.</span><span class="sxs-lookup"><span data-stu-id="397b5-286">However, most new applications should avoid best-fit behavior for security reasons.</span></span> <span data-ttu-id="397b5-287">Por exemplo, os aplicativos não devem colocar um nome de domínio por meio de uma codificação de melhor ajuste.</span><span class="sxs-lookup"><span data-stu-id="397b5-287">For example, applications should not put a domain name through a best-fit encoding.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="397b5-288">Você também pode implementar um mapeamento de fallback de melhor ajuste personalizado para uma codificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-288">You can also implement a custom best-fit fallback mapping for an encoding.</span></span> <span data-ttu-id="397b5-289">Para obter mais informações, consulte a seção [Implementando uma estratégia de fallback personalizada](../../../docs/standard/base-types/character-encoding.md#Custom).</span><span class="sxs-lookup"><span data-stu-id="397b5-289">For more information, see the [Implementing a Custom Fallback Strategy](../../../docs/standard/base-types/character-encoding.md#Custom) section.</span></span>  
  
 <span data-ttu-id="397b5-290">Se mais adequada de fallback é o padrão para um objeto de codificação, você pode escolher outra estratégia de fallback quando você recupera um <xref:System.Text.Encoding> objeto chamando o <xref:System.Text.Encoding.GetEncoding%28System.Int32%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> ou <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> de sobrecarga.</span><span class="sxs-lookup"><span data-stu-id="397b5-290">If best-fit fallback is the default for an encoding object, you can choose another fallback strategy when you retrieve an <xref:System.Text.Encoding> object by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> or <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> overload.</span></span> <span data-ttu-id="397b5-291">A seção a seguir inclui um exemplo que substitui cada caractere que não pode ser mapeado para a página de código 1252 com um asterisco (*).</span><span class="sxs-lookup"><span data-stu-id="397b5-291">The following section includes an example that replaces each character that cannot be mapped to code page 1252 with an asterisk (*).</span></span>  
  
 [!code-csharp[Conceptual.Encoding#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1a.cs#3)]
 [!code-vb[Conceptual.Encoding#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1a.vb#3)]  
  
<a name="Replacement"></a>   
### <a name="replacement-fallback"></a><span data-ttu-id="397b5-292">Fallback de substituição</span><span class="sxs-lookup"><span data-stu-id="397b5-292">Replacement Fallback</span></span>  
 <span data-ttu-id="397b5-293">Quando um caractere não tem uma correspondência exata do esquema de destino, mas não há nenhum caractere apropriado para o qual ele pode ser mapeado, o aplicativo pode especificar um caractere ou uma cadeia de caracteres de substituição.</span><span class="sxs-lookup"><span data-stu-id="397b5-293">When a character does not have an exact match in the target scheme, but there is no appropriate character that it can be mapped to, the application can specify a replacement character or string.</span></span> <span data-ttu-id="397b5-294">Esse é o comportamento padrão para o decodificador de Unicode, que substitui qualquer sequência de dois bytes que ele não pode decodificar por REPLACEMENT_CHARACTER (U+FFFD).</span><span class="sxs-lookup"><span data-stu-id="397b5-294">This is the default behavior for the Unicode decoder, which replaces any two-byte sequence that it cannot decode with REPLACEMENT_CHARACTER (U+FFFD).</span></span> <span data-ttu-id="397b5-295">Também é o comportamento padrão da <xref:System.Text.ASCIIEncoding> classe que substitui cada caractere que não pode codificar ou decodificar com um ponto de interrogação.</span><span class="sxs-lookup"><span data-stu-id="397b5-295">It is also the default behavior of the <xref:System.Text.ASCIIEncoding> class, which replaces each character that it cannot encode or decode with a question mark.</span></span> <span data-ttu-id="397b5-296">O exemplo a seguir ilustra a substituição de caracteres para a cadeia de caracteres Unicode do exemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="397b5-296">The following example illustrates character replacement for the Unicode string from the previous example.</span></span> <span data-ttu-id="397b5-297">Como mostra a saída, cada caractere que não puder ser decodificado em um valor de bytes ASCII é substituído por 0x3F, que é o código ASCII para um ponto de interrogação.</span><span class="sxs-lookup"><span data-stu-id="397b5-297">As the output shows, each character that cannot be decoded into an ASCII byte value is replaced by 0x3F, which is the ASCII code for a question mark.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/replacementascii.cs#2)]
 [!code-vb[Conceptual.Encoding#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/replacementascii.vb#2)]  
  
 <span data-ttu-id="397b5-298">.NET inclui o <xref:System.Text.EncoderReplacementFallback> e <xref:System.Text.DecoderReplacementFallback> classes, que substituir uma cadeia de caracteres de substituição, se um caractere não mapear exatamente na codificação ou decodificação de operação.</span><span class="sxs-lookup"><span data-stu-id="397b5-298">.NET includes the <xref:System.Text.EncoderReplacementFallback> and <xref:System.Text.DecoderReplacementFallback> classes, which substitute a replacement string if a character does not map exactly in an encoding or decoding operation.</span></span> <span data-ttu-id="397b5-299">Por padrão, essa cadeia de caracteres de substituição é um ponto de interrogação, mas você pode chamar uma sobrecarga do construtor de classes para escolher uma cadeia de caracteres diferente.</span><span class="sxs-lookup"><span data-stu-id="397b5-299">By default, this replacement string is a question mark, but you can call a class constructor overload to choose a different string.</span></span> <span data-ttu-id="397b5-300">Normalmente, a cadeia de caracteres de substituição é um único caractere, embora isso não seja um requisito.</span><span class="sxs-lookup"><span data-stu-id="397b5-300">Typically, the replacement string is a single character, although this is not a requirement.</span></span> <span data-ttu-id="397b5-301">O exemplo a seguir altera o comportamento do codificador de 1252 de página de código instanciando um <xref:System.Text.EncoderReplacementFallback> objeto que usa um asterisco (*) como uma cadeia de caracteres de substituição.</span><span class="sxs-lookup"><span data-stu-id="397b5-301">The following example changes the behavior of the code page 1252 encoder by instantiating an <xref:System.Text.EncoderReplacementFallback> object that uses an asterisk (*) as a replacement string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1a.cs#3)]
 [!code-vb[Conceptual.Encoding#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1a.vb#3)]  
  
> [!NOTE]
>  <span data-ttu-id="397b5-302">Você também pode implementar uma classe de substituição para uma codificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-302">You can also implement a replacement class for an encoding.</span></span> <span data-ttu-id="397b5-303">Para obter mais informações, consulte a seção [Implementando uma estratégia de fallback personalizada](../../../docs/standard/base-types/character-encoding.md#Custom).</span><span class="sxs-lookup"><span data-stu-id="397b5-303">For more information, see the [Implementing a Custom Fallback Strategy](../../../docs/standard/base-types/character-encoding.md#Custom) section.</span></span>  
  
 <span data-ttu-id="397b5-304">Além de PONTO DE INTERROGAÇÃO (U+003F), o CARACTERE DE SUBSTITUIÇÃO Unicode (U+FFFD) normalmente é usado como uma cadeia de caracteres de substituição, especialmente ao decodificar sequências de bytes que não podem ser convertidas com êxito em caracteres Unicode.</span><span class="sxs-lookup"><span data-stu-id="397b5-304">In addition to QUESTION MARK (U+003F), the Unicode REPLACEMENT CHARACTER (U+FFFD) is commonly used as a replacement string, particularly when decoding byte sequences that cannot be successfully translated into Unicode characters.</span></span> <span data-ttu-id="397b5-305">No entanto, você está livre para escolher qualquer cadeia de caracteres de substituição e ela pode conter vários caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-305">However, you are free to choose any replacement string, and it can contain multiple characters.</span></span>  
  
<a name="Exception"></a>   
### <a name="exception-fallback"></a><span data-ttu-id="397b5-306">Fallback de exceção</span><span class="sxs-lookup"><span data-stu-id="397b5-306">Exception Fallback</span></span>  
 <span data-ttu-id="397b5-307">Em vez de fornecer um melhor ajuste fallback ou uma cadeia de caracteres de substituição, um codificador pode gerar um <xref:System.Text.EncoderFallbackException> se não é possível codificar um conjunto de caracteres e um decodificador pode lançar um <xref:System.Text.DecoderFallbackException> se não for possível decodificar uma matriz de bytes.</span><span class="sxs-lookup"><span data-stu-id="397b5-307">Instead of providing a best-fit fallback or a replacement string, an encoder can throw an <xref:System.Text.EncoderFallbackException> if it is unable to encode a set of characters, and a decoder can throw a <xref:System.Text.DecoderFallbackException> if it is unable to decode a byte array.</span></span> <span data-ttu-id="397b5-308">Para gerar uma exceção em codificação e decodificação de operações, você deve fornecer um <xref:System.Text.EncoderExceptionFallback> objeto e um <xref:System.Text.DecoderExceptionFallback> objeto, respectivamente, para o <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-308">To throw an exception in encoding and decoding operations, you supply an <xref:System.Text.EncoderExceptionFallback> object and a <xref:System.Text.DecoderExceptionFallback> object, respectively, to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="397b5-309">O exemplo a seguir ilustra a exceção fallback com o <xref:System.Text.ASCIIEncoding> classe.</span><span class="sxs-lookup"><span data-stu-id="397b5-309">The following example illustrates exception fallback with the <xref:System.Text.ASCIIEncoding> class.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/exceptionascii.cs#4)]
 [!code-vb[Conceptual.Encoding#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/exceptionascii.vb#4)]  
  
> [!NOTE]
>  <span data-ttu-id="397b5-310">Você também pode implementar um manipulador de exceção personalizado para uma operação de codificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-310">You can also implement a custom exception handler for an encoding operation.</span></span> <span data-ttu-id="397b5-311">Para obter mais informações, consulte a seção [Implementando uma estratégia de fallback personalizada](../../../docs/standard/base-types/character-encoding.md#Custom).</span><span class="sxs-lookup"><span data-stu-id="397b5-311">For more information, see the [Implementing a Custom Fallback Strategy](../../../docs/standard/base-types/character-encoding.md#Custom) section.</span></span>  
  
 <span data-ttu-id="397b5-312">O <xref:System.Text.EncoderFallbackException> e <xref:System.Text.DecoderFallbackException> objetos fornecem as seguintes informações sobre a condição que causou a exceção:</span><span class="sxs-lookup"><span data-stu-id="397b5-312">The <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> objects provide the following information about the condition that caused the exception:</span></span>  
  
-   <span data-ttu-id="397b5-313">O <xref:System.Text.EncoderFallbackException> objeto inclui um <xref:System.Text.EncoderFallbackException.IsUnknownSurrogate%2A> método, que indica se um ou mais caracteres que não podem ser codificados representam um par substituto desconhecido (nesse caso, o método retorna `true`) ou um único caractere desconhecido (em Nesse caso, o método retorna `false`).</span><span class="sxs-lookup"><span data-stu-id="397b5-313">The <xref:System.Text.EncoderFallbackException> object includes an <xref:System.Text.EncoderFallbackException.IsUnknownSurrogate%2A> method, which indicates whether the character or characters that cannot be encoded represent an unknown surrogate pair (in which case, the method returns `true`) or an unknown single character (in which case, the method returns `false`).</span></span> <span data-ttu-id="397b5-314">Os caracteres do par substituto estão disponíveis no <xref:System.Text.EncoderFallbackException.CharUnknownHigh%2A?displayProperty=nameWithType> e <xref:System.Text.EncoderFallbackException.CharUnknownLow%2A?displayProperty=nameWithType> propriedades.</span><span class="sxs-lookup"><span data-stu-id="397b5-314">The characters in the surrogate pair are available from the <xref:System.Text.EncoderFallbackException.CharUnknownHigh%2A?displayProperty=nameWithType> and <xref:System.Text.EncoderFallbackException.CharUnknownLow%2A?displayProperty=nameWithType> properties.</span></span> <span data-ttu-id="397b5-315">O único caractere desconhecido é proveniente do <xref:System.Text.EncoderFallbackException.CharUnknown%2A?displayProperty=nameWithType> propriedade.</span><span class="sxs-lookup"><span data-stu-id="397b5-315">The unknown single character is available from the <xref:System.Text.EncoderFallbackException.CharUnknown%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="397b5-316">O <xref:System.Text.EncoderFallbackException.Index%2A?displayProperty=nameWithType> propriedade indica a posição na cadeia de caracteres em que o primeiro caractere que não pode ser codificado foi encontrado.</span><span class="sxs-lookup"><span data-stu-id="397b5-316">The <xref:System.Text.EncoderFallbackException.Index%2A?displayProperty=nameWithType> property indicates the position in the string at which the first character that could not be encoded was found.</span></span>  
  
-   <span data-ttu-id="397b5-317">O <xref:System.Text.DecoderFallbackException> objeto inclui um <xref:System.Text.DecoderFallbackException.BytesUnknown%2A> propriedade que retorna uma matriz de bytes que não pode ser decodificada.</span><span class="sxs-lookup"><span data-stu-id="397b5-317">The <xref:System.Text.DecoderFallbackException> object includes a <xref:System.Text.DecoderFallbackException.BytesUnknown%2A> property that returns an array of bytes that cannot be decoded.</span></span> <span data-ttu-id="397b5-318">O <xref:System.Text.DecoderFallbackException.Index%2A?displayProperty=nameWithType> propriedade indica a posição inicial dos bytes desconhecidos.</span><span class="sxs-lookup"><span data-stu-id="397b5-318">The <xref:System.Text.DecoderFallbackException.Index%2A?displayProperty=nameWithType> property indicates the starting position of the unknown bytes.</span></span>  
  
 <span data-ttu-id="397b5-319">Embora o <xref:System.Text.EncoderFallbackException> e <xref:System.Text.DecoderFallbackException> objetos fornecem informações de diagnósticas adequadas sobre a exceção, não fornecem acesso a codificação ou decodificação de buffer.</span><span class="sxs-lookup"><span data-stu-id="397b5-319">Although the <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> objects provide adequate diagnostic information about the exception, they do not provide access to the encoding or decoding buffer.</span></span> <span data-ttu-id="397b5-320">Portanto, eles não permitem que dados inválidos sejam substituídos ou corrigidos dentro do método de codificação ou de decodificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-320">Therefore, they do not allow invalid data to be replaced or corrected within the encoding or decoding method.</span></span>  
  
<a name="Custom"></a>   
## <a name="implementing-a-custom-fallback-strategy"></a><span data-ttu-id="397b5-321">Implementando uma estratégia de fallback personalizada</span><span class="sxs-lookup"><span data-stu-id="397b5-321">Implementing a Custom Fallback Strategy</span></span>  
 <span data-ttu-id="397b5-322">Além do mapeamento de melhor ajuste implementado internamente por páginas de código, o .NET inclui as seguintes classes para implementar uma estratégia de fallback:</span><span class="sxs-lookup"><span data-stu-id="397b5-322">In addition to the best-fit mapping that is implemented internally by code pages, .NET includes the following classes for implementing a fallback strategy:</span></span>  
  
-   <span data-ttu-id="397b5-323">Use <xref:System.Text.EncoderReplacementFallback> e <xref:System.Text.EncoderReplacementFallbackBuffer> para substituir caracteres em codificação de operações.</span><span class="sxs-lookup"><span data-stu-id="397b5-323">Use <xref:System.Text.EncoderReplacementFallback> and <xref:System.Text.EncoderReplacementFallbackBuffer> to replace characters in encoding operations.</span></span>  
  
-   <span data-ttu-id="397b5-324">Use <xref:System.Text.DecoderReplacementFallback> e <xref:System.Text.DecoderReplacementFallbackBuffer> para substituir caracteres em operações de decodificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-324">Use <xref:System.Text.DecoderReplacementFallback> and <xref:System.Text.DecoderReplacementFallbackBuffer> to replace characters in decoding operations.</span></span>  
  
-   <span data-ttu-id="397b5-325">Use <xref:System.Text.EncoderExceptionFallback> e <xref:System.Text.EncoderExceptionFallbackBuffer> para lançar uma <xref:System.Text.EncoderFallbackException> quando um caractere não pode ser codificado.</span><span class="sxs-lookup"><span data-stu-id="397b5-325">Use <xref:System.Text.EncoderExceptionFallback> and <xref:System.Text.EncoderExceptionFallbackBuffer> to throw an <xref:System.Text.EncoderFallbackException> when a character cannot be encoded.</span></span>  
  
-   <span data-ttu-id="397b5-326">Use <xref:System.Text.DecoderExceptionFallback> e <xref:System.Text.DecoderExceptionFallbackBuffer> para lançar uma <xref:System.Text.DecoderFallbackException> quando um caractere não pode ser decodificado.</span><span class="sxs-lookup"><span data-stu-id="397b5-326">Use <xref:System.Text.DecoderExceptionFallback> and <xref:System.Text.DecoderExceptionFallbackBuffer> to throw a <xref:System.Text.DecoderFallbackException> when a character cannot be decoded.</span></span>  
  
 <span data-ttu-id="397b5-327">Além disso, você pode implementar uma solução personalizada que usa o fallback de melhor ajuste, fallback de substituição ou fallback de exceção seguindo estas etapas:</span><span class="sxs-lookup"><span data-stu-id="397b5-327">In addition, you can implement a custom solution that uses best-fit fallback, replacement fallback, or exception fallback, by following these steps:</span></span>  
  
1.  <span data-ttu-id="397b5-328">Derive uma classe de <xref:System.Text.EncoderFallback> para operações de codificação e de <xref:System.Text.DecoderFallback> para operações de decodificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-328">Derive a class from <xref:System.Text.EncoderFallback> for encoding operations, and from <xref:System.Text.DecoderFallback> for decoding operations.</span></span>  
  
2.  <span data-ttu-id="397b5-329">Derive uma classe de <xref:System.Text.EncoderFallbackBuffer> para operações de codificação e de <xref:System.Text.DecoderFallbackBuffer> para operações de decodificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-329">Derive a class from <xref:System.Text.EncoderFallbackBuffer> for encoding operations, and from <xref:System.Text.DecoderFallbackBuffer> for decoding operations.</span></span>  
  
3.  <span data-ttu-id="397b5-330">Se fallback, exceção predefinida <xref:System.Text.EncoderFallbackException> e <xref:System.Text.DecoderFallbackException> classes não atenderem às suas necessidades, derive uma classe de um objeto de exceção como <xref:System.Exception> ou <xref:System.ArgumentException>.</span><span class="sxs-lookup"><span data-stu-id="397b5-330">For exception fallback, if the predefined <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> classes do not meet your needs, derive a class from an exception object such as <xref:System.Exception> or <xref:System.ArgumentException>.</span></span>  
  
### <a name="deriving-from-encoderfallback-or-decoderfallback"></a><span data-ttu-id="397b5-331">Derivando de EncoderFallback ou DecoderFallback</span><span class="sxs-lookup"><span data-stu-id="397b5-331">Deriving from EncoderFallback or DecoderFallback</span></span>  
 <span data-ttu-id="397b5-332">Para implementar uma solução personalizada de fallback, você deve criar uma classe que herda de <xref:System.Text.EncoderFallback> para operações de codificação e de <xref:System.Text.DecoderFallback> para operações de decodificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-332">To implement a custom fallback solution, you must create a class that inherits from <xref:System.Text.EncoderFallback> for encoding operations, and from <xref:System.Text.DecoderFallback> for decoding operations.</span></span> <span data-ttu-id="397b5-333">Instâncias dessas classes são passadas para o <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> método e serve como um intermediário entre a classe de codificação e a implementação de fallback.</span><span class="sxs-lookup"><span data-stu-id="397b5-333">Instances of these classes are passed to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method and serve as the intermediary between the encoding class and the fallback implementation.</span></span>  
  
 <span data-ttu-id="397b5-334">Quando você cria uma solução de fallback personalizada para um codificador ou um decodificador, você deve implementar os seguintes membros:</span><span class="sxs-lookup"><span data-stu-id="397b5-334">When you create a custom fallback solution for an encoder or decoder, you must implement the following members:</span></span>  
  
-   <span data-ttu-id="397b5-335">O <xref:System.Text.EncoderFallback.MaxCharCount%2A?displayProperty=nameWithType> ou <xref:System.Text.DecoderFallback.MaxCharCount%2A?displayProperty=nameWithType> propriedade, que retorna o número máximo possível de caracteres que o pode fallback melhor ajuste, substituição ou exceção de retorno para substituir um único caractere.</span><span class="sxs-lookup"><span data-stu-id="397b5-335">The <xref:System.Text.EncoderFallback.MaxCharCount%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallback.MaxCharCount%2A?displayProperty=nameWithType> property, which returns the maximum possible number of characters that the best-fit, replacement, or exception fallback can return to replace a single character.</span></span> <span data-ttu-id="397b5-336">Para um fallback de exceção personalizado, seu valor é zero.</span><span class="sxs-lookup"><span data-stu-id="397b5-336">For a custom exception fallback, its value is zero.</span></span>  
  
-   <span data-ttu-id="397b5-337">O <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> ou <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> método, que retorna personalizados <xref:System.Text.EncoderFallbackBuffer> ou <xref:System.Text.DecoderFallbackBuffer> implementação.</span><span class="sxs-lookup"><span data-stu-id="397b5-337">The <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method, which returns your custom <xref:System.Text.EncoderFallbackBuffer> or <xref:System.Text.DecoderFallbackBuffer> implementation.</span></span> <span data-ttu-id="397b5-338">O método é chamado pelo codificador quando ele encontra o primeiro caractere que ele não consegue codificar com êxito ou pelo decodificador quando ele encontra o primeiro byte que ele não consegue decodificar com êxito.</span><span class="sxs-lookup"><span data-stu-id="397b5-338">The method is called by the encoder when it encounters the first character that it is unable to successfully encode, or by the decoder when it encounters the first byte that it is unable to successfully decode.</span></span>  
  
### <a name="deriving-from-encoderfallbackbuffer-or-decoderfallbackbuffer"></a><span data-ttu-id="397b5-339">Derivando de EncoderFallbackBuffer ou DecoderFallbackBuffer</span><span class="sxs-lookup"><span data-stu-id="397b5-339">Deriving from EncoderFallbackBuffer or DecoderFallbackBuffer</span></span>  
 <span data-ttu-id="397b5-340">Para implementar uma solução personalizada de fallback, você também deve criar uma classe que herda de <xref:System.Text.EncoderFallbackBuffer> para operações de codificação e de <xref:System.Text.DecoderFallbackBuffer> para operações de decodificação.</span><span class="sxs-lookup"><span data-stu-id="397b5-340">To implement a custom fallback solution, you must also create a class that inherits from <xref:System.Text.EncoderFallbackBuffer> for encoding operations, and from <xref:System.Text.DecoderFallbackBuffer> for decoding operations.</span></span> <span data-ttu-id="397b5-341">Instâncias dessas classes são retornadas pelo <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A> método o <xref:System.Text.EncoderFallback> e <xref:System.Text.DecoderFallback> classes.</span><span class="sxs-lookup"><span data-stu-id="397b5-341">Instances of these classes are returned by the <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A> method  of the <xref:System.Text.EncoderFallback> and <xref:System.Text.DecoderFallback> classes.</span></span> <span data-ttu-id="397b5-342">O <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> método é chamado pelo codificador quando ele encontra o primeiro caractere que não é capaz de codificar, e o <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> método é chamado pelo decodificador quando ele encontra um ou mais bytes que não é capaz de decodificar.</span><span class="sxs-lookup"><span data-stu-id="397b5-342">The <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method is called by the encoder when it encounters the first character that it is not able to encode, and the <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method is called by the decoder when it encounters one or more bytes that it is not able to decode.</span></span> <span data-ttu-id="397b5-343">O <xref:System.Text.EncoderFallbackBuffer> e <xref:System.Text.DecoderFallbackBuffer> classes fornecem a implementação de fallback.</span><span class="sxs-lookup"><span data-stu-id="397b5-343">The <xref:System.Text.EncoderFallbackBuffer> and <xref:System.Text.DecoderFallbackBuffer> classes provide the fallback implementation.</span></span> <span data-ttu-id="397b5-344">Cada instância representa um buffer que contém os caracteres de fallback que substituirão o caractere que não pode ser codificado ou a sequência de bytes que não pode ser decodificada.</span><span class="sxs-lookup"><span data-stu-id="397b5-344">Each instance represents a buffer that contains the fallback characters that will replace the character that cannot be encoded or the byte sequence that cannot be decoded.</span></span>  
  
 <span data-ttu-id="397b5-345">Quando você cria uma solução de fallback personalizada para um codificador ou um decodificador, você deve implementar os seguintes membros:</span><span class="sxs-lookup"><span data-stu-id="397b5-345">When you create a custom fallback solution for an encoder or decoder, you must implement the following members:</span></span>  
  
-   <span data-ttu-id="397b5-346">O <xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> ou <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-346">The <xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="397b5-347"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType>é chamado pelo codificador para fornecer informações sobre o caractere que não é possível codificar o buffer de fallback.</span><span class="sxs-lookup"><span data-stu-id="397b5-347"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> is called by the encoder to provide the fallback buffer with information about the character that it cannot encode.</span></span> <span data-ttu-id="397b5-348">Como o caractere a ser codificado pode ser um par alternativo, esse método está sobrecarregado.</span><span class="sxs-lookup"><span data-stu-id="397b5-348">Because the character to be encoded may be a surrogate pair, this method is overloaded.</span></span> <span data-ttu-id="397b5-349">Uma sobrecarga é passada para o caractere a ser codificado e para o seu índice na cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-349">One overload is passed the character to be encoded and its index in the string.</span></span> <span data-ttu-id="397b5-350">A segunda sobrecarga é passada para os substitutos altos e baixos juntamente com seu índice na cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="397b5-350">The second overload is passed the high and low surrogate along with its index in the string.</span></span> <span data-ttu-id="397b5-351">O <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> método é chamado pelo decodificador para fornecer informações sobre os bytes que não é possível decodificar o buffer de fallback.</span><span class="sxs-lookup"><span data-stu-id="397b5-351">The <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> method is called by the decoder to provide the fallback buffer with information about the bytes that it cannot decode.</span></span> <span data-ttu-id="397b5-352">Esse método recebe uma matriz de bytes que ele não consegue decodificar, juntamente com o índice do primeiro byte.</span><span class="sxs-lookup"><span data-stu-id="397b5-352">This method is passed an array of bytes that it cannot decode, along with the index of the first byte.</span></span> <span data-ttu-id="397b5-353">O método de fallback deverá retornar `true` se o buffer de fallback conseguir fornecer caracteres de melhor ajuste ou de substituição; caso contrário, ele deverá retornar `false`.</span><span class="sxs-lookup"><span data-stu-id="397b5-353">The fallback method should return `true` if the fallback buffer can supply a best-fit or replacement character or characters; otherwise, it should return `false`.</span></span> <span data-ttu-id="397b5-354">Para um fallback de exceção, o método de fallback deve lançar uma exceção.</span><span class="sxs-lookup"><span data-stu-id="397b5-354">For an exception fallback, the fallback method should throw an exception.</span></span>  
  
-   <span data-ttu-id="397b5-355">O <xref:System.Text.EncoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> ou <xref:System.Text.DecoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> método, que é chamado repetidamente pelo codificador ou decodificador para obter o próximo caractere do buffer de fallback.</span><span class="sxs-lookup"><span data-stu-id="397b5-355">The <xref:System.Text.EncoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> method, which is called repeatedly by the encoder or decoder to get the next character from the fallback buffer.</span></span> <span data-ttu-id="397b5-356">Quando todos os caracteres de fallback tiverem sido retornados, o método deverá retornar U+0000.</span><span class="sxs-lookup"><span data-stu-id="397b5-356">When all fallback characters have been returned, the method should return U+0000.</span></span>  
  
-   <span data-ttu-id="397b5-357">O <xref:System.Text.EncoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> ou <xref:System.Text.DecoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> propriedade, que retorna o número de caracteres restantes no buffer de fallback.</span><span class="sxs-lookup"><span data-stu-id="397b5-357">The <xref:System.Text.EncoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> property, which returns the number of characters remaining in the fallback buffer.</span></span>  
  
-   <span data-ttu-id="397b5-358">O <xref:System.Text.EncoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> ou <xref:System.Text.DecoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> método, que move a posição atual no buffer de fallback para o caractere anterior.</span><span class="sxs-lookup"><span data-stu-id="397b5-358">The <xref:System.Text.EncoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> method, which moves the current position in the fallback buffer to the previous character.</span></span>  
  
-   <span data-ttu-id="397b5-359">O <xref:System.Text.EncoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> ou <xref:System.Text.DecoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> método, que reinicializa o buffer de fallback.</span><span class="sxs-lookup"><span data-stu-id="397b5-359">The <xref:System.Text.EncoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> method, which reinitializes the fallback buffer.</span></span>  
  
 <span data-ttu-id="397b5-360">Se a implementação de fallback é uma alternativa melhor ajuste ou fallback substituição, as classes derivadas de <xref:System.Text.EncoderFallbackBuffer> e <xref:System.Text.DecoderFallbackBuffer> também manter dois campos de instância privada: o número exato de caracteres no buffer; e o índice do próximo caractere no buffer para retornar.</span><span class="sxs-lookup"><span data-stu-id="397b5-360">If the fallback implementation is a best-fit fallback or a replacement fallback, the classes derived from <xref:System.Text.EncoderFallbackBuffer> and <xref:System.Text.DecoderFallbackBuffer> also maintain two private instance fields: the exact number of characters in the buffer; and the index of the next character in the buffer to return.</span></span>  
  
### <a name="an-encoderfallback-example"></a><span data-ttu-id="397b5-361">Um exemplo de EncoderFallback</span><span class="sxs-lookup"><span data-stu-id="397b5-361">An EncoderFallback Example</span></span>  
 <span data-ttu-id="397b5-362">Um exemplo anterior usava o fallback de substituição para substituir caracteres Unicode que não correspondiam aos caracteres ASCII por um asterisco (*).</span><span class="sxs-lookup"><span data-stu-id="397b5-362">An earlier example used replacement fallback to replace Unicode characters that did not correspond to ASCII characters with an asterisk (*).</span></span> <span data-ttu-id="397b5-363">O exemplo a seguir usa uma implementação de fallback de melhor ajuste personalizada em vez de fornecer um melhor mapeamento de caracteres não ASCII.</span><span class="sxs-lookup"><span data-stu-id="397b5-363">The following example uses a custom best-fit fallback implementation instead to provide a better mapping of non-ASCII characters.</span></span>  
  
 <span data-ttu-id="397b5-364">O código a seguir define uma classe denominada `CustomMapper` que é derivado de <xref:System.Text.EncoderFallback> para lidar com o mapeamento de melhor ajuste de caracteres não-ASCII.</span><span class="sxs-lookup"><span data-stu-id="397b5-364">The following code defines a class named `CustomMapper` that is derived from <xref:System.Text.EncoderFallback> to handle the best-fit mapping of non-ASCII characters.</span></span> <span data-ttu-id="397b5-365">Seu `CreateFallbackBuffer` método retorna um `CustomMapperFallbackBuffer` object, que fornece o <xref:System.Text.EncoderFallbackBuffer> implementação.</span><span class="sxs-lookup"><span data-stu-id="397b5-365">Its `CreateFallbackBuffer` method returns a `CustomMapperFallbackBuffer` object, which provides the <xref:System.Text.EncoderFallbackBuffer> implementation.</span></span> <span data-ttu-id="397b5-366">O `CustomMapper` classe usa um <xref:System.Collections.Generic.Dictionary%602> objeto para armazenar os mapeamentos de caracteres de Unicode sem suporte (o valor da chave) e seus caracteres de 8 bits correspondentes (que são armazenados em dois bytes consecutivas em um inteiro de 64 bits).</span><span class="sxs-lookup"><span data-stu-id="397b5-366">The `CustomMapper` class uses a <xref:System.Collections.Generic.Dictionary%602> object to store the mappings of unsupported Unicode characters (the key value) and their corresponding 8-bit characters (which are stored in two consecutive bytes in a 64-bit integer).</span></span> <span data-ttu-id="397b5-367">Para disponibilizar esse mapeamento ao buffer de fallback, a instância `CustomMapper` é passada como um parâmetro para o construtor de classe `CustomMapperFallbackBuffer`.</span><span class="sxs-lookup"><span data-stu-id="397b5-367">To make this mapping available to the fallback buffer, the `CustomMapper` instance is passed as a parameter to the `CustomMapperFallbackBuffer` class constructor.</span></span> <span data-ttu-id="397b5-368">Como o mapeamento mais longo é a cadeia de caracteres "INF" para o caractere Unicode U+221E, a propriedade `MaxCharCount` retorna 3.</span><span class="sxs-lookup"><span data-stu-id="397b5-368">Because the longest mapping is the string "INF" for the Unicode character U+221E, the `MaxCharCount` property returns 3.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#5)]
 [!code-vb[Conceptual.Encoding#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#5)]  
  
 <span data-ttu-id="397b5-369">O código a seguir define o `CustomMapperFallbackBuffer` classe, que é derivado de <xref:System.Text.EncoderFallbackBuffer>.</span><span class="sxs-lookup"><span data-stu-id="397b5-369">The following code defines the `CustomMapperFallbackBuffer` class, which is derived from <xref:System.Text.EncoderFallbackBuffer>.</span></span> <span data-ttu-id="397b5-370">O dicionário que contém mapeamentos de melhor ajuste e definido na instância `CustomMapper` está disponível no seu construtor de classe.</span><span class="sxs-lookup"><span data-stu-id="397b5-370">The dictionary that contains best-fit mappings and that is defined in the `CustomMapper` instance is available from its class constructor.</span></span> <span data-ttu-id="397b5-371">Seu método `Fallback` retornará `true` se qualquer um dos caracteres Unicode que o codificador ASCII não conseguir codificar forem definidos no dicionário de mapeamento; caso contrário, retornará `false`.</span><span class="sxs-lookup"><span data-stu-id="397b5-371">Its `Fallback` method returns `true` if any of the Unicode characters that the ASCII encoder cannot encode are defined in the mapping dictionary; otherwise, it returns `false`.</span></span> <span data-ttu-id="397b5-372">Para cada fallback, a variável `count` privada indica o número de caracteres que continuam sendo retornados e a variável `index` privada indica a posição no buffer de cadeia de caracteres, `charsToReturn`, do próximo caractere a ser retornado.</span><span class="sxs-lookup"><span data-stu-id="397b5-372">For each fallback, the private `count` variable indicates the number of characters that remain to be returned, and the private `index` variable indicates the position in the string buffer, `charsToReturn`, of the next character to return.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#6)]
 [!code-vb[Conceptual.Encoding#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#6)]  
  
 <span data-ttu-id="397b5-373">O código a seguir instancia o `CustomMapper` do objeto e passa uma instância dele para o <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="397b5-373">The following code then instantiates the `CustomMapper` object and passes an instance of it to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="397b5-374">A saída indica que a implementação de fallback de melhor ajuste lida com êxito com os três caracteres não ASCII na cadeia de caracteres original.</span><span class="sxs-lookup"><span data-stu-id="397b5-374">The output indicates that the best-fit fallback implementation successfully handles the three non-ASCII characters in the original string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#7)]
 [!code-vb[Conceptual.Encoding#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#7)]  
  
## <a name="see-also"></a><span data-ttu-id="397b5-375">Consulte também</span><span class="sxs-lookup"><span data-stu-id="397b5-375">See Also</span></span>  
 <xref:System.Text.Encoder>  
 <xref:System.Text.Decoder>  
 <xref:System.Text.DecoderFallback>  
 <xref:System.Text.Encoding>  
 <xref:System.Text.EncoderFallback>  
 [<span data-ttu-id="397b5-376">Globalização e localização</span><span class="sxs-lookup"><span data-stu-id="397b5-376">Globalization and Localization</span></span>](../../../docs/standard/globalization-localization/index.md)
