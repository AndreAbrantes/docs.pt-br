---
title: Fluxo de dados (Task Parallel Library)
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Task Parallel Library, dataflows
- TPL dataflow library
ms.assetid: 643575d0-d26d-4c35-8de7-a9c403e97dd6
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: d44ec0e0601383133e6c59e44cd81031918d4b6d
ms.sourcegitcommit: efff8f331fd9467f093f8ab8d23a203d6ecb5b60
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/02/2018
ms.locfileid: "43385852"
---
# <a name="dataflow-task-parallel-library"></a><span data-ttu-id="e8786-102">Fluxo de dados (Task Parallel Library)</span><span class="sxs-lookup"><span data-stu-id="e8786-102">Dataflow (Task Parallel Library)</span></span>
<a name="top"></a> <span data-ttu-id="e8786-103">A TPL (biblioteca de paralelismo de tarefas) fornece componentes de fluxo de dados para ajudar a aumentar a robustez de aplicativos habilitados para simultaneidade.</span><span class="sxs-lookup"><span data-stu-id="e8786-103">The Task Parallel Library (TPL) provides dataflow components to help increase the robustness of concurrency-enabled applications.</span></span> <span data-ttu-id="e8786-104">Esses componentes de fluxo de dados são coletivamente chamados de *biblioteca de fluxos de dados TPL*.</span><span class="sxs-lookup"><span data-stu-id="e8786-104">These dataflow components are collectively referred to as the *TPL Dataflow Library*.</span></span> <span data-ttu-id="e8786-105">Esse modelo de fluxo de dados promove programação baseada em ator que fornece transmissão de mensagem no processo para fluxo de dados de alta granularidade e tarefas de pipelining.</span><span class="sxs-lookup"><span data-stu-id="e8786-105">This dataflow model promotes actor-based programming by providing in-process message passing for coarse-grained dataflow and pipelining tasks.</span></span> <span data-ttu-id="e8786-106">Os componentes de fluxo de dados baseiam-se nos tipos e na infraestrutura de agendamento da TPL e integram-se ao suporte às linguagens C#, Visual Basic e F# para programação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="e8786-106">The dataflow components build on the types and scheduling infrastructure of the TPL and integrate with the C#, Visual Basic, and F# language support for asynchronous programming.</span></span> <span data-ttu-id="e8786-107">Esses componentes do fluxo de dados são úteis quando você tem várias operações que devem se comunicar umas com as outras de modo assíncrono ou quando você deseja processar dados à medida que são disponibilizados.</span><span class="sxs-lookup"><span data-stu-id="e8786-107">These dataflow components are useful when you have multiple operations that must communicate with one another asynchronously or when you want to process data as it becomes available.</span></span> <span data-ttu-id="e8786-108">Por exemplo, considere um aplicativo que processa dados de imagem de uma webcam.</span><span class="sxs-lookup"><span data-stu-id="e8786-108">For example, consider an application that processes image data from a web camera.</span></span> <span data-ttu-id="e8786-109">Usando o modelo de fluxo de dados, o aplicativo pode processar quadros de imagem assim que eles se tornarem disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e8786-109">By using the dataflow model, the application can process image frames as they become available.</span></span> <span data-ttu-id="e8786-110">Se o aplicativo aprimora os quadros de imagem, por exemplo, executando a redução de olhos vermelhos ou correção de luz, você pode criar um *pipeline* dos componentes de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-110">If the application enhances image frames, for example, by performing light correction or red-eye reduction, you can create a *pipeline* of dataflow components.</span></span> <span data-ttu-id="e8786-111">Cada estágio do pipeline pode usar mais funcionalidade de paralelismo de alta granularidade, assim como a funcionalidade fornecida pela TPL, para transformar a imagem.</span><span class="sxs-lookup"><span data-stu-id="e8786-111">Each stage of the pipeline might use more coarse-grained parallelism functionality, such as the functionality that is provided by the TPL, to transform the image.</span></span>  
  
 <span data-ttu-id="e8786-112">Este documento fornece uma visão geral da biblioteca de fluxos de dados TPL.</span><span class="sxs-lookup"><span data-stu-id="e8786-112">This document provides an overview of the TPL Dataflow Library.</span></span> <span data-ttu-id="e8786-113">Ele descreve o modelo de programação, os tipos de blocos de fluxo de dados predefinidos e como configurar os blocos de fluxo de dados para atender os requisitos específicos de seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="e8786-113">It describes the programming model, the predefined dataflow block types, and how to configure dataflow blocks to meet the specific requirements of your applications.</span></span>  

[!INCLUDE [tpl-install-instructions](../../../includes/tpl-install-instructions.md)]
  
 <span data-ttu-id="e8786-114">Este documento contém as seguintes seções:</span><span class="sxs-lookup"><span data-stu-id="e8786-114">This document contains the following sections:</span></span>  
  
-   [<span data-ttu-id="e8786-115">Modelo de programação</span><span class="sxs-lookup"><span data-stu-id="e8786-115">Programming Model</span></span>](#model)  
  
-   [<span data-ttu-id="e8786-116">Tipos de bloco de fluxo de dados predefinidos</span><span class="sxs-lookup"><span data-stu-id="e8786-116">Predefined Dataflow Block Types</span></span>](#predefined_types)  
  
-   [<span data-ttu-id="e8786-117">Configurar o comportamento de bloco de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e8786-117">Configuring Dataflow Block Behavior</span></span>](#behavior)  
  
-   [<span data-ttu-id="e8786-118">Blocos de fluxo de dados personalizados</span><span class="sxs-lookup"><span data-stu-id="e8786-118">Custom Dataflow Blocks</span></span>](#custom)  
  
<a name="model"></a>   
## <a name="programming-model"></a><span data-ttu-id="e8786-119">Modelo de Programação</span><span class="sxs-lookup"><span data-stu-id="e8786-119">Programming Model</span></span>  
 <span data-ttu-id="e8786-120">A biblioteca de fluxos de dados TPL fornece uma base para a transmissão de mensagens e a paralelização de aplicativos com uso intensivo de CPU e de E/S que têm alta taxa de transferência e baixa latência.</span><span class="sxs-lookup"><span data-stu-id="e8786-120">The TPL Dataflow Library provides a foundation for message passing and parallelizing CPU-intensive and I/O-intensive applications that have high throughput and low latency.</span></span> <span data-ttu-id="e8786-121">Ela também fornece controle explícito sobre como os dados são armazenados em buffer e se movem pelo sistema.</span><span class="sxs-lookup"><span data-stu-id="e8786-121">It also gives you explicit control over how data is buffered and moves around the system.</span></span> <span data-ttu-id="e8786-122">Para entender melhor o modelo de programação de fluxo de dados, considere um aplicativo que carrega imagens do disco de forma assíncrona e cria uma composição dessas imagens.</span><span class="sxs-lookup"><span data-stu-id="e8786-122">To better understand the dataflow programming model, consider an application that asynchronously loads images from disk and creates a composite of those images.</span></span> <span data-ttu-id="e8786-123">Modelos de programação tradicionais normalmente exigem que você use retornos de chamada e objetos de sincronização, tais como bloqueios, para coordenar tarefas e acesso a dados compartilhados.</span><span class="sxs-lookup"><span data-stu-id="e8786-123">Traditional programming models typically require that you use callbacks and synchronization objects, such as locks, to coordinate tasks and access to shared data.</span></span> <span data-ttu-id="e8786-124">Usando o modelo de programação de fluxo de dados, você pode criar objetos de fluxo de dados que processam imagens conforme elas são lidas do disco.</span><span class="sxs-lookup"><span data-stu-id="e8786-124">By using the dataflow programming model, you can create dataflow objects that process images as they are read from disk.</span></span> <span data-ttu-id="e8786-125">No modelo de fluxo de dados, você declara como os dados serão manipulados quando se tornarem disponíveis e também quaisquer eventuais dependências entre os dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-125">Under the dataflow model, you declare how data is handled when it becomes available, and also any dependencies between data.</span></span> <span data-ttu-id="e8786-126">Já que o tempo de execução gerencia as dependências entre os dados, muitas vezes você pode evitar a necessidade de sincronizar o acesso aos dados compartilhados.</span><span class="sxs-lookup"><span data-stu-id="e8786-126">Because the runtime manages dependencies between data, you can often avoid the requirement to synchronize access to shared data.</span></span> <span data-ttu-id="e8786-127">Além disso, já que o tempo de execução agenda o trabalho com base na chegada assíncrona de dados, o fluxo de dados pode aumentar a capacidade de resposta e a taxa de transferência ao gerenciar com eficiência os threads subjacentes.</span><span class="sxs-lookup"><span data-stu-id="e8786-127">In addition, because the runtime schedules work based on the asynchronous arrival of data, dataflow can improve responsiveness and throughput by efficiently managing the underlying threads.</span></span> <span data-ttu-id="e8786-128">Para obter um exemplo que usa o modelo de programação de fluxo de dados para implementar o processamento de imagens em um aplicativo Windows Forms, consulte [Passo a passo: usando um fluxo de dados em um Aplicativo do Windows Forms](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-128">For an example that uses the dataflow programming model to implement image processing in a Windows Forms application, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
### <a name="sources-and-targets"></a><span data-ttu-id="e8786-129">Origens e Destinos</span><span class="sxs-lookup"><span data-stu-id="e8786-129">Sources and Targets</span></span>  
 <span data-ttu-id="e8786-130">A biblioteca de fluxos de dados TPL consiste em *blocos de fluxo de dados*, que são estruturas de dados que armazenam dados em buffer e os processam.</span><span class="sxs-lookup"><span data-stu-id="e8786-130">The TPL Dataflow Library consists of *dataflow blocks*, which are data structures that buffer and process data.</span></span> <span data-ttu-id="e8786-131">A TPL define três tipos de blocos de fluxo de dados: *blocos de origem*, *blocos de destino* e *blocos propagadores*.</span><span class="sxs-lookup"><span data-stu-id="e8786-131">The TPL defines three kinds of dataflow blocks: *source blocks*, *target blocks*, and *propagator blocks*.</span></span> <span data-ttu-id="e8786-132">Um bloco de origem atua como uma fonte de dados e possibilita a leitura de dados presentes nele.</span><span class="sxs-lookup"><span data-stu-id="e8786-132">A source block acts as a source of data and can be read from.</span></span> <span data-ttu-id="e8786-133">Um bloco de destino atua como um receptor de dados e possibilita que nele sejam gravados dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-133">A target block acts as a receiver of data and can be written to.</span></span> <span data-ttu-id="e8786-134">Um bloco propagador atua como um bloco de origem e um bloco de destino e possibilita tanto leitura quanto gravação.</span><span class="sxs-lookup"><span data-stu-id="e8786-134">A propagator block acts as both a source block and a target block, and can be read from and written to.</span></span> <span data-ttu-id="e8786-135">A TPL define a interface <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601?displayProperty=nameWithType> para representar origens, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601?displayProperty=nameWithType> para representar destinos e <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602?displayProperty=nameWithType> para representar propagadores.</span><span class="sxs-lookup"><span data-stu-id="e8786-135">The TPL defines the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601?displayProperty=nameWithType> interface to represent sources, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601?displayProperty=nameWithType> to represent targets, and <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602?displayProperty=nameWithType> to represent propagators.</span></span> <span data-ttu-id="e8786-136"><xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602> herda de <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> e de <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="e8786-136"><xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602> inherits from both <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601>, and <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span></span>  
  
 <span data-ttu-id="e8786-137">A Biblioteca de fluxos de dados TPL fornece vários tipos de bloco de fluxo de dados predefinidos que implementam as interfaces <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601>, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> e <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="e8786-137">The TPL Dataflow Library provides several predefined dataflow block types that implement the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601>, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>, and <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602> interfaces.</span></span> <span data-ttu-id="e8786-138">Esses tipos de bloco de fluxo de dados são descritos neste documento na seção [Tipos de bloco de fluxo de dados predefinidos](#predefined_types).</span><span class="sxs-lookup"><span data-stu-id="e8786-138">These dataflow block types are described in this document in the section [Predefined Dataflow Block Types](#predefined_types).</span></span>  
  
### <a name="connecting-blocks"></a><span data-ttu-id="e8786-139">Conectar blocos</span><span class="sxs-lookup"><span data-stu-id="e8786-139">Connecting Blocks</span></span>  
 <span data-ttu-id="e8786-140">Você pode conectar blocos de fluxo de dados para formar *pipelines*, que são sequências lineares de blocos de fluxo de dados, ou então *redes*, que são gráficos de blocos de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-140">You can connect dataflow blocks to form *pipelines*, which are linear sequences of dataflow blocks, or *networks*, which are graphs of dataflow blocks.</span></span> <span data-ttu-id="e8786-141">Um pipeline é uma forma de rede.</span><span class="sxs-lookup"><span data-stu-id="e8786-141">A pipeline is one form of network.</span></span> <span data-ttu-id="e8786-142">Em uma rede ou pipeline, origens propagam dados assincronamente para destinos assim que os dados ficam disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e8786-142">In a pipeline or network, sources asynchronously propagate data to targets as that data becomes available.</span></span> <span data-ttu-id="e8786-143">O método <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A?displayProperty=nameWithType> vincula um bloco de fluxo de dados de origem a um bloco de destino.</span><span class="sxs-lookup"><span data-stu-id="e8786-143">The <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A?displayProperty=nameWithType> method links a source dataflow block to a target block.</span></span> <span data-ttu-id="e8786-144">Uma origem pode ser vinculada a zero ou mais destinos, enquanto os destinos podem ser vinculados de zero ou mais origens.</span><span class="sxs-lookup"><span data-stu-id="e8786-144">A source can be linked to zero or more targets; targets can be linked from zero or more sources.</span></span> <span data-ttu-id="e8786-145">Você pode adicionar ou remover blocos de fluxo de dados para ou de um pipeline ou rede simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="e8786-145">You can add or remove dataflow blocks to or from a pipeline or network concurrently.</span></span> <span data-ttu-id="e8786-146">Os tipos de bloco de fluxo de dados predefinidos tratam de todos os aspectos de acesso thread-safe de vincular e desvincular.</span><span class="sxs-lookup"><span data-stu-id="e8786-146">The predefined dataflow block types handle all thread-safety aspects of linking and unlinking.</span></span>  
  
 <span data-ttu-id="e8786-147">Para obter um exemplo que conecta os blocos de fluxo de dados para formar um pipeline básico, consulte [Passo a passo: criando um pipeline de fluxo de dados](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-147">For an example that connects dataflow blocks to form a basic pipeline, see [Walkthrough: Creating a Dataflow Pipeline](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md).</span></span> <span data-ttu-id="e8786-148">Para obter um exemplo que conecta os blocos de fluxo de dados para formar uma rede mais complexa, consulte [Passo a passo: usando o fluxo de dados em um Aplicativo do Windows Forms](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-148">For an example that connects dataflow blocks to form a more complex network, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span> <span data-ttu-id="e8786-149">Para obter um exemplo que desvincula um destino de uma origem depois que a origem oferece uma mensagem ao destino, consulte [Como desvincular blocos de fluxo de dados](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-149">For an example that unlinks a target from a source after the source offers the target a message, see [How to: Unlink Dataflow Blocks](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md).</span></span>  
  
#### <a name="filtering"></a><span data-ttu-id="e8786-150">Filtragem</span><span class="sxs-lookup"><span data-stu-id="e8786-150">Filtering</span></span>  
 <span data-ttu-id="e8786-151">Ao chamar o método <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A?displayProperty=nameWithType> para vincular uma origem a um destino, você pode fornecer um representante que determina se o bloco de destino aceita ou rejeita uma mensagem com base no valor dela.</span><span class="sxs-lookup"><span data-stu-id="e8786-151">When you call the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A?displayProperty=nameWithType> method to link a source to a target, you can supply a delegate that determines whether the target block accepts or rejects a message based on the value of that message.</span></span> <span data-ttu-id="e8786-152">Esse mecanismo de filtragem é uma maneira útil para garantir que um bloco de fluxo de dados receba apenas determinados valores.</span><span class="sxs-lookup"><span data-stu-id="e8786-152">This filtering mechanism is a useful way to guarantee that a dataflow block receives only certain values.</span></span> <span data-ttu-id="e8786-153">Para a maioria dos tipos de bloco de fluxo de dados predefinidos, se um bloco de origem estiver conectado a vários blocos de destino, quando um bloco de destino rejeitar uma mensagem, a origem oferecerá essa mensagem para o próximo destino.</span><span class="sxs-lookup"><span data-stu-id="e8786-153">For most of the predefined dataflow block types, if a source block is connected to multiple target blocks, when a target block rejects a message, the source offers that message to the next target.</span></span> <span data-ttu-id="e8786-154">A ordem em que uma origem oferece mensagens para destinos é definida pela origem e pode variar de acordo com o tipo da origem.</span><span class="sxs-lookup"><span data-stu-id="e8786-154">The order in which a source offers messages to targets is defined by the source and can vary according to the type of the source.</span></span> <span data-ttu-id="e8786-155">A maioria dos tipos de blocos de origem para de oferecer uma mensagem depois que um destino aceita essa mensagem.</span><span class="sxs-lookup"><span data-stu-id="e8786-155">Most source block types stop offering a message after one target accepts that message.</span></span> <span data-ttu-id="e8786-156">Uma exceção a essa regra é a classe <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601>, que oferece cada mensagem para todos os destinos, mesmo que alguns destinos rejeitem a mensagem.</span><span class="sxs-lookup"><span data-stu-id="e8786-156">One exception to this rule is the <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> class, which offers each message to all targets, even if some targets reject the message.</span></span> <span data-ttu-id="e8786-157">Para obter um exemplo que usa a filtragem para processar apenas mensagens específicas, consulte [Passo a passo: usando o fluxo de dados em um Aplicativo do Windows Forms](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-157">For an example that uses filtering to process only certain messages, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="e8786-158">Já que cada tipo de bloco de fluxo de dados de origem predefinido garante que as mensagens sejam propagadas na ordem em que são recebidas, toda mensagem deve ser lida do bloco de origem antes que o bloco de origem possa processar a próxima mensagem.</span><span class="sxs-lookup"><span data-stu-id="e8786-158">Because each predefined source dataflow block type guarantees that messages are propagated out in the order in which they are received, every message must be read from the source block before the source block can process the next message.</span></span> <span data-ttu-id="e8786-159">Portanto, quando você usa a filtragem para conectar vários destinos a uma origem, certifique-se de que pelo menos um bloco de destino receba cada mensagem.</span><span class="sxs-lookup"><span data-stu-id="e8786-159">Therefore, when you use filtering to connect multiple targets to a source, make sure that at least one target block receives each message.</span></span> <span data-ttu-id="e8786-160">Caso contrário, seu aplicativo poderá sofrer deadlock.</span><span class="sxs-lookup"><span data-stu-id="e8786-160">Otherwise, your application might deadlock.</span></span>  
  
### <a name="message-passing"></a><span data-ttu-id="e8786-161">Transmissão de mensagens</span><span class="sxs-lookup"><span data-stu-id="e8786-161">Message Passing</span></span>  
 <span data-ttu-id="e8786-162">O modelo de programação de fluxo de dados está relacionado ao conceito de *transmissão de mensagens*, em que componentes independentes de um programa se comunicam uns com os outros pelo envio de mensagens.</span><span class="sxs-lookup"><span data-stu-id="e8786-162">The dataflow programming model is related to the concept of *message passing*, where independent components of a program communicate with one another by sending messages.</span></span> <span data-ttu-id="e8786-163">Uma maneira de propagar mensagens entre componentes de aplicativos é chamar os métodos <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A> e <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> para enviar mensagens à postagem de blocos de fluxo de dados de destino (<xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A> age de forma síncrona; <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A> age de forma assíncrona) e os métodos <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A> e <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A> para receber mensagens de blocos da origem.</span><span class="sxs-lookup"><span data-stu-id="e8786-163">One way to propagate messages among application components is to call the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A> and <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> methods to send messages to target dataflow blocks post (<xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A> acts synchronously; <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A> acts asynchronously) and the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A>, and <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A> methods to receive messages from source blocks.</span></span> <span data-ttu-id="e8786-164">Você pode combinar esses métodos com redes ou pipelines de fluxo de dados por meio do envio de dados de entrada para o nó de cabeçalho (um bloco de destino) e receber dados de saída do nó terminal do pipeline ou nós terminais da rede (um ou mais blocos de origem).</span><span class="sxs-lookup"><span data-stu-id="e8786-164">You can combine these methods with dataflow pipelines or networks by sending input data to the head node (a target block), and receiving output data from the terminal node of the pipeline or the terminal nodes of the network (one or more source blocks).</span></span> <span data-ttu-id="e8786-165">Você também pode usar o método <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Choose%2A> para ler a partir da primeira origem fornecida que tem dados disponíveis e executar ações nesses dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-165">You can also use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Choose%2A> method to read from the first of the provided sources that has data available and perform action on that data.</span></span>  
  
 <span data-ttu-id="e8786-166">Os blocos de código-fonte oferecem dados ao blocos de destino chamando o método <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e8786-166">Source blocks offer data to target blocks by calling the <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="e8786-167">O bloco de destino responde a uma mensagem oferecida em uma destas três maneiras: ele pode aceitar a mensagem, recusá-la ou adiá-la.</span><span class="sxs-lookup"><span data-stu-id="e8786-167">The target block responds to an offered message in one of three ways: it can accept the message, decline the message, or postpone the message.</span></span> <span data-ttu-id="e8786-168">Quando o destino aceita a mensagem, o método <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> retornará <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Accepted>.</span><span class="sxs-lookup"><span data-stu-id="e8786-168">When the target accepts the message, the <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> method returns <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Accepted>.</span></span> <span data-ttu-id="e8786-169">Quando o destino rejeita a mensagem, o método <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> retornará <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Declined>.</span><span class="sxs-lookup"><span data-stu-id="e8786-169">When the target declines the message, the <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> method returns <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Declined>.</span></span> <span data-ttu-id="e8786-170">Quando o destino exige não receber mais as mensagens da origem, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> retornará <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.DecliningPermanently>.</span><span class="sxs-lookup"><span data-stu-id="e8786-170">When the target requires that it no longer receives any messages from the source, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> returns <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.DecliningPermanently>.</span></span> <span data-ttu-id="e8786-171">Os tipos de bloco de origem predefinidos não oferecem mensagens para destinos vinculados após o recebimento desse valor retornado e eles se desvinculam automaticamente desses destinos.</span><span class="sxs-lookup"><span data-stu-id="e8786-171">The predefined source block types do not offer messages to linked targets after such a return value is received, and they automatically unlink from such targets.</span></span>  
  
 <span data-ttu-id="e8786-172">Quando um bloco de destino adia a mensagem para uso posterior, o método <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> retornará <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Postponed>.</span><span class="sxs-lookup"><span data-stu-id="e8786-172">When a target block postpones the message for later use, the <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> method returns <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Postponed>.</span></span> <span data-ttu-id="e8786-173">Um bloco de destino que adia uma mensagem pode mais tarde chamar o método <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ReserveMessage%2A?displayProperty=nameWithType> para tentar reservar a mensagem oferecida.</span><span class="sxs-lookup"><span data-stu-id="e8786-173">A target block that postpones a message can later call the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ReserveMessage%2A?displayProperty=nameWithType> method to try to reserve the offered message.</span></span> <span data-ttu-id="e8786-174">Neste ponto, é possível que a mensagem ainda esteja disponível e possa ser usada pelo bloco de destino ou então que a mensagem tenha sido tomada por outro destino.</span><span class="sxs-lookup"><span data-stu-id="e8786-174">At this point, the message is either still available and can be used by the target block, or the message has been taken by another target.</span></span> <span data-ttu-id="e8786-175">Quando, posteriormente, o bloco de destino exige a mensagem ou já não precisa dela, ele chama o método <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ConsumeMessage%2A?displayProperty=nameWithType> ou <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ReleaseReservation%2A>, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="e8786-175">When the target block later requires the message or no longer needs the message, it calls the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ConsumeMessage%2A?displayProperty=nameWithType> or <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ReleaseReservation%2A> method, respectively.</span></span> <span data-ttu-id="e8786-176">Reserva de mensagem normalmente é usada pelos tipos de bloco de fluxo de dados que operam em modo não greedy.</span><span class="sxs-lookup"><span data-stu-id="e8786-176">Message reservation is typically used by the dataflow block types that operate in non-greedy mode.</span></span> <span data-ttu-id="e8786-177">O modo não greedy é explicado mais adiante neste documento.</span><span class="sxs-lookup"><span data-stu-id="e8786-177">Non-greedy mode is explained later in this document.</span></span> <span data-ttu-id="e8786-178">Em vez de reservar uma mensagem adiada, um bloco de destino também pode usar o método <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ConsumeMessage%2A?displayProperty=nameWithType> para tentar consumir diretamente a mensagem adiada.</span><span class="sxs-lookup"><span data-stu-id="e8786-178">Instead of reserving a postponed message, a target block can also use the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ConsumeMessage%2A?displayProperty=nameWithType> method to attempt to directly consume the postponed message.</span></span>  
  
### <a name="dataflow-block-completion"></a><span data-ttu-id="e8786-179">Conclusão do bloco de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e8786-179">Dataflow Block Completion</span></span>  
 <span data-ttu-id="e8786-180">Blocos de fluxo de dados também dão suporte ao conceito de *conclusão*.</span><span class="sxs-lookup"><span data-stu-id="e8786-180">Dataflow blocks also support the concept of *completion*.</span></span> <span data-ttu-id="e8786-181">Um bloco de fluxo de dados que está no estado concluído não executa nenhum trabalho adicional.</span><span class="sxs-lookup"><span data-stu-id="e8786-181">A dataflow block that is in the completed state does not perform any further work.</span></span> <span data-ttu-id="e8786-182">Cada bloco de fluxo de dados tem um objeto <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> associado, conhecido como uma *tarefa de conclusão* que representa o status de conclusão do bloco.</span><span class="sxs-lookup"><span data-stu-id="e8786-182">Each dataflow block has an associated <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> object, known as a *completion task*, that represents the completion status of the block.</span></span> <span data-ttu-id="e8786-183">Já que você pode esperar a conclusão de um objeto <xref:System.Threading.Tasks.Task> por meio do uso de tarefas de conclusão, espere pela conclusão de um ou mais nós terminais de uma rede de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-183">Because you can wait for a <xref:System.Threading.Tasks.Task> object to finish, by using completion tasks, you can wait for one or more terminal nodes of a dataflow network to finish.</span></span> <span data-ttu-id="e8786-184">A interface <xref:System.Threading.Tasks.Dataflow.IDataflowBlock> define o método <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> que informa o bloco de fluxo de dados sobre uma solicitação para que ela seja concluída e a propriedade <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> que retorna a tarefa de conclusão para o bloco de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-184">The <xref:System.Threading.Tasks.Dataflow.IDataflowBlock> interface defines the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> method, which informs the dataflow block of a request for it to complete, and the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> property, which returns the completion task for the dataflow block.</span></span> <span data-ttu-id="e8786-185"><xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> e <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> herdam a interface <xref:System.Threading.Tasks.Dataflow.IDataflowBlock>.</span><span class="sxs-lookup"><span data-stu-id="e8786-185">Both <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> and <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> inherit the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock> interface.</span></span>  
  
 <span data-ttu-id="e8786-186">Há duas maneiras de determinar se um bloco de fluxo de dados foi concluído sem erros, encontrou um ou mais erros ou foi cancelado.</span><span class="sxs-lookup"><span data-stu-id="e8786-186">There are two ways to determine whether a dataflow block completed without error, encountered one or more errors, or was canceled.</span></span> <span data-ttu-id="e8786-187">A primeira maneira é chamar o método <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> na tarefa de conclusão em um bloco `try`-`catch` (`Try`-`Catch` no Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="e8786-187">The first way is to call the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method on the completion task in a `try`-`catch` block (`Try`-`Catch` in Visual Basic).</span></span> <span data-ttu-id="e8786-188">O exemplo a seguir cria um objeto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> que gera <xref:System.ArgumentOutOfRangeException> se o valor de entrada for menor que zero.</span><span class="sxs-lookup"><span data-stu-id="e8786-188">The following example creates an <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object that throws <xref:System.ArgumentOutOfRangeException> if its input value is less than zero.</span></span> <span data-ttu-id="e8786-189"><xref:System.AggregateException> é gerado quando este exemplo chama <xref:System.Threading.Tasks.Task.Wait%2A> na tarefa de conclusão.</span><span class="sxs-lookup"><span data-stu-id="e8786-189"><xref:System.AggregateException> is thrown when this example calls <xref:System.Threading.Tasks.Task.Wait%2A> on the completion task.</span></span> <span data-ttu-id="e8786-190">O <xref:System.ArgumentOutOfRangeException> pode ser acessado pela propriedade <xref:System.AggregateException.InnerExceptions%2A> do objeto <xref:System.AggregateException>.</span><span class="sxs-lookup"><span data-stu-id="e8786-190">The <xref:System.ArgumentOutOfRangeException> is accessed through the <xref:System.AggregateException.InnerExceptions%2A> property of the <xref:System.AggregateException> object.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#10](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#10)]
 [!code-vb[TPLDataflow_Overview#10](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#10)]  
  
 <span data-ttu-id="e8786-191">Este exemplo demonstra o caso em que uma exceção fica sem tratamento no delegado de um bloco de fluxo de dados de execução.</span><span class="sxs-lookup"><span data-stu-id="e8786-191">This example demonstrates the case in which an exception goes unhandled in the delegate of an execution dataflow block.</span></span> <span data-ttu-id="e8786-192">É recomendável que você trate exceções nos corpos de tais blocos.</span><span class="sxs-lookup"><span data-stu-id="e8786-192">We recommend that you handle exceptions in the bodies of such blocks.</span></span> <span data-ttu-id="e8786-193">No entanto, se não for possível fazer isso, o bloco se comportará como se tivesse sido cancelado e não processará mensagens de entrada.</span><span class="sxs-lookup"><span data-stu-id="e8786-193">However, if you are unable to do so, the block behaves as though it was canceled and does not process incoming messages.</span></span>  
  
 <span data-ttu-id="e8786-194">Quando um bloco de fluxo de dados é explicitamente cancelado, o objeto <xref:System.AggregateException> contém <xref:System.OperationCanceledException> na propriedade <xref:System.AggregateException.InnerExceptions%2A>.</span><span class="sxs-lookup"><span data-stu-id="e8786-194">When a dataflow block is canceled explicitly, the <xref:System.AggregateException> object contains <xref:System.OperationCanceledException> in the <xref:System.AggregateException.InnerExceptions%2A> property.</span></span> <span data-ttu-id="e8786-195">Para obter mais informações sobre o cancelamento de fluxo de dados, consulte a seção [Habilitando o cancelamento](#enabling-cancellation).</span><span class="sxs-lookup"><span data-stu-id="e8786-195">For more information about dataflow cancellation, see [Enabling Cancellation](#enabling-cancellation) section.</span></span>  
  
 <span data-ttu-id="e8786-196">A segunda maneira de determinar o status de conclusão de um bloco de fluxo de dados é usar uma continuação da tarefa de conclusão ou então usar os recursos de linguagem assíncrona do C# e Visual Basic para aguardar de modo assíncrono a tarefa de conclusão.</span><span class="sxs-lookup"><span data-stu-id="e8786-196">The second way to determine the completion status of a dataflow block is to use a continuation of the completion task, or to use the asynchronous language features of C# and Visual Basic to asynchronously wait for the completion task.</span></span> <span data-ttu-id="e8786-197">O representante que você fornece ao método <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> usa um objeto <xref:System.Threading.Tasks.Task> que representa a tarefa antecedente.</span><span class="sxs-lookup"><span data-stu-id="e8786-197">The delegate that you provide to the <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> method takes a <xref:System.Threading.Tasks.Task> object that represents the antecedent task.</span></span> <span data-ttu-id="e8786-198">No caso da propriedade <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A>, o próprio representante para a continuação recebe a tarefa de conclusão.</span><span class="sxs-lookup"><span data-stu-id="e8786-198">In the case of the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> property, the delegate for the continuation takes the completion task itself.</span></span> <span data-ttu-id="e8786-199">O exemplo a seguir é semelhante ao anterior, exceto pelo fato de que ele também usa o método <xref:System.Threading.Tasks.Task.ContinueWith%2A> para criar uma tarefa de conclusão que imprime o status da operação de fluxo de dados geral.</span><span class="sxs-lookup"><span data-stu-id="e8786-199">The following example resembles the previous one, except that it also uses the <xref:System.Threading.Tasks.Task.ContinueWith%2A> method to create a continuation task that prints the status of the overall dataflow operation.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#11](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#11)]
 [!code-vb[TPLDataflow_Overview#11](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#11)]  
  
 <span data-ttu-id="e8786-200">Você também pode usar propriedades como <xref:System.Threading.Tasks.Task.IsCanceled%2A> no corpo da tarefa de continuação para determinar informações adicionais sobre o status de conclusão de um bloco de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-200">You can also use properties such as <xref:System.Threading.Tasks.Task.IsCanceled%2A> in the body of the continuation task to determine additional information about the completion status of a dataflow block.</span></span> <span data-ttu-id="e8786-201">Para obter mais informações sobre tarefas de continuação e como elas se relacionam com cancelamento e tratamento de erro, consulte [Encadeamento de tarefas pelo uso de tarefas de continuação](../../../docs/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks.md), [Cancelamento de tarefas](../../../docs/standard/parallel-programming/task-cancellation.md) e [Tratamento de exceções](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-201">For more information about continuation tasks and how they relate to cancellation and error handling, see [Chaining Tasks by Using Continuation Tasks](../../../docs/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks.md), [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md), and [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>  
  
 <span data-ttu-id="e8786-202">[[ir para o topo](#top)]</span><span class="sxs-lookup"><span data-stu-id="e8786-202">[[go to top](#top)]</span></span>  
  
<a name="predefined_types"></a>   
## <a name="predefined-dataflow-block-types"></a><span data-ttu-id="e8786-203">Tipos de bloco de fluxo de dados predefinidos</span><span class="sxs-lookup"><span data-stu-id="e8786-203">Predefined Dataflow Block Types</span></span>  
 <span data-ttu-id="e8786-204">A biblioteca de fluxos de dados TPL fornece vários tipos de bloco de fluxo de dados predefinidos.</span><span class="sxs-lookup"><span data-stu-id="e8786-204">The TPL Dataflow Library provides several predefined dataflow block types.</span></span> <span data-ttu-id="e8786-205">Esses tipos são divididos em três categorias: *blocos de buffer*, *blocos de execução* e *blocos de agrupamento*.</span><span class="sxs-lookup"><span data-stu-id="e8786-205">These types are divided into three categories: *buffering blocks*, *execution blocks*, and *grouping blocks*.</span></span> <span data-ttu-id="e8786-206">As seções a seguir descrevem os tipos de bloco que compõem essas categorias.</span><span class="sxs-lookup"><span data-stu-id="e8786-206">The following sections describe the block types that make up these categories.</span></span>  
  
### <a name="buffering-blocks"></a><span data-ttu-id="e8786-207">Blocos de buffer</span><span class="sxs-lookup"><span data-stu-id="e8786-207">Buffering Blocks</span></span>  
 <span data-ttu-id="e8786-208">Blocos de buffer armazenam dados para uso pelos consumidores de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-208">Buffering blocks hold data for use by data consumers.</span></span> <span data-ttu-id="e8786-209">A Biblioteca de fluxos de dados TPL fornece três tipos de blocos de buffer: <xref:System.Threading.Tasks.Dataflow.BufferBlock%601?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e8786-209">The TPL Dataflow Library provides three buffering block types: <xref:System.Threading.Tasks.Dataflow.BufferBlock%601?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601?displayProperty=nameWithType>.</span></span>  
  
#### <a name="bufferblockt"></a><span data-ttu-id="e8786-210">BufferBlock(T)</span><span class="sxs-lookup"><span data-stu-id="e8786-210">BufferBlock(T)</span></span>  
 <span data-ttu-id="e8786-211">A classe <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> representa uma estrutura de sistema de mensagens assíncrona para fins gerais.</span><span class="sxs-lookup"><span data-stu-id="e8786-211">The <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> class represents a general-purpose asynchronous messaging structure.</span></span> <span data-ttu-id="e8786-212">Essa classe armazena uma fila PEPS (primeiro a entrar, primeiro a sair) de mensagens que podem ser gravadas por várias origens ou lidas por vários destinos.</span><span class="sxs-lookup"><span data-stu-id="e8786-212">This class stores a first in, first out (FIFO) queue of messages that can be written to by multiple sources or read from by multiple targets.</span></span> <span data-ttu-id="e8786-213">Quando um destino recebe uma mensagem de um objeto <xref:System.Threading.Tasks.Dataflow.BufferBlock%601>, essa mensagem é removida da fila de mensagens.</span><span class="sxs-lookup"><span data-stu-id="e8786-213">When a target receives a message from a <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> object, that message is removed from the message queue.</span></span> <span data-ttu-id="e8786-214">Portanto, embora um objeto <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> possa ter vários destinos, cada mensagem será recebida por apenas um destino.</span><span class="sxs-lookup"><span data-stu-id="e8786-214">Therefore, although a <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> object can have multiple targets, only one target will receive each message.</span></span> <span data-ttu-id="e8786-215">A classe <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> é útil quando você deseja passar várias mensagens para outro componente e esse componente deve receber cada uma das mensagens.</span><span class="sxs-lookup"><span data-stu-id="e8786-215">The <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> class is useful when you want to pass multiple messages to another component, and that component must receive each message.</span></span>  
  
 <span data-ttu-id="e8786-216">O exemplo básico a seguir posta diversos valores <xref:System.Int32> em um objeto <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> e, em seguida, lê esses valores de volta a partir desse objeto.</span><span class="sxs-lookup"><span data-stu-id="e8786-216">The following basic example posts several <xref:System.Int32> values to a <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> object and then reads those values back from that object.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#1)]
 [!code-vb[TPLDataflow_Overview#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#1)]  
  
 <span data-ttu-id="e8786-217">Para obter um exemplo completo que demonstra como gravar mensagens e ler mensagens de um objeto <xref:System.Threading.Tasks.Dataflow.BufferBlock%601>, confira [Como gravar mensagens em um bloco de fluxo de dados e ler mensagens de um bloco de fluxo de dados](../../../docs/standard/parallel-programming/how-to-write-messages-to-and-read-messages-from-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-217">For a complete example that demonstrates how to write messages to and read messages from a <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> object, see [How to: Write Messages to and Read Messages from a Dataflow Block](../../../docs/standard/parallel-programming/how-to-write-messages-to-and-read-messages-from-a-dataflow-block.md).</span></span>  
  
#### <a name="broadcastblockt"></a><span data-ttu-id="e8786-218">BroadcastBlock(T)</span><span class="sxs-lookup"><span data-stu-id="e8786-218">BroadcastBlock(T)</span></span>  
 <span data-ttu-id="e8786-219">A classe <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> é útil quando você precisa passar várias mensagens para outro componente mas esse componente precisa apenas do valor mais recente.</span><span class="sxs-lookup"><span data-stu-id="e8786-219">The <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> class is useful when you must pass multiple messages to another component, but that component needs only the most recent value.</span></span> <span data-ttu-id="e8786-220">Essa classe também é útil quando você deseja difundir uma mensagem para vários componentes.</span><span class="sxs-lookup"><span data-stu-id="e8786-220">This class is also useful when you want to broadcast a message to multiple components.</span></span>  
  
 <span data-ttu-id="e8786-221">O exemplo básico a seguir posta diversos valores <xref:System.Double> em um objeto <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> e, em seguida, lê esses valores de volta a partir desse objeto por diversas vezes.</span><span class="sxs-lookup"><span data-stu-id="e8786-221">The following basic example posts a <xref:System.Double> value to a <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> object and then reads that value back from that object several times.</span></span> <span data-ttu-id="e8786-222">Como valores não são removidos dos objetos <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> depois que eles são lidos, o mesmo valor está disponível todas as vezes.</span><span class="sxs-lookup"><span data-stu-id="e8786-222">Because values are not removed from <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> objects after they are read, the same value is available every time.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#2)]
 [!code-vb[TPLDataflow_Overview#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#2)]  
  
 <span data-ttu-id="e8786-223">Para obter um exemplo completo que demonstra como usar <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> para difundir uma mensagem a vários blocos de destino, confira [Como especificar um agendador de tarefas em um bloco de fluxo de dados](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-223">For a complete example that demonstrates how to use <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> to broadcast a message to multiple target blocks, see [How to: Specify a Task Scheduler in a Dataflow Block](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md).</span></span>  
  
#### <a name="writeonceblockt"></a><span data-ttu-id="e8786-224">WriteOnceBlock(T)</span><span class="sxs-lookup"><span data-stu-id="e8786-224">WriteOnceBlock(T)</span></span>  
 <span data-ttu-id="e8786-225">A classe <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> é semelhante à classe <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601>, exceto no ponto em que um objeto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> pode ser gravado apenas uma vez.</span><span class="sxs-lookup"><span data-stu-id="e8786-225">The <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> class resembles the <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> class, except that a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object can be written to one time only.</span></span> <span data-ttu-id="e8786-226">Você pode pensar em <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> como sendo semelhante à palavra-chave de C# [readonly](~/docs/csharp/language-reference/keywords/readonly.md) ([ReadOnly](~/docs/visual-basic/language-reference/modifiers/readonly.md) no Visual Basic), exceto pelo fato de que um objeto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> torna-se imutável depois de receber um valor em vez de uma construção.</span><span class="sxs-lookup"><span data-stu-id="e8786-226">You can think of <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> as being similar to the C# [readonly](~/docs/csharp/language-reference/keywords/readonly.md) ([ReadOnly](~/docs/visual-basic/language-reference/modifiers/readonly.md) in Visual Basic) keyword, except that a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object becomes immutable after it receives a value instead of at construction.</span></span> <span data-ttu-id="e8786-227">Como na classe <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601>, quando um destino recebe uma mensagem de um objeto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601>, essa mensagem não é removida do objeto.</span><span class="sxs-lookup"><span data-stu-id="e8786-227">Like the <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> class, when a target receives a message from a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object, that message is not removed from that object.</span></span> <span data-ttu-id="e8786-228">Portanto, vários destinos recebem uma cópia da mensagem.</span><span class="sxs-lookup"><span data-stu-id="e8786-228">Therefore, multiple targets receive a copy of the message.</span></span> <span data-ttu-id="e8786-229">A classe <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> é útil quando você deseja propagar apenas a primeira de várias mensagens.</span><span class="sxs-lookup"><span data-stu-id="e8786-229">The <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> class is useful when you want to propagate only the first of multiple messages.</span></span>  
  
 <span data-ttu-id="e8786-230">O exemplo básico a seguir posta diversos valores <xref:System.String> em um objeto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> e, em seguida, lê esse valor de volta a partir desse objeto.</span><span class="sxs-lookup"><span data-stu-id="e8786-230">The following basic example posts multiple <xref:System.String> values to a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object and then reads the value back from that object.</span></span> <span data-ttu-id="e8786-231">Como um objeto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> pode ser gravado apenas uma vez, após um objeto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> receber uma mensagem, ele descartará mensagens subsequentes.</span><span class="sxs-lookup"><span data-stu-id="e8786-231">Because a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object can be written to one time only, after a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object receives a message, it discards subsequent messages.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#3)]
 [!code-vb[TPLDataflow_Overview#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#3)]  
  
 <span data-ttu-id="e8786-232">Para obter um exemplo completo que demonstra como usar <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> para receber o valor da primeira operação que termina, confira [Como desvincular blocos de fluxo de dados](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-232">For a complete example that demonstrates how to use <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> to receive the value of the first operation that finishes, see [How to: Unlink Dataflow Blocks](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md).</span></span>  
  
### <a name="execution-blocks"></a><span data-ttu-id="e8786-233">Blocos de execução</span><span class="sxs-lookup"><span data-stu-id="e8786-233">Execution Blocks</span></span>  
 <span data-ttu-id="e8786-234">Blocos de execução chamam um delegado fornecido pelo usuário para cada parte dos dados recebidos.</span><span class="sxs-lookup"><span data-stu-id="e8786-234">Execution blocks call a user-provided delegate for each piece of received data.</span></span> <span data-ttu-id="e8786-235">A Biblioteca de Fluxos de Dados TPL fornece três tipos de blocos de execução: <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e8786-235">The TPL Dataflow Library provides three execution block types: <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602?displayProperty=nameWithType>.</span></span>  
  
#### <a name="actionblockt"></a><span data-ttu-id="e8786-236">ActionBlock(T)</span><span class="sxs-lookup"><span data-stu-id="e8786-236">ActionBlock(T)</span></span>  
 <span data-ttu-id="e8786-237">A classe <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> é um bloco de destino que chama um representante ao receber dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-237">The <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> class is a target block that calls a delegate when it receives data.</span></span> <span data-ttu-id="e8786-238">Pense em um objeto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> como um representante que é executado de modo assíncrono quando os dados se tornam disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e8786-238">Think of a <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object as a delegate that runs asynchronously when data becomes available.</span></span> <span data-ttu-id="e8786-239">O representante que você fornece a um objeto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> pode ser do tipo <xref:System.Action%601> ou tipo `System.Func<TInput, Task>`.</span><span class="sxs-lookup"><span data-stu-id="e8786-239">The delegate that you provide to an <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object can be of type <xref:System.Action%601> or type `System.Func<TInput, Task>`.</span></span> <span data-ttu-id="e8786-240">Quando você usa um objeto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> com <xref:System.Action%601>, o processamento de cada elemento de entrada é considerado concluído quando o representante retorna.</span><span class="sxs-lookup"><span data-stu-id="e8786-240">When you use an <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object with <xref:System.Action%601>, processing of each input element is considered completed when the delegate returns.</span></span> <span data-ttu-id="e8786-241">Quando você usa um objeto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> com `System.Func<TInput, Task>`, o processamento de cada elemento de entrada é considerado concluído somente quando o objeto retornado <xref:System.Threading.Tasks.Task> for concluído.</span><span class="sxs-lookup"><span data-stu-id="e8786-241">When you use an <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object with `System.Func<TInput, Task>`, processing of each input element is considered completed only when the returned <xref:System.Threading.Tasks.Task> object is completed.</span></span> <span data-ttu-id="e8786-242">Usando esses dois mecanismos, você pode usar <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> no processamento síncrono e assíncrono de cada elemento de entrada.</span><span class="sxs-lookup"><span data-stu-id="e8786-242">By using these two mechanisms, you can use <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> for both synchronous and asynchronous processing of each input element.</span></span>  
  
 <span data-ttu-id="e8786-243">O exemplo simples a seguir envia vários valores <xref:System.Int32> para um objeto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="e8786-243">The following basic example posts multiple <xref:System.Int32> values to an <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object.</span></span> <span data-ttu-id="e8786-244">O objeto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> imprime esses valores para o console.</span><span class="sxs-lookup"><span data-stu-id="e8786-244">The <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object prints those values to the console.</span></span> <span data-ttu-id="e8786-245">Este exemplo, em seguida, define o bloco para o estado concluído e aguarda que todas as tarefas de fluxo de dados sejam concluídas.</span><span class="sxs-lookup"><span data-stu-id="e8786-245">This example then sets the block to the completed state and waits for all dataflow tasks to finish.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#4)]
 [!code-vb[TPLDataflow_Overview#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#4)]  
  
 <span data-ttu-id="e8786-246">Para concluir exemplos que demonstram como usar representantes com a classe <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, confira [Como executar ações quando um bloco de fluxo de dados recebe dados](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-246">For complete examples that demonstrate how to use delegates with the <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> class, see [How to: Perform Action When a Dataflow Block Receives Data](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md).</span></span>  
  
#### <a name="transformblocktinput-toutput"></a><span data-ttu-id="e8786-247">TransformBlock(TInput, TOutput)</span><span class="sxs-lookup"><span data-stu-id="e8786-247">TransformBlock(TInput, TOutput)</span></span>  
 <span data-ttu-id="e8786-248">A classe <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> é semelhante à classe <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, exceto que ela atua tanto como origem quanto destino.</span><span class="sxs-lookup"><span data-stu-id="e8786-248">The <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> class resembles the <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> class, except that it acts as both a source and as a target.</span></span> <span data-ttu-id="e8786-249">O representante que você passa para um objeto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> retorna um valor do tipo `TOutput`.</span><span class="sxs-lookup"><span data-stu-id="e8786-249">The delegate that you pass to a <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object returns a value of type `TOutput`.</span></span> <span data-ttu-id="e8786-250">O representante que você fornece a um objeto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> pode ser do tipo `System.Func<TInput, TOutput>` ou do tipo `System.Func<TInput, Task<TOutput>>`.</span><span class="sxs-lookup"><span data-stu-id="e8786-250">The delegate that you provide to a <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object can be of type `System.Func<TInput, TOutput>` or type `System.Func<TInput, Task<TOutput>>`.</span></span> <span data-ttu-id="e8786-251">Quando você usa um objeto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> com `System.Func<TInput, TOutput>`, o processamento de cada elemento de entrada é considerado concluído quando o representante retorna.</span><span class="sxs-lookup"><span data-stu-id="e8786-251">When you use a <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object with `System.Func<TInput, TOutput>`, processing of each input element is considered completed when the delegate returns.</span></span> <span data-ttu-id="e8786-252">Quando você usa um objeto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> com `System.Func<TInput, Task<TOutput>>`, o processamento de cada elemento de entrada é considerado concluído somente quando o objeto retornado <xref:System.Threading.Tasks.Task%601> for concluído.</span><span class="sxs-lookup"><span data-stu-id="e8786-252">When you use a <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object used with `System.Func<TInput, Task<TOutput>>`, processing of each input element is considered completed only when the returned <xref:System.Threading.Tasks.Task%601> object is completed.</span></span> <span data-ttu-id="e8786-253">Como acontece com o <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, ao usar esses dois mecanismos, você pode usar <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> no processamento síncrono e assíncrono de cada elemento de entrada.</span><span class="sxs-lookup"><span data-stu-id="e8786-253">As with <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, by using these two mechanisms, you can use <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> for both synchronous and asynchronous processing of each input element.</span></span>  
  
 <span data-ttu-id="e8786-254">O exemplo básico a seguir cria um objeto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> que computa a raiz quadrada de sua entrada.</span><span class="sxs-lookup"><span data-stu-id="e8786-254">The following basic example creates a <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object that computes the square root of its input.</span></span> <span data-ttu-id="e8786-255">O objeto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> usa valores <xref:System.Int32> como entrada e produz valores <xref:System.Double> como saída.</span><span class="sxs-lookup"><span data-stu-id="e8786-255">The <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object takes <xref:System.Int32> values as input and produces <xref:System.Double> values as output.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#5)]
 [!code-vb[TPLDataflow_Overview#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#5)]  
  
 <span data-ttu-id="e8786-256">Para obter exemplos completos que usam <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> em uma rede de blocos de fluxo de dados que executa o processamento de imagem em um Aplicativo do Windows Forms, confira [Explicação passo a passo: usar o fluxo de dados em um Aplicativo Windows Forms](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-256">For complete examples that uses <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> in a network of dataflow blocks that performs image processing in a Windows Forms application, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
#### <a name="transformmanyblocktinput-toutput"></a><span data-ttu-id="e8786-257">TransformManyBlock(TInput, TOutput)</span><span class="sxs-lookup"><span data-stu-id="e8786-257">TransformManyBlock(TInput, TOutput)</span></span>  
 <span data-ttu-id="e8786-258">A classe <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> é semelhante à classe <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>, exceto no ponto em que <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> produz zero ou mais valores de saída para cada valor de entrada, em vez de apenas um valor para cada valor de entrada de saída.</span><span class="sxs-lookup"><span data-stu-id="e8786-258">The <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> class resembles the <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> class, except that <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> produces zero or more output values for each input value, instead of only one output value for each input value.</span></span> <span data-ttu-id="e8786-259">O representante que você fornece a um objeto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> pode ser do tipo `System.Func<TInput, IEnumerable<TOutput>>` ou do tipo `System.Func<TInput, Task<IEnumerable<TOutput>>>`.</span><span class="sxs-lookup"><span data-stu-id="e8786-259">The delegate that you provide to a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object can be of type `System.Func<TInput, IEnumerable<TOutput>>` or type `System.Func<TInput, Task<IEnumerable<TOutput>>>`.</span></span> <span data-ttu-id="e8786-260">Quando você usa um objeto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> com `System.Func<TInput, IEnumerable<TOutput>>`, o processamento de cada elemento de entrada é considerado concluído quando o representante retorna.</span><span class="sxs-lookup"><span data-stu-id="e8786-260">When you use a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object with `System.Func<TInput, IEnumerable<TOutput>>`, processing of each input element is considered completed when the delegate returns.</span></span> <span data-ttu-id="e8786-261">Quando você usa um objeto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> com `System.Func<TInput, Task<IEnumerable<TOutput>>>`, o processamento de cada elemento de entrada é considerado concluído somente quando o objeto retornado `System.Threading.Tasks.Task<IEnumerable<TOutput>>` for concluído.</span><span class="sxs-lookup"><span data-stu-id="e8786-261">When you use a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object with `System.Func<TInput, Task<IEnumerable<TOutput>>>`, processing of each input element is considered complete only when the returned `System.Threading.Tasks.Task<IEnumerable<TOutput>>` object is completed.</span></span>  
  
 <span data-ttu-id="e8786-262">O exemplo básico a seguir cria um objeto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> que divide cadeias de caracteres em suas sequências de caracteres individuais.</span><span class="sxs-lookup"><span data-stu-id="e8786-262">The following basic example creates a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object that splits strings into their individual character sequences.</span></span> <span data-ttu-id="e8786-263">O objeto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> usa valores <xref:System.String> como entrada e produz valores <xref:System.Char> como saída.</span><span class="sxs-lookup"><span data-stu-id="e8786-263">The <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object takes <xref:System.String> values as input and produces <xref:System.Char> values as output.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#6)]
 [!code-vb[TPLDataflow_Overview#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#6)]  
  
 <span data-ttu-id="e8786-264">Para obter exemplos completos que usam <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> para produzir várias saídas independentes para cada entrada em um pipeline de fluxo de dados, confira [Explicação passo a passo: criar um pipeline de fluxo de dados](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-264">For complete examples that use <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> to produce multiple independent outputs for each input in a dataflow pipeline, see [Walkthrough: Creating a Dataflow Pipeline](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md).</span></span>  
  
#### <a name="degree-of-parallelism"></a><span data-ttu-id="e8786-265">Grau de Paralelismo</span><span class="sxs-lookup"><span data-stu-id="e8786-265">Degree of Parallelism</span></span>  
 <span data-ttu-id="e8786-266">Cada objeto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> armazena mensagens de entrada até que o bloco esteja pronto para processá-las.</span><span class="sxs-lookup"><span data-stu-id="e8786-266">Every <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>, and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object buffers input messages until the block is ready to process them.</span></span> <span data-ttu-id="e8786-267">Por padrão, essas classes processam mensagens na ordem em que elas são recebidas, uma mensagem por vez.</span><span class="sxs-lookup"><span data-stu-id="e8786-267">By default, these classes process messages in the order in which they are received, one message at a time.</span></span> <span data-ttu-id="e8786-268">Você também pode especificar o grau de paralelismo para habilitar os objetos <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> para processar várias mensagens simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="e8786-268">You can also specify the degree of parallelism to enable <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> objects to process multiple messages concurrently.</span></span> <span data-ttu-id="e8786-269">Para obter mais informações sobre a execução simultânea, consulte a seção Especificando o grau de paralelismo, presente neste documento.</span><span class="sxs-lookup"><span data-stu-id="e8786-269">For more information about concurrent execution, see the section Specifying the Degree of Parallelism later in this document.</span></span> <span data-ttu-id="e8786-270">Para obter um exemplo que define o grau de paralelismo para habilitar um bloco de fluxo de dados de execução a processar mais de uma mensagem por vez, consulte [Como especificar o grau de paralelismo em um bloco de fluxo de dados](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-270">For an example that sets the degree of parallelism to enable an execution dataflow block to process more than one message at a time, see [How to: Specify the Degree of Parallelism in a Dataflow Block](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md).</span></span>  
  
#### <a name="summary-of-delegate-types"></a><span data-ttu-id="e8786-271">Resumo de tipos de delegados</span><span class="sxs-lookup"><span data-stu-id="e8786-271">Summary of Delegate Types</span></span>  
 <span data-ttu-id="e8786-272">A tabela a seguir resume os tipos de representantes que você pode fornecer aos objetos <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="e8786-272">The following table summarizes the delegate types that you can provide to <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>, and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> objects.</span></span> <span data-ttu-id="e8786-273">Esta tabela também especifica se o tipo de delegado opera de forma síncrona ou assíncrona.</span><span class="sxs-lookup"><span data-stu-id="e8786-273">This table also specifies whether the delegate type operates synchronously or asynchronously.</span></span>  
  
|<span data-ttu-id="e8786-274">Tipo</span><span class="sxs-lookup"><span data-stu-id="e8786-274">Type</span></span>|<span data-ttu-id="e8786-275">Tipo de delegado síncrono</span><span class="sxs-lookup"><span data-stu-id="e8786-275">Synchronous Delegate Type</span></span>|<span data-ttu-id="e8786-276">Tipo de delegado assíncrono</span><span class="sxs-lookup"><span data-stu-id="e8786-276">Asynchronous Delegate Type</span></span>|  
|----------|-------------------------------|--------------------------------|  
|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|`System.Action`|`System.Func<TInput, Task>`|  
|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|`System.Func<TInput, TOutput>`|`System.Func<TInput, Task<TOutput>>`|  
|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|`System.Func<TInput, IEnumerable<TOutput>>`|`System.Func<TInput, Task<IEnumerable<TOutput>>>`|  
  
 <span data-ttu-id="e8786-277">Você também pode usar expressões lambda ao trabalhar com tipos de blocos de execução.</span><span class="sxs-lookup"><span data-stu-id="e8786-277">You can also use lambda expressions when you work with execution block types.</span></span> <span data-ttu-id="e8786-278">Para obter um exemplo que mostra como usar uma expressão lambda com um bloco de execução, consulte [Como executar ações quando um bloco de fluxo de dados recebe dados](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-278">For an example that shows how to use a lambda expression with an execution block, see [How to: Perform Action When a Dataflow Block Receives Data](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md).</span></span>  
  
### <a name="grouping-blocks"></a><span data-ttu-id="e8786-279">Blocos de agrupamento</span><span class="sxs-lookup"><span data-stu-id="e8786-279">Grouping Blocks</span></span>  
 <span data-ttu-id="e8786-280">Blocos de agrupamento combinam dados de uma ou mais origens e sob várias restrições.</span><span class="sxs-lookup"><span data-stu-id="e8786-280">Grouping blocks combine data from one or more sources and under various constraints.</span></span> <span data-ttu-id="e8786-281">A Biblioteca de fluxos de dados TPL fornece três tipos de blocos de junção: <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> e <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="e8786-281">The TPL Dataflow Library provides three join block types: <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602>, and <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>.</span></span>  
  
#### <a name="batchblockt"></a><span data-ttu-id="e8786-282">BatchBlock(T)</span><span class="sxs-lookup"><span data-stu-id="e8786-282">BatchBlock(T)</span></span>  
 <span data-ttu-id="e8786-283">A classe <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> combina os conjuntos de dados de entrada, que são conhecidos como lotes, em matrizes de dados de saída.</span><span class="sxs-lookup"><span data-stu-id="e8786-283">The <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> class combines sets of input data, which are known as batches, into arrays of output data.</span></span> <span data-ttu-id="e8786-284">Especifique o tamanho de cada lote ao criar um objeto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="e8786-284">You specify the size of each batch when you create a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object.</span></span> <span data-ttu-id="e8786-285">Quando o objeto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> recebe a contagem especificada dos elementos de entrada, ele propaga, de modo assíncrono, uma matriz que contém esses elementos.</span><span class="sxs-lookup"><span data-stu-id="e8786-285">When the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object receives the specified count of input elements, it asynchronously propagates out an array that contains those elements.</span></span> <span data-ttu-id="e8786-286">Se um objeto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> estiver definido com o estado concluído, mas não contiver elementos suficientes para formar um lote, ele propagará uma matriz final com os elementos de entrada restantes.</span><span class="sxs-lookup"><span data-stu-id="e8786-286">If a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object is set to the completed state but does not contain enough elements to form a batch, it propagates out a final array that contains the remaining input elements.</span></span>  
  
 <span data-ttu-id="e8786-287">A classe <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> opera em qualquer um dos modos *greedy* ou *não greedy*.</span><span class="sxs-lookup"><span data-stu-id="e8786-287">The <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> class operates in either *greedy* or *non-greedy* mode.</span></span> <span data-ttu-id="e8786-288">No modo greedy, que é o padrão, um objeto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> aceita todas as mensagens que são oferecidas a ele e propaga uma matriz, depois de receber a contagem especificada de elementos.</span><span class="sxs-lookup"><span data-stu-id="e8786-288">In greedy mode, which is the default, a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object accepts every message that it is offered and propagates out an array after it receives the specified count of elements.</span></span> <span data-ttu-id="e8786-289">No modo não greedy, um objeto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> adia todas as mensagens de entrada até que origens suficientes tenham oferecido mensagens para que o bloco forme um lote.</span><span class="sxs-lookup"><span data-stu-id="e8786-289">In non-greedy mode, a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object postpones all incoming messages until enough sources have offered messages to the block to form a batch.</span></span> <span data-ttu-id="e8786-290">O modo greedy normalmente tem melhor desempenho do que o modo não greedy porque ele requer menos sobrecarga de processamento.</span><span class="sxs-lookup"><span data-stu-id="e8786-290">Greedy mode typically performs better than non-greedy mode because it requires less processing overhead.</span></span> <span data-ttu-id="e8786-291">No entanto, você pode usar o modo não greedy quando você deve coordenar o consumo de várias origens de maneira atômica.</span><span class="sxs-lookup"><span data-stu-id="e8786-291">However, you can use non-greedy mode when you must coordinate consumption from multiple sources in an atomic fashion.</span></span> <span data-ttu-id="e8786-292">Especifique o modo não greedy definindo <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions.Greedy%2A> como `False` no parâmetro `dataflowBlockOptions` no constructo <xref:System.Threading.Tasks.Dataflow.BatchBlock%601.%23ctor%2A>.</span><span class="sxs-lookup"><span data-stu-id="e8786-292">Specify non-greedy mode by setting <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions.Greedy%2A> to `False` in the `dataflowBlockOptions` parameter in the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601.%23ctor%2A> constructor.</span></span>  
  
 <span data-ttu-id="e8786-293">O exemplo básico a seguir posta diversos valores <xref:System.Int32> em um objeto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> que contém dez elementos em um lote.</span><span class="sxs-lookup"><span data-stu-id="e8786-293">The following basic example posts several <xref:System.Int32> values to a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object that holds ten elements in a batch.</span></span> <span data-ttu-id="e8786-294">Para garantir que todos os valores sejam propagados fora do <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, este exemplo chama o método <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A>.</span><span class="sxs-lookup"><span data-stu-id="e8786-294">To guarantee that all values propagate out of the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, this example calls the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> method.</span></span> <span data-ttu-id="e8786-295">O método <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> define o objeto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> com o estado concluído e, assim, o objeto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> propaga quaisquer elementos restantes como um lote final.</span><span class="sxs-lookup"><span data-stu-id="e8786-295">The <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> method sets the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object to the completed state, and therefore, the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object propagates out any remaining elements as a final batch.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#7)]
 [!code-vb[TPLDataflow_Overview#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#7)]  
  
 <span data-ttu-id="e8786-296">Para obter um exemplo completo que usa <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> para aumentar a eficiência das operações de inserção do banco de dados, confira [Explicação passo a passo: usar BatchBlock e BatchedJoinBlock para melhorar a eficiência](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-296">For a complete example that uses <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> to improve the efficiency of database insert operations, see [Walkthrough: Using BatchBlock and BatchedJoinBlock to Improve Efficiency](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md).</span></span>  
  
#### <a name="joinblockt1-t2-"></a><span data-ttu-id="e8786-297">JoinBlock(T1, T2, ...)</span><span class="sxs-lookup"><span data-stu-id="e8786-297">JoinBlock(T1, T2, ...)</span></span>  
 <span data-ttu-id="e8786-298">As classes <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> e <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> coletam elementos de entrada e os propaga fora dos objetos <xref:System.Tuple%602?displayProperty=nameWithType> ou <xref:System.Tuple%603?displayProperty=nameWithType> que contêm esses elementos.</span><span class="sxs-lookup"><span data-stu-id="e8786-298">The <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> and <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> classes collect input elements and propagate out <xref:System.Tuple%602?displayProperty=nameWithType> or <xref:System.Tuple%603?displayProperty=nameWithType> objects that contain those elements.</span></span> <span data-ttu-id="e8786-299">As classes <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> e <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> não são herdadas de <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="e8786-299">The <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> and <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> classes do not inherit from <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span></span> <span data-ttu-id="e8786-300">Em vez disso, eles fornecem propriedades, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602.Target1%2A>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602.Target2%2A> e <xref:System.Threading.Tasks.Dataflow.JoinBlock%603.Target3%2A>, que implementam <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="e8786-300">Instead, they provide properties, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602.Target1%2A>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602.Target2%2A>, and <xref:System.Threading.Tasks.Dataflow.JoinBlock%603.Target3%2A>, that implement <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span></span>  
  
 <span data-ttu-id="e8786-301">Da mesma forma que <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> e <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> operam em qualquer um dos modos greedy ou não greedy.</span><span class="sxs-lookup"><span data-stu-id="e8786-301">Like <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> and <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> operate in either greedy or non-greedy mode.</span></span> <span data-ttu-id="e8786-302">No modo greedy, que é o padrão, um objeto <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> ou <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> aceita todas as mensagens que são oferecidas a ele e propaga uma tupla depois de cada um dos seus destinos receber pelo menos uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="e8786-302">In greedy mode, which is the default, a <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> or <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> object accepts every message that it is offered and propagates out a tuple after each of its targets receives at least one message.</span></span> <span data-ttu-id="e8786-303">No modo não greedy, um objeto <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> ou <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> adia todas as mensagens de entrada até que os dados que são necessários para criar uma tupla tenham sido oferecidos para todos os destinos.</span><span class="sxs-lookup"><span data-stu-id="e8786-303">In non-greedy mode, a <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> or <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> object postpones all incoming messages until all targets have been offered the data that is required to create a tuple.</span></span> <span data-ttu-id="e8786-304">Neste ponto, o bloco se envolve em um protocolo 2PC para recuperar atomicamente todos os itens obrigatórios das origens.</span><span class="sxs-lookup"><span data-stu-id="e8786-304">At this point, the block engages in a two-phase commit protocol to atomically retrieve all required items from the sources.</span></span> <span data-ttu-id="e8786-305">Este adiamento possibilita que outra entidade consuma os dados e, enquanto isso, permite que o sistema em geral avance.</span><span class="sxs-lookup"><span data-stu-id="e8786-305">This postponement makes it possible for another entity to consume the data in the meantime, to allow the overall system to make forward progress.</span></span>  
  
 <span data-ttu-id="e8786-306">O exemplo básico a seguir demonstra um caso em que um objeto <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> requer vários dados para calcular um valor.</span><span class="sxs-lookup"><span data-stu-id="e8786-306">The following basic example demonstrates a case in which a <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> object requires multiple data to compute a value.</span></span> <span data-ttu-id="e8786-307">Este exemplo cria um objeto <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> que requer dois valores <xref:System.Int32> e um valor <xref:System.Char> para executar uma operação aritmética.</span><span class="sxs-lookup"><span data-stu-id="e8786-307">This example creates a <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> object that requires two <xref:System.Int32> values and a <xref:System.Char> value to perform an arithmetic operation.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#8)]
 [!code-vb[TPLDataflow_Overview#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#8)]  
  
 <span data-ttu-id="e8786-308">Para obter um exemplo completo que usa objetos <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> no modo não greedy para compartilhar um recurso cooperativamente, confira [Como usar JoinBlock para ler dados de várias origens](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-308">For a complete example that uses <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> objects in non-greedy mode to cooperatively share a resource, see [How to: Use JoinBlock to Read Data From Multiple Sources](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md).</span></span>  
  
#### <a name="batchedjoinblockt1-t2-"></a><span data-ttu-id="e8786-309">BatchedJoinBlock(T1, T2, ...)</span><span class="sxs-lookup"><span data-stu-id="e8786-309">BatchedJoinBlock(T1, T2, ...)</span></span>  
 <span data-ttu-id="e8786-310">As classes <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> e <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%603> coletam lotes de elementos de entrada e os propaga fora dos objetos `System.Tuple(IList(T1), IList(T2))` ou `System.Tuple(IList(T1), IList(T2), IList(T3))` que contêm esses elementos.</span><span class="sxs-lookup"><span data-stu-id="e8786-310">The <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> and <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%603> classes collect batches of input elements and propagate out `System.Tuple(IList(T1), IList(T2))` or `System.Tuple(IList(T1), IList(T2), IList(T3))` objects that contain those elements.</span></span> <span data-ttu-id="e8786-311">Pense em <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> como uma combinação de <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> e <xref:System.Threading.Tasks.Dataflow.JoinBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="e8786-311">Think of <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> as a combination of <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> and <xref:System.Threading.Tasks.Dataflow.JoinBlock%602>.</span></span> <span data-ttu-id="e8786-312">Especifique o tamanho de cada lote ao criar um objeto <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="e8786-312">Specify the size of each batch when you create a <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> object.</span></span> <span data-ttu-id="e8786-313"><xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> também fornece propriedades, <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target1%2A> e <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target2%2A>, que implementam <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="e8786-313"><xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> also provides properties, <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target1%2A> and <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target2%2A>, that implement <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span></span> <span data-ttu-id="e8786-314">Quando a contagem especificada dos elementos de entrada é recebida do conjunto de todos os destinos, o objeto <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> propaga, de modo assíncrono, um objeto `System.Tuple(IList(T1), IList(T2))` que contém esses elementos.</span><span class="sxs-lookup"><span data-stu-id="e8786-314">When the specified count of input elements are received from across all targets, the <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> object asynchronously propagates out a `System.Tuple(IList(T1), IList(T2))` object that contains those elements.</span></span>  
  
 <span data-ttu-id="e8786-315">O exemplo básico a seguir cria um objeto <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> que contém resultados, valores <xref:System.Int32> e erros que são objetos <xref:System.Exception>.</span><span class="sxs-lookup"><span data-stu-id="e8786-315">The following basic example creates a <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> object that holds results, <xref:System.Int32> values, and errors that are <xref:System.Exception> objects.</span></span> <span data-ttu-id="e8786-316">Este exemplo executa várias operações e grava os resultados na propriedade <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target1%2A> e os erros na propriedade <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target2%2A> do objeto <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="e8786-316">This example performs multiple operations and writes results to the <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target1%2A> property, and errors to the <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target2%2A> property, of the <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> object.</span></span> <span data-ttu-id="e8786-317">Já que não se sabe com antecedência a contagem de operações bem-sucedidas e com falha, os objetos <xref:System.Collections.Generic.IList%601> permitem que cada destino receba zero ou mais valores.</span><span class="sxs-lookup"><span data-stu-id="e8786-317">Because the count of successful and failed operations is unknown in advance, the <xref:System.Collections.Generic.IList%601> objects enable each target to receive zero or more values.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#9](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#9)]
 [!code-vb[TPLDataflow_Overview#9](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#9)]  
  
 <span data-ttu-id="e8786-318">Para obter um exemplo completo que usa <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> para capturar os resultados e todas as exceções que ocorrem enquanto o programa lê de um banco de dados, confira [Explicação passo a passo: usar BatchBlock e BatchedJoinBlock para aumentar a eficiência](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-318">For a complete example that uses <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> to capture both the results and any exceptions that occur while the program reads from a database, see [Walkthrough: Using BatchBlock and BatchedJoinBlock to Improve Efficiency](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md).</span></span>  
  
 <span data-ttu-id="e8786-319">[[ir para o topo](#top)]</span><span class="sxs-lookup"><span data-stu-id="e8786-319">[[go to top](#top)]</span></span>  
  
<a name="behavior"></a>   
## <a name="configuring-dataflow--block-behavior"></a><span data-ttu-id="e8786-320">Configurar o comportamento de bloco de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e8786-320">Configuring Dataflow  Block Behavior</span></span>  
 <span data-ttu-id="e8786-321">Você pode habilitar as opções adicionais, fornecendo um objeto <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions?displayProperty=nameWithType> ao constructo de tipos de bloco de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-321">You can enable additional options by providing a <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions?displayProperty=nameWithType> object to the constructor of dataflow block types.</span></span> <span data-ttu-id="e8786-322">Essas opções controlam comportamentos como o do agendador que gerencia a tarefa subjacente e o grau de paralelismo.</span><span class="sxs-lookup"><span data-stu-id="e8786-322">These options control behavior such the scheduler that manages the underlying task and the degree of parallelism.</span></span> <span data-ttu-id="e8786-323">O <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions> também tem tipos derivados que especificam comportamentos que são específicos de determinados tipos de bloco de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-323">The <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions> also has derived types that specify behavior that is specific to certain dataflow block types.</span></span> <span data-ttu-id="e8786-324">A tabela a seguir resume que tipo de opções é associado a cada tipo de bloco de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-324">The following table summarizes which options type is associated with each dataflow block type.</span></span>  
  
|<span data-ttu-id="e8786-325">Tipo de bloco de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e8786-325">Dataflow Block Type</span></span>|<span data-ttu-id="e8786-326">Tipo <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions></span><span class="sxs-lookup"><span data-stu-id="e8786-326"><xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions> type</span></span>|  
|-------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|  
|<xref:System.Threading.Tasks.Dataflow.BufferBlock%601>|<xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601>|<xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601>|<xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|<xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.BatchBlock%601>|<xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.JoinBlock%602>|<xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>|<xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions>|  
  
 <span data-ttu-id="e8786-327">As seções a seguir fornecem mais informações sobre os tipos importantes de opções de blocos de fluxo de dados que estão disponíveis por meio das classes <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e8786-327">The following sections provide additional information about the important kinds of dataflow block options that are available through the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions?displayProperty=nameWithType> classes.</span></span>  
  
### <a name="specifying-the-task-scheduler"></a><span data-ttu-id="e8786-328">Especificando o Agendador de Tarefas</span><span class="sxs-lookup"><span data-stu-id="e8786-328">Specifying the Task Scheduler</span></span>  
 <span data-ttu-id="e8786-329">Cada bloco de fluxo de dados predefinidos usa o mecanismo de agendamento de tarefas TPL para executar atividades como a propagação de dados para um destino, o recebimento de dados de uma origem e a execução de delegados definidos pelo usuário quando os dados tornam-se disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e8786-329">Every predefined dataflow block uses the TPL task scheduling mechanism to perform activities such as propagating data to a target, receiving data from a source, and running user-defined delegates when data becomes available.</span></span> <span data-ttu-id="e8786-330"><xref:System.Threading.Tasks.TaskScheduler> é uma classe abstrata que representa um agendador de tarefas que coloca as tarefas na fila, em threads.</span><span class="sxs-lookup"><span data-stu-id="e8786-330"><xref:System.Threading.Tasks.TaskScheduler> is an abstract class that represents a task scheduler that queues tasks onto threads.</span></span> <span data-ttu-id="e8786-331">O agendador de tarefas padrão, <xref:System.Threading.Tasks.TaskScheduler.Default%2A>, usa a classe <xref:System.Threading.ThreadPool> para colocar o trabalho na fila e executá-lo.</span><span class="sxs-lookup"><span data-stu-id="e8786-331">The default task scheduler, <xref:System.Threading.Tasks.TaskScheduler.Default%2A>, uses the <xref:System.Threading.ThreadPool> class to queue and execute work.</span></span> <span data-ttu-id="e8786-332">Você pode substituir o agendador de tarefas padrão definindo a propriedade <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.TaskScheduler%2A> ao construir um objeto de bloco de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-332">You can override the default task scheduler by setting the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.TaskScheduler%2A> property when you construct a dataflow block object.</span></span>  
  
 <span data-ttu-id="e8786-333">Quando o mesmo agendador de tarefas gerencia vários blocos de fluxo de dados, ele pode impor políticas entre eles.</span><span class="sxs-lookup"><span data-stu-id="e8786-333">When the same task scheduler manages multiple dataflow blocks, it can enforce policies across them.</span></span> <span data-ttu-id="e8786-334">Por exemplo, se cada um dos vários blocos de fluxo de dados forem configurados para usar como destino o agendador exclusivo do mesmo objeto <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair>, todo o trabalho que é executado entre esses blocos será serializado.</span><span class="sxs-lookup"><span data-stu-id="e8786-334">For example, if multiple dataflow blocks are each configured to target the exclusive scheduler of the same <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> object, all work that runs across these blocks is serialized.</span></span> <span data-ttu-id="e8786-335">De modo similar, se esses blocos são configurados para usar como destino o agendador simultâneo do mesmo objeto <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> e esse agendador é configurado para ter um nível de simultaneidade máximo, todo o trabalho desses blocos é limitado a esse número de operações simultâneas.</span><span class="sxs-lookup"><span data-stu-id="e8786-335">Similarly, if these blocks are configured to target the concurrent scheduler of the same <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> object, and that scheduler is configured to have a maximum concurrency level, all work from these blocks is limited to that number of concurrent operations.</span></span> <span data-ttu-id="e8786-336">Para obter um exemplo que usa a classe <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> para habilitar a realização de operações de leitura em paralelo mas mantém as operações de gravação ocorrendo de modo exclusivo com relação a todas as outras operações, confira [Como especificar um agendador de tarefas em um bloco de fluxo de dados](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-336">For an example that uses the <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> class to enable read operations to occur in parallel, but write operations to occur exclusively of all other operations, see [How to: Specify a Task Scheduler in a Dataflow Block](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md).</span></span> <span data-ttu-id="e8786-337">Para saber mais sobre os agendadores de tarefas na TPL, confira o tópico da classe <xref:System.Threading.Tasks.TaskScheduler>.</span><span class="sxs-lookup"><span data-stu-id="e8786-337">For more information about task schedulers in the TPL, see the <xref:System.Threading.Tasks.TaskScheduler> class topic.</span></span>  
  
### <a name="specifying-the-degree-of-parallelism"></a><span data-ttu-id="e8786-338">Especificando o grau de paralelismo</span><span class="sxs-lookup"><span data-stu-id="e8786-338">Specifying the Degree of Parallelism</span></span>  
 <span data-ttu-id="e8786-339">Por padrão, os três tipos de blocos de execução que a biblioteca de fluxo de dados TPL fornece, <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>, processam uma mensagem por vez.</span><span class="sxs-lookup"><span data-stu-id="e8786-339">By default, the three execution block types that the TPL Dataflow Library provides, <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>, and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>, process one message at a time.</span></span> <span data-ttu-id="e8786-340">Esses tipos de bloco de fluxo de dados também processam mensagens na ordem em que elas são recebidas.</span><span class="sxs-lookup"><span data-stu-id="e8786-340">These dataflow block types also process messages in the order in which they are received.</span></span> <span data-ttu-id="e8786-341">Para habilitar esses blocos de fluxo de dados para processar mensagens simultaneamente, defina a propriedade <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A?displayProperty=nameWithType> ao construir o objeto de bloco de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-341">To enable these dataflow blocks to process messages concurrently, set the <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A?displayProperty=nameWithType> property when you construct the dataflow block object.</span></span>  
  
 <span data-ttu-id="e8786-342">O valor padrão de <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> é 1 e isso garante que o bloco de fluxo de dados processa uma mensagem por vez.</span><span class="sxs-lookup"><span data-stu-id="e8786-342">The default value of <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> is 1, which guarantees that the dataflow block processes one message at a time.</span></span> <span data-ttu-id="e8786-343">Definir essa propriedade como um valor maior que 1 permite que o bloco de fluxo de dados processe várias mensagens simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="e8786-343">Setting this property to a value that is larger than 1 enables the dataflow block to process multiple messages concurrently.</span></span> <span data-ttu-id="e8786-344">Definir essa propriedade como <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded?displayProperty=nameWithType> permite que o agendador de tarefas subjacente gerencie o grau máximo de simultaneidade.</span><span class="sxs-lookup"><span data-stu-id="e8786-344">Setting this property to <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded?displayProperty=nameWithType> enables the underlying task scheduler to manage the maximum degree of concurrency.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="e8786-345">Quando você especifica um grau máximo de paralelismo maior do que 1, várias mensagens são processadas simultaneamente e, portanto, as mensagens talvez não sejam processadas na ordem em que são recebidas.</span><span class="sxs-lookup"><span data-stu-id="e8786-345">When you specify a maximum degree of parallelism that is larger than 1, multiple messages are processed simultaneously, and therefore messages might not be processed in the order in which they are received.</span></span> <span data-ttu-id="e8786-346">A ordem na qual as mensagens são a saída do bloco é, no entanto, a mesma na qual elas são recebidas.</span><span class="sxs-lookup"><span data-stu-id="e8786-346">The order in which the messages are output from the block is, however, the same one in which they are received.</span></span>  
  
 <span data-ttu-id="e8786-347">Como a propriedade <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> representa o grau máximo de paralelismo, o bloco de fluxo de dados pode executar com um menor grau de paralelismo do que o especificado.</span><span class="sxs-lookup"><span data-stu-id="e8786-347">Because the <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> property represents the maximum degree of parallelism, the dataflow block might execute with a lesser degree of parallelism than you specify.</span></span> <span data-ttu-id="e8786-348">O bloco de fluxo de dados pode usar um grau menor de paralelismo para atender aos seus requisitos funcionais ou porque há uma falta de recursos do sistema disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e8786-348">The dataflow block might use a lesser degree of parallelism to meet its functional requirements or because there is a lack of available system resources.</span></span> <span data-ttu-id="e8786-349">Um bloco de fluxo de dados nunca escolherá mais paralelismo do que você especificar.</span><span class="sxs-lookup"><span data-stu-id="e8786-349">A dataflow block never chooses more parallelism than you specify.</span></span>  
  
 <span data-ttu-id="e8786-350">O valor da propriedade <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> é exclusivo para cada objeto de bloco de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-350">The value of the <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> property is exclusive to each dataflow block object.</span></span> <span data-ttu-id="e8786-351">Por exemplo, se cada um de quatro objetos de bloco de fluxo de dados especificar 1 para o grau máximo de paralelismo, todos esses objetos poderão potencialmente ser executados em paralelo.</span><span class="sxs-lookup"><span data-stu-id="e8786-351">For example, if four dataflow block objects each specify 1 for the maximum degree of parallelism, all four dataflow block objects can potentially run in parallel.</span></span>  
  
 <span data-ttu-id="e8786-352">Para obter um exemplo que define o grau máximo de paralelismo para permitir que operações demoradas ocorram em paralelo, consulte [Como especificar o grau de paralelismo em um bloco de fluxo de dados](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-352">For an example that sets the maximum degree of parallelism to enable lengthy operations to occur in parallel, see [How to: Specify the Degree of Parallelism in a Dataflow Block](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md).</span></span>  
  
### <a name="specifying-the-number-of-messages-per-task"></a><span data-ttu-id="e8786-353">Especificando o número de mensagens por tarefa</span><span class="sxs-lookup"><span data-stu-id="e8786-353">Specifying the Number of Messages per Task</span></span>  
 <span data-ttu-id="e8786-354">Os tipos de bloco de fluxo de dados predefinidos usam tarefas para processar vários elementos de entrada.</span><span class="sxs-lookup"><span data-stu-id="e8786-354">The predefined dataflow block types use tasks to process multiple input elements.</span></span> <span data-ttu-id="e8786-355">Isso ajuda a minimizar o número de objetos de tarefa que são necessários para processar dados, o que permite que aplicativos sejam executados com mais eficiência.</span><span class="sxs-lookup"><span data-stu-id="e8786-355">This helps minimize the number of task objects that are required to process data, which enables applications to run more efficiently.</span></span> <span data-ttu-id="e8786-356">No entanto, quando as tarefas de um conjunto de blocos de fluxo de dados estão processando dados, talvez seja necessário que as tarefas de outros blocos de fluxo de dados esperem o tempo de processamento colocando mensagens na fila.</span><span class="sxs-lookup"><span data-stu-id="e8786-356">However, when the tasks from one set of dataflow blocks are processing data, the tasks from other dataflow blocks might need to wait for processing time by queuing messages.</span></span> <span data-ttu-id="e8786-357">Para permitir melhor integridade entre tarefas de fluxo de dados, defina a propriedade <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A>.</span><span class="sxs-lookup"><span data-stu-id="e8786-357">To enable better fairness among dataflow tasks, set the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> property.</span></span> <span data-ttu-id="e8786-358">Quando <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> é definido como <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded?displayProperty=nameWithType>, que é o padrão, a tarefa usada por um bloco de fluxo de dados processa as mensagens que estiverem disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e8786-358">When <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> is set to <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded?displayProperty=nameWithType>, which is the default, the task used by a dataflow block processes as many messages as are available.</span></span> <span data-ttu-id="e8786-359">Quando <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> é definido com um valor diferente de <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded>, o bloco de fluxo de dados processa no máximo esse número de mensagens por objeto <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="e8786-359">When <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> is set to a value other than <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded>, the dataflow block processes at most this number of messages per <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="e8786-360">Embora definir a propriedade <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> possa aumentar a honestidade entre tarefas, isso pode fazer com que o sistema crie mais tarefas do que o necessário, o que pode diminuir o desempenho.</span><span class="sxs-lookup"><span data-stu-id="e8786-360">Although setting the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> property can increase fairness among tasks, it can cause the system to create more tasks than are necessary, which can decrease performance.</span></span>  
  
### <a name="enabling-cancellation"></a><span data-ttu-id="e8786-361">Habilitando o cancelamento</span><span class="sxs-lookup"><span data-stu-id="e8786-361">Enabling Cancellation</span></span>  
 <span data-ttu-id="e8786-362">A TPL fornece um mecanismo que permite que as tarefas coordenem o cancelamento de forma cooperativa.</span><span class="sxs-lookup"><span data-stu-id="e8786-362">The TPL provides a mechanism that enables tasks to coordinate cancellation in a cooperative manner.</span></span> <span data-ttu-id="e8786-363">Para habilitar os blocos de fluxo de dados a participarem desse mecanismo de cancelamento, defina a propriedade <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A>.</span><span class="sxs-lookup"><span data-stu-id="e8786-363">To enable dataflow blocks to participate in this cancellation mechanism, set the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A> property.</span></span> <span data-ttu-id="e8786-364">Quando esse objeto <xref:System.Threading.CancellationToken> é definido como estado cancelado, todos os blocos de fluxo de dados que monitoram esse token concluem a execução do seu item atual, mas não iniciam o processamento de itens subsequentes.</span><span class="sxs-lookup"><span data-stu-id="e8786-364">When this <xref:System.Threading.CancellationToken> object is set to the canceled state, all dataflow blocks that monitor this token finish execution of their current item but do not start processing subsequent items.</span></span> <span data-ttu-id="e8786-365">Esses blocos de fluxo de dados também limpam quaisquer mensagens armazenadas em buffer, cancelam as conexões com quaisquer blocos de origem e de destino e fazem a transição para o estado cancelado.</span><span class="sxs-lookup"><span data-stu-id="e8786-365">These dataflow blocks also clear any buffered messages, release connections to any source and target blocks, and transition to the canceled state.</span></span> <span data-ttu-id="e8786-366">Ao fazer a transição para o estado cancelado, a propriedade <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> tem a propriedade <xref:System.Threading.Tasks.Task.Status%2A> definida como <xref:System.Threading.Tasks.TaskStatus.Canceled>, a menos que uma exceção ocorra durante o processamento.</span><span class="sxs-lookup"><span data-stu-id="e8786-366">By transitioning to the canceled state, the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> property has the <xref:System.Threading.Tasks.Task.Status%2A> property set to <xref:System.Threading.Tasks.TaskStatus.Canceled>, unless an exception occurred during processing.</span></span> <span data-ttu-id="e8786-367">Nesse caso, <xref:System.Threading.Tasks.Task.Status%2A> está definido como <xref:System.Threading.Tasks.TaskStatus.Faulted>.</span><span class="sxs-lookup"><span data-stu-id="e8786-367">In that case, <xref:System.Threading.Tasks.Task.Status%2A> is set to <xref:System.Threading.Tasks.TaskStatus.Faulted>.</span></span>  
  
 <span data-ttu-id="e8786-368">Para obter um exemplo que demonstra como usar cancelamento em um aplicativo Windows Forms, consulte [Como cancelar um bloco de fluxo de dados](../../../docs/standard/parallel-programming/how-to-cancel-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-368">For an example that demonstrates how to use cancellation in a Windows Forms application, see [How to: Cancel a Dataflow Block](../../../docs/standard/parallel-programming/how-to-cancel-a-dataflow-block.md).</span></span> <span data-ttu-id="e8786-369">Para obter mais informações sobre cancelamento na TPL, consulte [Cancelamento da tarefa](../../../docs/standard/parallel-programming/task-cancellation.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-369">For more information about cancellation in the TPL, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md).</span></span>  
  
### <a name="specifying-greedy-versus-non-greedy-behavior"></a><span data-ttu-id="e8786-370">Especificando comportamento greedy versus não greedy</span><span class="sxs-lookup"><span data-stu-id="e8786-370">Specifying Greedy Versus Non-Greedy Behavior</span></span>  
 <span data-ttu-id="e8786-371">Vários tipos de bloco de fluxo de dados de agrupamento podem operar em qualquer um dos modos *greedy* ou *não greedy*.</span><span class="sxs-lookup"><span data-stu-id="e8786-371">Several grouping dataflow block types can operate in either *greedy* or *non-greedy* mode.</span></span> <span data-ttu-id="e8786-372">Por padrão, os tipos de bloco de fluxo de dados predefinidos operam em modo greedy.</span><span class="sxs-lookup"><span data-stu-id="e8786-372">By default, the predefined dataflow block types operate in greedy mode.</span></span>  
  
 <span data-ttu-id="e8786-373">Para tipos de bloco de junção como <xref:System.Threading.Tasks.Dataflow.JoinBlock%602>, o modo greedy significa que o bloco aceita dados imediatamente, mesmo que os dados correspondentes com os quais se pretende realizar a junção não estejam disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e8786-373">For join block types such as <xref:System.Threading.Tasks.Dataflow.JoinBlock%602>, greedy mode means that the block immediately accepts data even if the corresponding data with which to join is not yet available.</span></span> <span data-ttu-id="e8786-374">O modo não greedy significa que o bloco adia todas as mensagens de entrada até que uma esteja disponível em cada um de seus destinos para concluir a junção.</span><span class="sxs-lookup"><span data-stu-id="e8786-374">Non-greedy mode means that the block postpones all incoming messages until one is available on each of its targets to complete the join.</span></span> <span data-ttu-id="e8786-375">Se qualquer uma das mensagens adiadas não estiver mais disponível, o bloco de junção liberará todas as mensagens adiadas e reiniciará o processo.</span><span class="sxs-lookup"><span data-stu-id="e8786-375">If any of the postponed messages are no longer available, the join block releases all postponed messages and restarts the process.</span></span> <span data-ttu-id="e8786-376">Para a classe <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, o comportamento greedy e não greedy é semelhante, exceto pelo fato de que no modo não greedy, um objeto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> adia todas as mensagens de entrada até que um número suficiente delas estejam disponíveis de origens distintas para completar um lote.</span><span class="sxs-lookup"><span data-stu-id="e8786-376">For the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> class, greedy and non-greedy behavior is similar, except that under non-greedy mode, a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object postpones all incoming messages until enough are available from distinct sources to complete a batch.</span></span>  
  
 <span data-ttu-id="e8786-377">Para especificar o modo não greedy para um bloco de fluxo de dados, defina <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions.Greedy%2A> como `False`.</span><span class="sxs-lookup"><span data-stu-id="e8786-377">To specify non-greedy mode for a dataflow block, set <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions.Greedy%2A> to `False`.</span></span> <span data-ttu-id="e8786-378">Para obter um exemplo que demonstra como usar o modo não greedy para habilitar vários blocos de junção compartilhar uma fonte de dados com mais eficiência, consulte [Como usar JoinBlock para ler dados de várias fontes](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-378">For an example that demonstrates how to use non-greedy mode to enable multiple join blocks to share a data source more efficiently, see [How to: Use JoinBlock to Read Data From Multiple Sources](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md).</span></span>  
  
 <span data-ttu-id="e8786-379">[[ir para o topo](#top)]</span><span class="sxs-lookup"><span data-stu-id="e8786-379">[[go to top](#top)]</span></span>  
  
<a name="custom"></a>   
## <a name="custom-dataflow-blocks"></a><span data-ttu-id="e8786-380">Blocos de fluxo de dados personalizados</span><span class="sxs-lookup"><span data-stu-id="e8786-380">Custom Dataflow Blocks</span></span>  
 <span data-ttu-id="e8786-381">Embora a biblioteca de fluxo de dados TPL forneça muitos tipos de bloco predefinidos, você pode criar tipos de bloco adicionais que tenham um comportamento personalizado.</span><span class="sxs-lookup"><span data-stu-id="e8786-381">Although the TPL Dataflow Library provides many predefined block types, you can create additional block types that perform custom behavior.</span></span> <span data-ttu-id="e8786-382">Implemente as interfaces <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> ou <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> diretamente ou use o método <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Encapsulate%2A> para criar um bloco complexo que encapsula o comportamento dos tipos de bloco existentes.</span><span class="sxs-lookup"><span data-stu-id="e8786-382">Implement the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> or <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> interfaces directly or use the  <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Encapsulate%2A> method to build a complex block that encapsulates the behavior of existing block types.</span></span> <span data-ttu-id="e8786-383">Para obter exemplos que mostram como implementar a funcionalidade de bloco de fluxo de dados personalizado, consulte [Passo a passo: criando um tipo de bloco de fluxo de dados personalizado](../../../docs/standard/parallel-programming/walkthrough-creating-a-custom-dataflow-block-type.md).</span><span class="sxs-lookup"><span data-stu-id="e8786-383">For examples that show how to implement custom dataflow block functionality, see [Walkthrough: Creating a Custom Dataflow Block Type](../../../docs/standard/parallel-programming/walkthrough-creating-a-custom-dataflow-block-type.md).</span></span>  
  
 <span data-ttu-id="e8786-384">[[ir para o topo](#top)]</span><span class="sxs-lookup"><span data-stu-id="e8786-384">[[go to top](#top)]</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="e8786-385">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="e8786-385">Related Topics</span></span>  
  
|<span data-ttu-id="e8786-386">Título</span><span class="sxs-lookup"><span data-stu-id="e8786-386">Title</span></span>|<span data-ttu-id="e8786-387">Descrição</span><span class="sxs-lookup"><span data-stu-id="e8786-387">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="e8786-388">Como gravar mensagens em um bloco de fluxo de dados e ler mensagens de um bloco de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e8786-388">How to: Write Messages to and Read Messages from a Dataflow Block</span></span>](../../../docs/standard/parallel-programming/how-to-write-messages-to-and-read-messages-from-a-dataflow-block.md)|<span data-ttu-id="e8786-389">Demonstra como gravar e ler mensagens de um objeto <xref:System.Threading.Tasks.Dataflow.BufferBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="e8786-389">Demonstrates how to write messages to and read messages from a <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> object.</span></span>|  
|[<span data-ttu-id="e8786-390">Como implementar um padrão de fluxo de dados de produtor-consumidor</span><span class="sxs-lookup"><span data-stu-id="e8786-390">How to: Implement a Producer-Consumer Dataflow Pattern</span></span>](../../../docs/standard/parallel-programming/how-to-implement-a-producer-consumer-dataflow-pattern.md)|<span data-ttu-id="e8786-391">Descreve como usar o modelo de fluxo de dados para implementar um padrão de produtor-consumidor, no qual o produtor envia mensagens para um bloco de fluxo de dados e o consumidor lê as mensagens desse bloco.</span><span class="sxs-lookup"><span data-stu-id="e8786-391">Describes how to use the dataflow model to implement a producer-consumer pattern, where the producer sends messages to a dataflow block, and the consumer reads messages from that block.</span></span>|  
|[<span data-ttu-id="e8786-392">Como executar ações quando um bloco de fluxo de dados recebe dados</span><span class="sxs-lookup"><span data-stu-id="e8786-392">How to: Perform Action When a Dataflow Block Receives Data</span></span>](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md)|<span data-ttu-id="e8786-393">Descreve como fornecer representantes para os tipos de bloco de fluxo de dados de execução, <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="e8786-393">Describes how to provide delegates to the execution dataflow block types, <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>, and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>.</span></span>|  
|[<span data-ttu-id="e8786-394">Passo a passo: criando um pipeline de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e8786-394">Walkthrough: Creating a Dataflow Pipeline</span></span>](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md)|<span data-ttu-id="e8786-395">Descreve como criar um pipeline de fluxo de dados que baixa texto da Web e executa operações nesse texto.</span><span class="sxs-lookup"><span data-stu-id="e8786-395">Describes how to create a dataflow pipeline that downloads text from the web and performs operations on that text.</span></span>|  
|[<span data-ttu-id="e8786-396">Como desvincular blocos de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e8786-396">How to: Unlink Dataflow Blocks</span></span>](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md)|<span data-ttu-id="e8786-397">Demonstra como usar o método <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A> para desvincular um bloco de destino de sua origem depois que a origem oferecer uma mensagem para o destino.</span><span class="sxs-lookup"><span data-stu-id="e8786-397">Demonstrates how to use the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A> method to unlink a target block from its source after the source offers a message to the target.</span></span>|  
|[<span data-ttu-id="e8786-398">Passo a passo: usando um fluxo de dados em um Aplicativo do Windows Forms</span><span class="sxs-lookup"><span data-stu-id="e8786-398">Walkthrough: Using Dataflow in a Windows Forms Application</span></span>](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md)|<span data-ttu-id="e8786-399">Demonstra como criar uma rede de blocos de fluxo de dados que executam o processamento de imagens em um Aplicativo do Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="e8786-399">Demonstrates how to create a network of dataflow blocks that perform image processing in a Windows Forms application.</span></span>|  
|[<span data-ttu-id="e8786-400">Como cancelar um bloco de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e8786-400">How to: Cancel a Dataflow Block</span></span>](../../../docs/standard/parallel-programming/how-to-cancel-a-dataflow-block.md)|<span data-ttu-id="e8786-401">Demonstra como usar cancelamento em um Aplicativo do Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="e8786-401">Demonstrates how to use cancellation in a Windows Forms application.</span></span>|  
|[<span data-ttu-id="e8786-402">Como usar JoinBlock para ler dados de várias fontes</span><span class="sxs-lookup"><span data-stu-id="e8786-402">How to: Use JoinBlock to Read Data From Multiple Sources</span></span>](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md)|<span data-ttu-id="e8786-403">Explica como usar a classe <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> para executar uma operação quando os dados estão disponíveis de várias fontes e como usar o modo não greedy para habilitar vários blocos de junção a compartilharem uma fonte de dados com mais eficiência.</span><span class="sxs-lookup"><span data-stu-id="e8786-403">Explains how to use the <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> class to perform an operation when data is available from multiple sources, and how to use non-greedy mode to enable multiple join blocks to share a data source more efficiently.</span></span>|  
|[<span data-ttu-id="e8786-404">Como especificar o grau de paralelismo em um bloco de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e8786-404">How to: Specify the Degree of Parallelism in a Dataflow Block</span></span>](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md)|<span data-ttu-id="e8786-405">Descreve como definir a propriedade <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> para habilitar um bloco de fluxo de execução a processar mais de uma mensagem por vez.</span><span class="sxs-lookup"><span data-stu-id="e8786-405">Describes how to set the <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> property to enable an execution dataflow block to process more than one message at a time.</span></span>|  
|[<span data-ttu-id="e8786-406">Como especificar um agendador de tarefas em um bloco de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="e8786-406">How to: Specify a Task Scheduler in a Dataflow Block</span></span>](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md)|<span data-ttu-id="e8786-407">Demonstra como associar um agendador de tarefas específico quando você usa o fluxo de dados em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e8786-407">Demonstrates how to associate a specific task scheduler when you use dataflow in your application.</span></span>|  
|[<span data-ttu-id="e8786-408">Passo a passo: usando BatchBlock e BatchedJoinBlock para aumentar a eficiência</span><span class="sxs-lookup"><span data-stu-id="e8786-408">Walkthrough: Using BatchBlock and BatchedJoinBlock to Improve Efficiency</span></span>](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md)|<span data-ttu-id="e8786-409">Descreve como usar a classe <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> para aumentar a eficiência das operações de inserção de banco de dados e como usar a classe <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> para capturar os resultados e também quaisquer exceções que ocorram enquanto o programa lê de um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="e8786-409">Describes how to use the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> class to improve the efficiency of database insert operations, and how to use the <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> class to capture both the results and any exceptions that occur while the program reads from a database.</span></span>|  
|[<span data-ttu-id="e8786-410">Passo a passo: criando um tipo de bloco de fluxo de dados personalizado</span><span class="sxs-lookup"><span data-stu-id="e8786-410">Walkthrough: Creating a Custom Dataflow Block Type</span></span>](../../../docs/standard/parallel-programming/walkthrough-creating-a-custom-dataflow-block-type.md)|<span data-ttu-id="e8786-411">Demonstra duas maneiras de criar um tipo de bloco de fluxo de dados que implementa o comportamento personalizado.</span><span class="sxs-lookup"><span data-stu-id="e8786-411">Demonstrates two ways to create a dataflow block type that implements custom behavior.</span></span>|  
|[<span data-ttu-id="e8786-412">TPL (Biblioteca de Paralelismo de Tarefas)</span><span class="sxs-lookup"><span data-stu-id="e8786-412">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)|<span data-ttu-id="e8786-413">Apresenta a TPL, uma biblioteca que simplifica a programação paralela e simultânea em aplicativos [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e8786-413">Introduces the TPL, a library that simplifies parallel and concurrent programming in [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] applications.</span></span>|
