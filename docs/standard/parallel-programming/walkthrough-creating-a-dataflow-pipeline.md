---
title: "Explicação passo a passo: Criando um pipeline de fluxo de dados"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- dataflow pipelines, creating with TPL
- Task Parallel Library, dataflows
- TPL dataflow library, creating dataflow pipeline
ms.assetid: 69308f82-aa22-4ac5-833d-e748533b58e8
caps.latest.revision: "11"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: d63fb872382bfc0a3ba3b8637c7357ab65c58fbf
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/18/2017
---
# <a name="walkthrough-creating-a-dataflow-pipeline"></a><span data-ttu-id="1a467-102">Explicação passo a passo: Criando um pipeline de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="1a467-102">Walkthrough: Creating a Dataflow Pipeline</span></span>
<span data-ttu-id="1a467-103">Embora você possa usar o <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, e <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> métodos para receber mensagens da origem blocos, você também pode conectar blocos de mensagens para formar um *pipeline de fluxo de dados*.</span><span class="sxs-lookup"><span data-stu-id="1a467-103">Although you can use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> methods to receive messages from source blocks, you can also connect message blocks to form a *dataflow pipeline*.</span></span> <span data-ttu-id="1a467-104">Um pipeline de fluxo de dados é uma série de componentes, ou *blocos de fluxo de dados*, cada uma delas executa uma tarefa específica que contribui para um objetivo maior.</span><span class="sxs-lookup"><span data-stu-id="1a467-104">A dataflow pipeline is a series of components, or *dataflow blocks*, each of which performs a specific task that contributes to a larger goal.</span></span> <span data-ttu-id="1a467-105">Todos os blocos de fluxo de dados em um pipeline de fluxo de dados executa o trabalho quando ele recebe uma mensagem de outro bloco de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="1a467-105">Every dataflow block in a dataflow pipeline performs work when it receives a message from another dataflow block.</span></span> <span data-ttu-id="1a467-106">Uma analogia para isso é uma linha de montagem para fabricação automóvel.</span><span class="sxs-lookup"><span data-stu-id="1a467-106">An analogy to this is an assembly line for automobile manufacturing.</span></span> <span data-ttu-id="1a467-107">Como cada veículo passa por meio da linha de assembly, uma estação monta o quadro, o outro instala o mecanismo e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="1a467-107">As each vehicle passes through the assembly line, one station assembles the frame, the next one installs the engine, and so on.</span></span> <span data-ttu-id="1a467-108">Como uma linha de montagem permite vários veículos a serem montados ao mesmo tempo, ele fornece melhor taxa de transferência que montar veículos completos um por vez.</span><span class="sxs-lookup"><span data-stu-id="1a467-108">Because an assembly line enables multiple vehicles to be assembled at the same time, it provides better throughput than assembling complete vehicles one at a time.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="1a467-109">A biblioteca de fluxo de dados TPL (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> namespace) não é distribuído com o [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1a467-109">The TPL Dataflow Library (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> namespace) is not distributed with the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span></span> <span data-ttu-id="1a467-110">Para instalar o <xref:System.Threading.Tasks.Dataflow> namespace, abra seu projeto no [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], escolha **gerenciar pacotes NuGet** no menu projeto e pesquise online o `Microsoft.Tpl.Dataflow` pacote.</span><span class="sxs-lookup"><span data-stu-id="1a467-110">To install the <xref:System.Threading.Tasks.Dataflow> namespace, open your project in [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], choose **Manage NuGet Packages** from the Project menu, and search online for the `Microsoft.Tpl.Dataflow` package.</span></span>  
  
 <span data-ttu-id="1a467-111">Este documento demonstra um pipeline de fluxo de dados que baixa o catálogo de *Ilíada de Homer* de um site da Web e pesquisas de texto para correspondência de palavras individuais com as palavras que inversa caracteres da primeira palavra.</span><span class="sxs-lookup"><span data-stu-id="1a467-111">This document demonstrates a dataflow pipeline that downloads the book *The Iliad of Homer* from a website and searches the text to match individual words with words that reverse the first word's characters.</span></span> <span data-ttu-id="1a467-112">A formação do pipeline de fluxo de dados neste documento consiste das seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="1a467-112">The formation of the dataflow pipeline in this document consists of the following steps:</span></span>  
  
1.  <span data-ttu-id="1a467-113">Crie os blocos de fluxo de dados que participam no pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-113">Create the dataflow blocks that participate in the pipeline.</span></span>  
  
2.  <span data-ttu-id="1a467-114">Conecte cada bloco de fluxo de dados para o próximo bloco no pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-114">Connect each dataflow block to the next block in the pipeline.</span></span> <span data-ttu-id="1a467-115">Cada bloco recebe como entrada a saída do bloco anterior no pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-115">Each block receives as input the output of the previous block in the pipeline.</span></span>  
  
3.  <span data-ttu-id="1a467-116">Para cada bloco de fluxo de dados, crie uma tarefa de continuação que define o próximo bloco para o estado concluído após a conclusão do bloco anterior.</span><span class="sxs-lookup"><span data-stu-id="1a467-116">For each dataflow block, create a continuation task that sets the next block to the completed state after the previous block finishes.</span></span>  
  
4.  <span data-ttu-id="1a467-117">Enviar dados para o início do pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-117">Post data to the head of the pipeline.</span></span>  
  
5.  <span data-ttu-id="1a467-118">Marca o início do pipeline como concluído.</span><span class="sxs-lookup"><span data-stu-id="1a467-118">Mark the head of the pipeline as completed.</span></span>  
  
6.  <span data-ttu-id="1a467-119">Aguarde até que o pipeline concluir todo o trabalho.</span><span class="sxs-lookup"><span data-stu-id="1a467-119">Wait for the pipeline to complete all work.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="1a467-120">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="1a467-120">Prerequisites</span></span>  
 <span data-ttu-id="1a467-121">Leitura [fluxo de dados](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) antes de começar este passo a passo.</span><span class="sxs-lookup"><span data-stu-id="1a467-121">Read [Dataflow](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) before you start this walkthrough.</span></span>  
  
## <a name="creating-a-console-application"></a><span data-ttu-id="1a467-122">Criando um aplicativo de Console</span><span class="sxs-lookup"><span data-stu-id="1a467-122">Creating a Console Application</span></span>  
 <span data-ttu-id="1a467-123">Em [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], crie um [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] ou [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] o projeto de aplicativo de Console.</span><span class="sxs-lookup"><span data-stu-id="1a467-123">In [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], create a [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] or [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] Console Application project.</span></span> <span data-ttu-id="1a467-124">Adicione uma referência a System.Threading.Tasks.Dataflow.dll.</span><span class="sxs-lookup"><span data-stu-id="1a467-124">Add a reference to System.Threading.Tasks.Dataflow.dll.</span></span>  
  
 <span data-ttu-id="1a467-125">Como alternativa, crie um arquivo e nomeie- `ReverseWords.cs` (`ReverseWords.vb` para [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), e, em seguida, execute o seguinte comando em uma janela de Prompt de comando do Visual Studio para compilar o projeto.</span><span class="sxs-lookup"><span data-stu-id="1a467-125">Alternatively, create a file and name it `ReverseWords.cs` (`ReverseWords.vb` for [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), and then run the following command in a Visual Studio Command Prompt window to compile the project.</span></span>  
  
 [!INCLUDE[csprcs](../../../includes/csprcs-md.md)]  
  
 <span data-ttu-id="1a467-126">**CSC.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span><span class="sxs-lookup"><span data-stu-id="1a467-126">**csc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span></span>  
  
 [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]  
  
 <span data-ttu-id="1a467-127">**Vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span><span class="sxs-lookup"><span data-stu-id="1a467-127">**vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span></span>  
  
 <span data-ttu-id="1a467-128">Adicione o seguinte código ao seu projeto para criar o aplicativo básico.</span><span class="sxs-lookup"><span data-stu-id="1a467-128">Add the following code to your project to create the basic application.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#2)]
 [!code-vb[TPLDataflow_Palindromes#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#2)]  
  
## <a name="creating-the-dataflow-blocks"></a><span data-ttu-id="1a467-129">Criar blocos de fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="1a467-129">Creating the Dataflow Blocks</span></span>  
 <span data-ttu-id="1a467-130">Adicione o seguinte código para o `Main` método para criar os blocos de fluxo de dados que participam no pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-130">Add the following code to the `Main` method to create the dataflow blocks that participate in the pipeline.</span></span> <span data-ttu-id="1a467-131">A tabela a seguir resume a função de cada membro do pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-131">The table that follows summarizes the role of each member of the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#3)]
 [!code-vb[TPLDataflow_Palindromes#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#3)]  
  
|<span data-ttu-id="1a467-132">Membro</span><span class="sxs-lookup"><span data-stu-id="1a467-132">Member</span></span>|<span data-ttu-id="1a467-133">Tipo</span><span class="sxs-lookup"><span data-stu-id="1a467-133">Type</span></span>|<span data-ttu-id="1a467-134">Descrição</span><span class="sxs-lookup"><span data-stu-id="1a467-134">Description</span></span>|  
|------------|----------|-----------------|  
|`downloadString`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="1a467-135">Baixa o texto de catálogo da Web.</span><span class="sxs-lookup"><span data-stu-id="1a467-135">Downloads the book text from the Web.</span></span>|  
|`createWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="1a467-136">Separa o texto de catálogo em uma matriz de palavras.</span><span class="sxs-lookup"><span data-stu-id="1a467-136">Separates the book text into an array of words.</span></span>|  
|`filterWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="1a467-137">Remove a palavras curtas da palavra de matriz, pedidos as palavras resultantes em ordem alfabética e removem duplicatas.</span><span class="sxs-lookup"><span data-stu-id="1a467-137">Removes short words from the word array, orders the resulting words alphabetically, and remove duplicates.</span></span>|  
|`findReversedWords`|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|<span data-ttu-id="1a467-138">Localiza todas as palavras da coleção de matriz de word filtrado cujo inverso também ocorre na matriz de word.</span><span class="sxs-lookup"><span data-stu-id="1a467-138">Finds all words in the filtered word array collection whose reverse also occurs in the word array.</span></span>|  
|`printReversedWords`|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<span data-ttu-id="1a467-139">Exibe palavras e o inverso correspondente para o console.</span><span class="sxs-lookup"><span data-stu-id="1a467-139">Displays words and the corresponding reverse words to the console.</span></span>|  
  
 <span data-ttu-id="1a467-140">Embora você pode combinar várias etapas no pipeline de fluxo de dados neste exemplo em uma única etapa, o exemplo ilustra o conceito de composição de várias tarefas de fluxo de dados independente para executar uma tarefa maior.</span><span class="sxs-lookup"><span data-stu-id="1a467-140">Although you could combine multiple steps in the dataflow pipeline in this example into one step, the example illustrates the concept of composing multiple independent dataflow tasks to perform a larger task.</span></span> <span data-ttu-id="1a467-141">O exemplo usa <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> para habilitar cada membro do pipeline executar uma operação em seus dados de entrada e enviar os resultados para a próxima etapa no pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-141">The example uses <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> to enable each member of the pipeline to perform an operation on its input data and send the results to the next step in the pipeline.</span></span> <span data-ttu-id="1a467-142">O `findReversedWords` membro do pipeline é um <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> porque ele produz várias saídas independentes para cada entrada.</span><span class="sxs-lookup"><span data-stu-id="1a467-142">The `findReversedWords` member of the pipeline is a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object because it produces multiple independent outputs for each input.</span></span> <span data-ttu-id="1a467-143">A parte final do pipeline, `printReversedWords`, é um <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> porque ele executa uma ação em sua entrada e produz um resultado.</span><span class="sxs-lookup"><span data-stu-id="1a467-143">The tail of the pipeline, `printReversedWords`, is a <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object because it performs an action on its input, and does not produce a result.</span></span>  
  
## <a name="forming-the-pipeline"></a><span data-ttu-id="1a467-144">Cria o Pipeline</span><span class="sxs-lookup"><span data-stu-id="1a467-144">Forming the Pipeline</span></span>  
 <span data-ttu-id="1a467-145">Adicione o código a seguir para se conectar a cada bloco para o próximo bloco no pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-145">Add the following code to connect each block to the next block in the pipeline.</span></span>  
  
 <span data-ttu-id="1a467-146">Quando você chama o <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> método para se conectar a um bloco de fluxo de dados de origem para um bloco de fluxo de dados de destino, o bloco de fluxo de dados de origem propaga dados para o bloco de destino, como os dados ficarão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="1a467-146">When you call the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method to connect a source dataflow block to a target dataflow block, the source dataflow block propagates data to the target block as data becomes available.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#4)]
 [!code-vb[TPLDataflow_Palindromes#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#4)]  
  
## <a name="creating-the-completion-tasks"></a><span data-ttu-id="1a467-147">Criando as tarefas de conclusão</span><span class="sxs-lookup"><span data-stu-id="1a467-147">Creating the Completion Tasks</span></span>  
 <span data-ttu-id="1a467-148">Adicione o código a seguir para habilitar cada bloco de fluxo de dados executar uma ação final após processar todos os dados.</span><span class="sxs-lookup"><span data-stu-id="1a467-148">Add the following code to enable each dataflow block to perform a final action after it processes all data.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#5)]
 [!code-vb[TPLDataflow_Palindromes#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#5)]  
  
 <span data-ttu-id="1a467-149">Para propagar conclusão por meio do pipeline, cada tarefa de conclusão define o próximo bloco de fluxo de dados para o estado concluído.</span><span class="sxs-lookup"><span data-stu-id="1a467-149">To propagate completion through the pipeline, each completion task sets the next dataflow block to the completed state.</span></span> <span data-ttu-id="1a467-150">Por exemplo, quando o início do pipeline é definido para o estado concluído, processa quaisquer mensagens em buffer restantes e, em seguida, executa sua tarefa de conclusão, que define o segundo membro de pipeline para o estado concluído.</span><span class="sxs-lookup"><span data-stu-id="1a467-150">For example, when the head of the pipeline is set to the completed state, it processes any remaining buffered messages and then runs its completion task, which sets the second member of the pipeline to the completed state.</span></span> <span data-ttu-id="1a467-151">O segundo membro de pipeline por sua vez processa quaisquer mensagens em buffer restantes e, em seguida, executa sua tarefa de conclusão, que define o terceiro membro do pipeline para o estado concluído.</span><span class="sxs-lookup"><span data-stu-id="1a467-151">The second member of the pipeline in turn processes any remaining buffered messages and then runs its completion task, which sets the third member of the pipeline to the completed state.</span></span> <span data-ttu-id="1a467-152">Esse processo continua até que todos os membros do pipeline de conclusão.</span><span class="sxs-lookup"><span data-stu-id="1a467-152">This process continues until all members of the pipeline finish.</span></span> <span data-ttu-id="1a467-153">Este exemplo usa o `delegate` palavra-chave (`Function` em [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) para definir as tarefas de continuação.</span><span class="sxs-lookup"><span data-stu-id="1a467-153">This example uses the `delegate` keyword (`Function` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) to define the continuation tasks.</span></span>  
  
## <a name="posting-data-to-the-pipeline"></a><span data-ttu-id="1a467-154">Enviar dados para o Pipeline</span><span class="sxs-lookup"><span data-stu-id="1a467-154">Posting Data to the Pipeline</span></span>  
 <span data-ttu-id="1a467-155">Adicione o seguinte código para postar a URL do catálogo de *Ilíada de Homer* para o início do pipeline de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="1a467-155">Add the following code to post the URL of the book *The Iliad of Homer* to the head of the dataflow pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#6)]
 [!code-vb[TPLDataflow_Palindromes#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#6)]  
  
 <span data-ttu-id="1a467-156">Este exemplo usa <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> de forma síncrona enviar dados para o início do pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-156">This example uses <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> to synchronously send data to the head of the pipeline.</span></span> <span data-ttu-id="1a467-157">Use o <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> método quando você assincronamente deve enviar dados para um nó de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="1a467-157">Use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> method when you must asynchronously send data to a dataflow node.</span></span>  
  
## <a name="completing-pipeline-activity"></a><span data-ttu-id="1a467-158">Concluir a atividade de Pipeline</span><span class="sxs-lookup"><span data-stu-id="1a467-158">Completing Pipeline Activity</span></span>  
 <span data-ttu-id="1a467-159">Adicione o seguinte código para marcar o início do pipeline como concluído.</span><span class="sxs-lookup"><span data-stu-id="1a467-159">Add the following code to mark the head of the pipeline as completed.</span></span> <span data-ttu-id="1a467-160">O início do pipeline executa sua tarefa de continuação após processar em buffer todas as mensagens.</span><span class="sxs-lookup"><span data-stu-id="1a467-160">The head of the pipeline runs its continuation task after it processes all buffered messages.</span></span> <span data-ttu-id="1a467-161">Esta tarefa de continuação propaga o estado concluído por meio do pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-161">This continuation task propagates the completed state through the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#7)]
 [!code-vb[TPLDataflow_Palindromes#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#7)]  
  
 <span data-ttu-id="1a467-162">Este exemplo envia uma URL por meio do pipeline de fluxo de dados a ser processado.</span><span class="sxs-lookup"><span data-stu-id="1a467-162">This example sends one URL through the dataflow pipeline to be processed.</span></span> <span data-ttu-id="1a467-163">Se você enviar mais de uma entrada por meio de um pipeline, chame o <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> método depois que você enviar todas as entradas.</span><span class="sxs-lookup"><span data-stu-id="1a467-163">If you send more than one input through a pipeline, call the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> method after you submit all the input.</span></span> <span data-ttu-id="1a467-164">Você pode omitir essa etapa se seu aplicativo não tem nenhum ponto bem definido em que dados não estão mais disponíveis ou o aplicativo não precisa aguardar o término do pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-164">You can omit this step if your application has no well-defined point at which data is no longer available or the application does not have to wait for the pipeline to finish.</span></span>  
  
## <a name="waiting-for-the-pipeline-to-finish"></a><span data-ttu-id="1a467-165">Aguardando o término do Pipeline</span><span class="sxs-lookup"><span data-stu-id="1a467-165">Waiting for the Pipeline to Finish</span></span>  
 <span data-ttu-id="1a467-166">Adicione o seguinte código para aguardar o término do pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-166">Add the following code to wait for the pipeline to finish.</span></span> <span data-ttu-id="1a467-167">Como este exemplo usa as tarefas de continuação para propagar conclusão por meio do pipeline, a operação geral é concluída quando a conclusão da parte final do pipeline.</span><span class="sxs-lookup"><span data-stu-id="1a467-167">Because this example uses continuation tasks to propagate completion through the pipeline, the overall operation is finished when the tail of the pipeline finishes.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#8)]
 [!code-vb[TPLDataflow_Palindromes#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#8)]  
  
 <span data-ttu-id="1a467-168">Você pode aguardar a conclusão do fluxo de dados de qualquer thread ou de vários threads ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="1a467-168">You can wait for dataflow completion from any thread or from multiple threads at the same time.</span></span>  
  
## <a name="the-complete-example"></a><span data-ttu-id="1a467-169">O Exemplo Completo</span><span class="sxs-lookup"><span data-stu-id="1a467-169">The Complete Example</span></span>  
 <span data-ttu-id="1a467-170">O exemplo a seguir mostra o código completo para este passo a passo.</span><span class="sxs-lookup"><span data-stu-id="1a467-170">The following example shows the complete code for this walkthrough.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#1)]
 [!code-vb[TPLDataflow_Palindromes#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#1)]  
  
## <a name="next-steps"></a><span data-ttu-id="1a467-171">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="1a467-171">Next Steps</span></span>  
 <span data-ttu-id="1a467-172">Este exemplo envia uma URL para processar por meio do pipeline de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="1a467-172">This example sends one URL to process through the dataflow pipeline.</span></span> <span data-ttu-id="1a467-173">Se você enviar mais de um valor de entrada por meio de um pipeline, você pode introduzir um formulário de paralelismo em seu aplicativo que é semelhante a como partes podem percorrer uma fábrica de automóvel.</span><span class="sxs-lookup"><span data-stu-id="1a467-173">If you send more than one input value through a pipeline, you can introduce a form of parallelism into your application that resembles how parts might move through an automobile factory.</span></span> <span data-ttu-id="1a467-174">Quando o primeiro membro do pipeline envia o resultado para o segundo membro, que pode processar outro item em paralelo, como o segundo membro processa o primeiro resultado.</span><span class="sxs-lookup"><span data-stu-id="1a467-174">When the first member of the pipeline sends its result to the second member, it can process another item in parallel as the second member processes the first result.</span></span>  
  
 <span data-ttu-id="1a467-175">O paralelismo é obtido usando pipelines de fluxo de dados é conhecido como *paralelismo em blocos* porque normalmente ele consiste em tarefas maior menor.</span><span class="sxs-lookup"><span data-stu-id="1a467-175">The parallelism that is achieved by using dataflow pipelines is known as *coarse-grained parallelism* because it typically consists of fewer, larger tasks.</span></span> <span data-ttu-id="1a467-176">Você também pode usar uma mais *paralelismo refinado* de tarefas menores de curta execução em um pipeline de fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="1a467-176">You can also use a more *fine-grained parallelism* of smaller, short-running tasks in a dataflow pipeline.</span></span> <span data-ttu-id="1a467-177">Neste exemplo, o `findReversedWords` membro do pipeline usa o <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> método para processar vários itens na lista de trabalho em paralelo.</span><span class="sxs-lookup"><span data-stu-id="1a467-177">In this example, the `findReversedWords` member of the pipeline uses the <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> method to process multiple items in the work list in parallel.</span></span> <span data-ttu-id="1a467-178">O uso de paralelismo refinado em um pipeline de alta granularidade pode melhorar o desempenho geral.</span><span class="sxs-lookup"><span data-stu-id="1a467-178">The use of fine-grained parallelism in a coarse-grained pipeline can improve overall throughput.</span></span>  
  
 <span data-ttu-id="1a467-179">Você também pode conectar um bloco de fluxo de dados de origem para múltiplos blocos de destino para criar um *rede de fluxo de dados*.</span><span class="sxs-lookup"><span data-stu-id="1a467-179">You can also connect a source dataflow block to multiple target blocks to create a *dataflow network*.</span></span> <span data-ttu-id="1a467-180">A versão sobrecarregada do <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> leva um <xref:System.Predicate%601> objeto que define se o bloco de destino aceita cada mensagem com base em seu valor.</span><span class="sxs-lookup"><span data-stu-id="1a467-180">The overloaded version of the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method takes a <xref:System.Predicate%601> object that defines whether the target block accepts each message based on its value.</span></span> <span data-ttu-id="1a467-181">A maioria dos tipos de bloco fluxo de dados que agem como fontes de oferecem mensagens para todos os blocos de destino conectados, na ordem em que estavam conectados, até que um dos blocos de aceita essa mensagem.</span><span class="sxs-lookup"><span data-stu-id="1a467-181">Most dataflow block types that act as sources offer messages to all connected target blocks, in the order in which they were connected, until one of the blocks accepts that message.</span></span> <span data-ttu-id="1a467-182">Usando o mecanismo de filtragem, você pode criar sistemas de blocos de fluxo de dados conectada que direcionam determinados dados por meio de um caminho e outros dados por meio de outro caminho.</span><span class="sxs-lookup"><span data-stu-id="1a467-182">By using this filtering mechanism, you can create systems of connected dataflow blocks that direct certain data through one path and other data through another path.</span></span> <span data-ttu-id="1a467-183">Para obter um exemplo que usa a filtragem para criar uma rede de fluxo de dados, consulte [passo a passo: usando o fluxo de dados em um aplicativo do Windows Forms](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="1a467-183">For an example that uses filtering to create a dataflow network, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1a467-184">Consulte também</span><span class="sxs-lookup"><span data-stu-id="1a467-184">See Also</span></span>  
 [<span data-ttu-id="1a467-185">Fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="1a467-185">Dataflow</span></span>](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md)
