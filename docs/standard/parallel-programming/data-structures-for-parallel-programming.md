---
title: Estruturas de dados para programação paralela
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- data structures, multi-threading
ms.assetid: bdc82f2f-4754-45a1-a81e-fe2e9c30cef9
ms.openlocfilehash: cea9264a30469881e3ec54fc378af3ddb70bff8e
ms.sourcegitcommit: 6d09ae36acba0b0e2ba47999f8f1a725795462a2
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/29/2020
ms.locfileid: "92925318"
---
# <a name="data-structures-for-parallel-programming"></a><span data-ttu-id="e0163-102">Estruturas de dados para programação paralela</span><span class="sxs-lookup"><span data-stu-id="e0163-102">Data Structures for Parallel Programming</span></span>

<span data-ttu-id="e0163-103">O .NET fornece vários tipos úteis em programação paralela, incluindo um conjunto de classes de coleção simultâneas, primitivos de sincronização leves e tipos de inicialização lenta.</span><span class="sxs-lookup"><span data-stu-id="e0163-103">.NET provides several types that are useful in parallel programming, including a set of concurrent collection classes, lightweight synchronization primitives, and types for lazy initialization.</span></span> <span data-ttu-id="e0163-104">Você pode usar esses tipos com qualquer código de aplicativo multithread, incluindo PLINQ e biblioteca de paralelismo de tarefas.</span><span class="sxs-lookup"><span data-stu-id="e0163-104">You can use these types with any multithreaded application code, including the Task Parallel Library and PLINQ.</span></span>  
  
## <a name="concurrent-collection-classes"></a><span data-ttu-id="e0163-105">Classes de coleção simultâneas</span><span class="sxs-lookup"><span data-stu-id="e0163-105">Concurrent Collection Classes</span></span>  
 <span data-ttu-id="e0163-106">As classes de coleção no namespace <xref:System.Collections.Concurrent?displayProperty=nameWithType> fornecem operações de adição e remoção thread-safe que, sempre que possível, evitam bloqueios e usam o bloqueio refinado quando os bloqueios forem necessários.</span><span class="sxs-lookup"><span data-stu-id="e0163-106">The collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace provide thread-safe add and remove operations that avoid locks wherever possible and use fine-grained locking where locks are necessary.</span></span> <span data-ttu-id="e0163-107">Uma classe de coleção simultânea não exige que o código do usuário assuma nenhum bloqueio ao acessar itens.</span><span class="sxs-lookup"><span data-stu-id="e0163-107">A concurrent collection class does not require user code to take any locks when it accesses items.</span></span> <span data-ttu-id="e0163-108">As classes de coleção simultânea podem melhorar consideravelmente o desempenho em tipos como <xref:System.Collections.ArrayList?displayProperty=nameWithType> e <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (com bloqueio implementado pelo usuário) em cenários nos quais vários threads adicionam e removem itens de uma coleção.</span><span class="sxs-lookup"><span data-stu-id="e0163-108">The concurrent collection classes can significantly improve performance over types such as <xref:System.Collections.ArrayList?displayProperty=nameWithType> and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (with user-implemented locking) in scenarios where multiple threads add and remove items from a collection.</span></span>  
  
 <span data-ttu-id="e0163-109">A tabela a seguir lista as classes de coleção simultâneas:</span><span class="sxs-lookup"><span data-stu-id="e0163-109">The following table lists the concurrent collection classes:</span></span>  
  
|<span data-ttu-id="e0163-110">Tipo</span><span class="sxs-lookup"><span data-stu-id="e0163-110">Type</span></span>|<span data-ttu-id="e0163-111">Description</span><span class="sxs-lookup"><span data-stu-id="e0163-111">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType>|<span data-ttu-id="e0163-112">Fornece funcionalidades de bloqueio e delimitação para coleções thread-safe que implementam <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e0163-112">Provides blocking and bounding capabilities for thread-safe collections that implement <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="e0163-113">Os threads de produtor são bloqueados se nenhum slot estiver disponível, ou se a coleção estiver cheia.</span><span class="sxs-lookup"><span data-stu-id="e0163-113">Producer threads block if no slots are available or if the collection is full.</span></span> <span data-ttu-id="e0163-114">Threads de consumidor são bloqueados se a coleção estiver vazia.</span><span class="sxs-lookup"><span data-stu-id="e0163-114">Consumer threads block if the collection is empty.</span></span> <span data-ttu-id="e0163-115">Esse tipo também oferece suporte ao acesso sem bloqueio de produtores e consumidores.</span><span class="sxs-lookup"><span data-stu-id="e0163-115">This type also supports non-blocking access by consumers and producers.</span></span> <span data-ttu-id="e0163-116"><xref:System.Collections.Concurrent.BlockingCollection%601> pode ser usado como uma classe base ou repositório de backup para fornecer bloqueio e limitação a qualquer classe de coleção que ofereça suporte a <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="e0163-116"><xref:System.Collections.Concurrent.BlockingCollection%601> can be used as a base class or backing store to provide blocking and bounding for any collection class that supports <xref:System.Collections.Generic.IEnumerable%601>.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentBag%601?displayProperty=nameWithType>|<span data-ttu-id="e0163-117">Uma implementação de recipiente thread-safe que fornece operações de adição e get escalonáveis.</span><span class="sxs-lookup"><span data-stu-id="e0163-117">A thread-safe bag implementation that provides scalable add and get operations.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentDictionary%602?displayProperty=nameWithType>|<span data-ttu-id="e0163-118">Um tipo de dicionário simultâneo e escalonável.</span><span class="sxs-lookup"><span data-stu-id="e0163-118">A concurrent and scalable dictionary type.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentQueue%601?displayProperty=nameWithType>|<span data-ttu-id="e0163-119">Uma fila FIFO simultânea e escalonável.</span><span class="sxs-lookup"><span data-stu-id="e0163-119">A concurrent and scalable FIFO queue.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>|<span data-ttu-id="e0163-120">Uma pilha LIFO simultânea e escalonável.</span><span class="sxs-lookup"><span data-stu-id="e0163-120">A concurrent and scalable LIFO stack.</span></span>|  
  
 <span data-ttu-id="e0163-121">Para obter mais informações, veja [Coleções thread-safe](../collections/thread-safe/index.md).</span><span class="sxs-lookup"><span data-stu-id="e0163-121">For more information, see [Thread-Safe Collections](../collections/thread-safe/index.md).</span></span>  
  
## <a name="synchronization-primitives"></a><span data-ttu-id="e0163-122">Primitivos de sincronização</span><span class="sxs-lookup"><span data-stu-id="e0163-122">Synchronization Primitives</span></span>  
 <span data-ttu-id="e0163-123">Os primitivos de sincronização no <xref:System.Threading?displayProperty=nameWithType> namespace permitem uma simultaneidade refinada e desempenho mais rápido, evitando mecanismos de bloqueio caros encontrados no código multithread herdado.</span><span class="sxs-lookup"><span data-stu-id="e0163-123">The synchronization primitives in the <xref:System.Threading?displayProperty=nameWithType> namespace enable fine-grained concurrency and faster performance by avoiding expensive locking mechanisms found in legacy multithreading code.</span></span>
  
 <span data-ttu-id="e0163-124">A tabela a seguir lista os tipos de sincronização:</span><span class="sxs-lookup"><span data-stu-id="e0163-124">The following table lists the synchronization types:</span></span>  
  
|<span data-ttu-id="e0163-125">Tipo</span><span class="sxs-lookup"><span data-stu-id="e0163-125">Type</span></span>|<span data-ttu-id="e0163-126">Description</span><span class="sxs-lookup"><span data-stu-id="e0163-126">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Threading.Barrier?displayProperty=nameWithType>|<span data-ttu-id="e0163-127">Permite que vários threads funcionem em um algoritmo em paralelo fornecendo um ponto em que cada tarefa pode sinalizar sua chegada e, depois, gerar um bloqueio até que algumas ou todas as tarefas tenham chegado.</span><span class="sxs-lookup"><span data-stu-id="e0163-127">Enables multiple threads to work on an algorithm in parallel by providing a point at which each task can signal its arrival and then block until some or all tasks have arrived.</span></span> <span data-ttu-id="e0163-128">Para saber mais, consulte [Barreira](../threading/barrier.md).</span><span class="sxs-lookup"><span data-stu-id="e0163-128">For more information, see [Barrier](../threading/barrier.md).</span></span>|  
|<xref:System.Threading.CountdownEvent?displayProperty=nameWithType>|<span data-ttu-id="e0163-129">Simplifica cenários de bifurcação e junção fornecendo um mecanismo fácil de encontro.</span><span class="sxs-lookup"><span data-stu-id="e0163-129">Simplifies fork and join scenarios by providing an easy rendezvous mechanism.</span></span> <span data-ttu-id="e0163-130">Para saber mais, confira [CountdownEvent](../threading/countdownevent.md).</span><span class="sxs-lookup"><span data-stu-id="e0163-130">For more information, see [CountdownEvent](../threading/countdownevent.md).</span></span>|  
|<xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType>|<span data-ttu-id="e0163-131">Um primitivo de sincronização semelhante a <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e0163-131">A synchronization primitive similar to <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span></span> <span data-ttu-id="e0163-132"><xref:System.Threading.ManualResetEventSlim> é leve, mas só pode ser usado para comunicação entre processos.</span><span class="sxs-lookup"><span data-stu-id="e0163-132"><xref:System.Threading.ManualResetEventSlim> is lighter-weight but can only be used for intra-process communication.</span></span>|  
|<xref:System.Threading.SemaphoreSlim?displayProperty=nameWithType>|<span data-ttu-id="e0163-133">Um primitivo de sincronização que limita o número de threads que podem acessar simultaneamente um recurso ou um pool de recursos.</span><span class="sxs-lookup"><span data-stu-id="e0163-133">A synchronization primitive that limits the number of threads that can concurrently access a resource or a pool of resources.</span></span> <span data-ttu-id="e0163-134">Para saber mais, confira [Semaphore e SemaphoreSlim](../threading/semaphore-and-semaphoreslim.md).</span><span class="sxs-lookup"><span data-stu-id="e0163-134">For more information, see [Semaphore and SemaphoreSlim](../threading/semaphore-and-semaphoreslim.md).</span></span>|  
|<xref:System.Threading.SpinLock?displayProperty=nameWithType>|<span data-ttu-id="e0163-135">Um primitivo de bloqueio de exclusão mútua que faz com que o thread que está tentando adquirir o bloqueio aguarde em um loop, ou *rotação* , durante um período antes de gerar seu quantum.</span><span class="sxs-lookup"><span data-stu-id="e0163-135">A mutual exclusion lock primitive that causes the thread that is trying to acquire the lock to wait in a loop, or *spin* , for a period of time before yielding its quantum.</span></span> <span data-ttu-id="e0163-136">Em cenários nos quais a espera pelo bloqueio deve ser curta, <xref:System.Threading.SpinLock> oferece um desempenho melhor do que outras formas de bloqueio.</span><span class="sxs-lookup"><span data-stu-id="e0163-136">In scenarios where the wait for the lock is expected to be short, <xref:System.Threading.SpinLock> offers better performance than other forms of locking.</span></span> <span data-ttu-id="e0163-137">Para saber mais, veja [SpinLock](../threading/spinlock.md).</span><span class="sxs-lookup"><span data-stu-id="e0163-137">For more information, see [SpinLock](../threading/spinlock.md).</span></span>|  
|<xref:System.Threading.SpinWait?displayProperty=nameWithType>|<span data-ttu-id="e0163-138">Um tipo de pequeno e leve que girará por um tempo especificado e, no final, colocará o thread em um estado de espera se a contagem de rotações for ultrapassada.</span><span class="sxs-lookup"><span data-stu-id="e0163-138">A small, lightweight type that will spin for a specified time and eventually put the thread into a wait state if the spin count is exceeded.</span></span>  <span data-ttu-id="e0163-139">Para saber mais, veja [SpinWait](../threading/spinwait.md).</span><span class="sxs-lookup"><span data-stu-id="e0163-139">For more information, see [SpinWait](../threading/spinwait.md).</span></span>|  
  
 <span data-ttu-id="e0163-140">Para obter mais informações, consulte:</span><span class="sxs-lookup"><span data-stu-id="e0163-140">For more information, see:</span></span>  
  
- [<span data-ttu-id="e0163-141">Como usar SpinLock para sincronização de baixo nível</span><span class="sxs-lookup"><span data-stu-id="e0163-141">How to: Use SpinLock for Low-Level Synchronization</span></span>](../threading/how-to-use-spinlock-for-low-level-synchronization.md)  
  
- <span data-ttu-id="e0163-142">[Como sincronizar operações simultâneas com uma barreira](../threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span><span class="sxs-lookup"><span data-stu-id="e0163-142">[How to: Synchronize Concurrent Operations with a Barrier](../threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span></span>  
  
## <a name="lazy-initialization-classes"></a><span data-ttu-id="e0163-143">Classes de inicialização lenta</span><span class="sxs-lookup"><span data-stu-id="e0163-143">Lazy Initialization Classes</span></span>  
 <span data-ttu-id="e0163-144">Com a inicialização lenta, a memória de um objeto não é alocada até que seja necessário.</span><span class="sxs-lookup"><span data-stu-id="e0163-144">With lazy initialization, the memory for an object is not allocated until it is needed.</span></span> <span data-ttu-id="e0163-145">A inicialização lenta pode melhorar o desempenho distribuindo as alocações de objeto uniformemente entre o tempo de vida de um programa.</span><span class="sxs-lookup"><span data-stu-id="e0163-145">Lazy initialization can improve performance by spreading object allocations evenly across the lifetime of a program.</span></span> <span data-ttu-id="e0163-146">Você pode habilitar a inicialização lenta para qualquer tipo personalizado encapsulando o tipo <xref:System.Lazy%601>.</span><span class="sxs-lookup"><span data-stu-id="e0163-146">You can enable lazy initialization for any custom type by wrapping the type <xref:System.Lazy%601>.</span></span>  
  
 <span data-ttu-id="e0163-147">A tabela a seguir lista os tipos de inicialização lenta:</span><span class="sxs-lookup"><span data-stu-id="e0163-147">The following table lists the lazy initialization types:</span></span>  
  
|<span data-ttu-id="e0163-148">Tipo</span><span class="sxs-lookup"><span data-stu-id="e0163-148">Type</span></span>|<span data-ttu-id="e0163-149">Description</span><span class="sxs-lookup"><span data-stu-id="e0163-149">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Lazy%601?displayProperty=nameWithType>|<span data-ttu-id="e0163-150">Fornece inicialização lenta, leve e thread-safe.</span><span class="sxs-lookup"><span data-stu-id="e0163-150">Provides lightweight, thread-safe lazy-initialization.</span></span>|  
|<xref:System.Threading.ThreadLocal%601?displayProperty=nameWithType>|<span data-ttu-id="e0163-151">Fornece um valor com inicialização lenta em uma base por thread, com cada thread invocando lentamente a função de inicialização.</span><span class="sxs-lookup"><span data-stu-id="e0163-151">Provides a lazily-initialized value on a per-thread basis, with each thread lazily-invoking the initialization function.</span></span>|  
|<xref:System.Threading.LazyInitializer?displayProperty=nameWithType>|<span data-ttu-id="e0163-152">Fornece métodos estáticos que evitam a necessidade de alocar uma instância dedicada de inicialização lenta.</span><span class="sxs-lookup"><span data-stu-id="e0163-152">Provides static methods that avoid the need to allocate a dedicated, lazy-initialization instance.</span></span> <span data-ttu-id="e0163-153">Em vez disso, usam referências para garantir que os destinos sejam inicializados conforme são acessados.</span><span class="sxs-lookup"><span data-stu-id="e0163-153">Instead, they use references to ensure targets have been initialized as they are accessed.</span></span>|  
  
 <span data-ttu-id="e0163-154">Para obter mais informações, veja [Inicialização lenta](../../framework/performance/lazy-initialization.md).</span><span class="sxs-lookup"><span data-stu-id="e0163-154">For more information, see [Lazy Initialization](../../framework/performance/lazy-initialization.md).</span></span>  
  
## <a name="aggregate-exceptions"></a><span data-ttu-id="e0163-155">Agregar exceções</span><span class="sxs-lookup"><span data-stu-id="e0163-155">Aggregate Exceptions</span></span>  
 <span data-ttu-id="e0163-156">O tipo <xref:System.AggregateException?displayProperty=nameWithType> pode ser usado para capturar várias exceções lançadas simultaneamente em threads separados e retorná-las para o thread associado como uma única exceção.</span><span class="sxs-lookup"><span data-stu-id="e0163-156">The <xref:System.AggregateException?displayProperty=nameWithType> type can be used to capture multiple exceptions that are thrown concurrently on separate threads, and return them to the joining thread as a single exception.</span></span> <span data-ttu-id="e0163-157">Os tipos <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> e o PLINQ usam <xref:System.AggregateException> extensivamente para essa finalidade.</span><span class="sxs-lookup"><span data-stu-id="e0163-157">The <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> types and PLINQ use <xref:System.AggregateException> extensively for this purpose.</span></span> <span data-ttu-id="e0163-158">Para saber mais, veja [Tratamento de exceções](exception-handling-task-parallel-library.md) e [Como tratar exceções em uma consulta PLINQ](how-to-handle-exceptions-in-a-plinq-query.md).</span><span class="sxs-lookup"><span data-stu-id="e0163-158">For more information, see [Exception Handling](exception-handling-task-parallel-library.md) and [How to: Handle Exceptions in a PLINQ Query](how-to-handle-exceptions-in-a-plinq-query.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e0163-159">Veja também</span><span class="sxs-lookup"><span data-stu-id="e0163-159">See also</span></span>

- <xref:System.Collections.Concurrent?displayProperty=nameWithType>
- <xref:System.Threading?displayProperty=nameWithType>
- [<span data-ttu-id="e0163-160">Programação paralela</span><span class="sxs-lookup"><span data-stu-id="e0163-160">Parallel Programming</span></span>](index.md)
