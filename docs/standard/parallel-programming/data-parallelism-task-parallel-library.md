---
title: Paralelismo de dados (biblioteca de tarefas paralelas)
description: Leia como a TPL (biblioteca paralela de tarefas) dá suporte ao paralelismo de dados para fazer a mesma operação simultaneamente em uma coleção de origem ou elementos da matriz no .NET.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- parallelism, data
ms.assetid: 3f05f33f-f1da-4b16-81c2-9ceff1bef449
ms.openlocfilehash: ce034260fd3e6746bb7d516483b5e6872dfdc172
ms.sourcegitcommit: d8020797a6657d0fbbdff362b80300815f682f94
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/24/2020
ms.locfileid: "95699021"
---
# <a name="data-parallelism-task-parallel-library"></a><span data-ttu-id="c478d-103">Paralelismo de dados (biblioteca de tarefas paralelas)</span><span class="sxs-lookup"><span data-stu-id="c478d-103">Data Parallelism (Task Parallel Library)</span></span>

<span data-ttu-id="c478d-104">*Paralelismo de dados* refere-se a cenários em que a mesma operação é realizada simultaneamente (ou seja, em paralelo) em elementos em uma matriz ou coleção de origem.</span><span class="sxs-lookup"><span data-stu-id="c478d-104">*Data parallelism* refers to scenarios in which the same operation is performed concurrently (that is, in parallel) on elements in a source collection or array.</span></span> <span data-ttu-id="c478d-105">Nas operações paralelas de dados, a coleção de origem é particionada de modo que múltiplos threads possam operar em segmentos diferentes simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="c478d-105">In data parallel operations, the source collection is partitioned so that multiple threads can operate on different segments concurrently.</span></span>  
  
 <span data-ttu-id="c478d-106">A biblioteca de paralelismo de tarefas (TPL) suporta paralelismo de dados por meio da classe <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c478d-106">The Task Parallel Library (TPL) supports data parallelism through the <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="c478d-107">Essa classe fornece implementações paralelas baseadas em métodos dos loops [for](../../csharp/language-reference/keywords/for.md) e [foreach](../../csharp/language-reference/keywords/foreach-in.md) (`For` e `For Each` no Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="c478d-107">This class provides method-based parallel implementations of [for](../../csharp/language-reference/keywords/for.md) and [foreach](../../csharp/language-reference/keywords/foreach-in.md) loops (`For` and `For Each` in Visual Basic).</span></span> <span data-ttu-id="c478d-108">Você grava a lógica do loop para um loop <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> ou <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> tanto quanto você gravaria um loop sequencial.</span><span class="sxs-lookup"><span data-stu-id="c478d-108">You write the loop logic for a <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> or <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> loop much as you would write a sequential loop.</span></span> <span data-ttu-id="c478d-109">Você não precisa criar threads ou listar itens de trabalho.</span><span class="sxs-lookup"><span data-stu-id="c478d-109">You do not have to create threads or queue work items.</span></span> <span data-ttu-id="c478d-110">Nos loops básicos, você não precisa usar bloqueios.</span><span class="sxs-lookup"><span data-stu-id="c478d-110">In basic loops, you do not have to take locks.</span></span> <span data-ttu-id="c478d-111">A TPL manipula todo o trabalho de nível baixo para você.</span><span class="sxs-lookup"><span data-stu-id="c478d-111">The TPL handles all the low-level work for you.</span></span> <span data-ttu-id="c478d-112">Para obter informações detalhadas sobre o uso do <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> e do <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType>, baixe o documento [Padrões da programação paralela: Noções básicas e aplicação de padrões paralelos, com o .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222).</span><span class="sxs-lookup"><span data-stu-id="c478d-112">For in-depth information about the use of <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType>, download the document [Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222).</span></span> <span data-ttu-id="c478d-113">O exemplo de código a seguir mostra um loop `foreach` simples e seu equivalente paralelo.</span><span class="sxs-lookup"><span data-stu-id="c478d-113">The following code example shows a simple `foreach` loop and its parallel equivalent.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c478d-114">Esta documentação usa expressões lambda para definir delegados na TLP.</span><span class="sxs-lookup"><span data-stu-id="c478d-114">This documentation uses lambda expressions to define delegates in TPL.</span></span> <span data-ttu-id="c478d-115">Se você não estiver familiarizado com expressões lambda em C# ou Visual Basic, consulte [expressões lambda em PLINQ e TPL](lambda-expressions-in-plinq-and-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="c478d-115">If you are not familiar with lambda expressions in C# or Visual Basic, see [Lambda Expressions in PLINQ and TPL](lambda-expressions-in-plinq-and-tpl.md).</span></span>  
  
 [!code-csharp[TPL#20](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl/cs/tpl.cs#20)]
 [!code-vb[TPL#20](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl/vb/tpl_vb.vb#20)]  
  
 <span data-ttu-id="c478d-116">Quando um loop paralelo é executado, o TPL particiona a fonte de dados para que o loop possa operar em várias partes simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="c478d-116">When a parallel loop runs, the TPL partitions the data source so that the loop can operate on multiple parts concurrently.</span></span> <span data-ttu-id="c478d-117">Nos bastidores, o Agendador de Tarefas particiona a tarefa com base na carga de trabalho e recursos do sistema.</span><span class="sxs-lookup"><span data-stu-id="c478d-117">Behind the scenes, the Task Scheduler partitions the task based on system resources and workload.</span></span> <span data-ttu-id="c478d-118">Quando possível, o agendador redistribui o trabalho entre vários threads e processadores se a carga de trabalho ficar desequilibrada.</span><span class="sxs-lookup"><span data-stu-id="c478d-118">When possible, the scheduler redistributes work among multiple threads and processors if the workload becomes unbalanced.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c478d-119">Você também pode fornecer seu próprio particionador ou agendador personalizado.</span><span class="sxs-lookup"><span data-stu-id="c478d-119">You can also supply your own custom partitioner or scheduler.</span></span> <span data-ttu-id="c478d-120">Para obter mais informações, confira [Particionadores personalizados para PLINQ e TPL](custom-partitioners-for-plinq-and-tpl.md) e [Agendadores de tarefas](xref:System.Threading.Tasks.TaskScheduler).</span><span class="sxs-lookup"><span data-stu-id="c478d-120">For more information, see [Custom Partitioners for PLINQ and TPL](custom-partitioners-for-plinq-and-tpl.md) and [Task Schedulers](xref:System.Threading.Tasks.TaskScheduler).</span></span>  
  
 <span data-ttu-id="c478d-121">Ambos os métodos <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> têm várias sobrecargas que permitem parar ou interromper a execução do loop, monitorar o estado do loop em outros threads, manter o estado local do thread, finalizar os objetos locais do thread, controlar o grau de simultaneidade, e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="c478d-121">Both the <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> methods have several overloads that let you stop or break loop execution, monitor the state of the loop on other threads, maintain thread-local state, finalize thread-local objects, control the degree of concurrency, and so on.</span></span> <span data-ttu-id="c478d-122">Os tipos auxiliares que permitem essa funcionalidade incluem <xref:System.Threading.Tasks.ParallelLoopState>, <xref:System.Threading.Tasks.ParallelOptions>, <xref:System.Threading.Tasks.ParallelLoopResult>, <xref:System.Threading.CancellationToken>, e <xref:System.Threading.CancellationTokenSource>.</span><span class="sxs-lookup"><span data-stu-id="c478d-122">The helper types that enable this functionality include <xref:System.Threading.Tasks.ParallelLoopState>, <xref:System.Threading.Tasks.ParallelOptions>, <xref:System.Threading.Tasks.ParallelLoopResult>, <xref:System.Threading.CancellationToken>, and <xref:System.Threading.CancellationTokenSource>.</span></span>  
  
 <span data-ttu-id="c478d-123">Para obter mais informações, consulte [Padrões para programação paralela: noções básicas e aplicação de padrões paralelos com o .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222).</span><span class="sxs-lookup"><span data-stu-id="c478d-123">For more information, see [Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222).</span></span>  
  
 <span data-ttu-id="c478d-124">O paralelismo de dados com a sintaxe declarativa ou similar a uma consulta é suportado pelo PLINQ.</span><span class="sxs-lookup"><span data-stu-id="c478d-124">Data parallelism with declarative, or query-like, syntax is supported by PLINQ.</span></span> <span data-ttu-id="c478d-125">Para obter mais informações, consulte [PLINQ (Parallel LINQ)](introduction-to-plinq.md).</span><span class="sxs-lookup"><span data-stu-id="c478d-125">For more information, see [Parallel LINQ (PLINQ)](introduction-to-plinq.md).</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="c478d-126">Tópicos Relacionados</span><span class="sxs-lookup"><span data-stu-id="c478d-126">Related Topics</span></span>  
  
|<span data-ttu-id="c478d-127">Título</span><span class="sxs-lookup"><span data-stu-id="c478d-127">Title</span></span>|<span data-ttu-id="c478d-128">Descrição</span><span class="sxs-lookup"><span data-stu-id="c478d-128">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="c478d-129">Como: Escrever um loop Parallel.For simples</span><span class="sxs-lookup"><span data-stu-id="c478d-129">How to: Write a Simple Parallel.For Loop</span></span>](how-to-write-a-simple-parallel-for-loop.md)|<span data-ttu-id="c478d-130">Descreve como gravar um loop <xref:System.Threading.Tasks.Parallel.For%2A> sobre qualquer matriz ou coleção de origem <xref:System.Collections.Generic.IEnumerable%601> indexável.</span><span class="sxs-lookup"><span data-stu-id="c478d-130">Describes how to write a <xref:System.Threading.Tasks.Parallel.For%2A> loop over any array or indexable <xref:System.Collections.Generic.IEnumerable%601> source collection.</span></span>|  
|[<span data-ttu-id="c478d-131">Como: escrever um loop Parallel.ForEach simples</span><span class="sxs-lookup"><span data-stu-id="c478d-131">How to: Write a Simple Parallel.ForEach Loop</span></span>](how-to-write-a-simple-parallel-foreach-loop.md)|<span data-ttu-id="c478d-132">Descreve como gravar um loop <xref:System.Threading.Tasks.Parallel.ForEach%2A> sobre qualquer coleção de origem <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="c478d-132">Describes how to write a <xref:System.Threading.Tasks.Parallel.ForEach%2A> loop over any <xref:System.Collections.Generic.IEnumerable%601> source collection.</span></span>|  
|<span data-ttu-id="c478d-133">[Como parar ou interromper um loop Parallel.For](/previous-versions/dotnet/netframework-4.0/dd460721(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="c478d-133">[How to: Stop or Break from a Parallel.For Loop](/previous-versions/dotnet/netframework-4.0/dd460721(v=vs.100))</span></span>|<span data-ttu-id="c478d-134">Descreve como parar ou interromper um loop paralelo para que todos os threads sejam informados da ação.</span><span class="sxs-lookup"><span data-stu-id="c478d-134">Describes how to stop or break from a parallel loop so that all threads are informed of the action.</span></span>|  
|[<span data-ttu-id="c478d-135">Como: Gravar um loop Parallel.For com variáveis locais de thread</span><span class="sxs-lookup"><span data-stu-id="c478d-135">How to: Write a Parallel.For Loop with Thread-Local Variables</span></span>](how-to-write-a-parallel-for-loop-with-thread-local-variables.md)|<span data-ttu-id="c478d-136">Descreve como gravar um loop <xref:System.Threading.Tasks.Parallel.For%2A> em que cada thread mantém uma variável privada que não está visível para outros threads, e como sincronizar os resultados de todos os threads quando o loop for concluído.</span><span class="sxs-lookup"><span data-stu-id="c478d-136">Describes how to write a <xref:System.Threading.Tasks.Parallel.For%2A> loop in which each thread maintains a private variable that is not visible to any other threads, and how to synchronize the results from all threads when the loop completes.</span></span>|  
|[<span data-ttu-id="c478d-137">Como: escrever um loop Parallel.ForEach com variáveis locais de partição</span><span class="sxs-lookup"><span data-stu-id="c478d-137">How to: Write a Parallel.ForEach Loop with Partition-Local Variables</span></span>](how-to-write-a-parallel-foreach-loop-with-partition-local-variables.md)|<span data-ttu-id="c478d-138">Descreve como gravar um loop <xref:System.Threading.Tasks.Parallel.ForEach%2A> em que cada thread mantém uma variável privada que não está visível para outros threads, e como sincronizar os resultados de todos os threads quando o loop for concluído.</span><span class="sxs-lookup"><span data-stu-id="c478d-138">Describes how to write a <xref:System.Threading.Tasks.Parallel.ForEach%2A> loop in which each thread maintains a private variable that is not visible to any other threads, and how to synchronize the results from all threads when the loop completes.</span></span>|  
|[<span data-ttu-id="c478d-139">Como: Cancelar um loop Parallel.For ou ForEach</span><span class="sxs-lookup"><span data-stu-id="c478d-139">How to: Cancel a Parallel.For or ForEach Loop</span></span>](how-to-cancel-a-parallel-for-or-foreach-loop.md)|<span data-ttu-id="c478d-140">Descreve como cancelar um loop paralelo usando um <xref:System.Threading.CancellationToken?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="c478d-140">Describes how to cancel a parallel loop by using a <xref:System.Threading.CancellationToken?displayProperty=nameWithType></span></span>|  
|[<span data-ttu-id="c478d-141">Como: Acelerar corpos de loop pequenos</span><span class="sxs-lookup"><span data-stu-id="c478d-141">How to: Speed Up Small Loop Bodies</span></span>](how-to-speed-up-small-loop-bodies.md)|<span data-ttu-id="c478d-142">Descreve uma maneira de acelerar a execução quando um corpo de loop é muito pequeno.</span><span class="sxs-lookup"><span data-stu-id="c478d-142">Describes one way to speed up execution when a loop body is very small.</span></span>|  
|[<span data-ttu-id="c478d-143">Biblioteca de tarefas paralelas (TPL)</span><span class="sxs-lookup"><span data-stu-id="c478d-143">Task Parallel Library (TPL)</span></span>](task-parallel-library-tpl.md)|<span data-ttu-id="c478d-144">Fornece uma visão geral da biblioteca de paralelismo de tarefas.</span><span class="sxs-lookup"><span data-stu-id="c478d-144">Provides an overview of the Task Parallel Library.</span></span>|  
|[<span data-ttu-id="c478d-145">Programação paralela</span><span class="sxs-lookup"><span data-stu-id="c478d-145">Parallel Programming</span></span>](index.md)|<span data-ttu-id="c478d-146">Apresenta a Programação paralela no .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="c478d-146">Introduces Parallel Programming in the .NET Framework.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="c478d-147">Confira também</span><span class="sxs-lookup"><span data-stu-id="c478d-147">See also</span></span>

- [<span data-ttu-id="c478d-148">Programação paralela</span><span class="sxs-lookup"><span data-stu-id="c478d-148">Parallel Programming</span></span>](index.md)
