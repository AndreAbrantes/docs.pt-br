---
title: Tarefas filho anexadas e desanexadas
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: tasks, child tasks
ms.assetid: c95788bf-90a6-4e96-b7bc-58e36a228cc5
caps.latest.revision: "21"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: c1a0c664dffc2986d4d6985fd2b71cd8055bf2c9
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/21/2017
---
# <a name="attached-and-detached-child-tasks"></a><span data-ttu-id="3f92d-102">Tarefas filho anexadas e desanexadas</span><span class="sxs-lookup"><span data-stu-id="3f92d-102">Attached and Detached Child Tasks</span></span>
<span data-ttu-id="3f92d-103">Um *tarefa filho* (ou *tarefa aninhada*) é um <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> instância que é criada no delegado de usuário de outra tarefa, que é conhecido como o *tarefa pai de*.</span><span class="sxs-lookup"><span data-stu-id="3f92d-103">A *child task* (or *nested task*) is a <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> instance that is created in the user delegate of another task, which is known as the *parent task*.</span></span> <span data-ttu-id="3f92d-104">Uma tarefa filho pode ser desanexada ou anexada.</span><span class="sxs-lookup"><span data-stu-id="3f92d-104">A child task can be either detached or attached.</span></span> <span data-ttu-id="3f92d-105">Um *tarefa filho desanexado* é uma tarefa que é executado independentemente de seu pai.</span><span class="sxs-lookup"><span data-stu-id="3f92d-105">A *detached child task* is a task that executes independently of its parent.</span></span> <span data-ttu-id="3f92d-106">Um *anexado tarefa filho* é uma tarefa aninhada que é criada com o <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> opção cujo pai não explicitamente ou por padrão proibido-lo de que está sendo anexado.</span><span class="sxs-lookup"><span data-stu-id="3f92d-106">An *attached child task* is a nested task that is created with the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option whose parent does not explicitly or by default prohibit it from being attached.</span></span> <span data-ttu-id="3f92d-107">Uma tarefa pode criar qualquer número de filho anexadas e desanexadas tarefas, limitadas apenas pelos recursos do sistema.</span><span class="sxs-lookup"><span data-stu-id="3f92d-107">A task may create any number of attached and detached child tasks, limited only by system resources.</span></span>  
  
 <span data-ttu-id="3f92d-108">A tabela a seguir lista as diferenças básicas entre os dois tipos de tarefas filho.</span><span class="sxs-lookup"><span data-stu-id="3f92d-108">The following table lists the basic differences between the two kinds of child tasks.</span></span>  
  
|<span data-ttu-id="3f92d-109">Categoria</span><span class="sxs-lookup"><span data-stu-id="3f92d-109">Category</span></span>|<span data-ttu-id="3f92d-110">Tarefas filho desanexado</span><span class="sxs-lookup"><span data-stu-id="3f92d-110">Detached child tasks</span></span>|<span data-ttu-id="3f92d-111">Tarefas filho anexado</span><span class="sxs-lookup"><span data-stu-id="3f92d-111">Attached child tasks</span></span>|  
|--------------|--------------------------|--------------------------|  
|<span data-ttu-id="3f92d-112">Pai aguarda a conclusão de tarefas filho.</span><span class="sxs-lookup"><span data-stu-id="3f92d-112">Parent waits for child tasks to complete.</span></span>|<span data-ttu-id="3f92d-113">Não</span><span class="sxs-lookup"><span data-stu-id="3f92d-113">No</span></span>|<span data-ttu-id="3f92d-114">Sim</span><span class="sxs-lookup"><span data-stu-id="3f92d-114">Yes</span></span>|  
|<span data-ttu-id="3f92d-115">Pai propaga exceções lançadas por tarefas filho.</span><span class="sxs-lookup"><span data-stu-id="3f92d-115">Parent propagates exceptions thrown by child tasks.</span></span>|<span data-ttu-id="3f92d-116">Não</span><span class="sxs-lookup"><span data-stu-id="3f92d-116">No</span></span>|<span data-ttu-id="3f92d-117">Sim</span><span class="sxs-lookup"><span data-stu-id="3f92d-117">Yes</span></span>|  
|<span data-ttu-id="3f92d-118">Status do pai depende do status do filho.</span><span class="sxs-lookup"><span data-stu-id="3f92d-118">Status of parent depends on status of child.</span></span>|<span data-ttu-id="3f92d-119">Não</span><span class="sxs-lookup"><span data-stu-id="3f92d-119">No</span></span>|<span data-ttu-id="3f92d-120">Sim</span><span class="sxs-lookup"><span data-stu-id="3f92d-120">Yes</span></span>|  
  
 <span data-ttu-id="3f92d-121">Na maioria dos cenários, é recomendável que você use tarefas desanexadas filho, porque suas relações com outras tarefas menos complexas.</span><span class="sxs-lookup"><span data-stu-id="3f92d-121">In most scenarios, we recommend that you use detached child tasks, because their relationships with other tasks are less complex.</span></span> <span data-ttu-id="3f92d-122">Isto é por tarefas criadas dentro do pai tarefas desanexadas por padrão, e você deve especificar explicitamente o <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> opção para criar uma tarefa filho anexado.</span><span class="sxs-lookup"><span data-stu-id="3f92d-122">That is why tasks created inside parent tasks are detached by default, and you must explicitly specify the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option to create an attached child task.</span></span>  
  
## <a name="detached-child-tasks"></a><span data-ttu-id="3f92d-123">Tarefas filho desanexado</span><span class="sxs-lookup"><span data-stu-id="3f92d-123">Detached child tasks</span></span>  
 <span data-ttu-id="3f92d-124">Embora uma tarefa filho é criada por uma tarefa pai, por padrão é independente da tarefa pai.</span><span class="sxs-lookup"><span data-stu-id="3f92d-124">Although a child task is created by a parent task, by default it is independent of the parent task.</span></span> <span data-ttu-id="3f92d-125">No exemplo a seguir, uma tarefa pai cria uma tarefa simples filho.</span><span class="sxs-lookup"><span data-stu-id="3f92d-125">In the following example, a parent task creates one simple child task.</span></span> <span data-ttu-id="3f92d-126">Se você executar o exemplo de código várias vezes, você pode perceber que a saída do exemplo é diferente do mostrado, e também que a saída pode mudar cada vez que você executar o código.</span><span class="sxs-lookup"><span data-stu-id="3f92d-126">If you run the example code multiple times, you may notice that the output from the example differs from that shown, and also that the output may change each time you run the code.</span></span> <span data-ttu-id="3f92d-127">Isso ocorre porque as tarefas de pai e filho execute independentemente um do outro; o filho é uma tarefa desanexada.</span><span class="sxs-lookup"><span data-stu-id="3f92d-127">This occurs because the parent task and child tasks execute independently of each other; the child is a detached task.</span></span> <span data-ttu-id="3f92d-128">O exemplo espera apenas para a tarefa pai ser concluída e a tarefa filho pode não ser executada ou encerra concluída antes que o aplicativo de console.</span><span class="sxs-lookup"><span data-stu-id="3f92d-128">The example waits only for the parent task to complete, and the child task may not execute or complete before the console app terminates.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/nested1.cs#1)]
 [!code-vb[TPL_ChildTasks#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/nested1.vb#1)]  
  
 <span data-ttu-id="3f92d-129">Se a tarefa filho é representada por um <xref:System.Threading.Tasks.Task%601> objeto em vez de <xref:System.Threading.Tasks.Task> do objeto, você pode garantir que a tarefa pai aguardará o filho concluir, acessando o <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> propriedade do filho mesmo se ele é uma tarefa filho desanexado.</span><span class="sxs-lookup"><span data-stu-id="3f92d-129">If the child task is represented by a <xref:System.Threading.Tasks.Task%601> object rather than a <xref:System.Threading.Tasks.Task> object, you can ensure that the parent task will wait for the child to complete by accessing the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the child even if it is a detached child task.</span></span> <span data-ttu-id="3f92d-130">O <xref:System.Threading.Tasks.Task%601.Result%2A> propriedade bloqueia até que a tarefa for concluída, como mostra o exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="3f92d-130">The <xref:System.Threading.Tasks.Task%601.Result%2A> property blocks until its task completes, as the following example shows.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/childtasks.cs#4)]
 [!code-vb[TPL_ChildTasks#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/tpl_childtasks.vb#4)]  
  
## <a name="attached-child-tasks"></a><span data-ttu-id="3f92d-131">Tarefas filho anexado</span><span class="sxs-lookup"><span data-stu-id="3f92d-131">Attached child tasks</span></span>  
 <span data-ttu-id="3f92d-132">Ao contrário das tarefas filho desanexado, tarefas filho anexado estreitamente sincronizadas com o pai.</span><span class="sxs-lookup"><span data-stu-id="3f92d-132">Unlike detached child tasks, attached child tasks are closely synchronized with the parent.</span></span> <span data-ttu-id="3f92d-133">Você pode alterar a tarefa filho desanexado no exemplo anterior para uma tarefa filho conectados usando o <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> opção na instrução de criação de tarefa, conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="3f92d-133">You can change the detached child task in the previous example to an attached child task by using the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option in the task creation statement, as shown in the following example.</span></span> <span data-ttu-id="3f92d-134">Nesse código, a tarefa filho conectados é concluída antes de seu pai.</span><span class="sxs-lookup"><span data-stu-id="3f92d-134">In this code, the attached child task completes before its parent.</span></span> <span data-ttu-id="3f92d-135">Como resultado, a saída do exemplo é ao mesmo sempre que você executar o código.</span><span class="sxs-lookup"><span data-stu-id="3f92d-135">As a result, the output from the example is the same each time you run the code.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/child1.cs#2)]
 [!code-vb[TPL_ChildTasks#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/child1.vb#2)]  
  
 <span data-ttu-id="3f92d-136">Você pode usar tarefas filho anexados para criar gráficos totalmente sincronizados de operações assíncronas.</span><span class="sxs-lookup"><span data-stu-id="3f92d-136">You can use attached child tasks to create tightly synchronized graphs of asynchronous operations.</span></span>  
  
 <span data-ttu-id="3f92d-137">No entanto, uma tarefa filho pode anexar a seu pai somente se seu pai não proíbe tarefas filho anexado.</span><span class="sxs-lookup"><span data-stu-id="3f92d-137">However, a child task can attach to its parent only if its parent does not prohibit attached child tasks.</span></span> <span data-ttu-id="3f92d-138">Tarefas de pai podem impedir explicitamente tarefas filho anexando a elas, especificando o <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> opção no construtor de classe da tarefa pai ou o <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="3f92d-138">Parent tasks can explicitly prevent child tasks from attaching to them by specifying the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option in the parent task's class constructor or the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="3f92d-139">Tarefas de pai implicitamente impedir tarefas filho anexando a elas, se elas forem criadas chamando o <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="3f92d-139">Parent tasks implicitly prevent child tasks from attaching to them if they are created by calling the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="3f92d-140">O exemplo a seguir ilustra essa situação.</span><span class="sxs-lookup"><span data-stu-id="3f92d-140">The following example illustrates this.</span></span> <span data-ttu-id="3f92d-141">Ele é idêntico ao exemplo anterior, exceto que a tarefa pai é criada chamando o <xref:System.Threading.Tasks.Task.Run%28System.Action%29?displayProperty=nameWithType> método em vez de <xref:System.Threading.Tasks.TaskFactory.StartNew%28System.Action%29?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="3f92d-141">It is identical to the previous example, except that the parent task is created by calling the <xref:System.Threading.Tasks.Task.Run%28System.Action%29?displayProperty=nameWithType> method rather than the <xref:System.Threading.Tasks.TaskFactory.StartNew%28System.Action%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="3f92d-142">Como a tarefa filho não é possível conectar a seu pai, a saída do exemplo é imprevisível.</span><span class="sxs-lookup"><span data-stu-id="3f92d-142">Because the child task is not able to attach to its parent, the output from the example is unpredictable.</span></span> <span data-ttu-id="3f92d-143">Como a criação de tarefa padrão de opções para o <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> sobrecargas incluem <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, este exemplo é funcionalmente equivalente ao primeiro exemplo na seção "Desanexado tarefas filho".</span><span class="sxs-lookup"><span data-stu-id="3f92d-143">Because the default task creation options for the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> overloads include <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, this example is functionally equivalent to the first example in the "Detached child tasks" section.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/child1a.cs#3)]
 [!code-vb[TPL_ChildTasks#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/child1a.vb#3)]  
  
## <a name="exceptions-in-child-tasks"></a><span data-ttu-id="3f92d-144">Exceções em tarefas filho</span><span class="sxs-lookup"><span data-stu-id="3f92d-144">Exceptions in child tasks</span></span>  
 <span data-ttu-id="3f92d-145">Se uma tarefa filho desanexado lança uma exceção, essa exceção deve ser observada ou manipulada diretamente na tarefa pai assim como ocorre com qualquer tarefa não aninhada.</span><span class="sxs-lookup"><span data-stu-id="3f92d-145">If a detached child task throws an exception, that exception must be observed or handled directly in the parent task just as with any non-nested task.</span></span> <span data-ttu-id="3f92d-146">Se uma tarefa filho anexado lança uma exceção, a exceção será propagada automaticamente para a tarefa pai e de volta para o thread que espera ou tenta acessar a tarefa <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> propriedade.</span><span class="sxs-lookup"><span data-stu-id="3f92d-146">If an attached child task throws an exception, the exception is automatically propagated to the parent task and back to the thread that waits or tries to access the task's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="3f92d-147">Portanto, usando tarefas filho anexado, você pode tratar todas as exceções em apenas um ponto na chamada para <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> no thread de chamada.</span><span class="sxs-lookup"><span data-stu-id="3f92d-147">Therefore, by using attached child tasks, you can handle all exceptions at just one point in the call to <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> on the calling thread.</span></span> <span data-ttu-id="3f92d-148">Para saber mais, veja [Tratamento de exceção](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="3f92d-148">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>  
  
## <a name="cancellation-and-child-tasks"></a><span data-ttu-id="3f92d-149">Tarefas filho e de cancelamento</span><span class="sxs-lookup"><span data-stu-id="3f92d-149">Cancellation and child tasks</span></span>  
 <span data-ttu-id="3f92d-150">Cancelamento da tarefa é cooperativo.</span><span class="sxs-lookup"><span data-stu-id="3f92d-150">Task cancellation is cooperative.</span></span> <span data-ttu-id="3f92d-151">Ou seja, para ser anulável, todas as tarefas filho anexado ou desanexado devem monitorar o status do token de cancelamento.</span><span class="sxs-lookup"><span data-stu-id="3f92d-151">That is, to be cancelable, every attached or detached child task must monitor the status of the cancellation token.</span></span> <span data-ttu-id="3f92d-152">Se você quiser cancelar um pai e todos os seus filhos usando uma solicitação de cancelamento, você passa o mesmo token como um argumento para todas as tarefas e fornece cada tarefa a lógica para responder à solicitação de cada tarefa.</span><span class="sxs-lookup"><span data-stu-id="3f92d-152">If you want to cancel a parent and all its children by using one cancellation request, you pass the same token as an argument to all tasks and provide in each task the logic to respond to the request in each task.</span></span> <span data-ttu-id="3f92d-153">Para obter mais informações, consulte [Cancelamento de tarefas](../../../docs/standard/parallel-programming/task-cancellation.md) e [Como cancelar uma tarefa e seus filhos](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md).</span><span class="sxs-lookup"><span data-stu-id="3f92d-153">For more information, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md) and [How to: Cancel a Task and Its Children](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md).</span></span>  
  
### <a name="when-the-parent-cancels"></a><span data-ttu-id="3f92d-154">Quando o pai cancela</span><span class="sxs-lookup"><span data-stu-id="3f92d-154">When the parent cancels</span></span>  
 <span data-ttu-id="3f92d-155">Se um pai se Cancelar antes do início de sua tarefa filho, o filho nunca é iniciado.</span><span class="sxs-lookup"><span data-stu-id="3f92d-155">If a parent cancels itself before its child task is started, the child never starts.</span></span> <span data-ttu-id="3f92d-156">Se um pai em si Cancelar após sua tarefa filho já foi iniciado, o filho é executado até a conclusão, a menos que ele tem sua própria lógica de cancelamento.</span><span class="sxs-lookup"><span data-stu-id="3f92d-156">If a parent cancels itself after its child task has already started, the child runs to completion unless it has its own cancellation logic.</span></span> <span data-ttu-id="3f92d-157">Para obter mais informações, consulte [Cancelamento de tarefas](../../../docs/standard/parallel-programming/task-cancellation.md).</span><span class="sxs-lookup"><span data-stu-id="3f92d-157">For more information, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md).</span></span>  
  
### <a name="when-a-detached-child-task-cancels"></a><span data-ttu-id="3f92d-158">Quando uma tarefa filho desanexado cancela</span><span class="sxs-lookup"><span data-stu-id="3f92d-158">When a detached child task cancels</span></span>  
 <span data-ttu-id="3f92d-159">Se uma tarefa filho desanexado cancela a mesmo usando o mesmo token que foi passado para o pai e o pai não aguarda a tarefa filho, nenhuma exceção é propagada, pois a exceção é tratada como o cancelamento de cooperação benigno.</span><span class="sxs-lookup"><span data-stu-id="3f92d-159">If a detached child task cancels itself by using the same token that was passed to the parent, and the parent does not wait for the child task, no exception is propagated, because the exception is treated as benign cooperation cancellation.</span></span> <span data-ttu-id="3f92d-160">Esse comportamento é o mesmo que todas as tarefas de nível superior.</span><span class="sxs-lookup"><span data-stu-id="3f92d-160">This behavior is the same as that of any top-level task.</span></span>  
  
### <a name="when-an-attached-child-task-cancels"></a><span data-ttu-id="3f92d-161">Quando uma tarefa filho anexado cancela</span><span class="sxs-lookup"><span data-stu-id="3f92d-161">When an attached child task cancels</span></span>  
 <span data-ttu-id="3f92d-162">Quando uma tarefa filho anexado cancela a mesmo usando o mesmo token que foi passado para sua tarefa pai, uma <xref:System.Threading.Tasks.TaskCanceledException> é propagada para o thread de junção dentro de um <xref:System.AggregateException>.</span><span class="sxs-lookup"><span data-stu-id="3f92d-162">When an attached child task cancels itself by using the same token that was passed to its parent task, a <xref:System.Threading.Tasks.TaskCanceledException> is propagated to the joining thread inside an <xref:System.AggregateException>.</span></span> <span data-ttu-id="3f92d-163">Você deve aguardar a tarefa pai para que você possa tratar todas as exceções benignas além de todas as exceções de falha são propagadas para cima em um gráfico de tarefas filho anexado.</span><span class="sxs-lookup"><span data-stu-id="3f92d-163">You must wait for the parent task so that you can handle all benign exceptions in addition to all faulting exceptions that are propagated up through a graph of attached child tasks.</span></span>  
  
 <span data-ttu-id="3f92d-164">Para saber mais, veja [Tratamento de exceção](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="3f92d-164">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>  
  
## <a name="preventing-a-child-task-from-attaching-to-its-parent"></a><span data-ttu-id="3f92d-165">Impedindo que uma tarefa filho se anexe ao seu pai</span><span class="sxs-lookup"><span data-stu-id="3f92d-165">Preventing a child task from attaching to its parent</span></span>  
 <span data-ttu-id="3f92d-166">Uma exceção sem tratamento que é gerada por uma tarefa filho é propagada para a tarefa pai.</span><span class="sxs-lookup"><span data-stu-id="3f92d-166">An unhandled exception that is thrown by a child task is propagated to the parent task.</span></span> <span data-ttu-id="3f92d-167">Você pode usar esse comportamento para observar todas as exceções de tarefa filho da tarefa de uma raiz, em vez de percorrer uma árvore de tarefas.</span><span class="sxs-lookup"><span data-stu-id="3f92d-167">You can use this behavior to observe all child task exceptions from one root task instead of traversing a tree of tasks.</span></span> <span data-ttu-id="3f92d-168">No entanto, a propagação de exceção pode ser problemática quando uma tarefa pai não espera anexo do código.</span><span class="sxs-lookup"><span data-stu-id="3f92d-168">However, exception propagation can be problematic when a parent task does not expect attachment from other code.</span></span> <span data-ttu-id="3f92d-169">Por exemplo, considere um aplicativo que chama um componente de biblioteca de terceiros de um <xref:System.Threading.Tasks.Task> objeto.</span><span class="sxs-lookup"><span data-stu-id="3f92d-169">For example, consider an app that calls a third-party library component from a <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="3f92d-170">Se o componente de biblioteca de terceiros também cria um <xref:System.Threading.Tasks.Task> de objeto e especifica <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> para anexá-lo à tarefa pai, todas as exceções sem tratamento que ocorrem na tarefa filho se propaga para o pai.</span><span class="sxs-lookup"><span data-stu-id="3f92d-170">If the third-party library component also creates a <xref:System.Threading.Tasks.Task> object and specifies <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> to attach it to the parent task, any unhandled exceptions that occur in the child task propagate to the parent.</span></span> <span data-ttu-id="3f92d-171">Isso pode resultar em comportamento inesperado no aplicativo principal.</span><span class="sxs-lookup"><span data-stu-id="3f92d-171">This could lead to unexpected behavior in the main app.</span></span>  
  
 <span data-ttu-id="3f92d-172">Para impedir a anexar a sua tarefa pai de uma tarefa filho, especifique o <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> opção quando você cria o pai <xref:System.Threading.Tasks.Task> ou <xref:System.Threading.Tasks.Task%601> objeto.</span><span class="sxs-lookup"><span data-stu-id="3f92d-172">To prevent a child task from attaching to its parent task, specify the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option when you create the parent <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> object.</span></span> <span data-ttu-id="3f92d-173">Quando uma tarefa tenta anexar a seu pai e especifica o pai do <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> opção, a tarefa filho não poderá anexar a um pai e será executado apenas como se o <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> opção não foi especificada.</span><span class="sxs-lookup"><span data-stu-id="3f92d-173">When a task tries to attach to its parent and the parent specifies the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option, the child task will not be able to attach to a parent and will execute just as if the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option was not specified.</span></span>  
  
 <span data-ttu-id="3f92d-174">Você também poderá impedir que uma tarefa filho se anexe ao seu pai quando a tarefa filho não for concluída de maneira oportuna.</span><span class="sxs-lookup"><span data-stu-id="3f92d-174">You might also want to prevent a child task from attaching to its parent when the child task does not finish in a timely manner.</span></span> <span data-ttu-id="3f92d-175">Porque uma tarefa pai não for concluída até o término de todas as tarefas filho, uma tarefa filho de execução longa pode causar o aplicativo geral para baixo desempenho.</span><span class="sxs-lookup"><span data-stu-id="3f92d-175">Because a parent task does not finish until all child tasks finish, a long-running child task can cause the overall app to perform poorly.</span></span> <span data-ttu-id="3f92d-176">Para obter um exemplo que mostra como melhorar o desempenho do aplicativo, impedindo a anexar a sua tarefa pai de uma tarefa, consulte [como: evitar que uma tarefa filho anexar ao seu pai](../../../docs/standard/parallel-programming/how-to-prevent-a-child-task-from-attaching-to-its-parent.md).</span><span class="sxs-lookup"><span data-stu-id="3f92d-176">For an example that shows how to improve app performance by preventing a task from attaching to its parent task, see [How to: Prevent a Child Task from Attaching to its Parent](../../../docs/standard/parallel-programming/how-to-prevent-a-child-task-from-attaching-to-its-parent.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3f92d-177">Consulte também</span><span class="sxs-lookup"><span data-stu-id="3f92d-177">See Also</span></span>  
 [<span data-ttu-id="3f92d-178">Programação paralela</span><span class="sxs-lookup"><span data-stu-id="3f92d-178">Parallel Programming</span></span>](../../../docs/standard/parallel-programming/index.md)  
 [<span data-ttu-id="3f92d-179">Paralelismo de dados</span><span class="sxs-lookup"><span data-stu-id="3f92d-179">Data Parallelism</span></span>](../../../docs/standard/parallel-programming/data-parallelism-task-parallel-library.md)
