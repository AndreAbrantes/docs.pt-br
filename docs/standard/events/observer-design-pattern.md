---
title: Padrão de design do observador
description: Saiba mais sobre o padrão de design do observador no .NET. Esse padrão permite que um assinante registre e receba notificações de um provedor.
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- IObserver(Of T) interface
- IObservable<T> interface
- IObserver<T> interface
- IObservable(Of T) interface
- observer design pattern [.NET Framework]
ms.assetid: 3680171f-f522-453c-aa4a-54f755a78f88
ms.openlocfilehash: 80dac36199dd13abeab295d4b53a52615e7ae625
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90559155"
---
# <a name="observer-design-pattern"></a><span data-ttu-id="8f97e-104">Padrão de design do observador</span><span class="sxs-lookup"><span data-stu-id="8f97e-104">Observer Design Pattern</span></span>

<span data-ttu-id="8f97e-105">O padrão de design do observador permite a um assinante se registrar em um provedor e receber notificações dele.</span><span class="sxs-lookup"><span data-stu-id="8f97e-105">The observer design pattern enables a subscriber to register with and receive notifications from a provider.</span></span> <span data-ttu-id="8f97e-106">Ele é adequado para qualquer cenário que requer a notificação por push.</span><span class="sxs-lookup"><span data-stu-id="8f97e-106">It is suitable for any scenario that requires push-based notification.</span></span> <span data-ttu-id="8f97e-107">O padrão define um *provedor* (também conhecido como *assunto* ou *observável*) e zero, um ou mais *observadores*.</span><span class="sxs-lookup"><span data-stu-id="8f97e-107">The pattern defines a *provider* (also known as a *subject* or an *observable*) and zero, one, or more *observers*.</span></span> <span data-ttu-id="8f97e-108">Observadores registram-se com o provedor e, sempre que uma condição, evento ou alteração de estado predefinido ocorrer, o provedor notificará automaticamente todos os observadores chamando um dos seus métodos.</span><span class="sxs-lookup"><span data-stu-id="8f97e-108">Observers register with the provider, and whenever a predefined condition, event, or state change occurs, the provider automatically notifies all observers by calling one of their methods.</span></span> <span data-ttu-id="8f97e-109">Nessa chamada de método, o provedor também pode fornecer informações sobre o estado atual para observadores.</span><span class="sxs-lookup"><span data-stu-id="8f97e-109">In this method call, the provider can also provide current state information to observers.</span></span> <span data-ttu-id="8f97e-110">No .NET Framework, o padrão de design de observador é aplicado ao implementar as interfaces genéricas <xref:System.IObservable%601?displayProperty=nameWithType> e <xref:System.IObserver%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8f97e-110">In the .NET Framework, the observer design pattern is applied by implementing the generic <xref:System.IObservable%601?displayProperty=nameWithType> and <xref:System.IObserver%601?displayProperty=nameWithType> interfaces.</span></span> <span data-ttu-id="8f97e-111">O parâmetro de tipo genérico representa o tipo que fornece informações de notificação.</span><span class="sxs-lookup"><span data-stu-id="8f97e-111">The generic type parameter represents the type that provides notification information.</span></span>

## <a name="applying-the-pattern"></a><span data-ttu-id="8f97e-112">Aplicando o padrão</span><span class="sxs-lookup"><span data-stu-id="8f97e-112">Applying the Pattern</span></span>

<span data-ttu-id="8f97e-113">O padrão de design do observador é adequado para notificações por push distribuídas, pois oferece suporte para uma separação clara entre dois componentes diferentes ou camadas de aplicativo, como uma camada de fonte de dados (lógica de negócios) uma camada de interface do usuário (exibição).</span><span class="sxs-lookup"><span data-stu-id="8f97e-113">The observer design pattern is suitable for distributed push-based notifications, because it supports a clean separation between two different components or application layers, such as a data source (business logic) layer and a user interface (display) layer.</span></span> <span data-ttu-id="8f97e-114">O padrão pode ser implementado sempre que um provedor usa retornos de chamada para fornecer informações atuais a seus clientes.</span><span class="sxs-lookup"><span data-stu-id="8f97e-114">The pattern can be implemented whenever a provider uses callbacks to supply its clients with current information.</span></span>

<span data-ttu-id="8f97e-115">A implementação do padrão exige que você forneça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8f97e-115">Implementing the pattern requires that you provide the following:</span></span>

- <span data-ttu-id="8f97e-116">Um provedor ou o assunto, que é o objeto que envia notificações para observadores.</span><span class="sxs-lookup"><span data-stu-id="8f97e-116">A provider or subject, which is the object that sends notifications to observers.</span></span> <span data-ttu-id="8f97e-117">Um provedor é uma classe ou estrutura que implementa a interface <xref:System.IObservable%601>.</span><span class="sxs-lookup"><span data-stu-id="8f97e-117">A provider is a class or structure that implements the <xref:System.IObservable%601> interface.</span></span> <span data-ttu-id="8f97e-118">O provedor deve implementar um único método, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, que é chamado pelos observadores que desejam receber notificações do provedor.</span><span class="sxs-lookup"><span data-stu-id="8f97e-118">The provider must implement a single method, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, which is called by observers that wish to receive notifications from the provider.</span></span>

- <span data-ttu-id="8f97e-119">Um observador, que é um objeto que recebe notificações de um provedor.</span><span class="sxs-lookup"><span data-stu-id="8f97e-119">An observer, which is an object that receives notifications from a provider.</span></span> <span data-ttu-id="8f97e-120">Um observador é uma classe ou estrutura que implementa a interface <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="8f97e-120">An observer is a class or structure that implements the <xref:System.IObserver%601> interface.</span></span> <span data-ttu-id="8f97e-121">O observador deve implementar três métodos, que são chamados pelo provedor:</span><span class="sxs-lookup"><span data-stu-id="8f97e-121">The observer must implement three methods, all of which are called by the provider:</span></span>

  - <span data-ttu-id="8f97e-122"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, que fornece ao observador informações novas ou atuais.</span><span class="sxs-lookup"><span data-stu-id="8f97e-122"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, which supplies the observer with new or current information.</span></span>

  - <span data-ttu-id="8f97e-123"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, que informa o observador que ocorreu um erro.</span><span class="sxs-lookup"><span data-stu-id="8f97e-123"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, which informs the observer that an error has occurred.</span></span>

  - <span data-ttu-id="8f97e-124"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, que indica que o provedor terminou de enviar notificações.</span><span class="sxs-lookup"><span data-stu-id="8f97e-124"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, which indicates that the provider has finished sending notifications.</span></span>

- <span data-ttu-id="8f97e-125">Um mecanismo que permite que o provedor mantenha controle dos observadores.</span><span class="sxs-lookup"><span data-stu-id="8f97e-125">A mechanism that allows the provider to keep track of observers.</span></span> <span data-ttu-id="8f97e-126">Normalmente, o provedor usa um objeto de contêiner, como um objeto <xref:System.Collections.Generic.List%601?displayProperty=nameWithType>, para manter as referências às implementações de <xref:System.IObserver%601> que assinaram notificações.</span><span class="sxs-lookup"><span data-stu-id="8f97e-126">Typically, the provider uses a container object, such as a <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> object, to hold references to the <xref:System.IObserver%601> implementations that have subscribed to notifications.</span></span> <span data-ttu-id="8f97e-127">Usar um contêiner de armazenamento para essa finalidade permite que o provedor lidar com um número ilimitado de observadores.</span><span class="sxs-lookup"><span data-stu-id="8f97e-127">Using a storage container for this purpose enables the provider to handle zero to an unlimited number of observers.</span></span> <span data-ttu-id="8f97e-128">A ordem na qual os observadores recebem notificações não está definida. O provedor está livre para usar qualquer método para determinar a ordem.</span><span class="sxs-lookup"><span data-stu-id="8f97e-128">The order in which observers receive notifications is not defined; the provider is free to use any method to determine the order.</span></span>

- <span data-ttu-id="8f97e-129">Uma implementação de <xref:System.IDisposable> que permite que o provedor remova os observadores quando a notificação for concluída.</span><span class="sxs-lookup"><span data-stu-id="8f97e-129">An <xref:System.IDisposable> implementation that enables the provider to remove observers when notification is complete.</span></span> <span data-ttu-id="8f97e-130">Observadores recebem uma referência para a implementação de <xref:System.IDisposable> do método <xref:System.IObservable%601.Subscribe%2A>, portanto, eles também podem chamar o método <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> para cancelar a assinatura antes que o provedor tenha terminado de enviar notificações.</span><span class="sxs-lookup"><span data-stu-id="8f97e-130">Observers receive a reference to the <xref:System.IDisposable> implementation from the <xref:System.IObservable%601.Subscribe%2A> method, so they can also call the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method to unsubscribe before the provider has finished sending notifications.</span></span>

- <span data-ttu-id="8f97e-131">Um objeto que contém os dados que o provedor envia para seus observadores.</span><span class="sxs-lookup"><span data-stu-id="8f97e-131">An object that contains the data that the provider sends to its observers.</span></span> <span data-ttu-id="8f97e-132">O tipo desse objeto corresponde ao parâmetro de tipo genérico das interfaces <xref:System.IObservable%601> e <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="8f97e-132">The type of this object corresponds to the generic type parameter of the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="8f97e-133">Embora esse objeto possa ser o mesmo que a implementação de <xref:System.IObservable%601>, geralmente ele é um tipo separado.</span><span class="sxs-lookup"><span data-stu-id="8f97e-133">Although this object can be the same as the <xref:System.IObservable%601> implementation, most commonly it is a separate type.</span></span>

> [!NOTE]
> <span data-ttu-id="8f97e-134">Além de implementar o padrão de design do observador, pode ser interessante explorar bibliotecas que são criadas usando as interfaces <xref:System.IObservable%601> e <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="8f97e-134">In addition to implementing the observer design pattern, you may be interested in exploring libraries that are built using the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="8f97e-135">Por exemplo, [Extensões Reativas para .NET (Rx)](/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) consistem em um conjunto de métodos de extensão e operadores de sequência padrão LINQ para oferecer suporte à programação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="8f97e-135">For example, [Reactive Extensions for .NET (Rx)](/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) consist of a set of extension methods and LINQ standard sequence operators to support asynchronous programming.</span></span>

## <a name="implementing-the-pattern"></a><span data-ttu-id="8f97e-136">Implementando o padrão</span><span class="sxs-lookup"><span data-stu-id="8f97e-136">Implementing the Pattern</span></span>

<span data-ttu-id="8f97e-137">O exemplo a seguir usa o padrão de design do observador para implementar um sistema de informações de coleta de bagagem de aeroporto.</span><span class="sxs-lookup"><span data-stu-id="8f97e-137">The following example uses the observer design pattern to implement an airport baggage claim information system.</span></span> <span data-ttu-id="8f97e-138">Uma classe `BaggageInfo` fornece informações sobre voos que chegam e as esteiras onde as bagagens de cada voo estão disponíveis para retirada.</span><span class="sxs-lookup"><span data-stu-id="8f97e-138">A `BaggageInfo` class provides information about arriving flights and the carousels where baggage from each flight is available for pickup.</span></span> <span data-ttu-id="8f97e-139">Isso é mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="8f97e-139">It is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#1)]
[!code-vb[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#1)]

<span data-ttu-id="8f97e-140">Uma classe `BaggageHandler` é responsável por receber informações sobre os voos que chegam e as esteiras de coleta de bagagem.</span><span class="sxs-lookup"><span data-stu-id="8f97e-140">A `BaggageHandler` class is responsible for receiving information about arriving flights and baggage claim carousels.</span></span> <span data-ttu-id="8f97e-141">Internamente, ela mantém duas coleções:</span><span class="sxs-lookup"><span data-stu-id="8f97e-141">Internally, it maintains two collections:</span></span>

- <span data-ttu-id="8f97e-142">`observers` - Uma coleção de clientes que receberão informações atualizadas.</span><span class="sxs-lookup"><span data-stu-id="8f97e-142">`observers` - A collection of clients that will receive updated information.</span></span>

- <span data-ttu-id="8f97e-143">`flights` - Uma coleção de voos e suas respectivas esteiras.</span><span class="sxs-lookup"><span data-stu-id="8f97e-143">`flights` - A collection of flights and their assigned carousels.</span></span>

<span data-ttu-id="8f97e-144">Ambas as coleções são representadas por objetos <xref:System.Collections.Generic.List%601> genéricos que são instanciados no construtor de classe `BaggageHandler`.</span><span class="sxs-lookup"><span data-stu-id="8f97e-144">Both collections are represented by generic <xref:System.Collections.Generic.List%601> objects that are instantiated in the `BaggageHandler` class constructor.</span></span> <span data-ttu-id="8f97e-145">O código-fonte para a classe `BaggageHandler` é mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="8f97e-145">The source code for the `BaggageHandler` class is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#2)]
[!code-vb[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#2)]

<span data-ttu-id="8f97e-146">Clientes que desejem receber informações atualizadas devem chamar o método `BaggageHandler.Subscribe`.</span><span class="sxs-lookup"><span data-stu-id="8f97e-146">Clients that wish to receive updated information call the `BaggageHandler.Subscribe` method.</span></span> <span data-ttu-id="8f97e-147">Se o cliente não tiver assinado as notificações anteriormente, uma referência para a implementação <xref:System.IObserver%601> do cliente será adicionada à coleção `observers`.</span><span class="sxs-lookup"><span data-stu-id="8f97e-147">If the client has not previously subscribed to notifications, a reference to the client's <xref:System.IObserver%601> implementation is added to the `observers` collection.</span></span>

<span data-ttu-id="8f97e-148">O método `BaggageHandler.BaggageStatus` sobrecarregado pode ser chamado para indicar que bagagem de um voo está sendo descarregada ou que não está mais sendo descarregada.</span><span class="sxs-lookup"><span data-stu-id="8f97e-148">The overloaded `BaggageHandler.BaggageStatus` method can be called to indicate that baggage from a flight either is being unloaded or is no longer being unloaded.</span></span> <span data-ttu-id="8f97e-149">No primeiro caso, o método recebe um número de voo, o aeroporto que originou o voo e a esteira onde bagagem está sendo descarregada.</span><span class="sxs-lookup"><span data-stu-id="8f97e-149">In the first case, the method is passed a flight number, the airport from which the flight originated, and the carousel where baggage is being unloaded.</span></span> <span data-ttu-id="8f97e-150">No segundo caso, o método recebe apenas um número de voo.</span><span class="sxs-lookup"><span data-stu-id="8f97e-150">In the second case, the method is passed only a flight number.</span></span> <span data-ttu-id="8f97e-151">Para a bagagem que está sendo descarregada, o método verifica se as informações de `BaggageInfo` passadas para o método existem na coleção `flights`.</span><span class="sxs-lookup"><span data-stu-id="8f97e-151">For baggage that is being unloaded, the method checks whether the `BaggageInfo` information passed to the method exists in the `flights` collection.</span></span> <span data-ttu-id="8f97e-152">Se não existirem, o método adicionará as informações e chamará o método `OnNext` de cada observador.</span><span class="sxs-lookup"><span data-stu-id="8f97e-152">If it does not, the method adds the information and calls each observer's `OnNext` method.</span></span> <span data-ttu-id="8f97e-153">Para voos cuja bagagem não está mais sendo descarregada, o método verificará se as informações sobre esse voo estão armazenadas na coleção `flights`.</span><span class="sxs-lookup"><span data-stu-id="8f97e-153">For flights whose baggage is no longer being unloaded, the method checks whether information on that flight is stored in the `flights` collection.</span></span> <span data-ttu-id="8f97e-154">Se estiverem, o método chamará o método `OnNext` de cada observador e removerá o objeto `BaggageInfo` da coleção `flights`.</span><span class="sxs-lookup"><span data-stu-id="8f97e-154">If it is, the method calls each observer's `OnNext` method and removes the `BaggageInfo` object from the `flights` collection.</span></span>

<span data-ttu-id="8f97e-155">Quando o último voo do dia tiver aterrizado e sua bagagem tiver sido processada, o método `BaggageHandler.LastBaggageClaimed` será chamado.</span><span class="sxs-lookup"><span data-stu-id="8f97e-155">When the last flight of the day has landed and its baggage has been processed, the `BaggageHandler.LastBaggageClaimed` method is called.</span></span> <span data-ttu-id="8f97e-156">Esse método chama o método `OnCompleted` de cada observador para indicar que todas as notificações foram finalizadas e, em seguida, limpa a coleção `observers`.</span><span class="sxs-lookup"><span data-stu-id="8f97e-156">This method calls each observer's `OnCompleted` method to indicate that all notifications have completed, and then clears the `observers` collection.</span></span>

<span data-ttu-id="8f97e-157">O método <xref:System.IObservable%601.Subscribe%2A> do provedor retorna uma implementação de <xref:System.IDisposable> que permite que os observadores interrompam o recebimento de notificações antes que o método <xref:System.IObserver%601.OnCompleted%2A> seja chamado.</span><span class="sxs-lookup"><span data-stu-id="8f97e-157">The provider's <xref:System.IObservable%601.Subscribe%2A> method returns an <xref:System.IDisposable> implementation that enables observers to stop receiving notifications before the <xref:System.IObserver%601.OnCompleted%2A> method is called.</span></span> <span data-ttu-id="8f97e-158">O código-fonte para essa classe `Unsubscriber(Of BaggageInfo)` é mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="8f97e-158">The source code for this `Unsubscriber(Of BaggageInfo)` class is shown in the following example.</span></span> <span data-ttu-id="8f97e-159">Quando a classe é instanciada no método `BaggageHandler.Subscribe`, ela é passado como referência para a coleção `observers` e uma referência para o observador que é adicionado à coleção.</span><span class="sxs-lookup"><span data-stu-id="8f97e-159">When the class is instantiated in the `BaggageHandler.Subscribe` method, it is passed a reference to the `observers` collection and a reference to the observer that is added to the collection.</span></span> <span data-ttu-id="8f97e-160">Essas referências são atribuídas a variáveis locais.</span><span class="sxs-lookup"><span data-stu-id="8f97e-160">These references are assigned to local variables.</span></span> <span data-ttu-id="8f97e-161">Quando o método `Dispose` do objeto é chamado, ele verifica se o observador ainda existe na coleção `observers` e, em caso afirmativo, remove o observador.</span><span class="sxs-lookup"><span data-stu-id="8f97e-161">When the object's `Dispose` method is called, it checks whether the observer still exists in the `observers` collection, and, if it does, removes the observer.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#3)]
[!code-vb[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#3)]

<span data-ttu-id="8f97e-162">O exemplo a seguir fornece uma implementação de <xref:System.IObserver%601> denominada `ArrivalsMonitor`, que é uma classe base que exibe informações de coleta de bagagem.</span><span class="sxs-lookup"><span data-stu-id="8f97e-162">The following example provides an <xref:System.IObserver%601> implementation named `ArrivalsMonitor`, which is a base class that displays baggage claim information.</span></span> <span data-ttu-id="8f97e-163">As informações são exibidas em ordem alfabética, pelo nome da cidade de origem.</span><span class="sxs-lookup"><span data-stu-id="8f97e-163">The information is displayed alphabetically, by the name of the originating city.</span></span> <span data-ttu-id="8f97e-164">Os métodos de `ArrivalsMonitor` são marcados como `overridable` (no Visual Basic) ou `virtual` (em C#), portanto, todos podem ser substituídos por uma classe derivada.</span><span class="sxs-lookup"><span data-stu-id="8f97e-164">The methods of `ArrivalsMonitor` are marked as `overridable` (in Visual Basic) or `virtual` (in C#), so they can all be overridden by a derived class.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/observer.cs#4)]
[!code-vb[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/observer.vb#4)]

<span data-ttu-id="8f97e-165">A classe `ArrivalsMonitor` inclui os métodos `Subscribe` e `Unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="8f97e-165">The `ArrivalsMonitor` class includes the `Subscribe` and `Unsubscribe` methods.</span></span> <span data-ttu-id="8f97e-166">O método `Subscribe` permite que a classe salve a implementação de <xref:System.IDisposable> retornada pela chamada para <xref:System.IObservable%601.Subscribe%2A> para uma variável particular.</span><span class="sxs-lookup"><span data-stu-id="8f97e-166">The `Subscribe` method enables the class to save the <xref:System.IDisposable> implementation returned by the call to <xref:System.IObservable%601.Subscribe%2A> to a private variable.</span></span> <span data-ttu-id="8f97e-167">O método `Unsubscribe` permite que a classe cancele a assinatura de notificações ao chamar a implementação de <xref:System.IDisposable.Dispose%2A> do provedor.</span><span class="sxs-lookup"><span data-stu-id="8f97e-167">The `Unsubscribe` method enables the class to unsubscribe from notifications by calling the provider's <xref:System.IDisposable.Dispose%2A> implementation.</span></span> <span data-ttu-id="8f97e-168">`ArrivalsMonitor` também fornece implementações dos métodos <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A>, e <xref:System.IObserver%601.OnCompleted%2A>.</span><span class="sxs-lookup"><span data-stu-id="8f97e-168">`ArrivalsMonitor` also provides implementations of the <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A>, and <xref:System.IObserver%601.OnCompleted%2A> methods.</span></span> <span data-ttu-id="8f97e-169">Somente a implementação de <xref:System.IObserver%601.OnNext%2A> contém uma quantidade significativa de código.</span><span class="sxs-lookup"><span data-stu-id="8f97e-169">Only the <xref:System.IObserver%601.OnNext%2A> implementation contains a significant amount of code.</span></span> <span data-ttu-id="8f97e-170">O método funciona com um objeto <xref:System.Collections.Generic.List%601> particular, classificado e genérico que mantém informações sobre os aeroportos de origem dos voos que chegam e sobre as esteiras nas quais as respectivas bagagens estarão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="8f97e-170">The method works with a private, sorted, generic <xref:System.Collections.Generic.List%601> object that maintains information about the airports of origin for arriving flights and the carousels on which their baggage is available.</span></span> <span data-ttu-id="8f97e-171">Se a classe `BaggageHandler` relata um novo voo chegando, a implementação do método <xref:System.IObserver%601.OnNext%2A> adiciona informações sobre esse voo à lista.</span><span class="sxs-lookup"><span data-stu-id="8f97e-171">If the `BaggageHandler` class reports a new flight arrival, the <xref:System.IObserver%601.OnNext%2A> method implementation adds information about that flight to the list.</span></span> <span data-ttu-id="8f97e-172">Se a classe `BaggageHandler` relata que a bagagem do voo foi descarregada, o método <xref:System.IObserver%601.OnNext%2A> remove essa voo da lista.</span><span class="sxs-lookup"><span data-stu-id="8f97e-172">If the `BaggageHandler` class reports that the flight's baggage has been unloaded, the <xref:System.IObserver%601.OnNext%2A> method removes that flight from the list.</span></span> <span data-ttu-id="8f97e-173">Sempre que uma alteração é feita, a lista é classificada e exibida no console.</span><span class="sxs-lookup"><span data-stu-id="8f97e-173">Whenever a change is made, the list is sorted and displayed to the console.</span></span>

<span data-ttu-id="8f97e-174">O exemplo a seguir contém o ponto de entrada do aplicativo que instancia a classe `BaggageHandler`, bem como duas instâncias da classe `ArrivalsMonitor` e usa o método `BaggageHandler.BaggageStatus` para adicionar e remover informações sobre voos que chegam.</span><span class="sxs-lookup"><span data-stu-id="8f97e-174">The following example contains the application entry point that instantiates the `BaggageHandler` class as well as two instances of the `ArrivalsMonitor` class, and uses the `BaggageHandler.BaggageStatus` method to add and remove information about arriving flights.</span></span> <span data-ttu-id="8f97e-175">Em cada caso, os observadores recebem atualizações e exibem corretamente as informações de coleta de bagagem.</span><span class="sxs-lookup"><span data-stu-id="8f97e-175">In each case, the observers receive updates and correctly display baggage claim information.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/program.cs#5)]
[!code-vb[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/module1.vb#5)]

## <a name="related-topics"></a><span data-ttu-id="8f97e-176">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="8f97e-176">Related Topics</span></span>

|<span data-ttu-id="8f97e-177">Título</span><span class="sxs-lookup"><span data-stu-id="8f97e-177">Title</span></span>|<span data-ttu-id="8f97e-178">Descrição</span><span class="sxs-lookup"><span data-stu-id="8f97e-178">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="8f97e-179">Práticas recomendadas para o padrão de design do observador</span><span class="sxs-lookup"><span data-stu-id="8f97e-179">Observer Design Pattern Best Practices</span></span>](observer-design-pattern-best-practices.md)|<span data-ttu-id="8f97e-180">São descritas as práticas recomendadas ao desenvolver aplicativos que implementam o padrão de design do observador.</span><span class="sxs-lookup"><span data-stu-id="8f97e-180">Describes best practices to adopt when developing applications that implement the observer design pattern.</span></span>|
|[<span data-ttu-id="8f97e-181">Como implementar um provedor</span><span class="sxs-lookup"><span data-stu-id="8f97e-181">How to: Implement a Provider</span></span>](how-to-implement-a-provider.md)|<span data-ttu-id="8f97e-182">É fornecida uma implementação passo a passo de um provedor para uma aplicativo de monitoramento de temperatura.</span><span class="sxs-lookup"><span data-stu-id="8f97e-182">Provides a step-by-step implementation of a provider for a temperature monitoring application.</span></span>|
|[<span data-ttu-id="8f97e-183">Como: implementar um observador</span><span class="sxs-lookup"><span data-stu-id="8f97e-183">How to: Implement an Observer</span></span>](how-to-implement-an-observer.md)|<span data-ttu-id="8f97e-184">É fornecida uma implementação passo a passo de um observador para uma aplicativo de monitoramento de temperatura.</span><span class="sxs-lookup"><span data-stu-id="8f97e-184">Provides a step-by-step implementation of an observer for a temperature monitoring application.</span></span>|
