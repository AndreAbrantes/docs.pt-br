---
title: Conceitos de serialização
description: A serialização pode ser usada para capturar o estado de um objeto para que uma cópia possa ser criada ou enviar um objeto por valor de um domínio de aplicativo para outro.
ms.date: 08/07/2017
ms.assetid: e1ff4740-20a1-4c76-a8ad-d857db307054
ms.openlocfilehash: 35addd2dd2bed8ce878f2f159f1caefe89922d88
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/02/2020
ms.locfileid: "84291312"
---
# <a name="serialization-concepts"></a><span data-ttu-id="188fe-103">Conceitos de serialização</span><span class="sxs-lookup"><span data-stu-id="188fe-103">Serialization concepts</span></span>
<span data-ttu-id="188fe-104">Por que você deveria usar serialização?</span><span class="sxs-lookup"><span data-stu-id="188fe-104">Why would you want to use serialization?</span></span> <span data-ttu-id="188fe-105">As duas razões mais importantes são persistir o estado de um objeto para uma mídia de armazenamento para que uma cópia exata possa ser recriada em uma etapa posterior e enviar o objeto por valor de um domínio de aplicativo para outro.</span><span class="sxs-lookup"><span data-stu-id="188fe-105">The two most important reasons are to persist the state of an object to a storage medium so an exact copy can be re-created at a later stage, and to send the object by value from one application domain to another.</span></span> <span data-ttu-id="188fe-106">Por exemplo, a serialização é usada para salvar o estado da sessão no ASP.NET e copiar objetos para a área de transferência no Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="188fe-106">For example, serialization is used to save session state in ASP.NET and to copy objects to the Clipboard in Windows Forms.</span></span> <span data-ttu-id="188fe-107">Ela também é usada remotamente para passar objetos por valor de um domínio de aplicativo para outro.</span><span class="sxs-lookup"><span data-stu-id="188fe-107">It is also used by remoting to pass objects by value from one application domain to another.</span></span>

[!INCLUDE [binary-serialization-warning](../../../includes/binary-serialization-warning.md)]

## <a name="persistent-storage"></a><span data-ttu-id="188fe-108">Armazenamento persistente</span><span class="sxs-lookup"><span data-stu-id="188fe-108">Persistent storage</span></span>
<span data-ttu-id="188fe-109">Geralmente é necessário armazenar o valor dos campos de um objeto em disco e, em seguida, posteriormente recuperar esses dados.</span><span class="sxs-lookup"><span data-stu-id="188fe-109">It is often necessary to store the value of the fields of an object to disk and then, later, retrieve this data.</span></span> <span data-ttu-id="188fe-110">Embora isso seja fácil de atingir sem depender de serialização, essa abordagem é geralmente trabalhosa e sujeita a erros, e torna-se progressivamente mais complexa quando você precisa rastrear a hierarquia de objetos.</span><span class="sxs-lookup"><span data-stu-id="188fe-110">Although this is easy to achieve without relying on serialization, this approach is often cumbersome and error prone, and becomes progressively more complex when you need to track a hierarchy of objects.</span></span> <span data-ttu-id="188fe-111">Imagine escrever um grande aplicativo comercial, que contém milhares de objetos, e ter que escrever código para salvar e restaurar os campos e as propriedades para e do disco para cada objeto.</span><span class="sxs-lookup"><span data-stu-id="188fe-111">Imagine writing a large business application, that contains thousands of objects, and having to write code to save and restore the fields and properties to and from disk for each object.</span></span> <span data-ttu-id="188fe-112">A serialização fornece um mecanismo conveniente para atingir esse objetivo.</span><span class="sxs-lookup"><span data-stu-id="188fe-112">Serialization provides a convenient mechanism for achieving this objective.</span></span>

<span data-ttu-id="188fe-113">O Common Language Runtime gerencia como os objetos são armazenados na memória e fornece um mecanismo de serialização automatizada usando a [reflexão](../../framework/reflection-and-codedom/reflection.md).</span><span class="sxs-lookup"><span data-stu-id="188fe-113">The common language runtime manages how objects are stored in memory and provides an automated serialization mechanism by using [reflection](../../framework/reflection-and-codedom/reflection.md).</span></span> <span data-ttu-id="188fe-114">Quando um objeto é serializado, o nome da classe, o assembly e todos os membros de dados da instância de classe são gravados para armazenamento.</span><span class="sxs-lookup"><span data-stu-id="188fe-114">When an object is serialized, the name of the class, the assembly, and all the data members of the class instance are written to storage.</span></span> <span data-ttu-id="188fe-115">Os objetos geralmente armazenam referências a outras instâncias em variáveis de membros.</span><span class="sxs-lookup"><span data-stu-id="188fe-115">Objects often store references to other instances in member variables.</span></span> <span data-ttu-id="188fe-116">Quando a classe é serializada, o mecanismo de serialização rastreia objetos referenciados, já serializados, para garantir que o mesmo objeto não seja serializado mais de uma vez.</span><span class="sxs-lookup"><span data-stu-id="188fe-116">When the class is serialized, the serialization engine tracks referenced objects, already serialized, to ensure that the same object is not serialized more than once.</span></span> <span data-ttu-id="188fe-117">A arquitetura de serialização fornecida com o .NET Framework manipula corretamente grafos de objeto e referências circulares automaticamente.</span><span class="sxs-lookup"><span data-stu-id="188fe-117">The serialization architecture provided with the .NET Framework correctly handles object graphs and circular references automatically.</span></span> <span data-ttu-id="188fe-118">O único requisito colocado em gráficos de objeto é que todos os objetos, referenciados pelo objeto serializado, também devem ser marcados como `Serializable` (para obter mais informações, consulte [Serialização básica](basic-serialization.md)).</span><span class="sxs-lookup"><span data-stu-id="188fe-118">The only requirement placed on object graphs is that all objects, referenced by the serialized object, must also be marked as `Serializable` (for more information, see [Basic Serialization](basic-serialization.md)).</span></span> <span data-ttu-id="188fe-119">Se isso não for feito, uma exceção será gerada quando o serializador tentar serializar o objeto não marcado.</span><span class="sxs-lookup"><span data-stu-id="188fe-119">If this is not done, an exception will be thrown when the serializer attempts to serialize the unmarked object.</span></span>

<span data-ttu-id="188fe-120">Quando a classe serializada for desserializada, a classe será recriada e os valores de todos os membros de dados serão automaticamente restaurados.</span><span class="sxs-lookup"><span data-stu-id="188fe-120">When the serialized class is deserialized, the class is recreated and the values of all the data members are automatically restored.</span></span>

## <a name="marshal-by-value"></a><span data-ttu-id="188fe-121">Marshaling por valor</span><span class="sxs-lookup"><span data-stu-id="188fe-121">Marshal by value</span></span>
<span data-ttu-id="188fe-122">Os objetos são válidos somente no domínio do aplicativo onde eles são criados.</span><span class="sxs-lookup"><span data-stu-id="188fe-122">Objects are valid only in the application domain where they are created.</span></span> <span data-ttu-id="188fe-123">Qualquer tentativa de passar o objeto como um parâmetro ou retorná-lo como resultado falhará a menos que o objeto derive de `MarshalByRefObject` ou esteja marcado como `Serializable`.</span><span class="sxs-lookup"><span data-stu-id="188fe-123">Any attempt to pass the object as a parameter or return it as a result will fail unless the object derives from `MarshalByRefObject` or is marked as `Serializable`.</span></span> <span data-ttu-id="188fe-124">Se o objeto for marcado como `Serializable`, o objeto automaticamente será serializável, transportado de um domínio de aplicativo para o outro e, em seguida, desserializado para produzir uma cópia exata do objeto no segundo domínio de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="188fe-124">If the object is marked as `Serializable`, the object will automatically be serialized, transported from the one application domain to the other, and then deserialized to produce an exact copy of the object in the second application domain.</span></span> <span data-ttu-id="188fe-125">Esse processo é geralmente chamado de marshaling por valor.</span><span class="sxs-lookup"><span data-stu-id="188fe-125">This process is typically referred to as marshal-by-value.</span></span>

<span data-ttu-id="188fe-126">Quando um objeto deriva de `MarshalByRefObject`, uma referência de objeto é passada de um domínio de aplicativo para outro, em vez de o próprio objeto.</span><span class="sxs-lookup"><span data-stu-id="188fe-126">When an object derives from `MarshalByRefObject`, an object reference is passed from one application domain to another, rather than the object itself.</span></span> <span data-ttu-id="188fe-127">Você também pode marcar um objeto que deriva de `MarshalByRefObject` como `Serializable`.</span><span class="sxs-lookup"><span data-stu-id="188fe-127">You can also mark an object that derives from `MarshalByRefObject` as `Serializable`.</span></span> <span data-ttu-id="188fe-128">Quando esse objeto é usado como remoto, o formatador responsável pela serialização, que foi pré-configurada com um seletor substituto (`SurrogateSelector`), assume o controle do processo de serialização e substitui todos os objetos derivados de `MarshalByRefObject` com um proxy.</span><span class="sxs-lookup"><span data-stu-id="188fe-128">When this object is used with remoting, the formatter responsible for serialization, which has been preconfigured with a surrogate selector (`SurrogateSelector`), takes control of the serialization process, and replaces all objects derived from `MarshalByRefObject` with a proxy.</span></span> <span data-ttu-id="188fe-129">Sem o `SurrogateSelector` no lugar, a arquitetura de serialização segue as regras de serialização padrão descritas em [Etapas no processo de serialização](steps-in-the-serialization-process.md).</span><span class="sxs-lookup"><span data-stu-id="188fe-129">Without the `SurrogateSelector` in place, the serialization architecture follows the standard serialization rules described in [Steps in the Serialization Process](steps-in-the-serialization-process.md).</span></span>  

## <a name="related-sections"></a><span data-ttu-id="188fe-130">Seções relacionadas</span><span class="sxs-lookup"><span data-stu-id="188fe-130">Related sections</span></span>  
 [<span data-ttu-id="188fe-131">Serialização binária</span><span class="sxs-lookup"><span data-stu-id="188fe-131">Binary Serialization</span></span>](binary-serialization.md)  
 <span data-ttu-id="188fe-132">Descreve o mecanismo de serialização binária que está incluído com o Common Language Runtime.</span><span class="sxs-lookup"><span data-stu-id="188fe-132">Describes the binary serialization mechanism that is included with the common language runtime.</span></span>  
  
 <span data-ttu-id="188fe-133">[Comunicação remota do .NET](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/72x4h507(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="188fe-133">[.NET Remoting](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/72x4h507(v=vs.100))</span></span>\
 <span data-ttu-id="188fe-134">Descreve os vários métodos de comunicação disponíveis no .NET Framework para comunicações remotas.</span><span class="sxs-lookup"><span data-stu-id="188fe-134">Describes the various communications methods available in the .NET Framework for remote communications.</span></span>  
  
 [<span data-ttu-id="188fe-135">Serialização de XML e SOAP</span><span class="sxs-lookup"><span data-stu-id="188fe-135">XML and SOAP Serialization</span></span>](xml-and-soap-serialization.md)  
 <span data-ttu-id="188fe-136">Descreve o mecanismo de serialização de XML e SOAP que está incluído com o Common Language Runtime.</span><span class="sxs-lookup"><span data-stu-id="188fe-136">Describes the XML and SOAP serialization mechanism that is included with the common language runtime.</span></span>
