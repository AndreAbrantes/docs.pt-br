---
title: Como aproveitar funções sem servidor
description: Aproveitamento e Azure Functions sem servidor em aplicativos nativos de nuvem
ms.date: 06/30/2019
ms.openlocfilehash: 77ddef0eb8844ea1b55cd2fc5ec8aa12593c8631
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/30/2019
ms.locfileid: "73087117"
---
# <a name="leveraging-serverless-functions"></a><span data-ttu-id="27307-103">Como aproveitar funções sem servidor</span><span class="sxs-lookup"><span data-stu-id="27307-103">Leveraging serverless functions</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="27307-104">No espectro de gerenciamento de computadores e sistemas operacionais completos para aproveitar os recursos de nuvem, as vidas sem servidor no fim extremo em que a única coisa que você é responsável é seu código, e você só paga quando seu código é executado.</span><span class="sxs-lookup"><span data-stu-id="27307-104">In the spectrum of managing full machines and operating systems to leveraging cloud capabilities, serverless lives at the extreme end where the only thing you're responsible for is your code, and you only pay when your code runs.</span></span> <span data-ttu-id="27307-105">Azure Functions fornece uma maneira de criar recursos sem servidor em seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="27307-105">Azure Functions provides a way to build serverless capabilities into your applications.</span></span>

## <a name="what-is-serverless"></a><span data-ttu-id="27307-106">O que é sem servidor?</span><span class="sxs-lookup"><span data-stu-id="27307-106">What is serverless?</span></span>

<span data-ttu-id="27307-107">A computação sem servidor não significa que não haja um servidor envolvido na execução do aplicativo-o código ainda é executado em um servidor em algum lugar.</span><span class="sxs-lookup"><span data-stu-id="27307-107">Serverless computing doesn't mean there isn't a server involved in running your application - the code still runs on a server somewhere.</span></span> <span data-ttu-id="27307-108">A diferença é que a equipe de desenvolvimento de aplicativos não precisa mais se preocupar com o gerenciamento da infraestrutura do servidor.</span><span class="sxs-lookup"><span data-stu-id="27307-108">The distinction is that the application development team no longer needs to concern themselves with managing server infrastructure.</span></span> <span data-ttu-id="27307-109">Soluções de computação sem servidor como Azure Functions ajudam as equipes a aumentarem a produtividade e permitir que as organizações otimizem seus recursos e se concentrem em fornecer soluções.</span><span class="sxs-lookup"><span data-stu-id="27307-109">Serverless computing solutions like Azure Functions help teams increase their productivity and allow organizations to optimize their resources and focus on delivering solutions.</span></span>

<span data-ttu-id="27307-110">A computação sem servidor usa contêineres com estado disparado por eventos para hospedar seu aplicativo ou parte do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="27307-110">Serverless computing uses event-triggered stateless containers to host your application or part of your application.</span></span> <span data-ttu-id="27307-111">As plataformas sem servidor podem escalar horizontalmente e em para atender à demanda conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="27307-111">Serverless platforms can scale out and in to meet demand as-needed.</span></span> <span data-ttu-id="27307-112">Plataformas como Azure Functions têm acesso fácil direto a outros serviços do Azure, como filas, eventos e armazenamento.</span><span class="sxs-lookup"><span data-stu-id="27307-112">Platforms like Azure Functions have easy direct access to other Azure services like queues, events, and storage.</span></span>

## <a name="what-challenges-are-solved-by-serverless"></a><span data-ttu-id="27307-113">Quais desafios são resolvidos sem servidor?</span><span class="sxs-lookup"><span data-stu-id="27307-113">What challenges are solved by serverless?</span></span>

<span data-ttu-id="27307-114">Sem servidor é a abstração final para longe da execução de seu próprio hardware.</span><span class="sxs-lookup"><span data-stu-id="27307-114">Serverless is the ultimate abstraction away from running your own hardware.</span></span> <span data-ttu-id="27307-115">Os desenvolvedores podem se concentrar exclusivamente em escrever código para resolver problemas de negócios, sem preocupação com qualquer uma das seguintes tarefas que possam ter sido necessárias ao hospedar seus próprios servidores:</span><span class="sxs-lookup"><span data-stu-id="27307-115">Developers can focus exclusively on writing code to solve business problems, without concern for any of the following tasks that might have been necessary when hosting your own servers:</span></span>

- <span data-ttu-id="27307-116">Compra de computadores e licenças de software</span><span class="sxs-lookup"><span data-stu-id="27307-116">Purchasing machines and software licenses</span></span>
- <span data-ttu-id="27307-117">Hospedagem, proteção, configuração e manutenção de computadores e seus requisitos de rede, energia e/C</span><span class="sxs-lookup"><span data-stu-id="27307-117">Housing, securing, configuring, and maintaining the machines and their networking, power, and A/C requirements</span></span>
- <span data-ttu-id="27307-118">Aplicação de patch e atualização de software e sistemas operacionais</span><span class="sxs-lookup"><span data-stu-id="27307-118">Patching and upgrading operating systems and software</span></span>
- <span data-ttu-id="27307-119">Configurando servidores Web ou serviços de máquina para hospedar software de aplicativo</span><span class="sxs-lookup"><span data-stu-id="27307-119">Configuring web servers or machine services to host application software</span></span>
- <span data-ttu-id="27307-120">Configurando o software de aplicativo em sua plataforma</span><span class="sxs-lookup"><span data-stu-id="27307-120">Configuring application software within its platform</span></span>

<span data-ttu-id="27307-121">Muitas empresas empregam dezenas de membros da equipe e alocam grandes orçamentos para dar suporte a essas questões de infraestrutura de hardware.</span><span class="sxs-lookup"><span data-stu-id="27307-121">Many companies employ dozens of staff members and allocate large budgets to support these hardware infrastructure concerns.</span></span> <span data-ttu-id="27307-122">Simplesmente mudar para a nuvem elimina algumas dessas preocupações; a mudança de aplicativos para o servidor eliminará o restante.</span><span class="sxs-lookup"><span data-stu-id="27307-122">Simply moving to the cloud eliminates some of these concerns; shifting applications all the way to serverless will eliminate the rest.</span></span>

## <a name="what-scenarios-are-appropriate-for-serverless"></a><span data-ttu-id="27307-123">Quais cenários são apropriados para servidores sem servidor?</span><span class="sxs-lookup"><span data-stu-id="27307-123">What scenarios are appropriate for serverless?</span></span>

<span data-ttu-id="27307-124">Sem servidor usa funções de curta execução individuais que são chamadas em resposta a algum gatilho.</span><span class="sxs-lookup"><span data-stu-id="27307-124">Serverless uses individual short-running functions that are called in response to some trigger.</span></span> <span data-ttu-id="27307-125">Isso os torna ideais para o processamento de tarefas em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="27307-125">This makes them ideal for processing background tasks.</span></span>

<span data-ttu-id="27307-126">Por exemplo, um aplicativo pode precisar enviar um email como parte do processamento de uma solicitação.</span><span class="sxs-lookup"><span data-stu-id="27307-126">For example, an application might need to send an email as part of processing a request.</span></span> <span data-ttu-id="27307-127">Em vez de enviar o email como parte do tratamento da solicitação da Web, os detalhes do email podem ser colocados em uma fila e uma função do Azure pode ser usada para pegar a mensagem e enviar o email.</span><span class="sxs-lookup"><span data-stu-id="27307-127">Instead of sending the email as part of handling the web request, the details of the email could be placed onto a queue and an Azure Function could be used to pick up the message and send the email.</span></span> <span data-ttu-id="27307-128">Muitas partes diferentes do aplicativo, ou até mesmo muitos aplicativos, podem aproveitar esse mesmo Azure Function, fornecendo melhor desempenho e escalabilidade para os aplicativos e usando o [nivelamento de carga baseado em fila](https://docs.microsoft.com/azure/architecture/patterns/queue-based-load-leveling) para evitar gargalos relacionados a enviando os emails.</span><span class="sxs-lookup"><span data-stu-id="27307-128">Many different parts of the application, or even many applications, could leverage this same Azure Function, providing improved performance and scalability for the applications and using [queue-based load leveling](https://docs.microsoft.com/azure/architecture/patterns/queue-based-load-leveling) to avoid bottlenecks related to sending the emails.</span></span>

<span data-ttu-id="27307-129">Embora um [padrão de editor/assinante](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) entre aplicativos e Azure Functions seja o padrão mais comum, outros padrões são possíveis.</span><span class="sxs-lookup"><span data-stu-id="27307-129">Although a [Publisher/Subscriber pattern](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) between applications and Azure Functions is the most common pattern, other patterns are possible.</span></span> <span data-ttu-id="27307-130">Azure Functions pode ser disparado por outros eventos, como alterações no armazenamento de BLOBs do Azure.</span><span class="sxs-lookup"><span data-stu-id="27307-130">Azure Functions can be triggered by other events, such as changes to Azure Blob Storage.</span></span> <span data-ttu-id="27307-131">Um aplicativo com suporte para carregamentos de imagem pode ter uma função do Azure responsável por criar imagens em miniatura ou redimensionar imagens carregadas para dimensões consistentes ou otimizar o tamanho da imagem.</span><span class="sxs-lookup"><span data-stu-id="27307-131">An application that supported image uploads could have an Azure Function responsible for creating thumbnail images, or resizing uploaded images to consistent dimensions, or optimizing image size.</span></span> <span data-ttu-id="27307-132">Toda essa funcionalidade poderia ser disparada diretamente por inserções no armazenamento de BLOBs do Azure, mantendo a complexidade e a carga de trabalho fora do próprio aplicativo.</span><span class="sxs-lookup"><span data-stu-id="27307-132">All of this functionality could be triggered directly by inserts to Azure Blob Storage, keeping the complexity and the workload out of the application itself.</span></span>

<span data-ttu-id="27307-133">Muitos aplicativos têm processos de execução longa como parte de seus fluxos de trabalho.</span><span class="sxs-lookup"><span data-stu-id="27307-133">Many applications have long-running processes as part of their workflows.</span></span> <span data-ttu-id="27307-134">Muitas vezes, essas tarefas são feitas como parte da interação do usuário com o aplicativo, forçando o usuário a aguardar e afetar negativamente sua experiência.</span><span class="sxs-lookup"><span data-stu-id="27307-134">Often these tasks are done as part of the user's interaction with the application, forcing the user to wait and negatively impacting their experience.</span></span> <span data-ttu-id="27307-135">A computação sem servidor fornece uma ótima maneira de executar tarefas mais lentas fora do loop de interação do usuário, e essas tarefas podem ser facilmente dimensionadas com demanda sem exigir que todo o aplicativo seja dimensionado.</span><span class="sxs-lookup"><span data-stu-id="27307-135">Serverless computing provides a great way to perform slower tasks outside of the user interaction loop, and these tasks can easily scale with demand without requiring the entire application to scale.</span></span>

## <a name="when-should-you-avoid-serverless"></a><span data-ttu-id="27307-136">Quando você não deve evitar servidor?</span><span class="sxs-lookup"><span data-stu-id="27307-136">When should you avoid serverless?</span></span>

<span data-ttu-id="27307-137">A computação sem servidor é melhor usada para tarefas que não bloqueiam a interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="27307-137">Serverless computing is best-used for tasks that don't block the user interface.</span></span> <span data-ttu-id="27307-138">Isso significa que eles não são ideais para hospedar aplicativos Web ou APIs Web diretamente.</span><span class="sxs-lookup"><span data-stu-id="27307-138">This means they're not ideal for hosting web applications or web APIs directly.</span></span> <span data-ttu-id="27307-139">O principal motivo para isso é que as soluções sem servidor são provisionadas e dimensionadas sob demanda.</span><span class="sxs-lookup"><span data-stu-id="27307-139">The main reason for this is that serverless solutions are provisioned and scaled on demand.</span></span> <span data-ttu-id="27307-140">Quando uma nova instância de uma função é necessária, chamada de inicialização a *frio*, leva tempo para provisionar.</span><span class="sxs-lookup"><span data-stu-id="27307-140">When a new instance of a function is needed, referred to as a *cold start*, it takes time to provision.</span></span> <span data-ttu-id="27307-141">Esse tempo é normalmente de alguns segundos, mas pode ser mais demorado dependendo de uma variedade de fatores.</span><span class="sxs-lookup"><span data-stu-id="27307-141">This time is typically a few seconds, but can be longer depending on a variety of factors.</span></span> <span data-ttu-id="27307-142">Uma única instância pode, muitas vezes, ser mantida ativa indefinidamente (por exemplo, fazendo uma solicitação periodicamente), mas o problema de inicialização a frio permanece se o número de instâncias precisar ser escalado verticalmente.</span><span class="sxs-lookup"><span data-stu-id="27307-142">A single instance can often be kept alive indefinitely (for instance, by periodically making a request to it), but the cold start issue remains if the number of instances ever needs to scale up.</span></span>

<span data-ttu-id="27307-143">![a frio versus a inicialização a quente](./media/cold-start-warm-start.png)
**figura 3-10**.</span><span class="sxs-lookup"><span data-stu-id="27307-143">![Cold versus warm start](./media/cold-start-warm-start.png)
**Figure 3-10**.</span></span> <span data-ttu-id="27307-144">Início frio versus início quente.</span><span class="sxs-lookup"><span data-stu-id="27307-144">Cold start versus warm start.</span></span>

<span data-ttu-id="27307-145">Se você precisar evitar a inicialização a frio, poderá optar por alternar de um [plano de consumo para um plano dedicado](https://azure.microsoft.com/blog/understanding-serverless-cold-start/).</span><span class="sxs-lookup"><span data-stu-id="27307-145">If you need to avoid cold starts entirely, you can choose to switch from a [consumption plan to a dedicated plan](https://azure.microsoft.com/blog/understanding-serverless-cold-start/).</span></span> <span data-ttu-id="27307-146">Você também pode [Configurar uma ou mais instâncias pré-configuradas](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances) com o plano Premium para que, quando precisar adicionar outra instância, já esteja pronto e pronta para começar.</span><span class="sxs-lookup"><span data-stu-id="27307-146">You can also [configure one or more pre-warmed instances](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances) with the premium plan so when you need to add another instance, it's already up and ready to go.</span></span> <span data-ttu-id="27307-147">Essas opções podem atenuar uma das principais preocupações associadas à computação sem servidor.</span><span class="sxs-lookup"><span data-stu-id="27307-147">These options can mitigate one of the key concerns associated with serverless computing.</span></span>

<span data-ttu-id="27307-148">Normalmente, você também deve evitar servidores sem servidor para tarefas de longa execução.</span><span class="sxs-lookup"><span data-stu-id="27307-148">You should also typically avoid serverless for long-running tasks.</span></span> <span data-ttu-id="27307-149">Elas são melhores para pequenas partes de trabalho que podem ser concluídas rapidamente.</span><span class="sxs-lookup"><span data-stu-id="27307-149">They're best for small pieces of work that can be completed quickly.</span></span> <span data-ttu-id="27307-150">A maioria das plataformas sem servidor exige que as funções individuais sejam concluídas em alguns minutos.</span><span class="sxs-lookup"><span data-stu-id="27307-150">Most serverless platforms require individual functions to complete within a few minutes.</span></span> <span data-ttu-id="27307-151">Azure Functions usa como padrão uma duração de tempo limite de 5 minutos (pode ser configurada até 10 minutos).</span><span class="sxs-lookup"><span data-stu-id="27307-151">Azure Functions defaults to a 5-minute time-out duration (can be configured up to 10 minutes).</span></span> <span data-ttu-id="27307-152">O plano Azure Functions Premium também pode mitigar esse problema, padronizando o tempo limite para 30 minutos e permitindo que um limite mais alto não associado seja configurado.</span><span class="sxs-lookup"><span data-stu-id="27307-152">The Azure Functions premium plan can mitigate this issue as well, defaulting time outs to 30 minutes and allowing an unbounded higher limit to be configured.</span></span>

<span data-ttu-id="27307-153">Por fim, o uso sem servidor para determinadas tarefas em seu aplicativo adiciona complexidade.</span><span class="sxs-lookup"><span data-stu-id="27307-153">Finally, leveraging serverless for certain tasks within your application adds complexity.</span></span> <span data-ttu-id="27307-154">Geralmente, é melhor arquitetar seu aplicativo de maneira modular e rigidamente acoplada primeiro e, em seguida, identificar se há benefícios que o servidor não oferece a maior complexidade que vale a pena.</span><span class="sxs-lookup"><span data-stu-id="27307-154">It's often best to architect your application in a modular, loosely coupled manner first, and then identify if there are benefits serverless would offer that make the additional complexity worthwhile.</span></span> <span data-ttu-id="27307-155">Muitos aplicativos menores serão executados perfeitamente bem em uma única implantação monolítica, sem a necessidade de que a computação sem servidor da arquitetura de aplicativo distribuído exija.</span><span class="sxs-lookup"><span data-stu-id="27307-155">Many smaller applications will run perfectly well in a single monolithic deployment, without the need for the distributed application architecture serverless computing requires.</span></span>

## <a name="references"></a><span data-ttu-id="27307-156">Referências</span><span class="sxs-lookup"><span data-stu-id="27307-156">References</span></span>

- [<span data-ttu-id="27307-157">Entendendo a inicialização a frio sem servidor</span><span class="sxs-lookup"><span data-stu-id="27307-157">Understanding serverless cold start</span></span>](https://azure.microsoft.com/blog/understanding-serverless-cold-start/)
- [<span data-ttu-id="27307-158">Instâncias de Azure Functions previamente passivas</span><span class="sxs-lookup"><span data-stu-id="27307-158">Pre-warmed Azure Functions instances</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances)
- [<span data-ttu-id="27307-159">Criar uma função no Linux usando uma imagem personalizada</span><span class="sxs-lookup"><span data-stu-id="27307-159">Create a function on Linux using a custom image</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image)

>[!div class="step-by-step"]
><span data-ttu-id="27307-160">[Anterior](leverage-containers-orchestrators.md)
>[Próximo](combine-containers-serverless-approaches.md)</span><span class="sxs-lookup"><span data-stu-id="27307-160">[Previous](leverage-containers-orchestrators.md)
[Next](combine-containers-serverless-approaches.md)</span></span>
