---
title: Azure Monitor
description: Usar Azure Monitor para obter visibilidade do seu sistema está em execução.
ms.date: 07/05/2020
ms.openlocfilehash: 342d54292736622f6546768e039ca244a69b020e
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90540172"
---
# <a name="azure-monitor"></a><span data-ttu-id="ef362-103">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="ef362-103">Azure Monitor</span></span>

<span data-ttu-id="ef362-104">Nenhum outro provedor de nuvem tem o mesmo que uma solução de monitoramento de aplicativo em nuvem que foi encontrada no Azure.</span><span class="sxs-lookup"><span data-stu-id="ef362-104">No other cloud provider has as mature of a cloud application monitoring solution than that found in Azure.</span></span> <span data-ttu-id="ef362-105">Azure Monitor é um nome abrangente para uma coleção de ferramentas projetadas para fornecer visibilidade do estado do seu sistema.</span><span class="sxs-lookup"><span data-stu-id="ef362-105">Azure Monitor is an umbrella name for a collection of tools designed to provide visibility into the state of your system.</span></span> <span data-ttu-id="ef362-106">Ele ajuda a entender como os serviços nativos de nuvem estão sendo executados e identifica de forma proativa os problemas que os afetam.</span><span class="sxs-lookup"><span data-stu-id="ef362-106">It helps you understand how your cloud-native services are performing and proactively identifies issues affecting them.</span></span> <span data-ttu-id="ef362-107">A Figura 7-12 apresenta um alto nível de exibição de Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="ef362-107">Figure 7-12 presents a high level of view of Azure Monitor.</span></span>

<span data-ttu-id="ef362-108">![Exibição de alto nível de Azure Monitor. ](./media/azure-monitor.png)
 **Figura 7-12**.</span><span class="sxs-lookup"><span data-stu-id="ef362-108">![High-level view of Azure Monitor.](./media/azure-monitor.png)
**Figure 7-12**.</span></span> <span data-ttu-id="ef362-109">Exibição de alto nível de Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="ef362-109">High-level view of Azure Monitor.</span></span>

## <a name="gathering-logs-and-metrics"></a><span data-ttu-id="ef362-110">Coletando logs e métricas</span><span class="sxs-lookup"><span data-stu-id="ef362-110">Gathering logs and metrics</span></span>

<span data-ttu-id="ef362-111">A primeira etapa em qualquer solução de monitoramento é reunir o máximo de dados possível.</span><span class="sxs-lookup"><span data-stu-id="ef362-111">The first step in any monitoring solution is to gather as much data as possible.</span></span> <span data-ttu-id="ef362-112">Quanto mais dados forem coletados, mais profundo é o Insight.</span><span class="sxs-lookup"><span data-stu-id="ef362-112">The more data gathered, the deeper the insights.</span></span> <span data-ttu-id="ef362-113">Os sistemas de instrumentação tradicionalmente eram difíceis.</span><span class="sxs-lookup"><span data-stu-id="ef362-113">Instrumenting systems has traditionally been difficult.</span></span> <span data-ttu-id="ef362-114">O SNMP (Simple Network Management Protocol) era o protocolo Gold padrão para coletar informações no nível do computador, mas exigia uma grande quantidade de conhecimento e configuração.</span><span class="sxs-lookup"><span data-stu-id="ef362-114">Simple Network Management Protocol (SNMP) was the gold standard protocol for collecting machine level information, but it required a great deal of knowledge and configuration.</span></span> <span data-ttu-id="ef362-115">Felizmente, grande parte desse trabalho árduo foi eliminado, pois as métricas mais comuns são coletadas automaticamente pelo Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="ef362-115">Fortunately, much of this hard work has been eliminated as the most common metrics are gathered automatically by Azure Monitor.</span></span>

<span data-ttu-id="ef362-116">Os eventos e as métricas de nível de aplicativo não são possíveis para instrumentar automaticamente porque são específicos do aplicativo que está sendo implantado.</span><span class="sxs-lookup"><span data-stu-id="ef362-116">Application level metrics and events aren't possible to instrument automatically because they're specific to the application being deployed.</span></span> <span data-ttu-id="ef362-117">Para reunir essas métricas, há [SDKs e APIs disponíveis](https://docs.microsoft.com/azure/azure-monitor/app/api-custom-events-metrics) para relatar diretamente essas informações, como quando um cliente se inscreve ou conclui um pedido.</span><span class="sxs-lookup"><span data-stu-id="ef362-117">In order to gather these metrics, there are [SDKs and APIs available](https://docs.microsoft.com/azure/azure-monitor/app/api-custom-events-metrics) to directly report such information, such as when a customer signs up or completes an order.</span></span> <span data-ttu-id="ef362-118">As exceções também podem ser capturadas e relatadas de volta para Azure Monitor por meio de Application Insights.</span><span class="sxs-lookup"><span data-stu-id="ef362-118">Exceptions can also be captured and reported back into Azure Monitor via Application Insights.</span></span> <span data-ttu-id="ef362-119">Os SDKs dão suporte à maioria de todos os idiomas encontrados em aplicativos nativos de nuvem, incluindo Go, Python, JavaScript e linguagens .NET.</span><span class="sxs-lookup"><span data-stu-id="ef362-119">The SDKs support most every language found in Cloud Native Applications including Go, Python, JavaScript, and the .NET languages.</span></span>

<span data-ttu-id="ef362-120">O objetivo final da coleta de informações sobre o estado do seu aplicativo é garantir que seus usuários finais tenham uma boa experiência.</span><span class="sxs-lookup"><span data-stu-id="ef362-120">The ultimate goal of gathering information about the state of your application is to ensure that your end users have a good experience.</span></span> <span data-ttu-id="ef362-121">Qual é a melhor maneira de saber se os usuários estão enfrentando problemas do que fazer [testes da Web externos](https://docs.microsoft.com/azure/azure-monitor/app/monitor-web-app-availability)?</span><span class="sxs-lookup"><span data-stu-id="ef362-121">What better way to tell if users are experiencing issues than doing [outside-in web tests](https://docs.microsoft.com/azure/azure-monitor/app/monitor-web-app-availability)?</span></span> <span data-ttu-id="ef362-122">Esses testes podem ser tão simples quanto executar ping em seu site de locais em todo o mundo ou se envolver como os agentes fazem logon no site e simulam ações do usuário.</span><span class="sxs-lookup"><span data-stu-id="ef362-122">These tests can be as simple as pinging your website from locations around the world or as involved as having agents log into the site and simulate user actions.</span></span>

## <a name="reporting-data"></a><span data-ttu-id="ef362-123">Dados de relatórios</span><span class="sxs-lookup"><span data-stu-id="ef362-123">Reporting data</span></span>

<span data-ttu-id="ef362-124">Depois que os dados são coletados, eles podem ser manipulados, resumidos e plotados em gráficos, o que permite que os usuários vejam instantaneamente quando há problemas.</span><span class="sxs-lookup"><span data-stu-id="ef362-124">Once the data is gathered, it can be manipulated, summarized, and plotted into charts, which allow users to instantly see when there are problems.</span></span> <span data-ttu-id="ef362-125">Esses gráficos podem ser coletados em painéis ou em pastas de trabalho, um relatório de várias páginas projetado para contar uma história sobre algum aspecto do sistema.</span><span class="sxs-lookup"><span data-stu-id="ef362-125">These charts can be gathered into dashboards or into Workbooks, a multi-page report designed to tell a story about some aspect of the system.</span></span>

<span data-ttu-id="ef362-126">Nenhum aplicativo moderno estaria completo sem alguma inteligência artificial ou aprendizado de máquina.</span><span class="sxs-lookup"><span data-stu-id="ef362-126">No modern application would be complete without some artificial intelligence or machine learning.</span></span> <span data-ttu-id="ef362-127">Para esse fim, os dados [podem ser passados](https://www.youtube.com/watch?v=Cuza-I1g9tw) para as várias ferramentas de aprendizado de máquina no Azure para permitir que você extraia tendências e informações que, de outra forma, seriam ocultas.</span><span class="sxs-lookup"><span data-stu-id="ef362-127">To this end, data [can be passed](https://www.youtube.com/watch?v=Cuza-I1g9tw) to the various machine learning tools in Azure to allow you to extract trends and information that would otherwise be hidden.</span></span>

<span data-ttu-id="ef362-128">Application Insights fornece uma linguagem de consulta poderosa (semelhante ao SQL) chamada *Kusto* , que pode consultar registros, resumir e até mesmo gráficos de plotagem.</span><span class="sxs-lookup"><span data-stu-id="ef362-128">Application Insights provides a powerful (SQL-like) query language called *Kusto* that can query records, summarize them, and even plot charts.</span></span> <span data-ttu-id="ef362-129">Por exemplo, a consulta a seguir localizará todos os registros do mês de novembro de 2007, agrupá-los por Estado e plotar os 10 primeiros como um gráfico de pizza.</span><span class="sxs-lookup"><span data-stu-id="ef362-129">For example, the following query will locate all records for the month of November 2007, group them by state, and plot the top 10 as a pie chart.</span></span>

```kusto
StormEvents
| where StartTime >= datetime(2007-11-01) and StartTime < datetime(2007-12-01)
| summarize count() by State
| top 10 by count_
| render piechart
```

<span data-ttu-id="ef362-130">A Figura 7-13 mostra os resultados dessa Application Insights consulta.</span><span class="sxs-lookup"><span data-stu-id="ef362-130">Figure 7-13 shows the results of this Application Insights Query.</span></span>

<span data-ttu-id="ef362-131">![Application Insights resultados da consulta, ](./media/application_insights_example.png)
 **Figura 7-13**.</span><span class="sxs-lookup"><span data-stu-id="ef362-131">![Application Insights query results](./media/application_insights_example.png)
**Figure 7-13**.</span></span> <span data-ttu-id="ef362-132">Application Insights resultados da consulta.</span><span class="sxs-lookup"><span data-stu-id="ef362-132">Application Insights query results.</span></span>

<span data-ttu-id="ef362-133">Há um [playground para experimentar as consultas do Kusto](https://dataexplorer.azure.com/clusters/help/databases/Samples) .</span><span class="sxs-lookup"><span data-stu-id="ef362-133">There is a [playground for experimenting with Kusto](https://dataexplorer.azure.com/clusters/help/databases/Samples) queries.</span></span> <span data-ttu-id="ef362-134">A leitura de [consultas de exemplo](https://docs.microsoft.com/azure/kusto/query/samples) também pode ser instrutiva.</span><span class="sxs-lookup"><span data-stu-id="ef362-134">Reading [sample queries](https://docs.microsoft.com/azure/kusto/query/samples) can also be instructive.</span></span>

## <a name="dashboards"></a><span data-ttu-id="ef362-135">Painéis</span><span class="sxs-lookup"><span data-stu-id="ef362-135">Dashboards</span></span>

<span data-ttu-id="ef362-136">Há várias tecnologias de painel diferentes que podem ser usadas para trazer as informações de Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="ef362-136">There are several different dashboard technologies that may be used to surface the information from Azure Monitor.</span></span> <span data-ttu-id="ef362-137">Talvez a mais simples seja apenas executar consultas em Application Insights e [plotar os dados em um gráfico](https://docs.microsoft.com/azure/azure-monitor/learn/tutorial-app-dashboards).</span><span class="sxs-lookup"><span data-stu-id="ef362-137">Perhaps the simplest is to just run queries in Application Insights and [plot the data into a chart](https://docs.microsoft.com/azure/azure-monitor/learn/tutorial-app-dashboards).</span></span>

<span data-ttu-id="ef362-138">![Um exemplo de gráficos de Application Insights incorporados no painel principal do Azure, ](./media/azure_dashboard.png)
 **Figura 7-14**.</span><span class="sxs-lookup"><span data-stu-id="ef362-138">![An example of Application Insights charts embedded in the main Azure Dashboard](./media/azure_dashboard.png)
**Figure 7-14**.</span></span> <span data-ttu-id="ef362-139">Um exemplo de gráficos de Application Insights incorporados no painel principal do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef362-139">An example of Application Insights charts embedded in the main Azure Dashboard.</span></span>

<span data-ttu-id="ef362-140">Esses gráficos podem então ser inseridos no portal do Azure apropriado pelo uso do recurso de painel.</span><span class="sxs-lookup"><span data-stu-id="ef362-140">These charts can then be embedded in the Azure portal proper through use of the dashboard feature.</span></span> <span data-ttu-id="ef362-141">Para usuários com mais requisitos de ação, como a possibilidade de fazer uma busca detalhada em várias camadas de dados, Azure Monitor dados estão disponíveis para [Power bi](https://powerbi.microsoft.com/).</span><span class="sxs-lookup"><span data-stu-id="ef362-141">For users with more exacting requirements, such as being able to drill down into several tiers of data, Azure Monitor data is available to [Power BI](https://powerbi.microsoft.com/).</span></span> <span data-ttu-id="ef362-142">Power BI é uma ferramenta de classe empresarial, líder do setor, business intelligence que pode agregar dados de várias fontes de dados diferentes.</span><span class="sxs-lookup"><span data-stu-id="ef362-142">Power BI is an industry-leading, enterprise class, business intelligence tool that can aggregate data from many different data sources.</span></span>

![Um exemplo Power BI Dashboard](./media/powerbidashboard.png)

<span data-ttu-id="ef362-144">**Figura 7-15**.</span><span class="sxs-lookup"><span data-stu-id="ef362-144">**Figure 7-15**.</span></span> <span data-ttu-id="ef362-145">Um exemplo Power BI Dashboard.</span><span class="sxs-lookup"><span data-stu-id="ef362-145">An example Power BI dashboard.</span></span>

## <a name="alerts"></a><span data-ttu-id="ef362-146">Alertas</span><span class="sxs-lookup"><span data-stu-id="ef362-146">Alerts</span></span>

<span data-ttu-id="ef362-147">Às vezes, ter painéis de dados é insuficiente.</span><span class="sxs-lookup"><span data-stu-id="ef362-147">Sometimes, having data dashboards is insufficient.</span></span> <span data-ttu-id="ef362-148">Se ninguém estiver atento a assistir aos painéis, ele ainda poderá ser muitas horas antes que um problema seja resolvido ou até mesmo detectado.</span><span class="sxs-lookup"><span data-stu-id="ef362-148">If nobody is awake to watch the dashboards, then it can still be many hours before a problem is addressed, or even detected.</span></span> <span data-ttu-id="ef362-149">Para esse fim, Azure Monitor também fornece uma solução de [alerta](https://docs.microsoft.com/azure/azure-monitor/platform/alerts-overview)de entalhe superior.</span><span class="sxs-lookup"><span data-stu-id="ef362-149">To this end, Azure Monitor also provides a top notch [alerting solution](https://docs.microsoft.com/azure/azure-monitor/platform/alerts-overview).</span></span> <span data-ttu-id="ef362-150">Os alertas podem ser disparados por uma ampla gama de condições, incluindo:</span><span class="sxs-lookup"><span data-stu-id="ef362-150">Alerts can be triggered by a wide range of conditions including:</span></span>

- <span data-ttu-id="ef362-151">Valores métricos</span><span class="sxs-lookup"><span data-stu-id="ef362-151">Metric values</span></span>
- <span data-ttu-id="ef362-152">Consultas da pesquisa de logs</span><span class="sxs-lookup"><span data-stu-id="ef362-152">Log search queries</span></span>
- <span data-ttu-id="ef362-153">Eventos do Log de Atividades</span><span class="sxs-lookup"><span data-stu-id="ef362-153">Activity Log events</span></span>
- <span data-ttu-id="ef362-154">Integridade da plataforma subjacente do Azure</span><span class="sxs-lookup"><span data-stu-id="ef362-154">Health of the underlying Azure platform</span></span>
- <span data-ttu-id="ef362-155">Testes de disponibilidade do site</span><span class="sxs-lookup"><span data-stu-id="ef362-155">Tests for web site availability</span></span>

<span data-ttu-id="ef362-156">Quando disparado, os alertas podem executar uma ampla variedade de tarefas.</span><span class="sxs-lookup"><span data-stu-id="ef362-156">When triggered, the alerts can perform a wide variety of tasks.</span></span> <span data-ttu-id="ef362-157">No lado simples, os alertas podem apenas enviar uma notificação por email para uma lista de endereçamento ou uma mensagem de texto para um indivíduo.</span><span class="sxs-lookup"><span data-stu-id="ef362-157">On the simple side, the alerts may just send an e-mail notification to a mailing list or a text message to an individual.</span></span> <span data-ttu-id="ef362-158">Alertas mais envolvidos podem disparar um fluxo de trabalho em uma ferramenta como PagerDuty, que reconhece quem está em chamada para um determinado aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ef362-158">More involved alerts might trigger a workflow in a tool such as PagerDuty, which is aware of who is on call for a particular application.</span></span> <span data-ttu-id="ef362-159">Os alertas podem disparar ações no [Microsoft Flow](https://flow.microsoft.com/) desbloqueando possibilidades ilimitadas para fluxos de trabalho.</span><span class="sxs-lookup"><span data-stu-id="ef362-159">Alerts can trigger actions in [Microsoft Flow](https://flow.microsoft.com/) unlocking near limitless possibilities for workflows.</span></span>

<span data-ttu-id="ef362-160">Como as causas comuns dos alertas são identificadas, os alertas podem ser aprimorados com detalhes sobre as causas comuns dos alertas e as etapas a serem seguidas para resolvê-los.</span><span class="sxs-lookup"><span data-stu-id="ef362-160">As common causes of alerts are identified, the alerts can be enhanced with details about the common causes of the alerts and the steps to take to resolve them.</span></span> <span data-ttu-id="ef362-161">Implantações de aplicativo nativas de nuvem altamente maduras podem optar por disparar tarefas de auto-recuperação, que executam ações como remover nós com falha de um conjunto de dimensionamento ou disparar uma atividade de dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="ef362-161">Highly mature cloud-native application deployments may opt to kick off self-healing tasks, which perform actions such as removing failing nodes from a scale set or triggering an autoscaling activity.</span></span> <span data-ttu-id="ef362-162">Eventualmente, talvez não seja mais necessário ativar o pessoal de chamada em 2AM para resolver um problema de site ativo, pois o sistema poderá se ajustar para compensar ou pelo menos limp até que alguém chegue ao trabalho na manhã seguinte.</span><span class="sxs-lookup"><span data-stu-id="ef362-162">Eventually it may no longer be necessary to wake up on-call personnel at 2AM to resolve a live-site issue as the system will be able to adjust itself to compensate or at least limp along until somebody arrives at work the next morning.</span></span>

<span data-ttu-id="ef362-163">Azure Monitor aproveita automaticamente o aprendizado de máquina para entender os parâmetros operacionais normais dos aplicativos implantados.</span><span class="sxs-lookup"><span data-stu-id="ef362-163">Azure Monitor automatically leverages machine learning to understand the normal operating parameters of deployed applications.</span></span> <span data-ttu-id="ef362-164">Isso permite que ele detecte serviços que estão operando fora de seus parâmetros normais.</span><span class="sxs-lookup"><span data-stu-id="ef362-164">This enables it to detect services that are operating outside of their normal parameters.</span></span> <span data-ttu-id="ef362-165">Por exemplo, o tráfego de dia da semana típico no site pode ser 10.000 solicitações por minuto.</span><span class="sxs-lookup"><span data-stu-id="ef362-165">For instance, the typical weekday traffic on the site might be 10,000 requests per minute.</span></span> <span data-ttu-id="ef362-166">E, em seguida, em uma determinada semana, repentinamente, o número de solicitações atinge um 20.000 de solicitações altamente incomuns por minuto.</span><span class="sxs-lookup"><span data-stu-id="ef362-166">And then, on a given week, suddenly the number of requests hits a highly unusual 20,000 requests per minute.</span></span> <span data-ttu-id="ef362-167">A [detecção inteligente](https://docs.microsoft.com/azure/azure-monitor/app/proactive-diagnostics) notará esse desvio da norma e disparará um alerta.</span><span class="sxs-lookup"><span data-stu-id="ef362-167">[Smart Detection](https://docs.microsoft.com/azure/azure-monitor/app/proactive-diagnostics) will notice this deviation from the norm and trigger an alert.</span></span> <span data-ttu-id="ef362-168">Ao mesmo tempo, a análise de tendência é inteligente o suficiente para evitar o acionamento de falsos positivos quando a carga de tráfego é esperada.</span><span class="sxs-lookup"><span data-stu-id="ef362-168">At the same time, the trend analysis is smart enough to avoid firing false positives when the traffic load is expected.</span></span>

## <a name="references"></a><span data-ttu-id="ef362-169">Referências</span><span class="sxs-lookup"><span data-stu-id="ef362-169">References</span></span>

- [<span data-ttu-id="ef362-170">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="ef362-170">Azure Monitor</span></span>](https://docs.microsoft.com/azure/azure-monitor/overview)

>[!div class="step-by-step"]
><span data-ttu-id="ef362-171">[Anterior](monitoring-azure-kubernetes.md) 
> [Avançar](identity.md)</span><span class="sxs-lookup"><span data-stu-id="ef362-171">[Previous](monitoring-azure-kubernetes.md)
[Next](identity.md)</span></span>
