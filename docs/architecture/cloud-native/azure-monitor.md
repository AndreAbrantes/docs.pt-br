---
title: Azure Monitor
description: O uso do Monitor Azure para ganhar visibilidade no sistema está sendo executado.
ms.date: 02/05/2020
ms.openlocfilehash: 4e5ddba6c1c13dc65662a7748d4ae3a58a6a6f68
ms.sourcegitcommit: f87ad41b8e62622da126aa928f7640108c4eff98
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/07/2020
ms.locfileid: "80805624"
---
# <a name="azure-monitor"></a><span data-ttu-id="a4ca1-103">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="a4ca1-103">Azure Monitor</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="a4ca1-104">Nenhum outro provedor de nuvem tem uma solução de monitoramento de aplicativos em nuvem tão madura quanto a encontrada no Azure.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-104">No other cloud provider has as mature of a cloud application monitoring solution as that found in Azure.</span></span> <span data-ttu-id="a4ca1-105">O Azure Monitor é um nome guarda-chuva para uma coleção de ferramentas projetadas para fornecer visibilidade sobre o estado do seu sistema, insights sobre quaisquer problemas e otimização do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-105">Azure Monitor is an umbrella name for a collection of tools designed to provide visibility into the state of your system, insights into any problems, and optimization of your application.</span></span>

<span data-ttu-id="a4ca1-106">![O Azure Monitor, uma coleção de ferramentas para fornecer informações sobre como um aplicativo nativo da nuvem está funcionando. ](./media/azure-monitor.png)
 **Figura 7-12**.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-106">![Azure Monitor, a collection to tools to provide insight into how a cloud-native application is functioning.](./media/azure-monitor.png)
**Figure 7-12**.</span></span> <span data-ttu-id="a4ca1-107">O Azure Monitor, uma coleção de ferramentas para fornecer informações sobre como um aplicativo nativo da nuvem está funcionando.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-107">Azure Monitor, a collection to tools to provide insight into how a cloud-native application is functioning.</span></span>

## <a name="gathering-logs-and-metrics"></a><span data-ttu-id="a4ca1-108">Coleta de registros e métricas</span><span class="sxs-lookup"><span data-stu-id="a4ca1-108">Gathering logs and metrics</span></span>

<span data-ttu-id="a4ca1-109">O primeiro passo em qualquer solução de monitoramento é reunir o máximo de dados possível.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-109">The first step in any monitoring solution is to gather as much data as possible.</span></span> <span data-ttu-id="a4ca1-110">Quanto mais dados podem ser coletados, mais profundos são os insights que podem ser obtidos.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-110">The more data that can be gathered, the deeper the insights that can be obtained.</span></span> <span data-ttu-id="a4ca1-111">Os sistemas de instrumentação têm sido tradicionalmente difíceis.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-111">Instrumenting systems has traditionally been difficult.</span></span> <span data-ttu-id="a4ca1-112">O Simples Protocolo de Gerenciamento de Rede (SNMP) era o protocolo padrão-ouro para coletar informações de nível de máquina, mas exigia muito conhecimento e configuração.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-112">Simple Network Management Protocol (SNMP) was the gold standard protocol for collecting machine level information but it required a great deal of knowledge and configuring.</span></span> <span data-ttu-id="a4ca1-113">Felizmente, grande parte desse trabalho duro foi eliminada, pois as métricas mais comuns são coletadas automaticamente pelo Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-113">Fortunately, much of this hard work has been eliminated as the most common metrics are gathered automatically by Azure Monitor.</span></span>

<span data-ttu-id="a4ca1-114">Métricas e eventos de nível de aplicação não são possíveis de instrumentar automaticamente porque são específicos para o aplicativo que está sendo implantado.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-114">Application level metrics and events aren't possible to instrument automatically because they're specific to the application being deployed.</span></span> <span data-ttu-id="a4ca1-115">Para coletar essas métricas, [existem SDKs e APIs disponíveis](https://docs.microsoft.com/azure/azure-monitor/app/api-custom-events-metrics) para relatar diretamente essas informações, como quando um cliente se inscreve ou completa um pedido.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-115">In order to gather these metrics, there are [SDKs and APIs available](https://docs.microsoft.com/azure/azure-monitor/app/api-custom-events-metrics) to directly report such information, such as when a customer signs up or completes an order.</span></span> <span data-ttu-id="a4ca1-116">As exceções também podem ser capturadas e reportadas de volta ao Azure Monitor via Application Insights.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-116">Exceptions can also be captured and reported back into Azure Monitor via Application Insights.</span></span> <span data-ttu-id="a4ca1-117">Os SDKs suportam a maioria das linguagens encontradas em aplicativos nativos da nuvem, incluindo go, python, javascript e os idiomas .NET.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-117">The SDKs support most every language found in Cloud Native Applications including Go, Python, JavaScript, and the .NET languages.</span></span>

<span data-ttu-id="a4ca1-118">O objetivo final de coletar informações sobre o estado do seu aplicativo é garantir que seus usuários finais tenham uma boa experiência.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-118">The ultimate goal of gathering information about the state of your application is to ensure that your end users have a good experience.</span></span> <span data-ttu-id="a4ca1-119">Que melhor maneira de saber se os usuários estão enfrentando problemas do que fazendo [testes web externos?](https://docs.microsoft.com/azure/azure-monitor/app/monitor-web-app-availability)</span><span class="sxs-lookup"><span data-stu-id="a4ca1-119">What better way to tell if users are experiencing issues than doing [outside-in web tests](https://docs.microsoft.com/azure/azure-monitor/app/monitor-web-app-availability)?</span></span> <span data-ttu-id="a4ca1-120">Esses testes podem ser tão simples quanto pingar seu site de locais ao redor do mundo ou tão envolvidos quanto ter agentes locomisso no site e simular ações do usuário.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-120">These tests can be as simple as pinging your website from locations around the world or as involved as having agents log into the site and simulate user actions.</span></span>

## <a name="reporting-data"></a><span data-ttu-id="a4ca1-121">Relatórios de dados</span><span class="sxs-lookup"><span data-stu-id="a4ca1-121">Reporting data</span></span>

<span data-ttu-id="a4ca1-122">Uma vez que os dados são coletados, eles podem ser manipulados, resumidos e plotados em gráficos, que permitem que os usuários vejam instantaneamente quando há problemas.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-122">Once the data is gathered, it can be manipulated, summarized, and plotted into charts, which allow users to instantly see when there are problems.</span></span> <span data-ttu-id="a4ca1-123">Esses gráficos podem ser reunidos em dashboards ou em Workbooks, um relatório de várias páginas projetado para contar uma história sobre algum aspecto do sistema.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-123">These charts can be gathered into dashboards or into Workbooks, a multi-page report designed to tell a story about some aspect of the system.</span></span>

<span data-ttu-id="a4ca1-124">Nenhuma aplicação moderna seria completa sem alguma inteligência artificial ou aprendizado de máquina.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-124">No modern application would be complete without some artificial intelligence or machine learning.</span></span> <span data-ttu-id="a4ca1-125">Para isso, os dados [podem ser passados](https://www.youtube.com/watch?v=Cuza-I1g9tw) para as várias ferramentas de aprendizado de máquina no Azure para permitir que você extraia tendências e informações que de outra forma estariam ocultadas.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-125">To this end, data [can be passed](https://www.youtube.com/watch?v=Cuza-I1g9tw) to the various machine learning tools in Azure to allow you to extract trends and information that would otherwise be hidden.</span></span>

<span data-ttu-id="a4ca1-126">O Application Insights fornece uma poderosa linguagem de consulta chamada Kusto que pode ser usada para encontrar registros, resumi-los e até mesmo gráficos de plot.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-126">Application Insights provides a powerful query language called Kusto that can be used to find records, summarize them, and even plot charts.</span></span> <span data-ttu-id="a4ca1-127">Por exemplo, esta consulta localizará todos os registros do mês de novembro de 2007, os agrupará por estado e traçará o top 10 como um gráfico de tortas.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-127">For instance, this query will locate all the records for the month of November 2007, group them by state, and plot the top 10 as a pie chart.</span></span>

```kusto
StormEvents
| where StartTime >= datetime(2007-11-01) and StartTime < datetime(2007-12-01)
| summarize count() by State
| top 10 by count_
| render piechart
```

<span data-ttu-id="a4ca1-128">![O resultado da figura de](./media/azure-monitor.png)
consulta de insights do aplicativo**7-13**.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-128">![The result of the Application Insights Query](./media/azure-monitor.png)
**Figure 7-13**.</span></span> <span data-ttu-id="a4ca1-129">O resultado da consulta de insights do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-129">The result of the Application Insights Query.</span></span>

<span data-ttu-id="a4ca1-130">Há um playground para experimentar as consultas de [Kusto,](https://dataexplorer.azure.com/clusters/help/databases/Samples) que é um lugar fantástico para passar uma ou duas horas.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-130">There is a [playground for experimenting with Kusto](https://dataexplorer.azure.com/clusters/help/databases/Samples) queries, which is a fantastic place to spend an hour or two.</span></span> <span data-ttu-id="a4ca1-131">A leitura [de consultas de amostra](https://docs.microsoft.com/azure/kusto/query/samples) também pode ser instrutiva.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-131">Reading [sample queries](https://docs.microsoft.com/azure/kusto/query/samples) can also be instructive.</span></span>

## <a name="dashboards"></a><span data-ttu-id="a4ca1-132">Painéis</span><span class="sxs-lookup"><span data-stu-id="a4ca1-132">Dashboards</span></span>

<span data-ttu-id="a4ca1-133">Existem várias tecnologias de painel diferentes que podem ser usadas para emergir as informações do Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-133">There are several different dashboard technologies that may be used to surface the information from Azure Monitor.</span></span> <span data-ttu-id="a4ca1-134">Talvez o mais simples seja apenas executar consultas no Application Insights e [plotar os dados em um gráfico](https://docs.microsoft.com/azure/azure-monitor/learn/tutorial-app-dashboards).</span><span class="sxs-lookup"><span data-stu-id="a4ca1-134">Perhaps the simplest is to just run queries in Application Insights and [plot the data into a chart](https://docs.microsoft.com/azure/azure-monitor/learn/tutorial-app-dashboards).</span></span>

<span data-ttu-id="a4ca1-135">![Um exemplo de gráficos de insights de](./media/azure-monitor.png)
aplicativos incorporados na figura principal do painel do Azure**7-14**.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-135">![An example of Application Insights charts embedded in the main Azure Dashboard](./media/azure-monitor.png)
**Figure 7-14**.</span></span> <span data-ttu-id="a4ca1-136">Um exemplo de gráficos do Application Insights incorporados no painel principal do Azure.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-136">An example of Application Insights charts embedded in the main Azure Dashboard.</span></span>

<span data-ttu-id="a4ca1-137">Esses gráficos podem então ser incorporados no portal Azure propriamente dito através do uso do recurso de painel.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-137">These charts can then be embedded in the Azure portal proper through use of the dashboard feature.</span></span> <span data-ttu-id="a4ca1-138">Para usuários com requisitos mais exigentes, como ser capaz de detalhar em vários níveis de dados, os dados do Azure Monitor estão disponíveis para [o Power BI](https://powerbi.microsoft.com/).</span><span class="sxs-lookup"><span data-stu-id="a4ca1-138">For users with more exacting requirements, such as being able to drill down into several tiers of data, Azure Monitor data is available to [Power BI](https://powerbi.microsoft.com/).</span></span> <span data-ttu-id="a4ca1-139">O Power BI é uma ferramenta líder do setor, classe empresarial, de inteligência empresarial que pode agregar dados de muitas fontes de dados diferentes.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-139">Power BI is an industry-leading, enterprise class, business intelligence tool that can aggregate data from many different data sources.</span></span>

<span data-ttu-id="a4ca1-140">![Um exemplo do](./media/azure-monitor.png)
painel power bi**figura 7-15**.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-140">![An example Power BI dashboard](./media/azure-monitor.png)
**Figure 7-15**.</span></span> <span data-ttu-id="a4ca1-141">Um exemplo de painel Power BI.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-141">An example Power BI dashboard.</span></span>

## <a name="alerts"></a><span data-ttu-id="a4ca1-142">Alertas</span><span class="sxs-lookup"><span data-stu-id="a4ca1-142">Alerts</span></span>

<span data-ttu-id="a4ca1-143">Às vezes, ter dashboards de dados é insuficiente.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-143">Sometimes, having data dashboards is insufficient.</span></span> <span data-ttu-id="a4ca1-144">Se ninguém está acordado para assistir aos painéis, então ainda pode levar muitas horas até que um problema seja resolvido, ou mesmo detectado.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-144">If nobody is awake to watch the dashboards, then it can still be many hours before a problem is addressed, or even detected.</span></span> <span data-ttu-id="a4ca1-145">Para isso, o Azure Monitor também fornece uma [solução de alerta](https://docs.microsoft.com/azure/azure-monitor/platform/alerts-overview)de primeira linha .</span><span class="sxs-lookup"><span data-stu-id="a4ca1-145">To this end, Azure Monitor also provides a top notch [alerting solution](https://docs.microsoft.com/azure/azure-monitor/platform/alerts-overview).</span></span> <span data-ttu-id="a4ca1-146">Os alertas podem ser acionados por uma ampla gama de condições, incluindo:</span><span class="sxs-lookup"><span data-stu-id="a4ca1-146">Alerts can be triggered by a wide range of conditions including:</span></span>

- <span data-ttu-id="a4ca1-147">Valores métricos</span><span class="sxs-lookup"><span data-stu-id="a4ca1-147">Metric values</span></span>
- <span data-ttu-id="a4ca1-148">Consultas da pesquisa de logs</span><span class="sxs-lookup"><span data-stu-id="a4ca1-148">Log search queries</span></span>
- <span data-ttu-id="a4ca1-149">Eventos do Log de Atividades</span><span class="sxs-lookup"><span data-stu-id="a4ca1-149">Activity Log events</span></span>
- <span data-ttu-id="a4ca1-150">Integridade da plataforma subjacente do Azure</span><span class="sxs-lookup"><span data-stu-id="a4ca1-150">Health of the underlying Azure platform</span></span>
- <span data-ttu-id="a4ca1-151">Testes de disponibilidade do site</span><span class="sxs-lookup"><span data-stu-id="a4ca1-151">Tests for web site availability</span></span>

<span data-ttu-id="a4ca1-152">Quando acionados, os alertas podem executar uma grande variedade de tarefas.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-152">When triggered, the alerts can perform a wide variety of tasks.</span></span> <span data-ttu-id="a4ca1-153">No lado simples, os alertas podem apenas enviar uma notificação de e-mail para uma lista de discussão ou uma mensagem de texto para um indivíduo.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-153">On the simple side, the alerts may just send an e-mail notification to a mailing list or a text message to an individual.</span></span> <span data-ttu-id="a4ca1-154">Alertas mais envolvidos podem desencadear um fluxo de trabalho em uma ferramenta como o PagerDuty, que está ciente de quem está de plantão para um determinado aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-154">More involved alerts might trigger a workflow in a tool such as PagerDuty, which is aware of who is on call for a particular application.</span></span> <span data-ttu-id="a4ca1-155">Os alertas podem desencadear ações no [Microsoft Flow](https://flow.microsoft.com/) desbloqueando possibilidades quase ilimitadas para fluxos de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-155">Alerts can trigger actions in [Microsoft Flow](https://flow.microsoft.com/) unlocking near limitless possibilities for workflows.</span></span>

<span data-ttu-id="a4ca1-156">À medida que as causas comuns dos alertas são identificadas, os alertas podem ser aprimorados com detalhes sobre as causas comuns dos alertas e as medidas a serem tomadas para resolvê-los.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-156">As common causes of alerts are identified, the alerts can be enhanced with details about the common causes of the alerts and the steps to take to resolve them.</span></span> <span data-ttu-id="a4ca1-157">Implantações de aplicativos nativas da nuvem altamente maduras podem optar por iniciar tarefas de auto-recuperação, que executam ações como remover nódulos falhados de um conjunto de escala ou desencadear uma atividade de autodimensionamento.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-157">Highly mature cloud-native application deployments may opt to kick off self-healing tasks, which perform actions such as removing failing nodes from a scale set or triggering an autoscaling activity.</span></span> <span data-ttu-id="a4ca1-158">Eventualmente, pode não ser mais necessário acordar o pessoal de plantão às 2h para resolver um problema no local, pois o sistema será capaz de se ajustar para compensar ou pelo menos mancar até que alguém chegue ao trabalho na manhã seguinte.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-158">Eventually it may no longer be necessary to wake up on-call personnel at 2AM to resolve a live-site issue as the system will be able to adjust itself to compensate or at least limp along until somebody arrives at work the next morning.</span></span>

<span data-ttu-id="a4ca1-159">O Azure Monitor aproveita automaticamente o aprendizado de máquina para entender os parâmetros operacionais normais dos aplicativos implantados.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-159">Azure Monitor automatically leverages machine learning to understand the normal operating parameters of deployed applications.</span></span> <span data-ttu-id="a4ca1-160">Isso permite detectar serviços que estão operando fora de seus parâmetros normais.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-160">This enables it to detect services that are operating outside of their normal parameters.</span></span> <span data-ttu-id="a4ca1-161">Por exemplo, o tráfego típico durante a semana no site pode ser de 10.000 solicitações por minuto.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-161">For instance, the typical weekday traffic on the site might be 10,000 requests per minute.</span></span> <span data-ttu-id="a4ca1-162">E então, em uma determinada semana, de repente o número de pedidos atinge um altamente incomum 20.000 pedidos por minuto.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-162">And then, on a given week, suddenly the number of requests hits a highly unusual 20,000 requests per minute.</span></span> <span data-ttu-id="a4ca1-163">[A Detecção Inteligente](https://docs.microsoft.com/azure/azure-monitor/app/proactive-diagnostics) notará esse desvio da norma e acionará um alerta.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-163">[Smart Detection](https://docs.microsoft.com/azure/azure-monitor/app/proactive-diagnostics) will notice this deviation from the norm and trigger an alert.</span></span> <span data-ttu-id="a4ca1-164">Ao mesmo tempo, a análise de tendência é inteligente o suficiente para evitar disparar falsos positivos quando a carga de tráfego é esperada.</span><span class="sxs-lookup"><span data-stu-id="a4ca1-164">At the same time, the trend analysis is smart enough to avoid firing false positives when the traffic load is expected.</span></span>

## <a name="references"></a><span data-ttu-id="a4ca1-165">Referências</span><span class="sxs-lookup"><span data-stu-id="a4ca1-165">References</span></span>

- [<span data-ttu-id="a4ca1-166">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="a4ca1-166">Azure Monitor</span></span>](https://docs.microsoft.com/azure/azure-monitor/overview)

>[!div class="step-by-step"]
><span data-ttu-id="a4ca1-167">[Próximo](monitoring-azure-kubernetes.md)
>[anterior](identity.md)</span><span class="sxs-lookup"><span data-stu-id="a4ca1-167">[Previous](monitoring-azure-kubernetes.md)
[Next](identity.md)</span></span>
