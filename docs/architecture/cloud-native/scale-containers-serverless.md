---
title: Dimensionamento de contêineres e aplicativos sem servidor
description: Dimensionamento de aplicativos nativos de nuvem com o serviço kubernetes do Azure para atender à demanda do usuário, aumentando os recursos individuais da máquina ou aumentando o número de computadores em um cluster de aplicativos.
ms.date: 09/23/2019
ms.openlocfilehash: 2d0537fb3ed56beb4eccbf9b8c34a5d87793413b
ms.sourcegitcommit: 55f438d4d00a34b9aca9eedaac3f85590bb11565
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/23/2019
ms.locfileid: "71184795"
---
# <a name="scaling-containers-and-serverless-applications"></a><span data-ttu-id="e3735-103">Dimensionamento de contêineres e aplicativos sem servidor</span><span class="sxs-lookup"><span data-stu-id="e3735-103">Scaling containers and serverless applications</span></span>

<span data-ttu-id="e3735-104">Há duas maneiras típicas de dimensionar um aplicativo: escalar verticalmente e escalar horizontalmente. O primeiro se refere à adição de recursos a um host, enquanto o último se refere à adição ao número total de hosts.</span><span class="sxs-lookup"><span data-stu-id="e3735-104">There are two typical ways to scale an application: scaling up and scaling out. The former refers to adding capabilities to one host, while the latter refers to adding to the total number of hosts.</span></span> <span data-ttu-id="e3735-105">Uma analogia comum a ser usada para pensar nisso é como se familiarizar com alguns amigos em toda a cidade.</span><span class="sxs-lookup"><span data-stu-id="e3735-105">A common analogy to use to think about this is how to get yourself and some friends across town.</span></span> <span data-ttu-id="e3735-106">Se for apenas um amigo, você poderá entrar no carro de corrida de duas estações.</span><span class="sxs-lookup"><span data-stu-id="e3735-106">If it's just one friend, you could hop into your two-seat race car.</span></span> <span data-ttu-id="e3735-107">Mas se for três ou quatro, talvez seja necessário pegar um de seus SUVs ou minivan, aumentando verticalmente para aumentar a capacidade.</span><span class="sxs-lookup"><span data-stu-id="e3735-107">But if it's three or four, you might need to take one of your SUVs or a minivan, scaling up to increase capacity.</span></span> <span data-ttu-id="e3735-108">No entanto, quando o número total vai até uma dúzia ou mais, você provavelmente precisará realizar vários veículos (a menos que alguém retenha um barramento), que demonstra o conceito de expansão adicionando mais instâncias (neste caso, mais veículos).</span><span class="sxs-lookup"><span data-stu-id="e3735-108">When your total number jumps up to a dozen or more, though, you probably need to take multiple vehicles (unless someone drives a bus), which demonstrates the concept of scaling out by adding more instances (in this case, more vehicles).</span></span> <span data-ttu-id="e3735-109">Vamos ver como isso se aplica aos nossos aplicativos.</span><span class="sxs-lookup"><span data-stu-id="e3735-109">Let's see how this applies to our applications.</span></span>

## <a name="the-simple-solution-scaling-up"></a><span data-ttu-id="e3735-110">A solução simples: escalar verticalmente</span><span class="sxs-lookup"><span data-stu-id="e3735-110">The simple solution: scaling up</span></span>

<span data-ttu-id="e3735-111">O processo de atualização de servidores existentes para fornecer a eles mais recursos (CPU, memória, velocidade de e/s de disco, velocidade de e/s de rede) é conhecido como *escalar verticalmente*.</span><span class="sxs-lookup"><span data-stu-id="e3735-111">The process of upgrading existing servers to give them more resources (CPU, memory, disk I/O speed, network I/O speed) is known as *scaling up*.</span></span> <span data-ttu-id="e3735-112">Em aplicativos nativos de nuvem, o dimensionamento normalmente não se refere à compra e à instalação de hardware real em máquinas físicas, tanto quanto a escolha de um plano mais compatível de uma lista de opções disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e3735-112">In cloud-native applications, scaling up doesn't typically refer to purchasing and installing actual hardware on physical machines so much as choosing a more capable plan from a list of options available.</span></span> <span data-ttu-id="e3735-113">Os aplicativos nativos de nuvem normalmente aumentam modificando o tamanho da VM (máquina virtual) usado para hospedar os nós individuais em seu pool de nós kubernetes.</span><span class="sxs-lookup"><span data-stu-id="e3735-113">Cloud-native apps typically scale up by modifying the virtual machine (VM) size used to host the individual nodes in their Kubernetes node pool.</span></span> <span data-ttu-id="e3735-114">Conceitos de kubernetes como nós, clusters e pods são descritos mais detalhadamente na [próxima seção](leverage-containers-orchestrators.md).</span><span class="sxs-lookup"><span data-stu-id="e3735-114">Kubernetes concepts like nodes, clusters, and pods are described further in [the next section](leverage-containers-orchestrators.md).</span></span> <span data-ttu-id="e3735-115">O Azure dá suporte a uma ampla variedade de tamanhos de VM que executam o [Windows](https://docs.microsoft.com/azure/virtual-machines/windows/sizes?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) e o [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/sizes).</span><span class="sxs-lookup"><span data-stu-id="e3735-115">Azure supports a wide variety of VM sizes running both [Windows](https://docs.microsoft.com/azure/virtual-machines/windows/sizes?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) and [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/sizes).</span></span> <span data-ttu-id="e3735-116">Para dimensionar verticalmente seu aplicativo, crie um novo pool de nós com um tamanho de VM de nó maior e, em seguida, migre as cargas de trabalho para o novo pool.</span><span class="sxs-lookup"><span data-stu-id="e3735-116">To vertically scale your application, create a new node pool with a larger node VM size and then migrate workloads to the new pool.</span></span> <span data-ttu-id="e3735-117">Isso requer [vários pools de nó para o cluster AKs](https://docs.microsoft.com/azure/aks/use-multiple-node-pools), um recurso que está atualmente em visualização.</span><span class="sxs-lookup"><span data-stu-id="e3735-117">This requires [multiple node pools for your AKS cluster](https://docs.microsoft.com/azure/aks/use-multiple-node-pools), a feature that is currently in preview.</span></span> <span data-ttu-id="e3735-118">Aplicativos sem servidor expandem verticalmente, escolhendo um [plano Premium](https://docs.microsoft.com/azure/azure-functions/functions-scale) e tamanhos de instância Premium ou escolhendo um plano de serviço de aplicativo dedicado diferente.</span><span class="sxs-lookup"><span data-stu-id="e3735-118">Serverless apps scale up by choosing a [premium plan](https://docs.microsoft.com/azure/azure-functions/functions-scale) and premium instance sizes or by choosing a different dedicated app service plan.</span></span>

## <a name="scaling-out-cloud-native-apps"></a><span data-ttu-id="e3735-119">Expandindo aplicativos nativos de nuvem</span><span class="sxs-lookup"><span data-stu-id="e3735-119">Scaling out cloud-native apps</span></span>

<span data-ttu-id="e3735-120">Os aplicativos nativos de nuvem dão suporte à expansão adicionando mais nós ou pods a solicitações de serviço.</span><span class="sxs-lookup"><span data-stu-id="e3735-120">Cloud-native apps support scaling out by adding additional nodes or pods to service requests.</span></span> <span data-ttu-id="e3735-121">Isso pode ser feito manualmente ajustando as definições de configuração para o aplicativo (por exemplo, [dimensionando um pool de nós](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)) ou por meio de *dimensionamento*automático.</span><span class="sxs-lookup"><span data-stu-id="e3735-121">This can be accomplished manually by adjusting configuration settings for the app (for example, [scaling a node pool](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)), or through *autoscaling*.</span></span> <span data-ttu-id="e3735-122">O dimensionamento automático ajusta os recursos usados por um aplicativo para responder à demanda, semelhante a como um termostato responde à temperatura chamando para aquecimento ou resfriamento adicional.</span><span class="sxs-lookup"><span data-stu-id="e3735-122">Autoscaling adjusts the resources used by an app in order to respond to demand, similar to how a thermostat responds to temperature by calling for additional heating or cooling.</span></span> <span data-ttu-id="e3735-123">Ao usar o dimensionamento automático, o dimensionamento manual é desabilitado.</span><span class="sxs-lookup"><span data-stu-id="e3735-123">When using autoscaling, manual scaling is disabled.</span></span>

<span data-ttu-id="e3735-124">Os clusters AKS podem ser dimensionados de uma das duas maneiras:</span><span class="sxs-lookup"><span data-stu-id="e3735-124">AKS clusters can scale in one of two ways:</span></span>

- <span data-ttu-id="e3735-125">O [autodimensionador do cluster](https://docs.microsoft.com/azure/aks/cluster-autoscaler) observa os pods que não podem ser agendados em nós devido a restrições de recursos.</span><span class="sxs-lookup"><span data-stu-id="e3735-125">The [cluster autoscaler](https://docs.microsoft.com/azure/aks/cluster-autoscaler) watches for pods that can't be scheduled on nodes because of resource constraints.</span></span> <span data-ttu-id="e3735-126">Ele adiciona nós adicionais conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="e3735-126">It adds additional nodes as required.</span></span>
- <span data-ttu-id="e3735-127">O **pod de dimensionamento horizontal** usa o servidor de métricas em um cluster kubernetes para monitorar as demandas de recursos de pods.</span><span class="sxs-lookup"><span data-stu-id="e3735-127">The **horizontal pod autoscaler** uses the Metrics Server in a Kubernetes cluster to monitor the resource demands of pods.</span></span> <span data-ttu-id="e3735-128">Se um serviço precisar de mais recursos, o dimensionador automática aumentará o número de pods.</span><span class="sxs-lookup"><span data-stu-id="e3735-128">If a service needs more resources, the autoscaler increases the number of pods.</span></span>

<span data-ttu-id="e3735-129">A Figura 3-13 mostra a relação entre esses dois serviços de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="e3735-129">Figure 3-13 shows the relationship between these two scaling services.</span></span>

![Dimensionando um plano do serviço de aplicativo.](./media/aks-cluster-autoscaler.png)

<span data-ttu-id="e3735-131">**Figura 3-13**.</span><span class="sxs-lookup"><span data-stu-id="e3735-131">**Figure 3-13**.</span></span> <span data-ttu-id="e3735-132">Dimensionando um plano do serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e3735-132">Scaling out an App Service plan.</span></span>

<span data-ttu-id="e3735-133">Esses serviços também podem reduzir o número de pods ou nós conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="e3735-133">These services can also reduce the number of pods or nodes as needed.</span></span> <span data-ttu-id="e3735-134">Esses dois serviços podem trabalhar juntos e geralmente são implantados juntos em um cluster.</span><span class="sxs-lookup"><span data-stu-id="e3735-134">These two services can work together and are often deployed together in a cluster.</span></span> <span data-ttu-id="e3735-135">Quando combinado, a escala automática de Pod horizontal concentra-se na execução do número de pods necessário para atender à demanda do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e3735-135">When combined, the horizontal pod autoscaler is focused on running the number of pods required to meet application demand.</span></span> <span data-ttu-id="e3735-136">O dimensionador automática do cluster concentra-se na execução do número de nós necessários para dar suporte ao pods agendado.</span><span class="sxs-lookup"><span data-stu-id="e3735-136">The cluster autoscaler is focused on running the number of nodes required to support the scheduled pods.</span></span>

### <a name="scaling-azure-functions"></a><span data-ttu-id="e3735-137">Dimensionamento Azure Functions</span><span class="sxs-lookup"><span data-stu-id="e3735-137">Scaling Azure Functions</span></span>

<span data-ttu-id="e3735-138">O Azure Functions dá suporte automaticamente ao dimensionamento. O plano de consumo padrão adiciona (e remove) recursos dinamicamente com base no número de eventos de disparo de entrada.</span><span class="sxs-lookup"><span data-stu-id="e3735-138">Azure Functions automatically supports scaling out. The default consumption plan adds (and removes) resources dynamically based on the number of triggering events coming in.</span></span> <span data-ttu-id="e3735-139">Você é cobrado apenas pelos recursos de computação que estão sendo usados quando suas funções estão sendo executadas com base no número de execuções, no tempo de execução e na memória usada.</span><span class="sxs-lookup"><span data-stu-id="e3735-139">You're only charged for compute resources being used when your functions are running based on the number of executions, execution time, and memory used.</span></span> <span data-ttu-id="e3735-140">Usando o plano Premium, você obtém esses mesmos recursos, mas também pode controlar os tamanhos de instância que são usados, ter instâncias já ativadas (para evitar atrasos de inicialização a frio) e configurar VMs dedicadas nas quais executar suas funções.</span><span class="sxs-lookup"><span data-stu-id="e3735-140">Using the premium plan, you get these same features but you can also control the instance sizes that are used, have instances already warmed up (to avoid cold start delays), and configure dedicated VMs on which to run your functions.</span></span> <span data-ttu-id="e3735-141">Embora a configuração padrão deva fornecer uma solução econômica e escalonável para a maioria dos aplicativos, a opção Premium permite aos desenvolvedores flexibilidade para requisitos de Azure Functions personalizados.</span><span class="sxs-lookup"><span data-stu-id="e3735-141">While the default configuration should provide an economical and scalable solution for most apps, the premium option allows developers flexibility for custom Azure Functions requirements.</span></span>

## <a name="references"></a><span data-ttu-id="e3735-142">Referências</span><span class="sxs-lookup"><span data-stu-id="e3735-142">References</span></span>

- [<span data-ttu-id="e3735-143">AKS vários pools de nós</span><span class="sxs-lookup"><span data-stu-id="e3735-143">AKS Multiple Node Pools</span></span>](https://docs.microsoft.com/azure/aks/use-multiple-node-pools)
- [<span data-ttu-id="e3735-144">Autoescalar do cluster AKS</span><span class="sxs-lookup"><span data-stu-id="e3735-144">AKS Cluster Autoscaler</span></span>](https://docs.microsoft.com/azure/aks/cluster-autoscaler)
- [<span data-ttu-id="e3735-145">Tutorial: Dimensionar aplicativos no AKS</span><span class="sxs-lookup"><span data-stu-id="e3735-145">Tutorial: Scale applications in AKS</span></span>](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale)
- [<span data-ttu-id="e3735-146">Escala e Hospedagem de Azure Functions</span><span class="sxs-lookup"><span data-stu-id="e3735-146">Azure Functions scale and hosting</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-scale)

>[!div class="step-by-step"]
><span data-ttu-id="e3735-147">[Anterior](deploy-containers-azure.md)
>[Próximo](other-deployment-options.md)</span><span class="sxs-lookup"><span data-stu-id="e3735-147">[Previous](deploy-containers-azure.md)
[Next](other-deployment-options.md)</span></span>
