---
title: Escala de contêineres e aplicativos sem servidor
description: Dimensionamento de aplicativos nativos de nuvem com o serviço kubernetes do Azure para atender à demanda do usuário.
ms.date: 04/13/2020
ms.openlocfilehash: b4580e6994611ad394bbaa2d5bb07f64c2798569
ms.sourcegitcommit: 5988e9a29cedb8757320817deda3c08c6f44a6aa
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/28/2020
ms.locfileid: "82199918"
---
# <a name="scaling-containers-and-serverless-applications"></a><span data-ttu-id="76c28-103">Escala de contêineres e aplicativos sem servidor</span><span class="sxs-lookup"><span data-stu-id="76c28-103">Scaling containers and serverless applications</span></span>

<span data-ttu-id="76c28-104">Há duas maneiras de dimensionar um aplicativo: para cima ou para fora. O primeiro se refere à adição de capacidade a um único recurso, enquanto o último se refere à adição de mais recursos para aumentar a capacidade.</span><span class="sxs-lookup"><span data-stu-id="76c28-104">There are two ways to scale an application: up or out. The former refers to adding capacity to a single resource, while the latter refers to adding more resources to increase capacity.</span></span>

## <a name="the-simple-solution-scaling-up"></a><span data-ttu-id="76c28-105">A solução simples: escalar verticalmente</span><span class="sxs-lookup"><span data-stu-id="76c28-105">The simple solution: scaling up</span></span>

<span data-ttu-id="76c28-106">A atualização de um servidor de host existente com CPU, memória, velocidade de e/s de disco aumentada e velocidade de e/s de rede é conhecida como *escalar verticalmente*.</span><span class="sxs-lookup"><span data-stu-id="76c28-106">Upgrading an existing host server with increased CPU, memory, disk I/O speed, and network I/O speed is known as *scaling up*.</span></span> <span data-ttu-id="76c28-107">Escalar verticalmente um aplicativo nativo de nuvem envolve a escolha de recursos mais capacitados do fornecedor de nuvem.</span><span class="sxs-lookup"><span data-stu-id="76c28-107">Scaling up a cloud-native application involves choosing more capable resources from the cloud vendor.</span></span> <span data-ttu-id="76c28-108">Por exemplo, você pode um novo pool de nós com VMs maiores em seu cluster kubernetes.</span><span class="sxs-lookup"><span data-stu-id="76c28-108">For example, you can a new node pool with larger VMs in your Kubernetes cluster.</span></span> <span data-ttu-id="76c28-109">Em seguida, migre seus serviços em contêineres para o novo pool.</span><span class="sxs-lookup"><span data-stu-id="76c28-109">Then, migrate your containerized services to the new pool.</span></span>

<span data-ttu-id="76c28-110">Aplicativos sem servidor expandem verticalmente, escolhendo o [plano de funções Premium](https://docs.microsoft.com/azure/azure-functions/functions-scale) ou os tamanhos de instância Premium de um plano do serviço de aplicativo dedicado.</span><span class="sxs-lookup"><span data-stu-id="76c28-110">Serverless apps scale up by choosing the [premium Functions plan](https://docs.microsoft.com/azure/azure-functions/functions-scale) or premium instance sizes from a dedicated app service plan.</span></span>

## <a name="scaling-out-cloud-native-apps"></a><span data-ttu-id="76c28-111">Expandindo aplicativos nativos de nuvem</span><span class="sxs-lookup"><span data-stu-id="76c28-111">Scaling out cloud-native apps</span></span>

<span data-ttu-id="76c28-112">Aplicativos nativos de nuvem geralmente experimentam flutuações grandes na demanda e exigem escala em um momento.</span><span class="sxs-lookup"><span data-stu-id="76c28-112">Cloud-native applications often experience large fluctuations in demand and require scale on a moment's notice.</span></span> <span data-ttu-id="76c28-113">Eles favorecem a expansão. A expansão é feita horizontalmente com a adição de computadores adicionais (chamados nós) ou instâncias de aplicativo a um cluster existente.</span><span class="sxs-lookup"><span data-stu-id="76c28-113">They favor scaling out. Scaling out is done horizontally by adding additional machines (called nodes) or application instances to an existing cluster.</span></span> <span data-ttu-id="76c28-114">No kubernetes, você pode dimensionar manualmente ajustando as definições de configuração para o aplicativo (por exemplo, [dimensionando um pool de nós](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)) ou por meio do dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="76c28-114">In Kubernetes, you can scale manually by adjusting configuration settings for the app (for example, [scaling a node pool](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)), or through autoscaling.</span></span>

<span data-ttu-id="76c28-115">Os clusters AKS podem ser dimensionados automaticamente de uma das duas maneiras:</span><span class="sxs-lookup"><span data-stu-id="76c28-115">AKS clusters can autoscale in one of two ways:</span></span>

<span data-ttu-id="76c28-116">Primeiro, a [escala automática de Pod horizontal](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale#autoscale-pods) monitora a demanda de recursos e dimensiona automaticamente suas réplicas de pod para atendê-las.</span><span class="sxs-lookup"><span data-stu-id="76c28-116">First, the [Horizontal Pod Autoscaler](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale#autoscale-pods) monitors resource demand and automatically scales your POD replicas to meet it.</span></span> <span data-ttu-id="76c28-117">Quando o tráfego aumenta, as réplicas adicionais são provisionadas automaticamente para escalar horizontalmente seus serviços.</span><span class="sxs-lookup"><span data-stu-id="76c28-117">When traffic increases, additional replicas are automatically provisioned to scale out your services.</span></span> <span data-ttu-id="76c28-118">Da mesma forma, quando a demanda diminui, elas são removidas para reduzir seus serviços.</span><span class="sxs-lookup"><span data-stu-id="76c28-118">Likewise, when demand decreases, they're removed to scale-in your services.</span></span> <span data-ttu-id="76c28-119">Você define a métrica na qual dimensionar, por exemplo, o uso da CPU.</span><span class="sxs-lookup"><span data-stu-id="76c28-119">You define the metric on which to scale, for example, CPU usage.</span></span> <span data-ttu-id="76c28-120">Você também pode especificar o número mínimo e máximo de réplicas a serem executadas.</span><span class="sxs-lookup"><span data-stu-id="76c28-120">You can also specify the minimum and maximum number of replicas to run.</span></span> <span data-ttu-id="76c28-121">O AKS monitora essa métrica e dimensiona de acordo.</span><span class="sxs-lookup"><span data-stu-id="76c28-121">AKS monitors that metric and scales accordingly.</span></span>

<span data-ttu-id="76c28-122">Em seguida, o recurso de [dimensionamento automático do cluster AKs](https://docs.microsoft.com/azure/aks/cluster-autoscaler) permite que você dimensione automaticamente os nós de computação em um cluster kubernetes para atender à demanda.</span><span class="sxs-lookup"><span data-stu-id="76c28-122">Next, the [AKS Cluster Autoscaler](https://docs.microsoft.com/azure/aks/cluster-autoscaler) feature enables you to automatically scale compute nodes across a Kubernetes cluster to meet demand.</span></span> <span data-ttu-id="76c28-123">Com ele, você pode adicionar automaticamente novas VMs ao conjunto de dimensionamento de máquinas virtuais do Azure subjacente sempre que mais capacidade de computação do for necessária.</span><span class="sxs-lookup"><span data-stu-id="76c28-123">With it, you can automatically add new VMs to the underlying Azure Virtual Machine Scale Set whenever more compute capacity of is required.</span></span> <span data-ttu-id="76c28-124">Ele também remove nós quando não é mais necessário.</span><span class="sxs-lookup"><span data-stu-id="76c28-124">It also removes nodes when no longer required.</span></span>

<span data-ttu-id="76c28-125">A Figura 3-13 mostra a relação entre esses dois serviços de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="76c28-125">Figure 3-13 shows the relationship between these two scaling services.</span></span>

![Dimensionando um plano do serviço de aplicativo.](./media/aks-cluster-autoscaler.png)

<span data-ttu-id="76c28-127">**Figura 3-13**.</span><span class="sxs-lookup"><span data-stu-id="76c28-127">**Figure 3-13**.</span></span> <span data-ttu-id="76c28-128">Dimensionando um plano do serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="76c28-128">Scaling out an App Service plan.</span></span>

<span data-ttu-id="76c28-129">Trabalhando juntos, ambos garantem um número ideal de instâncias de contêiner e nós de computação para dar suporte à demanda flutuante.</span><span class="sxs-lookup"><span data-stu-id="76c28-129">Working together, both ensure an optimal number of container instances and compute nodes to support fluctuating demand.</span></span> <span data-ttu-id="76c28-130">A escala automática de Pod horizontal otimiza o número de pods necessário.</span><span class="sxs-lookup"><span data-stu-id="76c28-130">The horizontal pod autoscaler optimizes the number of pods required.</span></span> <span data-ttu-id="76c28-131">O dimensionador automática de cluster otimiza o número de nós necessários.</span><span class="sxs-lookup"><span data-stu-id="76c28-131">The cluster autoscaler optimizes the number of nodes required.</span></span>

### <a name="scaling-azure-functions"></a><span data-ttu-id="76c28-132">Dimensionamento do Azure Functions</span><span class="sxs-lookup"><span data-stu-id="76c28-132">Scaling Azure Functions</span></span>

<span data-ttu-id="76c28-133">Azure Functions escalar horizontalmente automaticamente sob demanda.</span><span class="sxs-lookup"><span data-stu-id="76c28-133">Azure Functions automatically scale out upon demand.</span></span> <span data-ttu-id="76c28-134">Os recursos do servidor são alocados e removidos dinamicamente com base no número de eventos disparados.</span><span class="sxs-lookup"><span data-stu-id="76c28-134">Server resources are dynamically allocated and removed based on the number of triggered events.</span></span> <span data-ttu-id="76c28-135">Você é cobrado apenas pelos recursos de computação consumidos quando suas funções são executadas.</span><span class="sxs-lookup"><span data-stu-id="76c28-135">You're only charged for compute resources consumed when your functions run.</span></span> <span data-ttu-id="76c28-136">A cobrança é baseada no número de execuções, no tempo de execução e na memória usada.</span><span class="sxs-lookup"><span data-stu-id="76c28-136">Billing is based upon the number of executions, execution time, and memory used.</span></span>

<span data-ttu-id="76c28-137">Embora o plano de consumo padrão forneça uma solução econômica e escalonável para a maioria dos aplicativos, a opção Premium permite que os desenvolvedores tenham flexibilidade para requisitos de Azure Functions personalizados.</span><span class="sxs-lookup"><span data-stu-id="76c28-137">While the default consumption plan provides an economical and scalable solution for most apps, the premium option allows developers flexibility for custom Azure Functions requirements.</span></span> <span data-ttu-id="76c28-138">A atualização para o plano Premium fornece controle sobre os tamanhos de instância, instâncias pré-configuradas (para evitar atrasos de inicialização a frio) e VMs dedicadas.</span><span class="sxs-lookup"><span data-stu-id="76c28-138">Upgrading to the premium plan provides control over instance sizes, pre-warmed instances (to avoid cold start delays), and dedicated VMs.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="76c28-139">[Anterior](deploy-containers-azure.md)
>[próximo](other-deployment-options.md)</span><span class="sxs-lookup"><span data-stu-id="76c28-139">[Previous](deploy-containers-azure.md)
[Next](other-deployment-options.md)</span></span>
