---
title: Como definir o que é nativo de nuvem
description: Conheça os pilares fundamentais que fornecem a base para sistemas nativos em nuvem
author: robvet
ms.date: 08/20/2019
ms.openlocfilehash: 756a2565bd77fcef19a5f15579987836ff0e75a4
ms.sourcegitcommit: e3cbf26d67f7e9286c7108a2752804050762d02d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/09/2020
ms.locfileid: "80989084"
---
# <a name="defining-cloud-native"></a><span data-ttu-id="a8184-103">Definindo nuvem nativa</span><span class="sxs-lookup"><span data-stu-id="a8184-103">Defining cloud native</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="a8184-104">Pare o que está fazendo e mande sms para dez de seus colegas.</span><span class="sxs-lookup"><span data-stu-id="a8184-104">Stop what you're doing and text ten of your colleagues.</span></span> <span data-ttu-id="a8184-105">Peça-lhes para definir o termo "Cloud Native".</span><span class="sxs-lookup"><span data-stu-id="a8184-105">Ask them to define the term "Cloud Native".</span></span> <span data-ttu-id="a8184-106">Boa chance de você ter oito respostas diferentes.</span><span class="sxs-lookup"><span data-stu-id="a8184-106">Good chance you'll get eight different answers.</span></span>

<span data-ttu-id="a8184-107">Nativo da nuvem é tudo sobre mudar a maneira como pensamos sobre a construção de sistemas de negócios críticos.</span><span class="sxs-lookup"><span data-stu-id="a8184-107">Cloud native is all about changing the way we think about constructing critical business systems.</span></span>

<span data-ttu-id="a8184-108">Os sistemas nativos da nuvem são projetados para abraçar mudanças rápidas, em grande escala e resiliência.</span><span class="sxs-lookup"><span data-stu-id="a8184-108">Cloud-native systems are designed to embrace rapid change, large scale, and resilience.</span></span>

<span data-ttu-id="a8184-109">A Cloud Native Computing Foundation fornece uma [definição oficial:](https://github.com/cncf/foundation/blob/master/charter.md)</span><span class="sxs-lookup"><span data-stu-id="a8184-109">The Cloud Native Computing Foundation provides an [official definition](https://github.com/cncf/foundation/blob/master/charter.md):</span></span>

> <span data-ttu-id="a8184-110">*As tecnologias nativas da nuvem capacitam as organizações a construir e executar aplicativos escaláveis em ambientes modernos e dinâmicos, como nuvens públicas, privadas e híbridas. Contêineres, linhas de serviço, microsserviços, infra-estrutura imutável e APIs declarativas exemplificam essa abordagem.*</span><span class="sxs-lookup"><span data-stu-id="a8184-110">*Cloud-native technologies empower organizations to build and run scalable applications in modern, dynamic environments such as public, private, and hybrid clouds. Containers, service meshes, microservices, immutable infrastructure, and declarative APIs exemplify this approach.*</span></span>

> <span data-ttu-id="a8184-111">*Essas técnicas permitem sistemas acoplados vagamente resistentes, gerenciáveis e observáveis. Combinados com automação robusta, eles permitem que os engenheiros façam mudanças de alto impacto com freqüência e previsíveis com labuta mínima.*</span><span class="sxs-lookup"><span data-stu-id="a8184-111">*These techniques enable loosely coupled systems that are resilient, manageable, and observable. Combined with robust automation, they allow engineers to make high-impact changes frequently and predictably with minimal toil.*</span></span>

<span data-ttu-id="a8184-112">Os aplicativos têm se tornado cada vez mais complexos, com os usuários exigindo cada vez mais.</span><span class="sxs-lookup"><span data-stu-id="a8184-112">Applications have become increasingly complex with users demanding more and more.</span></span> <span data-ttu-id="a8184-113">Os usuários esperam resposta rápida, recursos inovadores e zero tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="a8184-113">Users expect rapid responsiveness, innovative features, and zero downtime.</span></span> <span data-ttu-id="a8184-114">Problemas de desempenho, erros recorrentes e a incapacidade de se mover rapidamente não são mais aceitáveis.</span><span class="sxs-lookup"><span data-stu-id="a8184-114">Performance problems, recurring errors, and the inability to move fast are no longer acceptable.</span></span> <span data-ttu-id="a8184-115">Eles se mudarão facilmente para o seu concorrente.</span><span class="sxs-lookup"><span data-stu-id="a8184-115">They'll easily move to your competitor.</span></span>

<span data-ttu-id="a8184-116">Nativo da nuvem é muito sobre *velocidade* e *agilidade.*</span><span class="sxs-lookup"><span data-stu-id="a8184-116">Cloud native is much about *speed* and *agility*.</span></span> <span data-ttu-id="a8184-117">Os sistemas de negócios estão evoluindo de permitir capacidades de negócios para armas de transformação estratégica, acelerando a velocidade e o crescimento dos negócios.</span><span class="sxs-lookup"><span data-stu-id="a8184-117">Business systems are evolving from enabling business capabilities to weapons of strategic transformation, accelerating business velocity and growth.</span></span> <span data-ttu-id="a8184-118">É imperativo que as ideias se coloquem no mercado imediatamente.</span><span class="sxs-lookup"><span data-stu-id="a8184-118">It's imperative to get ideas to market immediately.</span></span>

<span data-ttu-id="a8184-119">Aqui estão algumas empresas que implementaram essas técnicas.</span><span class="sxs-lookup"><span data-stu-id="a8184-119">Here are some companies who have implemented these techniques.</span></span> <span data-ttu-id="a8184-120">Pense na velocidade, agilidade e escalabilidade que eles alcançaram.</span><span class="sxs-lookup"><span data-stu-id="a8184-120">Think about the speed, agility, and scalability they've achieved.</span></span>

| <span data-ttu-id="a8184-121">Empresa</span><span class="sxs-lookup"><span data-stu-id="a8184-121">Company</span></span> | <span data-ttu-id="a8184-122">Experiência</span><span class="sxs-lookup"><span data-stu-id="a8184-122">Experience</span></span> |
| :-------- | :-------- |
| [<span data-ttu-id="a8184-123">Netflix</span><span class="sxs-lookup"><span data-stu-id="a8184-123">Netflix</span></span>](https://www.infoq.com/news/2013/06/netflix/) | <span data-ttu-id="a8184-124">Possui mais de 600 serviços em produção.</span><span class="sxs-lookup"><span data-stu-id="a8184-124">Has 600+ services in production.</span></span> <span data-ttu-id="a8184-125">Implanta cem vezes por dia.</span><span class="sxs-lookup"><span data-stu-id="a8184-125">Deploys a hundred times per day.</span></span> |
| [<span data-ttu-id="a8184-126">Uber</span><span class="sxs-lookup"><span data-stu-id="a8184-126">Uber</span></span>](https://eng.uber.com/micro-deploy/) | <span data-ttu-id="a8184-127">Tem mais de 1.000 serviços armazenados em produção.</span><span class="sxs-lookup"><span data-stu-id="a8184-127">Has 1,000+ services stored in production.</span></span> <span data-ttu-id="a8184-128">Implanta milhares de construções a cada semana.</span><span class="sxs-lookup"><span data-stu-id="a8184-128">Deploys several thousand builds each week.</span></span> |
| [<span data-ttu-id="a8184-129">WeChat</span><span class="sxs-lookup"><span data-stu-id="a8184-129">WeChat</span></span>](https://www.cs.columbia.edu/~ruigu/papers/socc18-final100.pdf) | <span data-ttu-id="a8184-130">Tem mais de 300 serviços em produção.</span><span class="sxs-lookup"><span data-stu-id="a8184-130">Has 300+ services in production.</span></span> <span data-ttu-id="a8184-131">Faz quase 1.000 mudanças por dia.</span><span class="sxs-lookup"><span data-stu-id="a8184-131">Makes almost 1,000 changes per day.</span></span> |

<span data-ttu-id="a8184-132">Como você pode ver, Netflix, Uber e WeChat expõem sistemas que consistem em centenas de microsserviços independentes.</span><span class="sxs-lookup"><span data-stu-id="a8184-132">As you can see, Netflix, Uber, and WeChat expose systems that consist of hundreds of independent microservices.</span></span> <span data-ttu-id="a8184-133">Esse estilo arquitetônico permite que eles respondam rapidamente às condições do mercado.</span><span class="sxs-lookup"><span data-stu-id="a8184-133">This architectural style enables them to rapidly respond to market conditions.</span></span> <span data-ttu-id="a8184-134">Eles podem atualizar instantaneamente pequenas áreas de uma aplicação ao vivo e complexa e dimensionar individualmente essas áreas conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="a8184-134">They can instantaneously update small areas of a live, complex application, and individually scale those areas as needed.</span></span>

<span data-ttu-id="a8184-135">A velocidade e a agilidade dos nativos da nuvem surgem de uma série de fatores.</span><span class="sxs-lookup"><span data-stu-id="a8184-135">The speed and agility of cloud native come about from a number of factors.</span></span> <span data-ttu-id="a8184-136">O mais importante é a infraestrutura em nuvem.</span><span class="sxs-lookup"><span data-stu-id="a8184-136">Foremost is cloud infrastructure.</span></span> <span data-ttu-id="a8184-137">Cinco pilares fundamentais adicionais mostrados na Figura 1-3 também fornecem a base para sistemas nativos da nuvem.</span><span class="sxs-lookup"><span data-stu-id="a8184-137">Five additional foundational pillars shown in Figure 1-3 also provide the bedrock for cloud-native systems.</span></span>

![Pilares fundamentais nativos da nuvem](./media/cloud-native-foundational-pillars.png)

<span data-ttu-id="a8184-139">**Figura 1-3**.</span><span class="sxs-lookup"><span data-stu-id="a8184-139">**Figure 1-3**.</span></span> <span data-ttu-id="a8184-140">Pilares fundamentais nativos da nuvem</span><span class="sxs-lookup"><span data-stu-id="a8184-140">Cloud-native foundational pillars</span></span>

<span data-ttu-id="a8184-141">Vamos dar um tempo para entender melhor o significado de cada pilar.</span><span class="sxs-lookup"><span data-stu-id="a8184-141">Let's take some time to better understand the significance of each pillar.</span></span>

## <a name="the-cloud"></a><span data-ttu-id="a8184-142">A nuvem...</span><span class="sxs-lookup"><span data-stu-id="a8184-142">The cloud…</span></span>

<span data-ttu-id="a8184-143">Os sistemas nativos em nuvem aproveitam ao máximo o modelo de serviço em nuvem.</span><span class="sxs-lookup"><span data-stu-id="a8184-143">Cloud-native systems take full advantage of the cloud service model.</span></span>

<span data-ttu-id="a8184-144">Projetados para prosperar em um ambiente de nuvem dinâmico e virtualizado, esses sistemas fazem uso extensivo da infra-estrutura de computação [platform as a Service (PaaS)](https://azure.microsoft.com/overview/what-is-paas/) e serviços gerenciados.</span><span class="sxs-lookup"><span data-stu-id="a8184-144">Designed to thrive in a dynamic, virtualized cloud environment, these systems make extensive use of [Platform as a Service (PaaS)](https://azure.microsoft.com/overview/what-is-paas/) compute infrastructure and managed services.</span></span> <span data-ttu-id="a8184-145">Eles tratam a infra-estrutura subjacente como *descartável* - provisionada em minutos e redimensionada, dimensionada, movida ou destruída sob demanda - via automação.</span><span class="sxs-lookup"><span data-stu-id="a8184-145">They treat the underlying infrastructure as *disposable* - provisioned in minutes and resized, scaled, moved, or destroyed on demand – via automation.</span></span>

<span data-ttu-id="a8184-146">Considere o conceito de DevOps amplamente aceito de [Pets vs. Cattle](https://medium.com/@Joachim8675309/devops-concepts-pets-vs-cattle-2380b5aab313).</span><span class="sxs-lookup"><span data-stu-id="a8184-146">Consider the widely accepted DevOps concept of [Pets vs. Cattle](https://medium.com/@Joachim8675309/devops-concepts-pets-vs-cattle-2380b5aab313).</span></span> <span data-ttu-id="a8184-147">Em um data center tradicional, os servidores são tratados como *Pets*: uma máquina física, com um nome significativo e cuidado.</span><span class="sxs-lookup"><span data-stu-id="a8184-147">In a traditional data center, servers are treated as *Pets*: a physical machine, given a meaningful name, and cared for.</span></span> <span data-ttu-id="a8184-148">Você dimensiona adicionando mais recursos à mesma máquina (dimensionamento).</span><span class="sxs-lookup"><span data-stu-id="a8184-148">You scale by adding more resources to the same machine (scaling up).</span></span> <span data-ttu-id="a8184-149">Se o servidor ficar doente, você cuida dele de volta à saúde.</span><span class="sxs-lookup"><span data-stu-id="a8184-149">If the server becomes sick, you nurse it back to health.</span></span> <span data-ttu-id="a8184-150">Caso o servidor fique indisponível, todos nota.</span><span class="sxs-lookup"><span data-stu-id="a8184-150">Should the server become unavailable, everyone notices.</span></span>

<span data-ttu-id="a8184-151">O modelo de serviço *do Gado* é diferente.</span><span class="sxs-lookup"><span data-stu-id="a8184-151">The *Cattle* service model is different.</span></span> <span data-ttu-id="a8184-152">Você provisiona cada instância como uma máquina virtual ou recipiente.</span><span class="sxs-lookup"><span data-stu-id="a8184-152">You provision each instance as a virtual machine or container.</span></span> <span data-ttu-id="a8184-153">Eles são idênticos e atribuíram um identificador de sistema como Serviço-01, Serviço-02, e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="a8184-153">They're identical and assigned a system identifier such as Service-01, Service-02, and so on.</span></span> <span data-ttu-id="a8184-154">Você dimensiona criando mais deles (dimensionamento).</span><span class="sxs-lookup"><span data-stu-id="a8184-154">You scale by creating more of them (scaling out).</span></span> <span data-ttu-id="a8184-155">Quando alguém fica indisponível, ninguém nota.</span><span class="sxs-lookup"><span data-stu-id="a8184-155">When one becomes unavailable, nobody notices.</span></span>

<span data-ttu-id="a8184-156">O modelo de gado abrange *infraestrutura imutável.*</span><span class="sxs-lookup"><span data-stu-id="a8184-156">The cattle model embraces *immutable infrastructure*.</span></span> <span data-ttu-id="a8184-157">Os servidores não são reparados ou modificados.</span><span class="sxs-lookup"><span data-stu-id="a8184-157">Servers aren't repaired or modified.</span></span> <span data-ttu-id="a8184-158">Se alguém falhar ou precisar de atualização, ele é destruído e um novo é provisionado – tudo feito via automação.</span><span class="sxs-lookup"><span data-stu-id="a8184-158">If one fails or requires updating, it's destroyed and a new one is provisioned – all done via automation.</span></span>

<span data-ttu-id="a8184-159">Os sistemas nativos em nuvem adotam o modelo de serviço cattle.</span><span class="sxs-lookup"><span data-stu-id="a8184-159">Cloud-native systems embrace the Cattle service model.</span></span> <span data-ttu-id="a8184-160">Eles continuam a funcionar à medida que a infra-estrutura entra ou sai sem levar em conta as máquinas sobre as quais estão executando.</span><span class="sxs-lookup"><span data-stu-id="a8184-160">They continue to run as the infrastructure scales in or out with no regard to the machines upon which they're running.</span></span>

<span data-ttu-id="a8184-161">A plataforma em nuvem Do Zure suporta esse tipo de infra-estrutura altamente elástica com recursos automáticos de dimensionamento, auto-recuperação e monitoramento.</span><span class="sxs-lookup"><span data-stu-id="a8184-161">The Azure cloud platform supports this type of highly elastic infrastructure with automatic scaling, self-healing, and monitoring capabilities.</span></span>

## <a name="modern-design"></a><span data-ttu-id="a8184-162">Design moderno</span><span class="sxs-lookup"><span data-stu-id="a8184-162">Modern design</span></span>

<span data-ttu-id="a8184-163">Como você projetaria um aplicativo nativo da nuvem?</span><span class="sxs-lookup"><span data-stu-id="a8184-163">How would you design a cloud-native app?</span></span> <span data-ttu-id="a8184-164">Como seria sua arquitetura?</span><span class="sxs-lookup"><span data-stu-id="a8184-164">What would your architecture look like?</span></span> <span data-ttu-id="a8184-165">A quais princípios, padrões e melhores práticas você adere?</span><span class="sxs-lookup"><span data-stu-id="a8184-165">To what principles, patterns, and best practices would you adhere?</span></span> <span data-ttu-id="a8184-166">Que infraestrutura e preocupações operacionais seriam importantes?</span><span class="sxs-lookup"><span data-stu-id="a8184-166">What infrastructure and operational concerns would be important?</span></span>

### <a name="the-twelve-factor-application"></a><span data-ttu-id="a8184-167">A aplicação de doze fatores</span><span class="sxs-lookup"><span data-stu-id="a8184-167">The Twelve-Factor Application</span></span>

<span data-ttu-id="a8184-168">Uma metodologia amplamente aceita para a construção de aplicativos baseados em nuvem é a [Aplicação de Doze Fatores](https://12factor.net/).</span><span class="sxs-lookup"><span data-stu-id="a8184-168">A widely accepted methodology for constructing cloud-based applications is the [Twelve-Factor Application](https://12factor.net/).</span></span> <span data-ttu-id="a8184-169">Descreve um conjunto de princípios e práticas que os desenvolvedores seguem para construir aplicativos otimizados para ambientes modernos em nuvem.</span><span class="sxs-lookup"><span data-stu-id="a8184-169">It describes a set of principles and practices that developers follow to construct applications optimized for modern cloud environments.</span></span> <span data-ttu-id="a8184-170">Atenção especial é dada à portabilidade entre ambientes e automação declarativa.</span><span class="sxs-lookup"><span data-stu-id="a8184-170">Special attention is given to portability across environments and declarative automation.</span></span>

<span data-ttu-id="a8184-171">Embora aplicável a qualquer aplicativo baseado na Web, muitos profissionais o consideram uma base sólida para a construção de aplicativos nativos da nuvem.</span><span class="sxs-lookup"><span data-stu-id="a8184-171">While applicable to any web-based application, many practitioners consider it as a solid foundation for building cloud-native apps.</span></span> <span data-ttu-id="a8184-172">Sistemas construídos sobre esses princípios podem implantar e escalar rapidamente e adicionar recursos para reagir rapidamente às mudanças de mercado.</span><span class="sxs-lookup"><span data-stu-id="a8184-172">Systems built upon these principles can deploy and scale rapidly and add features to react quickly to market changes.</span></span>

<span data-ttu-id="a8184-173">A tabela a seguir destaca a metodologia Doze Fatores:</span><span class="sxs-lookup"><span data-stu-id="a8184-173">The following table highlights the Twelve-Factor methodology:</span></span>

|    |  <span data-ttu-id="a8184-174">Fator</span><span class="sxs-lookup"><span data-stu-id="a8184-174">Factor</span></span> | <span data-ttu-id="a8184-175">Explicação</span><span class="sxs-lookup"><span data-stu-id="a8184-175">Explanation</span></span>  |
| :-------- | :-------- | :-------- |
| <span data-ttu-id="a8184-176">1</span><span class="sxs-lookup"><span data-stu-id="a8184-176">1</span></span> | <span data-ttu-id="a8184-177">Base de Código</span><span class="sxs-lookup"><span data-stu-id="a8184-177">Code Base</span></span> | <span data-ttu-id="a8184-178">Uma única base de código para cada microserviço, armazenada em seu próprio repositório.</span><span class="sxs-lookup"><span data-stu-id="a8184-178">A single code base for each microservice, stored in its own repository.</span></span> <span data-ttu-id="a8184-179">Rastreado com controle de versão, ele pode ser implantado em vários ambientes (QA, Staging, Production).</span><span class="sxs-lookup"><span data-stu-id="a8184-179">Tracked with version control, it can deploy to multiple environments (QA, Staging, Production).</span></span> |
| <span data-ttu-id="a8184-180">2</span><span class="sxs-lookup"><span data-stu-id="a8184-180">2</span></span> | <span data-ttu-id="a8184-181">Dependências</span><span class="sxs-lookup"><span data-stu-id="a8184-181">Dependencies</span></span> | <span data-ttu-id="a8184-182">Cada microserviço isola e embala suas próprias dependências, abraçando mudanças sem impactar todo o sistema.</span><span class="sxs-lookup"><span data-stu-id="a8184-182">Each microservice isolates and packages its own dependencies, embracing changes without impacting the entire system.</span></span> |
| <span data-ttu-id="a8184-183">3</span><span class="sxs-lookup"><span data-stu-id="a8184-183">3</span></span> | <span data-ttu-id="a8184-184">Configurações</span><span class="sxs-lookup"><span data-stu-id="a8184-184">Configurations</span></span>  | <span data-ttu-id="a8184-185">As informações de configuração são movidas para fora do microserviço e externalizadas através de uma ferramenta de gerenciamento de configuração fora do código.</span><span class="sxs-lookup"><span data-stu-id="a8184-185">Configuration information is moved out of the microservice and externalized through a configuration management tool outside of the code.</span></span> <span data-ttu-id="a8184-186">A mesma implantação pode se propagar entre ambientes com a configuração correta aplicada.</span><span class="sxs-lookup"><span data-stu-id="a8184-186">The same deployment can propagate across environments with the correct configuration applied.</span></span>  |
| <span data-ttu-id="a8184-187">4</span><span class="sxs-lookup"><span data-stu-id="a8184-187">4</span></span> | <span data-ttu-id="a8184-188">Serviços de apoio</span><span class="sxs-lookup"><span data-stu-id="a8184-188">Backing Services</span></span> | <span data-ttu-id="a8184-189">Os recursos auxiliares (armazenamentos de dados, caches, corretores de mensagens) devem ser expostos por meio de uma URL endereçada.</span><span class="sxs-lookup"><span data-stu-id="a8184-189">Ancillary resources (data stores, caches, message brokers) should be exposed via an addressable URL.</span></span> <span data-ttu-id="a8184-190">Ao fazer isso, desvincula o recurso do aplicativo, permitindo que ele seja intercambiável.</span><span class="sxs-lookup"><span data-stu-id="a8184-190">Doing so decouples the resource from the application, enabling it to be interchangeable.</span></span>  |
| <span data-ttu-id="a8184-191">5</span><span class="sxs-lookup"><span data-stu-id="a8184-191">5</span></span> | <span data-ttu-id="a8184-192">Construir, liberar, executar</span><span class="sxs-lookup"><span data-stu-id="a8184-192">Build, Release, Run</span></span> | <span data-ttu-id="a8184-193">Cada liberação deve impor uma separação rigorosa em toda a construção, liberação e execução de estágios.</span><span class="sxs-lookup"><span data-stu-id="a8184-193">Each release must enforce a strict separation across the build, release, and run stages.</span></span> <span data-ttu-id="a8184-194">Cada um deve ser marcado com um ID único e suportar a capacidade de reverter.</span><span class="sxs-lookup"><span data-stu-id="a8184-194">Each should be tagged with a unique ID and support the ability to roll back.</span></span> <span data-ttu-id="a8184-195">Os modernos sistemas CI/CD ajudam a cumprir esse princípio.</span><span class="sxs-lookup"><span data-stu-id="a8184-195">Modern CI/CD systems help fulfill this principle.</span></span> |
| <span data-ttu-id="a8184-196">6</span><span class="sxs-lookup"><span data-stu-id="a8184-196">6</span></span> | <span data-ttu-id="a8184-197">Processos</span><span class="sxs-lookup"><span data-stu-id="a8184-197">Processes</span></span> | <span data-ttu-id="a8184-198">Cada microserviço deve ser executado em seu próprio processo, isolado de outros serviços em execução.</span><span class="sxs-lookup"><span data-stu-id="a8184-198">Each microservice should execute in its own process,  isolated from other running services.</span></span> <span data-ttu-id="a8184-199">Externalize o estado necessário para um serviço de backup, como um cache distribuído ou um armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="a8184-199">Externalize required state to a backing service such as a distributed cache or data store.</span></span> |
| <span data-ttu-id="a8184-200">7</span><span class="sxs-lookup"><span data-stu-id="a8184-200">7</span></span> | <span data-ttu-id="a8184-201">Vinculação da porta</span><span class="sxs-lookup"><span data-stu-id="a8184-201">Port Binding</span></span> | <span data-ttu-id="a8184-202">Cada microserviço deve ser autônomo com suas interfaces e funcionalidades expostas em sua própria porta.</span><span class="sxs-lookup"><span data-stu-id="a8184-202">Each microservice should be self-contained with its interfaces and functionality exposed on its own port.</span></span> <span data-ttu-id="a8184-203">Isso proporciona isolamento de outros microserviços.</span><span class="sxs-lookup"><span data-stu-id="a8184-203">Doing so provides isolation from other microservices.</span></span> |
| <span data-ttu-id="a8184-204">8</span><span class="sxs-lookup"><span data-stu-id="a8184-204">8</span></span> | <span data-ttu-id="a8184-205">Simultaneidade</span><span class="sxs-lookup"><span data-stu-id="a8184-205">Concurrency</span></span> | <span data-ttu-id="a8184-206">Os serviços são dimensionados através de um grande número de pequenos processos idênticos (cópias) em vez de dimensionar uma única instância grande na máquina mais poderosa disponível.</span><span class="sxs-lookup"><span data-stu-id="a8184-206">Services scale out across a large number of small identical processes (copies) as opposed to scaling-up a single large instance on the most powerful machine available.</span></span> |
| <span data-ttu-id="a8184-207">9</span><span class="sxs-lookup"><span data-stu-id="a8184-207">9</span></span> | <span data-ttu-id="a8184-208">Descartável</span><span class="sxs-lookup"><span data-stu-id="a8184-208">Disposability</span></span> | <span data-ttu-id="a8184-209">As instâncias de serviço devem ser descartáveis, favorecendo startups rápidas para aumentar as oportunidades de escalabilidade e desligamentos graciosos para deixar o sistema em um estado correto.</span><span class="sxs-lookup"><span data-stu-id="a8184-209">Service instances should be disposable, favoring fast startups to increase scalability opportunities and graceful shutdowns to leave the system in a correct state.</span></span> <span data-ttu-id="a8184-210">Os contêineres Docker, juntamente com um orquestrador, satisfazem inerentemente esse requisito.</span><span class="sxs-lookup"><span data-stu-id="a8184-210">Docker containers along with an orchestrator inherently satisfy this requirement.</span></span> |
| <span data-ttu-id="a8184-211">10</span><span class="sxs-lookup"><span data-stu-id="a8184-211">10</span></span> | <span data-ttu-id="a8184-212">Paridade de dev/Prod</span><span class="sxs-lookup"><span data-stu-id="a8184-212">Dev/Prod Parity</span></span> | <span data-ttu-id="a8184-213">Mantenha os ambientes em todo o ciclo de vida do aplicativo o mais semelhantepossível, evitando atalhos caros.</span><span class="sxs-lookup"><span data-stu-id="a8184-213">Keep environments across the application lifecycle as similar as possible, avoiding costly shortcuts.</span></span> <span data-ttu-id="a8184-214">Aqui, a adoção de contêineres pode contribuir muito promovendo o mesmo ambiente de execução.</span><span class="sxs-lookup"><span data-stu-id="a8184-214">Here, the adoption of containers can greatly contribute by promoting the same execution environment.</span></span> |
| <span data-ttu-id="a8184-215">11</span><span class="sxs-lookup"><span data-stu-id="a8184-215">11</span></span> | <span data-ttu-id="a8184-216">Registro em log</span><span class="sxs-lookup"><span data-stu-id="a8184-216">Logging</span></span> | <span data-ttu-id="a8184-217">Trate os registros gerados por microsserviços como fluxos de eventos.</span><span class="sxs-lookup"><span data-stu-id="a8184-217">Treat logs generated by microservices as event streams.</span></span> <span data-ttu-id="a8184-218">Processe-os com um agregador de eventos e propague os dados para ferramentas de gerenciamento de mineração/log de dados, como o Azure Monitor ou o Splunk e, eventualmente, arquivamento de longo prazo.</span><span class="sxs-lookup"><span data-stu-id="a8184-218">Process them with an event aggregator and propagate the data to data-mining/log management tools like Azure Monitor or Splunk and eventually long-term archival.</span></span> |
| <span data-ttu-id="a8184-219">12</span><span class="sxs-lookup"><span data-stu-id="a8184-219">12</span></span> | <span data-ttu-id="a8184-220">Processos de admin</span><span class="sxs-lookup"><span data-stu-id="a8184-220">Admin Processes</span></span> | <span data-ttu-id="a8184-221">Execute tarefas administrativas/gerenciais como processos pontuais.</span><span class="sxs-lookup"><span data-stu-id="a8184-221">Run administrative/management tasks as one-off processes.</span></span> <span data-ttu-id="a8184-222">As tarefas podem incluir limpeza de dados e análises de puxar para um relatório.</span><span class="sxs-lookup"><span data-stu-id="a8184-222">Tasks can include data cleanup and pulling analytics for a report.</span></span> <span data-ttu-id="a8184-223">As ferramentas que executam essas tarefas devem ser invocadas do ambiente de produção, mas separadamente do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a8184-223">Tools executing these tasks should be  invoked from the production environment, but separately from the application.</span></span> |

<span data-ttu-id="a8184-224">No livro, [Beyond the Twelve-Factor App](https://content.pivotal.io/blog/beyond-the-twelve-factor-app), o autor Kevin Hoffman detalha cada um dos 12 fatores originais (escrito em 2011).</span><span class="sxs-lookup"><span data-stu-id="a8184-224">In the book, [Beyond the Twelve-Factor App](https://content.pivotal.io/blog/beyond-the-twelve-factor-app), author Kevin Hoffman details each of the original 12 factors (written in 2011).</span></span> <span data-ttu-id="a8184-225">Além disso, o livro fornece três fatores adicionais que refletem o design moderno de aplicativos em nuvem.</span><span class="sxs-lookup"><span data-stu-id="a8184-225">Additionally, the book provides three additional factors that reflect today's modern cloud application design.</span></span>

|    |  <span data-ttu-id="a8184-226">Novo Fator</span><span class="sxs-lookup"><span data-stu-id="a8184-226">New Factor</span></span> | <span data-ttu-id="a8184-227">Explicação</span><span class="sxs-lookup"><span data-stu-id="a8184-227">Explanation</span></span>  |
| :-------- | :-------- | :-------- |
| <span data-ttu-id="a8184-228">13</span><span class="sxs-lookup"><span data-stu-id="a8184-228">13</span></span> | <span data-ttu-id="a8184-229">API First</span><span class="sxs-lookup"><span data-stu-id="a8184-229">API First</span></span> | <span data-ttu-id="a8184-230">Faça de tudo um serviço.</span><span class="sxs-lookup"><span data-stu-id="a8184-230">Make everything a service.</span></span> <span data-ttu-id="a8184-231">Presuma que seu código será consumido por um cliente front-end, gateway ou outro serviço.</span><span class="sxs-lookup"><span data-stu-id="a8184-231">Assume your code will be consumed by a front-end client, gateway, or another service.</span></span> |
| <span data-ttu-id="a8184-232">14</span><span class="sxs-lookup"><span data-stu-id="a8184-232">14</span></span> | <span data-ttu-id="a8184-233">Telemetria</span><span class="sxs-lookup"><span data-stu-id="a8184-233">Telemetry</span></span> | <span data-ttu-id="a8184-234">Em uma estação de trabalho, você tem uma visibilidade profunda em sua aplicação e seu comportamento.</span><span class="sxs-lookup"><span data-stu-id="a8184-234">On a workstation, you have deep visibility into your application and its behavior.</span></span> <span data-ttu-id="a8184-235">Na nuvem, você não.</span><span class="sxs-lookup"><span data-stu-id="a8184-235">In the cloud, you don't.</span></span> <span data-ttu-id="a8184-236">Certifique-se de que seu projeto inclua a coleta de dados de monitoramento, específicos de domínio e saúde/sistema.</span><span class="sxs-lookup"><span data-stu-id="a8184-236">Make sure your design includes the collection of monitoring, domain-specific, and health/system data.</span></span> |
| <span data-ttu-id="a8184-237">15</span><span class="sxs-lookup"><span data-stu-id="a8184-237">15</span></span> | <span data-ttu-id="a8184-238">Autenticação/Autorização</span><span class="sxs-lookup"><span data-stu-id="a8184-238">Authentication/ Authorization</span></span>  | <span data-ttu-id="a8184-239">Implementar identidade desde o início.</span><span class="sxs-lookup"><span data-stu-id="a8184-239">Implement identity from the start.</span></span> <span data-ttu-id="a8184-240">Considere os recursos [RBAC (controle de acesso baseado em função)](https://docs.microsoft.com/azure/role-based-access-control/overview) disponíveis em nuvens públicas.</span><span class="sxs-lookup"><span data-stu-id="a8184-240">Consider [RBAC (role-based access control)](https://docs.microsoft.com/azure/role-based-access-control/overview) features available in public clouds.</span></span>  |

<span data-ttu-id="a8184-241">Vamos nos referir a muitos dos mais de 12 fatores neste capítulo e ao longo do livro.</span><span class="sxs-lookup"><span data-stu-id="a8184-241">We'll refer to many of the 12+ factors in this chapter and throughout the book.</span></span>

### <a name="critical-design-considerations"></a><span data-ttu-id="a8184-242">Considerações críticas sobre design</span><span class="sxs-lookup"><span data-stu-id="a8184-242">Critical Design Considerations</span></span>

<span data-ttu-id="a8184-243">Além da orientação fornecida a partir da metodologia de doze fatores, existem várias decisões críticas de design que você deve tomar ao construir sistemas distribuídos.</span><span class="sxs-lookup"><span data-stu-id="a8184-243">Beyond the guidance provided from the twelve-factor methodology, there are several critical design decisions you must make when constructing distributed systems.</span></span>

<span data-ttu-id="a8184-244">*Comunicação*</span><span class="sxs-lookup"><span data-stu-id="a8184-244">*Communication*</span></span>

<span data-ttu-id="a8184-245">Como os aplicativos front-end do cliente se comunicarão com serviços de núcleo de backup?</span><span class="sxs-lookup"><span data-stu-id="a8184-245">How will front-end client applications communicate with backed-end core services?</span></span> <span data-ttu-id="a8184-246">Você permitirá comunicação direta?</span><span class="sxs-lookup"><span data-stu-id="a8184-246">Will you allow direct communication?</span></span> <span data-ttu-id="a8184-247">Ou, você pode abstrair os serviços back-end com uma fachada de gateway que fornece flexibilidade, controle e segurança?</span><span class="sxs-lookup"><span data-stu-id="a8184-247">Or, might you abstract the back-end services with a gateway façade that provides  flexibility, control, and security?</span></span>

<span data-ttu-id="a8184-248">Como os serviços de núcleo back-end se comunicarão entre si?</span><span class="sxs-lookup"><span data-stu-id="a8184-248">How will back-end core services communicate with each other?</span></span> <span data-ttu-id="a8184-249">Você permitirá chamadas HTTP diretas que levam ao acoplamento e impacto no desempenho e agilidade?</span><span class="sxs-lookup"><span data-stu-id="a8184-249">Will you allow direct HTTP calls that lead to coupling and impact performance and agility?</span></span> <span data-ttu-id="a8184-250">Ou você pode considerar mensagens dissociadas com tecnologias de fila e tópicos?</span><span class="sxs-lookup"><span data-stu-id="a8184-250">Or might you consider decoupled messaging with queue and topic technologies?</span></span>

<span data-ttu-id="a8184-251">A comunicação é coberta em detalhes Capítulo 4, *Padrões de comunicação nativos da nuvem*.</span><span class="sxs-lookup"><span data-stu-id="a8184-251">Communication is covered in detail Chapter 4, *Cloud-Native Communication Patterns*.</span></span>

<span data-ttu-id="a8184-252">*Resiliência*</span><span class="sxs-lookup"><span data-stu-id="a8184-252">*Resiliency*</span></span>

<span data-ttu-id="a8184-253">Uma arquitetura de microsserviços move seu sistema de comunicação em processo para comunicação de rede.</span><span class="sxs-lookup"><span data-stu-id="a8184-253">A microservices architecture moves your system from in-process to network communication.</span></span> <span data-ttu-id="a8184-254">Em um ambiente distribuído, o que você fará quando o Serviço B não estiver respondendo a uma chamada do Serviço A?</span><span class="sxs-lookup"><span data-stu-id="a8184-254">In a distributed environment, what will you do when Service B isn't responding to a call from Service A?</span></span> <span data-ttu-id="a8184-255">O que acontece quando o Serviço C se torna temporariamente indisponível e outros serviços chamando-o de pilha e degradando o desempenho do sistema?</span><span class="sxs-lookup"><span data-stu-id="a8184-255">What happens when Service C becomes up temporarily unavailable and other services calling it stack and degrade system performance?</span></span>

<span data-ttu-id="a8184-256">A resiliência é abordada em detalhes Capítulo 6, *Resiliência Nativa da Nuvem*.</span><span class="sxs-lookup"><span data-stu-id="a8184-256">Resiliency is covered in detail Chapter 6, *Cloud-Native Resiliency*.</span></span>

<span data-ttu-id="a8184-257">*Dados distribuídos*</span><span class="sxs-lookup"><span data-stu-id="a8184-257">*Distributed Data*</span></span>

<span data-ttu-id="a8184-258">Por design, cada microserviço encapsula seus próprios dados, expondo as operações através de sua interface pública.</span><span class="sxs-lookup"><span data-stu-id="a8184-258">By design, each microservice encapsulates its own data, exposing operations via its public interface.</span></span> <span data-ttu-id="a8184-259">Se assim for, como você consulta dados ou implementa uma transação em vários serviços?</span><span class="sxs-lookup"><span data-stu-id="a8184-259">If so, how do you query data or implement a transaction across multiple services?</span></span>

<span data-ttu-id="a8184-260">Os dados distribuídos são cobertos em detalhes Capítulo 5, *Padrões de dados nativos da nuvem*.</span><span class="sxs-lookup"><span data-stu-id="a8184-260">Distributed data is covered in detail Chapter 5, *Cloud-Native Data Patterns*.</span></span>

<span data-ttu-id="a8184-261">*Identidade*</span><span class="sxs-lookup"><span data-stu-id="a8184-261">*Identity*</span></span>

<span data-ttu-id="a8184-262">Como seu serviço identificará quem está acessando e quais permissões eles têm?</span><span class="sxs-lookup"><span data-stu-id="a8184-262">How will your service identify who is accessing it and what permissions they have?</span></span>

<span data-ttu-id="a8184-263">A identidade é coberta em detalhes Capítulo 8, *Identidade*.</span><span class="sxs-lookup"><span data-stu-id="a8184-263">Identity is covered in detail Chapter 8, *Identity*.</span></span>

## <a name="microservices"></a><span data-ttu-id="a8184-264">Microsserviços</span><span class="sxs-lookup"><span data-stu-id="a8184-264">Microservices</span></span>

<span data-ttu-id="a8184-265">Sistemas nativos em nuvem adotam microsserviços, um estilo arquitetônico popular para a construção de aplicações modernas.</span><span class="sxs-lookup"><span data-stu-id="a8184-265">Cloud-native systems embrace microservices, a popular architectural style for constructing modern applications.</span></span>

<span data-ttu-id="a8184-266">Construídos como um conjunto distribuído de pequenos serviços independentes que interagem através de um tecido compartilhado, os microserviços compartilham as seguintes características:</span><span class="sxs-lookup"><span data-stu-id="a8184-266">Built as a distributed set of small, independent services that interact through a shared fabric, microservices share the following characteristics:</span></span>

- <span data-ttu-id="a8184-267">Cada um implementa uma capacidade de negócios específica dentro de um contexto de domínio maior.</span><span class="sxs-lookup"><span data-stu-id="a8184-267">Each implements a specific business capability within a larger domain context.</span></span>

- <span data-ttu-id="a8184-268">Cada um é desenvolvido de forma autônoma e pode ser implantado de forma independente.</span><span class="sxs-lookup"><span data-stu-id="a8184-268">Each is developed autonomously and can be deployed independently.</span></span>

- <span data-ttu-id="a8184-269">Cada um é auto-contido encapsulando sua própria tecnologia de armazenamento de dados (SQL, NoSQL) e plataforma de programação.</span><span class="sxs-lookup"><span data-stu-id="a8184-269">Each is self-contained encapsulating its own data storage technology (SQL, NoSQL) and programming platform.</span></span>

- <span data-ttu-id="a8184-270">Cada um é executado em seu próprio processo e se comunica com outros usando protocolos de comunicação padrão como HTTP/HTTPS, WebSockets ou [AMQP](https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol).</span><span class="sxs-lookup"><span data-stu-id="a8184-270">Each runs in its own process and communicates with others using standard communication protocols such as HTTP/HTTPS, WebSockets, or [AMQP](https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol).</span></span>

- <span data-ttu-id="a8184-271">Eles compõem juntos para formar uma candidatura.</span><span class="sxs-lookup"><span data-stu-id="a8184-271">They compose together to form an application.</span></span>

<span data-ttu-id="a8184-272">A Figura 1-4 contrasta uma abordagem de aplicação monolítica com uma abordagem de microsserviços.</span><span class="sxs-lookup"><span data-stu-id="a8184-272">Figure 1-4 contrasts a monolithic application approach with a microservices approach.</span></span> <span data-ttu-id="a8184-273">Observe como o monólito é composto de uma arquitetura em camadas, que é executada em um único processo.</span><span class="sxs-lookup"><span data-stu-id="a8184-273">Note how the monolith is composed of a layered architecture, which executes in a single process.</span></span> <span data-ttu-id="a8184-274">Normalmente consome um banco de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="a8184-274">It typically consumes a relational database.</span></span> <span data-ttu-id="a8184-275">A abordagem do microserviço, no entanto, segrega a funcionalidade em serviços independentes que incluem lógica e dados.</span><span class="sxs-lookup"><span data-stu-id="a8184-275">The microservice approach, however, segregates functionality into independent services that include logic and data.</span></span> <span data-ttu-id="a8184-276">Cada microserviço hospeda seu próprio datastore.</span><span class="sxs-lookup"><span data-stu-id="a8184-276">Each microservice hosts its own datastore.</span></span>

![Implantação monolítica versus microsserviços](./media/monolithic-vs-microservices.png)

<span data-ttu-id="a8184-278">**Figura 1-4.**</span><span class="sxs-lookup"><span data-stu-id="a8184-278">**Figure 1-4.**</span></span> <span data-ttu-id="a8184-279">Implantação monolítica versus microsserviços</span><span class="sxs-lookup"><span data-stu-id="a8184-279">Monolithic deployment versus microservices</span></span>

<span data-ttu-id="a8184-280">Observe como os microserviços promovem o princípio "One Codebase, One Application" da [Aplicação de Doze Fatores,](https://12factor.net/)discutido anteriormente no capítulo.</span><span class="sxs-lookup"><span data-stu-id="a8184-280">Note how microservices promote the "One Codebase, One Application" principle from the [Twelve-Factor Application](https://12factor.net/), discussed earlier in the chapter.</span></span>

> <span data-ttu-id="a8184-281">*O \#fator 1 especifica "Uma base de código única para cada microserviço, armazenada em seu próprio repositório. Rastreado com controle de versão, ele pode ser implantado em vários ambientes."*</span><span class="sxs-lookup"><span data-stu-id="a8184-281">*Factor \#1  specifies "A single codebase for each microservice, stored in its own repository. Tracked with version control, it can deploy to multiple environments."*</span></span>

### <a name="why-microservices"></a><span data-ttu-id="a8184-282">Por que os microsserviços?</span><span class="sxs-lookup"><span data-stu-id="a8184-282">Why microservices?</span></span>

<span data-ttu-id="a8184-283">Os microserviços proporcionam agilidade.</span><span class="sxs-lookup"><span data-stu-id="a8184-283">Microservices provide agility.</span></span>

<span data-ttu-id="a8184-284">No início do capítulo, comparamos um aplicativo de comércio eletrônico construído como um monólito com o de microsserviços.</span><span class="sxs-lookup"><span data-stu-id="a8184-284">Earlier in the chapter, we compared an eCommerce application built as a monolith to that with microservices.</span></span> <span data-ttu-id="a8184-285">No exemplo, vimos alguns benefícios claros:</span><span class="sxs-lookup"><span data-stu-id="a8184-285">In the example, we saw some clear benefits:</span></span>

- <span data-ttu-id="a8184-286">Cada microserviço tem um ciclo de vida autônomo e pode evoluir independentemente e implantar com freqüência.</span><span class="sxs-lookup"><span data-stu-id="a8184-286">Each microservice has an autonomous lifecycle and can evolve independently and deploy frequently.</span></span> <span data-ttu-id="a8184-287">Você não precisa esperar por uma versão trimestral para implantar um novo recursos ou atualização.</span><span class="sxs-lookup"><span data-stu-id="a8184-287">You don't have to wait for a quarterly release to deploy a new features or update.</span></span> <span data-ttu-id="a8184-288">Você pode atualizar uma pequena área de um aplicativo complexo com menos risco de interromper todo o sistema.</span><span class="sxs-lookup"><span data-stu-id="a8184-288">You can update a small area of a complex application with less risk of disrupting the entire system.</span></span>

- <span data-ttu-id="a8184-289">Cada microserviço pode ser dimensionado de forma independente.</span><span class="sxs-lookup"><span data-stu-id="a8184-289">Each microservice can scale independently.</span></span> <span data-ttu-id="a8184-290">Em vez de dimensionar todo o aplicativo como uma única unidade, você dimensiona apenas os serviços que requerem mais poder de processamento ou largura de banda de rede.</span><span class="sxs-lookup"><span data-stu-id="a8184-290">Instead of scaling the entire application as a single unit, you scale out only those services that require more processing power or network bandwidth.</span></span> <span data-ttu-id="a8184-291">Esta abordagem fina para o dimensionamento proporciona um maior controle do seu sistema e ajuda a reduzir os custos globais à medida que você escala partes do seu sistema, não tudo.</span><span class="sxs-lookup"><span data-stu-id="a8184-291">This  fine-grained approach to scaling provides for greater control of your system and helps to reduce overall costs as you scale portions of your system, not everything.</span></span>

<span data-ttu-id="a8184-292">Um excelente guia de referência para a compreensão de microserviços é [o .NET Microservices: Architecture for Containerized .NET Applications](https://docs.microsoft.com/dotnet/standard/microservices-architecture/).</span><span class="sxs-lookup"><span data-stu-id="a8184-292">An excellent reference guide for understanding microservices is [.NET Microservices: Architecture for Containerized .NET Applications](https://docs.microsoft.com/dotnet/standard/microservices-architecture/).</span></span> <span data-ttu-id="a8184-293">O livro mergulha profundamente no design e arquitetura de microserviços.</span><span class="sxs-lookup"><span data-stu-id="a8184-293">The book deep dives into microservices design and architecture.</span></span> <span data-ttu-id="a8184-294">É um companheiro para uma [arquitetura de referência de microserviço full-stack](https://github.com/dotnet-architecture/eShopOnContainers) disponível como download gratuito da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a8184-294">It's a companion for a [full-stack microservice reference architecture](https://github.com/dotnet-architecture/eShopOnContainers) available as a free download from Microsoft.</span></span>

### <a name="developing-microservices"></a><span data-ttu-id="a8184-295">Desenvolvimento de microsserviços</span><span class="sxs-lookup"><span data-stu-id="a8184-295">Developing microservices</span></span>

<span data-ttu-id="a8184-296">Microserviços podem ser criados com qualquer plataforma de desenvolvimento moderna.</span><span class="sxs-lookup"><span data-stu-id="a8184-296">Microservices can be created with any modern development platform.</span></span>

<span data-ttu-id="a8184-297">A plataforma Microsoft .NET Core é uma excelente escolha.</span><span class="sxs-lookup"><span data-stu-id="a8184-297">The Microsoft .NET Core platform is an excellent choice.</span></span> <span data-ttu-id="a8184-298">Gratuito e de código aberto, possui muitos recursos incorporados para simplificar o desenvolvimento de microserviços.</span><span class="sxs-lookup"><span data-stu-id="a8184-298">Free and open source, it has many built-in features to simplify microservice development.</span></span> <span data-ttu-id="a8184-299">.NET Core é multiplataforma.</span><span class="sxs-lookup"><span data-stu-id="a8184-299">.NET Core is cross-platform.</span></span> <span data-ttu-id="a8184-300">Os aplicativos podem ser construídos e executados no Windows, macOS e na maioria dos sabores do Linux.</span><span class="sxs-lookup"><span data-stu-id="a8184-300">Applications can be built and run on Windows, macOS, and most flavors of Linux.</span></span>

<span data-ttu-id="a8184-301">.NET Core tem um alto desempenho e tem pontuado bem em comparação com node.js e outras plataformas concorrentes.</span><span class="sxs-lookup"><span data-stu-id="a8184-301">.NET Core is highly performant and has scored well in comparison to Node.js and other competing platforms.</span></span> <span data-ttu-id="a8184-302">Curiosamente, [o TechEmpower](https://www.techempower.com/) conduziu um extenso conjunto de [benchmarks](https://www.techempower.com/benchmarks/#section=data-r17&hw=ph&test=plaintext) de desempenho em muitas plataformas e frameworks de aplicativos web.</span><span class="sxs-lookup"><span data-stu-id="a8184-302">Interestingly, [TechEmpower](https://www.techempower.com/) conducted an extensive set of [performance benchmarks](https://www.techempower.com/benchmarks/#section=data-r17&hw=ph&test=plaintext) across many web application platforms and frameworks.</span></span> <span data-ttu-id="a8184-303">.NET Core marcou no top 10 - bem acima do Node.js e outras plataformas concorrentes.</span><span class="sxs-lookup"><span data-stu-id="a8184-303">.NET Core scored in the top 10 - well above Node.js and other competing platforms.</span></span>

<span data-ttu-id="a8184-304">.NET Core é mantido pela Microsoft e pela comunidade .NET no GitHub.</span><span class="sxs-lookup"><span data-stu-id="a8184-304">.NET Core is maintained by Microsoft and the .NET community on GitHub.</span></span>

## <a name="containers"></a><span data-ttu-id="a8184-305">Contêineres</span><span class="sxs-lookup"><span data-stu-id="a8184-305">Containers</span></span>

<span data-ttu-id="a8184-306">Hoje em dia, é natural ouvir o termo *container* mencionado em qualquer conversa sobre *nuvem nativa.*</span><span class="sxs-lookup"><span data-stu-id="a8184-306">Nowadays, it's natural to hear the term *container* mentioned in any conversation concerning *cloud native*.</span></span> <span data-ttu-id="a8184-307">No livro, [Cloud Native Patterns](https://www.manning.com/books/cloud-native-patterns), a autora Cornelia Davis observa que: "Os contêineres são um grande facilitador de software nativo na nuvem".</span><span class="sxs-lookup"><span data-stu-id="a8184-307">In the book, [Cloud Native Patterns](https://www.manning.com/books/cloud-native-patterns), author Cornelia Davis observes that, "Containers are a great enabler of cloud-native software."</span></span> <span data-ttu-id="a8184-308">A Cloud Native Computing Foundation coloca a contêinerização de microserviços como o primeiro passo em seu [Mapa de Trilha Nativo da Nuvem](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) - orientação para empresas que iniciam sua jornada nativa na nuvem.</span><span class="sxs-lookup"><span data-stu-id="a8184-308">The Cloud Native Computing Foundation places microservice containerization as the first step in their [Cloud-Native Trail Map](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) - guidance for enterprises beginning their cloud-native journey.</span></span>

<span data-ttu-id="a8184-309">Contêiner um microserviço é simples e simples.</span><span class="sxs-lookup"><span data-stu-id="a8184-309">Containerizing a microservice is simple and straightforward.</span></span> <span data-ttu-id="a8184-310">O código, suas dependências e tempo de execução são embalados em um binário chamado [imagem de contêiner](https://docs.docker.com/glossary/?term=image).</span><span class="sxs-lookup"><span data-stu-id="a8184-310">The code, its dependencies, and runtime are packaged into a binary called a [container image](https://docs.docker.com/glossary/?term=image).</span></span> <span data-ttu-id="a8184-311">As imagens são armazenadas em um [registro de contêiner,](https://caylent.com/container-registries/)que funciona como um repositório ou biblioteca para imagens.</span><span class="sxs-lookup"><span data-stu-id="a8184-311">Images are stored in a [container registry](https://caylent.com/container-registries/), which acts as a repository or library for images.</span></span> <span data-ttu-id="a8184-312">Um registro pode ser localizado em seu computador de desenvolvimento, em seu data center ou em uma nuvem pública.</span><span class="sxs-lookup"><span data-stu-id="a8184-312">A registry can be located on your development computer, in your data center, or in a public cloud.</span></span> <span data-ttu-id="a8184-313">O próprio Docker mantém um registro público via [Docker Hub](https://hub.docker.com/).</span><span class="sxs-lookup"><span data-stu-id="a8184-313">Docker itself maintains a public registry via [Docker Hub](https://hub.docker.com/).</span></span> <span data-ttu-id="a8184-314">A nuvem do Azure possui um [registro de contêiner](https://azure.microsoft.com/services/container-registry/) para armazenar imagens de contêineres perto das aplicações em nuvem que as executarão.</span><span class="sxs-lookup"><span data-stu-id="a8184-314">The Azure cloud features a [container registry](https://azure.microsoft.com/services/container-registry/) to store container images close to the cloud applications that will run them.</span></span>

<span data-ttu-id="a8184-315">Quando necessário, você transforma a imagem em uma instância de contêiner em execução.</span><span class="sxs-lookup"><span data-stu-id="a8184-315">When needed, you transform the image into a running container instance.</span></span> <span data-ttu-id="a8184-316">A instância é executada em qualquer computador que tenha um mecanismo [de tempo de execução](https://kubernetes.io/docs/setup/production-environment/container-runtimes/) de contêiner instalado.</span><span class="sxs-lookup"><span data-stu-id="a8184-316">The instance runs on any computer that has a [container runtime](https://kubernetes.io/docs/setup/production-environment/container-runtimes/) engine installed.</span></span> <span data-ttu-id="a8184-317">Você pode ter quantas instâncias do serviço contêiner necessário.</span><span class="sxs-lookup"><span data-stu-id="a8184-317">You can have as many instances of the containerized service as needed.</span></span>

<span data-ttu-id="a8184-318">A Figura 1-5 mostra três microsserviços diferentes, cada um em seu próprio contêiner, rodando em um único host.</span><span class="sxs-lookup"><span data-stu-id="a8184-318">Figure 1-5 shows three different microservices, each in its own container, running on a single host.</span></span>

![Vários contêineres em execução em um host de contêiner](./media/hosting-mulitple-containers.png)

<span data-ttu-id="a8184-320">**Figura 1-5**.</span><span class="sxs-lookup"><span data-stu-id="a8184-320">**Figure 1-5**.</span></span> <span data-ttu-id="a8184-321">Vários contêineres em execução em um host de contêiner</span><span class="sxs-lookup"><span data-stu-id="a8184-321">Multiple containers running on a container host</span></span>

<span data-ttu-id="a8184-322">Observe como cada contêiner mantém seu próprio conjunto de dependências e tempo de execução, que podem ser diferentes.</span><span class="sxs-lookup"><span data-stu-id="a8184-322">Note how each container maintains its own set of dependencies and runtime, which can be different.</span></span> <span data-ttu-id="a8184-323">Aqui, vemos diferentes versões do microserviço Product sendo executados no mesmo host.</span><span class="sxs-lookup"><span data-stu-id="a8184-323">Here, we see different versions of the Product microservice running on the same host.</span></span> <span data-ttu-id="a8184-324">Cada contêiner compartilha uma fatia do sistema operacional, memória e processador do host subjacente, mas é isolado um do outro.</span><span class="sxs-lookup"><span data-stu-id="a8184-324">Each container shares a slice of the underlying host operating system, memory, and processor, but is isolated from one another.</span></span>

<span data-ttu-id="a8184-325">Observe o quão bem o modelo de contêiner adota o princípio "Dependências" da [Aplicação de Doze Fatores](https://12factor.net/).</span><span class="sxs-lookup"><span data-stu-id="a8184-325">Note how well the container model embraces the "Dependencies" principle from the [Twelve-Factor Application](https://12factor.net/).</span></span>

> <span data-ttu-id="a8184-326">*O \#fator 2 especifica que "Cada microserviço isola e embala suas próprias dependências, abraçando mudanças sem impactar todo o sistema".*</span><span class="sxs-lookup"><span data-stu-id="a8184-326">*Factor \#2  specifies that "Each microservice isolates and packages its own dependencies, embracing changes without impacting the entire system."*</span></span>

<span data-ttu-id="a8184-327">Os contêineres suportam cargas de trabalho do Linux e do Windows.</span><span class="sxs-lookup"><span data-stu-id="a8184-327">Containers support both Linux and Windows workloads.</span></span> <span data-ttu-id="a8184-328">A nuvem Azure abraça abertamente ambos.</span><span class="sxs-lookup"><span data-stu-id="a8184-328">The Azure cloud openly embraces both.</span></span> <span data-ttu-id="a8184-329">Curiosamente, é o Linux, não o Windows Server, que se tornou o sistema operacional mais popular no Azure.</span><span class="sxs-lookup"><span data-stu-id="a8184-329">Interestingly, it's Linux, not Windows Server, that has become the most popular operating system in Azure.</span></span>

<span data-ttu-id="a8184-330">Enquanto vários fornecedores de contêineres existem, Docker capturou a maior parte do mercado.</span><span class="sxs-lookup"><span data-stu-id="a8184-330">While several container vendors exist, Docker has captured the lion's share of the market.</span></span> <span data-ttu-id="a8184-331">A empresa tem dirigido o movimento de contêineres de software.</span><span class="sxs-lookup"><span data-stu-id="a8184-331">The company has been driving the software container movement.</span></span> <span data-ttu-id="a8184-332">Tornou-se o padrão de fato para embalagem, implantação e execução de aplicativos nativos da nuvem.</span><span class="sxs-lookup"><span data-stu-id="a8184-332">It has become the de facto standard for packaging, deploying, and running cloud-native applications.</span></span>

### <a name="why-containers"></a><span data-ttu-id="a8184-333">Por que contêineres?</span><span class="sxs-lookup"><span data-stu-id="a8184-333">Why containers?</span></span>

<span data-ttu-id="a8184-334">Os contêineres fornecem portabilidade e garantem consistência entre os ambientes.</span><span class="sxs-lookup"><span data-stu-id="a8184-334">Containers provide portability and guarantee consistency across environments.</span></span> <span data-ttu-id="a8184-335">Ao encapsular tudo em um único pacote, você *isola* o microserviço e suas dependências da infra-estrutura subjacente.</span><span class="sxs-lookup"><span data-stu-id="a8184-335">By encapsulating everything into a single package, you *isolate* the microservice and its dependencies from the underlying infrastructure.</span></span>

<span data-ttu-id="a8184-336">Você pode implantar esse mesmo recipiente em qualquer ambiente que tenha o motor de tempo de execução do Docker.</span><span class="sxs-lookup"><span data-stu-id="a8184-336">You can deploy that same container in any environment that has the Docker runtime engine.</span></span> <span data-ttu-id="a8184-337">As cargas de trabalho em contêiner também eliminam as despesas de pré-configuração de cada ambiente com frameworks, bibliotecas de software e mecanismos de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="a8184-337">Containerized workloads also eliminate the expense of pre-configuring each environment with frameworks, software libraries, and runtime engines.</span></span>

<span data-ttu-id="a8184-338">Ao compartilhar o sistema operacional subjacente e os recursos do host, os contêineres têm uma pegada muito menor do que uma máquina virtual completa.</span><span class="sxs-lookup"><span data-stu-id="a8184-338">By sharing the underlying operating system and host resources, containers have a much smaller footprint than a full virtual machine.</span></span> <span data-ttu-id="a8184-339">O tamanho menor aumenta a *densidade*, ou número de microserviços, que um determinado host pode executar de uma só vez.</span><span class="sxs-lookup"><span data-stu-id="a8184-339">The smaller size increases the *density*, or number of microservices, that a given host can run at one time.</span></span>

### <a name="container-orchestration"></a><span data-ttu-id="a8184-340">Orquestração de contêineres</span><span class="sxs-lookup"><span data-stu-id="a8184-340">Container orchestration</span></span>

<span data-ttu-id="a8184-341">Enquanto ferramentas como o Docker criam imagens e executam contêineres, você também precisa de ferramentas para gerenciá-las.</span><span class="sxs-lookup"><span data-stu-id="a8184-341">While tools such as Docker create images and run containers, you also need tools to manage them.</span></span> <span data-ttu-id="a8184-342">O gerenciamento de contêineres é feito com um programa especial chamado orquestrador de contêineres.</span><span class="sxs-lookup"><span data-stu-id="a8184-342">Container management is done with a special software program called a container orchestrator.</span></span> <span data-ttu-id="a8184-343">Ao operar em escala, a orquestração de contêineres é essencial.</span><span class="sxs-lookup"><span data-stu-id="a8184-343">When operating at scale, container orchestration is essential.</span></span>

<span data-ttu-id="a8184-344">A Figura 1-6 mostra tarefas de gerenciamento que os orquestradores de contêineres fornecem.</span><span class="sxs-lookup"><span data-stu-id="a8184-344">Figure 1-6 shows management tasks that container orchestrators provide.</span></span>

![O que os orquestradores de contêineres fazem](./media/what-container-orchestrators-do.png)

<span data-ttu-id="a8184-346">**Figura 1-6**.</span><span class="sxs-lookup"><span data-stu-id="a8184-346">**Figure 1-6**.</span></span> <span data-ttu-id="a8184-347">O que os orquestradores de contêineres fazem</span><span class="sxs-lookup"><span data-stu-id="a8184-347">What container orchestrators do</span></span>

<span data-ttu-id="a8184-348">A tabela a seguir descreve tarefas comuns de orquestração.</span><span class="sxs-lookup"><span data-stu-id="a8184-348">The following table describes common orchestration tasks.</span></span>

|  <span data-ttu-id="a8184-349">Tarefas</span><span class="sxs-lookup"><span data-stu-id="a8184-349">Tasks</span></span> | <span data-ttu-id="a8184-350">Explicação</span><span class="sxs-lookup"><span data-stu-id="a8184-350">Explanation</span></span>  |
| :-------- | :-------- |
| <span data-ttu-id="a8184-351">Agendamento</span><span class="sxs-lookup"><span data-stu-id="a8184-351">Scheduling</span></span> | <span data-ttu-id="a8184-352">Provisão automaticamente as instâncias do contêiner.</span><span class="sxs-lookup"><span data-stu-id="a8184-352">Automatically provision container instances.</span></span>|
| <span data-ttu-id="a8184-353">Afinidade/antiafinidade</span><span class="sxs-lookup"><span data-stu-id="a8184-353">Affinity/anti-affinity</span></span> | <span data-ttu-id="a8184-354">Provisão de contêineres próximos ou distantes um do outro, ajudando na disponibilidade e no desempenho.</span><span class="sxs-lookup"><span data-stu-id="a8184-354">Provision containers nearby or far apart from each other, helping  availability and performance.</span></span> |
| <span data-ttu-id="a8184-355">Monitoramento da integridade</span><span class="sxs-lookup"><span data-stu-id="a8184-355">Health monitoring</span></span> | <span data-ttu-id="a8184-356">Detectar e corrigir automaticamente falhas.</span><span class="sxs-lookup"><span data-stu-id="a8184-356">Automatically detect and correct failures.</span></span>|
| <span data-ttu-id="a8184-357">Failover</span><span class="sxs-lookup"><span data-stu-id="a8184-357">Failover</span></span> | <span data-ttu-id="a8184-358">Reprovisionamento automático de instância sem falha em máquinas saudáveis.</span><span class="sxs-lookup"><span data-stu-id="a8184-358">Automatically reprovision failed instance to healthy machines.</span></span>|
| <span data-ttu-id="a8184-359">Scaling</span><span class="sxs-lookup"><span data-stu-id="a8184-359">Scaling</span></span> | <span data-ttu-id="a8184-360">Adicione ou remova automaticamente a instância do contêiner para atender à demanda.</span><span class="sxs-lookup"><span data-stu-id="a8184-360">Automatically add or remove container instance to meet demand.</span></span>|
| <span data-ttu-id="a8184-361">Rede</span><span class="sxs-lookup"><span data-stu-id="a8184-361">Networking</span></span> | <span data-ttu-id="a8184-362">Gerencie uma sobreposição de rede para comunicação de contêineres.</span><span class="sxs-lookup"><span data-stu-id="a8184-362">Manage a networking overlay for container communication.</span></span>|
| <span data-ttu-id="a8184-363">Descoberta de Serviços</span><span class="sxs-lookup"><span data-stu-id="a8184-363">Service Discovery</span></span> | <span data-ttu-id="a8184-364">Habilite que os contêineres se localizem entre si.</span><span class="sxs-lookup"><span data-stu-id="a8184-364">Enable containers to locate each other.</span></span>|
| <span data-ttu-id="a8184-365">Atualizações sem interrupção</span><span class="sxs-lookup"><span data-stu-id="a8184-365">Rolling Upgrades</span></span> | <span data-ttu-id="a8184-366">Coordenar upgrades incrementais com implantação de tempo de inatividade zero.</span><span class="sxs-lookup"><span data-stu-id="a8184-366">Coordinate incremental upgrades with zero downtime deployment.</span></span> <span data-ttu-id="a8184-367">Reverter automaticamente mudanças problemáticas.</span><span class="sxs-lookup"><span data-stu-id="a8184-367">Automatically roll back problematic changes.</span></span>|

<span data-ttu-id="a8184-368">Observe como os orquestradores abraçam os princípios de dissídio e simultâneos da [Aplicação de Doze Fatores,](https://12factor.net/)discutidas anteriormente no capítulo.</span><span class="sxs-lookup"><span data-stu-id="a8184-368">Note how orchestrators embrace the disposability and concurrency principles from the [Twelve-Factor Application](https://12factor.net/), discussed earlier in the chapter.</span></span>

> <span data-ttu-id="a8184-369">*O \#fator 9 especifica que "As instâncias de serviço devem ser descartáveis, favorecendo startups rápidas para aumentar as oportunidades de escalabilidade e desligamentos graciosos para deixar o sistema em um estado correto. Os contêineres Docker, juntamente com um orquestrador, satisfazem inerentemente essa exigência."*</span><span class="sxs-lookup"><span data-stu-id="a8184-369">*Factor \#9  specifies that "Service instances should be disposable, favoring fast startups to increase scalability opportunities and graceful shutdowns to leave the system in a correct state. Docker containers along with an orchestrator inherently satisfy this requirement."*</span></span>

> <span data-ttu-id="a8184-370">*O \#fator 8 especifica que "os serviços são dimensionados em um grande número de pequenos processos idênticos (cópias) em vez de dimensionar uma única instância grande na máquina mais poderosa disponível."*</span><span class="sxs-lookup"><span data-stu-id="a8184-370">*Factor \#8  specifies that "Services scale out across a large number of small identical processes (copies) as opposed to scaling-up a single large instance on the most powerful machine available."*</span></span>

<span data-ttu-id="a8184-371">Embora existam vários orquestradores de contêineres, [kubernetes](https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/) tornou-se o padrão de fato para o mundo nativo das nuvens.</span><span class="sxs-lookup"><span data-stu-id="a8184-371">While several container orchestrators exist, [Kubernetes](https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/) has become the de facto standard for the cloud-native world.</span></span> <span data-ttu-id="a8184-372">É uma plataforma portátil, extensível e de código aberto para gerenciar cargas de trabalho em contêineres.</span><span class="sxs-lookup"><span data-stu-id="a8184-372">It's a portable, extensible, open-source platform for managing containerized workloads.</span></span>

<span data-ttu-id="a8184-373">Você poderia hospedar sua própria instância de Kubernetes, mas então você seria responsável pelo provisionamento e gerenciamento de seus recursos - o que pode ser complexo.</span><span class="sxs-lookup"><span data-stu-id="a8184-373">You could host your own instance of Kubernetes, but then you'd be responsible for provisioning and managing its resources - which can be complex.</span></span> <span data-ttu-id="a8184-374">A nuvem do Azure apresenta o Kubernetes como um serviço gerenciado, [o Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span><span class="sxs-lookup"><span data-stu-id="a8184-374">The Azure cloud features Kubernetes as a managed service, [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span></span> <span data-ttu-id="a8184-375">Um serviço gerenciado permite que você aproveite totalmente seus recursos, sem ter que instalá-lo e mantê-lo.</span><span class="sxs-lookup"><span data-stu-id="a8184-375">A managed service allows you to fully leverage its features, without having to install and maintain it.</span></span>

<span data-ttu-id="a8184-376">O Azure Kubernetes Services é coberto em detalhes Capítulo 2, *Dimensionando aplicativos nativos da nuvem*.</span><span class="sxs-lookup"><span data-stu-id="a8184-376">Azure Kubernetes Services is covered in detail Chapter 2, *Scaling Cloud-Native Applications*.</span></span>

## <a name="backing-services"></a><span data-ttu-id="a8184-377">Serviços de apoio</span><span class="sxs-lookup"><span data-stu-id="a8184-377">Backing services</span></span>

<span data-ttu-id="a8184-378">Os sistemas nativos da nuvem dependem de muitos recursos auxiliares diferentes, como armazenamento de dados, corretores de mensagens, monitoramento e serviços de identidade.</span><span class="sxs-lookup"><span data-stu-id="a8184-378">Cloud-native systems depend upon many different ancillary resources, such as data stores, message brokers, monitoring, and identity services.</span></span> <span data-ttu-id="a8184-379">Esses serviços são conhecidos como [serviços de apoio.](https://12factor.net/backing-services)</span><span class="sxs-lookup"><span data-stu-id="a8184-379">These services are known as [backing services](https://12factor.net/backing-services).</span></span>

 <span data-ttu-id="a8184-380">A Figura 1-7 mostra muitos serviços de apoio comuns que os sistemas nativos da nuvem consomem.</span><span class="sxs-lookup"><span data-stu-id="a8184-380">Figure 1-7 shows many common backing services that cloud-native systems consume.</span></span>

![Serviços comuns de apoio](./media/common-backing-services.png)

<span data-ttu-id="a8184-382">**Figura 1-7**.</span><span class="sxs-lookup"><span data-stu-id="a8184-382">**Figure 1-7**.</span></span> <span data-ttu-id="a8184-383">Serviços comuns de apoio</span><span class="sxs-lookup"><span data-stu-id="a8184-383">Common backing services</span></span>

<span data-ttu-id="a8184-384">Os serviços de apoio promovem o princípio "Apátrida" da [Aplicação de Doze Fatores,](https://12factor.net/)discutida no início do capítulo.</span><span class="sxs-lookup"><span data-stu-id="a8184-384">Backing services promote the "Statelessness" principle from the [Twelve-Factor Application](https://12factor.net/), discussed earlier in the chapter.</span></span>

><span data-ttu-id="a8184-385">*O \#fator 6* especifica que: "Cada microserviço deve ser executado em seu próprio processo, isolado de outros serviços em execução.</span><span class="sxs-lookup"><span data-stu-id="a8184-385">*Factor \#6* specifies that, "Each microservice should execute in its own process, isolated from other running services.</span></span> <span data-ttu-id="a8184-386">Externalize o estado necessário para um serviço de backup, como um cache distribuído ou um armazenamento de dados."</span><span class="sxs-lookup"><span data-stu-id="a8184-386">Externalize required state to a backing service such as a distributed cache or data store."</span></span>

<span data-ttu-id="a8184-387">Você poderia hospedar seus próprios serviços de apoio, mas então você seria responsável pelo licenciamento, provisionamento e gerenciamento desses recursos.</span><span class="sxs-lookup"><span data-stu-id="a8184-387">You could host your own backing services, but then you'd be responsible for licensing, provisioning, and managing those resources.</span></span>

<span data-ttu-id="a8184-388">Os provedores de nuvem oferecem uma rica variedade de serviços de *apoio gerenciados.*</span><span class="sxs-lookup"><span data-stu-id="a8184-388">Cloud providers offer a rich assortment of *managed backing services.*</span></span> <span data-ttu-id="a8184-389">Em vez de possuir o serviço, você simplesmente o consome.</span><span class="sxs-lookup"><span data-stu-id="a8184-389">Instead of owning the service, you simply consume it.</span></span> <span data-ttu-id="a8184-390">O provedor opera o recurso em escala e assume a responsabilidade pelo desempenho, segurança e manutenção.</span><span class="sxs-lookup"><span data-stu-id="a8184-390">The provider operates the resource at scale and bears the responsibility for performance, security, and maintenance.</span></span> <span data-ttu-id="a8184-391">Monitoramento, redundância e disponibilidade são incorporados ao serviço.</span><span class="sxs-lookup"><span data-stu-id="a8184-391">Monitoring, redundancy, and availability are built into the service.</span></span> <span data-ttu-id="a8184-392">Os provedores suportam totalmente seus serviços gerenciados - abra um ticket e eles corritem seu problema.</span><span class="sxs-lookup"><span data-stu-id="a8184-392">Providers fully support their managed services - open a ticket and they fix your issue.</span></span>

<span data-ttu-id="a8184-393">Os sistemas nativos em nuvem favorecem serviços de backup gerenciados de fornecedores de nuvem.</span><span class="sxs-lookup"><span data-stu-id="a8184-393">Cloud-native systems favor managed backing services from cloud vendors.</span></span> <span data-ttu-id="a8184-394">A economia de tempo e trabalho são ótimas.</span><span class="sxs-lookup"><span data-stu-id="a8184-394">The savings in time and labor are great.</span></span> <span data-ttu-id="a8184-395">O risco operacional de hospedar o seu próprio e experimentar problemas pode ficar caro rapidamente.</span><span class="sxs-lookup"><span data-stu-id="a8184-395">The operational risk of hosting your own and experiencing trouble can get expensive fast.</span></span>

<span data-ttu-id="a8184-396">Uma prática recomendada é tratar um serviço de backup como um *recurso conectado,* dinamicamente vinculado a um microserviço com informações (uma URL e credenciais) armazenadas em uma configuração externa.</span><span class="sxs-lookup"><span data-stu-id="a8184-396">A best practice is to treat a backing service as an *attached resource*, dynamically bound to a microservice with information (a URL and credentials) stored in an external configuration.</span></span> <span data-ttu-id="a8184-397">Essa orientação está explicitada no [Aplicativo de Doze Fatores,](https://12factor.net/)discutido no início do capítulo.</span><span class="sxs-lookup"><span data-stu-id="a8184-397">This guidance is spelled out in the [Twelve-Factor Application](https://12factor.net/), discussed earlier in the chapter.</span></span>

><span data-ttu-id="a8184-398">*O \#fator 4* especifica que os serviços de backup "devem ser expostos através de uma URL endereçada.</span><span class="sxs-lookup"><span data-stu-id="a8184-398">*Factor \#4* specifies that backing services "should be exposed via an addressable URL.</span></span> <span data-ttu-id="a8184-399">Ao fazer isso, desvincula o recurso do aplicativo, permitindo que ele seja intercambiável."</span><span class="sxs-lookup"><span data-stu-id="a8184-399">Doing so decouples the resource from the application, enabling it to be interchangeable."</span></span>

><span data-ttu-id="a8184-400">*O \#fator 3* especifica que "As informações de configuração são movidas para fora do microserviço e externalizadas através de uma ferramenta de gerenciamento de configuração fora do código."</span><span class="sxs-lookup"><span data-stu-id="a8184-400">*Factor \#3* specifies that "Configuration information is moved out of the microservice and externalized through a configuration management tool outside of the code."</span></span>

<span data-ttu-id="a8184-401">Com esse padrão, um serviço de backup pode ser anexado e desconectado sem alterações de código.</span><span class="sxs-lookup"><span data-stu-id="a8184-401">With this pattern, a backing service can be attached and detached without code changes.</span></span> <span data-ttu-id="a8184-402">Você pode promover um microserviço de QA para um ambiente de encenação.</span><span class="sxs-lookup"><span data-stu-id="a8184-402">You might promote a microservice from QA to a staging environment.</span></span> <span data-ttu-id="a8184-403">Você atualiza a configuração de microserviço para apontar os serviços de backup no estágio e injetar as configurações em seu contêiner através de uma variável de ambiente.</span><span class="sxs-lookup"><span data-stu-id="a8184-403">You update the microservice configuration to point to the backing services in staging and inject the settings into your container through an environment variable.</span></span>

<span data-ttu-id="a8184-404">Os fornecedores de nuvem fornecem APIs para que você se comunique com seus serviços de apoio proprietários.</span><span class="sxs-lookup"><span data-stu-id="a8184-404">Cloud vendors provide APIs for you to communicate with their proprietary backing services.</span></span> <span data-ttu-id="a8184-405">Essas bibliotecas encapsulam o encanamento e a complexidade.</span><span class="sxs-lookup"><span data-stu-id="a8184-405">These libraries encapsulate the plumbing and complexity.</span></span> <span data-ttu-id="a8184-406">Comunicar-se diretamente com essas APIs acoplará firmemente seu código ao serviço de backup.</span><span class="sxs-lookup"><span data-stu-id="a8184-406">Communicating directly with these APIs will tightly couple your code to the backing service.</span></span> <span data-ttu-id="a8184-407">É uma prática melhor para isolar os detalhes de implementação da API do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="a8184-407">It's a better practice to insulate the implementation details of the vendor API.</span></span> <span data-ttu-id="a8184-408">Introduza uma camada de intermediação ou API intermediária, expondo operações genéricas ao seu código de serviço.</span><span class="sxs-lookup"><span data-stu-id="a8184-408">Introduce an intermediation layer, or intermediate API, exposing generic operations to your service code.</span></span> <span data-ttu-id="a8184-409">Este acoplamento solto permite que você troque um serviço de backup por outro ou mova seu código para uma nuvem pública diferente sem ter que fazer alterações no código de serviço principal.</span><span class="sxs-lookup"><span data-stu-id="a8184-409">This loose coupling enables you to swap out one backing service for another or move your code to a different public cloud without having to make changes to the mainline service code.</span></span>

<span data-ttu-id="a8184-410">Os serviços de apoio são discutidos em detalhes Capítulo 5, *Padrões de dados nativos da nuvem*e Capítulo 4, *Padrões de comunicação nativos da nuvem*.</span><span class="sxs-lookup"><span data-stu-id="a8184-410">Backing services are discussed in detail Chapter 5, *Cloud-Native Data Patterns*, and Chapter 4, *Cloud-Native Communication Patterns*.</span></span>

## <a name="automation"></a><span data-ttu-id="a8184-411">Automação</span><span class="sxs-lookup"><span data-stu-id="a8184-411">Automation</span></span>

<span data-ttu-id="a8184-412">Como você viu, sistemas nativos em nuvem adotam microsserviços, contêineres e design moderno de sistemas para alcançar velocidade e agilidade.</span><span class="sxs-lookup"><span data-stu-id="a8184-412">As you've seen, cloud-native systems embrace microservices, containers, and modern system design to achieve speed and agility.</span></span> <span data-ttu-id="a8184-413">Mas isso é só parte da história.</span><span class="sxs-lookup"><span data-stu-id="a8184-413">But, that's only part of the story.</span></span> <span data-ttu-id="a8184-414">Como você provisão os ambientes em nuvem sobre os quais esses sistemas são executados?</span><span class="sxs-lookup"><span data-stu-id="a8184-414">How do you provision the cloud environments upon which these systems run?</span></span> <span data-ttu-id="a8184-415">Como você implanta rapidamente recursos e atualizações de aplicativos?</span><span class="sxs-lookup"><span data-stu-id="a8184-415">How do you rapidly deploy app features and updates?</span></span> <span data-ttu-id="a8184-416">Como você completa o quadro completo?</span><span class="sxs-lookup"><span data-stu-id="a8184-416">How do you round out the full picture?</span></span>

<span data-ttu-id="a8184-417">Insira a prática amplamente aceita de [Infra-estrutura como Código](https://docs.microsoft.com/azure/devops/learn/what-is-infrastructure-as-code), ou IaC.</span><span class="sxs-lookup"><span data-stu-id="a8184-417">Enter the widely accepted practice of [Infrastructure as Code](https://docs.microsoft.com/azure/devops/learn/what-is-infrastructure-as-code), or IaC.</span></span>

<span data-ttu-id="a8184-418">Com o IaC, você automatiza o provisionamento de plataformas e a implantação de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="a8184-418">With IaC, you automate platform provisioning and application deployment.</span></span> <span data-ttu-id="a8184-419">Você essencialmente aplica práticas de engenharia de software, como testes e versionamentos às suas práticas de DevOps.</span><span class="sxs-lookup"><span data-stu-id="a8184-419">You essentially apply software engineering practices such as testing and versioning to your DevOps practices.</span></span> <span data-ttu-id="a8184-420">Sua infra-estrutura e implantações são automatizadas, consistentes e repetíveis.</span><span class="sxs-lookup"><span data-stu-id="a8184-420">Your infrastructure and deployments are automated, consistent, and repeatable.</span></span>

### <a name="automating-infrastructure"></a><span data-ttu-id="a8184-421">Automatizando infra-estrutura</span><span class="sxs-lookup"><span data-stu-id="a8184-421">Automating infrastructure</span></span>

<span data-ttu-id="a8184-422">Ferramentas como [o Azure Resource Manager,](https://azure.microsoft.com/documentation/articles/resource-group-overview/)Terraform e a CLI do [Azure](https://docs.microsoft.com/cli/azure/)permitem que você script a infra-estrutura de nuvem que você precisa.</span><span class="sxs-lookup"><span data-stu-id="a8184-422">Tools like [Azure Resource Manager](https://azure.microsoft.com/documentation/articles/resource-group-overview/), Terraform, and the [Azure CLI](https://docs.microsoft.com/cli/azure/), enable you to declaratively script the cloud infrastructure you require.</span></span> <span data-ttu-id="a8184-423">Nomes de recursos, locais, capacidades e segredos são parametrizados e dinâmicos.</span><span class="sxs-lookup"><span data-stu-id="a8184-423">Resource names, locations, capacities, and secrets are parameterized and dynamic.</span></span> <span data-ttu-id="a8184-424">O script é versão e verificado no controle de origem como um artefato do seu projeto.</span><span class="sxs-lookup"><span data-stu-id="a8184-424">The script is versioned and checked into source control as an artifact of your project.</span></span> <span data-ttu-id="a8184-425">Você invoca o script para prover uma infra-estrutura consistente e repetitiva em ambientes do sistema, como QA, encenação e produção.</span><span class="sxs-lookup"><span data-stu-id="a8184-425">You invoke the script to provision a consistent and repeatable infrastructure across system environments, such as QA, staging, and production.</span></span>

<span data-ttu-id="a8184-426">Sob o capô, IaC é idempotente, o que significa que você pode executar o mesmo script uma e outra vez sem efeitos colaterais.</span><span class="sxs-lookup"><span data-stu-id="a8184-426">Under the hood, IaC is idempotent, meaning that you can run the same script over and over without side effects.</span></span> <span data-ttu-id="a8184-427">Se a equipe precisa fazer uma mudança, eles editam e reexecutam o script.</span><span class="sxs-lookup"><span data-stu-id="a8184-427">If the team needs to make a change, they edit and rerun the script.</span></span> <span data-ttu-id="a8184-428">Apenas os recursos atualizados são afetados.</span><span class="sxs-lookup"><span data-stu-id="a8184-428">Only the updated resources are affected.</span></span>

<span data-ttu-id="a8184-429">No artigo, [What is Infrastructure as Code](https://docs.microsoft.com/azure/devops/learn/what-is-infrastructure-as-code), autor Sam Guckenheimer descreve como: "As equipes que implementam AC podem fornecer ambientes estáveis rapidamente e em escala.</span><span class="sxs-lookup"><span data-stu-id="a8184-429">In the article, [What is Infrastructure as Code](https://docs.microsoft.com/azure/devops/learn/what-is-infrastructure-as-code), Author Sam Guckenheimer describes how, "Teams who implement IaC can deliver stable environments rapidly and at scale.</span></span> <span data-ttu-id="a8184-430">As equipes evitam a configuração manual dos ambientes e impõem consistência representando o estado desejado de seus ambientes via código.</span><span class="sxs-lookup"><span data-stu-id="a8184-430">Teams avoid manual configuration of environments and enforce consistency by representing the desired state of their environments via code.</span></span> <span data-ttu-id="a8184-431">As implantações de infra-estrutura com IaC são repetíveis e evitam problemas de tempo de execução causados por deriva de configuração ou dependências ausentes.</span><span class="sxs-lookup"><span data-stu-id="a8184-431">Infrastructure deployments with IaC are repeatable and prevent runtime issues caused by configuration drift or missing dependencies.</span></span> <span data-ttu-id="a8184-432">As equipes de DevOps podem trabalhar em conjunto com um conjunto unificado de práticas e ferramentas para fornecer aplicativos e sua infra-estrutura de suporte de forma rápida, confiável e em escala."</span><span class="sxs-lookup"><span data-stu-id="a8184-432">DevOps teams can work together with a unified set of practices and tools to deliver applications and their supporting infrastructure rapidly, reliably, and at scale."</span></span>

### <a name="automating-deployments"></a><span data-ttu-id="a8184-433">Automatizando implantações</span><span class="sxs-lookup"><span data-stu-id="a8184-433">Automating deployments</span></span>

<span data-ttu-id="a8184-434">O [Aplicativo de Doze Fatores](https://12factor.net/), discutido anteriormente, exige etapas separadas ao transformar o código concluído em um aplicativo em execução.</span><span class="sxs-lookup"><span data-stu-id="a8184-434">The [Twelve-Factor Application](https://12factor.net/), discussed earlier, calls for separate steps when transforming completed code into a running application.</span></span>

> <span data-ttu-id="a8184-435">*O \#fator 5* especifica que "Cada versão deve impor uma separação rigorosa em toda a construção, liberação e execução de estágios.</span><span class="sxs-lookup"><span data-stu-id="a8184-435">*Factor \#5* specifies that "Each release must enforce a strict separation across the build, release and run stages.</span></span> <span data-ttu-id="a8184-436">Cada um deve ser marcado com um ID único e apoiar a capacidade de reverter."</span><span class="sxs-lookup"><span data-stu-id="a8184-436">Each should be tagged with a unique ID and support the ability to roll back."</span></span>

<span data-ttu-id="a8184-437">Os modernos sistemas CI/CD ajudam a cumprir esse princípio.</span><span class="sxs-lookup"><span data-stu-id="a8184-437">Modern CI/CD systems help fulfill this principle.</span></span> <span data-ttu-id="a8184-438">Eles fornecem etapas de implantação separadas e ajudam a garantir um código consistente e de qualidade que esteja prontamente disponível para os usuários.</span><span class="sxs-lookup"><span data-stu-id="a8184-438">They provide separate deployment steps and help ensure consistent and quality code that's readily available to users.</span></span>

<span data-ttu-id="a8184-439">A Figura 1-8 mostra a separação através do processo de implantação.</span><span class="sxs-lookup"><span data-stu-id="a8184-439">Figure 1-8 shows the separation across the deployment process.</span></span>

![Implanta etapas no pipeline CI/CD](./media/build-release-run-pipeline.png)

<span data-ttu-id="a8184-441">**Figura 1-8**.</span><span class="sxs-lookup"><span data-stu-id="a8184-441">**Figure 1-8**.</span></span> <span data-ttu-id="a8184-442">Etapas de implantação em um pipeline CI/CD</span><span class="sxs-lookup"><span data-stu-id="a8184-442">Deployment steps in a CI/CD Pipeline</span></span>

<span data-ttu-id="a8184-443">Na figura anterior, preste especial atenção à separação das tarefas.</span><span class="sxs-lookup"><span data-stu-id="a8184-443">In the previous figure, pay special attention to separation of tasks.</span></span>

<span data-ttu-id="a8184-444">O desenvolvedor constrói um recurso em seu ambiente de desenvolvimento, iterando através do que é chamado de "loop interno" de código, execução e depuração.</span><span class="sxs-lookup"><span data-stu-id="a8184-444">The developer constructs a feature in their development environment, iterating through what is called the "inner loop" of code, run, and debug.</span></span> <span data-ttu-id="a8184-445">Quando concluído, esse código é *empurrado* para um repositório de código, como GitHub, Azure DevOps ou BitBucket.</span><span class="sxs-lookup"><span data-stu-id="a8184-445">When complete, that code is *pushed* into a code repository, such as GitHub, Azure DevOps, or BitBucket.</span></span>

<span data-ttu-id="a8184-446">O empurrão desencadeia um estágio de construção que transforma o código em um artefato binário.</span><span class="sxs-lookup"><span data-stu-id="a8184-446">The push triggers a build stage that transforms the code into a binary artifact.</span></span> <span data-ttu-id="a8184-447">O trabalho é implementado com um gasoduto [de Integração Contínua (CI).](https://martinfowler.com/articles/continuousIntegration.html)</span><span class="sxs-lookup"><span data-stu-id="a8184-447">The work is implemented with a [Continuous Integration (CI)](https://martinfowler.com/articles/continuousIntegration.html) pipeline.</span></span> <span data-ttu-id="a8184-448">Ele constrói, testa e embala automaticamente o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a8184-448">It automatically builds, tests, and packages the application.</span></span>

<span data-ttu-id="a8184-449">A fase de liberação pega o artefato binário, aplica informações externas de configuração de aplicativos e ambientes e produz uma versão imutável.</span><span class="sxs-lookup"><span data-stu-id="a8184-449">The release stage picks up the binary artifact, applies external application and environment configuration information, and produces an immutable release.</span></span> <span data-ttu-id="a8184-450">A liberação é implantada em um ambiente especificado.</span><span class="sxs-lookup"><span data-stu-id="a8184-450">The release is deployed to a specified environment.</span></span> <span data-ttu-id="a8184-451">O trabalho é implementado com um pipeline [de Entrega Contínua (CD).](https://martinfowler.com/bliki/ContinuousDelivery.html)</span><span class="sxs-lookup"><span data-stu-id="a8184-451">The work is implemented with a [Continuous Delivery(CD)](https://martinfowler.com/bliki/ContinuousDelivery.html) pipeline.</span></span> <span data-ttu-id="a8184-452">Cada liberação deve ser identificável.</span><span class="sxs-lookup"><span data-stu-id="a8184-452">Each release should be identifiable.</span></span> <span data-ttu-id="a8184-453">Você pode dizer: "Esta implantação está executando a versão 2.1.1 do aplicativo."</span><span class="sxs-lookup"><span data-stu-id="a8184-453">You can say, "This deployment is running Release 2.1.1 of the application."</span></span>

<span data-ttu-id="a8184-454">Finalmente, o recurso lançado é executado no ambiente de execução de destino.</span><span class="sxs-lookup"><span data-stu-id="a8184-454">Finally, the released feature is run in the target execution environment.</span></span> <span data-ttu-id="a8184-455">Os lançamentos são imutáveis, o que significa que qualquer alteração deve criar uma nova versão.</span><span class="sxs-lookup"><span data-stu-id="a8184-455">Releases are immutable meaning that any change must create a new release.</span></span>

<span data-ttu-id="a8184-456">Aplicando essas práticas, as organizações evoluíram radicalmente a forma como enviam software.</span><span class="sxs-lookup"><span data-stu-id="a8184-456">Applying these practices, organizations have radically evolved how they ship software.</span></span> <span data-ttu-id="a8184-457">Muitos passaram de lançamentos trimestrais para atualizações sob demanda.</span><span class="sxs-lookup"><span data-stu-id="a8184-457">Many have moved from quarterly releases to on-demand updates.</span></span> <span data-ttu-id="a8184-458">O objetivo é pegar problemas no início do ciclo de desenvolvimento quando eles são menos caros para corrigir.</span><span class="sxs-lookup"><span data-stu-id="a8184-458">The goal is to catch problems early in the development cycle when they're less expensive to fix.</span></span> <span data-ttu-id="a8184-459">Quanto maior a duração entre integrações, mais caros se resolvem os problemas.</span><span class="sxs-lookup"><span data-stu-id="a8184-459">The longer the duration between integrations, the more expensive problems become to resolve.</span></span>  <span data-ttu-id="a8184-460">Com consistência no processo de integração, as equipes podem cometer mudanças de código com mais freqüência, levando a uma melhor colaboração e qualidade de software.</span><span class="sxs-lookup"><span data-stu-id="a8184-460">With consistency in the integration process, teams can commit code changes more frequently, leading to better collaboration and software quality.</span></span>

### <a name="azure-pipelines"></a><span data-ttu-id="a8184-461">Azure Pipelines</span><span class="sxs-lookup"><span data-stu-id="a8184-461">Azure Pipelines</span></span>

<span data-ttu-id="a8184-462">A nuvem do Azure inclui um novo serviço de CI/CD intitulado [Azure Pipelines](https://azure.microsoft.com/services/devops/pipelines/), que faz parte da oferta [de DevOps do Azure](https://azure.microsoft.com/services/devops/) mostrada na Figura 1-9.</span><span class="sxs-lookup"><span data-stu-id="a8184-462">The Azure cloud includes a new CI/CD service entitled [Azure Pipelines](https://azure.microsoft.com/services/devops/pipelines/), which is part of the [Azure DevOps](https://azure.microsoft.com/services/devops/) offering shown in Figure 1-9.</span></span>

![Pipelines Azure em DevOps](./media/devops-components.png)

<span data-ttu-id="a8184-464">**Figura 1-9**.</span><span class="sxs-lookup"><span data-stu-id="a8184-464">**Figure 1-9**.</span></span> <span data-ttu-id="a8184-465">Ofertas do Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="a8184-465">Azure DevOps offerings</span></span>

<span data-ttu-id="a8184-466">O Azure Pipelines é um serviço em nuvem que combina integração contínua (CI) e entrega contínua (CD).</span><span class="sxs-lookup"><span data-stu-id="a8184-466">Azure Pipelines is a cloud service that combines continuous integration (CI) and continuous delivery (CD).</span></span> <span data-ttu-id="a8184-467">Você pode testar, construir e enviar automaticamente seu código para qualquer alvo.</span><span class="sxs-lookup"><span data-stu-id="a8184-467">You can automatically test, build, and ship your code to any target.</span></span>

<span data-ttu-id="a8184-468">Você define seu pipeline em código em um arquivo YAML ao lado do resto do código para o seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a8184-468">You define your pipeline in code in a YAML file alongside the rest of the code for your app.</span></span>

- <span data-ttu-id="a8184-469">O pipeline é versão com seu código e segue a mesma estrutura de ramificação.</span><span class="sxs-lookup"><span data-stu-id="a8184-469">The pipeline is versioned with your code and follows the same branching structure.</span></span>
- <span data-ttu-id="a8184-470">Você recebe validação de suas alterações através de avaliações de código em solicitações de puxar e políticas de construção de ramificações.</span><span class="sxs-lookup"><span data-stu-id="a8184-470">You get validation of your changes through code reviews in pull requests and branch build policies.</span></span>
- <span data-ttu-id="a8184-471">Cada ramo que você usa pode personalizar a diretiva de compilação modificando o arquivo azure-pipelines.yml.</span><span class="sxs-lookup"><span data-stu-id="a8184-471">Every branch you use can customize the build policy by modifying the azure-pipelines.yml file.</span></span>
- <span data-ttu-id="a8184-472">O arquivo do pipeline é verificado no controle de versão e pode ser investigado se há algum problema.</span><span class="sxs-lookup"><span data-stu-id="a8184-472">The pipeline file is checked into version control and can be investigated if there's a problem.</span></span>

<span data-ttu-id="a8184-473">O serviço Azure Pipelines suporta a maioria dos provedores de Git e pode gerar pipelines de implantação para aplicativos escritos nas plataformas Linux, macOS ou Windows.</span><span class="sxs-lookup"><span data-stu-id="a8184-473">The Azure Pipelines service supports most Git providers and can generate deployment pipelines for applications written on the Linux, macOS, or Windows platforms.</span></span> <span data-ttu-id="a8184-474">Ele inclui suporte para Java, .NET, JavaScript, Python, PHP, Go, XCode e C++.</span><span class="sxs-lookup"><span data-stu-id="a8184-474">It includes support for Java, .NET, JavaScript, Python, PHP, Go, XCode, and C++.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="a8184-475">[Próximo](introduction.md)
>[anterior](candidate-apps.md)</span><span class="sxs-lookup"><span data-stu-id="a8184-475">[Previous](introduction.md)
[Next](candidate-apps.md)</span></span>
