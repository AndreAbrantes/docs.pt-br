---
title: Relacional versus Dados NoSQL
description: Saiba mais sobre dados relacionais e NoSQL em aplicativos nativos de nuvem
author: robvet
ms.date: 01/22/2020
ms.openlocfilehash: a2561b0abfc1975badfafeeb4fa2f2c6429814be
ms.sourcegitcommit: 1cb64b53eb1f253e6a3f53ca9510ef0be1fd06fe
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/29/2020
ms.locfileid: "82507358"
---
# <a name="relational-vs-nosql-data"></a><span data-ttu-id="4f0c7-103">Relacional versus Dados NoSQL</span><span class="sxs-lookup"><span data-stu-id="4f0c7-103">Relational vs. NoSQL data</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="4f0c7-104">Relacional e NoSQL são dois tipos de sistemas de banco de dados comumente implementados em aplicativos nativos de nuvem.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-104">Relational and NoSQL are two types of database systems commonly implemented in cloud-native apps.</span></span> <span data-ttu-id="4f0c7-105">Eles são criados de forma diferente, armazenam dados de maneira diferente e acessados de forma diferente.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-105">They're built differently, store data differently, and accessed differently.</span></span> <span data-ttu-id="4f0c7-106">Nesta seção, veremos os dois.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-106">In this section, we'll look at both.</span></span> <span data-ttu-id="4f0c7-107">Mais adiante neste capítulo, veremos uma tecnologia de banco de dados emergente chamada *NewSQL*.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-107">Later in this chapter, we'll look at an emerging database technology called *NewSQL*.</span></span>

<span data-ttu-id="4f0c7-108">*Os bancos de dados relacionais* têm sido uma tecnologia predominante há décadas.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-108">*Relational databases* have been a prevalent technology for decades.</span></span> <span data-ttu-id="4f0c7-109">Eles são maduros, comprovados e amplamente implementados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-109">They're mature, proven, and widely implemented.</span></span> <span data-ttu-id="4f0c7-110">Produtos de banco de dados concorrentes, ferramentas e abound de experiência.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-110">Competing database products, tooling, and expertise abound.</span></span> <span data-ttu-id="4f0c7-111">Os bancos de dados relacionais fornecem um armazenamento de tabelas relacionadas.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-111">Relational databases provide a store of related data tables.</span></span> <span data-ttu-id="4f0c7-112">Essas tabelas têm um esquema fixo, usam o SQL (linguagem SQL) para gerenciar dados e dão suporte a garantias ACID.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-112">These tables have a fixed schema, use SQL (Structured Query Language) to manage data, and support ACID guarantees.</span></span>

<span data-ttu-id="4f0c7-113">*Os bancos de dados não-SQL* se referem a armazenamentos não relacionais de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-113">*No-SQL databases* refer to high-performance, non-relational data stores.</span></span> <span data-ttu-id="4f0c7-114">Eles se destacam em suas características de facilidade de uso, escalabilidade, resiliência e disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-114">They excel in their ease-of-use, scalability, resilience, and availability characteristics.</span></span> <span data-ttu-id="4f0c7-115">Em vez de unir tabelas de dados normalizados, o NoSQL armazena dados não estruturados ou semiestruturados, geralmente em pares chave-valor ou documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-115">Instead of joining tables of normalized data, NoSQL stores unstructured or semi-structured data, often in key-value pairs or JSON documents.</span></span> <span data-ttu-id="4f0c7-116">Os bancos de dados não SQL normalmente não fornecem garantias de ACID além do escopo de uma única partição de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-116">No-SQL databases typically don't provide ACID guarantees beyond the scope of a single database partition.</span></span> <span data-ttu-id="4f0c7-117">Serviços de alto volume que exigem tempo de resposta de subsegundo favorecem armazenamentos de bancos de serviços NoSQL.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-117">High volume services that require sub second response time favor NoSQL datastores.</span></span>

<span data-ttu-id="4f0c7-118">O impacto das tecnologias [NoSQL](https://www.geeksforgeeks.org/introduction-to-nosql/) para sistemas nativos de nuvem distribuída não pode ser muito deEstado.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-118">The impact of [NoSQL](https://www.geeksforgeeks.org/introduction-to-nosql/) technologies for distributed cloud-native systems can't be overstated.</span></span> <span data-ttu-id="4f0c7-119">A proliferação de novas tecnologias de dados neste espaço interrompeu as soluções que, uma vez, contavam exclusivamente com os bancos dados relacionais.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-119">The proliferation of new data technologies in this space has disrupted solutions that once exclusively relied on relational databases.</span></span>

<span data-ttu-id="4f0c7-120">Os bancos de dados NoSQL incluem vários modelos diferentes para o acesso e o gerenciamento, cada um adequado para casos de uso específicos.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-120">NoSQL databases include several different models for accessing and managing data, each suited to specific use cases.</span></span> <span data-ttu-id="4f0c7-121">A Figura 5-9 apresenta quatro modelos comuns.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-121">Figure 5-9 presents four common models.</span></span>

![Modelos de dados NoSQL](./media/types-of-nosql-datastores.png)

<span data-ttu-id="4f0c7-123">**Figura 5-9**: modelos de dados para bancos de dados NoSQL</span><span class="sxs-lookup"><span data-stu-id="4f0c7-123">**Figure 5-9**: Data models for NoSQL databases</span></span>

| <span data-ttu-id="4f0c7-124">Modelo</span><span class="sxs-lookup"><span data-stu-id="4f0c7-124">Model</span></span> | <span data-ttu-id="4f0c7-125">Características</span><span class="sxs-lookup"><span data-stu-id="4f0c7-125">Characteristics</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="4f0c7-126">Repositório de documentos</span><span class="sxs-lookup"><span data-stu-id="4f0c7-126">Document Store</span></span> | <span data-ttu-id="4f0c7-127">Os dados e os metadados são armazenados hierarquicamente em documentos baseados em JSON no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-127">Data and metadata are stored hierarchically in JSON-based documents inside the database.</span></span> |
| <span data-ttu-id="4f0c7-128">Repositório de valor de chave</span><span class="sxs-lookup"><span data-stu-id="4f0c7-128">Key Value Store</span></span> | <span data-ttu-id="4f0c7-129">A maneira mais simples dos bancos de dados NoSQL, que são representados como uma coleção de pares chave-valor.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-129">The simplest of the NoSQL databases, data is represented as a collection of key-value pairs.</span></span> |
| <span data-ttu-id="4f0c7-130">Armazenamento de coluna ampla</span><span class="sxs-lookup"><span data-stu-id="4f0c7-130">Wide-Column Store</span></span> | <span data-ttu-id="4f0c7-131">Os dados relacionados são armazenados como um conjunto de pares de chave/valor aninhados em uma única coluna.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-131">Related data is stored as a set of nested-key/value pairs within a single column.</span></span> |
| <span data-ttu-id="4f0c7-132">Repositório de grafo</span><span class="sxs-lookup"><span data-stu-id="4f0c7-132">Graph Store</span></span> | <span data-ttu-id="4f0c7-133">Os dados são armazenados em uma estrutura de gráfico como nó, borda e propriedades de dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-133">Data is stored in a graph structure as node, edge, and data properties.</span></span> |

## <a name="the-cap-theorem"></a><span data-ttu-id="4f0c7-134">Teorema CAP</span><span class="sxs-lookup"><span data-stu-id="4f0c7-134">The CAP theorem</span></span>

<span data-ttu-id="4f0c7-135">Como uma maneira de entender as diferenças entre esses tipos de bancos de dados, considere o limite teorema, um conjunto de princípios aplicados a sistemas distribuídos que armazenam o estado.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-135">As a way to understand the differences between these types of databases, consider the CAP theorem, a set of principles applied to distributed systems that store state.</span></span> <span data-ttu-id="4f0c7-136">A Figura 5-10 mostra as três propriedades do CAP teorema.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-136">Figure 5-10 shows the three properties of the CAP theorem.</span></span>

![Teorema de CAP](./media/cap-theorem.png)

<span data-ttu-id="4f0c7-138">**Figura 5-10**.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-138">**Figure 5-10**.</span></span> <span data-ttu-id="4f0c7-139">Teorema CAP</span><span class="sxs-lookup"><span data-stu-id="4f0c7-139">The CAP theorem</span></span>

<span data-ttu-id="4f0c7-140">O teorema afirma que os sistemas de dados distribuídos oferecerão uma compensação entre consistência, disponibilidade e tolerância de partição.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-140">The theorem states that distributed data systems will offer a trade-off between consistency, availability, and partition tolerance.</span></span> <span data-ttu-id="4f0c7-141">E, qualquer banco de dados pode garantir apenas *duas* das três propriedades:</span><span class="sxs-lookup"><span data-stu-id="4f0c7-141">And, that any database can only guarantee *two* of the three properties:</span></span>

- <span data-ttu-id="4f0c7-142">*Verificação.*</span><span class="sxs-lookup"><span data-stu-id="4f0c7-142">*Consistency.*</span></span> <span data-ttu-id="4f0c7-143">Cada nó no cluster responde com os dados mais recentes, mesmo que o sistema deva bloquear a solicitação até que todas as réplicas sejam atualizadas.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-143">Every node in the cluster responds with the most recent data, even if the system must block the request until all replicas update.</span></span> <span data-ttu-id="4f0c7-144">Se você consultar um "sistema consistente" para um item que está sendo atualizado no momento, você aguardará essa resposta até que todas as réplicas sejam atualizadas com êxito.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-144">If you query a "consistent system" for an item that is currently updating, you'll wait for that response until all replicas successfully update.</span></span> <span data-ttu-id="4f0c7-145">No entanto, você receberá os dados mais atuais.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-145">However, you'll receive the most current data.</span></span>

- <span data-ttu-id="4f0c7-146">*Ininterrupta.*</span><span class="sxs-lookup"><span data-stu-id="4f0c7-146">*Availability.*</span></span> <span data-ttu-id="4f0c7-147">Cada nó retorna uma resposta imediata, mesmo que essa resposta não seja os dados mais recentes.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-147">Every node returns an immediate response, even if that response isn't the most recent data.</span></span> <span data-ttu-id="4f0c7-148">Se você consultar um "sistema disponível" para um item que está sendo atualizado, você obterá a melhor resposta possível que o serviço pode fornecer naquele momento.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-148">If you query an "available system" for an item that is updating, you'll get the best possible answer the service can provide at that moment.</span></span>

- <span data-ttu-id="4f0c7-149">*Tolerância a partição.*</span><span class="sxs-lookup"><span data-stu-id="4f0c7-149">*Partition Tolerance.*</span></span> <span data-ttu-id="4f0c7-150">Garante que o sistema continue a operar mesmo que um nó de dados replicado falhe ou perca a conectividade com outros nós de dados replicados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-150">Guarantees the system continues to operate even if a replicated data node fails or loses connectivity with other replicated data nodes.</span></span>

<span data-ttu-id="4f0c7-151">Os bancos de dados relacionais normalmente fornecem consistência e disponibilidade, mas não a tolerância de partição.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-151">Relational databases typically provide consistency and availability, but not partition tolerance.</span></span> <span data-ttu-id="4f0c7-152">Normalmente, eles são provisionados para um único servidor e são dimensionados verticalmente adicionando mais recursos à máquina.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-152">They're typically provisioned to a single server and scale vertically by adding more resources to the machine.</span></span>

<span data-ttu-id="4f0c7-153">Muitos sistemas de banco de dados relacional dão suporte a recursos de replicação internos em que as cópias do banco de dados primário podem ser feitas em outras instâncias de servidor secundário.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-153">Many relational database systems support built-in replication features where copies of the primary database can be made to other secondary server instances.</span></span> <span data-ttu-id="4f0c7-154">As operações de gravação são feitas na instância primária e replicadas para cada uma das secundárias.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-154">Write operations are made to the primary instance and replicated to each of the secondaries.</span></span> <span data-ttu-id="4f0c7-155">Após uma falha, a instância primária pode fazer failover para um secundário a fim de fornecer alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-155">Upon a failure, the primary instance can fail over to a secondary to provide high availability.</span></span> <span data-ttu-id="4f0c7-156">Os secundários também podem ser usados para distribuir operações de leitura.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-156">Secondaries can also be used to distribute read operations.</span></span> <span data-ttu-id="4f0c7-157">Enquanto as operações de gravação sempre vão para a réplica primária, as operações de leitura podem ser roteadas para qualquer um dos secundários para reduzir a carga do sistema.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-157">While writes operations always go against the primary replica, read operations can be routed to any of the secondaries to reduce system load.</span></span>

<span data-ttu-id="4f0c7-158">Os dados também podem ser particionados horizontalmente em vários nós, como com a [fragmentação](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-introduction).</span><span class="sxs-lookup"><span data-stu-id="4f0c7-158">Data can also be horizontally partitioned across multiple nodes, such as with [sharding](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-introduction).</span></span> <span data-ttu-id="4f0c7-159">Mas a fragmentação aumenta drasticamente a sobrecarga operacional por Spitting dados em muitas partes que não podem se comunicar facilmente.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-159">But, sharding dramatically increases operational overhead by spitting data across many pieces that cannot easily communicate.</span></span> <span data-ttu-id="4f0c7-160">Ele pode ser dispendioso e demorado para gerenciar.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-160">It can be costly and time consuming to manage.</span></span> <span data-ttu-id="4f0c7-161">Ele pode acabar afetando o desempenho, as junções de tabelas e a integridade referencial.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-161">It can end up impacting performance, table joins, and referential integrity.</span></span>

<span data-ttu-id="4f0c7-162">Se as réplicas de dados tiverem perdido a conectividade de rede em um cluster de banco de dados relacional "altamente consistente", você não poderá gravar no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-162">If data replicas were to lose network connectivity in a "highly consistent" relational database cluster, you wouldn't be able to write to the database.</span></span> <span data-ttu-id="4f0c7-163">O sistema rejeitaria a operação de gravação, pois ela não pode replicar essa alteração para a outra réplica de dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-163">The system would reject the write operation as it can't replicate that change to the other data replica.</span></span> <span data-ttu-id="4f0c7-164">Cada réplica de dados precisa ser atualizada antes que a transação possa ser concluída.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-164">Every data replica has to update before the transaction can complete.</span></span>

<span data-ttu-id="4f0c7-165">Os bancos de dados NoSQL normalmente dão suporte à alta disponibilidade e à tolerância a partições.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-165">NoSQL databases typically support high availability and partition tolerance.</span></span> <span data-ttu-id="4f0c7-166">Eles são expandidos horizontalmente, geralmente em servidores de mercadoria.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-166">They scale out horizontally, often across commodity servers.</span></span> <span data-ttu-id="4f0c7-167">Essa abordagem fornece excelente disponibilidade, dentro e entre regiões geográficas a um custo reduzido.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-167">This approach provides tremendous availability, both within and across geographical regions at a reduced cost.</span></span> <span data-ttu-id="4f0c7-168">Você particiona e replica dados entre esses computadores, ou nós, fornecendo redundância e tolerância a falhas.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-168">You partition and replicate data across these machines, or nodes, providing redundancy and fault tolerance.</span></span> <span data-ttu-id="4f0c7-169">A desvantagem é a consistência.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-169">The downside is consistency.</span></span> <span data-ttu-id="4f0c7-170">Uma alteração nos dados em um nó NoSQL pode levar algum tempo para ser propagada para outros nós.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-170">A change to data on one NoSQL node can take some time to propagate to other nodes.</span></span> <span data-ttu-id="4f0c7-171">Normalmente, um nó de banco de dados NoSQL fornecerá uma resposta imediata a uma consulta, mesmo que os dados apresentados estejam obsoletos e ainda não tenham sido atualizados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-171">Typically, a NoSQL database node will provide an immediate response to a query - even if the data that is presented is stale and hasn't updated yet.</span></span>

<span data-ttu-id="4f0c7-172">Se as réplicas de dados tiverem de perder a conectividade em um cluster de banco de dado NoSQL "altamente disponível", você ainda poderá concluir uma operação de gravação no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-172">If data replicas were to lose connectivity in a "highly available" NoSQL database cluster, you could still complete a write operation to the database.</span></span> <span data-ttu-id="4f0c7-173">O cluster de banco de dados permitiria a operação de gravação e atualizaria cada réplica de dado à medida que ela se tornar disponível.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-173">The database cluster would allow the write operation and update each data replica as it becomes available.</span></span>

<span data-ttu-id="4f0c7-174">Esse tipo de resultado é conhecido como consistência eventual, uma característica de sistemas de dados distribuídos em que não há suporte para transações ACID.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-174">This kind of result is known as eventual consistency, a characteristic of distributed data systems where ACID transactions aren't supported.</span></span> <span data-ttu-id="4f0c7-175">É um breve atraso entre a atualização de um item de dados e o tempo necessário para propagar essa atualização para cada um dos nós de réplica.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-175">It's a brief delay between the update of a data item and time that it takes to propagate that update to each of the replica nodes.</span></span> <span data-ttu-id="4f0c7-176">Em condições normais, o retardo é normalmente curto, mas pode aumentar quando surgirem problemas.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-176">Under normal conditions, the lag is typically short, but can increase when problems arise.</span></span> <span data-ttu-id="4f0c7-177">Por exemplo, o que aconteceria se você atualizasse um item de produto em um banco de dados NoSQL no Estados Unidos e consultasse o mesmo item de dado de um nó de réplica na Europa?</span><span class="sxs-lookup"><span data-stu-id="4f0c7-177">For example, what would happen if you were to update a product item in a NoSQL database in the United States and query that same data item from a replica node in Europe?</span></span> <span data-ttu-id="4f0c7-178">Você receberia as informações anteriores do produto, até que o cluster atualize o nó Europeu com a alteração do produto.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-178">You would receive the earlier product information, until the cluster updates the European node with the product change.</span></span> <span data-ttu-id="4f0c7-179">Retornando imediatamente um resultado de consulta e não aguardando a atualização de todos os nós de réplica, você obterá enorme escala e volume, mas com a possibilidade de apresentar dados mais antigos.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-179">By immediately returning a query result and not waiting for all replica nodes to update, you gain enormous scale and volume, but with the possibility of presenting older data.</span></span>

<span data-ttu-id="4f0c7-180">Alta disponibilidade e escalabilidade maciça geralmente são mais críticas para os negócios do que a consistência forte.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-180">High availability and massive scalability are often more critical to the business than strong consistency.</span></span> <span data-ttu-id="4f0c7-181">Os desenvolvedores podem implementar técnicas e padrões como sagas, CQRS e mensagens assíncronas para adotar consistência eventual.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-181">Developers can implement techniques and patterns such as Sagas, CQRS, and asynchronous messaging to embrace eventual consistency.</span></span>

> <span data-ttu-id="4f0c7-182">Hoje em dia, deve-se ter cuidado ao conideringr as restrições de teorema de CAP.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-182">Nowadays, care must be taken when conidering the CAP theorem constraints.</span></span> <span data-ttu-id="4f0c7-183">Um novo tipo de banco de dados, chamado NewSQL, surgiu, que estende o mecanismo de banco de dados relacional para dar suporte à escalabilidade horizontal e ao desempenho escalonável dos sistemas NoSQL.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-183">A new type of database, called NewSQL, has emerged which extends the relational database engine to support both horizontal scalability and the scalable performance of NoSQL systems.</span></span>

## <a name="considerations-for-relational-vs-nosql-systems"></a><span data-ttu-id="4f0c7-184">Considerações para sistemas relacionais versus NoSQL</span><span class="sxs-lookup"><span data-stu-id="4f0c7-184">Considerations for relational vs. NoSQL systems</span></span>

<span data-ttu-id="4f0c7-185">Com base em requisitos de dados específicos, um microserviço baseado em nuvem é capaz de implementar um repositório de armazenamento de data de NoSQL e relacional ou ambos.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-185">Based upon specific data requirements, a cloud-native-based microservice can implement a relational, NoSQL datastore or both.</span></span>

|  <span data-ttu-id="4f0c7-186">Considere um repositório de armazenamento NoSQL quando:</span><span class="sxs-lookup"><span data-stu-id="4f0c7-186">Consider a NoSQL datastore when:</span></span> | <span data-ttu-id="4f0c7-187">Considere um banco de dados relacional quando:</span><span class="sxs-lookup"><span data-stu-id="4f0c7-187">Consider a relational database when:</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="4f0c7-188">Você tem cargas de trabalho de alto volume que exigem grande escala</span><span class="sxs-lookup"><span data-stu-id="4f0c7-188">You have high volume workloads that require large scale</span></span> | <span data-ttu-id="4f0c7-189">Seu volume de carga de trabalho é consistente e requer escala média para grande</span><span class="sxs-lookup"><span data-stu-id="4f0c7-189">Your workload volume is consistent and requires medium to large scale</span></span> |
| <span data-ttu-id="4f0c7-190">Suas cargas de trabalho não exigem garantias ACID</span><span class="sxs-lookup"><span data-stu-id="4f0c7-190">Your workloads don't require ACID guarantees</span></span> |  <span data-ttu-id="4f0c7-191">Garantias de ACID são necessárias</span><span class="sxs-lookup"><span data-stu-id="4f0c7-191">ACID guarantees are required</span></span> |
| <span data-ttu-id="4f0c7-192">Seus dados são dinâmicos e frequentemente alterados</span><span class="sxs-lookup"><span data-stu-id="4f0c7-192">Your data is dynamic and frequently changes</span></span> | <span data-ttu-id="4f0c7-193">Seus dados são previsíveis e altamente estruturados</span><span class="sxs-lookup"><span data-stu-id="4f0c7-193">Your data is predictable and highly structured</span></span> |
| <span data-ttu-id="4f0c7-194">Os dados podem ser expressos sem relações</span><span class="sxs-lookup"><span data-stu-id="4f0c7-194">Data can be expressed without relationships</span></span> | <span data-ttu-id="4f0c7-195">Os dados são expressos de maneira relacional</span><span class="sxs-lookup"><span data-stu-id="4f0c7-195">Data is best expressed relationally</span></span> |  
| <span data-ttu-id="4f0c7-196">Você precisa de gravações rápidas e a segurança de gravação não é crítica</span><span class="sxs-lookup"><span data-stu-id="4f0c7-196">You need fast writes and write safety isn't critical</span></span> | <span data-ttu-id="4f0c7-197">A segurança de gravação é um requisito</span><span class="sxs-lookup"><span data-stu-id="4f0c7-197">Write safety is a requirement</span></span> |  
| <span data-ttu-id="4f0c7-198">A recuperação de dados é simples e tende a ser simples</span><span class="sxs-lookup"><span data-stu-id="4f0c7-198">Data retrieval is simple and tends to be flat</span></span> | <span data-ttu-id="4f0c7-199">Você trabalha com consultas e relatórios complexos</span><span class="sxs-lookup"><span data-stu-id="4f0c7-199">You work with complex queries and reports</span></span>|
| <span data-ttu-id="4f0c7-200">Seus dados exigem uma ampla distribuição geográfica</span><span class="sxs-lookup"><span data-stu-id="4f0c7-200">Your data requires a wide geographic distribution</span></span> | <span data-ttu-id="4f0c7-201">Os usuários são mais centralizados</span><span class="sxs-lookup"><span data-stu-id="4f0c7-201">Your users are more centralized</span></span> |
| <span data-ttu-id="4f0c7-202">Seu aplicativo será implantado em um hardware de mercadoria, como com nuvens públicas</span><span class="sxs-lookup"><span data-stu-id="4f0c7-202">Your application will be deployed to commodity hardware, such as with public clouds</span></span> | <span data-ttu-id="4f0c7-203">Seu aplicativo será implantado em hardware grande e high-end</span><span class="sxs-lookup"><span data-stu-id="4f0c7-203">Your application will be deployed to large, high-end hardware</span></span> |
|||

<span data-ttu-id="4f0c7-204">Nas próximas seções, exploraremos as opções disponíveis na nuvem do Azure para armazenar e gerenciar seus dados nativos de nuvem.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-204">In the next sections, we'll explore the options available in the Azure cloud for storing and managing your cloud-native data.</span></span>

## <a name="database-as-a-service"></a><span data-ttu-id="4f0c7-205">Banco de dados como serviço</span><span class="sxs-lookup"><span data-stu-id="4f0c7-205">Database as a Service</span></span>

<span data-ttu-id="4f0c7-206">Para começar, você pode provisionar uma máquina virtual do Azure e instalar o banco de dados de sua escolha para cada serviço.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-206">To start, you could provision an Azure virtual machine and install your database of choice for each service.</span></span> <span data-ttu-id="4f0c7-207">Embora você tenha controle total sobre o ambiente, abrem mão muitos recursos internos da plataforma de nuvem.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-207">While you'd have full control over the environment, you'd forgo many built-in features of the cloud platform.</span></span> <span data-ttu-id="4f0c7-208">Você também será responsável por gerenciar a máquina virtual e o banco de dados para cada serviço.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-208">You'd also be responsible for managing the virtual machine and database for each service.</span></span> <span data-ttu-id="4f0c7-209">Essa abordagem pode rapidamente tornar-se demorada e cara.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-209">This approach could quickly become time-consuming and expensive.</span></span>

<span data-ttu-id="4f0c7-210">Em vez disso, os aplicativos nativos de nuvem favorecem os serviços de dados expostos como um [DBaaS (Database as Service como serviço)](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/).</span><span class="sxs-lookup"><span data-stu-id="4f0c7-210">Instead, cloud-native applications favor data services exposed as a [Database as a Service (DBaaS)](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/).</span></span> <span data-ttu-id="4f0c7-211">Totalmente gerenciado por um fornecedor de nuvem, esses serviços fornecem segurança, escalabilidade e monitoramento internos.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-211">Fully managed by a cloud vendor, these services provide built-in security, scalability, and monitoring.</span></span> <span data-ttu-id="4f0c7-212">Em vez de possuir o serviço, basta consumi-lo como um [serviço de backup](./definition.md#backing-services).</span><span class="sxs-lookup"><span data-stu-id="4f0c7-212">Instead of owning the service, you simply consume it as a [backing service](./definition.md#backing-services).</span></span> <span data-ttu-id="4f0c7-213">O provedor opera o recurso em escala e tem a responsabilidade por desempenho e manutenção.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-213">The provider operates the resource at scale and bears the responsibility for performance and maintenance.</span></span>

<span data-ttu-id="4f0c7-214">Eles podem ser configurados em regiões e zonas de disponibilidade de nuvem para obter alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-214">They can be configured across cloud availability zones and regions to achieve high availability.</span></span> <span data-ttu-id="4f0c7-215">Todos eles dão suporte à capacidade just-in-time e a um modelo pago conforme o uso.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-215">They all support just-in-time capacity and a pay-as-you-go model.</span></span> <span data-ttu-id="4f0c7-216">O Azure apresenta diferentes tipos de opções de serviço de dados gerenciado, cada uma com benefícios específicos.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-216">Azure features different kinds of managed data service options, each with specific benefits.</span></span>

<span data-ttu-id="4f0c7-217">Primeiro, veremos os serviços DBaaS relacionais disponíveis no Azure.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-217">We'll first look at relational DBaaS services available in Azure.</span></span> <span data-ttu-id="4f0c7-218">Você verá que o principal banco de dados de SQL Server da Microsoft está disponível junto com várias opções de código-fonte aberto.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-218">You'll see that Microsoft's flagship SQL Server database is available along with several open-source options.</span></span> <span data-ttu-id="4f0c7-219">Em seguida, falaremos sobre os serviços de dados NoSQL no Azure.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-219">Then, we'll talk about the NoSQL data services in Azure.</span></span>

## <a name="azure-relational-databases"></a><span data-ttu-id="4f0c7-220">Bancos de dados relacionais do Azure</span><span class="sxs-lookup"><span data-stu-id="4f0c7-220">Azure relational databases</span></span>

<span data-ttu-id="4f0c7-221">Para os microserviços nativos de nuvem que exigem dados relacionais, o Azure oferece quatro ofertas de DBaaS (bancos de dado relacionais como serviço) gerenciados, mostrados na Figura 5-11.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-221">For cloud-native microservices that require relational data, Azure offers four managed relational databases as a service (DBaaS) offerings, shown in Figure 5-11.</span></span>

![Bancos de dados relacionais gerenciados no Azure](./media/azure-managed-databases.png)

<span data-ttu-id="4f0c7-223">**Figura 5-11**.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-223">**Figure 5-11**.</span></span> <span data-ttu-id="4f0c7-224">Bancos de dados relacionais gerenciados disponíveis no Azure</span><span class="sxs-lookup"><span data-stu-id="4f0c7-224">Managed relational databases available in Azure</span></span>

<span data-ttu-id="4f0c7-225">Na figura anterior, observe como cada um se baseia em uma infraestrutura DBaaS comum que apresenta os principais recursos sem custo adicional.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-225">In the previous figure, note how each sits upon a common DBaaS infrastructure which features key capabilities at no additional cost.</span></span>

<span data-ttu-id="4f0c7-226">Esses recursos são especialmente importantes para as organizações que provisionam grandes números de bancos de dados, mas têm recursos limitados para administrá-los.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-226">These features are especially important to organizations who provision large numbers of databases, but have limited resources to administer them.</span></span>
<span data-ttu-id="4f0c7-227">Você pode provisionar um banco de dados do Azure em minutos selecionando a quantidade de núcleos de processamento, memória e armazenamento subjacente.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-227">You can provision an Azure database in minutes by selecting the amount of processing cores, memory, and underlying storage.</span></span> <span data-ttu-id="4f0c7-228">Você pode dimensionar o banco de dados instantaneamente e ajustar dinamicamente os recursos com pouco ou nenhum tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-228">You can scale the database on-the-fly and dynamically adjust resources with little to no downtime.</span></span>

## <a name="azure-sql-database"></a><span data-ttu-id="4f0c7-229">Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="4f0c7-229">Azure SQL Database</span></span>

<span data-ttu-id="4f0c7-230">As equipes de desenvolvimento com experiência em Microsoft SQL Server devem considerar o [banco de dados SQL do Azure](https://docs.microsoft.com/azure/sql-database/).</span><span class="sxs-lookup"><span data-stu-id="4f0c7-230">Development teams with expertise in Microsoft SQL Server should consider [Azure SQL Database](https://docs.microsoft.com/azure/sql-database/).</span></span> <span data-ttu-id="4f0c7-231">É um DBaaS (banco de dados como serviço) relacional totalmente gerenciado com base na Mecanismo de Banco de Dados do Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-231">It's a fully managed relational database-as-a-service (DBaaS) based on the Microsoft SQL Server Database Engine.</span></span> <span data-ttu-id="4f0c7-232">O serviço compartilha muitos recursos encontrados na versão local do SQL Server e executa a versão estável mais recente do Mecanismo de Banco de Dados de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-232">The service shares many features found in the on-premises version of SQL Server and runs the latest stable version of the SQL Server Database Engine.</span></span>

<span data-ttu-id="4f0c7-233">Para uso com um microserviço nativo de nuvem, o banco de dados SQL do Azure está disponível com três opções de implantação:</span><span class="sxs-lookup"><span data-stu-id="4f0c7-233">For use with a cloud-native microservice, Azure SQL Database is available with three deployment options:</span></span>

- <span data-ttu-id="4f0c7-234">Uma Banco de Dados Individual representa um banco de dados SQL totalmente gerenciado em execução em um [servidor de banco de dados SQL do Azure](https://docs.microsoft.com/azure/sql-database/sql-database-servers) na nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-234">A Single Database represents a fully managed SQL Database running on an [Azure SQL Database server](https://docs.microsoft.com/azure/sql-database/sql-database-servers) in the Azure cloud.</span></span> <span data-ttu-id="4f0c7-235">O banco de dados é considerado [*contido*](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases) porque não tem nenhuma dependência de configuração no servidor de banco de dados subjacente.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-235">The database is considered [*contained*](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases) as it has no configuration dependencies on the underlying database server.</span></span>
  
- <span data-ttu-id="4f0c7-236">Uma [instância gerenciada](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) é uma instância totalmente gerenciada do mecanismo de banco de dados do Microsoft SQL Server que fornece compatibilidade quase 100% com uma SQL Server local.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-236">A [Managed Instance](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) is a fully managed instance of the Microsoft SQL Server Database Engine that provides near-100% compatibility with an on-premises SQL Server.</span></span> <span data-ttu-id="4f0c7-237">Essa opção dá suporte a bancos de dados maiores, até 35 TB e é colocada em uma [rede virtual do Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) para um melhor isolamento.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-237">This option supports larger databases, up to 35 TB and is placed in an [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) for better isolation.</span></span>

- <span data-ttu-id="4f0c7-238">O [banco de dados SQL sem servidor do Azure](https://docs.microsoft.com/azure/sql-database/sql-database-serverless) é uma camada de computação para um banco de dados individual que é dimensionado automaticamente com base na demanda de carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="4f0c7-238">[Azure SQL Database serverless](https://docs.microsoft.com/azure/sql-database/sql-database-serverless) is a compute tier for a single database that automatically scales based on workload demand.</span></span> <span data-ttu-id="4f0c7-239">Ele cobra apenas pela quantidade de computação usada por segundo.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-239">It bills only for the amount of compute used per second.</span></span> <span data-ttu-id="4f0c7-240">O serviço é adequado para cargas de trabalho com padrões de uso intermitentes e imprevisíveis, intercalados com períodos de inatividade.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-240">The service is well suited for workloads with intermittent, unpredictable usage patterns, interspersed with periods of inactivity.</span></span> <span data-ttu-id="4f0c7-241">A camada de computação sem servidor também pausa automaticamente os bancos de dados durante períodos inativos para que somente os encargos de armazenamento sejam cobrados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-241">The serverless compute tier also automatically pauses databases during inactive periods so that only storage charges are billed.</span></span> <span data-ttu-id="4f0c7-242">Ela é retomada automaticamente quando a atividade retorna.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-242">It automatically resumes when activity returns.</span></span>

<span data-ttu-id="4f0c7-243">Além da pilha de Microsoft SQL Server tradicional, o Azure também apresenta versões gerenciadas de três bancos de dados de software livre populares.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-243">Beyond the traditional Microsoft SQL Server stack, Azure also features managed versions of three popular open-source databases.</span></span>

## <a name="open-source-databases-in-azure"></a><span data-ttu-id="4f0c7-244">Bancos de dados de código aberto no Azure</span><span class="sxs-lookup"><span data-stu-id="4f0c7-244">Open-source databases in Azure</span></span>

<span data-ttu-id="4f0c7-245">Os bancos de dados relacionais de código aberto se tornaram uma opção popular para aplicativos nativos de nuvem.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-245">Open-source relational databases have become a popular choice for cloud-native applications.</span></span> <span data-ttu-id="4f0c7-246">Muitas empresas favorecem esses produtos de banco de dados comercial, especialmente para economia de custos.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-246">Many enterprises favor them over commercial database products, especially for cost savings.</span></span> <span data-ttu-id="4f0c7-247">Muitas equipes de desenvolvimento aproveitam sua flexibilidade, desenvolvimento com suporte da Comunidade e ecossistema de ferramentas e extensões.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-247">Many development teams enjoy their flexibility, community-backed development, and ecosystem of tools and extensions.</span></span> <span data-ttu-id="4f0c7-248">Os bancos de dados de software livre podem ser implantados em vários provedores de nuvem, ajudando a minimizar a preocupação de "bloqueio de fornecedor".</span><span class="sxs-lookup"><span data-stu-id="4f0c7-248">Open-source databases can be deployed across multiple cloud providers, helping minimize the concern of "vendor lock-in."</span></span>

<span data-ttu-id="4f0c7-249">Os desenvolvedores podem facilmente hospedar automaticamente qualquer banco de dados de código-fonte aberto em uma VM do Azure.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-249">Developers can easily self-host any open-source database on an Azure VM.</span></span> <span data-ttu-id="4f0c7-250">Embora forneça controle total, essa abordagem o coloca no gancho do gerenciamento, do monitoramento e da manutenção do banco de dados e da VM.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-250">While providing full control, this approach puts you on the hook for the management, monitoring, and maintenance of the database and VM.</span></span>

<span data-ttu-id="4f0c7-251">No entanto, a Microsoft continua seu compromisso de manter o Azure uma "plataforma aberta" oferecendo vários bancos de dados de software livre populares como serviços DBaaS *totalmente gerenciados* .</span><span class="sxs-lookup"><span data-stu-id="4f0c7-251">However, Microsoft continues its commitment to keeping Azure an “open platform” by offering several popular open-source databases as *fully managed* DBaaS services.</span></span>

### <a name="azure-database-for-mysql"></a><span data-ttu-id="4f0c7-252">Banco de Dados do Azure para MySQL</span><span class="sxs-lookup"><span data-stu-id="4f0c7-252">Azure Database for MySQL</span></span>

<span data-ttu-id="4f0c7-253">[O MySQL](https://en.wikipedia.org/wiki/MySQL) é um banco de dados relacional de código aberto e um pilar para aplicativos criados na [pilha de software da lâmpada](https://en.wikipedia.org/wiki/LAMP_(software_bundle)).</span><span class="sxs-lookup"><span data-stu-id="4f0c7-253">[MySQL](https://en.wikipedia.org/wiki/MySQL) is an open-source relational database and a pillar for applications built on the [LAMP software stack](https://en.wikipedia.org/wiki/LAMP_(software_bundle)).</span></span> <span data-ttu-id="4f0c7-254">Amplamente escolhido para cargas de trabalho de *leitura pesada* , ela é usada por muitas organizações de grande porte, incluindo Facebook, Twitter e YouTube.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-254">Widely chosen for *read heavy* workloads, it's used by many large organizations, including Facebook, Twitter, and YouTube.</span></span> <span data-ttu-id="4f0c7-255">A Community Edition está disponível gratuitamente, enquanto a Enterprise Edition exige uma compra de licença.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-255">The community edition is available for free, while the enterprise edition requires a license purchase.</span></span> <span data-ttu-id="4f0c7-256">Criado originalmente em 1995, o produto foi adquirido pela Sun Microsystems em 2008.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-256">Originally created in 1995, the product was purchased by Sun Microsystems in 2008.</span></span> <span data-ttu-id="4f0c7-257">A Oracle adquiriu Sun e MySQL em 2010.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-257">Oracle acquired Sun and MySQL in 2010.</span></span>

<span data-ttu-id="4f0c7-258">O [banco de dados do Azure para MySQL](https://azure.microsoft.com/services/mysql/) é um serviço de banco de dados relacional gerenciado baseado no mecanismo de servidor MySQL de código-fonte aberto.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-258">[Azure Database for MySQL](https://azure.microsoft.com/services/mysql/) is a managed relational database service based on the open-source MySQL Server engine.</span></span> <span data-ttu-id="4f0c7-259">Ele usa o MySQL Community Edition.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-259">It uses the MySQL Community edition.</span></span> <span data-ttu-id="4f0c7-260">O servidor MySQL do Azure é o ponto administrativo para o serviço.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-260">The Azure MySQL server is the administrative point for the service.</span></span> <span data-ttu-id="4f0c7-261">É o mesmo mecanismo de servidor MySQL usado para implantações locais.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-261">It's the same MySQL server engine used for on-premises deployments.</span></span> <span data-ttu-id="4f0c7-262">O mecanismo pode criar um único banco de dados por servidor ou vários bancos por servidor que compartilham recursos.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-262">The engine can create a single database per server or multiple databases per server that share resources.</span></span> <span data-ttu-id="4f0c7-263">Você pode continuar a gerenciar dados usando as mesmas ferramentas de código-fonte aberto sem ter que aprender novas habilidades ou gerenciar máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-263">You can continue to manage data using the same open-source tools without having to learn new skills or manage virtual machines.</span></span>

### <a name="azure-database-for-mariadb"></a><span data-ttu-id="4f0c7-264">Banco de Dados do Azure para MariaDB</span><span class="sxs-lookup"><span data-stu-id="4f0c7-264">Azure Database for MariaDB</span></span>

<span data-ttu-id="4f0c7-265">[MariaDB](https://mariadb.com/) O servidor é outro servidor de banco de dados de software livre popular.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-265">[MariaDB](https://mariadb.com/) Server is another popular open-source database server.</span></span> <span data-ttu-id="4f0c7-266">Ele foi criado como uma *bifurcação* do MySQL quando a Oracle comprou a Sun Microsystems, que era o MySQL.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-266">It was created as a *fork* of MySQL when Oracle purchased Sun Microsystems, who owned MySQL.</span></span> <span data-ttu-id="4f0c7-267">A intenção era garantir que MariaDB permanecia Open-Source.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-267">The intent was to ensure that MariaDB remained open-source.</span></span> <span data-ttu-id="4f0c7-268">Como MariaDB é uma bifurcação do MySQL, as definições de tabela e de dados são compatíveis e os protocolos, estruturas e APIs do cliente são close-spojit.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-268">As MariaDB is a fork of MySQL, the data and table definitions are compatible, and the client protocols, structures, and APIs, are close-knit.</span></span>

<span data-ttu-id="4f0c7-269">O MariaDB tem uma comunidade forte e é usado por muitas empresas de grande porte.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-269">MariaDB has a strong community and is used by many large enterprises.</span></span> <span data-ttu-id="4f0c7-270">Embora a Oracle continue a manter, aprimorar e oferecer suporte ao MySQL, o MariaDB Foundation gerencia o MariaDB, permitindo contribuições públicas para o produto e a documentação.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-270">While Oracle continues to maintain, enhance, and support MySQL, the MariaDB foundation manages MariaDB, allowing public contributions to the product and documentation.</span></span>

<span data-ttu-id="4f0c7-271">O [banco de dados do Azure para MariaDB](https://azure.microsoft.com/services/mariadb/) é um banco de dados relacional totalmente gerenciado como um serviço na nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-271">[Azure Database for MariaDB](https://azure.microsoft.com/services/mariadb/) is a fully managed relational database as a service in the Azure cloud.</span></span> <span data-ttu-id="4f0c7-272">O serviço é baseado no mecanismo de servidor do MariaDB Community Edition.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-272">The service is based on the MariaDB community edition server engine.</span></span> <span data-ttu-id="4f0c7-273">Ele pode lidar com cargas de trabalho críticas com desempenho previsível e escalabilidade dinâmica.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-273">It can handle mission-critical workloads with predictable performance and dynamic scalability.</span></span>

### <a name="azure-database-for-postgresql"></a><span data-ttu-id="4f0c7-274">Banco de Dados do Azure para PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="4f0c7-274">Azure Database for PostgreSQL</span></span>

<span data-ttu-id="4f0c7-275">O [PostgreSQL](https://www.postgresql.org/) é um banco de dados relacional de código aberto com mais de 30 anos de desenvolvimento ativo.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-275">[PostgreSQL](https://www.postgresql.org/) is an open-source relational database with over 30 years of active development.</span></span> <span data-ttu-id="4f0c7-276">O PostgresSQL tem uma reputação forte de confiabilidade e integridade de dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-276">PostgresSQL has a strong reputation for reliability and data integrity.</span></span> <span data-ttu-id="4f0c7-277">É um recurso rico, compatível com SQL e considerado mais eficaz do que o MySQL, especialmente para cargas de trabalho com consultas complexas e gravações pesadas.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-277">It’s feature rich, SQL compliant, and considered more performant than MySQL - especially for workloads with complex queries and heavy writes.</span></span> <span data-ttu-id="4f0c7-278">Muitas empresas de grande porte, incluindo Apple, Red Hat e Fujitsu, têm produtos criados usando PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-278">Many large enterprises including Apple, Red Hat, and Fujitsu have built products using PostgreSQL.</span></span>

<span data-ttu-id="4f0c7-279">O [banco de dados do Azure para PostgreSQL](https://azure.microsoft.com/services/postgresql/) é um serviço de banco de dados relacional totalmente gerenciado, baseado no mecanismo de banco de dados Postgres de código aberto.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-279">[Azure Database for PostgreSQL](https://azure.microsoft.com/services/postgresql/) is a fully managed relational database service, based on the open-source Postgres database engine.</span></span> <span data-ttu-id="4f0c7-280">O serviço oferece suporte a várias plataformas de desenvolvimento, incluindo C++, Java, Python,\#node, C e php.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-280">The service supports many development platforms, including C++, Java, Python, Node, C\#, and PHP.</span></span> <span data-ttu-id="4f0c7-281">Você pode migrar bancos de dados do PostgreSQL para ele usando a ferramenta de [interface de linha de comando](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1) ou o serviço de migração do Azure Data.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-281">You can migrate PostgreSQL databases to it using the [command-line interface](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1) tool or Azure Data Migration Service.</span></span>

<span data-ttu-id="4f0c7-282">O banco de dados do Azure para PostgreSQL está disponível com duas opções de implantação:</span><span class="sxs-lookup"><span data-stu-id="4f0c7-282">Azure Database for PostgreSQL is available with two deployment options:</span></span>

- <span data-ttu-id="4f0c7-283">A opção de implantação de [servidor único](https://docs.microsoft.com/azure/postgresql/concepts-servers) é um ponto administrativo central para vários bancos de dados nos quais você pode implantar vários bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-283">The [Single Server](https://docs.microsoft.com/azure/postgresql/concepts-servers) deployment option is a central administrative point for multiple databases to which you can deploy many databases.</span></span> <span data-ttu-id="4f0c7-284">O preço é estruturado por servidor com base nos núcleos e no armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-284">The pricing is structured per-server based upon cores and storage.</span></span>

- <span data-ttu-id="4f0c7-285">A [opção de hiperescala (Citus)](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/) é alimentada pela tecnologia de dados do Citus.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-285">The [Hyperscale (Citus) option](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/) is powered by Citus Data technology.</span></span> <span data-ttu-id="4f0c7-286">Ele permite alto desempenho, *dimensionando horizontalmente* um único banco de dados em centenas de nós para fornecer desempenho e escala rápidos.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-286">It enables high performance by *horizontally scaling* a single database across hundreds of nodes to deliver fast performance and scale.</span></span> <span data-ttu-id="4f0c7-287">Essa opção permite que o mecanismo caiba mais dados na memória, paraleliza consultas em centenas de nós e indexe dados mais rapidamente.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-287">This option allows the engine to fit more data in memory, parallelize queries across hundreds of nodes, and index data faster.</span></span>

## <a name="nosql-data-in-azure"></a><span data-ttu-id="4f0c7-288">Dados NoSQL no Azure</span><span class="sxs-lookup"><span data-stu-id="4f0c7-288">NoSQL data in Azure</span></span>

<span data-ttu-id="4f0c7-289">Cosmos DB é um serviço de banco de dados NoSQL totalmente gerenciado e distribuído globalmente na nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-289">Cosmos DB is a fully managed, globally distributed NoSQL database service in the Azure cloud.</span></span> <span data-ttu-id="4f0c7-290">Ele foi adotado por muitas grandes empresas em todo o mundo, incluindo Coca-Cola, Skype, ExxonMobil e Liberty mútuo.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-290">It has been adopted by many large companies across the world,  including Coca-Cola, Skype, ExxonMobil, and Liberty Mutual.</span></span>

<span data-ttu-id="4f0c7-291">Se seus serviços exigirem resposta rápida de qualquer lugar no mundo, alta disponibilidade ou escalabilidade elástica, Cosmos DB será uma ótima opção.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-291">If your services require fast response from anywhere in the world, high availability, or elastic scalability, Cosmos DB is a great choice.</span></span> <span data-ttu-id="4f0c7-292">A Figura 5-12 mostra Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-292">Figure 5-12 shows Cosmos DB.</span></span>

![Visão geral do Cosmos DB](./media/cosmos-db-overview.png)

<span data-ttu-id="4f0c7-294">**Figura 5-12**: visão geral do cosmos DB</span><span class="sxs-lookup"><span data-stu-id="4f0c7-294">**Figure 5-12**: Overview of Cosmos DB</span></span>

<span data-ttu-id="4f0c7-295">A figura anterior apresenta muitos dos recursos nativos de nuvem internos disponíveis em Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-295">The previous figure presents many of the built-in cloud-native capabilities available in Cosmos DB.</span></span> <span data-ttu-id="4f0c7-296">Nesta seção, vamos examiná-las mais detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-296">In this section, we’ll take a closer look at them.</span></span>

### <a name="global-support"></a><span data-ttu-id="4f0c7-297">Suporte global</span><span class="sxs-lookup"><span data-stu-id="4f0c7-297">Global support</span></span>

<span data-ttu-id="4f0c7-298">Os aplicativos nativos de nuvem geralmente têm um público global e exigem escala global.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-298">Cloud-native applications often have a global audience and require global scale.</span></span>

<span data-ttu-id="4f0c7-299">Você pode distribuir bancos de dados do cosmos em regiões ou em todo o mundo, posicionando-os perto de seus usuários, melhorando o tempo de resposta e reduzindo a latência.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-299">You can distribute Cosmos databases across regions or around the world, placing data close to your users, improving response time, and reducing latency.</span></span> <span data-ttu-id="4f0c7-300">Você pode adicionar ou remover um banco de dados de uma região sem pausar ou reimplantar seus serviços.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-300">You can add or remove a database from a region without pausing or redeploying your services.</span></span> <span data-ttu-id="4f0c7-301">Em segundo plano, Cosmos DB replica os dados de forma transparente para cada uma das regiões configuradas.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-301">In the background, Cosmos DB transparently replicates the data to each of the configured regions.</span></span>

<span data-ttu-id="4f0c7-302">O Cosmos DB dá suporte ao clustering [ativo/ativo](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/) no nível global, permitindo que você configure qualquer uma das suas regiões de banco de dados para dar suporte a *gravações e leituras*.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-302">Cosmos DB supports [active/active](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/) clustering at the global level, enabling you to configure any of your database regions to support *both writes and reads*.</span></span>

<span data-ttu-id="4f0c7-303">O protocolo de [vários mestres](https://docs.microsoft.com/azure/cosmos-db/multi-master-benefits) é um recurso importante no cosmos DB que permite a seguinte funcionalidade:</span><span class="sxs-lookup"><span data-stu-id="4f0c7-303">The [Multi-Master](https://docs.microsoft.com/azure/cosmos-db/multi-master-benefits) protocol is an important feature in Cosmos DB that enables the following functionality:</span></span>

- <span data-ttu-id="4f0c7-304">Gravação e escalabilidade de leitura elástica ilimitada.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-304">Unlimited elastic write and read scalability.</span></span>

- <span data-ttu-id="4f0c7-305">99,999% de leitura e gravação de disponibilidade em todo o mundo.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-305">99.999% read and write availability all around the world.</span></span>

- <span data-ttu-id="4f0c7-306">Garantia de leituras e gravações atendidas em menos de 10 milissegundos no percentil 99.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-306">Guaranteed reads and writes served in less than 10 milliseconds at the 99th percentile.</span></span>

<span data-ttu-id="4f0c7-307">Com o Cosmos DB [APIs de hospedagem múltipla](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally), seu microserviço reconhece automaticamente a região do Azure mais próxima e envia solicitações a ela.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-307">With the Cosmos DB [Multi-Homing APIs](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally), your microservice is automatically aware of the nearest Azure region and sends requests to it.</span></span> <span data-ttu-id="4f0c7-308">A região mais próxima é identificada por Cosmos DB sem nenhuma alteração de configuração.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-308">The nearest region is identified by Cosmos DB without any configuration changes.</span></span> <span data-ttu-id="4f0c7-309">Se uma região ficar indisponível, o recurso de hospedagem múltipla roteará automaticamente as solicitações para a próxima região disponível mais próxima.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-309">Should a region become unavailable, the Multi-Homing feature will automatically route requests to the next nearest available region.</span></span>

### <a name="multi-model-support"></a><span data-ttu-id="4f0c7-310">Suporte a vários modelos</span><span class="sxs-lookup"><span data-stu-id="4f0c7-310">Multi-model support</span></span>

<span data-ttu-id="4f0c7-311">Ao refazer a plataforma de aplicativos monolíticos para uma arquitetura nativa de nuvem, as equipes de desenvolvimento às vezes precisam migrar armazenamentos de dados NoSQL de código aberto.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-311">When replatforming monolithic applications to a cloud-native architecture, development teams sometimes have to migrate open-source, NoSQL data stores.</span></span> <span data-ttu-id="4f0c7-312">Cosmos DB pode ajudá-lo a preservar seu investimento nesses armazenamentos de dados NoSQL com a plataforma de *vários modelos* .</span><span class="sxs-lookup"><span data-stu-id="4f0c7-312">Cosmos DB can help you preserve your investment in these NoSQL datastores with its *multi-model* data platform.</span></span> <span data-ttu-id="4f0c7-313">A Figura 5-13 mostra as [APIs de compatibilidade](https://www.wikiwand.com/en/Cosmos_DB)NoSQL com suporte.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-313">Figure 5-13 shows the supported NoSQL [compatibility APIs](https://www.wikiwand.com/en/Cosmos_DB).</span></span>

![Provedores de Cosmos DB](./media/cosmos-db-providers.png)

<span data-ttu-id="4f0c7-315">**Figura 5-13**: provedores de Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="4f0c7-315">**Figure 5-13**: Cosmos DB providers</span></span>

<span data-ttu-id="4f0c7-316">As equipes de desenvolvimento podem migrar os bancos de dados Mongo, Gremlin ou Cassandra existentes para o Cosmos DB com alterações mínimas no código ou em um dado.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-316">Development teams can migrate existing Mongo, Gremlin, or Cassandra databases into Cosmos DB with minimal changes to data or code.</span></span> <span data-ttu-id="4f0c7-317">Para novos aplicativos, as equipes de desenvolvimento podem escolher entre as opções de código-fonte aberto ou o modelo de API do SQL interno.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-317">For new apps, development teams can choose among open-source options or the built-in SQL API model.</span></span>

> <span data-ttu-id="4f0c7-318">Internamente, o cosmos armazena os dados em um formato struct simples composto por tipos de dados primitivos.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-318">Internally, Cosmos stores the data in a simple struct format made up of primitive data types.</span></span> <span data-ttu-id="4f0c7-319">Para cada solicitação, o mecanismo de banco de dados converte os dados primitivos na representação de modelo que você selecionou.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-319">For each request, the database engine translates the primitive data into the model representation you've selected.</span></span>

<span data-ttu-id="4f0c7-320">Na figura anterior, 5-13, observe a opção [API de tabela](https://docs.microsoft.com/azure/cosmos-db/table-introduction) .</span><span class="sxs-lookup"><span data-stu-id="4f0c7-320">In the previous figure, 5-13, note the [Table API](https://docs.microsoft.com/azure/cosmos-db/table-introduction) option.</span></span> <span data-ttu-id="4f0c7-321">Essa API é uma evolução do armazenamento de tabelas do Azure.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-321">This API is an evolution of Azure Table Storage.</span></span> <span data-ttu-id="4f0c7-322">Ambos compartilham o mesmo modelo de tabela subjacente, mas o Cosmos DB API de Tabela adiciona aprimoramentos Premium não disponíveis na API de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-322">Both share the same underlying table model, but the Cosmos DB Table API adds premium enhancements not available in the Azure Storage API.</span></span> <span data-ttu-id="4f0c7-323">Esses recursos estão em contraste com a Figura 5-4.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-323">These features are contrasted in Figure 5-4.</span></span>

![API de Tabela do Azure](media/azure-table-api.png)

<span data-ttu-id="4f0c7-325">**Figura 5-14**: provedores de API de tabela do Azure</span><span class="sxs-lookup"><span data-stu-id="4f0c7-325">**Figure 5-14**: Azure Table API Providers</span></span>

<span data-ttu-id="4f0c7-326">Os microserviços que consomem o armazenamento de tabelas do Azure podem migrar facilmente para o API de Tabela de Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-326">Microservices that consume Azure Table storage can easily migrate to the Cosmos DB Table API.</span></span> <span data-ttu-id="4f0c7-327">Nenhuma alteração de código é necessária.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-327">No code changes are required.</span></span>

### <a name="tunable-consistency"></a><span data-ttu-id="4f0c7-328">Consistência ajustável</span><span class="sxs-lookup"><span data-stu-id="4f0c7-328">Tunable consistency</span></span>

<span data-ttu-id="4f0c7-329">Anteriormente, na seção *relacional vs. NoSQL* , discutimos o assunto da *consistência de dados*.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-329">Earlier in the *Relational vs. NoSQL* section, we discussed the subject of *data consistency*.</span></span> <span data-ttu-id="4f0c7-330">A consistência dos dados refere-se à *integridade* dos seus dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-330">Data consistency refers to the *integrity* of your data.</span></span> <span data-ttu-id="4f0c7-331">Os serviços nativos de nuvem com dados distribuídos dependem da replicação e devem tomar uma compensação fundamental entre consistência de leitura, disponibilidade e latência.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-331">Cloud-native services with distributed data rely on replication and must make a fundamental tradeoff between read consistency, availability, and latency.</span></span>

<span data-ttu-id="4f0c7-332">A maioria dos bancos de dados distribuídos permite que os desenvolvedores escolham entre dois modelos de consistência: consistência forte e consistência eventual.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-332">Most distributed databases allow developers to choose between two consistency models: strong consistency and eventual consistency.</span></span> <span data-ttu-id="4f0c7-333">A *consistência forte* é o padrão ouro de programação de dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-333">*Strong consistency* is the gold standard of data programmability.</span></span> <span data-ttu-id="4f0c7-334">Ele garante que uma consulta sempre retornará os dados mais atuais, mesmo que o sistema deva incorrer em latência aguardando que uma atualização seja replicada em todas as cópias de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-334">It guarantees that a query will always return the most current data - even if the system must incur latency waiting for an update to replicate across all database copies.</span></span> <span data-ttu-id="4f0c7-335">Enquanto um banco de dados configurado para *consistência eventual* retornará dados imediatamente, mesmo que esses dados não sejam a cópia mais atual.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-335">While a database configured for *eventual consistency* will return data immediately, even if that data isn't the most current copy.</span></span> <span data-ttu-id="4f0c7-336">A última opção permite maior disponibilidade, maior escala e melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-336">The latter option enables higher availability, greater scale, and increased performance.</span></span>

<span data-ttu-id="4f0c7-337">O Azure Cosmos DB oferece cinco modelos de [consistência](https://docs.microsoft.com/azure/cosmos-db/consistency-levels) bem definidos mostrados na Figura 5-15.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-337">Azure Cosmos DB offers five well-defined [consistency models](https://docs.microsoft.com/azure/cosmos-db/consistency-levels) shown in Figure 5-15.</span></span>

![Cosmos DB grafo de consistência](./media/cosmos-consistency-level-graph.png)

<span data-ttu-id="4f0c7-339">**Figura 5-15**: níveis de consistência de Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="4f0c7-339">**Figure 5-15**: Cosmos DB Consistency Levels</span></span>

 <span data-ttu-id="4f0c7-340">Essas opções permitem que você faça opções precisas e compensações granulares para consistência, disponibilidade e desempenho para seus dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-340">These options enable you to make precise choices and granular tradeoffs for consistency, availability, and the performance for your data.</span></span> <span data-ttu-id="4f0c7-341">A Figura 5-16 descreve cada nível.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-341">Figure 5-16 describes each level.</span></span>

![Níveis de consistência do Cosmos DB](./media/cosmos-db-consistency-levels.png)

<span data-ttu-id="4f0c7-343">**Figura 5-16**: Cosmos DB descrição do nível de consistência</span><span class="sxs-lookup"><span data-stu-id="4f0c7-343">**Figure 5-16**: Cosmos DB Consistency Level Description</span></span>

<span data-ttu-id="4f0c7-344">No artigo que está nos [deparando com o 9-Ball: Cosmos DB níveis de consistência explicados](https://blog.jeremylikness.com/blog/2018-03-23_getting-behind-the-9ball-cosmosdb-consistency-levels/), o gerente de programas da Microsoft Jeremy Likness fornece uma excelente explicação dos cinco modelos.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-344">In the article [Getting Behind the 9-Ball: Cosmos DB Consistency Levels Explained](https://blog.jeremylikness.com/blog/2018-03-23_getting-behind-the-9ball-cosmosdb-consistency-levels/), Microsoft Program Manager Jeremy Likness provides an excellent explanation of the five models.</span></span>

### <a name="partitioning"></a><span data-ttu-id="4f0c7-345">Particionamento</span><span class="sxs-lookup"><span data-stu-id="4f0c7-345">Partitioning</span></span>

<span data-ttu-id="4f0c7-346">O Azure Cosmos DB adota o [particionamento](https://docs.microsoft.com/azure/cosmos-db/partitioning-overview) automático para dimensionar um banco de dados para atender às necessidades de desempenho de seus serviços nativos de nuvem.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-346">Azure Cosmos DB embraces automatic [partitioning](https://docs.microsoft.com/azure/cosmos-db/partitioning-overview) to scale a database to meet the performance needs of your cloud-native services.</span></span>

<span data-ttu-id="4f0c7-347">Você gerencia os dados em Cosmos DB dados criando, contêineres e bancos de dado.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-347">You manage data in Cosmos DB data by creating databases, containers, and items.</span></span>

<span data-ttu-id="4f0c7-348">Os contêineres residem em um banco de dados Cosmos DB e representam um agrupamento independente de esquema de itens.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-348">Containers live in a Cosmos DB database and represent a schema-agnostic grouping of items.</span></span> <span data-ttu-id="4f0c7-349">Os itens são os dados que você adiciona ao contêiner.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-349">Items are the data that you add to the container.</span></span> <span data-ttu-id="4f0c7-350">Eles são representados como documentos, linhas, nós ou bordas.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-350">They're represented as documents, rows, nodes, or edges.</span></span> <span data-ttu-id="4f0c7-351">Todos os itens adicionados a um contêiner são indexados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-351">All items added to a container are automatically indexed.</span></span>

<span data-ttu-id="4f0c7-352">Para particionar o contêiner, os itens são divididos em subconjuntos distintos chamados partições lógicas.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-352">To partition the container, items are divided into distinct subsets called logical partitions.</span></span> <span data-ttu-id="4f0c7-353">As partições lógicas são preenchidas com base no valor de uma chave de partição associada a cada item em um contêiner.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-353">Logical partitions are populated based on the value of a partition key that is associated with each item in a container.</span></span> <span data-ttu-id="4f0c7-354">A Figura 5-18 mostra dois contêineres cada um com uma partição lógica com base em um valor de chave de partição.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-354">Figure 5-18 shows two containers each with a logical partition based on a partition key value.</span></span>

![Mecânica de particionamento de Cosmos DB](./media/cosmos-db-partitioning.png)

<span data-ttu-id="4f0c7-356">**Figura 5-18**: Cosmos dB a mecânica de particionamento</span><span class="sxs-lookup"><span data-stu-id="4f0c7-356">**Figure 5-18**: Cosmos DB partitioning mechanics</span></span>

<span data-ttu-id="4f0c7-357">Observe na figura anterior como cada item inclui uma chave de partição de ' City ' ou ' Airport '.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-357">Note in the  previous figure how each item includes a partition key of either ‘city’ or ‘airport’.</span></span> <span data-ttu-id="4f0c7-358">A chave determina a partição lógica do item.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-358">The key determines the item’s logical partition.</span></span> <span data-ttu-id="4f0c7-359">Os itens com um código de cidade são atribuídos ao contêiner à esquerda e os itens com um código de aeroporto, para o contêiner à direita.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-359">Items with a city code are assigned to the container on the left, and items with an airport code, to the container on the right.</span></span> <span data-ttu-id="4f0c7-360">A combinação do valor da chave de partição com o valor de ID cria um índice de item, que identifica exclusivamente o item.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-360">Combining the partition key value with the ID value creates an item's index, which uniquely identifies the item.</span></span>

<span data-ttu-id="4f0c7-361">Internamente, Cosmos DB gerencia automaticamente o posicionamento de [partições lógicas](https://docs.microsoft.com/azure/cosmos-db/partition-data) em partições físicas para atender às necessidades de escalabilidade e desempenho do contêiner.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-361">Internally, Cosmos DB automatically manages the placement of [logical partitions](https://docs.microsoft.com/azure/cosmos-db/partition-data) on physical partitions to satisfy the scalability and performance needs of the container.</span></span> <span data-ttu-id="4f0c7-362">À medida que os requisitos de armazenamento e de taxa de transferência do aplicativo aumentam, Azure Cosmos DB redistribui partições lógicas em um número maior de servidores.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-362">As application throughput and storage requirements  increase, Azure Cosmos DB redistributes logical partitions across a greater number of servers.</span></span> <span data-ttu-id="4f0c7-363">As operações de redistribuição são gerenciadas pelo Cosmos DB e invocadas sem interrupção ou tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-363">Redistribution operations are managed by Cosmos DB and invoked without interruption or downtime.</span></span>

## <a name="newsql-databases"></a><span data-ttu-id="4f0c7-364">Bancos de dados NewSQL</span><span class="sxs-lookup"><span data-stu-id="4f0c7-364">NewSQL databases</span></span>

<span data-ttu-id="4f0c7-365">*O NewSQL* é uma tecnologia de banco de dados emergente que combina a escalabilidade distribuída do NoSQL com as garantias acid de um banco de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-365">*NewSQL* is an emerging database technology that combines the distributed scalability of NoSQL with the ACID guarantees of a relational database.</span></span> <span data-ttu-id="4f0c7-366">Os bancos de dados NewSQL são importantes para sistemas de negócios que devem processar altos volumes de data, em ambientes distribuídos, com suporte total transacional e conformidade com ACID.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-366">NewSQL databases are important for business systems that must process high-volumes of data, across distributed environments, with full transactional support and ACID compliance.</span></span> <span data-ttu-id="4f0c7-367">Enquanto um banco de dados NoSQL pode fornecer grande escalabilidade, ele não garante a consistência dos dados.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-367">While a NoSQL database can provide massive scalability, it does not guarantee data consistency.</span></span> <span data-ttu-id="4f0c7-368">Problemas intermitentes de dados inconsistentes podem fazer uma sobrecarga na equipe de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-368">Intermittent problems from inconsistent data can place a burden on the development team.</span></span> <span data-ttu-id="4f0c7-369">Os desenvolvedores devem construir proteções em seu código de microserviço para gerenciar problemas causados por dados inconsistentes.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-369">Developers must construct safeguards into their microservice code to manage problems caused by inconsistent data.</span></span>

<span data-ttu-id="4f0c7-370">A CNCF (nuvem Native Computing Foundation) apresenta vários projetos de banco de dados NewSQL.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-370">The Cloud Native Computing Foundation (CNCF) features several NewSQL database projects.</span></span>

| <span data-ttu-id="4f0c7-371">Projeto</span><span class="sxs-lookup"><span data-stu-id="4f0c7-371">Project</span></span> | <span data-ttu-id="4f0c7-372">Características</span><span class="sxs-lookup"><span data-stu-id="4f0c7-372">Characteristics</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="4f0c7-373">Cockroach DB</span><span class="sxs-lookup"><span data-stu-id="4f0c7-373">Cockroach DB</span></span> |<span data-ttu-id="4f0c7-374">Um banco de dados relacional em conformidade com ACID que é dimensionado globalmente.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-374">An ACID compliant, relational database that scales globally.</span></span> <span data-ttu-id="4f0c7-375">Adicionar um novo nó a um cluster e o CockroachDB cuida do balanceamento dos dados entre instâncias e geografias.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-375">Add a new node to a cluster and CockroachDB takes care of balancing the data across instances and geographies.</span></span> <span data-ttu-id="4f0c7-376">Ele cria, gerencia e distribui réplicas para garantir a confiabilidade.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-376">It creates, manages and distributes replicas to ensure reliability.</span></span> <span data-ttu-id="4f0c7-377">Ele é de código-fonte aberto e disponível gratuitamente.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-377">It’s open source and freely available.</span></span>  |
| <span data-ttu-id="4f0c7-378">TiDB</span><span class="sxs-lookup"><span data-stu-id="4f0c7-378">TiDB</span></span> | <span data-ttu-id="4f0c7-379">Um banco de dados de software livre que dá suporte a cargas de trabalho de processamento analítico e transacional híbrido (HTAP).</span><span class="sxs-lookup"><span data-stu-id="4f0c7-379">An open-source database that supports Hybrid Transactional and Analytical Processing (HTAP) workloads.</span></span> <span data-ttu-id="4f0c7-380">Ele é compatível com MySQL e apresenta escalabilidade horizontal, consistência forte e alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-380">It is MySQL-compatible and features horizontal scalability, strong consistency, and high availability.</span></span>  <span data-ttu-id="4f0c7-381">TiDB atua como um servidor MySQL.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-381">TiDB acts like a MySQL server.</span></span> <span data-ttu-id="4f0c7-382">Você pode continuar a usar bibliotecas de cliente MySQL existentes, sem a necessidade de alterações de código abrangentes em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-382">You can continue to use existing MySQL client libraries, without requiring extensive code changes to your application.</span></span> |
| <span data-ttu-id="4f0c7-383">YugabyteDB</span><span class="sxs-lookup"><span data-stu-id="4f0c7-383">YugabyteDB</span></span> | <span data-ttu-id="4f0c7-384">Um banco de dados SQL distribuído de código aberto, de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-384">An open source, high-performance, distributed SQL database.</span></span> <span data-ttu-id="4f0c7-385">Ele dá suporte à baixa latência de consulta, resiliência contra falhas e distribuição de dados global.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-385">It supports low query latency, resilience against failures, and global data distribution.</span></span> <span data-ttu-id="4f0c7-386">YugabyteDB é compatível com PostgressSQL e manipula as cargas de trabalho OLTP de expansão e dimensionamento da Internet.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-386">YugabyteDB is PostgressSQL-compatible and handles scale-out RDBMS and internet-scale OLTP workloads.</span></span> <span data-ttu-id="4f0c7-387">O produto também oferece suporte a NoSQL e é compatível com Cassandra.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-387">The product also support NoSQL and is compatible with Cassandra.</span></span> |
|<span data-ttu-id="4f0c7-388">Vitess</span><span class="sxs-lookup"><span data-stu-id="4f0c7-388">Vitess</span></span> | <span data-ttu-id="4f0c7-389">Vitess é uma solução de banco de dados para implantação, dimensionamento e gerenciamento de clusters grandes de instâncias do MySQL.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-389">Vitess is a database solution for deploying, scaling and managing large clusters of MySQL instances.</span></span> <span data-ttu-id="4f0c7-390">Ele pode ser executado em uma arquitetura de nuvem pública ou privada.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-390">It’s can run in a public or private cloud architecture.</span></span> <span data-ttu-id="4f0c7-391">Ele combina e estende vários recursos importantes do MySQL e recursos que dão suporte a fragmentação vertical e horizontal.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-391">It combines and extends many important MySQL features and features both vertical and horizontal sharding support.</span></span> <span data-ttu-id="4f0c7-392">Originado pelo YouTube, o Vitess tem disponibilizado todo o tráfego de banco de dados do YouTube desde 2011.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-392">Originated by YouTube, Vitess has been serving all YouTube database traffic since 2011 .</span></span> |

<span data-ttu-id="4f0c7-393">Os projetos de código-fonte aberto na figura anterior estão disponíveis na base computação nativa de nuvem.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-393">The open-source projects in the previous figure are available from the Cloud Native Computing Foundation.</span></span> <span data-ttu-id="4f0c7-394">Três das ofertas são produtos de banco de dados completos, que incluem o suporte do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-394">Three of the offerings are full database products, which include .NET Core support.</span></span> <span data-ttu-id="4f0c7-395">O outro, Vitess, é um sistema de clustering de banco de dados que dimensiona horizontalmente grandes clusters de instâncias do MySQL.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-395">The other, Vitess, is a database clustering system that horizontally scales large clusters of MySQL instances.</span></span>

<span data-ttu-id="4f0c7-396">Um dos principais objetivos de design dos bancos de dados NewSQL é trabalhar nativamente no kubernetes, aproveitando a resiliência e a escalabilidade da plataforma.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-396">A key design goal for NewSQL databases is to work natively in Kubernetes, taking advantage of the platform's resiliency and scalability.</span></span>

<span data-ttu-id="4f0c7-397">Os bancos de dados NewSQL são projetados para prosperar em ambientes de nuvem efêmeras em que as máquinas virtuais subjacentes podem ser reiniciadas ou reagendadas no momento do aviso.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-397">NewSQL databases are designed to thrive in ephemeral cloud environments where underlying virtual machines can be restarted or rescheduled at a moment’s notice.</span></span> <span data-ttu-id="4f0c7-398">Os bancos de dados são projetados para sobreviver a falhas de nó sem perda de dados nem tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-398">The databases are designed to survive node failures without data loss nor downtime.</span></span> <span data-ttu-id="4f0c7-399">CockroachDB, por exemplo, é capaz de sobreviver a uma perda de máquina mantendo três réplicas consistentes de quaisquer dados em todos os nós em um cluster.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-399">CockroachDB, for example, is able to survive a machine loss by maintaining three consistent replicas of any data across the nodes in a cluster.</span></span>

<span data-ttu-id="4f0c7-400">O kubernetes usa uma *construção de serviços* para permitir que um cliente resolva um grupo de processos de bancos de dados NewSQL idênticos de uma única entrada DNS.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-400">Kubernetes uses a *Services construct* to allow a client to address a group of identical NewSQL databases processes from a single DNS entry.</span></span> <span data-ttu-id="4f0c7-401">Ao desacoplar as instâncias de banco de dados do endereço do serviço ao qual ele está associado, podemos dimensionar sem interromper as instâncias existentes do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-401">By decoupling the database instances from the address of the service with which it's associated, we can scale without disrupting existing application instances.</span></span> <span data-ttu-id="4f0c7-402">O envio de uma solicitação para qualquer serviço em um determinado momento sempre produzirá o mesmo resultado.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-402">Sending a request to any service at a given time will always yield the same result.</span></span>

<span data-ttu-id="4f0c7-403">Nesse cenário, todas as instâncias de banco de dados são iguais.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-403">In this scenario, all database instances are equal.</span></span> <span data-ttu-id="4f0c7-404">Não há relações primárias ou secundárias.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-404">There are no primary or secondary relationships.</span></span> <span data-ttu-id="4f0c7-405">Técnicas como a *replicação de consenso* encontradas em CockroachDB permitem que qualquer nó de banco de dados manipule qualquer solicitação.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-405">Techniques like *consensus replication* found in CockroachDB allow any database node to handle any request.</span></span> <span data-ttu-id="4f0c7-406">Se o nó que recebe uma solicitação de balanceamento de carga tiver os dados necessários localmente, ele responderá imediatamente.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-406">If the node that receives a load-balanced request has the data it needs locally, it responds immediately.</span></span> <span data-ttu-id="4f0c7-407">Caso contrário, o nó se tornará um gateway e encaminhará a solicitação para os nós apropriados para obter a resposta correta.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-407">If not, the node becomes a gateway and forwards the request to the appropriate nodes to get the correct answer.</span></span> <span data-ttu-id="4f0c7-408">Da perspectiva do cliente, cada nó de banco de dados é o mesmo: eles aparecem como um único banco de dados *lógico* com garantias de consistência de um sistema de máquina única, apesar de ter dezenas ou até mesmo centenas de nós que estão trabalhando nos bastidores.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-408">From the client's perspective, every database node is the same: They appear as a single *logical* database with the consistency guarantees of a single-machine system, despite having dozens or even hundreds of nodes that are working behind the scenes.</span></span>

<span data-ttu-id="4f0c7-409">Para obter uma visão detalhada da mecânica por trás dos bancos de dados do NewSQL, confira o artigo [Dash: quatro propriedades do banco de dados kubernetes-Native](https://thenewstack.io/dash-four-properties-of-kubernetes-native-databases/) .</span><span class="sxs-lookup"><span data-stu-id="4f0c7-409">For a detailed look at the mechanics behind NewSQL databases, see the [DASH: Four Properties of Kubernetes-Native Databases](https://thenewstack.io/dash-four-properties-of-kubernetes-native-databases/) article.</span></span>

## <a name="data-migration-to-the-cloud"></a><span data-ttu-id="4f0c7-410">Migração de dados para a nuvem</span><span class="sxs-lookup"><span data-stu-id="4f0c7-410">Data migration to the cloud</span></span>

<span data-ttu-id="4f0c7-411">Uma das tarefas mais demoradas é migrar dados de uma plataforma de dados para outra.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-411">One of the more time-consuming tasks is migrating data from one data platform to another.</span></span> <span data-ttu-id="4f0c7-412">O [serviço de migração de dados do Azure](https://azure.microsoft.com/services/database-migration/) pode ajudar a agilizar esses esforços.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-412">The [Azure Data Migration Service](https://azure.microsoft.com/services/database-migration/) can help expedite such efforts.</span></span> <span data-ttu-id="4f0c7-413">Ele pode migrar dados de várias fontes de banco de dados externas para as plataformas do Azure data com tempo de inatividade mínimo.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-413">It can migrate data from several external database sources into Azure Data platforms with minimal downtime.</span></span> <span data-ttu-id="4f0c7-414">As plataformas de destino incluem os seguintes serviços:</span><span class="sxs-lookup"><span data-stu-id="4f0c7-414">Target platforms include the following services:</span></span>

- <span data-ttu-id="4f0c7-415">Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="4f0c7-415">Azure SQL Database</span></span>
- <span data-ttu-id="4f0c7-416">Banco de Dados do Azure para MySQL</span><span class="sxs-lookup"><span data-stu-id="4f0c7-416">Azure Database for MySQL</span></span>
- <span data-ttu-id="4f0c7-417">Banco de Dados do Azure para MariaDB</span><span class="sxs-lookup"><span data-stu-id="4f0c7-417">Azure Database for MariaDB</span></span>
- <span data-ttu-id="4f0c7-418">Banco de Dados do Azure para PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="4f0c7-418">Azure Database for PostgreSQL</span></span>
- <span data-ttu-id="4f0c7-419">CosmosDB</span><span class="sxs-lookup"><span data-stu-id="4f0c7-419">CosmosDB</span></span>
  
<span data-ttu-id="4f0c7-420">O serviço fornece recomendações para orientá-lo pelas alterações necessárias para executar uma migração, pequena ou grande.</span><span class="sxs-lookup"><span data-stu-id="4f0c7-420">The service provides recommendations to guide you through the changes required to execute a migration, both small or large.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="4f0c7-421">[Anterior](distributed-data.md)
>[próximo](azure-caching.md)</span><span class="sxs-lookup"><span data-stu-id="4f0c7-421">[Previous](distributed-data.md)
[Next](azure-caching.md)</span></span>
