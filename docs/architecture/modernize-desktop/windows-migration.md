---
title: Migração do Windows 10
description: Aprofunde-se nos recursos do Windows 10, como empacotamento e ilhas XAML.
ms.date: 09/16/2019
ms.openlocfilehash: cd17088b086a32fd3bb37e617d3a1047acedde0e
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/15/2020
ms.locfileid: "83423204"
---
# <a name="windows-10-migration"></a><span data-ttu-id="27865-103">Migração do Windows 10</span><span class="sxs-lookup"><span data-stu-id="27865-103">Windows 10 migration</span></span>

<span data-ttu-id="27865-104">Considere a seguinte situação: você tem um aplicativo de área de trabalho de trabalho que foi desenvolvido nos dias do Windows 7.</span><span class="sxs-lookup"><span data-stu-id="27865-104">Consider the following situation: You have a working desktop application that was developed in the Windows 7 days.</span></span> <span data-ttu-id="27865-105">Ele está usando a tecnologia do WPF disponível nesse momento e funcionando bem, mas tem uma interface do usuário desatualizada e comportamentos ao executá-lo no Windows 10.</span><span class="sxs-lookup"><span data-stu-id="27865-105">It's using WPF technology available at that time and working fine but it has an outdated UI and behaviors when you run it on Windows 10.</span></span> <span data-ttu-id="27865-106">É como quando você observa um filme do fractais como a matriz e vê neo usando o dispositivo Nokia 8110.</span><span class="sxs-lookup"><span data-stu-id="27865-106">It is like when you watch a futuristic movie like Matrix and you see Neo using the Nokia 8110 device.</span></span> <span data-ttu-id="27865-107">O filme funciona muito bem após 20 anos, mas se beneficiaria da modernização de um dispositivo.</span><span class="sxs-lookup"><span data-stu-id="27865-107">The film works great after 20 years but it would rather benefit from a device modernization.</span></span>

<span data-ttu-id="27865-108">Com o lançamento do Windows 10, a Microsoft introduziu muitas inovações para oferecer suporte a cenários como tablets e dispositivos de toque e para fornecer a melhor experiência para os usuários de um sistema operacional da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="27865-108">With the release of Windows 10, Microsoft introduced many innovations to support scenarios like tablets and touch devices and to provide the best experience for users for a Microsoft operating system ever.</span></span> <span data-ttu-id="27865-109">Por exemplo, você pode:</span><span class="sxs-lookup"><span data-stu-id="27865-109">For example, you can:</span></span>

- <span data-ttu-id="27865-110">Entre com seu rosto usando o Windows Hello.</span><span class="sxs-lookup"><span data-stu-id="27865-110">Sign in with your face using Windows Hello.</span></span>
- <span data-ttu-id="27865-111">Use uma caneta para desenhar ou escrever texto que seja automaticamente reconhecido e digital.</span><span class="sxs-lookup"><span data-stu-id="27865-111">Use a pen to draw or handwrite text that is automatically recognized and digitalized.</span></span>
- <span data-ttu-id="27865-112">Execute modelos de ia personalizados localmente criados na nuvem usando o WinML.</span><span class="sxs-lookup"><span data-stu-id="27865-112">Run locally customized AI models built on the cloud using WinML.</span></span>

<span data-ttu-id="27865-113">Todos esses recursos estão habilitados para desenvolvedores do Windows por meio de bibliotecas do Windows Runtime (WinRT).</span><span class="sxs-lookup"><span data-stu-id="27865-113">All these features are enabled for Windows developers through Windows Runtime (WinRT) libraries.</span></span> <span data-ttu-id="27865-114">Você pode aproveitar esses recursos em seus aplicativos de área de trabalho existentes porque as bibliotecas também são expostas ao .NET Framework e ao .NET Core.</span><span class="sxs-lookup"><span data-stu-id="27865-114">You can take advantage of these features in your existing desktop apps because the libraries are exposed to both the .NET Framework and .NET Core as well.</span></span> <span data-ttu-id="27865-115">Você pode até modernizar sua interface do usuário com o uso de ilhas XAML e melhorar os visuais e o comportamento de seus aplicativos de acordo com os horários.</span><span class="sxs-lookup"><span data-stu-id="27865-115">You can even modernize your UI with the use of XAML Islands and improve the visuals and behavior of your apps according to the times.</span></span>

<span data-ttu-id="27865-116">Uma coisa importante a ser observada aqui é que você não precisa abandonar .NET Framework tecnologia para seguir esse caminho de modernização.</span><span class="sxs-lookup"><span data-stu-id="27865-116">One important thing to note here is that you don't need to abandon .NET Framework technology to follow this modernization path.</span></span> <span data-ttu-id="27865-117">Você pode permanecer lá com segurança e ter todos os benefícios do Windows 10 sem a pressão de migrar para o .NET Core.</span><span class="sxs-lookup"><span data-stu-id="27865-117">You can safely stay on there and have all the benefits of Windows 10 without the pressure to migrate to .NET Core.</span></span> <span data-ttu-id="27865-118">Portanto, você obtém tanto o poder quanto a flexibilidade para escolher o caminho de modernização.</span><span class="sxs-lookup"><span data-stu-id="27865-118">So, you get both the power and the flexibility to choose your modernization path.</span></span>

## <a name="winrt-apis"></a><span data-ttu-id="27865-119">APIs do WinRT</span><span class="sxs-lookup"><span data-stu-id="27865-119">WinRT APIs</span></span>

<span data-ttu-id="27865-120">As APIs do WinRT são interfaces de programação de aplicativo (APIs) orientadas a objeto e bem estruturadas que oferecem aos desenvolvedores do Windows 10 acesso a tudo o que o sistema operacional tem a oferecer.</span><span class="sxs-lookup"><span data-stu-id="27865-120">WinRT APIs are object-oriented, well-structured application programming interfaces (APIs) that give Windows 10 developers access to everything the operating system has to offer.</span></span> <span data-ttu-id="27865-121">Por meio de APIs do WinRT, você pode integrar funcionalidades como notificações por push, APIs de dispositivo, Microsoft Ink e WinML, entre outras em seus aplicativos de área de trabalho.</span><span class="sxs-lookup"><span data-stu-id="27865-121">Through WinRT APIs, you can integrate functionalities like Push Notifications, Device APIs, Microsoft Ink, and WinML, among others on your desktop apps.</span></span>

<span data-ttu-id="27865-122">Em geral, as APIs do WinRT podem ser chamadas de um aplicativo de área de trabalho clássico.</span><span class="sxs-lookup"><span data-stu-id="27865-122">In general, WinRT APIs can be called from a classic desktop app.</span></span> <span data-ttu-id="27865-123">No entanto, duas áreas principais apresentam uma exceção a essa regra:</span><span class="sxs-lookup"><span data-stu-id="27865-123">However, two main areas present an exception to this rule:</span></span>

* <span data-ttu-id="27865-124">APIs que exigem uma identidade de pacote.</span><span class="sxs-lookup"><span data-stu-id="27865-124">APIs that require a package identity.</span></span>
* <span data-ttu-id="27865-125">APIs que exigem visualização como XAML ou composição.</span><span class="sxs-lookup"><span data-stu-id="27865-125">APIs that require visualization like XAML or Composition.</span></span>

### <a name="universal-windows-platform-uwp-packages"></a><span data-ttu-id="27865-126">Pacotes Plataforma Universal do Windows (UWP)</span><span class="sxs-lookup"><span data-stu-id="27865-126">Universal Windows Platform (UWP) packages</span></span>

#### <a name="application-package-identity"></a><span data-ttu-id="27865-127">Identidade do pacote de aplicativos</span><span class="sxs-lookup"><span data-stu-id="27865-127">Application Package Identity</span></span>

<span data-ttu-id="27865-128">Os aplicativos UWP têm um sistema de implantação em que o sistema operacional gerencia a instalação e a desinstalação do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="27865-128">UWP apps have a deployment system where the OS manages the installation and uninstallation of application.</span></span> <span data-ttu-id="27865-129">Isso requer que a instalação seja declarativa, o que significa que nenhum código de usuário é executado durante a instalação.</span><span class="sxs-lookup"><span data-stu-id="27865-129">That requires the installation to be declarative, meaning that no user code is executed during install.</span></span> <span data-ttu-id="27865-130">Em vez disso, tudo o que o aplicativo deseja integrar ao sistema, como protocolos, tipos de arquivo e extensões, é declarado no manifesto do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="27865-130">Instead, everything the app wants to integrate with the system, such as protocols, file types, and extensions, is declared in the application manifest.</span></span> <span data-ttu-id="27865-131">No momento da implantação, o pipeline de implantação configura esses pontos de integração.</span><span class="sxs-lookup"><span data-stu-id="27865-131">At deployment time, the deployment pipeline configures those integration points.</span></span> <span data-ttu-id="27865-132">A única maneira de o sistema operacional gerenciar toda essa funcionalidade e controlar isso é que cada ' pacote ' tem uma identidade, um identificador exclusivo para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="27865-132">The only way for the OS to manage all this functionality and keep track of it is for each 'package' to have an identity, a unique identifier for the application.</span></span>

<span data-ttu-id="27865-133">Algumas APIs do WinRT exigem que essa identidade do pacote funcione conforme o esperado.</span><span class="sxs-lookup"><span data-stu-id="27865-133">Some WinRT APIs require this package identity to work as expected.</span></span> <span data-ttu-id="27865-134">No entanto, os aplicativos de área de trabalho clássicas, como aplicativos nativos C++ ou .NET, usam diferentes sistemas de implantação que não exigem uma identidade de pacote.</span><span class="sxs-lookup"><span data-stu-id="27865-134">However, classic desktop apps like native C++ or .NET apps, use different deployment systems that don't require a package identity.</span></span> <span data-ttu-id="27865-135">Se você quiser usar essas APIs do WinRT em seu aplicativo de área de trabalho, será necessário fornecer uma identidade de pacote.</span><span class="sxs-lookup"><span data-stu-id="27865-135">If you want to use these WinRT APIs in your desktop application, you need to provide them a package identity.</span></span>

<span data-ttu-id="27865-136">Uma maneira de proceder é criar um projeto de empacotamento adicional.</span><span class="sxs-lookup"><span data-stu-id="27865-136">One way to proceed is to build an additional packaging project.</span></span> <span data-ttu-id="27865-137">Dentro do projeto de empacotamento, você aponta para o projeto de código-fonte original e especifica as informações de identidade que deseja fornecer.</span><span class="sxs-lookup"><span data-stu-id="27865-137">Inside the packaging project, you point to the original source code project and specify the Identity information you want to provide.</span></span><span data-ttu-id="27865-138">Se você instalar o pacote e executar o aplicativo instalado, ele receberá automaticamente uma identificação, permitindo que seu código chame todas as APIs do WinRT que exigem identidade.</span><span class="sxs-lookup"><span data-stu-id="27865-138"> If you install the package and run the installed app, it will automatically get an identify enabling your code to call all WinRT APIs requiring Identity.</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<Package xmlns="http://schemas.microsoft.com/appx/manifest/foundation/windows10"
         xmlns:uap="http://schemas.microsoft.com/appx/manifest/uap/windows10">
    <Identity Name="YOUR-APP-GUID "
              Publisher="CN=YOUR COMPANY"
              Version="1.x.x.x" />
</Package>
```

<span data-ttu-id="27865-139">Você pode verificar quais APIs precisam de uma identidade de aplicativo empacotado inspecionando se o tipo que contém a API está marcado com o atributo [DualApiPartition](xref:Windows.Foundation.Metadata.DualApiPartitionAttribute) .</span><span class="sxs-lookup"><span data-stu-id="27865-139">You can check which APIs need a packaged application identity by inspecting if the type that contains the API is marked with the [DualApiPartition](xref:Windows.Foundation.Metadata.DualApiPartitionAttribute) attribute.</span></span><span data-ttu-id="27865-140">Se for, você poderá chamar If de um aplicativo de área de trabalho tradicional não empacotado.</span><span class="sxs-lookup"><span data-stu-id="27865-140"> If it is, you can call if from an unpackaged traditional desktop app.</span></span> <span data-ttu-id="27865-141">Caso contrário, você deve converter seu aplicativo de área de trabalho clássico em um UWP com a ajuda de um projeto de empacotamento.</span><span class="sxs-lookup"><span data-stu-id="27865-141">Otherwise, you must convert your classic desktop app to a UWP with the help of a packaging project.</span></span>

<https://docs.microsoft.com/windows/desktop/apiindex/uwp-apis-callable-from-a-classic-desktop-app>

#### <a name="benefits-of-packaging"></a><span data-ttu-id="27865-142">Benefícios do empacotamento</span><span class="sxs-lookup"><span data-stu-id="27865-142">Benefits of packaging</span></span>

<span data-ttu-id="27865-143">Além de fornecer acesso a essas APIs, você obtém alguns benefícios adicionais ao criar um pacote de aplicativos do Windows para seu aplicativo de área de trabalho, incluindo:</span><span class="sxs-lookup"><span data-stu-id="27865-143">Besides giving you access to these APIs, you get some additional benefits by creating a Windows App package for your desktop application including:</span></span>

* <span data-ttu-id="27865-144">**Implantação simplificada**.</span><span class="sxs-lookup"><span data-stu-id="27865-144">**Streamlined deployment**.</span></span> <span data-ttu-id="27865-145">Os aplicativos têm uma ótima experiência de implantação, garantindo que os usuários possam instalar e atualizar um aplicativo com segurança.</span><span class="sxs-lookup"><span data-stu-id="27865-145">Apps have a great deployment experience ensuring that users can confidently install an application and update it.</span></span> <span data-ttu-id="27865-146">Se um usuário optar por desinstalar o aplicativo, ele será removido completamente sem nenhum rastreamento para evitar o problema de corrompidos do Windows.</span><span class="sxs-lookup"><span data-stu-id="27865-146">If a user chooses to uninstall the app, it's removed completely with no trace left behind preventing the Windows rot problem.</span></span>

* <span data-ttu-id="27865-147">**Atualizações automáticas e licenciamento**.</span><span class="sxs-lookup"><span data-stu-id="27865-147">**Automatic updates and licensing**.</span></span> <span data-ttu-id="27865-148">Seu aplicativo pode participar do licenciamento interno do Microsoft Store e dos recursos de atualização automática.</span><span class="sxs-lookup"><span data-stu-id="27865-148">Your application can participate in the Microsoft Store's built-in licensing and automatic update facilities.</span></span> <span data-ttu-id="27865-149">A atualização automática é um mecanismo altamente confiável e eficiente, pois somente as partes alteradas dos arquivos são baixadas.</span><span class="sxs-lookup"><span data-stu-id="27865-149">Automatic update is a highly reliable and efficient mechanism, because only the changed parts of files are downloaded.</span></span>

* <span data-ttu-id="27865-150">**Maior alcance e monetização simplificada**.</span><span class="sxs-lookup"><span data-stu-id="27865-150">**Increased reach and simplified monetization**.</span></span> <span data-ttu-id="27865-151">Talvez não seja seu caso, mas se você optar por distribuir seu aplicativo por meio do Microsoft Store você alcançar milhões de usuários do Windows 10.</span><span class="sxs-lookup"><span data-stu-id="27865-151">Maybe not your case but if you choose to distribute your application through the Microsoft Store you reach millions of Windows 10 users.</span></span>

* <span data-ttu-id="27865-152">**Adicione recursos UWP**.</span><span class="sxs-lookup"><span data-stu-id="27865-152">**Add UWP features**.</span></span> <span data-ttu-id="27865-153">Você pode adicionar recursos UWP ao pacote do seu aplicativo em seu próprio ritmo.</span><span class="sxs-lookup"><span data-stu-id="27865-153">You can add UWP features to your app's package at your own pace.</span></span>

#### <a name="prepare-for-packaging"></a><span data-ttu-id="27865-154">Preparar para empacotamento</span><span class="sxs-lookup"><span data-stu-id="27865-154">Prepare for packaging</span></span>

<span data-ttu-id="27865-155">Antes de continuar a empacotar seu aplicativo de área de trabalho, há alguns pontos que você precisa abordar antes de iniciar o processo.</span><span class="sxs-lookup"><span data-stu-id="27865-155">Before proceeding to package your desktop application, there are some points you have to address before starting the process.</span></span> <span data-ttu-id="27865-156">Seu aplicativo deve respeitar qualquer uma das regras e políticas de Microsoft Store e executar no modelo de aplicativo UWP.</span><span class="sxs-lookup"><span data-stu-id="27865-156">Your application must respect any of the Microsoft Store rules and policies and run in the UWP application model.</span></span> <span data-ttu-id="27865-157">Por exemplo, ele precisa ser executado no .NET Framework 4.6.2 ou posterior e grava no `HKEY_CURRENT_USER` hive do registro e as pastas AppData serão virtualizadas para um local de aplicativo específico do usuário.</span><span class="sxs-lookup"><span data-stu-id="27865-157">For example, it has to run on the .NET Framework 4.6.2 or later and writes to the `HKEY_CURRENT_USER` registry hive and the AppData folders will be virtualized to a user-specific app-local location.</span></span>

<span data-ttu-id="27865-158">A meta de design para empacotamento é separar o estado do aplicativo do estado do sistema enquanto mantém a compatibilidade com outros aplicativos.</span><span class="sxs-lookup"><span data-stu-id="27865-158">The design goal for packaging is to separate the application state from system state while maintaining compatibility with other apps.</span></span> <span data-ttu-id="27865-159">O Windows 10 realiza esse objetivo colocando o aplicativo dentro de um pacote UWP.</span><span class="sxs-lookup"><span data-stu-id="27865-159">Windows 10 accomplishes this goal by placing the application inside a UWP package.</span></span> <span data-ttu-id="27865-160">Ele detecta e redireciona algumas alterações no sistema de arquivos e no registro em tempo de execução para atender à promessa de um comportamento de instalação e desinstalação confiável e limpo de um aplicativo fornecido pelo empacotamento.</span><span class="sxs-lookup"><span data-stu-id="27865-160">It detects and redirects some changes to the file system and registry at run time to fulfill the promise of a trusted and clean install and uninstall behavior of an application provided by packaging.</span></span>

<span data-ttu-id="27865-161">Os pacotes que você cria para seu aplicativo de área de trabalho são aplicativos somente de área de trabalho, confiança total que não estão na área restrita, embora haja uma virtualização leve aplicada ao aplicativo para gravações em `HKCU` e `AppData` .</span><span class="sxs-lookup"><span data-stu-id="27865-161">Packages that you create for your desktop application are desktop-only, full-trust applications that aren't sandboxed, although there's lightweight virtualization applied to the app for writes to `HKCU` and `AppData`.</span></span> <span data-ttu-id="27865-162">Essa virtualização permite que eles interajam com outros aplicativos da mesma forma que os aplicativos de área de trabalho clássicos.</span><span class="sxs-lookup"><span data-stu-id="27865-162">This virtualization allows them to interact with other apps the same way classic desktop applications do.</span></span>

##### <a name="installation"></a><span data-ttu-id="27865-163">Instalação</span><span class="sxs-lookup"><span data-stu-id="27865-163">Installation</span></span>

<span data-ttu-id="27865-164">Os pacotes de aplicativos são instalados em *% ProgramFiles% \\ WindowsApps \\ package_name*, com o executável intitulado  `app_name.exe` .</span><span class="sxs-lookup"><span data-stu-id="27865-164">App packages are installed under *%ProgramFiles%\\WindowsApps\\package_name*, with the executable titled `app_name.exe`.</span></span> <span data-ttu-id="27865-165">Cada pasta de pacote contém um manifesto (chamado `AppxManifest.xml` ) que contém um namespace XML especial para aplicativos empacotados.</span><span class="sxs-lookup"><span data-stu-id="27865-165">Each package folder contains a manifest (named `AppxManifest.xml`) that contains a special XML namespace for packaged apps.</span></span> <span data-ttu-id="27865-166">Dentro desse arquivo de manifesto, há um  `<EntryPoint>`   elemento que faz referência ao aplicativo de confiança total.</span><span class="sxs-lookup"><span data-stu-id="27865-166">Inside that manifest file is an `<EntryPoint>` element, which references the full-trust app.</span></span> <span data-ttu-id="27865-167">Quando esse aplicativo é iniciado, ele não é executado dentro de um contêiner de aplicativo, mas, em vez disso, ele é executado como o usuário normalmente.</span><span class="sxs-lookup"><span data-stu-id="27865-167">When that application is launched, it doesn't run inside an app container, but instead it runs as the user as it normally would.</span></span>

<span data-ttu-id="27865-168">Depois da implantação, os arquivos do pacote serão marcados como somente leitura e totalmente bloqueados pelo sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="27865-168">After deployment, package files are marked read-only and heavily locked down by the operating system.</span></span> <span data-ttu-id="27865-169">O Windows evitará a inicialização dos aplicativos se esses arquivos forem adulterados.</span><span class="sxs-lookup"><span data-stu-id="27865-169">Windows prevents apps from launching if these files are tampered with.</span></span>

##### <a name="file-system"></a><span data-ttu-id="27865-170">Sistema de arquivos</span><span class="sxs-lookup"><span data-stu-id="27865-170">File system</span></span>

<span data-ttu-id="27865-171">O sistema operacional dá suporte a diferentes níveis de operações de sistema de arquivos para aplicativos de área de trabalho empacotados, dependendo do local da pasta.</span><span class="sxs-lookup"><span data-stu-id="27865-171">The OS supports different levels of file system operations for packaged desktop applications, depending on the folder location.</span></span>

<span data-ttu-id="27865-172">Ao tentar acessar a pasta *AppData* do usuário, o sistema cria uma localização privada por usuário por aplicativo nos bastidores.</span><span class="sxs-lookup"><span data-stu-id="27865-172">When trying to access the user's *AppData* folder, the system creates a private per-user, per-app location behind the scenes.</span></span> <span data-ttu-id="27865-173">Isso cria a ilusão de que o aplicativo empacotado está editando o verdadeiro *AppData* quando está realmente modificando uma cópia privada.</span><span class="sxs-lookup"><span data-stu-id="27865-173">This creates the illusion that the packaged application is editing the real *AppData* when it's actually modifying a private copy.</span></span> <span data-ttu-id="27865-174">Redirecionando gravações dessa maneira, o sistema pode acompanhar todas as modificações de arquivo feitas pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="27865-174">By redirecting writes this way, the system can track all file modifications made by the app.</span></span> <span data-ttu-id="27865-175">Em seguida, ele pode limpar todos esses arquivos ao desinstalar o sistema "corrompidos" e fornecer uma melhor experiência de remoção do aplicativo para o usuário.</span><span class="sxs-lookup"><span data-stu-id="27865-175">It can then clean all those files when uninstalling reducing system "rot" and providing a better application removal experience for the user.</span></span>

##### <a name="registry"></a><span data-ttu-id="27865-176">Registro</span><span class="sxs-lookup"><span data-stu-id="27865-176">Registry</span></span>

<span data-ttu-id="27865-177">Os pacotes de aplicativos contêm um arquivo Registry. dat, que serve como o equivalente lógico de  `HKLM\Software`   no registro real.</span><span class="sxs-lookup"><span data-stu-id="27865-177">App packages contain a registry.dat file, which serves as the logical equivalent of `HKLM\Software` in the real registry.</span></span> <span data-ttu-id="27865-178">Em tempo de execução, esse Registro virtual mescla o conteúdo desse hive ao hive do sistema nativo para oferecer uma visão singular de ambos.</span><span class="sxs-lookup"><span data-stu-id="27865-178">At runtime, this virtual registry merges the contents of this hive into the native system hive to provide a singular view of both.</span></span>

<span data-ttu-id="27865-179">Todas as gravações são mantidas durante a atualização do pacote e são excluídas somente quando o aplicativo é desinstalado.</span><span class="sxs-lookup"><span data-stu-id="27865-179">All writes are kept during package upgrade and only deleted when the application is uninstalled.</span></span>

##### <a name="uninstallation"></a><span data-ttu-id="27865-180">Desinstalação</span><span class="sxs-lookup"><span data-stu-id="27865-180">Uninstallation</span></span>

<span data-ttu-id="27865-181">Quando o usuário desinstala um pacote, todos os arquivos e pastas localizados em  `C:\Program Files\WindowsApps\package_name` são removidos, bem como quaisquer gravações redirecionadas para AppData ou o registro que foram capturados durante o processo.</span><span class="sxs-lookup"><span data-stu-id="27865-181">When the user uninstalls a package, all files and folders located under `C:\Program Files\WindowsApps\package_name` are removed, as well as any redirected writes to AppData or the registry that were captured during the process.</span></span>

<span data-ttu-id="27865-182">Para obter detalhes sobre como um aplicativo empacotado trata da instalação, do acesso ao arquivo, do registro e da desinstalação, consulte <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-behind-the-scenes> .</span><span class="sxs-lookup"><span data-stu-id="27865-182">For details about how a packaged application handles installation, file access, registry, and uninstallation, see <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-behind-the-scenes>.</span></span>

<span data-ttu-id="27865-183">Você pode obter uma lista completa de itens a serem verificados <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-prepare> .</span><span class="sxs-lookup"><span data-stu-id="27865-183">You can get a complete list of things to check on <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-prepare>.</span></span>

## <a name="how-to-add-winrt-apis-to-your-desktop-project"></a><span data-ttu-id="27865-184">Como adicionar APIs do WinRT ao seu projeto de desktop</span><span class="sxs-lookup"><span data-stu-id="27865-184">How to add WinRT APIs to your desktop project</span></span>

<span data-ttu-id="27865-185">Nesta seção, você pode encontrar uma explicação sobre como integrar notificações do sistema em um aplicativo existente do WPF.</span><span class="sxs-lookup"><span data-stu-id="27865-185">In this section, you can find a walkthrough on how to integrate Toast Notifications in an existing WPF application.</span></span> <span data-ttu-id="27865-186">Embora seja simples da perspectiva do código, ele ajuda a ilustrar todo o processo.</span><span class="sxs-lookup"><span data-stu-id="27865-186">Although it's simple from the code perspective, it helps illustrate the whole process.</span></span> <span data-ttu-id="27865-187">As notificações são uma das muitas APIs do WinRT disponíveis que você pode usar no aplicativo .NET.</span><span class="sxs-lookup"><span data-stu-id="27865-187">Notifications are one of the many available WinRT APIs available that you can use in .NET app.</span></span> <span data-ttu-id="27865-188">Nesse caso, a API requer uma identidade de pacote.</span><span class="sxs-lookup"><span data-stu-id="27865-188">In this case, the API requires a Package Identity.</span></span> <span data-ttu-id="27865-189">Esse processo será mais simples se as APIs não exigirem a identidade do pacote.</span><span class="sxs-lookup"><span data-stu-id="27865-189">This process is more straightforward if the APIs don't require Package Identity.</span></span>

<span data-ttu-id="27865-190">Vamos pegar um aplicativo de exemplo existente do WPF que lê arquivos e mostra seu conteúdo na tela.</span><span class="sxs-lookup"><span data-stu-id="27865-190">Let's take an existing WPF sample app that reads files and shows its contents on the screen.</span></span> <span data-ttu-id="27865-191">O objetivo é exibir uma notificação do sistema quando o aplicativo for iniciado.</span><span class="sxs-lookup"><span data-stu-id="27865-191">The goal is to display a Toast Notification when the application starts.</span></span>

![Captura de tela do aplicativo de exemplo em execução](./media/windows-migration/sample-application.png)

<span data-ttu-id="27865-193">Primeiro, você deve verificar o link a seguir se a API do Windows 10 que você usará requer uma identidade de pacote:</span><span class="sxs-lookup"><span data-stu-id="27865-193">First, you should check in the following link whether the Windows 10 API that you'll use requires a Package Identity:</span></span>

<https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-supported-api>

<span data-ttu-id="27865-194">Nosso exemplo usará a <xref:Windows.UI.Notifications.Notification?displayProperty=nameWithType> API que requer uma identidade empacotada:</span><span class="sxs-lookup"><span data-stu-id="27865-194">Our sample will use the <xref:Windows.UI.Notifications.Notification?displayProperty=nameWithType> API that requires a packaged identity:</span></span>

![Classe de notificação na documentação da Microsoft](./media/windows-migration/notification-class-documentation.png)

<span data-ttu-id="27865-196">Para acessar a API do WinRT, adicione uma referência ao `Microsoft.Windows.SDK.Contracts`   pacote NuGet e esse pacote fará a mágica nos bastidores (consulte os detalhes em <https://blogs.windows.com/windowsdeveloper/2019/04/30/calling-windows-10-apis-from-a-desktop-application-just-got-easier/> ).</span><span class="sxs-lookup"><span data-stu-id="27865-196">To access the WinRT API, add a reference to the `Microsoft.Windows.SDK.Contracts` NuGet package and this package will do the magic behind the scenes (see details at <https://blogs.windows.com/windowsdeveloper/2019/04/30/calling-windows-10-apis-from-a-desktop-application-just-got-easier/>).</span></span>

<span data-ttu-id="27865-197">Agora você está preparado para começar a adicionar algum código.</span><span class="sxs-lookup"><span data-stu-id="27865-197">You're now prepared to start adding some code.</span></span>

<span data-ttu-id="27865-198">Crie um `ShowToastNotification` método que será chamado na inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="27865-198">Create a `ShowToastNotification` method that will be called on application startup.</span></span> <span data-ttu-id="27865-199">Ele simplesmente cria uma notificação do sistema a partir de um padrão XML:</span><span class="sxs-lookup"><span data-stu-id="27865-199">It just builds a toast notification from an XML pattern:</span></span>

```csharp
private void ShowNotification(string title, string content, string image)
{
    string xmlString = $@"<toast><visual><binding template = 'ToastGeneric'><text>{title}</text><text>{content}</text><image src=>'{image}'</image></binding></visual></toast>";
    XmlDocument toastXml = new XmlDocument();
    toastXml.LoadXml(xmlString);
    ToastNotification toast = new ToastNotification(toastXml);
    ToastNotificationManager.CreateToastNotifier().Show(toast);
}
```

<span data-ttu-id="27865-200">Embora o projeto seja compilado, há erros porque a API de notificações requer uma identidade de pacote e você não a forneceu.</span><span class="sxs-lookup"><span data-stu-id="27865-200">Although the project builds, there are errors because the Notifications API requires a Package Identity and you didn't provide it.</span></span> <span data-ttu-id="27865-201">Adicionar um projeto de empacotamento do Windows à solução corrigirá o problema:</span><span class="sxs-lookup"><span data-stu-id="27865-201">Adding a Windows Packaging Project to the solution will fix the issue:</span></span>

![Captura de tela da caixa de diálogo Adicionar novo projeto no Visual Studio](./media/windows-migration/add-packaging-project.png)

<span data-ttu-id="27865-203">Selecione a versão mínima do Windows à qual você deseja dar suporte e a versão que você está direcionando.</span><span class="sxs-lookup"><span data-stu-id="27865-203">Select the minimum Windows version you want to support and the version you're targeting.</span></span> <span data-ttu-id="27865-204">Nem todas as APIs do WinRT têm suporte em todas as versões do Windows 10.</span><span class="sxs-lookup"><span data-stu-id="27865-204">Not all the WinRT APIs are supported in all Windows 10 versions.</span></span> <span data-ttu-id="27865-205">Cada atualização do Windows 10 adiciona novas APIs que só estão disponíveis nesta versão; o suporte de nível inferior não está disponível.</span><span class="sxs-lookup"><span data-stu-id="27865-205">Each Windows 10 update adds new APIs that are only available from this version; down-level support isn't available.</span></span>

![Selecionando a versão mínima do Windows](./media/windows-migration/select-versions.png)

<span data-ttu-id="27865-207">A próxima etapa é adicionar o aplicativo WPF ao projeto de empacotamento do Windows adicionando uma referência de projeto:</span><span class="sxs-lookup"><span data-stu-id="27865-207">Next step is to add the WPF application to the Windows Packaging Project by adding a project reference:</span></span>

![Adicionando o aplicativo WPF ao projeto de empacotamento do Windows](./media/windows-migration/add-application.png)

![Gerenciador de referências](./media/windows-migration/reference-manager.png)

<span data-ttu-id="27865-210">Um projeto de empacotamento do Windows pode empacotar vários aplicativos para que você defina qual deles é o ponto de entrada:</span><span class="sxs-lookup"><span data-stu-id="27865-210">A Windows Packaging Project can package several apps so you should set which one is the Entry Point:</span></span>

![Definindo ponto de entrada](./media/windows-migration/set-entry-point.png)

<span data-ttu-id="27865-212">A próxima etapa é definir o projeto do WPF como o projeto de inicialização na configuração da solução.</span><span class="sxs-lookup"><span data-stu-id="27865-212">Next step is to set the WPF Project as the startup Project in the solution configuration.</span></span> <span data-ttu-id="27865-213">Você pode pressionar F5 para compilar e compilar e ver os resultados.</span><span class="sxs-lookup"><span data-stu-id="27865-213">You can press F5 to compile and build and see the results.</span></span>

![Aplicativo de exemplo em execução e mostrando os resultados](./media/windows-migration/sample-app-result.png)

<span data-ttu-id="27865-215">Vamos gerar o pacote para que você possa instalar seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="27865-215">Let's generate the package so you can install your app.</span></span> <span data-ttu-id="27865-216">Clique com o botão direito do mouse em **armazenar**  >  **criar pacotes de aplicativos**.</span><span class="sxs-lookup"><span data-stu-id="27865-216">Right click on **Store** > **Create App Packages**.</span></span>

![Caixa de diálogo criar pacotes de aplicativos](./media/windows-migration/create-app-packages.png)

<span data-ttu-id="27865-218">Selecione a opção de Sideload para implantar o aplicativo do seu computador:</span><span class="sxs-lookup"><span data-stu-id="27865-218">Select the sideloading option to deploy the app from your machine:</span></span>

![Selecionando opção de Sideload](./media/windows-migration/select-sideloading-option.png)

<span data-ttu-id="27865-220">Selecione a arquitetura do aplicativo do seu aplicativo:</span><span class="sxs-lookup"><span data-stu-id="27865-220">Select the application architecture of your app:</span></span>

![Selecionando a arquitetura do aplicativo](./media/windows-migration/select-app-architecture.png)

<span data-ttu-id="27865-222">Por fim, crie o pacote clicando em **criar**.</span><span class="sxs-lookup"><span data-stu-id="27865-222">Finally, create the package by clicking on **Create**.</span></span>

## <a name="xaml-islands"></a><span data-ttu-id="27865-223">Ilhas XAML</span><span class="sxs-lookup"><span data-stu-id="27865-223">XAML Islands</span></span>

<span data-ttu-id="27865-224">As ilhas XAML são um conjunto de componentes que permitem que os desenvolvedores da área de trabalho do Windows usem controles XAML do UWP em seus aplicativos Win32 existentes, incluindo Windows Forms e WPF.</span><span class="sxs-lookup"><span data-stu-id="27865-224">XAML Islands are a set of components that enable Windows desktop developers to use UWP XAML controls on their existing Win32 applications, including Windows Forms and WPF.</span></span>

![Estrutura de ilhas XAML](./media/windows-migration/xaml-islands.png)

<span data-ttu-id="27865-226">Você pode fazer a imagem de seu aplicativo Win32 com seus controles padrão e entre eles uma "ilha" da interface do usuário da UWP que contém controles do mundo moderno.</span><span class="sxs-lookup"><span data-stu-id="27865-226">You can image your Win32 app with your standard controls and among them an "island" of UWP UI containing controls from the modern world.</span></span> <span data-ttu-id="27865-227">O conceito é semelhante a ter um iFrame dentro de uma página da Web que mostra o conteúdo de um`different page.`</span><span class="sxs-lookup"><span data-stu-id="27865-227">The concept is similar as having an iFrame inside a web page that shows content from a `different page.`</span></span>

<span data-ttu-id="27865-228">Além de adicionar funcionalidade das APIs do Windows 10, você pode adicionar partes do UWP XAML dentro do seu aplicativo usando as ilhas XAML.</span><span class="sxs-lookup"><span data-stu-id="27865-228">Besides adding functionality from the Windows 10 APIs, you can add pieces of UWP XAML inside of your app using XAML Islands.</span></span>

<span data-ttu-id="27865-229">A atualização do Windows 10 1903 apresenta um conjunto de APIs que permite hospedar conteúdo do UWP XAML no Windows Win32.</span><span class="sxs-lookup"><span data-stu-id="27865-229">Windows 10 1903 update introduces a set of APIs that allows hosting UWP XAML content in Win32 windows.</span></span> <span data-ttu-id="27865-230">Somente os aplicativos em execução no Windows 10 1903 podem usar as ilhas XAML.</span><span class="sxs-lookup"><span data-stu-id="27865-230">Only apps running on Windows 10 1903 can use XAML Islands.</span></span>

### <a name="the-road-to-xaml-islands"></a><span data-ttu-id="27865-231">O caminho para as ilhas XAML</span><span class="sxs-lookup"><span data-stu-id="27865-231">The road to XAML Islands</span></span>

<span data-ttu-id="27865-232">A estrada para as ilhas XAML começou em 2012 quando a Microsoft introduziu as APIs do WinRT como uma estrutura para modernizar os aplicativos Win32 (Windows Forms, WPF e aplicativos Win32 nativos).</span><span class="sxs-lookup"><span data-stu-id="27865-232">The road to XAML Islands started in 2012 when Microsoft introduced the WinRT APIs as a framework to modernize the Win32 apps (Windows Forms, WPF, and native Win32 apps).</span></span> <span data-ttu-id="27865-233">No entanto, os novos controles de interface do usuário dentro do WinRT estavam disponíveis para novos aplicativos, mas não para aqueles existentes.</span><span class="sxs-lookup"><span data-stu-id="27865-233">However, the new UI controls inside WinRT were available for new applications but not for existing ones.</span></span>

<span data-ttu-id="27865-234">Em 2015, junto com o Windows 10, o UWP nasceu.</span><span class="sxs-lookup"><span data-stu-id="27865-234">In 2015, along with Windows 10, UWP was born.</span></span> <span data-ttu-id="27865-235">A UWP permite que você crie aplicativos que funcionam em dispositivos Windows, como XBox, Mobile e desktop.</span><span class="sxs-lookup"><span data-stu-id="27865-235">UWP allows you to create apps that work across Windows devices like XBox, Mobile, and Desktop.</span></span> <span data-ttu-id="27865-236">Um ano depois, a Microsoft anunciou a ponte de área de trabalho (anteriormente conhecida como projeto Centennial).</span><span class="sxs-lookup"><span data-stu-id="27865-236">One year later, Microsoft announced Desktop Bridge (formerly known as Project Centennial).</span></span> <span data-ttu-id="27865-237">A ponte de desktop é um conjunto de ferramentas que permitiam aos desenvolvedores trazer seus aplicativos Win32 existentes para o Microsoft Store.</span><span class="sxs-lookup"><span data-stu-id="27865-237">Desktop Bridge is a set of tools that allowed developers to bring their existing Win32 apps to the Microsoft Store.</span></span> <span data-ttu-id="27865-238">Mais recursos foram adicionados em 2017, permitindo que os desenvolvedores aprimorem seus aplicativos Win32 aproveitando algumas das novas APIs do Windows 10, como blocos dinâmicos e notificações na central de ações.</span><span class="sxs-lookup"><span data-stu-id="27865-238">More capabilities were added in 2017, allowing developers to enhance their Win32 apps leveraging some of the new Windows 10 APIs, like live tiles and notifications on the action center.</span></span> <span data-ttu-id="27865-239">Mas, ainda, não há novos controles de interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="27865-239">But still, no new UI controls.</span></span>

<span data-ttu-id="27865-240">Na Build 2018, a Microsoft anunciou uma maneira para os desenvolvedores usarem os novos controles XAML do Windows 10 em seus aplicativos Win32 atuais, sem migrar totalmente seus aplicativos para a UWP.</span><span class="sxs-lookup"><span data-stu-id="27865-240">At Build 2018, Microsoft announced a way for developers to use the new Windows 10 XAML controls into their current Win32 apps, without fully migrating their apps to UWP.</span></span> <span data-ttu-id="27865-241">Ele foi marcado como ilhas UWP XAML.</span><span class="sxs-lookup"><span data-stu-id="27865-241">It was branded as UWP XAML Islands.</span></span>

### <a name="how-it-works"></a><span data-ttu-id="27865-242">Como funciona</span><span class="sxs-lookup"><span data-stu-id="27865-242">How it works</span></span>

<span data-ttu-id="27865-243">A atualização do Windows 10 1903 apresenta várias APIs de hospedagem XAML.</span><span class="sxs-lookup"><span data-stu-id="27865-243">The Windows 10 1903 update introduces several XAML hosting APIs.</span></span> <span data-ttu-id="27865-244">Duas delas são `WindowsXamlManager`   e  `DesktopWindowXamlSource` .</span><span class="sxs-lookup"><span data-stu-id="27865-244">Two of them are `WindowsXamlManager` and `DesktopWindowXamlSource`.</span></span>

<span data-ttu-id="27865-245">A  `WindowsXamlManager`   classe manipula a estrutura de XAML do UWP.</span><span class="sxs-lookup"><span data-stu-id="27865-245">The `WindowsXamlManager` class handles the UWP XAML Framework.</span></span> <span data-ttu-id="27865-246">Seu `InitializeForCurrentThread` método carrega a estrutura de XAML do UWP dentro do thread atual do aplicativo Win32.</span><span class="sxs-lookup"><span data-stu-id="27865-246">Its `InitializeForCurrentThread` method loads the UWP XAML Framework inside the current thread of the Win32 app.</span></span>

<span data-ttu-id="27865-247">O  `DesktopWindowXamlSource`   é a instância do conteúdo da sua ilha XAML.</span><span class="sxs-lookup"><span data-stu-id="27865-247">The `DesktopWindowXamlSource` is the instance of your XAML Island content.</span></span> <span data-ttu-id="27865-248">Ele tem a `Content` propriedade, que você é responsável por instanciar e definir.</span><span class="sxs-lookup"><span data-stu-id="27865-248">It has the `Content` property, which you're responsible for instantiating and setting.</span></span> <span data-ttu-id="27865-249">O `DesktopWindowXamlSource`   renderiza e obtém sua entrada de um HWND.</span><span class="sxs-lookup"><span data-stu-id="27865-249">The `DesktopWindowXamlSource` renders and gets its input from an HWND.</span></span> <span data-ttu-id="27865-250">Ele precisa saber qual outro HWND ele anexará a ilha XAML, e você será responsável por dimensionar e posicionar o HWND do pai.</span><span class="sxs-lookup"><span data-stu-id="27865-250">It needs to know to which other HWND it will attach the XAML Island's one, and you're responsible for sizing and positioning the parent's HWND.</span></span>

<span data-ttu-id="27865-251">Os desenvolvedores do WPF ou Windows Forms normalmente não lidam com o HWND dentro de seu código, portanto, pode ser difícil entender e manipular ponteiros de HWND e as coisas de fiação subjacentes para comunicar os mundos do Win32 e do UWP.</span><span class="sxs-lookup"><span data-stu-id="27865-251">WPF or Windows Forms developers don't usually deal with HWND inside their code, so it may be hard to understand and handle HWND pointers and the underlying wiring stuff to communicate Win32 and UWP worlds.</span></span>

#### <a name="the-xaml-islands-net-wrappers"></a><span data-ttu-id="27865-252">Os wrappers .NET das Ilhas XAML</span><span class="sxs-lookup"><span data-stu-id="27865-252">The XAML Islands .NET Wrappers</span></span>

<span data-ttu-id="27865-253">O kit de ferramentas da Comunidade do Windows tem um conjunto de wrappers .NET das Ilhas XAML para WPF ou Windows Forms que facilitam o uso de ilhas XAML.</span><span class="sxs-lookup"><span data-stu-id="27865-253">The Windows Community Toolkit has a set the XAML Islands .NET wrappers for WPF or Windows Forms that make easier to use XAML Islands.</span></span> <span data-ttu-id="27865-254">Esses wrappers gerenciam os HWNDs, o gerenciamento de foco, entre outras coisas.</span><span class="sxs-lookup"><span data-stu-id="27865-254">These wrappers manage the HWNDs, the focus management, among other things.</span></span> <span data-ttu-id="27865-255">Os desenvolvedores de Windows Forms e WPF devem usar esses wrappers.</span><span class="sxs-lookup"><span data-stu-id="27865-255">Windows Forms and WPF developers should use these wrappers.</span></span>

<span data-ttu-id="27865-256">O kit de ferramentas da Comunidade do Windows oferece dois tipos de controles: controles encapsulados e controles de hospedagem.</span><span class="sxs-lookup"><span data-stu-id="27865-256">The Windows Community Toolkit offers two types of controls: Wrapped Controls and Hosting Controls.</span></span>

##### <a name="wrapped-controls"></a><span data-ttu-id="27865-257">Controles encapsulados</span><span class="sxs-lookup"><span data-stu-id="27865-257">Wrapped Controls</span></span>

<span data-ttu-id="27865-258">Esses controles encapsulados encapsulam alguns controles UWP em controles Windows Forms ou WPF, ocultando os conceitos de UWP para esses desenvolvedores.</span><span class="sxs-lookup"><span data-stu-id="27865-258">These wrapped controls wrap some UWP controls into Windows Forms or WPF controls, hiding UWP concepts for those developers.</span></span> <span data-ttu-id="27865-259">Esses controles são:</span><span class="sxs-lookup"><span data-stu-id="27865-259">These controls are:</span></span>

* <span data-ttu-id="27865-260">WebView e WebViewCompatible</span><span class="sxs-lookup"><span data-stu-id="27865-260">WebView and WebViewCompatible</span></span>
* <span data-ttu-id="27865-261">InkCanvas e InkToolbar</span><span class="sxs-lookup"><span data-stu-id="27865-261">InkCanvas and InkToolbar</span></span>
* <span data-ttu-id="27865-262">MediaPlayerElement</span><span class="sxs-lookup"><span data-stu-id="27865-262">MediaPlayerElement</span></span>
* <span data-ttu-id="27865-263">MapControl</span><span class="sxs-lookup"><span data-stu-id="27865-263">MapControl</span></span>

<span data-ttu-id="27865-264">Adicione o `Microsoft.Toolkit.Wpf.UI.Controls` pacote ao seu projeto, inclua a referência ao namespace e comece a usá-lo.</span><span class="sxs-lookup"><span data-stu-id="27865-264">Add the `Microsoft.Toolkit.Wpf.UI.Controls` package to your project, include the reference to the namespace, and start using them.</span></span>

```xml
<Window
        ...
        xmlns:uwpControls="clr-namespace:Microsoft.Toolkit.Wpf.UI.Controls;assembly=Microsoft.Toolkit.Wpf.UI.Controls">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="\*"/>
    </Grid.RowDefinitions>
    <uwpControls:InkToolbar TargetInkCanvas="{x:Reference Name=inkCanvas}"/>
    <uwpControls:InkCanvas Grid.Row="1" x:Name="inkCanvas" />
</Grid>
```

##### <a name="hosting-controls"></a><span data-ttu-id="27865-265">Controles de hospedagem</span><span class="sxs-lookup"><span data-stu-id="27865-265">Hosting controls</span></span>

<span data-ttu-id="27865-266">O poder das Ilhas XAML estende-se para a maioria dos controles de terceiros, controles de terceiros e controles personalizados desenvolvidos para UWP, que podem ser integrados ao Windows Forms e ao WPF como "ilhas" com interface do usuário totalmente funcional.</span><span class="sxs-lookup"><span data-stu-id="27865-266">The power of XAML Islands extends to most first-party controls, third-party controls, and custom controls developed for UWP, which can be integrated into Windows Forms and WPF as "Islands" with fully functional UI.</span></span> <span data-ttu-id="27865-267">O `WindowsXamlHost` controle para WPF e Windows Forms permite fazer isso.</span><span class="sxs-lookup"><span data-stu-id="27865-267">The `WindowsXamlHost` control for WPF and Windows Forms allows doing this.</span></span>

<span data-ttu-id="27865-268">Por exemplo, para usar o `WindowsXamlHost` controle no WPF, adicione uma referência ao `Microsoft.Toolkit.Wpf.UI.XamlHost` pacote fornecido pelo kit de ferramentas da Comunidade do Windows.</span><span class="sxs-lookup"><span data-stu-id="27865-268">For example, to use the `WindowsXamlHost` control in WPF, add a reference to the `Microsoft.Toolkit.Wpf.UI.XamlHost` package provided by the Windows Community Toolkit.</span></span>

<span data-ttu-id="27865-269">Depois de colocar seu `WindowsXamlHost` em seu código de interface do usuário, especifique qual tipo UWP você deseja carregar.</span><span class="sxs-lookup"><span data-stu-id="27865-269">Once you've placed your `WindowsXamlHost` into your UI code, specify which UWP type you want to load.</span></span> <span data-ttu-id="27865-270">Você pode optar por usar um controle encapsulado como um `Button` ou um mais complexo composto por vários controles diferentes, que são um controle UWP personalizado.</span><span class="sxs-lookup"><span data-stu-id="27865-270">You can choose to use a wrapped control like a `Button` or a more complex one composed by several different controls, which are a custom UWP control.</span></span>

<span data-ttu-id="27865-271">O exemplo a seguir mostra como adicionar um UWP `Button` :</span><span class="sxs-lookup"><span data-stu-id="27865-271">The following example shows how to add a UWP `Button`:</span></span>

```xml
<Window
        ...
        xmlns:xamlhost="clr-namespace:Microsoft.Toolkit.Wpf.UI.XamlHost;assembly=Microsoft.Toolkit.Wpf.UI.XamlHost">

<xamlhost:WindowsXamlHost x:Name="myUwpButton"
                          InitialTypeName="Windows.UI.Xaml.Controls.Button" />
```

<span data-ttu-id="27865-272">Há uma recomendação clara sobre como abordar isso e é melhor ter uma ilha XAML única e maior contendo um controle composto personalizado do que ter várias ilhas com um controle em cada.</span><span class="sxs-lookup"><span data-stu-id="27865-272">There's a clear recommendation on how to approach this and it's better to have one single and bigger XAML Island containing a custom composite control than to have several islands with one control on each.</span></span>

<span data-ttu-id="27865-273">Um dos principais recursos do XAML é a associação e funciona entre o código Win32 e a ilha.</span><span class="sxs-lookup"><span data-stu-id="27865-273">One of the core features of XAML is binding and it works between your Win32 code and the island.</span></span> <span data-ttu-id="27865-274">Portanto, você pode ligar, por exemplo, um Win32 `Textbox` com um UWP `Textbox` .</span><span class="sxs-lookup"><span data-stu-id="27865-274">So, you can bind, for instance, a Win32 `Textbox` with a UWP `Textbox`.</span></span> <span data-ttu-id="27865-275">Uma coisa importante a ser considerada é que essas associações são associações unidirecionais, de UWP para Win32, portanto, se você atualizar o `Textbox` dentro da ilha XAML, a caixa de texto Win32 será atualizada, mas não o contrário.</span><span class="sxs-lookup"><span data-stu-id="27865-275">One important thing to consider is that these bindings are one-way bindings, from UWP to Win32, so if you update the `Textbox` inside the XAML Island the Win32 Textbox will be updated, but not the other way around.</span></span>

<span data-ttu-id="27865-276">Para ver instruções sobre como usar as ilhas XAML, consulte:</span><span class="sxs-lookup"><span data-stu-id="27865-276">To see a walkthrough about how to use XAML Islands, see:</span></span>

<https://docs.microsoft.com/windows/apps/desktop/modernize/host-standard-control-with-xaml-islands>

#### <a name="adding-uwp-xaml-custom-controls"></a><span data-ttu-id="27865-277">Adicionando controles personalizados UWP XAML</span><span class="sxs-lookup"><span data-stu-id="27865-277">Adding UWP XAML custom controls</span></span>

<span data-ttu-id="27865-278">Um controle personalizado XAML é um controle (ou controle de usuário) criado por você ou por terceiros (incluindo os controles WinUI 2. x).</span><span class="sxs-lookup"><span data-stu-id="27865-278">A XAML custom control is a control (or user control) created by you or by third parties (including WinUI 2.x controls).</span></span> <span data-ttu-id="27865-279">Para hospedar um controle UWP personalizado em um aplicativo Windows Forms ou WPF, você precisará de:</span><span class="sxs-lookup"><span data-stu-id="27865-279">To host a custom UWP control in a Windows Forms or WPF app, you'll need:</span></span>

- <span data-ttu-id="27865-280">Para usar o `WindowsXamlHost` controle UWP em seu aplicativo .NET Core 3. x.</span><span class="sxs-lookup"><span data-stu-id="27865-280">To use the `WindowsXamlHost` UWP control in your .NET Core 3.x app.</span></span>
- <span data-ttu-id="27865-281">Para criar um projeto de aplicativo UWP que define um `XamlApplication` objeto.</span><span class="sxs-lookup"><span data-stu-id="27865-281">To create a UWP app project that defines a `XamlApplication` object.</span></span>

<span data-ttu-id="27865-282">Seu projeto do WPF ou Windows Forms deve ter acesso a uma instância da `Microsoft.Toolkit.Win32.UI.XamlHost.XamlApplication` classe fornecida pelo kit de ferramentas da Comunidade do Windows.</span><span class="sxs-lookup"><span data-stu-id="27865-282">Your WPF or Windows Forms project must have access to an instance of the `Microsoft.Toolkit.Win32.UI.XamlHost.XamlApplication` class provided by the Windows Community Toolkit.</span></span> <span data-ttu-id="27865-283">Esse objeto atua como um provedor raiz de metadados para carregar metadados para tipos personalizados UWP XAML em assemblies no diretório atual do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="27865-283">This object acts as a root metadata provider for loading metadata for custom UWP XAML types in assemblies in the current directory of your application.</span></span> <span data-ttu-id="27865-284">A maneira recomendada para fazer isso é adicionar um projeto de aplicativo em branco (universal do Windows) à mesma solução que o seu projeto do WPF ou Windows Forms e revisar a classe de aplicativo padrão neste projeto.</span><span class="sxs-lookup"><span data-stu-id="27865-284">The recommended way to do this is to add a Blank App (Universal Windows) project to the same solution as your WPF or Windows Forms project and revise the default App class in this project.</span></span>

<span data-ttu-id="27865-285">O controle XAML do UWP personalizado pode ser incluído neste aplicativo UWP ou em um projeto de biblioteca de classe UWP independente que você faz referência na mesma solução que o seu projeto do WPF ou Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="27865-285">The custom UWP XAML control can be included on this UWP app or in an independent UWP Class Library project that you reference in the same solution as your WPF or Windows Forms project.</span></span>

<span data-ttu-id="27865-286">Você pode verificar uma descrição detalhada do processo passo a passo em:</span><span class="sxs-lookup"><span data-stu-id="27865-286">You can check a detailed step-by-step process description at:</span></span>

<https://docs.microsoft.com/windows/apps/desktop/modernize/host-custom-control-with-xaml-islands>

#### <a name="the-windows-ui-library-winui-2"></a><span data-ttu-id="27865-287">A biblioteca de interface do usuário do Windows (WinUI 2)</span><span class="sxs-lookup"><span data-stu-id="27865-287">The Windows UI Library (WinUI 2)</span></span>

<span data-ttu-id="27865-288">Além dos controles de caixa de entrada do Windows 10 que acompanham o sistema operacional, a mesma equipe do UWP XAML também fornece controles adicionais na biblioteca de interface do usuário do Windows (**WinUI 2**).</span><span class="sxs-lookup"><span data-stu-id="27865-288">Besides the inbox Windows 10 controls that comes with the OS, the same UWP XAML team also deliver additional controls in the Windows UI Library (**WinUI 2**).</span></span> <span data-ttu-id="27865-289">O WinUI 2 fornece recursos e controles de interface do usuário nativos da Microsoft para aplicativos UWP do Windows e esses controles podem ser usados dentro de ilhas XAML.</span><span class="sxs-lookup"><span data-stu-id="27865-289">WinUI 2 provides official native Microsoft UI controls and features for Windows UWP apps and these controls can be used inside of XAML Islands.</span></span>

<span data-ttu-id="27865-290">WinUI 2 é código-fonte aberto e você pode encontrar informações em <https://github.com/microsoft/microsoft-ui-xaml> .</span><span class="sxs-lookup"><span data-stu-id="27865-290">WinUI 2 is open source and you can find information at <https://github.com/microsoft/microsoft-ui-xaml>.</span></span>

<span data-ttu-id="27865-291">O artigo a seguir demonstra como hospedar um controle de XAML do UWP da biblioteca do WinUI 2:<https://docs.microsoft.com/windows/apps/desktop/modernize/host-custom-control-with-xaml-islands></span><span class="sxs-lookup"><span data-stu-id="27865-291">The following article demonstrates how to host a UWP XAML control from the WinUI 2 library: <https://docs.microsoft.com/windows/apps/desktop/modernize/host-custom-control-with-xaml-islands></span></span>

### <a name="do-you-need-xaml-islands"></a><span data-ttu-id="27865-292">Você precisa de ilhas XAML</span><span class="sxs-lookup"><span data-stu-id="27865-292">Do you need XAML Islands</span></span>

<span data-ttu-id="27865-293">As ilhas XAML são destinadas a aplicativos Win32 existentes que desejam melhorar a experiência do usuário aproveitando os novos controles e comportamentos do UWP sem uma regravação completa do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="27865-293">XAML Islands are intended for existing Win32 apps that want to improve their user experience by leveraging new UWP controls and behaviors without a full rewrite of the app.</span></span> <span data-ttu-id="27865-294">Você já pode [aproveitar as APIs do Windows 10](/windows/uwp/porting/desktop-to-uwp-enhance), mas até as ilhas XAML, somente APIs não relacionadas à interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="27865-294">You could already [leverage Windows 10 APIs](/windows/uwp/porting/desktop-to-uwp-enhance), but up until XAML Islands, only non-UI related APIs.</span></span>

<span data-ttu-id="27865-295">Se você estiver desenvolvendo um novo aplicativo do Windows, um [aplicativo UWP](/windows/uwp/get-started/universal-application-platform-guide)   provavelmente será a abordagem certa.</span><span class="sxs-lookup"><span data-stu-id="27865-295">If you're developing a new Windows App, a [UWP App](/windows/uwp/get-started/universal-application-platform-guide) is probably the right approach.</span></span>

### <a name="the-road-ahead-xaml-islands-winui-30"></a><span data-ttu-id="27865-296">As ilhas XAML do Road up: WinUI 3,0</span><span class="sxs-lookup"><span data-stu-id="27865-296">The road ahead XAML Islands: WinUI 3.0</span></span>

<span data-ttu-id="27865-297">Desde o Windows 8, a plataforma de interface do usuário do Windows, incluindo a estrutura de interface do usuário XAML, a camada de composição visual e o processamento de entrada, foi enviada como parte integrante do Windows.</span><span class="sxs-lookup"><span data-stu-id="27865-297">Since Windows 8, the Windows UI platform, including the XAML UI framework, visual composition layer, and input processing has been shipped as an integral part of Windows.</span></span> <span data-ttu-id="27865-298">Isso significa que, para se beneficiar das melhorias mais recentes em tecnologias de interface do usuário, você deve atualizar para a versão mais recente da interface do usuário, reduzindo o ritmo da inovação ao desenvolver seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="27865-298">This means that to benefit from the latest improvements on UI technologies, you must upgrade to the latest version of the UI, slowing down the pace of innovation when you develop your apps.</span></span> <span data-ttu-id="27865-299">Para desassociar esses dois ciclos de evolução e promover a inovação, a Microsoft está trabalhando ativamente no projeto WinUI.</span><span class="sxs-lookup"><span data-stu-id="27865-299">To decouple these two evolution cycles and foster innovation, Microsoft is actively working on the WinUI project.</span></span>

<span data-ttu-id="27865-300">A partir do WinUI 2 em 2018, a Microsoft começou a enviar alguns novos controles e recursos de interface do usuário XAML como pacotes NuGet separados que se baseiam no SDK do UWP.</span><span class="sxs-lookup"><span data-stu-id="27865-300">Starting with WinUI 2 in 2018, Microsoft started shipping some new XAML UI controls and features as separate NuGet packages that build on top of the UWP SDK.</span></span>

![Estrutura do WinUI 2,0](./media/windows-migration/winui2.png)

<span data-ttu-id="27865-302">O WinUI 3 está em desenvolvimento ativo e expandirá muito o escopo de WinUI para incluir a plataforma de interface do usuário completa, que será totalmente dissociada do SDK do UWP:</span><span class="sxs-lookup"><span data-stu-id="27865-302">WinUI 3 is under active development and will greatly expand the scope of WinUI to include the full UI platform, which will be fully decoupled from the UWP SDK:</span></span>

![Estrutura do WinUI 3,0](./media/windows-migration/winui3.png)

<span data-ttu-id="27865-304">A estrutura XAML agora será desenvolvida no GitHub e enviada fora da banda como pacotes [NuGet](/nuget/what-is-nuget)   .</span><span class="sxs-lookup"><span data-stu-id="27865-304">XAML framework will now be developed on GitHub and shipped out of band as [NuGet](/nuget/what-is-nuget) packages.</span></span>

<span data-ttu-id="27865-305">As APIs XAML do UWP existentes que são fornecidas como parte do sistema operacional não receberão mais novas atualizações de recursos.</span><span class="sxs-lookup"><span data-stu-id="27865-305">The existing UWP XAML APIs that ship as part of the OS will no longer receive new feature updates.</span></span> <span data-ttu-id="27865-306">Eles ainda receberão atualizações de segurança e correções críticas, de acordo com o ciclo de vida de suporte do Windows 10.</span><span class="sxs-lookup"><span data-stu-id="27865-306">They will still receive security updates and critical fixes according to the Windows 10 support lifecycle.</span></span>

<span data-ttu-id="27865-307">O Plataforma Universal do Windows contém mais do que apenas a estrutura XAML (por exemplo, aplicativo e modelo de segurança, pipeline de mídia, integrações do shell do Xbox e do Windows 10, amplo suporte a dispositivos) e continuará a evoluir.</span><span class="sxs-lookup"><span data-stu-id="27865-307">The Universal Windows Platform contains more than just the XAML framework (for example, application and security model, media pipeline, Xbox and Windows 10 shell integrations, broad device support) and will continue to evolve.</span></span> <span data-ttu-id="27865-308">Todos os novos recursos do XAML serão desenvolvidos e fornecidos como parte do WinUI em vez disso.</span><span class="sxs-lookup"><span data-stu-id="27865-308">All new XAML features will just be developed and ship as part of WinUI instead.</span></span>

#### <a name="winui-3-in-desktop-app-and-winui-xaml-islands"></a><span data-ttu-id="27865-309">WinUI 3 no aplicativo de área de trabalho e nas ilhas XAML WinUI</span><span class="sxs-lookup"><span data-stu-id="27865-309">WinUI 3 in desktop app and WinUI XAML Islands</span></span>

<span data-ttu-id="27865-310">Como você pode ver, WinUI 3 é a evolução do UWP XAML e funciona naturalmente dentro do modelo de aplicativo UWP e de todos os seus requisitos (ID de pacote MSIX, sandbox, CoreWindow e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="27865-310">As you can see, WinUI 3 is the evolution of UWP XAML and it works naturally within the UWP app model and all its requirements (MSIX packaged ID, sandbox, CoreWindow, and so on.</span></span> <span data-ttu-id="27865-311">Para usar apenas WinUI 3 em um modelo de aplicativo Win32, o conteúdo do WinUI deve ser hospedado por outra estrutura de interface do usuário (Windows Forms, WPF e assim por diante) usando as **ilhas XAML do WinUI**.</span><span class="sxs-lookup"><span data-stu-id="27865-311">To use just WinUI 3 in a Win32 app model, the WinUI content should be hosted by another UI Framework (Windows Forms, WPF, and so on) using **WinUI XAML Islands**.</span></span> <span data-ttu-id="27865-312">Este é o caminho correto se você quiser desenvolver seu aplicativo e misturar tecnologias.</span><span class="sxs-lookup"><span data-stu-id="27865-312">This is the right path if you want to evolve your app and mix technologies.</span></span> <span data-ttu-id="27865-313">No entanto, se você quiser substituir toda a interface do usuário antiga para WinUI, seu aplicativo não deverá carregar estruturas de interface do usuário para apenas hospedar WinUI.</span><span class="sxs-lookup"><span data-stu-id="27865-313">However, if you want to replace your entire old UI for WinUI, your app shouldn't load UI Frameworks for just hosting WinUI.</span></span>

<span data-ttu-id="27865-314">WinUI 3 abordará esses comentários críticos, adicionando **WinUI em aplicativos da área de trabalho**.</span><span class="sxs-lookup"><span data-stu-id="27865-314">WinUI 3 will address this critical feedback adding **WinUI in desktop apps**.</span></span> <span data-ttu-id="27865-315">Isso permitirá que os aplicativos Win32 possam usar o WinUI 3 como estrutura de interface do usuário autônoma; Não é necessário carregar Windows Forms ou o WPF.</span><span class="sxs-lookup"><span data-stu-id="27865-315">This will allow that Win32 apps can use WinUI 3 as standalone UI Framework; no need to load Windows Forms or WPF.</span></span>

<span data-ttu-id="27865-316">Nessa agregação, o WinUI 3 permitirá que os desenvolvedores combinem e correspondam facilmente à combinação certa de:</span><span class="sxs-lookup"><span data-stu-id="27865-316">Within this aggregation, WinUI 3 will let developers easily mix and match the right combination of:</span></span>

* <span data-ttu-id="27865-317">Modelo de aplicativo: UWP, Win32</span><span class="sxs-lookup"><span data-stu-id="27865-317">App model: UWP, Win32</span></span>
* <span data-ttu-id="27865-318">Plataforma: .NET Core ou nativo</span><span class="sxs-lookup"><span data-stu-id="27865-318">Platform: .NET Core or Native</span></span>
* <span data-ttu-id="27865-319">Idioma: .NET (C \# , Visual Basic), Standard C++</span><span class="sxs-lookup"><span data-stu-id="27865-319">Language: .NET (C\#, Visual Basic), standard C++</span></span>
* <span data-ttu-id="27865-320">Empacotamento: MSIX, AppX para o Microsoft Store, não empacotado</span><span class="sxs-lookup"><span data-stu-id="27865-320">Packaging: MSIX, AppX for the Microsoft Store, unpackaged</span></span>
* <span data-ttu-id="27865-321">Interoperabilidade: Use WinUI 3 para estender aplicativos WPF, WinForms e MFC existentes usando ilhas XAML WinUI.</span><span class="sxs-lookup"><span data-stu-id="27865-321">Interop: use WinUI 3 to extend existing WPF, WinForms, and MFC apps using WinUI XAML Islands.</span></span>

<span data-ttu-id="27865-322">Se você quiser saber mais detalhes, a Microsoft está compartilhando esse roteiro no <https://github.com/microsoft/microsoft-ui-xaml/blob/master/docs/roadmap.md> .</span><span class="sxs-lookup"><span data-stu-id="27865-322">If you want to know more details, Microsoft is sharing this roadmap in <https://github.com/microsoft/microsoft-ui-xaml/blob/master/docs/roadmap.md>.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="27865-323">[Anterior](migrate-modern-applications.md) 
> [Avançar](example-migration-core.md)</span><span class="sxs-lookup"><span data-stu-id="27865-323">[Previous](migrate-modern-applications.md)
[Next](example-migration-core.md)</span></span>
