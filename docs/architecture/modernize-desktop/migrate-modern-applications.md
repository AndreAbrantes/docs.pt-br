---
title: Migrando aplicativos de área de trabalho modernos
description: Tudo o que você precisa saber sobre o processo de migração para aplicativos de área de trabalho modernos.
ms.date: 05/12/2020
ms.openlocfilehash: f7862d6379eeeb737c386b5ffeaab938d258b046
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/24/2020
ms.locfileid: "91173328"
---
# <a name="migrating-modern-desktop-applications"></a><span data-ttu-id="b8b47-103">Migrando aplicativos de área de trabalho modernos</span><span class="sxs-lookup"><span data-stu-id="b8b47-103">Migrating Modern Desktop applications</span></span>

<span data-ttu-id="b8b47-104">Neste capítulo, estamos explorando os problemas e desafios mais comuns que você pode enfrentar ao migrar um aplicativo existente do .NET Framework para o .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-104">In this chapter, we're exploring the most common issues and challenges you can face when migrating an existing application from .NET Framework to .NET Core.</span></span>

<span data-ttu-id="b8b47-105">Um aplicativo de área de trabalho complexo não funciona isoladamente e precisa de algum tipo de interação com subsistemas que possam residir no computador local ou em um servidor remoto.</span><span class="sxs-lookup"><span data-stu-id="b8b47-105">A complex desktop application doesn't work in isolation and needs some kind of interaction with subsystems that may reside on the local machine or on a remote server.</span></span> <span data-ttu-id="b8b47-106">Ele provavelmente precisará de algum tipo de banco de dados para se conectar como um armazenamento de persistência, seja local ou remotamente.</span><span class="sxs-lookup"><span data-stu-id="b8b47-106">It will probably need some kind of database to connect as a persistence storage either locally or remotely.</span></span> <span data-ttu-id="b8b47-107">Com a elevação de arquiteturas orientadas a serviços e da Internet, é comum ter seu aplicativo conectado a algum tipo de serviço que reside em um servidor remoto ou na nuvem.</span><span class="sxs-lookup"><span data-stu-id="b8b47-107">With the raise of Internet and service-oriented architectures, it's common to have your application connected to some sort of service residing on a remote server or in the cloud.</span></span> <span data-ttu-id="b8b47-108">Talvez seja necessário acessar o sistema de arquivos da máquina para implementar algumas funcionalidades.</span><span class="sxs-lookup"><span data-stu-id="b8b47-108">You may need to access the machine file system to implement some functionality.</span></span> <span data-ttu-id="b8b47-109">Como alternativa, talvez você esteja usando uma parte da funcionalidade que reside dentro de um objeto COM fora do seu aplicativo, que é um cenário comum se, por exemplo, você estiver integrando assemblies do Office em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b8b47-109">Alternatively, maybe you're using a piece of functionality that resides inside a COM object outside your application, which is a common scenario if, for example, you're integrating Office assemblies in your app.</span></span>

<span data-ttu-id="b8b47-110">Além disso, há diferenças na superfície de API que é exposta pelo .NET Framework e pelo .NET Core, e alguns recursos que estão disponíveis em .NET Framework não estão disponíveis no .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-110">Besides, there are differences in the API surface that is exposed by .NET Framework and .NET Core, and some features that are available on .NET Framework aren't available on .NET Core.</span></span> <span data-ttu-id="b8b47-111">Portanto, é importante saber e levá-los em conta ao planejar uma migração.</span><span class="sxs-lookup"><span data-stu-id="b8b47-111">So, it's important for you to know and take them into account when planning a migration.</span></span>

## <a name="configuration-files"></a><span data-ttu-id="b8b47-112">Arquivos de configuração</span><span class="sxs-lookup"><span data-stu-id="b8b47-112">Configuration files</span></span>

<span data-ttu-id="b8b47-113">Os arquivos de configuração oferecem a possibilidade de armazenar conjuntos de propriedades que são lidas em tempo de execução e afetam o comportamento de nossos aplicativos, como onde localizar um banco de dados ou quantas vezes executar um loop.</span><span class="sxs-lookup"><span data-stu-id="b8b47-113">Configuration files offer the possibility to store sets of properties that are read at run time and affect the behavior of our apps, such as where to locate a database or how many times to execute a loop.</span></span> <span data-ttu-id="b8b47-114">A beleza dessa técnica é que você pode modificar alguns aspectos do aplicativo sem a necessidade de recodificar e recompilar.</span><span class="sxs-lookup"><span data-stu-id="b8b47-114">The beauty of this technique is that you can modify some aspects of the application without the need to recode and recompile.</span></span> <span data-ttu-id="b8b47-115">Isso é útil quando, por exemplo, o mesmo código de aplicativo é executado em um ambiente de desenvolvimento com um determinado conjunto de valores de configuração e em produção com um diferente.</span><span class="sxs-lookup"><span data-stu-id="b8b47-115">This comes in handy when, for example, the same app code runs on a development environment with a certain set of configuration values and in production with a different one.</span></span>

### <a name="configuration-on-net-framework"></a><span data-ttu-id="b8b47-116">Configuração no .NET Framework</span><span class="sxs-lookup"><span data-stu-id="b8b47-116">Configuration on .NET Framework</span></span>

<span data-ttu-id="b8b47-117">Se você tiver um aplicativo de área de trabalho .NET Framework em funcionamento, é provável que você tenha um arquivo de *app.config* acessado por meio da <xref:System.Configuration.AppSettingsSection> classe do `System.Configuration` namespace.</span><span class="sxs-lookup"><span data-stu-id="b8b47-117">If you have a working .NET Framework desktop application, chances are you have an *app.config* file accessed through the <xref:System.Configuration.AppSettingsSection> class from the `System.Configuration` namespace.</span></span>

<span data-ttu-id="b8b47-118">Dentro da infraestrutura de .NET Framework, há uma hierarquia de arquivos de configuração que herdam Propriedades de seus pais.</span><span class="sxs-lookup"><span data-stu-id="b8b47-118">Within the .NET Framework infrastructure, there's a hierarchy of configuration files that inherit properties from its parents.</span></span> <span data-ttu-id="b8b47-119">Você pode encontrar um arquivo de *machine.config* que define muitas propriedades e seções de configuração que podem ser usadas ou substituídas em qualquer arquivo de configuração descendente.</span><span class="sxs-lookup"><span data-stu-id="b8b47-119">You can find a *machine.config* file that defines many properties and configuration sections that can be used or overridden in any descendant configuration file.</span></span>

### <a name="configuration-on-net-core"></a><span data-ttu-id="b8b47-120">Configuração no .NET Core</span><span class="sxs-lookup"><span data-stu-id="b8b47-120">Configuration on .NET Core</span></span>

<span data-ttu-id="b8b47-121">No mundo do .NET Core, não há *machine.config* arquivo.</span><span class="sxs-lookup"><span data-stu-id="b8b47-121">In the .NET Core world, there's no *machine.config* file.</span></span> <span data-ttu-id="b8b47-122">E, embora você possa continuar a usar o <xref:System.Configuration> namespace antigo, você pode considerar a mudança para o moderno <xref:Microsoft.Extensions.Configuration> , que oferece um bom número de aprimoramentos.</span><span class="sxs-lookup"><span data-stu-id="b8b47-122">And even though you can continue to use the old fashioned <xref:System.Configuration> namespace, you may consider switching to the modern <xref:Microsoft.Extensions.Configuration>, which offers a good number of enhancements.</span></span>

<span data-ttu-id="b8b47-123">A API de configuração dá suporte ao conceito de provedor de configuração, que define a fonte de dados a ser usada para carregar a configuração.</span><span class="sxs-lookup"><span data-stu-id="b8b47-123">The configuration API supports the concept of configuration provider, which defines the data source to be used to load the configuration.</span></span> <span data-ttu-id="b8b47-124">Há diferentes tipos de provedores internos, como:</span><span class="sxs-lookup"><span data-stu-id="b8b47-124">There are different kinds of built-in providers, such as:</span></span>

- <span data-ttu-id="b8b47-125">Objetos do .NET na memória</span><span class="sxs-lookup"><span data-stu-id="b8b47-125">In-memory .NET objects</span></span>
- <span data-ttu-id="b8b47-126">Arquivos INI</span><span class="sxs-lookup"><span data-stu-id="b8b47-126">INI files</span></span>
- <span data-ttu-id="b8b47-127">Arquivos JSON</span><span class="sxs-lookup"><span data-stu-id="b8b47-127">JSON files</span></span>
- <span data-ttu-id="b8b47-128">Arquivos XML</span><span class="sxs-lookup"><span data-stu-id="b8b47-128">XML files</span></span>
- <span data-ttu-id="b8b47-129">Argumentos de linha de comando</span><span class="sxs-lookup"><span data-stu-id="b8b47-129">Command-line arguments</span></span>
- <span data-ttu-id="b8b47-130">Variáveis de ambiente</span><span class="sxs-lookup"><span data-stu-id="b8b47-130">Environment variables</span></span>
- <span data-ttu-id="b8b47-131">Armazenamento de usuário criptografado</span><span class="sxs-lookup"><span data-stu-id="b8b47-131">Encrypted user store</span></span>

 <span data-ttu-id="b8b47-132">Ou você pode criar o seu próprio.</span><span class="sxs-lookup"><span data-stu-id="b8b47-132">Or you can build your own.</span></span>

<span data-ttu-id="b8b47-133">A nova configuração permite uma lista de pares de nome-valor que podem ser agrupados em uma hierarquia de vários níveis.</span><span class="sxs-lookup"><span data-stu-id="b8b47-133">The new configuration allows a list of name-value pairs that can be grouped into a multi-level hierarchy.</span></span> <span data-ttu-id="b8b47-134">Qualquer valor armazenado é mapeado para uma cadeia de caracteres e há suporte de ligação interna que permite desserializar as configurações em um objeto POCO (objeto CLR antigo) personalizado.</span><span class="sxs-lookup"><span data-stu-id="b8b47-134">Any stored value maps to a string, and there's built-in binding support that allows you to deserialize settings into a custom plain old CLR object (POCO) object.</span></span>

<span data-ttu-id="b8b47-135">O <xref:Microsoft.Extensions.Configuration.ConfigurationBuilder> objeto permite que você adicione quantos provedores de configuração talvez precisem para seu aplicativo, usando uma regra de precedência para resolver a preferência.</span><span class="sxs-lookup"><span data-stu-id="b8b47-135">The <xref:Microsoft.Extensions.Configuration.ConfigurationBuilder> object lets you add as many configuration providers you may need for your application, using a precedence rule to resolve preference.</span></span> <span data-ttu-id="b8b47-136">Portanto, o último provedor adicionado em seu código substituirá os outros.</span><span class="sxs-lookup"><span data-stu-id="b8b47-136">So, the last provider you add in your code will override the others.</span></span> <span data-ttu-id="b8b47-137">Esse é um ótimo recurso para gerenciar ambientes diferentes para execução, já que você pode definir configurações diferentes para ambientes de desenvolvimento, teste e produção e gerenciá-los em uma única função dentro de seu código.</span><span class="sxs-lookup"><span data-stu-id="b8b47-137">This is a great feature for managing different environments for execution since you can define different configurations for development, testing and production environments, and manage them on a single function inside your code.</span></span>

### <a name="migrating-configuration-files"></a><span data-ttu-id="b8b47-138">Migrando arquivos de configuração</span><span class="sxs-lookup"><span data-stu-id="b8b47-138">Migrating Configuration files</span></span>

<span data-ttu-id="b8b47-139">Você pode continuar a usar o arquivo XML app.config existente.</span><span class="sxs-lookup"><span data-stu-id="b8b47-139">You can continue to use your existing app.config XML file.</span></span> <span data-ttu-id="b8b47-140">No entanto, você pode aproveitar essa oportunidade para migrar sua configuração para se beneficiar de vários aprimoramentos feitos no .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-140">However, you could take this opportunity to migrate your configuration to benefit from the several enhancements made on .NET Core.</span></span>

<span data-ttu-id="b8b47-141">Para migrar de um *app.config* de estilo antigo para um novo arquivo de configuração, você deve escolher entre um formato XML e um formato JSON.</span><span class="sxs-lookup"><span data-stu-id="b8b47-141">To migrate from an old-style *app.config* to a new configuration file, you should choose between an XML format and a JSON format.</span></span>

<span data-ttu-id="b8b47-142">Se você escolher XML, a conversão será simples.</span><span class="sxs-lookup"><span data-stu-id="b8b47-142">If you choose XML, the conversion is straightforward.</span></span> <span data-ttu-id="b8b47-143">Como o conteúdo é o mesmo, basta renomear o arquivo de *app.config* em um arquivo com a extensão XML.</span><span class="sxs-lookup"><span data-stu-id="b8b47-143">Since the content is the same, just rename the *app.config* file to a file with XML extension.</span></span> <span data-ttu-id="b8b47-144">Em seguida, altere o código que faz referência a AppSettings para usar a `ConfigurationBuilder` classe.</span><span class="sxs-lookup"><span data-stu-id="b8b47-144">Then, change the code that references AppSettings to use the `ConfigurationBuilder` class.</span></span> <span data-ttu-id="b8b47-145">Essa alteração deve ser fácil.</span><span class="sxs-lookup"><span data-stu-id="b8b47-145">This change should be easy.</span></span>

<span data-ttu-id="b8b47-146">Se você quiser usar um formato JSON e não quiser migrar manualmente, há uma ferramenta chamada [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) disponível no .NET Core que pode converter um arquivo de *app.config* em um arquivo de configuração JSON.</span><span class="sxs-lookup"><span data-stu-id="b8b47-146">If you want to use a JSON format and you don't want to migrate by hand, there's a tool called [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) available on .NET Core that can convert an *app.config* file to a JSON configuration file.</span></span>

<span data-ttu-id="b8b47-147">Você também pode ter alguns problemas ao usar as seções de configuração que foram definidas no arquivo *machine.config* .</span><span class="sxs-lookup"><span data-stu-id="b8b47-147">You may also come across some issues when using configuration sections that were defined in the *machine.config* file.</span></span> <span data-ttu-id="b8b47-148">Por exemplo, considere a seguinte configuração:</span><span class="sxs-lookup"><span data-stu-id="b8b47-148">For example, consider the following configuration:</span></span>

```xml
<configuration>
    <system.diagnostics>
        <switches>
            <add name="General" value="4" />
        </switches>
        <trace autoflush="true" indentsize="2">
            <listeners>
                <add name="myListener"
                     type="System.Diagnostics.TextWriterTraceListener,
                           System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
                     initializeData="MyListener.log"
                     traceOutputOptions="ProcessId, LogicalOperationStack, Timestamp, ThreadId, Callstack, DateTime" />
            </listeners>
        </trace>
    </system.diagnostics>
</configuration>
```

<span data-ttu-id="b8b47-149">Se você usar essa configuração para um .NET Core, obterá uma exceção:</span><span class="sxs-lookup"><span data-stu-id="b8b47-149">If you take this configuration to a .NET Core, you'll get an exception:</span></span>

<span data-ttu-id="b8b47-150">Seção de configuração não reconhecida System. Diagnostics</span><span class="sxs-lookup"><span data-stu-id="b8b47-150">Unrecognized configuration section system.diagnostics</span></span>

<span data-ttu-id="b8b47-151">Essa exceção ocorre porque essa seção e o assembly responsável por lidar com essa seção foram definidos no arquivo de *machine.config* , que agora não existe.</span><span class="sxs-lookup"><span data-stu-id="b8b47-151">This exception occurs because that section and the assembly responsible for handling that section was defined in the *machine.config* file, which now doesn't exist.</span></span>

<span data-ttu-id="b8b47-152">Para corrigir o problema com facilidade, você pode copiar a definição da seção de seu *machine.config* antigo para o novo arquivo de configuração:</span><span class="sxs-lookup"><span data-stu-id="b8b47-152">To easily fix the issue, you can copy the section definition from your old *machine.config* to your new configuration file:</span></span>

```xml
<configSections>
    <section name="system.diagnostics"
             type="System.Diagnostics.SystemDiagnosticsSection,
                   System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
</configSections>
```

## <a name="accessing-databases"></a><span data-ttu-id="b8b47-153">Acessando bancos de dados</span><span class="sxs-lookup"><span data-stu-id="b8b47-153">Accessing databases</span></span>

<span data-ttu-id="b8b47-154">Quase todos os aplicativos da área de trabalho precisam de algum tipo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b8b47-154">Almost every desktop application needs some kind of database.</span></span> <span data-ttu-id="b8b47-155">Para área de trabalho, é comum encontrar arquiteturas de cliente-servidor com uma conexão direta entre o aplicativo de desktop e o mecanismo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b8b47-155">For desktop, it's common to find client-server architectures with a direct connection between the desktop app and the database engine.</span></span> <span data-ttu-id="b8b47-156">Esses bancos de dados podem ser locais ou remotos, dependendo da necessidade de compartilhar informações entre usuários diferentes.</span><span class="sxs-lookup"><span data-stu-id="b8b47-156">These databases can be local or remote depending on the need to share information between different users.</span></span>

<span data-ttu-id="b8b47-157">Da perspectiva do código, houve muitas tecnologias e estruturas para dar ao desenvolvedor a possibilidade de conectar, consultar e atualizar um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b8b47-157">From the code perspective, there have been many technologies and frameworks to give the developer the possibility to connect, query, and update a database.</span></span>

<span data-ttu-id="b8b47-158">Os exemplos mais comuns de banco de dados que você pode encontrar ao falar sobre o aplicativo da área de trabalho do Windows são o Microsoft Access e o Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b8b47-158">The most common examples of database you can find when talking about Windows Desktop application are Microsoft Access and Microsoft SQL Server.</span></span> <span data-ttu-id="b8b47-159">Se você tiver mais de 20 anos de programação de experiência para a área de trabalho, nomes como ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ e Entity Framework parecerão familiares.</span><span class="sxs-lookup"><span data-stu-id="b8b47-159">If you have more than 20 years of experience programming for the desktop, names like ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ, and Entity Framework will sound familiar.</span></span>

### <a name="odbc"></a><span data-ttu-id="b8b47-160">ODBCODBC</span><span class="sxs-lookup"><span data-stu-id="b8b47-160">ODBC</span></span>

<span data-ttu-id="b8b47-161">Você pode continuar a usar o ODBC no .NET Core, uma vez que a Microsoft está fornecendo a `System.Data.Odbc` biblioteca compatível com o .NET Standard 2,0.</span><span class="sxs-lookup"><span data-stu-id="b8b47-161">You can continue to use ODBC on .NET Core since Microsoft is providing the `System.Data.Odbc` library compatible with .NET Standard 2.0.</span></span>

### <a name="ole-db"></a><span data-ttu-id="b8b47-162">OLE DB</span><span class="sxs-lookup"><span data-stu-id="b8b47-162">OLE DB</span></span>

<span data-ttu-id="b8b47-163">[OLE DB](/previous-versions/windows/desktop/ms722784(v=vs.85))   tem sido uma ótima maneira de acessar várias fontes de dados de maneira uniforme.</span><span class="sxs-lookup"><span data-stu-id="b8b47-163">[OLE DB](/previous-versions/windows/desktop/ms722784(v=vs.85)) has been a great way to access various data sources in a uniform manner.</span></span> <span data-ttu-id="b8b47-164">Mas foi baseado em COM, que é uma tecnologia somente Windows, e como tal não era a melhor opção para uma tecnologia de plataforma cruzada, como o .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-164">But it was based on COM, which is a Windows-only technology, and as such wasn't the best fit for a cross-platform technology such as .NET Core.</span></span> <span data-ttu-id="b8b47-165">Também não há suporte no SQL Server versões 2014 e posteriores.</span><span class="sxs-lookup"><span data-stu-id="b8b47-165">It's also unsupported in SQL Server versions 2014 and later.</span></span> <span data-ttu-id="b8b47-166">Por esses motivos, o OLE DB não terá suporte do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-166">For those reasons, OLE DB won't be supported by .NET Core.</span></span>

### <a name="adonet"></a><span data-ttu-id="b8b47-167">ADO.NET</span><span class="sxs-lookup"><span data-stu-id="b8b47-167">ADO.NET</span></span>

<span data-ttu-id="b8b47-168">Você ainda pode usar o ADO.NET do código da área de trabalho existente no .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-168">You can still use ADO.NET from your existing desktop code on .NET Core.</span></span> <span data-ttu-id="b8b47-169">Você só precisa atualizar alguns pacotes NuGet.</span><span class="sxs-lookup"><span data-stu-id="b8b47-169">You just need to update some NuGet packages.</span></span>

### <a name="ef-core-vs-ef6"></a><span data-ttu-id="b8b47-170">EF Core versus EF6</span><span class="sxs-lookup"><span data-stu-id="b8b47-170">EF Core vs. EF6</span></span>

<span data-ttu-id="b8b47-171">Há duas versões atualmente com suporte do Entity Framework (EF), Entity Framework 6 (EF6) e EF Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-171">There are two currently supported versions of Entity Framework (EF), Entity Framework 6 (EF6) and EF Core.</span></span>

<span data-ttu-id="b8b47-172">A última tecnologia lançada como parte do .NET Framework World é Entity Framework, com 6,4 sendo a versão mais recente.</span><span class="sxs-lookup"><span data-stu-id="b8b47-172">The latest technology released as part of the .NET Framework world is Entity Framework, with 6.4 being the latest version.</span></span> <span data-ttu-id="b8b47-173">Com o lançamento do .NET Core, a Microsoft também lançou uma nova pilha de acesso a dados com base em Entity Framework e chamou Entity Framework Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-173">With the launch of .NET Core, Microsoft also released a new data access stack based on Entity Framework and called Entity Framework Core.</span></span>

<span data-ttu-id="b8b47-174">Você pode usar o EF 6,4 e o EF Core do .NET Framework e do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-174">You can use EF 6.4 and EF Core from both .NET Framework and .NET Core.</span></span> <span data-ttu-id="b8b47-175">Então, quais são os drivers de decisão para ajudar a decidir entre os dois?</span><span class="sxs-lookup"><span data-stu-id="b8b47-175">So, what are the decision drivers to help to decide between the two?</span></span>

<span data-ttu-id="b8b47-176">O EF 6,3 é a primeira versão do EF6 que pode ser executada no .NET Core e no trabalho entre plataformas.</span><span class="sxs-lookup"><span data-stu-id="b8b47-176">EF 6.3 is the first version of EF6 that can run on .NET Core and work cross-platform.</span></span> <span data-ttu-id="b8b47-177">Na verdade, a principal meta dessa versão era tornar mais fácil a migração de aplicativos existentes que usam o EF6 para o .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-177">In fact, the main goal of this release was to make it easier to migrate existing applications that use EF6 to .NET Core.</span></span>

<span data-ttu-id="b8b47-178">O EF Core foi criado para fornecer uma experiência de desenvolvedor semelhante ao EF6.</span><span class="sxs-lookup"><span data-stu-id="b8b47-178">EF Core was designed to provide a developer experience similar to EF6.</span></span> <span data-ttu-id="b8b47-179">A maioria das APIs de nível superior continua igual, portanto o EF Core soará familiar para os desenvolvedores que usaram o EF6.</span><span class="sxs-lookup"><span data-stu-id="b8b47-179">Most of the top-level APIs remain the same, so EF Core will feel familiar to developers who have used EF6.</span></span>

<span data-ttu-id="b8b47-180">Embora sejam compatíveis, há diferenças na implementação que você deve verificar antes de tomar uma decisão.</span><span class="sxs-lookup"><span data-stu-id="b8b47-180">Although compatible, there are differences on the implementation you should check before making a decision.</span></span>
<span data-ttu-id="b8b47-181">Para obter mais informações, consulte [comparar EF Core & EF6](/ef/efcore-and-ef6/).</span><span class="sxs-lookup"><span data-stu-id="b8b47-181">For more information, see [Compare EF Core & EF6](/ef/efcore-and-ef6/).</span></span>

<span data-ttu-id="b8b47-182">A recomendação é usar EF Core se:</span><span class="sxs-lookup"><span data-stu-id="b8b47-182">The recommendation is to use EF Core if:</span></span>

* <span data-ttu-id="b8b47-183">O aplicativo precisa das funcionalidades do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-183">The app needs the capabilities of .NET Core.</span></span>
* <span data-ttu-id="b8b47-184">O EF Core dá suporte a todos os recursos que o aplicativo requer.</span><span class="sxs-lookup"><span data-stu-id="b8b47-184">EF Core supports all of the features that the app requires.</span></span>

<span data-ttu-id="b8b47-185">Considere usar o EF6 se as duas condições a seguir forem verdadeiras:</span><span class="sxs-lookup"><span data-stu-id="b8b47-185">Consider using EF6 if both of the following conditions are true:</span></span>

* <span data-ttu-id="b8b47-186">O aplicativo será executado no Windows e .NET Framework 4,0 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="b8b47-186">The app will run on Windows and .NET Framework 4.0 or later.</span></span>
* <span data-ttu-id="b8b47-187">O EF6 é compatível com todos os recursos exigidos pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b8b47-187">EF6 supports all of the features that the app requires.</span></span>

### <a name="relational-databases"></a><span data-ttu-id="b8b47-188">Bancos de dados relacionais</span><span class="sxs-lookup"><span data-stu-id="b8b47-188">Relational databases</span></span>

#### <a name="sql-server"></a><span data-ttu-id="b8b47-189">SQL Server</span><span class="sxs-lookup"><span data-stu-id="b8b47-189">SQL Server</span></span>

<span data-ttu-id="b8b47-190">A SQL Server foi um dos bancos de dados escolhidos se você estivesse desenvolvendo para a área de trabalho há alguns anos.</span><span class="sxs-lookup"><span data-stu-id="b8b47-190">SQL Server has been one of the databases of choice if you were developing for the desktop some years ago.</span></span> <span data-ttu-id="b8b47-191">Com o uso de <xref:System.Data.SqlClient> no .NET Framework, você pode acessar versões do SQL Server, que encapsulam protocolos específicos do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b8b47-191">With the use of <xref:System.Data.SqlClient> in .NET Framework, you could access versions of SQL Server, which encapsulates database-specific protocols.</span></span>

<span data-ttu-id="b8b47-192">No .NET Core, você pode encontrar uma nova `SqlClient` classe, totalmente compatível com aquela existente no .NET Framework, mas localizada na <xref:Microsoft.Data.SqlClient> biblioteca.</span><span class="sxs-lookup"><span data-stu-id="b8b47-192">In .NET Core, you can find a new `SqlClient` class, fully compatible with the one existing in the .NET Framework but located in the <xref:Microsoft.Data.SqlClient> library.</span></span> <span data-ttu-id="b8b47-193">Basta adicionar uma referência ao pacote NuGet [Microsoft. Data. SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) e fazer alguns renomear para os namespaces e tudo deve funcionar conforme o esperado.</span><span class="sxs-lookup"><span data-stu-id="b8b47-193">You just have to add a reference to the [Microsoft.Data.SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) NuGet package and do some renaming for the namespaces and everything should work as expected.</span></span>

#### <a name="microsoft-access"></a><span data-ttu-id="b8b47-194">Microsoft Access</span><span class="sxs-lookup"><span data-stu-id="b8b47-194">Microsoft Access</span></span>

<span data-ttu-id="b8b47-195">O Microsoft Access foi usado há anos em que a SQL Server sofisticada e mais escalonável não era necessária.</span><span class="sxs-lookup"><span data-stu-id="b8b47-195">Microsoft Access has been used for years when the sophisticated and more scalable SQL Server wasn't needed.</span></span> <span data-ttu-id="b8b47-196">Você ainda pode se conectar ao Microsoft Access usando a <xref:System.Data.Odbc> biblioteca do.</span><span class="sxs-lookup"><span data-stu-id="b8b47-196">You can still connect to Microsoft Access using the <xref:System.Data.Odbc> library.</span></span>

## <a name="consuming-services"></a><span data-ttu-id="b8b47-197">Consumindo serviços</span><span class="sxs-lookup"><span data-stu-id="b8b47-197">Consuming services</span></span>

<span data-ttu-id="b8b47-198">Com o aumento das arquiteturas orientadas a serviços, os aplicativos da área de trabalho começaram a evoluir de um modelo cliente-servidor para a abordagem de três camadas.</span><span class="sxs-lookup"><span data-stu-id="b8b47-198">With the raise of service-oriented architectures, desktop applications began to evolve from a client-server model to the three-layer approach.</span></span> <span data-ttu-id="b8b47-199">Na abordagem de cliente-servidor, uma conexão de banco de dados direta é estabelecida do cliente que contém a lógica de negócios geralmente dentro de um único arquivo EXE.</span><span class="sxs-lookup"><span data-stu-id="b8b47-199">In the client-server approach, a direct database connection is established from the client holding the business logic usually inside a single EXE file.</span></span> <span data-ttu-id="b8b47-200">Por outro lado, a abordagem de três camadas estabelece uma camada de serviço intermediária que implementa a lógica de negócios e o acesso ao banco de dados, permitindo melhor segurança, escalabilidade e reutilização.</span><span class="sxs-lookup"><span data-stu-id="b8b47-200">On the other hand, the three-layer approach establishes an intermediate service layer implementing business logic and database access allowing for better security, scalability, and reusability.</span></span> <span data-ttu-id="b8b47-201">Em vez de trabalhar diretamente com conjuntos de dados, a abordagem de camada depende de um conjunto de serviços que implementam contratos e tipos de objetos como uma maneira de implementar a transferência de dados.</span><span class="sxs-lookup"><span data-stu-id="b8b47-201">Instead of working directly with datasets of data, the layer approach relies in a set of services implementing contracts and types objects as a way to implement data transfer.</span></span>

<span data-ttu-id="b8b47-202">Se você tiver um aplicativo de desktop usando um serviço WCF e quiser migrá-lo para o .NET Core, haverá algumas coisas a serem consideradas.</span><span class="sxs-lookup"><span data-stu-id="b8b47-202">If you have a desktop application using a WCF service and you want to migrate it to .NET Core, there are some things to consider.</span></span>

<span data-ttu-id="b8b47-203">A primeira coisa é como resolver a configuração para acessar o serviço.</span><span class="sxs-lookup"><span data-stu-id="b8b47-203">The first thing is how to resolve the configuration to access the service.</span></span> <span data-ttu-id="b8b47-204">Como a configuração é diferente no .NET Core, você precisará fazer algumas atualizações em seu arquivo de configuração.</span><span class="sxs-lookup"><span data-stu-id="b8b47-204">Because the configuration is different on .NET Core, you'll need to make some updates in your configuration file.</span></span>

<span data-ttu-id="b8b47-205">Em segundo lugar, você precisará regenerar o cliente de serviço com as novas ferramentas presentes no Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="b8b47-205">Second, you'll need to regenerate the service client with the new tools present on Visual Studio 2019.</span></span> <span data-ttu-id="b8b47-206">Nesta etapa, você deve considerar a ativação da geração das operações síncronas para tornar o cliente compatível com seu código existente.</span><span class="sxs-lookup"><span data-stu-id="b8b47-206">In this step, you must consider activating the generation of the synchronous operations to make the client compatible with your existing code.</span></span>

<span data-ttu-id="b8b47-207">Após a migração, se você achar que há bibliotecas necessárias que não estão presentes no .NET Core, você pode adicionar uma referência ao pacote NuGet [Microsoft. Windows. Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) e ver se as funções ausentes estão lá.</span><span class="sxs-lookup"><span data-stu-id="b8b47-207">After the migration, if you find that there are libraries you need that aren't present on .NET Core, you can add a reference to the [Microsoft.Windows.Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) NuGet package and see if the missing functions are there.</span></span>

<span data-ttu-id="b8b47-208">Se você estiver usando a <xref:System.Net.WebRequest> classe para executar chamadas de serviço Web, poderá encontrar algumas diferenças no .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-208">If you're using the <xref:System.Net.WebRequest> class to perform web service calls, you may find some differences on .NET Core.</span></span> <span data-ttu-id="b8b47-209">A recomendação é usar o System .net. http. HttpClient em vez disso.</span><span class="sxs-lookup"><span data-stu-id="b8b47-209">The recommendation is to use the System.Net.Http.HttpClient instead.</span></span>

## <a name="consuming-a-com-object"></a><span data-ttu-id="b8b47-210">Consumindo um objeto COM</span><span class="sxs-lookup"><span data-stu-id="b8b47-210">Consuming a COM Object</span></span>

<span data-ttu-id="b8b47-211">Atualmente, não há como adicionar uma referência a um objeto COM do Visual Studio 2019 para usar com o .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-211">Currently, there's no way to add a reference to a COM object from Visual Studio 2019 to use with .NET Core.</span></span> <span data-ttu-id="b8b47-212">Portanto, você precisa modificar manualmente o arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="b8b47-212">So, you have to manually modify the project file.</span></span>

<span data-ttu-id="b8b47-213">Insira uma `COMReference` estrutura dentro do arquivo de projeto, como no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="b8b47-213">Insert a `COMReference` structure inside the project file like in the following example:</span></span>

```xml
<ItemGroup>
    <COMReference Include="MSHTML">
        <Guid>{3050F1C5-98B5-11CF-BB82-00AA00BDCE0B}\</Guid>
        <VersionMajor>4</VersionMajor>
        <VersionMinor>0</VersionMinor>
        <Lcid>0</Lcid>
        <WrapperTool>primary</WrapperTool>
        <Isolated>false</Isolated>
    </COMReference>
</ItemGroup>
```

## <a name="more-things-to-consider"></a><span data-ttu-id="b8b47-214">Mais coisas a serem consideradas</span><span class="sxs-lookup"><span data-stu-id="b8b47-214">More things to consider</span></span>

<span data-ttu-id="b8b47-215">Várias tecnologias disponíveis para .NET Framework bibliotecas não estão disponíveis para o .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-215">Several technologies available to .NET Framework libraries aren't available for .NET Core.</span></span> <span data-ttu-id="b8b47-216">Se o seu código depender de algumas dessas tecnologias, considere as abordagens alternativas descritas nesta seção.</span><span class="sxs-lookup"><span data-stu-id="b8b47-216">If your code relies on some of these technologies, consider the alternative approaches outlined in this section.</span></span>

<span data-ttu-id="b8b47-217">O [pacote de compatibilidade do Windows](../../core/porting/windows-compat-pack.md) fornece acesso a APIs que estavam disponíveis anteriormente apenas para .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="b8b47-217">The [Windows Compatibility Pack](../../core/porting/windows-compat-pack.md) provides access to APIs that were previously available only for .NET Framework.</span></span> <span data-ttu-id="b8b47-218">Ele pode ser usado em projetos .NET Core e .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="b8b47-218">It can be used on .NET Core and .NET Standard projects.</span></span>

<span data-ttu-id="b8b47-219">Para obter mais informações sobre a compatibilidade de API, você pode encontrar a documentação sobre alterações significativas e APIs preteridas/herdadas em <https://docs.microsoft.com/dotnet/core/compatibility/fx-core> .</span><span class="sxs-lookup"><span data-stu-id="b8b47-219">For more information on API compatibility, you can find documentation about breaking changes and deprecated/legacy APIs at <https://docs.microsoft.com/dotnet/core/compatibility/fx-core>.</span></span>

### <a name="appdomains"></a><span data-ttu-id="b8b47-220">AppDomains</span><span class="sxs-lookup"><span data-stu-id="b8b47-220">AppDomains</span></span>

<span data-ttu-id="b8b47-221">Os domínios do aplicativo (AppDomains) isolam os aplicativos uns dos outros.</span><span class="sxs-lookup"><span data-stu-id="b8b47-221">Application domains (AppDomains) isolate apps from one another.</span></span> <span data-ttu-id="b8b47-222">Os AppDomains exigem suporte a tempo de execução e são caros.</span><span class="sxs-lookup"><span data-stu-id="b8b47-222">AppDomains require runtime support and are expensive.</span></span> <span data-ttu-id="b8b47-223">Não há suporte para a criação de domínios de aplicativo adicionais.</span><span class="sxs-lookup"><span data-stu-id="b8b47-223">Creating additional app domains isn't supported.</span></span> <span data-ttu-id="b8b47-224">Para isolamento de código, recomendamos como alternativa o uso de processos separados ou contêineres.</span><span class="sxs-lookup"><span data-stu-id="b8b47-224">For code isolation, we recommend separate processes or using containers as an alternative.</span></span> <span data-ttu-id="b8b47-225">Para o carregamento dinâmico de assemblies, recomendamos a nova  <xref:System.Runtime.Loader.AssemblyLoadContext> classe.</span><span class="sxs-lookup"><span data-stu-id="b8b47-225">For the dynamic loading of assemblies, we recommend the new <xref:System.Runtime.Loader.AssemblyLoadContext> class.</span></span>

<span data-ttu-id="b8b47-226">Para tornar a migração de código de .NET Framework mais fácil, o .NET Core expõe parte da superfície de API do AppDomain.</span><span class="sxs-lookup"><span data-stu-id="b8b47-226">To make code migration from .NET Framework easier, .NET Core exposes some of the AppDomain API surface.</span></span> <span data-ttu-id="b8b47-227">Algumas das APIs normalmente funcionam (por exemplo,  <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType> ), alguns membros não fazem nada (por exemplo,  <xref:System.AppDomain.SetCachePath%2A> ) e alguns deles lançam <xref:System.PlatformNotSupportedException> (por exemplo,  <xref:System.AppDomain.CreateDomain%2A> ).</span><span class="sxs-lookup"><span data-stu-id="b8b47-227">Some of the APIs function normally (for example, <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>), some members do nothing (for example, <xref:System.AppDomain.SetCachePath%2A>), and some of them throw <xref:System.PlatformNotSupportedException> (for example, <xref:System.AppDomain.CreateDomain%2A>).</span></span>

### <a name="remoting"></a><span data-ttu-id="b8b47-228">Comunicação remota</span><span class="sxs-lookup"><span data-stu-id="b8b47-228">Remoting</span></span>

<span data-ttu-id="b8b47-229">O .NET Remoting foi usado para comunicação entre AppDomains, que não é mais suportada.</span><span class="sxs-lookup"><span data-stu-id="b8b47-229">.NET Remoting was used for cross-AppDomain communication, which is no longer supported.</span></span> <span data-ttu-id="b8b47-230">Além disso, a Comunicação Remota exige suporte de runtime, o que é caro para manter.</span><span class="sxs-lookup"><span data-stu-id="b8b47-230">Also, Remoting requires runtime support, which is expensive to maintain.</span></span> <span data-ttu-id="b8b47-231">Por esses motivos, o .NET Remoting não tem suporte no .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-231">For these reasons, .NET Remoting isn't supported on .NET Core.</span></span>

<span data-ttu-id="b8b47-232">Para a comunicação entre processos, você deve considerar os mecanismos de comunicação entre processos (IPC) como uma alternativa à comunicação remota, como a <xref:System.IO.Pipes?displayProperty=nameWithType> ou a <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> classe.</span><span class="sxs-lookup"><span data-stu-id="b8b47-232">For communication across processes, you should consider inter-process communication (IPC) mechanisms as an alternative to Remoting, such as the <xref:System.IO.Pipes?displayProperty=nameWithType> or the <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> class.</span></span>

<span data-ttu-id="b8b47-233">Entre computadores, use uma solução baseada em rede como alternativa.</span><span class="sxs-lookup"><span data-stu-id="b8b47-233">Across machines, use a network-based solution as an alternative.</span></span> <span data-ttu-id="b8b47-234">Preferencialmente, use um protocolo de texto sem formatação de baixa sobrecarga, como HTTP.</span><span class="sxs-lookup"><span data-stu-id="b8b47-234">Preferably, use a low-overhead plaintext protocol, such as HTTP.</span></span> <span data-ttu-id="b8b47-235">O servidor Web Kestrel, o servidor Web usado pelo ASP.NET Core, é uma opção.</span><span class="sxs-lookup"><span data-stu-id="b8b47-235">The Kestrel web server, the web server used by ASP.NET Core, is an option here.</span></span>

### <a name="code-access-security-cas"></a><span data-ttu-id="b8b47-236">CAS (segurança de acesso ao código)</span><span class="sxs-lookup"><span data-stu-id="b8b47-236">Code Access Security (CAS)</span></span>

<span data-ttu-id="b8b47-237">A área restrita, que se baseia no tempo de execução ou na estrutura para restringir quais recursos um aplicativo ou uma biblioteca gerenciada usa ou executa, não tem suporte no .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8b47-237">Sandboxing, which relies on the runtime or the framework to constrain which resources a managed application or library uses or runs, isn't supported on .NET Core.</span></span>

<span data-ttu-id="b8b47-238">Use limites de segurança que são fornecidos pelo sistema operacional, como virtualização, contêineres ou contas de usuário para executar processos com o conjunto mínimo de privilégios.</span><span class="sxs-lookup"><span data-stu-id="b8b47-238">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the minimum set of privileges.</span></span>

### <a name="security-transparency"></a><span data-ttu-id="b8b47-239">Transparência de Segurança</span><span class="sxs-lookup"><span data-stu-id="b8b47-239">Security Transparency</span></span>

<span data-ttu-id="b8b47-240">Assim como a CAS, a Transparência de Segurança separa o código em área restrita do código crítico de segurança de uma forma declarativa, mas não é mais permitida como um limite de segurança.</span><span class="sxs-lookup"><span data-stu-id="b8b47-240">Similar to CAS, Security Transparency separates sandboxed code from security critical code in a declarative fashion but is no longer supported as a security boundary.</span></span>

<span data-ttu-id="b8b47-241">Use limites de segurança que são fornecidos pelo sistema operacional, como virtualização, contêineres ou contas de usuário para executar processos com o menor conjunto de privilégios.</span><span class="sxs-lookup"><span data-stu-id="b8b47-241">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the least set of privileges.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="b8b47-242">[Anterior](whats-new-dotnet-core.md ) 
> [Avançar](windows-migration.md)</span><span class="sxs-lookup"><span data-stu-id="b8b47-242">[Previous](whats-new-dotnet-core.md )
[Next](windows-migration.md)</span></span>
