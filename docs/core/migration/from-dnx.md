---
title: Migrando do DNX para a CLI do .NET Core
description: Migre para mudar do uso de ferramentas de DNX para ferramentas da CLI do .NET Core.
keywords: .NET, .NET Core
author: blackdwarf
ms.author: mairaw
ms.date: 06/20/2016
ms.topic: article
ms.prod: .net-core
ms.devlang: dotnet
ms.assetid: c0d70120-78c8-4d26-bb3c-801f42fc2366
ms.workload:
- dotnetcore
ms.openlocfilehash: dba38de28dc15147e5bcc5bf4cede9f4dd5fca62
ms.sourcegitcommit: c883637b41ee028786edceece4fa872939d2e64c
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/26/2018
---
# <a name="migrating-from-dnx-to-net-core-cli-projectjson"></a><span data-ttu-id="6a347-104">Migrando do DNX para a CLI do .NET Core (project.json)</span><span class="sxs-lookup"><span data-stu-id="6a347-104">Migrating from DNX to .NET Core CLI (project.json)</span></span>

## <a name="overview"></a><span data-ttu-id="6a347-105">Visão geral</span><span class="sxs-lookup"><span data-stu-id="6a347-105">Overview</span></span>
<span data-ttu-id="6a347-106">A versão RC1 do .NET Core e ASP.NET Core 1.0 introduziu ferramentas DNX.</span><span class="sxs-lookup"><span data-stu-id="6a347-106">The RC1 release of .NET Core and ASP.NET Core 1.0 introduced DNX tooling.</span></span> <span data-ttu-id="6a347-107">A versão RC2 do .NET Core e ASP.NET Core 1.0 mudou do DNX para a CLI do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="6a347-107">The RC2 release of .NET Core and ASP.NET Core 1.0 moved from DNX to the .NET Core CLI.</span></span>

<span data-ttu-id="6a347-108">Como um ligeiro lembrete, vamos recapitular o que foi o DNX.</span><span class="sxs-lookup"><span data-stu-id="6a347-108">As a slight refresher, let's recap what DNX was about.</span></span> <span data-ttu-id="6a347-109">O DNX era um tempo de execução e um conjunto de ferramentas usado para criar aplicativos do .NET Core e, mais especificamente, do ASP.NET Core 1.0.</span><span class="sxs-lookup"><span data-stu-id="6a347-109">DNX was a runtime and a toolset used to build .NET Core and, more specifically, ASP.NET Core 1.0 applications.</span></span> <span data-ttu-id="6a347-110">Ele era composto por 3 partes principais:</span><span class="sxs-lookup"><span data-stu-id="6a347-110">It consisted of 3 main pieces:</span></span>

1. <span data-ttu-id="6a347-111">DNVM – um script de instalação para obter o DNX</span><span class="sxs-lookup"><span data-stu-id="6a347-111">DNVM - an install script for obtaining DNX</span></span>
2. <span data-ttu-id="6a347-112">DNX (Dotnet Execution Runtime) – o tempo de execução que executa o código</span><span class="sxs-lookup"><span data-stu-id="6a347-112">DNX (Dotnet Execution Runtime) - the runtime that executes your code</span></span>
3. <span data-ttu-id="6a347-113">DNU (Dotnet Developer Utility) – ferramentas para gerenciar dependências, criar e publicar seus aplicativos</span><span class="sxs-lookup"><span data-stu-id="6a347-113">DNU (Dotnet Developer Utility) - tooling for managing dependencies, building and publishing your applications</span></span>

<span data-ttu-id="6a347-114">Com a introdução da CLI, todos os itens acima agora fazem parte de um único conjunto de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="6a347-114">With the introduction of the CLI, all of the above are now part of a single toolset.</span></span> <span data-ttu-id="6a347-115">No entanto, como o DNX estava disponível na época do RC1, você poderá ter projetos que foram criados usando com ele, os quais terão que ser movidos para as novas ferramentas da CLI.</span><span class="sxs-lookup"><span data-stu-id="6a347-115">However, since DNX was available in RC1 timeframe, you might have projects that were built using it that you would want to move off to the new CLI tooling.</span></span> 

<span data-ttu-id="6a347-116">Este guia de migração abordará os princípios básicos de como migrar projetos do DNX para a CLI do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="6a347-116">This migration guide will cover the essentials on how to migrate projects off of DNX and onto .NET Core CLI.</span></span> <span data-ttu-id="6a347-117">Se você estiver começando um projeto no .NET Core do zero, poderá ignorar totalmente este documento.</span><span class="sxs-lookup"><span data-stu-id="6a347-117">If you are just starting a project on .NET Core from scratch, you can freely skip this document.</span></span> 

## <a name="main-changes-in-the-tooling"></a><span data-ttu-id="6a347-118">Principais mudanças nas ferramentas</span><span class="sxs-lookup"><span data-stu-id="6a347-118">Main changes in the tooling</span></span>
<span data-ttu-id="6a347-119">Há algumas das mudanças gerais nas ferramentas que devem ser descritas primeiro.</span><span class="sxs-lookup"><span data-stu-id="6a347-119">There are some general changes in the tooling that should be outlined first.</span></span> 

### <a name="no-more-dnvm"></a><span data-ttu-id="6a347-120">Não há mais DNVM</span><span class="sxs-lookup"><span data-stu-id="6a347-120">No more DNVM</span></span>
<span data-ttu-id="6a347-121">DNVM, abreviação de *DotNet Version Manager* foi um script do bash/PowerShell usado para instalar um DNX em seu computador.</span><span class="sxs-lookup"><span data-stu-id="6a347-121">DNVM, short for *DotNet Version Manager* was a bash/PowerShell script used to install a DNX on your machine.</span></span> <span data-ttu-id="6a347-122">Ele ajudou os usuários a obter o DNX necessário do feed especificado (ou padrão), bem como marcar um determinado DNX como "ativo", que o colocaria no $PATH de determinada sessão.</span><span class="sxs-lookup"><span data-stu-id="6a347-122">It helped users get the DNX they need from the feed they specified (or default ones) as well as mark a certain DNX "active", which would put it on the $PATH for the given session.</span></span> <span data-ttu-id="6a347-123">Isso permitiria que você usasse as várias ferramentas.</span><span class="sxs-lookup"><span data-stu-id="6a347-123">This would allow you to use the various tools.</span></span>

<span data-ttu-id="6a347-124">O DNVM foi descontinuado porque o conjunto de recursos tornou-se redundante devido às mudanças planejadas para as ferramentas da CLI do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="6a347-124">DNVM was discontinued because its feature set was made redundant by changes coming in the .NET Core CLI tools.</span></span>

<span data-ttu-id="6a347-125">As ferramentas da CLI são empacotadas de duas maneiras principais:</span><span class="sxs-lookup"><span data-stu-id="6a347-125">The CLI tools come packaged in two main ways:</span></span>

1. <span data-ttu-id="6a347-126">Instaladores nativos para uma determinada plataforma</span><span class="sxs-lookup"><span data-stu-id="6a347-126">Native installers for a given platform</span></span>
2. <span data-ttu-id="6a347-127">Instalam o script em outras situações (como servidores CI)</span><span class="sxs-lookup"><span data-stu-id="6a347-127">Install script for other situations (like CI servers)</span></span>

<span data-ttu-id="6a347-128">Devido a isso, os recursos de instalação do DNVM não são necessários.</span><span class="sxs-lookup"><span data-stu-id="6a347-128">Given this, the DNVM install features are not needed.</span></span> <span data-ttu-id="6a347-129">Mas e quanto aos recursos de seleção de tempo de execução?</span><span class="sxs-lookup"><span data-stu-id="6a347-129">But what about the runtime selection features?</span></span> 

<span data-ttu-id="6a347-130">Um tempo de execução é referenciado em seu `project.json` adicionando um pacote de uma determinada versão às suas dependências.</span><span class="sxs-lookup"><span data-stu-id="6a347-130">You reference a runtime in your `project.json` by adding a package of a certain version to your dependencies.</span></span> <span data-ttu-id="6a347-131">Com essa alteração, seu aplicativo poderá usar os novos bits de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="6a347-131">With this change, your application will be able to use the new runtime bits.</span></span> <span data-ttu-id="6a347-132">Levar esses bits para seu computador é o mesmo que na CLI: você instala o tempo de execução por meio de um dos instaladores nativos com suporte ou por meio do script de instalação.</span><span class="sxs-lookup"><span data-stu-id="6a347-132">Getting these bits to your machine is the same as with the CLI: you install the runtime via one of the native installers it supports or via its install script.</span></span> 

### <a name="different-commands"></a><span data-ttu-id="6a347-133">Comandos diferentes</span><span class="sxs-lookup"><span data-stu-id="6a347-133">Different commands</span></span>
<span data-ttu-id="6a347-134">Se você estivesse usando o DNX, teria usado comandos de uma das suas três partes (DNX, DNU ou DNVM).</span><span class="sxs-lookup"><span data-stu-id="6a347-134">If you were using DNX, you used some commands from one of its three parts (DNX, DNU or DNVM).</span></span> <span data-ttu-id="6a347-135">Com a CLI, alguns desses comandos mudaram, outros não estão disponíveis e outros ainda permaneceram os mesmos, mas têm semântica ligeiramente diferente.</span><span class="sxs-lookup"><span data-stu-id="6a347-135">With the CLI, some of these commands change, some are not available and some are the same but have slightly different semantics.</span></span> 

<span data-ttu-id="6a347-136">A tabela a seguir mostra o mapeamento entre os comandos DNX/DNU e seus equivalentes da CLI.</span><span class="sxs-lookup"><span data-stu-id="6a347-136">The table below shows the mapping between the DNX/DNU commands and their CLI counterparts.</span></span>


| <span data-ttu-id="6a347-137">Comando do DNX</span><span class="sxs-lookup"><span data-stu-id="6a347-137">DNX command</span></span>                       | <span data-ttu-id="6a347-138">Comando da CLI</span><span class="sxs-lookup"><span data-stu-id="6a347-138">CLI command</span></span>       | <span data-ttu-id="6a347-139">Descrição</span><span class="sxs-lookup"><span data-stu-id="6a347-139">Description</span></span>                                                                                                       |
|--------------------------------   |----------------   |-----------------------------------------------------------------------------------------------------------------  |
| <span data-ttu-id="6a347-140">dnx run</span><span class="sxs-lookup"><span data-stu-id="6a347-140">dnx run</span></span>                           | <span data-ttu-id="6a347-141">dotnet run</span><span class="sxs-lookup"><span data-stu-id="6a347-141">dotnet run</span></span>        | <span data-ttu-id="6a347-142">Execute o código da origem.</span><span class="sxs-lookup"><span data-stu-id="6a347-142">Run code from source.</span></span>                                                                                             |
| <span data-ttu-id="6a347-143">dnu build</span><span class="sxs-lookup"><span data-stu-id="6a347-143">dnu build</span></span>                         | <span data-ttu-id="6a347-144">dotnet build</span><span class="sxs-lookup"><span data-stu-id="6a347-144">dotnet build</span></span>      | <span data-ttu-id="6a347-145">Crie um binário IL do seu código.</span><span class="sxs-lookup"><span data-stu-id="6a347-145">Build an IL binary of your code.</span></span>                                                                                  |
| <span data-ttu-id="6a347-146">dnu pack</span><span class="sxs-lookup"><span data-stu-id="6a347-146">dnu pack</span></span>                          | <span data-ttu-id="6a347-147">dotnet pack</span><span class="sxs-lookup"><span data-stu-id="6a347-147">dotnet pack</span></span>       | <span data-ttu-id="6a347-148">Empacote um pacote NuGet do seu código.</span><span class="sxs-lookup"><span data-stu-id="6a347-148">Package up a NuGet package of your code.</span></span>                                                                          |
| <span data-ttu-id="6a347-149">dnx \[comando] (por exemplo, "dnx web")</span><span class="sxs-lookup"><span data-stu-id="6a347-149">dnx \[command] (for example, "dnx web")</span></span>   | <span data-ttu-id="6a347-150">N/D\*</span><span class="sxs-lookup"><span data-stu-id="6a347-150">N/A\*</span></span>             | <span data-ttu-id="6a347-151">No mundo DNX, execute um comando conforme definido no project.json.</span><span class="sxs-lookup"><span data-stu-id="6a347-151">In DNX world, run a command as defined in the project.json.</span></span>                                                       |
| <span data-ttu-id="6a347-152">dnu install</span><span class="sxs-lookup"><span data-stu-id="6a347-152">dnu install</span></span>                       | <span data-ttu-id="6a347-153">N/D\*</span><span class="sxs-lookup"><span data-stu-id="6a347-153">N/A\*</span></span>             | <span data-ttu-id="6a347-154">No mundo DNX, instale um pacote como uma dependência.</span><span class="sxs-lookup"><span data-stu-id="6a347-154">In the DNX world, install a package as a dependency.</span></span>                                                              |
| <span data-ttu-id="6a347-155">dnu restore</span><span class="sxs-lookup"><span data-stu-id="6a347-155">dnu restore</span></span>                       | <span data-ttu-id="6a347-156">dotnet restore</span><span class="sxs-lookup"><span data-stu-id="6a347-156">dotnet restore</span></span>    | <span data-ttu-id="6a347-157">Restaure as dependências especificadas no seu project.json.</span><span class="sxs-lookup"><span data-stu-id="6a347-157">Restore dependencies specified in your project.json.</span></span> <span data-ttu-id="6a347-158">([veja observação](#dotnet-restore-note))</span><span class="sxs-lookup"><span data-stu-id="6a347-158">([see note](#dotnet-restore-note))</span></span>                                                               |
| <span data-ttu-id="6a347-159">dnu publish</span><span class="sxs-lookup"><span data-stu-id="6a347-159">dnu publish</span></span>                       | <span data-ttu-id="6a347-160">dotnet publish</span><span class="sxs-lookup"><span data-stu-id="6a347-160">dotnet publish</span></span>    | <span data-ttu-id="6a347-161">Publica seu aplicativo para implantação em uma das três formas (portátil, portátil com nativo e autônomo).</span><span class="sxs-lookup"><span data-stu-id="6a347-161">Publish your application for deployment in one of the three forms (portable, portable with native and standalone).</span></span>    |
| <span data-ttu-id="6a347-162">dnu wrap</span><span class="sxs-lookup"><span data-stu-id="6a347-162">dnu wrap</span></span>                          | <span data-ttu-id="6a347-163">N/D\*</span><span class="sxs-lookup"><span data-stu-id="6a347-163">N/A\*</span></span>             | <span data-ttu-id="6a347-164">No mundo DNX, encapsule um project.json em csproj.</span><span class="sxs-lookup"><span data-stu-id="6a347-164">In DNX world, wrap a project.json in csproj.</span></span>                                                                      |
| <span data-ttu-id="6a347-165">dnu commands</span><span class="sxs-lookup"><span data-stu-id="6a347-165">dnu commands</span></span>                      | <span data-ttu-id="6a347-166">N/D\*</span><span class="sxs-lookup"><span data-stu-id="6a347-166">N/A\*</span></span>             | <span data-ttu-id="6a347-167">No mundo DNX, gerencie os comandos instalados globalmente.</span><span class="sxs-lookup"><span data-stu-id="6a347-167">In DNX world, manage the globally installed commands.</span></span>                                                             |

<span data-ttu-id="6a347-168">(\*) – esses recursos não têm suporte na CLI por padrão.</span><span class="sxs-lookup"><span data-stu-id="6a347-168">(\*) - these features are not supported in the CLI by design.</span></span> 

## <a name="dnx-features-that-are-not-supported"></a><span data-ttu-id="6a347-169">Recursos DNX sem suporte</span><span class="sxs-lookup"><span data-stu-id="6a347-169">DNX features that are not supported</span></span>
<span data-ttu-id="6a347-170">Como mostrado na tabela acima, há recursos do mundo DNX aos quais decidimos não dar suporte na CLI, pelo menos por enquanto.</span><span class="sxs-lookup"><span data-stu-id="6a347-170">As the table above shows, there are features from the DNX world that we decided not to support in the CLI, at least for the time being.</span></span> <span data-ttu-id="6a347-171">Esta seção abordará os mais importantes deles e descreverá os motivos para não dar suporte a eles, bem como soluções alternativas caso você precise deles.</span><span class="sxs-lookup"><span data-stu-id="6a347-171">This section will go through the most important ones and outline the rationale behind not supporting them as well as workarounds if you do need them.</span></span>

### <a name="global-commands"></a><span data-ttu-id="6a347-172">Comandos globais</span><span class="sxs-lookup"><span data-stu-id="6a347-172">Global commands</span></span>
<span data-ttu-id="6a347-173">O DNU vinha com um conceito chamado "comandos globais".</span><span class="sxs-lookup"><span data-stu-id="6a347-173">DNU came with a concept called "global commands".</span></span> <span data-ttu-id="6a347-174">Eles eram, essencialmente, aplicativos de console empacotados como NuGet com um script de shell que invocaria o DNX especificado para executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6a347-174">These were, essentially, console applications packaged up as NuGet packages with a shell script that would invoke the DNX you specified to run the application.</span></span> 

<span data-ttu-id="6a347-175">A CLI não dá suporte a esse conceito.</span><span class="sxs-lookup"><span data-stu-id="6a347-175">The CLI does not support this concept.</span></span> <span data-ttu-id="6a347-176">Contudo, ela dá suporte ao conceito de adição de comandos por projeto, os quais podem ser invocados usando a sintaxe familiar do `dotnet <command>`.</span><span class="sxs-lookup"><span data-stu-id="6a347-176">It does, however, support the concept of adding per-project commands that can be invoked using the familiar `dotnet <command>` syntax.</span></span>

### <a name="installing-dependencies"></a><span data-ttu-id="6a347-177">Instalando dependências</span><span class="sxs-lookup"><span data-stu-id="6a347-177">Installing dependencies</span></span>
<span data-ttu-id="6a347-178">A partir do v1, as ferramentas da CLI do .NET Core não têm um comando `install` para instalar dependências.</span><span class="sxs-lookup"><span data-stu-id="6a347-178">As of v1, the .NET Core CLI tools don't have an `install` command for installing dependencies.</span></span> <span data-ttu-id="6a347-179">Para instalar um pacote NuGet, você precisará adicioná-lo como uma dependência ao arquivo `project.json` e, em seguida, executar `dotnet restore` ([veja observação](#dotnet-restore-note)).</span><span class="sxs-lookup"><span data-stu-id="6a347-179">In order to install a package from NuGet, you would need to add it as a dependency to your `project.json` file and then run `dotnet restore` ([see note](#dotnet-restore-note)).</span></span> 

### <a name="running-your-code"></a><span data-ttu-id="6a347-180">Execução do código</span><span class="sxs-lookup"><span data-stu-id="6a347-180">Running your code</span></span>
<span data-ttu-id="6a347-181">Há duas maneiras principais de executar o código.</span><span class="sxs-lookup"><span data-stu-id="6a347-181">There are two main ways to run your code.</span></span> <span data-ttu-id="6a347-182">Uma delas é da origem, com `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="6a347-182">One is from source, with `dotnet run`.</span></span> <span data-ttu-id="6a347-183">Diferente do `dnx run`, isso não gerará nenhuma compilação na memória.</span><span class="sxs-lookup"><span data-stu-id="6a347-183">Unlike `dnx run`, this will not do any in-memory compilation.</span></span> <span data-ttu-id="6a347-184">Na verdade, isso invocará `dotnet build` para compilar seu código e executar o binário compilado.</span><span class="sxs-lookup"><span data-stu-id="6a347-184">It will actually invoke `dotnet build` to build your code and then run the built binary.</span></span> 

<span data-ttu-id="6a347-185">Outra maneira é usar o `dotnet` para executar seu código.</span><span class="sxs-lookup"><span data-stu-id="6a347-185">Another way is using the `dotnet` itself to run your code.</span></span> <span data-ttu-id="6a347-186">Isso é feito fornecendo um caminho para o assembly: `dotnet path/to/an/assembly.dll`.</span><span class="sxs-lookup"><span data-stu-id="6a347-186">This is done by providing a path to your assembly: `dotnet path/to/an/assembly.dll`.</span></span> 

## <a name="migrating-your-dnx-project-to-net-core-cli"></a><span data-ttu-id="6a347-187">Migrando seu projeto DNX para a CLI do .NET Core</span><span class="sxs-lookup"><span data-stu-id="6a347-187">Migrating your DNX project to .NET Core CLI</span></span>
<span data-ttu-id="6a347-188">Além de usar os novos comandos ao trabalhar com seu código, há três coisas principais que ainda faltam para migrar do DNX:</span><span class="sxs-lookup"><span data-stu-id="6a347-188">In addition to using new commands when working with your code, there are three major things left in migrating from DNX:</span></span>

1. <span data-ttu-id="6a347-189">Migrar o arquivo `global.json` se você quiser que ele possa usar a CLI.</span><span class="sxs-lookup"><span data-stu-id="6a347-189">Migrate the `global.json` file if you have it to be able to use CLI.</span></span>
2. <span data-ttu-id="6a347-190">Migrar o próprio arquivo de projeto (`project.json`) para as ferramentas da CLI.</span><span class="sxs-lookup"><span data-stu-id="6a347-190">Migrating the project file (`project.json`) itself to the CLI tooling.</span></span>
3. <span data-ttu-id="6a347-191">Migrar as APIs DNX para seus equivalentes de BCL.</span><span class="sxs-lookup"><span data-stu-id="6a347-191">Migrating off of any DNX APIs to their BCL counterparts.</span></span> 

### <a name="changing-the-globaljson-file"></a><span data-ttu-id="6a347-192">Alterar o arquivo global.json</span><span class="sxs-lookup"><span data-stu-id="6a347-192">Changing the global.json file</span></span>
<span data-ttu-id="6a347-193">O arquivo `global.json` funciona como um arquivo de solução para projetos RC1 e RC2 (ou posterior).</span><span class="sxs-lookup"><span data-stu-id="6a347-193">The `global.json` file acts like a solution file for both the RC1 and RC2 (or later) projects.</span></span> <span data-ttu-id="6a347-194">Para que as ferramentas CLI (e do Visual Studio) diferenciem entre RC1 e versões posteriores, elas usam a propriedade `"sdk": { "version" }` para fazer a distinção de qual projeto é RC1 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="6a347-194">In order for the CLI tools (as well as Visual Studio) to differentiate between RC1 and later versions, they use the `"sdk": { "version" }` property to make the distinction which project is RC1 or later.</span></span> <span data-ttu-id="6a347-195">Se `global.json` não tiver esse nó, ele será considerado o mais recente.</span><span class="sxs-lookup"><span data-stu-id="6a347-195">If `global.json` doesn't have this node at all, it is assumed to be the latest.</span></span> 

<span data-ttu-id="6a347-196">Para atualizar o arquivo `global.json`, remova a propriedade ou defina-a para a versão exata das ferramentas que você deseja usar, neste caso **1.0.0-preview2-003121**:</span><span class="sxs-lookup"><span data-stu-id="6a347-196">In order to update the `global.json` file, either remove the property or set it to the exact version of the tools that you wish to use, in this case **1.0.0-preview2-003121**:</span></span>

```json
{
    "sdk": {
        "version": "1.0.0-preview2-003121"
    }
}
```

### <a name="migrating-the-project-file"></a><span data-ttu-id="6a347-197">Migrando o arquivo de projeto</span><span class="sxs-lookup"><span data-stu-id="6a347-197">Migrating the project file</span></span>
<span data-ttu-id="6a347-198">A CLI e o DNX usam o mesmo sistema de projeto básico com base no arquivo `project.json`.</span><span class="sxs-lookup"><span data-stu-id="6a347-198">The CLI and DNX both use the same basic project system based on `project.json` file.</span></span> <span data-ttu-id="6a347-199">A sintaxe e a semântica do arquivo de projeto são praticamente as mesmas, com pequenas diferenças dependendo dos cenários.</span><span class="sxs-lookup"><span data-stu-id="6a347-199">The syntax and the semantics of the project file are pretty much the same, with small differences based on the scenarios.</span></span> <span data-ttu-id="6a347-200">Também há algumas alterações no esquema que podem ser vistas no [arquivo de esquema](http://json.schemastore.org/project).</span><span class="sxs-lookup"><span data-stu-id="6a347-200">There are also some changes to the schema which you can see in the [schema file](http://json.schemastore.org/project).</span></span>

<span data-ttu-id="6a347-201">Se você estiver criando um aplicativo de console, precisará adicionar o trecho de código a seguir ao arquivo de projeto:</span><span class="sxs-lookup"><span data-stu-id="6a347-201">If you are building a console application, you need to add the following snippet to your project file:</span></span>

```json
"buildOptions": {
    "emitEntryPoint": true
}
```

<span data-ttu-id="6a347-202">Isso instrui o `dotnet build` a emitir um ponto de entrada para seu aplicativo, tornando o código efetivamente executável.</span><span class="sxs-lookup"><span data-stu-id="6a347-202">This instructs `dotnet build` to emit an entry point for your application, effectively making your code runnable.</span></span> <span data-ttu-id="6a347-203">Se você estiver criando uma biblioteca de classes, basta omita a seção acima.</span><span class="sxs-lookup"><span data-stu-id="6a347-203">If you are building a class library, simply omit the above section.</span></span> <span data-ttu-id="6a347-204">É claro que, uma vez adicionado o trecho de código acima ao `project.json` arquivo, você precisa adicionar um ponto de entrada estático.</span><span class="sxs-lookup"><span data-stu-id="6a347-204">Of course, once you add the above snippet to your `project.json` file, you need to add a static entry point.</span></span> <span data-ttu-id="6a347-205">Ao deixar de usar o DNX, os serviços de DI fornecidos por ele não estão mais disponíveis e, portanto, esse deve ser um ponto de entrada .NET básico: `static void Main()`.</span><span class="sxs-lookup"><span data-stu-id="6a347-205">With the move off DNX, the DI services it provided are no longer available and thus this needs to be a basic .NET entry point: `static void Main()`.</span></span>

<span data-ttu-id="6a347-206">Se você tiver uma seção "commands" em seu `project.json`, poderá removê-la.</span><span class="sxs-lookup"><span data-stu-id="6a347-206">If you have a "commands" section in your `project.json`, you can remove it.</span></span> <span data-ttu-id="6a347-207">Alguns dos comandos que existiam como comandos DNU, como comandos da CLI do Entity Framework, estão sendo portados para extensões por projeto para a CLI.</span><span class="sxs-lookup"><span data-stu-id="6a347-207">Some of the commands that used to exist as DNU commands, such as Entity Framework CLI commands, are being ported to be per-project extensions to the CLI.</span></span> <span data-ttu-id="6a347-208">Se você compilou seus próprios comandos que estão sendo usados em seus projetos, será necessário substituí-los por extensões CLI.</span><span class="sxs-lookup"><span data-stu-id="6a347-208">If you built your own commands that you are using in your projects, you need to replace them with CLI extensions.</span></span> <span data-ttu-id="6a347-209">Nesse caso, o nó `commands` em `project.json` precisa ser substituído pelo nó `tools` e ele precisa listar as dependências de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="6a347-209">In this case, the `commands` node in `project.json` needs to be replaced by the `tools` node and it needs to list the tools dependencies.</span></span> 

<span data-ttu-id="6a347-210">Depois de concluir essas coisas, você precisará decidir qual tipo de portabilidade deseja para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6a347-210">After these things are done, you need to decide which type of portability you wish for you app.</span></span> <span data-ttu-id="6a347-211">Com o .NET Core, investimos em fornecer uma variedade de opções de portabilidade à sua escolha.</span><span class="sxs-lookup"><span data-stu-id="6a347-211">With .NET Core, we have invested into providing a spectrum of portability options that you can choose from.</span></span> <span data-ttu-id="6a347-212">Por exemplo, você pode escolher um aplicativo totalmente *portátil* ou *autocontido*.</span><span class="sxs-lookup"><span data-stu-id="6a347-212">For instance, you may want to have a fully *portable* application or you may want to have a *self-contained* application.</span></span> <span data-ttu-id="6a347-213">A opção de aplicativo portátil parece-se com a maneira como os aplicativos do .NET Framework funcionam: ele precisa de um componente compartilhado para executá-lo no computador de destino (.NET Core).</span><span class="sxs-lookup"><span data-stu-id="6a347-213">The portable application option is more like .NET Framework applications work: it needs a shared component to execute it on the target machine (.NET Core).</span></span> <span data-ttu-id="6a347-214">O aplicativo autocontido não requer que o .NET Core seja instalado no destino, mas você deve produzir um aplicativo para cada sistema operacional ao qual você deseja dar suporte.</span><span class="sxs-lookup"><span data-stu-id="6a347-214">The self-contained application doesn't require .NET Core to be installed on the target, but you have to produce one application for each OS you wish to support.</span></span> <span data-ttu-id="6a347-215">Esses tipos de portabilidade e muito mais é discutido no documento [tipo de portabilidade do aplicativo](../deploying/index.md).</span><span class="sxs-lookup"><span data-stu-id="6a347-215">These portability types and more are discussed in the [application portability type](../deploying/index.md) document.</span></span> 

<span data-ttu-id="6a347-216">Depois de escolher qual tipo de portabilidade você deseja, será necessário alterar as estruturas de destino.</span><span class="sxs-lookup"><span data-stu-id="6a347-216">Once you make a call on what type of portability you want, you need to change your targeted framework(s).</span></span> <span data-ttu-id="6a347-217">Se estivesse criando aplicativos para .NET Core, você provavelmente usaria `dnxcore50` como sua estrutura de destino.</span><span class="sxs-lookup"><span data-stu-id="6a347-217">If you were writing applications for .NET Core, you were most likely using `dnxcore50` as  your targeted framework.</span></span> <span data-ttu-id="6a347-218">Com a CLI e as mudanças resultantes do novo [.NET Standard](../../standard/net-standard.md), a estrutura deve ser uma das seguintes:</span><span class="sxs-lookup"><span data-stu-id="6a347-218">With the CLI and the changes that the new [.NET Standard](../../standard/net-standard.md) brought, the framework needs to be one of the following:</span></span>

1. <span data-ttu-id="6a347-219">`netcoreapp1.0` – Se você estiver criando aplicativos no .NET Core (incluindo aplicativos ASP.NET Core)</span><span class="sxs-lookup"><span data-stu-id="6a347-219">`netcoreapp1.0` - if you are writing applications on .NET Core (including ASP.NET Core applications)</span></span>
2. <span data-ttu-id="6a347-220">`netstandard1.6` – Se você estiver criando bibliotecas de classes para .NET Core</span><span class="sxs-lookup"><span data-stu-id="6a347-220">`netstandard1.6` - if you are writing class libraries for .NET Core</span></span>

<span data-ttu-id="6a347-221">Se você estiver usando outros destinos `dnx` como o `dnx451`, será necessário alterá-los também.</span><span class="sxs-lookup"><span data-stu-id="6a347-221">If you are using other `dnx` targets, like `dnx451` you will need to change those as well.</span></span> <span data-ttu-id="6a347-222">`dnx451` deve ser alterado para `net451`.</span><span class="sxs-lookup"><span data-stu-id="6a347-222">`dnx451` should be changed to `net451`.</span></span> <span data-ttu-id="6a347-223">Consulte o tópico [.NET Standard](../../standard/net-standard.md) para saber mais.</span><span class="sxs-lookup"><span data-stu-id="6a347-223">Please refer to the [.NET Standard](../../standard/net-standard.md) topic for more information.</span></span> 

<span data-ttu-id="6a347-224">Seu `project.json` agora está quase pronto.</span><span class="sxs-lookup"><span data-stu-id="6a347-224">Your `project.json` is now mostly ready.</span></span> <span data-ttu-id="6a347-225">Você precisa examinar a lista de dependências e atualizá-las para suas versões mais recentes, especialmente se estiver usando dependências ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="6a347-225">You need to go through your dependencies list and update the dependencies to their newer versions, especially if you are using ASP.NET Core dependencies.</span></span> <span data-ttu-id="6a347-226">Se estiver usando pacotes separados para as APIs BCL, poderá usar o pacote de tempo de execução, conforme explicado no documento [tipo de portabilidade do aplicativo](../deploying/index.md).</span><span class="sxs-lookup"><span data-stu-id="6a347-226">If you were using separate packages for BCL APIs, you can use the runtime package as explained in the [application portability type](../deploying/index.md) document.</span></span> 

<span data-ttu-id="6a347-227">Quando estiver pronto, tente fazer a restauração com `dotnet restore` ([veja observação](#dotnet-restore-note)).</span><span class="sxs-lookup"><span data-stu-id="6a347-227">Once you are ready, you can try restoring with `dotnet restore` ([see note](#dotnet-restore-note)).</span></span> <span data-ttu-id="6a347-228">Dependendo da versão das suas dependências, você poderá encontrar erros se o NuGet não puder resolvê-las para um das estruturas de destino acima.</span><span class="sxs-lookup"><span data-stu-id="6a347-228">Depending on the version of your dependencies, you may encounter errors if NuGet cannot resolve the dependencies for one of the targeted frameworks above.</span></span> <span data-ttu-id="6a347-229">Este é um problema “pontual”, pois à medida que o tempo passa, cada vez mais pacotes incluirão suporte a essas estruturas.</span><span class="sxs-lookup"><span data-stu-id="6a347-229">This is a "point-in-time" problem; as time progresses, more and more packages will include support for these frameworks.</span></span> <span data-ttu-id="6a347-230">Por enquanto, se você enfrentar isso, poderá usar a instrução `imports` dentro do nó `framework` para especificar para o NuGet que ele pode restaurar os pacotes direcionando a estrutura dentro da instrução "imports".</span><span class="sxs-lookup"><span data-stu-id="6a347-230">For now, if you run into this, you can use the `imports` statement within the `framework` node to specify to NuGet that it can restore the packages targeting the framework within the "imports" statement.</span></span> <span data-ttu-id="6a347-231">Os erros de restauração obtidos nesse caso devem fornecer informações suficientes para indicar quais estruturas você precisa importar.</span><span class="sxs-lookup"><span data-stu-id="6a347-231">The restoring errors you get in this case should provide enough information to tell you which frameworks you need to import.</span></span> <span data-ttu-id="6a347-232">Se você ficar um pouco confuso ou não tiver experiência nisso, especificar `dnxcore50` e `portable-net45+win8` na instrução `imports` geralmente é suficiente.</span><span class="sxs-lookup"><span data-stu-id="6a347-232">If you are slightly lost or new to this, in general, specifying `dnxcore50` and `portable-net45+win8` in the `imports` statement should do the trick.</span></span> <span data-ttu-id="6a347-233">O trecho de código JSON a seguir mostra como isso se parece:</span><span class="sxs-lookup"><span data-stu-id="6a347-233">The JSON snippet below shows how this looks like:</span></span>

```json
    "frameworks": {
        "netcoreapp1.0": { 
            "imports": ["dnxcore50", "portable-net45+win8"]
        }
    }
```

<span data-ttu-id="6a347-234">Executar `dotnet build` mostrará os eventuais erros de build, porém não deve haver muitos.</span><span class="sxs-lookup"><span data-stu-id="6a347-234">Running `dotnet build` will show any eventual build errors, though there shouldn't be too many of them.</span></span> <span data-ttu-id="6a347-235">Depois de o código ser criado e executado corretamente, você poderá testá-lo com o executor.</span><span class="sxs-lookup"><span data-stu-id="6a347-235">After your code is building and running properly, you can test it out with the runner.</span></span> <span data-ttu-id="6a347-236">Execute `dotnet <path-to-your-assembly>` e observe a execução.</span><span class="sxs-lookup"><span data-stu-id="6a347-236">Execute `dotnet <path-to-your-assembly>` and see it run.</span></span>

<a name="dotnet-restore-note"></a>
[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]