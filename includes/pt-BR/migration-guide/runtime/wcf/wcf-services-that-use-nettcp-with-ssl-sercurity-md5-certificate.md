### <a name="wcf-services-that-use-nettcp-with-ssl-sercurity-and-md5-certificate-authentication"></a>Serviços WCF que usam NETTCP com segurança SSL e autenticação de certificado MD5

|   |   |
|---|---|
|Detalhes|O .NET Framework 4.6 adiciona o TLS 1.1 e o TLS 1.2 à lista padrão de protocolos SSL do WCF. Quando os computadores cliente e servidor têm o .NET Framework 4.6 ou versões posteriores instaladas, o TLS 1.2 é usado para negociação. O TLS 1.2 não é compatível com a autenticação do certificado MD5. Consequentemente, se um cliente usar um certificado MD5, o cliente WCF falhará ao se conectar ao serviço WCF.<ul><li>[ ] Quirked // Usa algum mecanismo para ativar ou desativar o recurso, geralmente usando direcionamento de tempo de execução, AppContext ou arquivos de configuração. Deve ser ativado automaticamente para algumas situações.</li><li>[ ] Intervalo do tempo de compilação // Provoca um intervalo se há tentativa de recompilação</li></ul>|
|Sugestão|Você pode contornar esse problema para que um cliente WCF possa se conectar a um servidor WCF seguindo um destes procedimentos:<ul><li>Atualize o certificado para não usar o algoritmo MD5. Esta é a solução recomendada.</li><li>Se a associação não tiver sido configurada dinamicamente no código-fonte, atualize o arquivo de configuração de aplicativo para usar o TLS 1.1 ou uma versão anterior do protocolo. Isso permite que você continue usando um certificado com o algoritmo de hash MD5.</li></ul>
<blockquote>
[!WARNING] Essa solução alternativa não é recomendada, pois um certificado com o algoritmo de hash MD5 é considerado inseguro.</blockquote>
O arquivo de configuração que se segue demonstra isso:<pre><code>&lt;configuration&gt;&#13;&#10;&lt;system.serviceModel&gt;&#13;&#10;&lt;bindings&gt;&#13;&#10;&lt;netTcpBinding&gt;&#13;&#10;&lt;binding&gt;&#13;&#10;&lt;security mode= &quot;None|Transport|Message|TransportWithMessageCredential&quot; &gt;&#13;&#10;&lt;transport clientCredentialType=&quot;None|Windows|Certificate&quot;&#13;&#10;protectionLevel=&quot;None|Sign|EncryptAndSign&quot;&#13;&#10;sslProtocols=&quot;Ssl3|Tls1|Tls11&quot;&gt;&#13;&#10;&lt;/transport&gt;&#13;&#10;&lt;/security&gt;&#13;&#10;&lt;/binding&gt;&#13;&#10;&lt;/netTcpBinding&gt;&#13;&#10;&lt;/bindings&gt;&#13;&#10;&lt;/system.ServiceModel&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre><ul><li>Se a associação foi configurada dinamicamente no código-fonte, atualize a propriedade <xref:System.ServiceModel.TcpTransportSecurity.SslProtocols?displayProperty=nameWithType> para usar o TLS 1.1 (<xref:System.Security.Authentication.SslProtocols.Tls11?displayProperty=nameWithType>) ou uma versão anterior do protocolo no código-fonte.</li></ul>
<blockquote>
[!WARNING] Essa solução alternativa não é recomendada, pois um certificado com o algoritmo de hash MD5 é considerado inseguro.</blockquote>| |Escopo|Desconhecido| |Versão|4.6| |Tipo|Tempo de execução|

