---
ms.openlocfilehash: e86542cbf96025247a29a860bfd44db5383c9d16
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59803106"
---
### <a name="sslstream-supports-tls-alerts"></a>SslStream dá suporte a Alertas de TLS

|   |   |
|---|---|
|Detalhes|Após um handshake de TLS com falha, um <xref:System.IO.IOException?displayProperty=name> com uma exceção <xref:System.ComponentModel.Win32Exception?displayProperty=name> interna será lançado pela primeira operação de Leitura/Gravação de E/S. O código <xref:System.ComponentModel.Win32Exception.NativeErrorCode?displayProperty=name> do <xref:System.ComponentModel.Win32Exception?displayProperty=name> pode ser mapeado para o alerta TLS da parte remota usando os [Códigos de erro do Schannel para alertas TLS e SSL](https://docs.microsoft.com/windows/desktop/SecAuthN/schannel-error-codes-for-tls-and-ssl-alerts). Para saber mais, confira [RFC 2246: Seção 7.2.2 Alertas de erro](https://tools.ietf.org/html/rfc2246#section-7.2.2). <br/>O comportamento no .NET Framework 4.6.2 e nas versões anteriores é que o canal de transporte (normalmente a conexão TCP) atingirá o tempo limite durante a gravação ou a leitura se a outra parte falhar no handshake e rejeitar a conexão logo depois.|
|Sugestão|Os aplicativos que chamam APIs de E/S de rede, como <xref:System.IO.Stream.Read(System.Byte[],System.Int32,System.Int32)>/<xref:System.IO.Stream.Write(System.Byte[],System.Int32,System.Int32)>, devem tratar <xref:System.IO.IOException> ou <xref:System.TimeoutException?displayProperty=name>.<br/>O recurso de Alertas TLS é habilitado por padrão, começando com o .NET Framework 4.7. Os aplicativos direcionados às versões 4.0 a 4.6.2 do .NET Framework em execução no .NET Framework 4.7 ou em um sistema superior terão o recurso desabilitado para preservar a compatibilidade. <br/>A API de configuração a seguir está disponível para habilitar ou desabilitar o recurso para os aplicativos do .NET Framework 4.6 e posteriores em execução no .NET Framework 4.7 ou posterior.<ul><li>Programaticamente:</li></ul>Deve ser a primeira coisa que o aplicativo faz, uma vez que ServicePointManager é inicializado apenas uma vez:<pre><code class="lang-csharp">AppContext.SetSwitch(&quot;TestSwitch.LocalAppContext.DisableCaching&quot;, true);&#13;&#10;AppContext.SetSwitch(&quot;Switch.System.Net.DontEnableTlsAlerts&quot;, true); // Set to &#39;false&#39; to enable the feature in .NET Framework 4.6 - 4.6.2.&#13;&#10;</code></pre><ul><li>AppConfig:</li></ul><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Net.DontEnableTlsAlerts=true&quot;/&gt;&#13;&#10;&lt;!-- Set to &#39;false&#39; to enable the feature in .NET Framework 4.6 - 4.6.2. --&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><ul><li>Chave do Registro (máquina global):</p>Defina o valor como <code>false</code> para habilitar o recurso no .NET Framework 4.6 a 4.6.2.<ul><li>>Key: HKLM\SOFTWARE\Wow6432Node\Microsoft\\.NETFramework\AppContext\Switch.System.Net.DontEnableTlsAlerts</li><li>Tipo: Cadeia de Caracteres</li><li>Valor: &quot;true&quot</li></ul></ul> |
|Escopo|Microsoft Edge|
|Versão|4.7|
|Tipo|Redirecionando|
|APIs afetadas|<ul><li><xref:System.Net.Security.SslStream?displayProperty=nameWithType></li><li><xref:System.Net.WebRequest?displayProperty=nameWithType></li><li><xref:System.Net.HttpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.FtpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.Mail.SmtpClient?displayProperty=nameWithType></li><li><xref:System.Net.Http?displayProperty=nameWithType></li></ul>|
