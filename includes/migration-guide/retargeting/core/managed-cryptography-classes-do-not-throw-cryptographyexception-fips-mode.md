---
ms.openlocfilehash: 2b768047a8b08501a8de4666d240072318427f28
ms.sourcegitcommit: d55e14eb63588830c0ba1ea95a24ce6c57ef8c8c
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2019
ms.locfileid: "67803561"
---
### <a name="managed-cryptography-classes-do-not-throw-a-cryptographyexception-in-fips-mode"></a>Classes de criptografia gerenciadas não geram uma CryptographyException no modo FIPS

|   |   |
|---|---|
|Detalhes|No .NET Framework 4.7.2 e em versões anteriores, as classes de provedor criptográfico gerenciadas, como <xref:System.Security.Cryptography.SHA256Managed>, geram uma <xref:System.Security.Cryptography.CryptographicException> quando as bibliotecas criptográficas do sistema estão configuradas no modo FIPS. Essas exceções são geradas porque as versões gerenciadas não foram submetidas à certificação 140-2 do padrão FIPS para bloquear algoritmos criptográficos que não foram considerados aprovados com base nas regras do FIPS.  Como poucos desenvolvedores têm computadores de desenvolvimento no modo FIPS, essas exceções são frequentemente geradas apenas em sistemas de produção. Aplicativos que direcionam o .NET Framework 4.8 e versões posteriores mudam automaticamente para a política flexibilizada mais recente para que um <xref:System.Security.Cryptography.CryptographicException> não seja mais gerado por padrão nesses casos. Em vez disso, as classes de criptografia gerenciadas redirecionam as operações criptográficas para uma biblioteca de criptografia do sistema. Essa alteração na política elimina efetivamente uma diferença potencialmente confusa entre os ambientes do desenvolvedor e os ambientes de produção, fazendo com que componentes nativos e componentes gerenciados operem sob a mesma política criptográfica.|
|Sugestão|Se esse comportamento for indesejável, será possível recusá-lo e restaurar o anterior para que um <xref:System.Security.Cryptography.CryptographicException> seja gerado em modo FIPS adicionando a configuração a seguir [AppContextSwitchOverrides](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) à seção [<runtime>](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) do arquivo de configuração de aplicativo:<pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.UseLegacyFipsThrow=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>Se seu aplicativo direcionar o .NET Framework 4.7.2 ou versões anteriores, também será possível aceitar essa alteração adicionando a seguinte configuração [AppContextSwitchOverrides](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) à seção [<runtime>](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) do arquivo de configuração de aplicativo:<pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.UseLegacyFipsThrow=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>|
|Escopo|Microsoft Edge|
|Versão|4.8|
|Tipo|Redirecionando|
|APIs afetadas|<ul><li><xref:System.Security.Cryptography.AesManaged?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.MD5Cng?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.MD5CryptoServiceProvider?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.RC2CryptoServiceProvider?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.RijndaelManaged?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.RIPEMD160Managed?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.SHA1Managed?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.SHA256Managed?displayProperty=nameWithType></li></ul>|

